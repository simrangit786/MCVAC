(this.webpackJsonpmcvac=this.webpackJsonpmcvac||[]).push([[0],Array(215).concat([function(e,a,t){e.exports=t.p+"static/media/Measuring-tape-black.f58e820d.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/person-group-green-icon-main.20eb6bc3.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/logo-small-login.0fe943e1.svg"},function(e,a,t){e.exports=t.p+"static/media/logo-small-new-login.7e8ec6e7.svg"},function(e,a,t){e.exports=t.p+"static/media/logo-fav-sidebar.59000d31.svg"},function(e,a,t){e.exports=t.p+"static/media/eye-open.d678d2aa.svg"},function(e,a,t){e.exports=t.p+"static/media/password-changed-lock.7e1460ad.svg"},function(e,a,t){e.exports=t.p+"static/media/pull-push-gray-icon.15bc64c9.svg"},function(e,a,t){e.exports=t.p+"static/media/white-plus.f9a8d55c.svg"},function(e,a,t){e.exports=t.p+"static/media/account-admin.97c76552.svg"},function(e,a,t){e.exports=t.p+"static/media/search.86649e53.svg"},function(e,a,t){e.exports=t.p+"static/media/filter-icon.c2ffd08a.svg"},function(e,a,t){e.exports=t.p+"static/media/package-icon-vehicle.a2252899.svg"},function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAPCAYAAAAh6nXEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB+SURBVHgBdU6xDYQwDMQ2A6R8JQ0jRMkADxswCpRMQU3HBlBSsgYVa9Ak4UCIDkv2Wefz2eSc64moSSm1orVeMgSInxhjCGzBzEP2HdZahSzvPe/9DiyQK6OoR6Qu6w3NEULovs0IThYH6xjjmIvIdLkB/4xXXlmOcQVZCZxPAT0jvZVSr5IAAAAASUVORK5CYII="},function(e,a,t){e.exports=t.p+"static/media/Contacts-widget-icon.3e7a4705.svg"},function(e,a,t){e.exports=t.p+"static/media/no-data-labor-icon.2ec73a12.svg"},function(e,a,t){e.exports=t.p+"static/media/grid-view-icon.e7209b79.svg"},function(e,a,t){e.exports=t.p+"static/media/grid-view-active.7a7efc9e.svg"},function(e,a,t){e.exports=t.p+"static/media/list-view-icon.62146352.svg"},function(e,a,t){e.exports=t.p+"static/media/list-view-active.3c92bd45.svg"},function(e,a,t){e.exports=t.p+"static/media/person-gray-small.c7f3b61e.svg"},function(e,a,t){e.exports=t.p+"static/media/person-round-gray-small.5c1247b8.svg"},function(e,a,t){e.exports=t.p+"static/media/creq-chef.07d5ae17.svg"},function(e,a,t){e.exports=t.p+"static/media/plus-green.4e4cf96a.svg"},function(e,a,t){e.exports=t.p+"static/media/account-gray.03da1d10.svg"},function(e,a,t){e.exports=t.p+"static/media/contacts-gray.a5a41e9a.svg"},function(e,a,t){e.exports=t.p+"static/media/leads-gray.5038dd55.svg"},function(e,a,t){e.exports=t.p+"static/media/proposal-gray.2f3a5774.svg"},function(e,a,t){e.exports=t.p+"static/media/project-gray-.5eaa4137.svg"},function(e,a,t){e.exports=t.p+"static/media/work-gray.257c05bc.svg"},function(e,a,t){e.exports=t.p+"static/media/routes-gray.42d53680.svg"},function(e,a,t){e.exports=t.p+"static/media/time-gray.a9c2c82d.svg"},function(e,a,t){e.exports=t.p+"static/media/analytics-gray.500ce8f4.svg"},function(e,a,t){e.exports=t.p+"static/media/billing-gray.0f28b009.svg"},function(e,a,t){e.exports=t.p+"static/media/leads-green-icons.856fa373.svg"},function(e,a,t){e.exports=t.p+"static/media/owner-account-gray.6f6b3802.svg"},function(e,a,t){e.exports=t.p+"static/media/owner-account-green-icons.8c8bc699.svg"},function(e,a,t){e.exports=t.p+"static/media/contacts-green-icon.91fd2c72.svg"},function(e,a,t){e.exports=t.p+"static/media/profit-graph-img.056b910c.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-green-small.e2cd1f75.svg"},function(e,a,t){e.exports=t.p+"static/media/propsal-icon-card.55713085.svg"},function(e,a,t){e.exports=t.p+"static/media/work-icon-card-img.d4d4b057.svg"},function(e,a,t){e.exports=t.p+"static/media/person-icon-green-img.48beeab5.svg"},function(e,a,t){e.exports=t.p+"static/media/leads-icon-gereen-img.adf555a7.svg"},function(e,a,t){e.exports=t.p+"static/media/list-view.02ac3ed4.svg"},function(e,a,t){e.exports=t.p+"static/media/calendar-icon-gray-.e44b98d5.svg"},function(e,a,t){e.exports=t.p+"static/media/down-small-caret-green.9b3e775f.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-down-red.55f1cb92.svg"},function(e,a,t){e.exports=t.p+"static/media/add-plus-icon.73c267de.svg"},function(e,a,t){e.exports=t.p+"static/media/add-team-user.75b38373.svg"},function(e,a,t){e.exports=t.p+"static/media/work-tab-icon.699893d2.svg"},function(e,a,t){e.exports=t.p+"static/media/proposal-tab-icon.4c915b0b.svg"},function(e,a,t){e.exports=t.p+"static/media/folder-tab-icon.32ce9b1d.svg"},function(e,a,t){e.exports=t.p+"static/media/leads-tab-icon.58069fde.svg"},function(e,a,t){e.exports=t.p+"static/media/truck-icon-plus.af61c760.svg"},function(e,a,t){e.exports=t.p+"static/media/related_work_icon.b6c2a484.svg"},function(e,a,t){e.exports=t.p+"static/media/show_related-icon.073bf2d4.svg"},function(e,a,t){e.exports=t.p+"static/media/saleperson-icon.c2f90c13.svg"},function(e,a,t){e.exports=t.p+"static/media/region-icon.d6fbb441.svg"},function(e,a,t){e.exports=t.p+"static/media/remove-green-icon.62e22fca.svg"},function(e,a,t){e.exports=t.p+"static/media/eva_more-vertical-fill.a45e4072.svg"},function(e,a,t){e.exports=t.p+"static/media/icomoon-free_move-down.c2caa9c5.svg"},function(e,a,t){e.exports=t.p+"static/media/move_right_sales.27908ea4.svg"},function(e,a,t){e.exports=t.p+"static/media/sort-white.9d61e207.svg"},function(e,a,t){e.exports=t.p+"static/media/settings-white.29cbef79.svg"},function(e,a,t){e.exports=t.p+"static/media/delete-outline.42bc2f61.svg"},function(e,a,t){e.exports=t.p+"static/media/search-small.86649e53.svg"},function(e,a,t){e.exports=t.p+"static/media/caret-down-black.d79fb5b3.svg"},function(e,a,t){e.exports=t.p+"static/media/cloud-upload.b3dcf07e.svg"},function(e,a,t){e.exports=t.p+"static/media/contacts-icon-black.cd6efe42.svg"},function(e,a,t){e.exports=t.p+"static/media/close-icon-gray.b0427de0.svg"},function(e,a,t){e.exports=t.p+"static/media/information-small.6bf963c0.svg"},function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABaSURBVHgB7dS7CcAwDATQS8gQKZUq+4+TKiq9hT/gwhiDucK4uQdqBEIIDgEirdvevxQzc4FjIJ1YTAumjlGzJsXA8eDf0zeXX0DJl8VSzIxStH8B+4scIr0E24sLVHNJiZkAAAAASUVORK5CYII="},function(e,a,t){e.exports=t.p+"static/media/paper-docs.3b2579f2.svg"},function(e,a,t){e.exports=t.p+"static/media/note-add-new-icon.ebd6fc13.svg"},function(e,a,t){e.exports=t.p+"static/media/proposal-icon-add.9f351d27.svg"},function(e,a,t){e.exports=t.p+"static/media/Time.d69c6ddf.svg"},function(e,a,t){e.exports=t.p+"static/media/Tasks.1cb5f7d1.svg"},function(e,a,t){e.exports=t.p+"static/media/check-icon.64702fb2.svg"},function(e,a,t){e.exports=t.p+"static/media/warning.d5ce6c84.svg"},function(e,a,t){e.exports=t.p+"static/media/service-warning.f5273c8d.svg"},function(e,a,t){e.exports=t.p+"static/media/pencil-green.2b491aa2.svg"},function(e,a,t){e.exports=t.p+"static/media/caret-down-small.7602b79b.svg"},function(e,a,t){e.exports=t.p+"static/media/flag-green.cbdc837b.svg"},function(e,a,t){e.exports=t.p+"static/media/dollor-file-primary.4838a3dc.svg"},function(e,a,t){e.exports=t.p+"static/media/contacts-icon-union.a4b1869f.svg"},function(e,a,t){e.exports=t.p+"static/media/note-icon.fdbcfb32.svg"},function(e,a,t){e.exports=t.p+"static/media/note-header-icon.59b1c010.svg"},function(e,a,t){e.exports=t.p+"static/media/right-arrow-icons-drawer.017df8e2.svg"},function(e,a,t){e.exports=t.p+"static/media/delete-outline-drawer.438bff31.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-right-breadcrumb.94df385b.svg"},function(e,a,t){e.exports=t.p+"static/media/view-perposal-icon.ce7cbae6.svg"},function(e,a,t){e.exports=t.p+"static/media/more-elipsis-icon.b198a31d.svg"},function(e,a,t){e.exports=t.p+"static/media/close-white-icon.62e67fc6.svg"},function(e,a,t){e.exports=t.p+"static/media/folder.3c4eaee8.svg"},function(e,a,t){e.exports=t.p+"static/media/circle-checked.ac71704d.svg"},function(e,a,t){e.exports=t.p+"static/media/Plus-rounded.4141ebd8.svg"},function(e,a,t){e.exports=t.p+"static/media/download.46983a5d.svg"},function(e,a,t){e.exports=t.p+"static/media/trash.75356881.svg"},function(e,a,t){e.exports=t.p+"static/media/create-post-icon-gray.9887ccbb.svg"},function(e,a,t){e.exports=t.p+"static/media/elipsis-icon-gray.687bd9c3.svg"},function(e,a,t){e.exports=t.p+"static/media/person-black-icon.e2d83b94.svg"},function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEISURBVHgB7ZTbDYJAEEWHhQIsgRJswcC/dqAdaAdaAnQgFSj/EOxAS6AECiDgHR8JrggD+GPkJBv2fWfvLEs08pcYekeSJHZZlgeUKXUjVUrNQKoPKL2jKIpVDwHGxtpF3YBFcjKIB1wxDGPOm9bMmdAAkRcrYKmHqM+fNtVRkkmIPKx6zXX0BSREJDIUkQhyseRb92w/buCchEhzMkEOkiiKQm6gviRhPrqIMDbysKYeSEQyRO7je8rzPL0tsiwWXDRcZbkIfPdN09w5jpNpQymLomxgodd2wkYR13U31AIHgZP2F4njeEctQKBtSq1I1ZotfYG3/wTPx5HunncCeblg7Z5GfoIrV5hjvSRNXF8AAAAASUVORK5CYII="},function(e,a,t){e.exports=t.p+"static/media/contact-file-icon-black.2d57dd1d.svg"},function(e,a,t){e.exports=t.p+"static/media/menu-fold-icons.4ae66867.svg"},function(e,a,t){e.exports=t.p+"static/media/more-black.7b514f30.svg"},function(e,a,t){e.exports=t.p+"static/media/email-inbox-icon.23bc6b4d.svg"},function(e,a,t){e.exports=t.p+"static/media/call-add.4845eb64.svg"},function(e,a,t){e.exports=t.p+"static/media/folder-icon-black.fd0e1fb0.svg"},function(e,a,t){e.exports=t.p+"static/media/customer-shade-icon-green.2a4c8c91.svg"},function(e,a,t){e.exports=t.p+"static/media/owner.e42ae8c5.svg"},function(e,a,t){e.exports=t.p+"static/media/Vendor.f0c98e24.svg"},function(e,a,t){e.exports=t.p+"static/media/Contacts.dd26cdaf.svg"},function(e,a,t){e.exports=t.p+"static/media/Opportunities.e28ebc3a.svg"},function(e,a,t){e.exports=t.p+"static/media/Proposals.b0994d50.svg"},function(e,a,t){e.exports=t.p+"static/media/Projects.9ed143f0.svg"},function(e,a,t){e.exports=t.p+"static/media/WorkOrders.e0726cd1.svg"},function(e,a,t){e.exports=t.p+"static/media/Dispatch.5d292b19.svg"},function(e,a,t){e.exports=t.p+"static/media/Fleet.e870d26b.svg"},function(e,a,t){e.exports=t.p+"static/media/Supplies.54345f9c.svg"},function(e,a,t){e.exports=t.p+"static/media/Equipment.acea18f7.svg"},function(e,a,t){e.exports=t.p+"static/media/Labor.b6f3729c.svg"},function(e,a,t){e.exports=t.p+"static/media/lineItem.b9823258.svg"},function(e,a,t){e.exports=t.p+"static/media/Sheet.4657c7dc.svg"},function(e,a,t){e.exports=t.p+"static/media/AR.04bea66d.svg"},function(e,a,t){e.exports=t.p+"static/media/AP.8226d6a3.svg"},function(e,a,t){e.exports=t.p+"static/media/Cash.f14ec625.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory.a5889565.svg"},function(e,a,t){e.exports=t.p+"static/media/Reports.2ab72597.svg"},function(e,a,t){e.exports=t.p+"static/media/ChartofAccounts.ef5f1bfd.svg"},function(e,a,t){e.exports=t.p+"static/media/question-mark-bg-green.c162d082.svg"},function(e,a,t){e.exports=t.p+"static/media/collapse-open-icon.4a4f6465.svg"},function(e,a,t){e.exports=t.p+"static/media/billing-cost-icon.4956af72.svg"},function(e,a,t){e.exports=t.p+"static/media/billing-gray-no-img.ac028e0f.svg"},function(e,a,t){e.exports=t.p+"static/media/staff-icon-gray.c283362b.svg"},function(e,a,t){e.exports=t.p+"static/media/person-group-black-icon.c45333c4.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-small-breadcrumb.193336f7.svg"},function(e,a,t){e.exports=t.p+"static/media/create-inventory-group-icon.a95caa35.svg"},function(e,a,t){e.exports=t.p+"static/media/create-supply-package-icon.6bca3f79.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-package-icon-new.27613c71.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-icon-black.7a122e65.svg"},function(e,a,t){e.exports=t.p+"static/media/line-items-group-icon.e038c879.svg"},function(e,a,t){e.exports=t.p+"static/media/select-operator-icon-green.63c297f8.svg"},function(e,a,t){e.exports=t.p+"static/media/create-vehicle-group-icon.6183a0dd.svg"},function(e,a,t){e.exports=t.p+"static/media/vehicle-group-small-icon.1882da74.svg"},function(e,a,t){e.exports=t.p+"static/media/truck-black-icon.039cc50d.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory-black-icon.2817fa47.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-gray-icon-small.b5797d27.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-gear-icons-black.87337d37.svg"},function(e,a,t){e.exports=t.p+"static/media/line-items-gray-small.bb7fd9c7.svg"},function(e,a,t){e.exports=t.p+"static/media/folder-icon-green-mian.91e8645a.svg"},function(e,a,t){e.exports=t.p+"static/media/branch-icon-gray.a71496df.svg"},function(e,a,t){e.exports=t.p+"static/media/list-nested-icon-green.90d9152e.svg"},function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgB3ZU5SwNBAIXfbDYRV7zwRMGjUUELIeABCgGvxvMfaKGNWvsrLDRWWqiF2KmFTTwgoGIIeBQKwUJRjIgsBkxc8co6M0ZNdDeycdP4we7Ozsy+N/Nm2CGIUO+asAuCMKSCVABqOoxAyJWndaRbq0lkt8Z1JxUGuygqzERscE12MfGI9LSYqizuNI0FYRIisZBOlSqHBWHc2zK8yCob1p0O+nDAIITgcLd1dCXGgIrbWcEaCq1y8c2pWTqVfiSA+v79nKdlZOCjTvgo7PSMBes2nL2Jike59EcSiDXgLypqYQ4OTYNkkHQDUa+hRMqGPbtIs605txy5KWnYks8wc+pFQgaMvuIazfpl/xGUl2dIohUdhRVwXZ/oauhGdKEE4Ave6H7IhOVHJTKQauMGjL1bf7xmGmMmJIuVR1aVka/ZJ25Eyuszj0MLyWKjs6j8fM+zSfAZNWjOK0OOLQ1rNGO2HizzaNgCt9OoSqUsXY24Bkv+Y56v/BTC+UMgZscMltfxdZIf77FwccDLhg18dzfYpjOoyijg4kzsc/RnXr7Q+4FL3k9/BvSwiGfC9jrkn/V85OcH+A1R7yQyi+/b1A0TCIdxqGngaRt10//tPP6EOu/t+Dp0iFYXdi4k+Ot2vw/yP/EGYxml0NP6TYEAAAAASUVORK5CYII="},function(e,a,t){e.exports=t.p+"static/media/inventory-green-icon.c25e44d2.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-green-icon.b44b8063.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-green.fbd76736.svg"},function(e,a,t){e.exports=t.p+"static/media/line-item-green-icon.802ef613.svg"},function(e,a,t){e.exports=t.p+"static/media/pdf.0116dc7b.svg"},function(e,a,t){e.exports=t.p+"static/media/send-icon-white.c06f4104.svg"},function(e,a,t){e.exports=t.p+"static/media/leads-black-icon.d7daf976.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory-kits-gray-icon.aa53dda5.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-kits-gray.889e5d1c.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-gray-small-right.193336f7.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory-green-box-icon.1b36b8e0.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory-Set-green-box.0c91907f.svg"},function(e,a,t){e.exports=t.p+"static/media/information-green-icon.2bfcc1e7.svg"},function(e,a,t){e.exports=t.p+"static/media/location-black.44867c8e.svg"},function(e,a,t){e.exports=t.p+"static/media/new-sub-tier-green.5eb773ae.svg"},function(e,a,t){e.exports=t.p+"static/media/truck-icon-green.1882da74.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-sub-tier.561a747e.svg"},function(e,a,t){e.exports=t.p+"static/media/supply_package_green.c805a719.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory-sub-tier-green.78a070ea.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-kit-sub-tier-green.b7be6081.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-icon-new.b1bd5659.svg"},function(e,a,t){e.exports=t.p+"static/media/labor-sub-tier-green.36d99fcf.svg"},function(e,a,t){e.exports=t.p+"static/media/truck-group-tier-green-icon.7bad0bbd.svg"},function(e,a,t){e.exports=t.p+"static/media/tubing-group-icon-green.5c9d1f6a.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-right-small-search-select.f9fb4fc6.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-set-group-icon-green.2b44fd71.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-siger-group-icon-green.28e560be.svg"},function(e,a,t){e.exports=t.p+"static/media/new-add-plus-green-icon.b425882a.svg"},function(e,a,t){e.exports=t.p+"static/media/rectangle-gray.0b788b82.svg"},function(e,a,t){e.exports=t.p+"static/media/rectangle-green-icon.dad3fe89.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory_package.85c033b3.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory_group.0690e3d8.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory_subtier.df2da443.svg"},function(e,a,t){e.exports=t.p+"static/media/vehicle_package.20c650b8.svg"},function(e,a,t){e.exports=t.p+"static/media/vehicle_group.6521cfa0.svg"},function(e,a,t){e.exports=t.p+"static/media/vehicle_subtier.d81c4415.svg"},function(e,a,t){e.exports=t.p+"static/media/line_package.606482e2.svg"},function(e,a,t){e.exports=t.p+"static/media/create_ac_checkmark.3a561aa6.svg"},function(e,a,t){e.exports=t.p+"static/media/associated_accounts-img.6fdc35a9.svg"},function(e,a,t){e.exports=t.p+"static/media/pricing-icon.9e75e989.svg"},function(e,a,t){e.exports=t.p+"static/media/empty_upload.d141e23d.svg"},function(e,a,t){e.exports=t.p+"static/media/disposal.eb41eafc.svg"},function(e,a,t){e.exports=t.p+"static/media/disposal-sidebar.3993b899.svg"},function(e,a,t){e.exports=t.p+"static/media/treeArrow.afb61a97.svg"},function(e,a,t){e.exports=t.p+"static/media/Disposal-green.41695bce.svg"},function(e,a,t){e.exports=t.p+"static/media/measuring-tape-gray-icon.b907f017.svg"},function(e,a,t){e.exports=t.p+"static/media/Measuring tape-new-gray.449d600a.svg"},function(e,a,t){e.exports=t.p+"static/media/vendor-icon-gray.68115a01.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-small-caret-gray.672cb8dc.svg"},function(e,a,t){e.exports=t.p+"static/media/waste-management-black-icon.c359cff8.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-group-icon.52d67aa8.svg"},function(e,a,t){e.exports=t.p+"static/media/Account-black.b7fcb818.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory_tier_icon.41cc777f.svg"},function(e,a,t){e.exports=t.p+"static/media/fleet-group.90ee0f47.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory_sm_icon.8109942b.svg"},function(e,a,t){e.exports=t.p+"static/media/vendor-accounts-inactive-img.c3288b2c.svg"},function(e,a,t){e.exports=t.p+"static/media/work-orders-inactive-icon.efc4ca58.svg"},function(e,a,t){e.exports=t.p+"static/media/Dispatch-inactive-icons.0504d8ac.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-empty.37bcd99d.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-item-empty.059a9c52.svg"},function(e,a,t){e.exports=t.p+"static/media/tree-warning.4ec4a140.svg"},function(e,a,t){e.exports=t.p+"static/media/Vector.07d1be51.svg"},function(e,a,t){e.exports=t.p+"static/media/account-white-dashboard-icon.6020d273.svg"},function(e,a,t){e.exports=t.p+"static/media/sales-white-db.295505a3.svg"},function(e,a,t){e.exports=t.p+"static/media/work-order-white-db.0904fffe.svg"},function(e,a,t){e.exports=t.p+"static/media/Management-white-db.27a5c1a6.svg"},function(e,a,t){e.exports=t.p+"static/media/accounting-white-db.fc68dfda.svg"},function(e,a,t){e.exports=t.p+"static/media/analytics-white-db.8a1aede4.svg"},function(e,a,t){e.exports=t.p+"static/media/data-white-db.0636eb35.svg"},function(e,a,t){e.exports=t.p+"static/media/truck-empty.29d99096.svg"},function(e,a,t){e.exports=t.p+"static/media/truck.2cf5b610.svg"},function(e,a,t){e.exports=t.p+"static/media/info-yellow.2673fe25.svg"},function(e,a,t){e.exports=t.p+"static/media/Measuring-tape-black.50628bbd.svg"},function(e,a,t){e.exports=t.p+"static/media/check-icon-green.3ebdf435.svg"},function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAbCAYAAABiFp9rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF5SURBVHgB7VVNboJAGB0QXanhBnoEewIgISTsuEHtDdobtCdovQGeALoiARLoDXoEegOWLPjpmwSTYURAqy6qL/ky+pjvPWbmmw9C7rgWHMeRfd9fkSMhDJlExafT6UoQhEeEBUpGJIi4KIqNYRjffRpCl/h8PreqqlIY8UNIyrLc5HnumqaZ9Box4vTNVz3irUBuDNMtVhqzphI7aTabORhUmJBTgVx1NBqpoih+4q+140VyIcCwsRsXM+IhcW+xxR7/kDMAWt2V6HnekgY5EfSOIdY8L/HEZDKJMMSIJ5YPgoAe8JLlsPpU13WX5TDnmd43/LQ7jYBlC0e3wsaw4LgEg0sG4GrF8P+MpKETcfAfiOYlFMVkaP5BoyiKZPSrd55HH/uqTRQYL8IwVHbP0HpekHOcESCjqtY8CTG6OqEu4QayLHsbj8etYrdRdSn5I+qL3MDeGeGQH6iZpmkp2o62lyBJtFnK+JraLE/bEf3QoYheyR3nxC8F8YbDgHCtewAAAABJRU5ErkJggg=="},function(e,a,t){e.exports=t.p+"static/media/Measuring-tape.f58e820d.svg"},function(e,a,t){e.exports=t.p+"static/media/vendor_icon_small.a06fd398.svg"},function(e,a,t){e.exports=t.p+"static/media/vendor_icon.c35a5f25.svg"},function(e,a,t){e.exports=t.p+"static/media/fleet_group_truck.26f45872.svg"},function(e,a,t){e.exports=t.p+"static/media/contact_icon_small.aadb2edf.svg"},function(e,a,t){e.exports=t.p+"static/media/warehouse-management-coming-soon.fcee325e.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory-green.6408d6e5.svg"},function(e,a,t){e.exports=t.p+"static/media/pdf-icon-ligh-green.288947b4.svg"},function(e,a,t){e.exports=t.p+"static/media/universalm.1a263434.svg"},function(e,a,t){e.exports=t.p+"static/media/dispatch-work-order-white-icon.ddc3e137.svg"},function(e,a,t){e.exports=t.p+"static/media/location-gray-dispatch-14x14.72b93da3.svg"},function(e,a,t){e.exports=t.p+"static/media/menu-dispatch-elipsis.e3373e0d.svg"},function(e,a,t){e.exports=t.p+"static/media/recurrence.048f8358.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-small-left.a8b1212a.svg"},function(e,a,t){e.exports=t.p+"static/media/arrow-small-right.cebbcbce.svg"},function(e,a,t){e.exports=t.p+"static/media/info.7e1d4a6e.svg"},function(e,a,t){e.exports=t.p+"static/media/location-green-icon.a89f291a.svg"},function(e,a,t){e.exports=t.p+"static/media/folder-green.848f48cd.svg"},function(e,a,t){e.exports=t.p+"static/media/supply-green-dispatch.c73410b8.svg"},function(e,a,t){e.exports=t.p+"static/media/Calendar-green.f5149155.svg"},function(e,a,t){e.exports=t.p+"static/media/Calendar-gray.8dde4d40.svg"},function(e,a,t){e.exports=t.p+"static/media/Account.15bcdfe8.svg"},function(e,a,t){e.exports=t.p+"static/media/owner.3feef599.svg"},function(e,a,t){e.exports=t.p+"static/media/Contacts.597e0214.svg"},function(e,a,t){e.exports=t.p+"static/media/Opportunity.c66dbdb9.svg"},function(e,a,t){e.exports=t.p+"static/media/proposal.28701533.svg"},function(e,a,t){e.exports=t.p+"static/media/Labor.9530ad15.svg"},function(e,a,t){e.exports=t.p+"static/media/Truck.16f847a1.svg"},function(e,a,t){e.exports=t.p+"static/media/Supply.31682a4d.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory-disposal.14c351ef.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-kit.72fa6d79.svg"},function(e,a,t){e.exports=t.p+"static/media/disposal-inventory.468f2154.svg"},function(e,a,t){e.exports=t.p+"static/media/Disposal.95c2cfce.svg"},function(e,a,t){e.exports=t.p+"static/media/line-items.418b4b15.svg"},function(e,a,t){e.exports=t.p+"static/media/project-icon.3741a0b7.svg"},function(e,a,t){e.exports=t.p+"static/media/price-lookup.da2ec8d3.svg"},function(e,a,t){e.exports=t.p+"static/media/google-logo.5bc312e8.svg"},function(e,a,t){e.exports=t.p+"static/media/logout.f1cb8475.svg"},function(e,a,t){e.exports=t.p+"static/media/person-gray-icon.0ea672ea.svg"},function(e,a,t){e.exports=t.p+"static/media/person-gray-carve.ca08c190.svg"},function(e,a,t){e.exports=t.p+"static/media/union-contact-gray.83477eb9.svg"},function(e,a,t){e.exports=t.p+"static/media/email-inbox-gray.4fe9399d.svg"},function(e,a,t){e.exports=t.p+"static/media/call-add-gray.cec415d8.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-icon-empty-gray.f9020108.svg"},function(e,a,t){e.exports=t.p+"static/media/disposal-empty-cion.f3763e5e.svg"},function(e,a,t){e.exports=t.p+"static/media/no-disposal-gray.24edd5a3.svg"},function(e,a,t){e.exports=t.p+"static/media/no-disposal-black.18d43a4b.svg"},function(e,a,t){e.exports=t.p+"static/media/service-family-gray-empty.017dfef2.svg"},function(e,a,t){e.exports=t.p+"static/media/labor-gray-icon.e58a66e2.svg"},function(e,a,t){e.exports=t.p+"static/media/Location-gray.a079d482.svg"},function(e,a,t){e.exports=t.p+"static/media/Contacts-empty-state.bb76f521.svg"},function(e,a,t){e.exports=t.p+"static/media/labor-team-no-data-icon.dbe0dc49.svg"},function(e,a,t){e.exports=t.p+"static/media/Account-no-data-icon.2932f6d6.svg"},function(e,a,t){e.exports=t.p+"static/media/Opportunity-empty-state-icon.b8b51a08.svg"},function(e,a,t){e.exports=t.p+"static/media/folder-gray-no-data.7c64f317.svg"},function(e,a,t){e.exports=t.p+"static/media/work-setting.e6e1aa8b.svg"},function(e,a,t){e.exports=t.p+"static/media/note-add-new-create-icon.a1bd9913.svg"},function(e,a,t){e.exports=t.p+"static/media/Time-empty-state-icon.dd3a7789.svg"},function(e,a,t){e.exports=t.p+"static/media/cloud-upload-24.e975e83f.svg"},function(e,a,t){e.exports=t.p+"static/media/proposal-empty-state-icon.69e1e24b.svg"},function(e,a,t){e.exports=t.p+"static/media/no-opportunities-weget-icon.de3301f4.svg"},function(e,a,t){e.exports=t.p+"static/media/line-items-empty-state-icon.56793ec3.svg"},function(e,a,t){e.exports=t.p+"static/media/billing-empty-state-icon.0aa9b99a.svg"},function(e,a,t){e.exports=t.p+"static/media/Labor-empty-state-icon.ad4c638d.svg"},function(e,a,t){e.exports=t.p+"static/media/Truck-empty-state-icon.af61c760.svg"},function(e,a,t){e.exports=t.p+"static/media/Supply-empty-state-icon.f59d684b.svg"},function(e,a,t){e.exports=t.p+"static/media/Inventory-empty-state-icon.5485665e.svg"},function(e,a,t){e.exports=t.p+"static/media/Disposal-empty-state-icon.c52f11fb.svg"},function(e,a,t){e.exports=t.p+"static/media/service-family-empty-state-icon.cb64b9c3.svg"},function(e,a,t){e.exports=t.p+"static/media/no-work-order-keys-icon.4335ded6.svg"},function(e,a,t){e.exports=t.p+"static/media/dispatch-empty.b32138f8.svg"},function(e,a,t){e.exports=t.p+"static/media/proposal_dropdown.fadaef12.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-kit-variant.3509b13c.svg"},function(e,a,t){e.exports=t.p+"static/media/inventory-item-variant.41cfe6b9.svg"},function(e,a,t){e.exports=t.p+"static/media/line-item-black.5d990ff9.svg"},function(e,a,t){e.exports=t.p+"static/media/Close-small.d13ea4cd.svg"},function(e,a,t){e.exports=t.p+"static/media/work-order-key.24389a43.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,t){e.exports=t(1041)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(53),i=t.n(c),r=(t(717),t(718),t(719),t(720),t(721),t(174),t(722),t(43)),s=t(91),o=Object(s.createBrowserHistory)(),m=t(2),d=t(3),u=t(5),p=t(4),v=t(380),h=t.n(v),f=t(381),E=t.n(f),g=t(382),b=t.n(g),N=t(383),y=t.n(N),w=t(384),_=t.n(w),S=t(385),x=t.n(S),C=t(386),O=t.n(C),k=t(387),j=t.n(k),I=t(388),A=t.n(I),D=t(389),T=t.n(D),R=t(390),M=t.n(R),F=t(391),P=t.n(F),V=t(392),q=t.n(V),L=t(393),U=t.n(L),B=t(394),W=t.n(B),Y=t(395),K=t.n(Y),G=t(396),z=t.n(G),H=t(397),$=t.n(H),Q=t(398),J=t.n(Q),Z=t(399),X=t.n(Z),ee=t(400),ae=t.n(ee),te=t(401),ne=t.n(te),le=t(402),ce=t.n(le),ie=t(403),re=t.n(ie),se=t(404),oe=t.n(se),me=t(405),de=t.n(me),ue=t(406),pe=t.n(ue),ve=t(407),he=t.n(ve),fe=t(408),Ee=t.n(fe),ge=t(409),be=t.n(ge),Ne=t(410),ye=t.n(Ne),we=t(411),_e=t.n(we),Se=t(412),xe=t.n(Se),Ce=t(413),Oe=t.n(Ce),ke=t(414),je=t.n(ke),Ie=t(415),Ae=t.n(Ie),De=t(416),Te=t.n(De),Re=t(417),Me=t.n(Re),Fe=t(418),Pe=t.n(Fe),Ve=t(419),qe=t.n(Ve),Le=t(420),Ue=t.n(Le),Be=t(421),We=t.n(Be),Ye=t(422),Ke=t.n(Ye),Ge=t(423),ze=t.n(Ge),He=t(424),$e=t.n(He),Qe=t(425),Je=t.n(Qe),Ze=t(426),Xe=t.n(Ze),ea=t(427),aa=t.n(ea),ta=t(428),na=t.n(ta),la=t(429),ca=t.n(la),ia=t(430),ra=t.n(ia),sa=t(431),oa=t.n(sa),ma=t(432),da=t.n(ma),ua=t(433),pa=t.n(ua),va=t(434),ha=t.n(va),fa=t(435),Ea=t.n(fa),ga=t(436),ba=t.n(ga),Na=t(437),ya=t.n(Na),wa=t(438),_a=t.n(wa),Sa=t(439),xa=t.n(Sa),Ca=t(440),Oa=t.n(Ca),ka=t(441),ja=t.n(ka),Ia=t(442),Aa=t.n(Ia),Da=t(443),Ta=t.n(Da),Ra=t(444),Ma=t.n(Ra),Fa=t(445),Pa=t.n(Fa),Va=t(446),qa=t.n(Va),La=t(447),Ua=t.n(La),Ba=t(448),Wa=t.n(Ba),Ya=t(449),Ka=t.n(Ya),Ga=t(450),za=t.n(Ga),Ha=t(451),$a=t.n(Ha),Qa=t(452),Ja=t.n(Qa),Za=t(453),Xa=t.n(Za),et=t(454),at=t.n(et),tt=t(455),nt=t.n(tt),lt=t(456),ct=t.n(lt),it=t(457),rt=t.n(it),st=t(458),ot=t.n(st),mt=t(459),dt=t.n(mt),ut=t(460),pt=t.n(ut),vt=t(461),ht=t.n(vt),ft=t(462),Et=t.n(ft),gt=t(463),bt=t.n(gt),Nt=t(464),yt=t.n(Nt),wt=t(465),_t=t.n(wt),St=t(466),xt=t.n(St),Ct=t(467),Ot=t.n(Ct),kt=t(468),jt=t.n(kt),It=t(469),At=t.n(It),Dt=t(470),Tt=t.n(Dt),Rt=t(471),Mt=t.n(Rt),Ft=t(472),Pt=t.n(Ft),Vt=t(473),qt=t.n(Vt),Lt=t(474),Ut=t.n(Lt),Bt=t(475),Wt=t.n(Bt),Yt=t(476),Kt=t.n(Yt),Gt=t(477),zt=t.n(Gt),Ht=t(478),$t=t.n(Ht),Qt=t(479),Jt=t.n(Qt),Zt=t(480),Xt=t.n(Zt),en=t(481),an=t.n(en),tn=t(482),nn=t.n(tn),ln=t(483),cn=t.n(ln),rn=t(484),sn=t.n(rn),on=t(485),mn=t.n(on),dn=t(486),un=t.n(dn),pn=t(487),vn=t.n(pn),hn=t(488),fn=t.n(hn),En=t(489),gn=t.n(En),bn=t(490),Nn=t.n(bn),yn=t(491),wn=t.n(yn),_n=t(492),Sn=t.n(_n),xn=t(493),Cn=t.n(xn),On=t(494),kn=t.n(On),jn=t(495),In=t.n(jn),An=t(496),Dn=t.n(An),Tn=t(497),Rn=t.n(Tn),Mn=t(498),Fn=t.n(Mn),Pn=t(499),Vn=t.n(Pn),qn=t(500),Ln=t.n(qn),Un=t(501),Bn=t.n(Un),Wn=t(502),Yn=t.n(Wn),Kn=t(503),Gn=t.n(Kn),zn=t(504),Hn=t.n(zn),$n=t(505),Qn=t.n($n),Jn=t(506),Zn=t.n(Jn),Xn=t(507),el=t.n(Xn),al=t(508),tl=t.n(al),nl=t(509),ll=t.n(nl),cl=t(510),il=t.n(cl),rl=t(511),sl=t.n(rl),ol=t(512),ml=t.n(ol),dl=t(513),ul=t.n(dl),pl=t(289),vl=t.n(pl),hl=t(514),fl=t.n(hl),El=t(515),gl=t.n(El),bl=t(516),Nl=t.n(bl),yl=t(517),wl=t.n(yl),_l=t(518),Sl=t.n(_l),xl=t(519),Cl=t.n(xl),Ol=t(520),kl=t.n(Ol),jl=t(521),Il=t.n(jl),Al=t(522),Dl=t.n(Al),Tl=t(523),Rl=t.n(Tl),Ml=t(524),Fl=t.n(Ml),Pl=t(525),Vl=t.n(Pl),ql=t(526),Ll=t.n(ql),Ul=t(527),Bl=t.n(Ul),Wl=t(528),Yl=t.n(Wl),Kl=t(529),Gl=t.n(Kl),zl=t(530),Hl=t.n(zl),$l=t(531),Ql=t.n($l),Jl=t(532),Zl=t.n(Jl),Xl=t(533),ec=t.n(Xl),ac=t(534),tc=t.n(ac),nc=t(535),lc=t.n(nc),cc=t(536),ic=t.n(cc),rc=t(537),sc=t.n(rc),oc=t(538),mc=t.n(oc),dc=t(539),uc=t.n(dc),pc=t(540),vc=t.n(pc),hc=t(541),fc=t.n(hc),Ec=t(542),gc=t.n(Ec),bc=t(543),Nc=t.n(bc),yc=t(544),wc=t.n(yc),_c=t(545),Sc=t.n(_c),xc=t(546),Cc=t.n(xc),Oc=t(547),kc=t.n(Oc),jc=t(548),Ic=t.n(jc),Ac=t(549),Dc=t.n(Ac),Tc=t(550),Rc=t.n(Tc),Mc=t(551),Fc=t.n(Mc),Pc=t(552),Vc=t.n(Pc),qc=t(553),Lc=t.n(qc),Uc=t(554),Bc=t.n(Uc),Wc=t(555),Yc=t.n(Wc),Kc=t(556),Gc=t.n(Kc),zc=t(557),Hc=t.n(zc),$c=t(558),Qc=t.n($c),Jc=t(559),Zc=t.n(Jc),Xc=t(560),ei=t.n(Xc),ai=t(561),ti=t.n(ai),ni=t(562),li=t.n(ni),ci=t(563),ii=t.n(ci),ri=t(564),si=t.n(ri),oi=t(565),mi=t.n(oi),di=t(566),ui=t.n(di),pi=t(567),vi=t.n(pi),hi=t(568),fi=t.n(hi),Ei=t(569),gi=t.n(Ei),bi=t(570),Ni=t.n(bi),yi=t(571),wi=t.n(yi),_i=t(572),Si=t.n(_i),xi=t(573),Ci=t.n(xi),Oi=t(574),ki=t.n(Oi),ji=t(575),Ii=t.n(ji),Ai=t(576),Di=t.n(Ai),Ti=t(577),Ri=t.n(Ti),Mi=t(578),Fi=t.n(Mi),Pi=t(215),Vi=t.n(Pi),qi=t(579),Li=t.n(qi),Ui=t(580),Bi=t.n(Ui),Wi=t(581),Yi=t.n(Wi),Ki=t(582),Gi=t.n(Ki),zi=t(583),Hi=t.n(zi),$i=t(584),Qi=t.n($i),Ji=t(585),Zi=t.n(Ji),Xi=t(586),er=t.n(Xi),ar=t(587),tr=t.n(ar),nr=t(588),lr=t.n(nr),cr=t(589),ir=t.n(cr),rr=t(590),sr=t.n(rr),or=t(591),mr=t.n(or),dr=t(592),ur=t.n(dr),pr=t(593),vr=t.n(pr),hr=t(594),fr=t.n(hr),Er=t(595),gr=t.n(Er),br=t(596),Nr=t.n(br),yr=t(597),wr=t.n(yr),_r=t(598),Sr=t.n(_r),xr=t(599),Cr=t.n(xr),Or=t(600),kr=t.n(Or),jr=t(601),Ir=t.n(jr),Ar=t(602),Dr=t.n(Ar),Tr=t(603),Rr=t.n(Tr),Mr=t(604),Fr=t.n(Mr),Pr=t(605),Vr=t.n(Pr),qr=t(606),Lr=t.n(qr),Ur=t(607),Br=t.n(Ur),Wr=t(608),Yr=t.n(Wr),Kr=t(609),Gr=t.n(Kr),zr=t(610),Hr=t.n(zr),$r=t(611),Qr=t.n($r),Jr=t(612),Zr=t.n(Jr),Xr=t(613),es=t.n(Xr),as=t(614),ts=t.n(as),ns=t(615),ls=t.n(ns),cs=t(616),is=t.n(cs),rs=t(617),ss=t.n(rs),os=t(618),ms=t.n(os),ds=t(619),us=t.n(ds),ps=t(620),vs=t.n(ps),hs=t(621),fs=t.n(hs),Es=t(622),gs=t.n(Es),bs=t(623),Ns=t.n(bs),ys=t(624),ws=t.n(ys),_s=t(625),Ss=t.n(_s),xs=t(626),Cs=t.n(xs),Os=t(627),ks=t.n(Os),js=t(628),Is=t.n(js),As=t(629),Ds=t.n(As),Ts=t(630),Rs=t.n(Ts),Ms=t(631),Fs=t.n(Ms),Ps=t(632),Vs=t.n(Ps),qs=t(633),Ls=t.n(qs),Us=t(634),Bs=t.n(Us),Ws=t(635),Ys=t.n(Ws),Ks=t(636),Gs=t.n(Ks),zs=t(637),Hs=t.n(zs),$s=t(638),Qs=t.n($s),Js=t(639),Zs=t.n(Js),Xs=t(640),eo=t.n(Xs),ao=t(641),to=t.n(ao),no=t(642),lo=t.n(no),co=t(643),io=t.n(co),ro=t(644),so=t.n(ro),oo=t(645),mo=t.n(oo),uo=t(646),po=t.n(uo),vo=t(647),ho=t.n(vo),fo=t(648),Eo=t.n(fo),go=t(649),bo=t.n(go),No=t(650),yo=t.n(No),wo=t(651),_o=t.n(wo),So=t(652),xo=t.n(So),Co=t(653),Oo=t.n(Co),ko=t(654),jo=t.n(ko),Io=t(655),Ao=t.n(Io),Do=t(656),To=t.n(Do),Ro=t(657),Mo=t.n(Ro),Fo=t(658),Po=t.n(Fo),Vo=t(659),qo=t.n(Vo),Lo=t(660),Uo=t.n(Lo),Bo=t(661),Wo=t.n(Bo),Yo=t(662),Ko=t.n(Yo),Go=t(663),zo=t.n(Go),Ho=t(664),$o=t.n(Ho),Qo=t(665),Jo=t.n(Qo),Zo=t(666),Xo=t.n(Zo),em=t(667),am=t.n(em),tm=t(668),nm=t.n(tm),lm=t(669),cm=t.n(lm),im=t(670),rm=t.n(im),sm=t(671),om=t.n(sm),mm=t(672),dm=t.n(mm),um=t(673),pm=t.n(um),vm=t(674),hm=t.n(vm),fm=t(675),Em=t.n(fm),gm=t(676),bm=t.n(gm),Nm=t(677),ym=t.n(Nm),wm=t(678),_m=t.n(wm),Sm=t(679),xm=t.n(Sm),Cm=t(680),Om=t.n(Cm),km=t(681),jm=t.n(km),Im=t(682),Am=t.n(Im),Dm=t(683),Tm=t.n(Dm),Rm={logo_small:h.a,new_logo_small:E.a,double_truck:Dr.a,billing_account_header:Is.a,site_manager_account_header:Ds.a,billing_empty_state_icon:cm.a,Labor_empty_state_icon:rm.a,grid_view_icon:W.a,contact_header:Rs.a,opportunity_name_header:Fs.a,proposal_name_header:Vs.a,Truck_empty_state_icon:om.a,grid_view_icon_active:K.a,labor_name_header:Ls.a,fleet_name_header:Bs.a,supply_name_header:Ys.a,Supply_empty_state_icon:dm.a,list_view_icon:z.a,inventory_disposal_name_header:Gs.a,inventory_kit_name_header:Hs.a,Inventory_empty_state_icon:pm.a,list_view_icon_active:$.a,disposal_inventory_name_header:Qs.a,disposal_name_header:Zs.a,Disposal_empty_state_icon:hm.a,inventory_green_single:es.a,service_name_header:eo.a,google_logo:io.a,logout_icon:so.a,service_family_empty_state_icon:Em.a,pdf_icon_light_green:ts.a,person_gray_icon:mo.a,person_gray_icon_carve:po.a,Time_empty_state_icon:$o.a,person_gray_small:J.a,warehouse_management_coming_soon:Zr.a,union_contact_gray:ho.a,email_inbox_gray:Eo.a,empty_work_order_keys_icon:bm.a,create_post_icon_gray:zt.a,phone_add_gray:bo.a,inventory_empty_gray_icon:yo.a,empty_dispatch_icon:ym.a,person_round_gray_small:X.a,black_dots_elipsis:P.a,disposal_empty_icon:_o.a,no_disposal_gray:xo.a,cloud_upload_24:Jo.a,measuring_tape_gray_icon:Ri.a,service_family_gray_empty:jo.a,Account_no_data_icon:qo.a,creq_chef_small:ae.a,measuring_tape_gray_new:Fi.a,Opportunity_empty_state_icon:Uo.a,plus_green_icon:ne.a,measuring_tape_gray_black:Vi.a,contacts_empty_state_icon:Mo.a,work_order_key:Tm.a,check_icon_green:Vr.a,note_add_new_create_icon:zo.a,menu_dispatch_elipsis:ms.a,inventory_green_box_icons:gc.a,line_items_empty_state_icon:nm.a,disposal_green_icon:Di.a,proposal_empty_state_icon:Xo.a,vendor_gray_icon:Li.a,dispatch_work_order_white_icon:is.a,close_small:Am.a,arrow_small_gray_icon:Bi.a,arrow_small_left:vs.a,arrow_small_right:fs.a,location_black_icon:Sc.a,location_green_icon:Ns.a,waste_management_black_icon:Yi.a,calendar_gary:ks.a,account_black_icon:Hi.a,calendar_green:Cs.a,teams_labor_no_data_icon:Po.a,new_sub_tier_icon:Cc.a,vendor_acc_inactive_img:tr.a,work_order_inactive_img:lr.a,supply_group_icon_new:wl.a,supply_icon_black:Sl.a,truck_icon_green:kc.a,dispatch_inactive_img:ir.a,sales_white_icon_db:gr.a,inventory_kit_sub_tier_icon_new:Vc.a,supply_sub_tier_icon:Ic.a,account_white_icon_db:fr.a,info_gray:gs.a,work_order_white_icon_db:Nr.a,no_varient:Lr.a,measurement_tape:Br.a,supply_package_green:Dc.a,management_white_icon_db:wr.a,analytics_white_icon_db:Cr.a,inventory_sub_tier_icon:Rc.a,accounting_white_icon_db:Sr.a,data_white_icon_db:kr.a,billing_gray_no_data_icon:sl.a,no_data_labor_icon:U.a,folder_icon_black:un.a,inventory_kits_gray_icons:uc.a,info_yellow:Rr.a,supply_green_dispatch:Ss.a,measuring_tape_black:Fr.a,arrow_gray_small_right:fc.a,no_opportunities_icon:am.a,information_green_icon:wc.a,inventory_kit_sub_tier_icon:Fc.a,labor_sub_tier_icon:Lc.a,recurrence:us.a,staff_icon_gray:ml.a,folder_green:ws.a,inventory_set_box_icons_green:Nc.a,truck_group_tier_icon_green:Bc.a,arrow_right_search_select_small:Gc.a,tubing_group_tier_icon_green:Yc.a,person_group_black_icon:ul.a,inventory_set_group_green_icons:Hc.a,supply_s_group_green_icons:Qc.a,new_add_plus_green_icon:Zc.a,person_group_green_icon:vl.a,rectangle_gray_icon:ei.a,rectangle_green_icon:ti.a,location_gray_dispatch_14:ss.a,create_vehicle_group_icon:Il.a,package_icon_vehicle:M.a,eye_pwd:y.a,arrow_small_breadcrumb:fl.a,create_inventory_group_icon:gl.a,create_supply_group_icon:Nl.a,supply_group_icon:Gi.a,line_items_group_icons:Cl.a,password_change_lock:_.a,select_operator_icon_green:kl.a,truck_icon_black:Rl.a,inventory_icon_black:Fl.a,contact_widget_icon:q.a,supply_icon_gray_small:Vl.a,logo_fav_sidebar:b.a,supply_gear_icon_black:Ll.a,line_items_gray_small:Bl.a,folder_green_icon:Yl.a,branch_icon_gray:Gl.a,list_nested_icon_green:Hl.a,vc_truck_icon_green:Ql.a,inventory_icon_green:Zl.a,inventory_item_icon:Qi.a,supply_icon_green:ec.a,line_item_icon_green:lc.a,pdf_icon_gray:ic.a,account_gray_icon:ce.a,send_icon_white:sc.a,leads_icon_black:mc.a,supply_green:tc.a,pull_push_icon:x.a,white_plus_icon:O.a,account_admin_img:j.a,contact_gray_icon:re.a,leads_gray_icon:oe.a,proposals_gray_icon:de.a,projects_gray_icon:pe.a,dispatch_gray_icon:he.a,routes_gray_icon:Ee.a,time_gray_icon:be.a,analytics_gray_icon:ye.a,billing_gray_icon:_e.a,search_icon_gray:A.a,filter_icon:T.a,graph_profit_img:Te.a,arrow_green_small_upload:Me.a,new_proposals_icon_img:Pe.a,work_icon_img:qe.a,new_accounts_img:Ue.a,new_opportunities_img:We.a,list_view_img:Ke.a,calendar_view_img:ze.a,green_small_caret_down:$e.a,arrow_down_red:Je.a,add_plus_icon_green:Xe.a,add_team_user_icon:aa.a,work_tab_icon:na.a,proposals_tab_icon:ca.a,folder_tab_icon:ra.a,leads_tab_icon:oa.a,vehicle_group_icon_new:Dl.a,truck_icon_plus:da.a,related_work_icon:pa.a,related_show_icon:ha.a,sales_person_icon_op:Ea.a,region_icon:ba.a,remove_green_icon:ya.a,eva_more_elisis:_a.a,move_left_sales:xa.a,move_right_sales:Oa.a,short_white:ja.a,settings_white:Aa.a,delete_white:Ta.a,search_small_icon:Ma.a,caret_down_small_select:Pa.a,cloud_upload_icon:qa.a,contacts_icon_black:Ua.a,close_icon_gray:Wa.a,info_small:Ka.a,plus_icon:za.a,docs_file_icon:$a.a,add_new_notes_icon:Ja.a,propsal_icon_add:Xa.a,time_activity_add:at.a,tasks_add:nt.a,check_icon:ct.a,service_warning:ot.a,warning_icon:rt.a,no_account_icon:Xt.a,pencil_green:dt.a,caret_small_icon_select:pt.a,flag_green_icon:ht.a,dollor_file_icon:Et.a,contact_union_icon:bt.a,notes_icon_img:yt.a,note_header_icon:_t.a,right_arrow_icon_drawer:xt.a,delete_icon_drawer:Ot.a,breadcrumb_right_arrow:jt.a,more_table_elipsis_icon:Tt.a,close_icon_white:Mt.a,folder_icon_main:Pt.a,view_peropsal_icon_head:At.a,circle_checked_icon:qt.a,plus_rounded_icon:Ut.a,download_icon:Wt.a,trash_icon:Kt.a,elipsis_icon_gray:$t.a,person_black_icon:Jt.a,contact_file_icon_black:an.a,menu_fold_icon:nn.a,leads_green_icons:xe.a,owner_account_gray:Oe.a,owner_account_green:je.a,location_gray:To.a,more_black:cn.a,work_setting:Ko.a,folder_gray_no_data:Wo.a,contact_green_icons:Ae.a,email_inbox_icon:sn.a,call_add_icon:mn.a,green_shade_customer_img:vn.a,fleet_group:Zi.a,owner:fn.a,Vendor:gn.a,Contacts:Nn.a,Opportunities:wn.a,Proposals:Sn.a,Projects:Cn.a,WorkOrder:kn.a,Dispatch:In.a,Fleet:Dn.a,Supplies:Rn.a,Equipment:Fn.a,Labor:Vn.a,lineItem:Ln.a,Sheet:Bn.a,AR:Yn.a,AP:Gn.a,Cash:Hn.a,Inventory:Qn.a,Reports:Zn.a,ChartOfAccounts:el.a,collapse_icon_open:ll.a,questionMarkBgGreenIcons:tl.a,billing_cost_icon:il.a,inventory_kits_icon:vc.a,inventory_package:li.a,inventory_group:ii.a,inventory_subtier:si.a,vehicle_package:mi.a,vehicle_group:ui.a,vehicle_subtier:vi.a,line_package:fi.a,create_ac_checkmark:gi.a,associated_accounts_img:Ni.a,pricing_icon:wi.a,empty_upload:Si.a,disposal:Ci.a,no_disposal_black:Oo.a,disposal_sidebar:ki.a,treeArrow:Ii.a,inventory_sm_icon:er.a,inventory_empty:sr.a,inventory_item_empty:mr.a,tree_warning:ur.a,Vector:vr.a,truck_empty:Ir.a,vendor_icon_small:Yr.a,vendor_icon:Gr.a,fleet_group_truck:Hr.a,contact_icon_small:Qr.a,universalm:ls.a,project_icon:to.a,price_lookup:lo.a,labor_gray_icon:Ao.a,proposal_dropdown:_m.a,inventory_kit_variant:xm.a,inventory_item_variant:Om.a,line_item_black:jm.a},Mm=t(700),Fm=t(1056),Pm=t(1063),Vm=t(72),qm=t(11),Lm=t(15);function Um(){localStorage.removeItem("mcvac_user_token"),localStorage.removeItem("mcvac_user_role"),localStorage.removeItem("mcvac_refresh_role")}function Bm(e){localStorage.setItem("mcvac_user_token",e)}function Wm(){return localStorage.getItem("mcvac_user_role")}function Ym(){return localStorage.getItem("mcvac_user_token")}function Km(){return!!Ym()}var Gm=t(21),zm={login:"/",logout:"/logout/",forget_password:"/forgot-password/",dashboard:Object(Gm.include)("/dashboard",{self:"",global_search:"global-search",opportunities:Object(Gm.include)("opportunities",{self:"",create:"create",view:"view/:id",edit:"edit/:id"}),customer_account:Object(Gm.include)("billing-account",{self:"",create:"create",view:"view/:id",edit:"edit/:id"}),owner_account:Object(Gm.include)("site-manager-account",{self:"",create:"create",view:"view/:id",edit:"edit/:id",site_account:Object(Gm.include)("sites",{create:"create",edit:"edit/:id",view:"view/:id"})}),vendor_account:Object(Gm.include)("vendor-account",{self:"",create:"create",view:"view/:id",edit:"edit/:id"}),customer_owner_account:"customer-owner/create/",contacts:Object(Gm.include)("contacts",{self:"",create:"create",view:"view/:id",edit:"edit/:id"}),account_contact:"account-contact/",sales:Object(Gm.include)("sales",{self:"",proposal:Object(Gm.include)("proposal",{self:"",create:"create",view:"view/:id",edit:"edit/:id"}),price_lookup:Object(Gm.include)("price-lookup",{self:""})}),operations:Object(Gm.include)("operations",{self:"",projects:Object(Gm.include)("projects",{self:"",create:"create",view:"view/:id",edit:"edit/:id"}),work_order:Object(Gm.include)("work-order",{self:"",create:"create",view:"view/:id",edit:"edit/:id"}),dispatch:Object(Gm.include)("dispatch",{self:"",create:"create",view:"view/:id",edit:"edit/:id"})}),management:Object(Gm.include)("management",{self:"",fleet:Object(Gm.include)("fleet",{self:"",fleet_family:Object(Gm.include)("fleet_family",{create:"create/",view:"view/:id?/",edit:"edit/:id/"}),groups:Object(Gm.include)("groups",{create:"create/",view:"view/:id?/",edit:"edit/:id/"}),kit:Object(Gm.include)("kit",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"}),vehicle:Object(Gm.include)("vehicle",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"})}),labor:Object(Gm.include)("labor",{self:"",labor_group:Object(Gm.include)("labor-group",{create:"create/",view:"view/:id/",edit:"edit/:id/"}),employee:Object(Gm.include)("employee",{create:"create/",view:"view/:id?/",edit:"edit/:id/"})}),inventory:Object(Gm.include)("inventory",{self:"",inventory_packages:Object(Gm.include)("inventory-packages",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"}),inventory_groups:Object(Gm.include)("inventory-groups",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"}),inventory_items:Object(Gm.include)("inventory-items",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"}),inventory_kits:Object(Gm.include)("inventory-kits",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"})}),supply_tools:Object(Gm.include)("supply-tools",{self:"",supply_packages:Object(Gm.include)("supply-packages",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"}),supply_groups:Object(Gm.include)("supply-groups",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"}),supply_tools:Object(Gm.include)("supply-tools",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"})}),service:Object(Gm.include)("service",{self:"",line_items:Object(Gm.include)("line-item",{create:"create/",view:"view/:id?/",edit:"edit/:id?/"}),family:Object(Gm.include)("family",{create:"create",view:"view/:id?/",edit:"edit/:id?/"}),pricing:Object(Gm.include)("pricing",{self:""})}),disposal:Object(Gm.include)("disposal",{self:"",family:Object(Gm.include)("family",{create:"create",view:"view/:id?/",edit:"edit/:id?/"}),items:Object(Gm.include)("item",{create:"create",view:"view/:id?/",edit:"edit/:id?/"})}),disposal_inventory:Object(Gm.include)("disposal-inventory",{self:"",view:"view/:id?/",family:Object(Gm.include)("family",{view:"view/:id?/"})})}),accounting:Object(Gm.include)("accounting",{self:"",invoicing:Object(Gm.include)("invoicing",{self:"",create:"create",view:"view/:id?/",edit:"edit/:id?/"})})})},Hm=t(20),$m=t.n(Hm),Qm=t(33),Jm=t(290),Zm=t.n(Jm);function Xm(e){return Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://api.lab.erdostracks.com",REACT_APP_SENTRY_DNS:"https://a94a8167634e4d07b41d3bfa0b02abc3@o210010.ingest.sentry.io/6250216"})[e]}var ed={auth:Object(Gm.include)("/api/v1/auth/",{login:"login/",user:"user/:type/",profile:"user/profile/",refresh:"token/refresh/",gmail_authenticate:"gmail-authenticate"}),opportunity:Object(Gm.include)("/api/v1/opportunity/",{opportunity:"opportunity/:id?/",source:"source/",contacts:"contacts/:id?/",documents:"documents/",post:"post/:id?/",opportunity_contact_account:"opportunity-account-contact/",owner_contacts:"owner-contacts/:id?/",customer_contacts:"customer-contacts/:id?/",opportunity_activity:"opportunity/:id/opportunity-activity/",status:"status/:id?/",primary_site:"owner-contacts/:id/primary-site/",reason_options:"reason-options"}),global_search:Object(Gm.include)("/api/v1/",{global_search:"global-search/"}),contact:Object(Gm.include)("/api/v1/contact/",{contact:"contact/:id?/",position:"position/:id?/",email:"email/:id?/",default_email:"email/:id?/default-email/",phone:"phone/:id?/",default_phone:"phone/:id?/default-phone/",post:"post/:id?/",document:"document/",contact_activity:"contact/:id/contact-activity/",address:"address/:id?/",opportunity:"contact-opportunity/:id?/"}),account:Object(Gm.include)("/api/v1/account/",{account:"account/:id?/",account_activity:"account/:id/account-activity/",customerAccount:"customer-account/:id?/",customerBillingAddress:"customer-billing-address/:id?/",customerDocuments:"customer-documents/:id?/",customerMainAddress:"customer-main-address/:id?/",customerPaymentInfo:"customer-payment-info/:id?/",industry:"industry/:id?/",ownerAccount:"owner-account/:id?/",ownerDocuments:"owner-documents/:id?/",ownerPaymentInfo:"owner-payment-info/:id?/",ownerSites:"owner-sites/:id?/",sitesDocument:"site-document/",postDocument:"post-document/:id?/",post:"post/:id?/",associated_account:"associated-account/:id?/",vendor_account:"vendor-account/:id?/",vendor_main_address:"vendor-main-address/:id?/",vendor_billing_address:"vendor-billing-address/:id?/",county_state:"county-state/"}),fleet:Object(Gm.include)("/api/v1/management/fleet/",{fleet_group:"group/:id?/",family:"family/:id?/",fleet_kit:"fleet-kit/:id?/",vehicle:"vehicle/:id?/",dispatch_vehicle:"vehicle/dispatch-vehicle/:id?/",region:"region/:id?/",block:"block/:id?/",duty:"duty/:id?/",weight:"weight/:id?/",vehicle_document:"document/:id?/"}),supply:Object(Gm.include)("/api/v1/management/supply/",{family:"family/:id?/",supply_group:"group/:id?/",supply:"supply/:id?/",supply_dispatch:"supply/dispatch-supply/:id?/",supply_doc:"document/:id?/"}),inventory:Object(Gm.include)("/api/v1/management/inventory/",{inventory_package:"inventory-package/:id?/",inventory_package_item:"inventory-item/:id?/",inventory_group:"inventory-group/:id?/",inventory:"inventory-item/:id?/",inventory_kit:"kit/:id?/",inventory_kit_item:"kit-item/:id?/",family:"family/:id?/",inventory_location:"inventory-location/:id?/",measurement_qty:"measurement-inventory-location/:id?/",inventory_vendor:"inventory-vendor/:id?/",measurement_vendor_qty:"measurement-inventory-vendor/:id?/",inventory_document:"document/:id?/"}),labor:Object(Gm.include)("/api/v1/management/labor/",{employee:"employee/:id?/",employee_doc:"employee-doc/:id?/",labor_employee:"employee/dispatch-employee/:id?/",employee_type:"employee-type/:id?/",labor_group:"labor-group/:id?/",shift:"shift/:id?/",internal_location:"internal-location/:id?/"}),service:Object(Gm.include)("/api/v1/management/service/",{family:"family/:id?/",add_table_data:"add-table-data/:id?/",table_data:"table-data/:id?/",family_item:"family-item/:id?/",line_item:"line-item/:id?/",pricing:"pricing/:id?/",pricing_unique_variants:"pricing/unique-variants/",unique_display_name:"pricing/unique-display-names/",resource:"resource/:id?/",item_pricing:"item-pricing/:id?/",vendor_location:"vendor-location/:id?/"}),disposal:Object(Gm.include)("/api/v1/management/disposal/",{family:"family/:id?/",disposal:"disposal/:id?/",documents:"document/:id?/",unit_type:"unit-type/:id?/",unit_name:"unit-name/:id?/",custom_measurement:"custom-measurement/:id?/",disposal_location:"disposal-location/:id?/",disposal_location_price:"disposal-location-price/:id?/",disposal_vendor_price:"disposal-vendor-price/:id?/",measurement_qty:"measurement-disposal-location/:id?/",disposal_vendor:"disposal-vendor/:id?/",measurement_vendor_qty:"measurement-disposal-vendor/:id?/"}),proposal:Object(Gm.include)("/api/v1/proposal/",{service_variant:"service-variant/:id?/",proposal:"proposal/:id?/",proposal_document:"proposal-document/:id?/",post:"post/:id?/",customer_contacts:"customer-contacts/:id?/",owner_contacts:"owner-contacts/:id?/",source:"source/",contacts:"contacts/:id?/",documents:"documents/",proposal_activity:"proposal/:id/proposal-activity/",proposal_status:"status",proposal_pdf:"sales-pdf/:id",proposal_create_pdf:"proposal-pdf/:id?/",generate_proposals:"generate-proposals",sales_pdf_email:"sales-pdf-email/:id",tax_basis:"tax-basis/:id?/",default_customer_recipient:"customer-contacts/:id/default-customer-recipient/",primary_site:"owner-contacts/:id/primary-site/"}),project:Object(Gm.include)("/api/v1/project/",{service_variant:"service-variant/:id?/",project:"project/:id?/",project_document:"project-document/:id?/",post:"post/:id?/",customer_contacts:"customer-contacts/:id?/",owner_contacts:"owner-contacts/:id?/",source:"source/",contacts:"contacts/:id?/",documents:"documents/",project_activity:"project/:id/project-activity/",project_status:"status",project_pdf:"sales-pdf/:id",generate_proposals:"generate-proposals",sales_pdf_email:"sales-pdf-email/:id",tax_basis:"tax-basis/:id?/",default_customer_recipient:"customer-contacts/:id/default-customer-recipient/",primary_site:"owner-contacts/:id/primary-site/",associated_proposal:"associated-proposal"}),work_order:Object(Gm.include)("/api/v1/work-order/",{work_order:"work-order/:id?/",work_order_group:"work-order/fleet-group/:id?/",work_order_container_data:"container-data/",post:"post/:id?/",customer_contacts:"customer-contacts/:id?/",owner_contacts:"owner-contacts/:id?/",work_order_activity:"work-order/:id/work-order-activity/",work_order_status:"status/",default_customer_recipient:"customer-contacts/:id/default-customer-recipient/",primary_site:"owner-contacts/:id/primary-site/",work_order_document:"work-order-document/:id?/",work_order_warehouse:"warehouse/:id?/",work_order_project_variant:"project-variant/:id?/",work_order_service_variant:"service-variant/:id?/",work_order_pdf:"workorder-pdf/:id?/"}),dispatch:Object(Gm.include)("/api/v1/dispatch/",{dispatch:"dispatch/workorders/:id?/",dispatch_assign:"dispatch/assign-resources/",dispatch_now:"dispatch/dispatch-now/",dispatched:"dispatch/dispatched/",dispatchChief:"dispatch/:id?/",dispatch_one:"dispatch/:id?/status/",dispatch_vehicle:"dispatch-vehicle/:id?/",dispatch_kit:"dispatch-kit/:id?/",dispatch_update_fleet_group:"update-fleet-group/:id?/"}),invoice:Object(Gm.include)("/api/v1/invoice/",{invoice:"invoice/:id?/",invoice_status:"status/",customer_contacts:"customer-contacts/:id?/",owner_contacts:"owner-contacts/:id?/",post:"post/:id?/",primary_site:"owner-contacts/:id/primary-site/",invoice_document:"invoice-document/:id?/",invoice_activity:"invoice/:id/invoice-activity/",invoice_work_order:"workorder/:id?/",invoice_project_work_order:"invoice-workorder/:id?/",invoice_sales_pdf_email:"invoice-pdf-email/:id?",invoice_pdf:"sales-pdf/:id?",invoice_create_pdf:"invoice-pdf/:id?/"})};function ad(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=Object(Gm.reverse)(e.split(".").reduce((function(e,a){return e[a]}),ed),a);return Xm("REACT_APP_API_URL")+t}function td(e){e.response&&Object.keys(e.response.data).forEach((function(a){Mm.b.error("".concat(a,":").concat(e.response.data[a]))}))}var nd=Zm.a.create({baseURL:Xm("REACT_APP_API_URL")});nd.interceptors.response.use((function(e){return e}),(function(e){var a,t;console.log("error");var n=e.config;if(401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(null===(t=e.response)||void 0===t?void 0:t.data.code)&&!n._retry){n._retry=!0;var l=localStorage.getItem("mcvac_refresh_role");return Zm.a.post(ad("auth.refresh"),{refresh:l}).then(function(){var e=Object(Qm.a)($m.a.mark((function e(a){return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==a.status){e.next=5;break}return e.next=3,Bm(a.data.access);case 3:return n.headers.Authorization="Bearer "+Ym(),e.abrupt("return",nd(n));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){o.push(zm.logout),console.log(e,"refresh error")}))}return Promise.reject(e)}));var ld=t(18);function cd(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a={"Content-Type":"application/json"};return e&&(a.Authorization="Bearer ".concat(Ym())),a}function id(e,a){return a=ld.pickBy(a),nd.get(e,{headers:cd(),params:a})}function rd(e,a){return nd.get(e,{headers:cd(),responseType:"blob",params:a})}function sd(e,a){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return nd.post(e,a,{headers:cd(t)})}function od(e,a){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return nd.post(e,a,{headers:cd(t)})}function md(e,a){return nd.patch(e,a,{headers:cd()})}function dd(e){return nd.delete(e,{headers:cd()})}function ud(e,a){return id(ad("auth.user",{type:e}),a)}function pd(e){return id(ad("auth.gmail_authenticate"),e)}var vd=t(14),hd=t.n(vd),fd=t(18);function Ed(e,a){return(e&&e[0]&&e[0])+(a&&a[0]&&a[0])}function gd(e){return e?parseFloat(e).toLocaleString(void 0,{minimumFractionDigits:2}):e}function bd(e){var a,t;e=null===(a=e)||void 0===a?void 0:a.toLowerCase().split("_");for(var n=0;n<(null===(l=e)||void 0===l?void 0:l.length);n++){var l;e[n]=e[n].charAt(0).toUpperCase()+e[n].slice(1)}return null===(t=e)||void 0===t?void 0:t.join(" ")}function Nd(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0==e)return"0 Bytes";var t=1e3,n=a,l=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,c)).toFixed(n))+" "+l[c]}function yd(e){return e?e.match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,""):"-"}function wd(e){return e&&e.match(/\d*/g).join("").match(/(\d{0,2})(\d{0,7})/).slice(1).join("-").replace(/-*$/g,"")}function _d(e,a){return(e=parseInt(e)+1)>parseInt(a)&&(e=0),e.toString()}function Sd(e){return e?hd()(e).format("MMM D,YYYY"):"-"}function xd(e){return e?"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):""}function Cd(e){return e?e.replace(/\$\s?|(,*)/g,""):""}function Od(e,a){return(e/100*a).toFixed(2)||0}function kd(e,a){var t=new Date(e);return new Date(t.getTime()+864e5*a)}function jd(e,a){var t=new Date(e);return new Date(t.getTime()-864e5*a)}function Id(e){var a=e;if(!a)return 0;var t={per_day_dpr:(a.purchase_cost/a.estimated_life/a.estimated_days||0).toFixed(2),insurance_per_day:(a.annual_premium/a.estimated_days||0).toFixed(2),fuel_per_day:(a.average_price*a.average_gallon||0).toFixed(2),reg_per_day:(a.annual_fee/a.estimated_days||0).toFixed(2),permit_per_day:(a.annual_permit_fee/a.estimated_days||0).toFixed(2),maintenance_per_day:(a.maintenance_per_year/a.estimated_days||0).toFixed(2),other_cost_per_day:(a.other_cost_per_year/a.estimated_days||0).toFixed(2)};return(Object.keys(t).reduce((function(e,a){return e+parseFloat(t[a]||0)}),0)/(a.average_hours||1)).toFixed(2)}function Ad(e){var a=e;if(!a)return 0;var t={per_day_dpr:(a.purchase_price/a.estimate_life/a.estimated_days||0).toFixed(2),insurance_per_day:(a.estimated_days/a.annual_premium).toFixed(2),reg_per_day:(a.annual_registration_fee/a.estimated_days||0).toFixed(2),permit_per_day:(a.annual_permit_fee/a.estimated_days||0).toFixed(2),maintenance_per_day:(a.maintenance_per_year/a.estimated_days||0).toFixed(2)};return Object.keys(t).reduce((function(e,a){return e+parseFloat(t[a]==1/0?0:t[a])}),0).toFixed(2)}function Dd(e){var a=e;if(!a)return 0;var t={per_day_dpr:(a.purchase_price/a.estimate_life/a.estimated_days||0).toFixed(2),insurance_per_day:(a.annual_premium/a.estimated_days||0).toFixed(2),reg_per_day:(a.annual_registration_fee/a.estimated_days||0).toFixed(2),permit_per_day:(a.annual_permit_fee/a.estimated_days||0).toFixed(2),maintenance_per_day:(a.maintenance_per_year/a.estimated_days||0).toFixed(2),other_cost_per_day:(a.other_cost_per_year/a.estimated_days||0).toFixed(2)};return Object.keys(t).reduce((function(e,a){return e+parseFloat(t[a]||0)}),0).toFixed(2)}function Td(e,a,t){var n,l;if(0===(null===e||void 0===e||null===(n=e.table_data)||void 0===n?void 0:n.length))return 0;var c=null===e||void 0===e||null===(l=e.table_data)||void 0===l?void 0:l.find((function(e){return e.wage_type===t}));return c?"straight_time"===a?(parseFloat(c.straight_time_health)+parseFloat(c.straight_time_benefits)+parseFloat(Od(.8,c.straight_time_multiplier*c.base_rate))+parseFloat(Od(7.65,c.straight_time_multiplier*c.base_rate))+parseFloat(Od(7,c.straight_time_multiplier*c.base_rate))+parseFloat(c.straight_time_multiplier*c.base_rate)||0).toFixed(2):"over_time"===a?(parseFloat(c.over_time_health)+parseFloat(c.over_time_benefits)+parseFloat(Od(.8,c.over_time_multiplier*c.base_rate))+parseFloat(Od(7.65,c.over_time_multiplier*c.base_rate))+parseFloat(Od(7,c.over_time_multiplier*c.base_rate))+parseFloat(c.over_time_multiplier*c.base_rate)||0).toFixed(2):"off_shift"===a?(parseFloat(c.off_shift_health)+parseFloat(c.off_shift_benefits)+parseFloat(Od(.8,c.off_shift_multiplier*c.base_rate))+parseFloat(Od(7.65,c.off_shift_multiplier*c.base_rate))+parseFloat(Od(7,c.off_shift_multiplier*c.base_rate))+parseFloat(c.off_shift_multiplier*c.base_rate)||0).toFixed(2):"double_time"===a?(parseFloat(c.double_time_health)+parseFloat(c.double_time_benefits)+parseFloat(Od(.8,c.double_time_multiplier*c.base_rate))+parseFloat(Od(7.65,c.double_time_multiplier*c.base_rate))+parseFloat(Od(7,c.double_time_multiplier*c.base_rate))+parseFloat(c.double_time_multiplier*c.base_rate)||0).toFixed(2):"night_time"===a?(parseFloat(c.night_time_health)+parseFloat(c.night_time_benefits)+parseFloat(Od(.8,c.night_time_multiplier*c.base_rate))+parseFloat(Od(7.65,c.night_time_multiplier*c.base_rate))+parseFloat(Od(7,c.night_time_multiplier*c.base_rate))+parseFloat(c.night_time_multiplier*c.base_rate)||0).toFixed(2):0:0}function Rd(e,a){var t=parseFloat(e)||0;return(t+t*((parseFloat(a)||0)/100)).toFixed(2)}function Md(){switch(new URLSearchParams(window.location.search).get("tab")){case"packages":return"1";case"groups":case"items":return"2";case"kits":return"3";case"labor":return"1";case"employee":return"2";case"tools":return"3";case"disposals":return"2";case"vehicles":return"3";default:return"1"}}var Fd={name:"supply",icon:Rm.supply_sub_tier_icon,title:"Supply Sub-tier"},Pd={name:"inventory",icon:Rm.inventory_sub_tier_icon,title:"Inventory Group"},Vd={name:"inventory_kit",icon:Rm.inventory_kit_sub_tier_icon,title:"Inventory Kit"},qd={name:"fleet_kit",icon:Rm.double_truck,title:"Fleet Kit"},Ld="LABOR",Ud="TREE_INPUT_FIELD",Bd="FLEET_GROUP",Wd="SUPPLY_GROUP",Yd={SERVICE_TIER:{name:"Tier",icon:""},SERVICE_LINE_ITEM:{name:"Service",icon:""},FLEET_TIER:{name:"Fleet Tier",icon:""},FLEET_GROUP:{name:"Fleet Group",icon:""},SUPPLY_TIER:{name:"Supply Tier",icon:""},SUPPLY_GROUP:{name:"Supply Group",icon:""},INVENTORY_TIER:{name:"Inventory Tier",icon:""},INVENTORY_ITEM:{name:"Inventory Group",icon:""},DISPOSAL_TIER:{name:"Disposal Tier",icon:""},DISPOSAL:{name:"Disposal",icon:""},TREE_INPUT_FIELD:{name:"Input Field",icon:""}},Kd={LABOR:{name:"Labor",key:"LABOR",server_key:"LABOR",icon:Rm.labor_sub_tier_icon},FLEET:{key:"FLEET",server_key:"FLEET_GROUP",name:"Fleet Group",icon:Rm.truck_icon_green},FLEET_KIT:{key:"FLEET_KIT",server_key:"FLEET_KIT",name:"Fleet Kit",icon:Rm.double_truck},SUPPLY:{key:"SUPPLY",server_key:"SUPPLY_GROUP",name:"Supply Group",icon:Rm.supply_sub_tier_icon},INVENTORY:{key:"INVENTORY",server_key:"INVENTORY_ITEM",name:"Inventory Item",icon:Rm.inventory_sub_tier_icon},INVENTORY_KIT:{key:"INVENTORY_KIT",server_key:"INVENTORY_KIT",name:"Inventory Kit",icon:Rm.inventory_kit_sub_tier_icon},DISPOSAL:{key:"DISPOSAL",server_key:"DISPOSAL",name:"Disposal",icon:Rm.disposal}},Gd=function(e){return!(e.name&&e.uom_array&&e.internal_location&&e.disposal_family)},zd=function(e){return!((null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.proposal_recipient)&&(null===e||void 0===e?void 0:e.owner_contact)&&(null===e||void 0===e?void 0:e.point_proposal)&&(null===e||void 0===e?void 0:e.status)&&0!=(null===e||void 0===e?void 0:e.service_variant_count))},Hd=function(e){return!((null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.project_recipient)&&(null===e||void 0===e?void 0:e.project_owner_contact)&&(null===e||void 0===e?void 0:e.status))},$d=function(e){var a,t,n=(null===(a=e.owner_contact_accounts)||void 0===a?void 0:a.length)||e.owner_contact_accounts,l=(null===(t=e.customer_contact_accounts)||void 0===t?void 0:t.length)||e.customer_contact_accounts;return!((null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.source)&&n>0&&l>0)},Qd=function(e){return!(e.parent&&e.name&&e.estimated_days&&e.estimated_life.toString()&&e.purchase_cost.toString()&&e.average_hours.toString()&&e.annual_premium&&e.average_gallon.toString()&&e.average_price&&e.annual_permit_fee&&e.maintenance_per_year&&e.annual_fee)},Jd=function(e){return!(e.margin&&e.name&&e.unit_cost&&e.uom&&e.uom_array&&e.internal_location&&e.inventory_family)},Zd=function(e){var a;return!(e.region&&e.labor_group_name&&e.union_type&&(null===(a=e.table_data)||void 0===a?void 0:a.length))},Xd=function(e){return!(e.name&&e.supply_family&&e.estimated_days&&e.estimate_life&&e.average_hours&&e.purchase_price)},eu=function(e){var a,t=Wm();return e.isReverse?e.allow.includes(t)?null:e.children:(null===(a=e.allow)||void 0===a?void 0:a.includes(t))?e.children:null};function au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Wm();return a?!e.includes(t):!!e.includes(t)}function tu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=window.location.host.split(".");if(3===t.length){var n=t[0];return a?!e.includes(n):!!e.includes(n)}return!!(t[0].includes("localhost")&&fd.findIndex(e,(function(e){return"localhost"==e}))>-1)}function nu(e){return e.split("_").map((function(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()})).join(" ")}var lu=function(e,a,t){var n;return function(){var l=this,c=arguments,i=function(){n=null,t||e.apply(l,c)},r=t&&!n;clearTimeout(n),n=setTimeout(i,a),r&&e.apply(l,c)}},cu=function(e,a){return!!a&&("ADDRESS"===a?!((null===e||void 0===e||null===(t=e.main_address)||void 0===t?void 0:t.street_address)&&(null===(n=e.main_address)||void 0===n?void 0:n.city)&&(null===(l=e.main_address)||void 0===l?void 0:l.state)&&(null===(c=e.main_address)||void 0===c?void 0:c.zip_code)&&(null===(i=e.billing_address)||void 0===i?void 0:i.state)):"PAYMENT"===a?!(null===e||void 0===e||null===(r=e.payment_information)||void 0===r?void 0:r.default_sales_tax)&&"boolean"!=typeof(null===e||void 0===e||null===(s=e.payment_information)||void 0===s?void 0:s.tax_exemption):"SITES"===a?!(null===e||void 0===e||null===(o=e.sites)||void 0===o?void 0:o.length):"CONTACT"===a?!((null===e||void 0===e?void 0:e.id)&&e.default_email&&e.default_phone):"CONTACT_ADDRESS"===a?!((null===e||void 0===e?void 0:e.city)&&(null===e||void 0===e?void 0:e.street_address)&&(null===e||void 0===e?void 0:e.state)&&(null===e||void 0===e?void 0:e.zip_code)):"CUSTOMEROWNER_PAYMENT"===a?!((null===e||void 0===e?void 0:e.credit_limit)&&(null===e||void 0===e?void 0:e.duns_number)&&(null===e||void 0===e?void 0:e.payment_term)&&(null===e||void 0===e?void 0:e.credit_rating)&&(null===e||void 0===e?void 0:e.default_sales_tax)):void 0);var t,n,l,c,i,r,s,o},iu=function(e,a){var t=!0;if("CUSTOMER"===a)(null===e||void 0===e?void 0:e.customer_contact_accounts)&&e.customer_contact_accounts.forEach((function(e){var a;(null===e||void 0===e?void 0:e.account)&&(null===e||void 0===e||null===(a=e.contact)||void 0===a?void 0:a.length)&&(t=!1)}));else if("OWNER"===a){var n;(null===e||void 0===e||null===(n=e.owner_contact_accounts)||void 0===n?void 0:n.length)&&(t=!1)}else if("TEAMS"===a){var l,c,i;((null===e||void 0===e||null===(l=e.sales_assistant)||void 0===l?void 0:l.length)||(null===e||void 0===e||null===(c=e.sales_manager)||void 0===c?void 0:c.length)||(null===e||void 0===e||null===(i=e.sales_person)||void 0===i?void 0:i.length))&&(t=!1)}return!!t},ru=function(e,a){var t=!0;if("CUSTOMER"===a)(null===e||void 0===e?void 0:e.customer_contact)&&e.customer_contact.forEach((function(e){var a;(null===e||void 0===e?void 0:e.account)&&(null===e||void 0===e||null===(a=e.contact)||void 0===a?void 0:a.length)&&(t=!1)}));else if("OWNER"===a){var n;(null===e||void 0===e||null===(n=e.owner_contact)||void 0===n?void 0:n.length)&&(t=!1)}else if("TEAMS"===a){var l,c,i;((null===e||void 0===e||null===(l=e.sales_assistant)||void 0===l?void 0:l.length)||(null===e||void 0===e||null===(c=e.sales_manager)||void 0===c?void 0:c.length)||(null===e||void 0===e||null===(i=e.sales_person)||void 0===i?void 0:i.length))&&(t=!1)}else"SERVICE_VARIENT"===a&&0!==(null===e||void 0===e?void 0:e.service_variant_count)&&(t=!1);return!!t},su=function(e,a){var t=!0;if("CUSTOMER"===a)(null===e||void 0===e?void 0:e.project_customer_contact)&&e.project_customer_contact.forEach((function(e){var a;(null===e||void 0===e?void 0:e.account)&&(null===e||void 0===e||null===(a=e.contact)||void 0===a?void 0:a.length)&&(t=!1)}));else if("OWNER"===a){var n;(null===e||void 0===e||null===(n=e.project_owner_contact)||void 0===n?void 0:n.length)&&(t=!1)}else if("TEAMS"===a){var l,c,i;((null===e||void 0===e||null===(l=e.sales_assistant)||void 0===l?void 0:l.length)||(null===e||void 0===e||null===(c=e.sales_manager)||void 0===c?void 0:c.length)||(null===e||void 0===e||null===(i=e.sales_person)||void 0===i?void 0:i.length))&&(t=!1)}else"SERVICE_VARIENT"===a&&0!==(null===e||void 0===e?void 0:e.service_variant_count)&&(t=!1);return!!t},ou=function(e,a){var t=!0;if("CUSTOMER"===a)(null===e||void 0===e?void 0:e.work_customer_contact)&&e.work_customer_contact.forEach((function(e){var a;(null===e||void 0===e?void 0:e.account)&&(null===e||void 0===e||null===(a=e.contact)||void 0===a?void 0:a.length)&&(t=!1)}));else if("OWNER"===a)(null===e||void 0===e?void 0:e.work_owner_contact)&&e.work_owner_contact.forEach((function(e){var a;(null===e||void 0===e?void 0:e.account)&&(null===e||void 0===e||null===(a=e.site)||void 0===a?void 0:a.length)&&(t=!1)}));else if("WAREHOUSE"===a){var n;(null===e||void 0===e||null===(n=e.workorder_warehouse)||void 0===n?void 0:n.length)&&(t=!1)}else if("SERVICE_VARIENT"===a){var l;(null===e||void 0===e||null===(l=e.workorder_variant)||void 0===l?void 0:l.length)&&(t=!1)}else"SERVICE_INFO"===a&&(null===e||void 0===e?void 0:e.service_date)&&(null===e||void 0===e?void 0:e.start_time)&&(t=!1);return!!t},mu={labelCol:{span:24},wrapperCol:{span:24}},du=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).handleSubmit=function(a){e.props.userLoginAction(a).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container-fluid credential-fluid-main h-100 px-0"},l.a.createElement("div",{className:"row mx-0 credential-row-main h-100"},l.a.createElement("div",{className:"col-12 col-sm-6 h-100"},l.a.createElement("div",{className:"row credential-logo-left align-items-center justify-content-center h-100"},l.a.createElement("div",{className:"col-12 text-center p-0"},l.a.createElement(qm.a,{to:"/dashboard/"},tu(["demo"])?l.a.createElement("img",{src:Rm.logo_small,alt:"logo",className:"img-fluid"}):l.a.createElement("img",{src:Rm.new_logo_small,alt:"logo",className:"img-fluid"})),tu(["lab"])&&l.a.createElement("div",{className:"beta-heading mb-0"},"Lab"),tu(["product"])&&l.a.createElement("div",{className:"beta-heading mb-0"},"Product")))),l.a.createElement("div",{className:"col-12 col-sm-6 h-100"},l.a.createElement("div",{className:"row credential-details-right align-items-center h-100"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",null,"Sign In"),l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,className:"common-form"},mu),l.a.createElement(Fm.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Email is required"},{type:"email",message:"Invalid Email"}]},l.a.createElement(Pm.a,{placeholder:"Example@email.com"})),l.a.createElement(Fm.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Password is required"}]},l.a.createElement(Pm.a.Password,{iconRender:function(e){return l.a.createElement("img",{src:Rm.eye_pwd,alt:"eye icon",className:"img-fluid"})},placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})),tu(["demo","product"])?"":l.a.createElement("div",{className:"w-100 forgot-pswd-div text-right"},l.a.createElement(qm.a,{className:"position-relative",to:"/forgot-password/"},"Forgot Password?")),l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"sign-in-btn sign-in-primary d-flex align-items-center justify-content-center"},"Sign in")))))))))}}]),t}(n.Component),uu={userLoginAction:function(e){return function(a){return function(e){return od(ad("auth.login"),e,!1)}(e).then((function(e){var t,n,l;Bm(e.data.access),n=e.data.refresh,localStorage.setItem("mcvac_refresh_role",n),l=null===(t=e.data.user)||void 0===t?void 0:t.role,localStorage.setItem("mcvac_user_role",l),a({type:"LOGIN_SUCCESS",payload:e.data.user}),o.push(zm.dashboard.self)}))}}},pu=Object(Lm.b)((function(){}),uu)(du),vu={labelCol:{span:24},wrapperCol:{span:24}},hu=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container-fluid credential-fluid-main h-100 px-0"},l.a.createElement("div",{className:"row mx-0 credential-row-main h-100"},l.a.createElement("div",{className:"col-12 col-sm-6 h-100"},l.a.createElement("div",{className:"row credential-logo-left align-items-center justify-content-center h-100"},l.a.createElement("div",{className:"col-12 text-center p-0"},l.a.createElement("a",{href:"#"},l.a.createElement("img",{src:Rm.logo_small,alt:"logo",className:"img-fluid"})),tu(["lab"])&&l.a.createElement("div",{className:"beta-heading mb-0"},"Lab")))),l.a.createElement("div",{className:"col-12 col-sm-6 h-100"},l.a.createElement("div",{className:"row credential-details-right align-items-center h-100"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",null,"Forgot Password"),l.a.createElement("p",null,"Please enter your registered email. We will send a a password reset code."),l.a.createElement(Fm.a,Object.assign({className:"common-form"},vu),l.a.createElement(Fm.a.Item,{name:"email",label:"Email",rules:[{required:!0}]},l.a.createElement(Pm.a,{placeholder:"Example@email.com"})),l.a.createElement("div",{className:"row mt-lg-5 mt-md-4"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"sign-in-btn"},"Cancel"))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{type:"primary",className:"sign-in-btn"},"Send")))))))))))}}]),t}(n.Component),fu=t(1062),Eu=t(1071);var gu=fu.a.Panel,bu="",Nu=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={activeKey:"",BETA_SERVER:!1},e.onPanelChange=function(a){switch(e.props.setSidebarKey(a),a){case"1":return void o.push(zm.dashboard.account_contact);case"2":return void o.push(zm.dashboard.sales.self);case"3":return void o.push(zm.dashboard.operations.self);case"4":return void o.push(zm.dashboard.management.self);case"5":return void o.push(zm.dashboard.accounting.self);case"6":case"7":return void o.push(zm.dashboard.self)}},e.checkActive=function(a){var t=e.props.location.pathname;switch(a){case 1:return"/dashboard/account-contact/"===t;case 2:return"/dashboard/sales/"===t;case 3:return"/dashboard/operations/"===t;case 4:return"/dashboard/management/"===t;case 5:return"/dashboard/accounting/"===t;case 6:return"/dashboard/analytics/"===t;case 7:return"/dashboard/data-management/"===t;case 8:default:return!1}},e.toggleSidebar=function(){var e=document.getElementById("app_main");e.classList.contains("small-sidebar")?e.classList.remove("small-sidebar"):e.classList.add("small-sidebar")},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,a){var t;e.sidebar.key!==this.props.sidebar.key&&(t=this.props.match.path,bu=t.includes("account")||t.includes("contacts")?1:t.includes("sales")||t.includes("opportunities")?2:t.includes("service")||t.includes("labor")||t.includes("fleet")||t.includes("inventory")||t.includes("supply-tools")||t.includes("disposal")?4:void 0,this.setState({activeKey:bu}))}},{key:"render",value:function(){var e=this;this.state.BETA_SERVER;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"sidebar-main-div position-fixed h-100"},l.a.createElement("div",{className:"row mx-0 sticky-section-row"},l.a.createElement(Vm.a,{onClick:this.toggleSidebar,className:"menu-fold-btn bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.menu_fold_icon,alt:"menu_fold_icon",className:"img-fluid collapse-icon-close"}),l.a.createElement("img",{src:Rm.collapse_icon_open,alt:"menu_fold_icon",className:"img-fluid collapse-icon-open"})),l.a.createElement("div",{className:"col-12 logo-div-sidebar text-center"},l.a.createElement(qm.b,{to:zm.dashboard.self,className:"d-inline-block"},l.a.createElement("img",{className:"img-fluid",src:Rm.logo_fav_sidebar,alt:"sidebar logo img"}))),l.a.createElement("div",{className:"col-12 sidebar-nav-links-div"},tu(["lab"])&&l.a.createElement("div",{className:"beta-heading beta-heading-sidebar mt-0"},"Lab"),tu(["product"])&&l.a.createElement("div",{className:"beta-heading beta-heading-sidebar mt-0"},"Product"),l.a.createElement("ul",{className:"list-inline sidebar-ul-main"},l.a.createElement("li",{onClick:function(){return e.props.setSidebarKey(void 0)}},l.a.createElement(qm.b,{exact:!0,to:zm.dashboard.self,className:"nav-link-tag d-flex align-items-center"},l.a.createElement("span",{className:"nav-icons-tag float-left"}),l.a.createElement("span",{className:"nav-details-tag float-left"},"Dashboard")))))),l.a.createElement("div",{className:"row mx-0 scroll-section-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(fu.a,{activeKey:this.props.sidebar.key||void 0,accordion:!0,className:"collapse-sidebar-main",onChange:this.onPanelChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(gu,{className:this.checkActive(1)?"active":"",header:l.a.createElement("div",{className:"nav-collapse-card-inn"},l.a.createElement("span",{className:"sidebar-user-icon account-icon-sidebar"}),l.a.createElement("span",{className:"nav-details-tag float-left"},"Accounts & Contacts")),key:"1"},l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.owner_account.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Site Manager Accounts"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.customer_account.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Billing Accounts"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.vendor_account.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Vendor Accounts"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.contacts.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Contacts"))))),l.a.createElement(gu,{className:this.checkActive(2)?"active":"",header:l.a.createElement("div",{className:"nav-collapse-card-inn"},l.a.createElement("span",{className:"sidebar-user-icon sales-sidebar-icon"}),l.a.createElement("span",{className:"nav-details-tag float-left"},"Sales")),key:"2"},l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.opportunities.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Opportunities"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.sales.proposal.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Proposals"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.sales.price_lookup.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Price Lookup"))))),l.a.createElement(gu,{className:this.checkActive(3)?"active":"",header:l.a.createElement("div",{className:"nav-collapse-card-inn"},l.a.createElement("span",{className:"sidebar-user-icon operations-sidebar-icon"}),l.a.createElement("span",{className:"nav-details-tag float-left"},"Operations")),key:"3"},l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.operations.projects.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Projects"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.operations.work_order.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Work Orders"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag nav-icons-tag-2 d-flex align-items-center",to:zm.dashboard.operations.dispatch.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Dispatch"))),au(["ADMIN"])&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag nav-icons-tag-2 d-flex align-items-center",to:""},l.a.createElement("span",{className:"nav-details-tag float-left"},"Warehouse Management")))))),au(["ADMIN"])&&l.a.createElement(l.a.Fragment,null,l.a.createElement(gu,{className:this.checkActive(4)?"active":"",header:l.a.createElement("div",{className:"nav-collapse-card-inn"},l.a.createElement("span",{className:"sidebar-user-icon managements-sidebar-icon"}),l.a.createElement("span",{className:"nav-details-tag float-left"},"Management")),key:"4"},l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag nav-icons-tag-2 d-flex align-items-center",to:zm.dashboard.management.service.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Services"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.management.labor.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Labor"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.management.fleet.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Fleet"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag nav-icons-tag-2 d-flex align-items-center",to:zm.dashboard.management.supply_tools.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Supplies/Small Tools"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag nav-icons-tag-2 d-flex align-items-center",to:zm.dashboard.management.inventory.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Inventory"))),l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag nav-icons-tag-2 d-flex align-items-center",to:zm.dashboard.management.disposal.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Disposal"))))),l.a.createElement(gu,{className:this.checkActive(5)?"active":"",header:l.a.createElement("div",{className:"nav-collapse-card-inn"},l.a.createElement("span",{className:"sidebar-user-icon accounting-sidebar-icon"}),l.a.createElement("span",{className:"nav-details-tag float-left"},"Accounting")),key:"5"},l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement(qm.b,{className:"nav-link-tag d-flex align-items-center",to:zm.dashboard.accounting.invoicing.self},l.a.createElement("span",{className:"nav-details-tag float-left"},"Invoicing"))))),l.a.createElement(gu,{collapsible:"disabled",className:"".concat(this.checkActive(6)?"active":""),header:l.a.createElement("div",{className:"nav-collapse-card-inn"},l.a.createElement("span",{className:"sidebar-user-icon analytics-sidebar-icon"}),l.a.createElement("span",{className:"nav-details-tag float-left"},"Analytics")),key:"6"}),l.a.createElement(gu,{collapsible:"disabled",className:"".concat(this.checkActive(7)?"active":""),header:l.a.createElement("div",{className:"nav-collapse-card-inn"},l.a.createElement("span",{className:"sidebar-user-icon data-management-sidebar-icon"}),l.a.createElement("span",{className:"nav-details-tag float-left"},"Data Management")),key:"7"})))))))}}]),t}(n.Component),yu=Object(Lm.b)((function(e){return{sidebar:e.sidebar}}),{setSidebarKey:function(e){return function(a){a({type:"SIDEBAR_KEY",payload:e})}}})(Object(r.withRouter)(Nu)),wu=t(1),_u=t(118),Su=t(1065),xu=t(234),Cu=t(1061),Ou=t(9),ku=t(188),ju=t(1064);function Iu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("account.account");return id(a,e)}function Au(e){return id(ad("account.account",{id:e}))}function Du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("account.customerAccount");return id(a,e)}function Tu(e){return od(ad("account.customerAccount"),e)}function Ru(e,a){return md(ad("account.customerAccount",{id:e}),a)}function Mu(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("account.customerAccount",{id:e});return id(t,a)}function Fu(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("account.account_activity",{id:e});return id(t,a)}function Pu(e){return od(ad("account.customerPaymentInfo"),e)}function Vu(e,a){return md(ad("account.customerPaymentInfo",{id:e}),a)}function qu(e){return od(ad("account.customerMainAddress"),e)}function Lu(e,a){return md(ad("account.customerMainAddress",{id:e}),a)}function Uu(e){return od(ad("account.customerBillingAddress"),e)}function Bu(e,a){return md(ad("account.customerBillingAddress",{id:e}),a)}function Wu(e){return od(ad("account.customerDocuments"),e)}function Yu(e){return od(ad("account.sitesDocument"),e)}function Ku(e){return id(ad("account.sitesDocument"),e)}function Gu(e){return id(ad("account.customerDocuments"),e)}function zu(e){return id(ad("account.post"),e)}function Hu(e){return od(ad("account.post"),e)}function $u(e,a){return md(ad("account.post",{id:e}),a)}function Qu(e){return id(ad("account.county_state"),e)}var Ju=ku.a.Option,Zu={labelCol:{span:24},wrapperCol:{span:24}},Xu=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={buttonLoading:!1,duns:null,ein:null},e.formRef=l.a.createRef(),e.onSubmit=function(a){var t,n,l=null===(t=a.duns_number)||void 0===t?void 0:t.replace(/-/g,"");a.duns_number=l;var c=null===(n=a.ein)||void 0===n?void 0:n.replace(/-/g,"");a.ein=c,e.setState({buttonLoading:!0}),a.account=e.props.account.id,e.props.payment?Vu(e.props.payment.id,a).then((function(a){Mm.b.success("Payment Updated Successfully"),e.props.setPayment(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){td(a),e.setState({buttonLoading:!1})})):Pu(a).then((function(a){Mm.b.success("Payment Created Successfully"),e.props.setPayment(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e.onNumberOnlyChange=function(e){var a=e.keyCode||e.which,t=String.fromCharCode(a);new RegExp("[0-9]").test(t)||e.preventDefault()},e.handleDunChange=function(a){var t,n=a.target.value;n=null===(t=n)||void 0===t?void 0:t.match(/\d*/g).join("").match(/(\d{0,2})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,""),e.setState({duns:n},(function(){e.formRef.current.setFieldsValue({duns_number:e.state.duns})}))},e.handleEinChange=function(a){var t,n=a.target.value;n=null===(t=n)||void 0===t?void 0:t.match(/\d*/g).join("").match(/(\d{0,2})(\d{0,7})/).slice(1).join("-").replace(/-*$/g,""),e.setState({ein:n},(function(){e.formRef.current.setFieldsValue({ein:e.state.ein})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t=this;if(this.props.match.params.id==(null===(e=this.props)||void 0===e||null===(a=e.account)||void 0===a?void 0:a.id)){var n=Object(wu.a)({},this.props.payment);Mu(this.props.match.params.id).then((function(e){var a,l,c,i,r=null===(a=n=Object(wu.a)({},e.data.payment_information))||void 0===a||null===(l=a.duns_number)||void 0===l?void 0:l.match(/\d*/g).join("").match(/(\d{0,2})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,""),s=null===(c=n)||void 0===c||null===(i=c.ein)||void 0===i?void 0:i.match(/\d*/g).join("").match(/(\d{0,2})(\d{0,7})/).slice(1).join("-").replace(/-*$/g,"");t.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},n),{},{duns_number:r,ein:s}))}))}}},{key:"render",value:function(){var e=this,a=this.state.buttonLoading;this.props.payment;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit,hideRequiredMark:!0},Zu,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input payment information here."))),l.a.createElement("div",{className:"col-12 ".concat(this.props.gridsm?"":"col-sm-6"," position-relative")},l.a.createElement(Fm.a.Item,{name:"credit_rating",label:"Credit Rating",className:"position-relative",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Credit Rating"},l.a.createElement(Ju,{value:"LOW_RISK"},"Low Risk"),l.a.createElement(Ju,{value:"MODERATE_RISK"},"Moderate Risk"),l.a.createElement(Ju,{value:"HIGH_RISK"},"High Risk"),l.a.createElement(Ju,{value:"SEVERE_RISK"},"Severe Risk"),l.a.createElement(Ju,{value:"OUT_OF_BUSINESS"},"Out of Business"))),l.a.createElement("span",{className:"small-text-div-select position-absolute"},"Please upload credit rating related documents in the documents section.")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"payment_term",label:"Payment Term",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Payment Term"},l.a.createElement(Ju,{value:"DAYS_15"},"15 Days"),l.a.createElement(Ju,{value:"NET_30"},"Net 30"),l.a.createElement(Ju,{value:"NET_30_2_PERCENT"},"Net 30 2% 10 day discount"),l.a.createElement(Ju,{value:"NET_60"},"Net 60"),l.a.createElement(Ju,{value:"ON_RECEIPT"},"On receipt"),l.a.createElement(Ju,{value:"PAY_WHEN_PAID"},"Pay-when-paid")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"credit_limit",label:"Credit Limit",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Credit Limit"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"duns_number",label:"DUNS Number",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"00-000-0000",onKeyPress:this.onNumberOnlyChange,maxLength:"11",onChange:function(a){return e.handleDunChange(a)}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"active",label:"Active",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select"},l.a.createElement(Ju,{value:!0},"Yes"),l.a.createElement(Ju,{value:!1},"No")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"ein",label:"EIN",rules:[]},l.a.createElement(Pm.a,{placeholder:"00-0000000",onKeyPress:this.onNumberOnlyChange,maxLength:"10",onChange:function(a){return e.handleEinChange(a)}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"default_sales_tax",label:"Sales Tax Exemption Status *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Default Sales Tax"},l.a.createElement(Ju,{value:"EXEMPT",key:"a"},"Exempt"),l.a.createElement(Ju,{value:"NON_EXEMPT",key:"b"},"Non Exempt")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"entity_type",label:"Entity Type"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Entity type"},l.a.createElement(Ju,{value:"INDIVIDUAL"},"Individual/sole proprietor or single-member LLC"),l.a.createElement(Ju,{value:"CORPORATION"},"C Corporation"),l.a.createElement(Ju,{value:"S_CORPORATION"},"S Corporation"),l.a.createElement(Ju,{value:"PARTNERSHIP"},"Partnership"),l.a.createElement(Ju,{value:"TRUST"},"Trust/estate")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:a,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),ep=Object(r.withRouter)(Xu),ap=t(1059),tp=t(190),np=[{name:"Afghanistan",code:"AF"},{name:"\xc5land Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:'Cote D"Ivoire',code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:'Korea, Democratic People"S Republic of',code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:'Lao People"S Democratic Republic',code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],lp=t(18),cp={labelCol:{span:24},wrapperCol:{span:24}},ip=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={checked:!1,county:[],updateMainState:null,updateBillingState:null,buttonLoading:!1},e.formRef=l.a.createRef(),e.handleSubmit=function(a){var t,n={street_address:a.street_address,apartment:a.apartment,city:a.city,county:a.county,state:a.state,zip_code:a.zip_code,country:a.country,phone:a.phone,email:a.email,account:e.props.account.id},l={street_address:a.street_address_1,apartment:a.apartment_1,city:a.city_1,state:a.state_1,zip_code:a.zip_code_1,country:a.country_1,county:a.county_1,is_same_main_address:e.state.checked,account:e.props.account.id};e.setState({buttonLoading:!0}),(null===(t=e.props.address)||void 0===t?void 0:t.main)?Lu(e.props.address.main.id,n).then((function(a){Bu(e.props.address.billing.id,l).then((function(t){var n={main:a.data,billing:t.data};e.props.setAddress(n,4),Mm.b.success("Address Updated Successfully"),e.setState({buttonLoading:!1})}))})).catch((function(a){td(a),e.setState({buttonLoading:!1})})):qu(n).then((function(a){Uu(l).then((function(t){var n={main:a.data,billing:t.data};console.log(n,"address"),e.props.setAddress(n,4),Mm.b.success("Address created Successfully"),e.setState({buttonLoading:!1})}))})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e.handleCheckbox=function(a){e.setState({checked:a.target.checked},(function(){if(e.state.checked){var a=e.formRef.current,t=a.setFieldsValue,n=a.getFieldValue;t({street_address_1:n("street_address"),apartment_1:n("apartment"),city_1:n("city"),county_1:n("county"),state_1:n("state"),zip_code_1:n("zip_code"),country_1:n("country")})}}))},e.phoneNumberValidate=function(e,a,t){(null===a||void 0===a?void 0:a.toString().length)<10?t("minimum digits should be 10"):t()},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e.handleBillingCountyChange=function(a){e.formRef.current.setFieldsValue({state_1:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateBillingState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state_1:t[0].state})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t=this;if(this.props.match.params.id==(null===(e=this.props)||void 0===e||null===(a=e.account)||void 0===a?void 0:a.id)){var n,l=(null===(n=this.props)||void 0===n?void 0:n.address)||"",c=l.main,i=l.billing;this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},c),{},{country:(null===c||void 0===c?void 0:c.country)||"United States",street_address_1:null===i||void 0===i?void 0:i.street_address,apartment_1:null===i||void 0===i?void 0:i.apartment,city_1:null===i||void 0===i?void 0:i.city,county_1:null===i||void 0===i?void 0:i.county,state_1:null===i||void 0===i?void 0:i.state,zip_code_1:null===i||void 0===i?void 0:i.zip_code,country_1:(null===i||void 0===i?void 0:i.country)||"United States"}))}else{var r;(null===(r=this.formRef)||void 0===r?void 0:r.current)&&this.formRef.current.setFieldsValue({country:"United States",country_1:"United States"})}Qu({ordering:"county"}).then((function(e){t.setState({county:e.data}),t.setState({updateMainState:e.data}),t.setState({updateBillingState:e.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.county,n=a.updateMainState,c=a.updateBillingState;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input main address and billing address."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit,hideRequiredMark:!0},cp,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 ".concat(this.props.gridsm?"":"col-sm-6"," border-rit-div")},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h4",null,"Main Address")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc"},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(n,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{key:e.name,value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number",rules:[{required:!1,message:""},{validator:this.phoneNumberValidate}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,"")},parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"123-456-7890",maxLength:"22"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))))),l.a.createElement("div",{className:"col-12 ".concat(this.props.gridsm?"":"col-sm-6")},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement("h4",null,"Billing Address"),l.a.createElement("div",{className:"same-address-label position-absolute"},l.a.createElement(Fm.a.Item,{name:"is_same_main_address"},l.a.createElement(tp.a,{checked:this.state.checked,onChange:function(a){return e.handleCheckbox(a)}},"Same as Main Address")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address_1",label:"Street Address",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"apartment_1",label:"Apartment, Suite, etc"},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"county_1",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleBillingCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city_1",label:"City",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state_1",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(c,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code_1",label:"ZIP/Postal Code",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country_1",label:"Country",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{key:e.name,value:e.name},e.name)}))))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main",loading:this.state.buttonLoading},"Save and Continue"))))))))}}]),t}(n.Component),rp=Object(r.withRouter)(ip);function sp(e){return od(ad("account.ownerAccount"),e)}function op(e,a){return md(ad("account.ownerAccount",{id:e}),a)}function mp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("account.ownerAccount");return id(a,e)}function dp(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("account.ownerAccount",{id:e});return id(t,a)}function up(e){return od(ad("account.ownerPaymentInfo"),e)}function pp(e,a){return md(ad("account.ownerPaymentInfo",{id:e}),a)}function vp(e){return od(ad("account.ownerSites"),e)}function hp(e){return id(ad("account.ownerSites"),e)}function fp(e){return id(ad("account.ownerSites",{id:e}))}function Ep(e,a){return md(ad("account.ownerSites",{id:a}),e)}function gp(e){return dd(ad("account.ownerSites",{id:e}))}function bp(e,a){return id(ad("account.associated_account",{id:e}),a)}function Np(e){return id(ad("account.industry"),e)}var yp=t(27);var wp=function(e){e.when,e.onOK,e.onCancel;var a=e.title,t=(e.okText,e.cancelText,Object(r.useHistory)(),Object(n.useState)(!1)),c=Object(yp.a)(t,2),i=c[0],s=c[1],o=Object(n.useState)(""),m=Object(yp.a)(o,2);return m[0],m[1],Object(n.useEffect)((function(){s(e.visible)}),[e.visible]),i?l.a.createElement(Cu.a,{className:"unsavedexitprompt-modal confirmation-popup-modal warning- text-center drawer-unsaved-modal",visible:i,onOk:e.onOK,okText:e.okText,onCancel:e.onCancel,cancelText:e.cancelText,closable:!0},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.warning_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,a),l.a.createElement("p",{className:"mb-0 mx-auto"},"Not add the required information may cause issues down the line. If you'd like to continue adding information, select Continue. If you would like to exit anyway, select Exit.")))):null},_p=fu.a.Panel,Sp=ku.a.Option,xp=Pm.a.TextArea,Cp={labelCol:{span:24},wrapperCol:{span:24}},Op=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={account:null,payment:null,address:null,warningModalVisible:!1,visibleConfirm:!1,unsavedExit:!1,activeKey:["1"],buttonLoading:!1,industry:[],page:1},e.formRef=l.a.createRef(),e.setAccount=function(a,t){var n;null===(n=e.state.account)||void 0===n||n.name,e.setState((function(){return{account:a}}));var l=null;e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l||e.setState((function(e){return{account:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"")))}}))},e.handleCollapseChange=function(a){e.setState({activeKey:a})},e.setAddress=function(a){e.setState({address:a,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})},e.setPayment=function(a,t){var n=null;e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n||e.setState((function(e){return{payment:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"3")))}}))},e.handleSubmit=function(a){Tu(Object(wu.a)(Object(wu.a)({},a),{},{industry:a.industry?a.industry.value:null,account_source:a.account_source?a.account_source:null})).then((function(a){Mm.b.success("Account Created Successfully"),e.setAccount(a.data,2),e.setState({buttonLoading:!1}),e.props.callbackCustomerAccount(a.data)})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e.fetchIndustries=function(){Np({page:e.state.page}).then((function(a){1===e.state.page?e.setState({industry:a.data.results}):e.setState((function(e){return{industry:[].concat(Object(Ou.a)(e.industry),Object(Ou.a)(a.data.results))}}))}))},e.handleClose=function(){e.setState({payment:[],address:null,account:null,activeKey:["1"]}),e.props.onClose()},e.resetAccountsFields=function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):(e.props.onClose(),e.setState({payment:[],address:null,account:null,activeKey:["1"]}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchIndustries()}},{key:"componentDidUpdate",value:function(e,a){e.visible!=this.props.visible&&this.formRef.current&&this.formRef.current.setFieldsValue({account_type:this.props.createAccountType||"CUSTOMER"})}},{key:"render",value:function(){var e=this,a=this.state,t=a.account,n=a.payment,c=a.address,i=a.activeKey,r=a.buttonLoading;return l.a.createElement(l.a.Fragment,null,l.a.createElement(wp,{visible:this.state.drawerVisible,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){e.props.onClose(),e.setState({drawerVisible:!1,payment:[],address:null,account:null,activeKey:["1"]})},onCancel:function(){e.setState({drawerVisible:!1})}}),l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Create Account",visible:this.props.visible,width:"625px",placement:"right",maskClosable:!1,className:"main-all-form-modal main-drawer-div drawer-update",onClose:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.handleClose()},onCancel:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.props.onClose()},footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){e.resetAccountsFields()},type:"primary"},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Below is the required information to create an account. To add more information, please modify the account from the Accounts & Contacts section.")),l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:this.handleCollapseChange,activeKey:i,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(_p,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},Cp,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information here."))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Account Name"}))),l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{initialValue:this.props.createAccountType?"CUSTOMER_OWNER":"CUSTOMER",name:"account_type",label:"Account Type *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{disabled:!0,showArrow:!1,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Payment Term"},l.a.createElement(Sp,{value:"CUSTOMER"},"Billing"),l.a.createElement(Sp,{value:"SITE_OWNER"},"Site Manager"),l.a.createElement(Sp,{value:"CUSTOMER_OWNER"},"Billing, Site Manager")))))),l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"industry",label:"Industry",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&e.state.page<3&&e.setState({page:e.state.page+1},(function(){return e.fetchIndustries()}))}}," ",this.state.industry.map((function(e){return l.a.createElement(Sp,{value:e.id},e.title)}))))))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"website",label:"Website",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"www.website.com"}))),l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_source",label:"Account Source",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder account-source-div"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(Sp,{value:"ADVERTISEMENT"},"Advertisement"),l.a.createElement(Sp,{value:"CONSTRUCTCONNECT"},"ConstructConnect"),l.a.createElement(Sp,{value:"WORD_OF_MOUTH"},"Word of Mouth"),l.a.createElement(Sp,{value:"MARKETING_ASSISTANT"},"Marketing Assistant")))))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"epa_id",label:"EPA ID",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"ABC123456789"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"note",label:"Note",rules:[{message:"this field is required"}]},l.a.createElement(xp,{placeholder:"Type something",rows:6,style:{height:"auto",paddingTop:15}}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:r,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(_p,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Payment Information"))),key:"2"},l.a.createElement(ep,{account:t,payment:n,setPayment:this.setPayment,gridsm:!0})),l.a.createElement(_p,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information"))),key:"3"},l.a.createElement(rp,{account:t,address:c,setAddress:this.setAddress,gridsm:!0})))))))))}}]),t}(n.Component),kp=Object(r.withRouter)(Op),jp=ku.a.Option,Ip={labelCol:{span:24},wrapperCol:{span:24}},Ap=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={buttonLoading:!1,paymentLoaded:!1},e.formRef=l.a.createRef(),e.onSubmit=function(a){var t,n;e.setState({buttonLoading:!0}),a.account=null===(t=e.props)||void 0===t||null===(n=t.account)||void 0===n?void 0:n.id,e.props.payment?pp(e.props.payment.id,a).then((function(a){e.setState({buttonLoading:!1}),Mm.b.success("Account updated successfully"),e.props.setPayment(a.data,3)})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})})):up(a).then((function(a){e.setState({buttonLoading:!1}),Mm.b.success("Account updated successfully"),e.props.setPayment(a.data,3)})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){if(this.props.match.params.id==this.props.account.id){Object(wu.a)({},this.props.payment);dp(this.props.match.params.id).then((function(e){Object(wu.a)({},e.data.payment_information)}))}}},{key:"render",value:function(){var e=this.state.buttonLoading,a=this.props.payment;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose this account\u2019s tax exemption status."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit},Ip,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"tax_exemption",label:"Sales Tax Exemption Status *",initialValue:null===a||void 0===a?void 0:a.tax_exemption,rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Default Sales Tax"},l.a.createElement(jp,{value:!0},"Exempt"),l.a.createElement(jp,{value:!1},"Non Exempt")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:e,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),Dp=Object(r.withRouter)(Ap),Tp=fu.a.Panel,Rp=ku.a.Option,Mp=Pm.a.TextArea,Fp={labelCol:{span:24},wrapperCol:{span:24}},Pp=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={account:null,payment:null,address:null,warningModalVisible:!1,visibleConfirm:!1,unsavedExit:!1,requiredSuccessModalVisible:!1,activeKey:["1"],buttonLoading:!1,industry:[],page:1},e.formRef=l.a.createRef(),e.setAccount=function(a,t){var n;null===(n=e.state.account)||void 0===n||n.name,e.setState((function(){return{account:a}}));var l=null;e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l||e.setState((function(e){return{account:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"3")))}}))},e.setPayment=function(a,t){var n=null;e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n||e.setState((function(e){return{payment:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"3")))}})),e.setState({payment:a})},e.setAddress=function(a,t){e.setState({address:a,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0});var n=null;e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n||e.setState((function(e){return{address:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"3")))}}))},e.getIndustries=function(){Np({page:e.state.page}).then((function(a){1===e.state.page?e.setState({industry:a.data.results}):e.setState((function(e){return{industry:[].concat(Object(Ou.a)(e.industry),Object(Ou.a)(a.data.results))}}))}))},e.handleCollapseChange=function(a){e.setState({activeKey:a})},e.onSubmit=function(a){e.setState({buttonLoading:!0}),sp(Object(wu.a)(Object(wu.a)({},a),{},{industry:a.industry?a.industry.value:null,account_source:a.account_source?a.account_source:null})).then((function(a){Mm.b.success("Account Created Successfully"),e.setAccount(a.data,2),e.setState({buttonLoading:!1}),e.props.callbackOwnerAccount(a.data)})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e.handleClose=function(){e.setState({payment:[],address:null,account:null,activeKey:["1"]}),e.props.onClose()},e.resetAccountsFields=function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):(e.props.onClose(),e.setState({payment:[],address:null,account:null,activeKey:["1"]}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getIndustries()}},{key:"componentDidUpdate",value:function(e,a){e.visible!=this.props.visible&&this.formRef.current&&this.formRef.current.setFieldsValue({account_type:this.props.createAccountType||"SITE_OWNER"})}},{key:"render",value:function(){var e=this,a=this.state,t=a.account,n=a.payment,c=a.address,i=a.activeKey,r=a.buttonLoading;return l.a.createElement(l.a.Fragment,null,l.a.createElement(wp,{visible:this.state.drawerVisible,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){e.props.onClose(),e.setState({drawerVisible:!1,payment:[],address:null,account:null,activeKey:["1"]})},onCancel:function(){e.setState({drawerVisible:!1})}}),l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Create Account",visible:this.props.visible,width:"625px",placement:"right",maskClosable:!1,className:"main-all-form-modal main-drawer-div drawer-update",onClose:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.handleClose()},onCancel:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.props.onClose()},footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){e.resetAccountsFields()},type:"primary"},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Below is the required information to create an account. To add more information, please modify the account from the Accounts & Contacts section.")),l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:this.handleCollapseChange,activeKey:i,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Tp,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information here. "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit},Fp,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Account Name"}))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{initialValue:"SITE_OWNER",className:"account-type-item",name:"account_type",label:"Account Type *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{disabled:!0,showArrow:!1,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Payment Term"},l.a.createElement(Rp,{value:"CUSTOMER"},"Billing"),l.a.createElement(Rp,{value:"SITE_OWNER"},"Site Manager"),l.a.createElement(Rp,{value:"CUSTOMER_OWNER"},"Billing, Site Manager")))),l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"industry",label:"Industry",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&e.state.page<3&&e.setState({page:e.state.page+1},(function(){return e.getIndustries()}))}}," ",this.state.industry.map((function(e){return l.a.createElement(Rp,{value:e.id},e.title)}))))))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"website",label:"Website",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"www.website.com"}))),l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_source",label:"Account Source",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder account-source-div"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(Rp,{value:"ADVERTISEMENT"},"Advertisement"),l.a.createElement(Rp,{value:"CONSTRUCTCONNECT"},"ConstructConnect"),l.a.createElement(Rp,{value:"WORD_OF_MOUTH"},"Word of Mouth"),l.a.createElement(Rp,{value:"MARKETING_ASSISTANT"},"Marketing Assistant")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"note",label:"Note",rules:[{message:"this field is required"}]},l.a.createElement(Mp,{placeholder:"Type something",rows:6,style:{height:"auto",paddingTop:15}}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:r,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(Tp,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Payment Information"))),key:"2"},l.a.createElement(Dp,{account:t,payment:n,setPayment:this.setPayment,gridsm:!0})),l.a.createElement(Tp,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information"))),key:"3"},l.a.createElement(rp,{account:t,address:c,setAddress:this.setAddress,gridsm:!0})))))))))}}]),t}(n.Component),Vp=Object(r.withRouter)(Pp),qp="CUSTOMER_OWNER",Lp={SITE_OWNER:"Site Manager",CUSTOMER:"Billing",CUSTOMER_OWNER:"Billing, Site Manager",VENDOR:"Vendor"},Up=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={acc_type:!1},e.setAccountCallBack=function(a,t){e.props.setAccountType(a,t)},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=(a.createAccount,a.ALL_TYPES),n=a.PARTIAL_BILLING,c=a.PARTIAL_MANAGER;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:this.props.visible,onCancel:this.props.onClose,centered:!0,className:"confirmation-popup-modal account-type-all",okText:!1,cancelText:!1},l.a.createElement("div",{className:"row mx-0 confirm-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.questionMarkBgGreenIcons,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,"What type of account are you creating?")),l.a.createElement("div",{className:"col-12"},(n||t)&&l.a.createElement(Vm.a,{onClick:function(){e.props.onClose(),n?e.setAccountCallBack("CUSTOMER",!0):o.push(zm.dashboard.customer_account.create)},className:"account-type-btn-main d-flex align-items-center"},l.a.createElement("img",{src:Rm.persons_sidebar_new,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Billing")),(c||t)&&l.a.createElement(Vm.a,{onClick:function(){e.props.onClose(),c?e.setAccountCallBack("SITE_OWNER",!0):o.push(zm.dashboard.owner_account.create)},className:"account-type-btn-main d-flex align-items-center"},l.a.createElement("img",{src:Rm.persons_sidebar_new,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Site Manager")),l.a.createElement(Vm.a,{onClick:function(){e.props.onClose(),n||c?e.setAccountCallBack(qp,!0):o.push(zm.dashboard.customer_owner_account)},className:"account-type-btn-main d-flex align-items-center"},l.a.createElement("img",{src:Rm.persons_sidebar_new,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Billing & Site Manager")),t&&l.a.createElement(Vm.a,{onClick:function(){e.props.onClose(),o.push(zm.dashboard.vendor_account.create)},className:"account-type-btn-main d-flex align-items-center"},l.a.createElement("img",{src:Rm.persons_sidebar_new,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Vendor"))))))}}]),t}(n.Component);function Bp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.employee");return id(a,e)}function Wp(e){return id(ad("labor.employee",{id:e}))}function Yp(e){return od(ad("labor.employee"),e)}function Kp(e,a){return md(ad("labor.employee",{id:e}),a)}function Gp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.labor_employee");return id(a,e)}function zp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.labor_group");return id(a,e)}function Hp(e){return id(ad("labor.labor_group",{id:e}))}function $p(e){return od(ad("labor.labor_group"),e)}function Qp(e,a){return md(ad("labor.labor_group",{id:e}),a)}function Jp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.shift");return id(a,e)}function Zp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.employee_doc");return id(a,e)}function Xp(e){return od(ad("labor.employee_doc"),e)}function ev(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.employee_type");return id(a,e)}function av(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.internal_location");return id(a,e)}function tv(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("labor.internal_location",{id:e});return md(t,a)}function nv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.internal_location");return od(a,e)}function lv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("global_search.global_search");return id(a,e)}var cv=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:function(){e.props.handlePostDrawer?(e.props.onClose(),e.props.closePostDrawer()):e.props.uomWarning||e.props.retrieveWarning?e.props.okAction():e.props.common||e.props.laborGroupModal?e.props.commonFunc():e.props.deleteWageType?e.props.updateAfterDltdWageType():e.props.commonInternalLocationPopup?e.props.showWarningModal2():e.props.changeAccountTypeConfirmation?e.props.changeAccountType():e.props.addPricingWarning?e.props.confirmClose():e.props.wageInfoDelete?e.props.removeItem():e.props.newCommonModal||e.props.removeContactWarning?e.props.removeConFunc():e.props.costSettingWarning?e.props.confirmCloseCost():e.props.totalPricingWarning?e.props.changeTotalPriceTax():e.props.googleSigninModal?e.props.handleGoogleBtnClick():e.props.changeAccountType?e.props.handleAccountChange():e.props.priceUnitType?e.props.onOk():e.props.history.goBack()},onCancel:this.props.onClose,centered:!0,className:"confirmation-popup-modal warning-modal",okText:this.props.resourceWarning||this.props.common||this.props.wageInfoDelete||this.props.empDelete||this.props.removeContactWarning?"Yes, I want to remove":this.props.commonDO||this.props.newCommonModal?"Yes, I Do":this.props.changeAccountTypeConfirmation?"Yes, I would like to":this.props.deleteWageType||this.props.wageInfoDelete?"Yes, I want to delete":this.props.changeAccountType?"Yes, I want to change":this.props.costSettingWarning||this.props.editedCheckWarning||this.props.googleSigninModal||this.props.totalPricingWarning?"Yes, I want to":"Yes, I want to ".concat(this.props.uomWarning?"continue":"exit"),cancelText:this.props.resourceWarning||this.props.deleteWageType||this.props.wageInfoDelete||this.props.commonInternalLocationPopup||this.props.newCommonModal||this.props.removeContactWarning||this.props.totalPricingWarning||this.props.costSettingWarning||this.props.googleSigninModal?"No, cancel this action":this.props.changeAccountTypeConfirmation||this.props.retrieveWarning?"No, go back":this.props.uomWarning?"Go back":this.props.match.params.id?"No, continue editing":"No, continue creating"},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.warning_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),this.props.subHeadingUOM?this.props.subHeadingUOM:l.a.createElement("p",{className:"mb-0 mx-auto"},this.props.match.params.id?l.a.createElement("span",null,"If you choose to exit, only validated data has been saved. If you want to continue editing, click \u201dNo, continue editing\u201d."):l.a.createElement("span",null,"Any progress you've made will not be saved. ",l.a.createElement("br",null),"and you cannot undo this action."))))))}}]),t}(n.Component),iv=Object(r.withRouter)(cv),rv=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,googleModalVisible:!1},e.handleGoogleBtnClick=function(){pd({redirect_url:window.location.href}).then((function(e){window.location.href=e.data.url}))},e.handleModalVisible=function(){e.setState({googleModalVisible:!0})},e.getUserDetails=function(){e.props.userDataAction()},e.menu2=function(){var a=e.props.userdata;return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 profile-details-div"},l.a.createElement("div",{className:"profile-avatar-div text-uppercase"},Ed(a.first_name,a.last_name)),l.a.createElement("h6",null,a.first_name," ",a.last_name),l.a.createElement("p",null,a.email)))),l.a.createElement(_u.a.Item,null,l.a.createElement("div",null,a.google_authorised_email?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"sign-with-google-btn d-inline-block"},l.a.createElement("div",{className:"sign-with-icon"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.google_logo})),l.a.createElement("div",{className:"sign-with-content"},l.a.createElement("span",{className:"d-inline-block w-100 mb-1"},"Signed in with google"),l.a.createElement("span",{className:"email-custom d-inline-block w-100"},(null===a||void 0===a?void 0:a.google_authorised_email)||"")))):l.a.createElement("div",{className:"sign-with-google-btn d-inline-block"},l.a.createElement("div",{className:"sign-with-icon"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.google_logo})),l.a.createElement("div",{className:"sign-with-content"},l.a.createElement("span",{onClick:e.handleModalVisible,className:"d-flex align-items-center ml-3"},"Sign in with Google"))))),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(qm.a,{className:"d-flex align-items-center logout-btn",to:zm.logout},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.logout_icon}),"Log Out")))},e.showAccountTypeModal=function(a){e.setState({visible:a})},e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement("div",{onClick:function(){return e.showAccountTypeModal(!0)},className:"d-flex align-items-center w-100 font-weight-bold"},"Account")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:zm.dashboard.contacts.create},"Contact")),l.a.createElement(_u.a.Item,{key:"3"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:zm.dashboard.opportunities.create},"Opportunity")),l.a.createElement(_u.a.Item,{key:"4"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:zm.dashboard.sales.proposal.create},"Proposal")),l.a.createElement(_u.a.Item,{key:"5"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:zm.dashboard.operations.projects.create},"Project")),l.a.createElement(_u.a.Item,{key:"6"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:zm.dashboard.operations.work_order.create},"Work Order"))),e.getUrl=function(a){if("#"===a)return"";var t=e.props.location.pathname;return t.includes("view")?t.includes("packages")?"?tab=packages":t.includes("groups")?"?tab=groups":t.includes("items")?"?tab=items":t.includes("kits")?"?tab=kits":t.includes("labor/labor-group")?"?tab=labor":t.includes("labor/employee")?"?tab=employee":t.includes("supply-tools/supply-tools")?"?tab=tools":t.includes("vehicles/vehicle")?"?tab=vehicles":"":""},e.pushToGlobal=function(){e.props.history.push(zm.dashboard.global_search)},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return a.persist(),e.debouncedEvent(a)}},e.onSearch=function(a){var t=a.target.value.length;(t>3||3===t)&&e.props.globalSearchAction({search:a.target.value})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.userdata;(null===e||void 0===e?void 0:e.google_authorised_email)||this.getUserDetails()}},{key:"render",value:function(){var e=this,a=this.state.googleModalVisible,t=this.props.userdata,n=this.props.breadcrumb||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-header-main d-flex align-items-center position-fixed"},l.a.createElement("div",{className:"row w-100 align-items-center justify-content-between"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"heading-header-main"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.breadcrumb_right_arrow,alt:"",className:"img-fluid"})},"/dashboard/"==this.props.location.pathname?l.a.createElement(Su.a.Item,null,"Dashboard"):n.map((function(a,t){return l.a.createElement(Su.a.Item,{key:t},a.url&&a.url!==e.props.location.pathname?l.a.createElement(qm.a,{to:a.url+(0===t?"":e.getUrl(a.url))},a.title):l.a.createElement("span",null,a.title))}))))),l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement("div",{className:"header-right-details"},l.a.createElement("ul",{className:"list-inline mb-0 d-flex align-items-center justify-content-end"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("div",{className:"search-bar-div"},-1!==this.props.match.url.indexOf("create")||-1!==this.props.match.url.indexOf("edit")?"":l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{allowClear:!0,className:"search-input-header",placeholder:"Search (minimum 3 characters required)",onFocus:this.pushToGlobal,autoFocus:!!this.props.match.url.includes("global-search"),onChange:this.debounceEvent(this.onSearch,1e3)}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement("li",{className:"list-inline-item"},-1!==this.props.match.url.indexOf("create")||-1!==this.props.match.url.indexOf("edit")?"":l.a.createElement("div",{className:"create-div"},l.a.createElement(xu.a,{overlayClassName:"create-dropdown-main",overlay:this.menu,trigger:["click"],placement:"bottomCenter"},l.a.createElement(Vm.a,{onClick:function(e){return e.preventDefault()},className:"ant-dropdown-link"},l.a.createElement("span",null,"+ Create"))))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("div",{className:"account-user-details position-relative"},l.a.createElement(xu.a,{overlayClassName:"profile-fix-dropdown",trigger:"click",overlay:this.menu2},l.a.createElement(Vm.a,{className:"rounded-circle border-0 p-0 text-uppercase position-relative shadow-none d-flex align-items-center justify-content-center"},Ed(t.first_name,t.last_name),l.a.createElement("span",{className:"position-absolute rounded-circle"})))))))))),l.a.createElement(Up,{ALL_TYPES:!0,visible:this.state.visible,onClose:function(){return e.showAccountTypeModal(!1)}}),l.a.createElement(iv,{heading:"You need to sign in with Google to move forward. Would you like to sign in?",subHeadingUOM:"If you would like to sign in with Google, you would be redirected to Google's sign in page. After signing in, you would be brought back to the dashboard.",handleGoogleBtnClick:function(){e.handleGoogleBtnClick()},visible:a,onClose:function(){e.setState({googleModalVisible:!1})},googleSigninModal:!0}))}}]),t}(n.Component),sv={globalSearchAction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(a){return lv(e).then((function(e){a({type:"GLOBAL_SEARCH",payload:null===e||void 0===e?void 0:e.data})}))}},userDataAction:function(e){return function(e){return id(ad("auth.profile")).then((function(a){e({type:"USERDATA",payload:null===a||void 0===a?void 0:a.data})}))}}},ov=Object(Lm.b)((function(e){return Object(wu.a)(Object(wu.a)({},e),{},{breadcrumb:e.breadcrumb})}),sv)(Object(r.withRouter)(rv)),mv=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.account_contact)},className:"shade-card-main-div dashboard-card-new row mx-0 cursor-pointer"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.account_white_icon_db,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Accounts & Contacts"),l.a.createElement("h6",{className:"mb-0"},"Billing, Site Manager, Vendor Accounts and Contacts"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.sales.self)},className:"shade-card-main-div dashboard-card-new row mx-0 cursor-pointer"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.sales_white_icon_db,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Sales"),l.a.createElement("h6",{className:"mb-0"},"Opportunities and Proposals"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.operations.self)},className:"shade-card-main-div dashboard-card-new row mx-0 cursor-pointer"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.work_order_white_icon_db,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Operations"),l.a.createElement("h6",{className:"mb-0"},"Projects, Work Orders, Dispatch, and Warehouse Management"))))))),l.a.createElement(eu,{allow:["ADMIN"]},l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.management.self)},className:"shade-card-main-div dashboard-card-new row mx-0 cursor-pointer"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.management_white_icon_db,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Management"),l.a.createElement("h6",{className:"mb-0"},"Services, Labor, Fleet, Supplies / Small Tools, Inventory, and Disposal "," "))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{disabled:!0,className:"shade-card-main-div shade-card-inactive-section dashboard-card-new mx-0 row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.accounting_white_icon_db,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Accounting"),l.a.createElement("h6",{className:"mb-0"},"Short description of this section"))),l.a.createElement("div",{className:"coming-soon-div d-flex align-items-center m-auto"},"Coming Soon"))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{disabled:!0,className:"shade-card-main-div shade-card-inactive-section dashboard-card-new mx-0 row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.analytics_white_icon_db,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Analytics"),l.a.createElement("h6",{className:"mb-0"},"Short description of this section"))),l.a.createElement("div",{className:"coming-soon-div d-flex align-items-center m-auto"},"Coming Soon"))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{disabled:!0,className:"shade-card-main-div shade-card-inactive-section dashboard-card-new mx-0 row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.data_white_icon_db,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Data Management"),l.a.createElement("h6",{className:"mb-0"},"Short description of this section"))),l.a.createElement("div",{className:"coming-soon-div d-flex align-items-center m-auto"},"Coming Soon")))))))))))}}]),t}(n.Component),dv=t(1048),uv=t(1049);function pv(e){}var vv=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1},e.filterDataPop=[l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"filter-main-card row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 type-working-checkbox"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"d-flex align-items-center justify-content-between"},"Filter Opportunities")),l.a.createElement("div",{className:"col-12"},l.a.createElement(tp.a.Group,{onChange:pv},l.a.createElement(dv.a,null,l.a.createElement(uv.a,{span:24},l.a.createElement(tp.a,{value:"A"},"Only my opportunities")),l.a.createElement(uv.a,{span:24},l.a.createElement(tp.a,{value:"B"},"Prospect")),l.a.createElement(uv.a,{span:24},l.a.createElement(tp.a,{value:"C"},"Contacted")),l.a.createElement(uv.a,{span:24},l.a.createElement(tp.a,{value:"D"},"Nurturing")),l.a.createElement(uv.a,{span:24},l.a.createElement(tp.a,{value:"E"},"Negotiating")),l.a.createElement(uv.a,{span:24},l.a.createElement(tp.a,{value:"F"},"Converted")),l.a.createElement(uv.a,{span:24},l.a.createElement(tp.a,{value:"G"},"Closed / Dead")))))))),l.a.createElement("div",{className:"footer-row-main-fix border-0 mt-0 row mx-0"},l.a.createElement(Vm.a,{type:"primary"},"Apply Filter")))],e.hide=function(){e.setState({visible:!1})},e.handleVisibleChange=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 align-items-center mini-header-filter-list-grid-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-opportunities-div"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.props.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement("div",{className:"filters-div"})),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(qm.a,{to:zm.dashboard.opportunities.create,className:"new-opportunity-btn d-flex align-items-center justify-content-center text-capitalize"},"+ Create Opportunity"))))))}}]),t}(n.Component),hv=t(1068),fv=t(1053);function Ev(e){}var gv=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:""},l.a.createElement(hv.a,{defaultChecked:!0,onChange:Ev}),l.a.createElement("span",null,"Salesperson"))),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:""},l.a.createElement(hv.a,{onChange:Ev}),l.a.createElement("span",null,"Sales Manager"))),l.a.createElement(_u.a.Item,{key:"2"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:""},l.a.createElement(hv.a,{onChange:Ev}),l.a.createElement("span",null,"Sales Assistant")))),e.columns=[{title:"Opportunity Id",dataIndex:"id",sorter:!0,key:"id"},{title:"Opportunity name",key:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.name||"-"),$d(e)&&l.a.createElement("p",{className:"red-text-disposal"},"Please complete all required information to avoid issues."))}},{title:"Status",dataIndex:"status",sorter:!0,key:"status",render:function(e){return(null===e||void 0===e?void 0:e.title)||"-"}},{title:"Primary Team Member",dataIndex:"point_opportunity",render:function(e){return l.a.createElement("div",null,e||"-")},sorter:!0,key:"point_opportunity"},{title:"OPPORTUNITY SOURCE",dataIndex:"source",render:function(e){return l.a.createElement("div",null,e.name)},sorter:!0,key:"source"},{title:"Billing Account",dataIndex:"customer_contact_accounts",sorter:!0,render:function(e){return(null===e||void 0===e?void 0:e.length)>0?Object.keys(e).map((function(a,t){return l.a.createElement("span",{key:t},e[a].account&&e[a].account.name," ",e.length>1&&",")})):"-"},key:"customer_contact_accounts"},{title:"Site Manager Account",dataIndex:"owner_contact_accounts",render:function(e){var a,t;return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.length)&&(null===(a=e[0])||void 0===a||null===(t=a.account)||void 0===t?void 0:t.name)||"-")},sorter:!0,key:"owner_contact_accounts"},{title:"Total Bid Value",dataIndex:"bid_value",sorter:!0,render:function(e){return l.a.createElement("div",null,e?"$".concat(e):"-")},key:"bid_value"},{title:"Bid Date",dataIndex:"bid_date",render:function(e){return l.a.createElement("div",null,Sd(e)||"-")},sorter:!0,key:"bid_date"},{title:l.a.createElement("div",{className:"position-relative"},"Last Activity Date"),dataIndex:"modified",render:function(e){return l.a.createElement("div",null,Sd(e))},sorter:!0,key:"modified"}],e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="-modified",e.props.fetchTableData(c)},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.pagination,t=e.loading,n=e.data,c=e.locale;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table"},l.a.createElement(fv.a,{scroll:{y:500,x:1300},className:"main-table-all",columns:this.columns,loading:t,dataSource:n,locale:c,size:"middle",onChange:this.handleTableChange,pagination:a,rowKey:function(e){return e.id},rowClassName:function(e){if($d(e))return"is-required"},onRow:function(e,a){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.opportunities.view,{id:e.id}))}}}})))}}]),t}(n.Component);function bv(e){return id(ad("opportunity.source"),e)}function Nv(e){return id(ad("opportunity.documents"),e)}function yv(e){return od(ad("opportunity.documents"),e)}function wv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("opportunity.opportunity");return id(a,e)}function _v(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("opportunity.opportunity",{id:e});return id(t,a)}function Sv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("opportunity.documents");return id(a,e)}function xv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("opportunity.post");return id(a,e)}function Cv(e,a){return md(ad("opportunity.post",{id:e}),a)}function Ov(e){return od(ad("opportunity.opportunity"),e)}function kv(e,a){return md(ad("opportunity.opportunity",{id:e}),a)}function jv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("opportunity.customer_contacts");return id(a,e)}function Iv(e){return od(ad("opportunity.customer_contacts"),e)}function Av(e,a){return md(ad("opportunity.customer_contacts",{id:e}),a)}function Dv(e){return dd(ad("opportunity.customer_contacts",{id:e}))}function Tv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("opportunity.owner_contacts");return id(a,e)}function Rv(e){return od(ad("opportunity.owner_contacts"),e)}function Mv(e,a){return md(ad("opportunity.owner_contacts",{id:e}),a)}function Fv(e){return dd(ad("opportunity.owner_contacts",{id:e}))}function Pv(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("opportunity.opportunity_activity",{id:e});return id(t,a)}function Vv(){return id(ad("opportunity.status"))}function qv(e,a){return md(ad("opportunity.primary_site",{id:e}),a)}function Lv(){return id(ad("opportunity.reason_options"))}function Uv(e){return function(a){a({type:"BREADCRUMB_DATA",payload:e})}}var Bv=Object(Lm.b)(null,{setBreadcrumb:Uv})((function(e){var a=Object(n.useState)({search:"",current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(""),s=Object(yp.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)([]),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=Object(n.useState)(!1),f=Object(yp.a)(h,2),E=f[0],g=f[1];Object(n.useEffect)((function(){var a=[{title:"Opportunities",url:zm.dashboard.opportunities.self}];e.setBreadcrumb(a),b()}),[o]);var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(!0),e.ordering||(e.ordering="-modified"),wv(Object(wu.a)(Object(wu.a)({},e),{},{search:o})).then((function(a){v(a.data.results),i((function(t){return Object(wu.a)(Object(wu.a)({},t),{},{current:e.page||1,total:a.data.count})})),g(!1)})).catch((function(e){return td(e)}))};return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(vv,{onSearch:lu((function(e){m(e.target.value)}),1e3)}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard width-160-id"},l.a.createElement(gv,{loading:E,fetchTableData:b,data:p,locale:E?{emptyText:" "}:{emptyText:l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.no_opportunities_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"no-data-main-tg mb-0"},"No Opportunities"))))},pagination:c})))})),Wv=t(686),Yv={labelCol:{span:24},wrapperCol:{span:24}},Kv=ku.a.Option,Gv=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[],value:[],fetching:!1},e.fetchUser=function(a){e.lastFetchId+=1;var t=e.lastFetchId;e.setState({data:[],fetching:!0}),fetch("https://randomuser.me/api/?results=5").then((function(e){return e.json()})).then((function(a){if(t===e.lastFetchId){var n=a.results.map((function(e){return{text:"".concat(e.name.first," ").concat(e.name.last),value:e.login.username}}));e.setState({data:n,fetching:!1})}}))},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this.state,a=e.fetching,t=e.data,n=e.value;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{centered:!0,title:"Create Contact",visible:this.props.visible,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal",cancelText:"Cancel",okText:"Create Contact",width:"575px"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},Yv,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-main"},l.a.createElement("h6",null,"General Information")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"f_name",label:"First Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"John"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"l_name",label:"Last Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Doe"}))),l.a.createElement("div",{className:"col-12 small-heading-main"},l.a.createElement("h6",null,"Contact Information")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"email@email.com"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"Phone",label:"Phone",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{placeholder:"000\u2013000\u20130000"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"mobile",label:"Mobile",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{placeholder:"000\u2013000\u20130000"}))),l.a.createElement("div",{className:"col-12 small-heading-main"},l.a.createElement("h6",null,"Related Account / Lead")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"r_a_o",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Related Account / Opportunity"),l.a.createElement("img",{src:Rm.info_small,alt:"",className:"img-fluid"})),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{mode:"multiple",labelInValue:!0,value:n,placeholder:"Search Accounts",notFoundContent:a?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onSearch:this.fetchUser,onChange:this.handleChange},t.map((function(e){return l.a.createElement(Kv,{key:e.value},e.text)})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})))))))))}}]),t}(n.Component),zv=t(35),Hv=t(299),$v={labelCol:{span:24},wrapperCol:{span:24}},Qv=ku.a.Option;var Jv=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={optValue:null},e.handleSubmit=function(a){console.log(a,"dsfds"),e.props.handleUpdate(Object(wu.a)(Object(wu.a)({},a),{},{status:12})),e.props.onClose()},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.reasons,n=a.reasonLoading,c=a.getReasons,i=this.state.optValue;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{centered:!0,title:"Status",visible:this.props.visible,onOk:this.handleSubmit,onCancel:this.props.onClose,className:"main-all-form-modal",okText:"Apply",width:"548px",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:this.props.onClose,style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.formRef.current.submit()},type:"primary"},"Apply"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},$v,{onFinish:this.handleSubmit,className:"main-inner-form",ref:this.formRef}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"status",label:"Status",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{disabled:!0,defaultValue:1},l.a.createElement(Qv,{value:1},"Lost")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"competitor_name",label:"Competitor Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Competitor Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"bid_amount",label:"Winning Bid Amount",rules:[{required:!1,message:""}]},l.a.createElement(ap.a,{placeholder:"Winning Bid Amount"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"reason_options",label:"Reason",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{onFocus:c,onChange:function(a){return e.setState({optValue:a})},value:i,placeholder:"Select",notFoundContent:n&&l.a.createElement(Wv.a,null)},t.map((function(e){return l.a.createElement(Qv,{value:e.id},e.title)}))))),10===i&&l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"reason",label:"Please Provide Other Reason",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a.TextArea,{className:"text-area-main",placeholder:"Type something"})))))))))}}]),t}(n.Component),Zv=[{value:"ROADS_HIGHWAYS",name:"Roads-Highways"},{value:"AIRPORT",name:"Airport"},{value:"BRIDGES",name:"Bridges"},{value:"OTHER",name:"Other"},{value:"PARKS",name:"Parks"},{value:"RAIL",name:"Rail"},{value:"SEWER",name:"Sewer"},{value:"WATER",name:"Water"},{value:"WWTP",name:"WWTP"},{value:"Pipeline / Station Work",name:"Pipeline / Station Work"}],Xv=ku.a.Option,eh={labelCol:{span:24},wrapperCol:{span:24}},ah=Pm.a.TextArea,th={salesPerson:"salesperson",salesAssistant:"salesassistant",salesManager:"salesmanager"},nh={salesPerson:"sales_person",salesAssistant:"sales_assistant",salesManager:"sales_manager"},lh=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={source:[],statusTypes:[],fetching:!1,buttonLoading:!1,reasonLoading:!1,reasons:[]},e.formRef=l.a.createRef(),e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){e.removeUsers(a,t)},className:"border-0 bg-transparent text-center p-0 w-100"},"Remove")))},e.removeUsers=function(a,t){e.setState(Object(zv.a)({},"".concat(t,"Selected"),e.state["".concat(t,"Selected")].filter((function(e){return e.id!==a.id})))),e.formRef.current.setFieldsValue(Object(zv.a)({},nh[t],e.formRef.current.getFieldValue(nh[t]).filter((function(e){return e!==a.id}))))},e.fetchSource=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),bv(a).then((function(a){e.setState({source:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.fetchUser=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.setState({fetching:!0}),ud(th[a],t).then((function(t){var n;e.setState((n={},Object(zv.a)(n,a,t.data.results),Object(zv.a)(n,"fetching",!1),n))})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSelect=function(a,t){var n=e.state[t].filter((function(e){return a.includes(e.id)}));e.setState(Object(zv.a)({},"".concat(t,"Selected"),n))},e.showStatus=function(a){e.setState({visible:a})},e.handleChange=function(a){12==a.value?e.showStatus(!0):e.handleUpdate(a)},e.handleUpdate=function(a){e.setState({modalData:a})},e.onSubmit=function(a){var t;console.log(a,"values"),e.setState({buttonLoading:!0});var n,l=e.state.modalData,c=Object(wu.a)(Object(wu.a)(Object(wu.a)({},a),l),{},{status:a.status.value,source:a.source.value,bid_date:null===(t=a.bid_date)||void 0===t?void 0:t.format("YYYY-MM-DD"),bid_value:a.bid_value?a.bid_value:null});(a.source=a.source.key,a.status=a.status.value,e.props.opportunity)?kv(null===(n=e.props.opportunity)||void 0===n?void 0:n.id,c).then((function(a){Mm.b.success("Opportunity Updated Successfully!"),e.props.setOpportunity(a.data,2),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})})):Ov(c).then((function(a){Mm.b.success("Opportunity Created Successfully!"),e.props.setOpportunity(a.data,2),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e],3)})),e.setState({buttonLoading:!1})}))},e.getStatusData=function(){Vv().then((function(a){e.setState({statusTypes:a.data.results})})).catch((function(e){td(e)}))},e.getReasons=function(){e.setState({reasonLoading:!0}),Lv().then((function(a){e.setState({reasons:a.data.results,reasonLoading:!1})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(Qm.a)($m.a.mark((function e(a,t,n){var l,c,i,r,s,o;return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.opportunity===this.props.opportunity){e.next=3;break}return e.next=3,this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.opportunity),{},{id:this.props.opportunity.id,name:this.props.opportunity.name,source:{key:this.props.opportunity.source.id,label:this.props.opportunity.source.name},description:this.props.opportunity.description,status:{value:null===(l=this.props.opportunity)||void 0===l||null===(c=l.status)||void 0===c?void 0:c.id,label:null===(i=this.props.opportunity)||void 0===i||null===(r=i.status)||void 0===r?void 0:r.title},estimated_revenue:this.props.opportunity.estimated_revenue,project_start_date:this.props.opportunity.project_start_date?hd()(this.props.opportunity.project_start_date):null,project_end_date:this.props.opportunity.project_end_date?hd()(this.props.opportunity.project_end_date):null,bid_date:(null===(s=this.props.opportunity)||void 0===s?void 0:s.bid_date)?hd()(null===(o=this.props.opportunity)||void 0===o?void 0:o.bid_date):null}));case 3:case"end":return e.stop()}}),e,this)})));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getStatusData()}},{key:"render",value:function(){var e=this,a=this.state,t=a.source,n=a.statusTypes,c=a.reasons,i=a.reasonLoading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row general-info"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information for opportunity."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,requiredMark:!1,ref:this.formRef},eh,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Opportunity Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Opportunity Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"status",label:"Status *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Status",onChange:this.handleChange},n.map((function(e,a){return l.a.createElement(Xv,{value:e.id,key:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"source",label:"Opportunity Source *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,labelInValue:!0,filterOption:!1,onSearch:function(a){return e.fetchSource({search:a})},onFocus:function(){return e.fetchSource()},notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):"Not Found",suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Source"},t.map((function(e){return l.a.createElement(Xv,{value:e.id,key:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimated_revenue",label:"Estimated Revenue",rules:[{required:!1,message:""}]},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"project_start_date",label:"Estimated Project Start Date",rules:[{required:!1,message:""}]},l.a.createElement(Hv.a,{placeholder:"mm/dd/yyyy",format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"project_end_date",label:"Estimated Project End Date",rules:[{required:!1,message:""}]},l.a.createElement(Hv.a,{placeholder:"mm/dd/yyyy",format:"MM/DD/YYYY",disabledDate:function(a){return a.isSameOrBefore(e.formRef.current.getFieldValue("project_start_date"))}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"bid",label:"Bid",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(Xv,{value:"YES",key:1},"Yes"),l.a.createElement(Xv,{value:"NO",key:2},"No")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"bid_date",label:"Bid Date",rules:[{required:!1,message:""}]},l.a.createElement(Hv.a,{placeholder:"mm/dd/yyyy",format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"bid_link",label:"Link to Bid Advertisement",rules:[{required:!1}]},l.a.createElement(Pm.a,{placeholder:"www.website.com"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"bid_value",label:"Total Bid Value",className:"position-relative add-dollar-main-item color-change",rules:[{required:!1}]},l.a.createElement(ap.a,{style:{paddingLeft:"22px"}})),l.a.createElement("small",{className:"add-dollar add-dollar-2 position-absolute"},"$")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"bid_sector",label:"Bid Sector",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Zv.map((function(e,a){return l.a.createElement(Xv,{value:e.value,key:e.value},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",rules:[{required:!1}]},l.a.createElement(ah,{className:"text-area-main",placeholder:"e.g. Project City, Project State, Project County, etc."}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(Jv,{reasons:c,reasonLoading:i,getReasons:this.getReasons,visible:this.state.visible,onClose:function(){return e.showStatus(!1)},handleUpdate:this.handleUpdate}))}}]),t}(n.Component),ch=Object(r.withRouter)(lh),ih=t(1054),rh={labelCol:{span:24},wrapperCol:{span:24}},sh=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format"}],e.fetchFiles=function(){Nv({opportunity:e.props.opportunity.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("opportunity",e.props.opportunity.id),n.append("document",t),yv(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleValidate=function(){e.props.setOpportunity(e.props.opportunity)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.fetchFiles()}},{key:"render",value:function(){var e=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload documents here. "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleValidate},rh,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},e.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.columns,dataSource:this.state.files,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),oh=Object(r.withRouter)(sh),mh=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:this.props.okAction,onCancel:this.props.onClose,centered:!0,className:"confirmation-popup-modal ".concat(this.props.deleteLineItem?"warning-modal":"success-modal"),okText:this.props.okTitle?this.props.okTitle:"Yes, I want to Continue",cancelText:this.props.cancelText},l.a.createElement("div",{className:"row mx-0 confirm-modal-row ".concat(this.props.deleteLineItem?"warning-modal-row":"")},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:this.props.deleteLineItem?Rm.warning_icon:Rm.check_icon,alt:"",className:"img-fluid"}),this.props.InvoiceText?l.a.createElement("h5",null,"You\u2019ve successfully ",l.a.createElement("br",null)," added all of the required information."):l.a.createElement("h5",null,this.props.heading),this.props.subHeading))))}}]),t}(n.Component),dh=t(16),uh=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:this.props.onOK,onCancel:this.props.onClose,centered:!0,className:"confirmation-popup-modal warning-modal required-fields-success-modal",okText:this.props.okText||"View Account",cancelText:this.props.cancelText||"Continue"},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.check_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),this.props.subHeading?l.a.createElement("p",{className:"mb-0 mx-auto"},this.props.subHeading):l.a.createElement("p",{className:"mb-0 mx-auto"})))))}}]),t}(n.Component),ph=Object(r.withRouter)(uh),vh=t(242),hh=ku.a.Option,fh={labelCol:{span:24},wrapperCol:{span:24}},Eh=(Pm.a.TextArea,{salesPerson:"salesperson",salesAssistant:"salesassistant",salesManager:"salesmanager"}),gh={salesPerson:"sales_person",salesAssistant:"sales_assistant",salesManager:"sales_manager"},bh=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={salesPerson:[],salesAssistant:[],salesManager:[],salesPersonSelected:[],salesAssistantSelected:[],salesManagerSelected:[],fetching:!1,buttonLoading:!1,opportunity:{},visible:!1},e.showCommonRemove=function(a,t,n){a&&e.setState({item:t,type:n}),e.setState({visible:a})},e.formRef=l.a.createRef(),e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.showCommonRemove(!0,a,t)},className:"border-0 bg-transparent text-center p-0 w-100"},"Remove")))},e.removeUsers=function(){var a=e.state,t=a.item,n=a.type;e.setState(Object(zv.a)({},"".concat(n,"Selected"),e.state["".concat(n,"Selected")].filter((function(e){return e.id!==t.id}))))},e.fetchUser=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.setState({fetching:!0}),ud(Eh[a],t).then((function(t){var n;e.setState((n={},Object(zv.a)(n,a,t.data.results),Object(zv.a)(n,"fetching",!1),n))})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSelect=function(a,t){var n=e.state,l=n.salesAssistantSelected,c=n.salesManagerSelected,i=n.salesPersonSelected;0==c.length&&0==i.length&&0==l.length&&e.handleUpdatePoc(a),e.formRef.current.setFieldsValue(Object(zv.a)({},gh[t],null));var r=e.state[t].filter((function(e){return a===e.id}));if(e.state["".concat(t,"Selected")].find((function(e){return a===e.id})))return null;e.setState((function(e){return Object(zv.a)({},"".concat(t,"Selected"),[].concat(Object(Ou.a)(e["".concat(t,"Selected")]),Object(Ou.a)(r)))}))},e.handleSubmit=function(){var a={sales_manager:e.state.salesManagerSelected.map((function(e){return e.id})),sales_assistant:e.state.salesAssistantSelected.map((function(e){return e.id})),sales_person:e.state.salesPersonSelected.map((function(e){return e.id}))};e.setState({buttonLoading:!0}),e.props.match.params.id?kv(e.props.match.params.id,a).then((function(a){Mm.b.success("Team Updated Successfully!"),e.props.setOpportunity(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})})):kv(e.state.opportunity.id,a).then((function(a){Mm.b.success("Team added Successfully!"),e.props.setOpportunity(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))},e.handleUpdatePoc=function(a){kv(e.props.opportunity.id,{point_opportunity:a}).then((function(a){e.props.setOpportunity(a.data)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.id;a&&_v(a).then((function(a){e.setState({buttonLoading:!1}),e.setState({salesPersonSelected:e.props.opportunity.sales_person,salesAssistantSelected:e.props.opportunity.sales_assistant,salesManagerSelected:e.props.opportunity.sales_manager}),e.fetchUser("salesManager"),e.fetchUser("salesAssistant"),e.fetchUser("salesPerson")})),this.props.opportunity&&this.setState({opportunity:this.props.opportunity})}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.fetching,c=t.salesPerson,i=t.salesAssistant,r=t.salesManager,s=t.salesPersonSelected,o=t.salesAssistantSelected,m=t.salesManagerSelected;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row general-info"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can only choose one point of contact."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,requiredMark:!1,ref:this.formRef},fh,{className:"main-inner-form"}),l.a.createElement(vh.a.Group,{value:null===(e=this.props.opportunity)||void 0===e?void 0:e.point_opportunity},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_manager",label:"Sales Managers",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",showSearch:!0,filterOption:!1,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,onChange:function(e){return a.handleSelect(e,"salesManager")},onFocus:function(){return a.fetchUser("salesManager")},onSearch:function(e){return a.fetchUser("salesManager",{search:e})},className:"custom-search-select"},r.map((function(e){return l.a.createElement(hh,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Manager")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===m.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{style:{color:"#4F4F4F"},className:"mb-0"},"No Sales Managers")))),m.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{key:e.id,className:"col-12"},l.a.createElement("div",{className:"row pb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Manager")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:a.menu(e,"salesManager"),placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return a.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(Fm.a.Item,{name:"sales_person",label:"Salespeople",rules:[{required:!1,message:""}],className:"search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onChange:function(e){return a.handleSelect(e,"salesPerson")},onFocus:function(){return a.fetchUser("salesPerson")},onSearch:function(e){return a.fetchUser("salesPerson",{search:e})},className:"custom-search-select"},c.map((function(e){return l.a.createElement(hh,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Salesperson")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===s.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{style:{color:"#4F4F4F"},className:"mb-0"},"No Salespeople")))),s.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{key:e.id,className:"col-12"},l.a.createElement("div",{className:"row pb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Salesperson")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:a.menu(e,"salesPerson"),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return a.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_assistant",label:"Sales Assistants ",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onChange:function(e){return a.handleSelect(e,"salesAssistant")},onFocus:function(){return a.fetchUser("salesAssistant")},onSearch:function(e){return a.fetchUser("salesAssistant",{search:e})},className:"custom-search-select"},i.map((function(e){return l.a.createElement(hh,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Assistant")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===o.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{style:{color:"#4F4F4F"},className:"mb-0"},"No Sales Assistants")))),o.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{key:e.id,className:"col-12"},l.a.createElement("div",{className:"row pb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Assistant")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:a.menu(e,"salesAssistant"),placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",value:e.id,onChange:function(){return a.handleUpdatePoc(e.id)}},"Point of Contact"))))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(iv,{heading:"Are you sure you want to remove this team member?",subHeadingUOM:"If you choose to remove this Team Member, this might cause issues. ",commonInternalLocationPopup:!0,visible:this.state.visible,commonDO:"Yes, I do",showWarningModal2:function(){a.removeUsers(),a.showCommonRemove(!1)},onClose:function(){return a.showCommonRemove(!1)}}))}}]),t}(n.Component),Nh=Object(r.withRouter)(bh);function yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("contact.contact");return id(a,e)}function wh(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("contact.contact",{id:e});return id(t,a)}function _h(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("contact.contact_activity",{id:e});return id(t,a)}function Sh(e){return od(ad("contact.contact"),e)}function xh(e,a){return md(ad("contact.contact",{id:a}),e)}function Ch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("contact.email");return id(a,e)}function Oh(e){return od(ad("contact.email"),e)}function kh(e,a){return md(ad("contact.email",{id:a}),e)}function jh(e){return dd(ad("contact.email",{id:e}))}function Ih(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("contact.phone");return id(a,e)}function Ah(e){return od(ad("contact.phone"),e)}function Dh(e,a){return md(ad("contact.phone",{id:a}),e)}function Th(e){return dd(ad("contact.phone",{id:e}))}function Rh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("contact.document");return id(a,e)}function Mh(e){return od(ad("contact.document"),e)}function Fh(e){return od(ad("contact.post"),e)}function Ph(e){return id(ad("contact.post"),e)}function Vh(e,a){return md(ad("contact.post",{id:e}),a)}function qh(e,a){return md(ad("contact.default_email",{id:e}),a)}function Lh(e,a){return md(ad("contact.default_phone",{id:e}),a)}function Uh(e){return od(ad("contact.address"),e)}function Bh(e,a){return md(ad("contact.address",{id:e}),a)}function Wh(e){return id(ad("contact.position"),e)}function Yh(e){return od(ad("contact.position"),e)}function Kh(e){return od(ad("contact.opportunity"),e)}function Gh(e){return dd(ad("contact.opportunity",{id:e}))}var zh=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:this.props.onOK,centered:!0,className:"confirmation-popup-modal warning-modal required-fields-success-modal drawer-required-success-modal -btn-cancel-none",okText:this.props.okText||null},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.check_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),this.props.subHeading?l.a.createElement("p",{className:"mb-0 mx-auto"},this.props.subHeading):l.a.createElement("p",{className:"mb-0 mx-auto"})))))}}]),t}(n.Component),Hh=Object(r.withRouter)(zh),$h=fu.a.Panel,Qh={labelCol:{span:24},wrapperCol:{span:24}},Jh=ku.a.Option,Zh=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={contact:null,address:null,emails:[],phones:[],buttonLoading:!1,visibleConfirm:!1,unsavedExit:!1,drawerrequiredSuccessModalVisible:!1,activeKey:["1"],visible:!1,county:[],updateMainState:null,positions:[],fetching:!1,page:1},e.formRef=l.a.createRef(),e.emailRef=l.a.createRef(),e.phoneRef=l.a.createRef(),e.addRef=l.a.createRef(),e.showConfirmModal=function(a){e.setState({visibleConfirm:a,contact:null})},e.showRequiredSuccessModal=function(a){e.setState({drawerrequiredSuccessModalVisible:a})},e.setContact=function(a){e.setState({contact:a})},e.setAddress=function(a){e.setState({address:a})},e.handleEdit=function(a,t){"email"===t?(e.emailRef.current.setFieldsValue(Object(wu.a)({},a)),e.setState({selectedEmail:a})):(e.phoneRef.current.setFieldsValue(Object(wu.a)({},a)),e.setState({selectedPhone:a}))},e.handleRemove=function(a,t){"email"===t?jh(a.id).then((function(){var t,n,l=e.state.emails.filter((function(e){return e.id!=a.id}));(Mm.b.success("Email removed successfully!"),(null===(t=e.state.emails)||void 0===t?void 0:t.length)||e.setState({unsavedExit:!1}),l.length>0&&a.default_email)?e.handleDefaultEmail(null===(n=l[0])||void 0===n?void 0:n.id):e.fetchEmails()})).catch((function(e){td(e)})):Th(a.id).then((function(){var t,n,l=e.state.phones.filter((function(e){return e.id!=a.id}));(Mm.b.success("Phone Number removed successfully!"),(null===(t=e.state.phones)||void 0===t?void 0:t.length)||e.setState({unsavedExit:!1}),l.length>0&&a.default_phone)?e.handleDefaultPhone(null===(n=l[0])||void 0===n?void 0:n.id):e.fetchPhones()})).catch((function(e){td(e)}))},e.handleCountyChange=function(a){e.addRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.addRef.current.setFieldsValue({state:t[0].state})},e.fetchEmails=function(){Ch({contact:e.state.contact.id}).then((function(a){e.setState({emails:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchPhones=function(){Ih({contact:e.state.contact.id}).then((function(a){e.setState({phones:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleEmail=function(a){a.contact=e.state.contact.id,e.state.selectedEmail?kh(a,e.state.selectedEmail.id).then((function(a){Mm.b.success("Email Updated Successfully!"),e.setState({selectedEmail:null}),e.emailRef.current.resetFields(),e.fetchEmails()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Oh(a).then((function(a){var t;Mm.b.success("Email Created Successfully!"),e.fetchEmails(),e.emailRef.current.resetFields(),0==e.state.emails.length?e.handleDefaultEmail(a.data.id):e.fetchEmails(),(null===(t=e.state.phones)||void 0===t?void 0:t.length)&&e.state.address&&(e.setState({unsavedExit:!1}),e.showRequiredSuccessModal(!0))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handlePhone=function(a){a.contact=e.state.contact.id,e.state.selectedPhone?Dh(a,e.state.selectedPhone.id).then((function(a){var t;Mm.b.success("Phone Number updated Successfully"),e.setState({selectedPhone:null}),e.phoneRef.current.resetFields(),e.fetchPhones(),(null===(t=e.state.emails)||void 0===t?void 0:t.length)&&e.state.address&&(e.setState({unsavedExit:!1}),e.showRequiredSuccessModal(!0))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Ah(a).then((function(a){Mm.b.success("Phone Number Created Successfully!"),e.setState((function(e){return{buttonLoading:!1,activeKey:[].concat(Object(Ou.a)(e.activeKey),["3"])}})),e.phoneRef.current.resetFields(),0==e.state.phones.length?e.handleDefaultPhone(a.data.id):e.fetchPhones()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSubmitAccount=function(a){var t;console.log(a,"values");var n=Object(wu.a)(Object(wu.a)({},a),{},{account:null===(t=e.props.account)||void 0===t?void 0:t.id});e.setState({buttonLoading:!0}),e.state.contact&&xh(n,e.state.contact.id).then((function(a){Mm.b.success("Account added successfully"),e.setState({buttonLoading:!1})})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e.onSubmit=function(a){e.setState({buttonLoading:!0}),e.state.contact?xh(a,e.state.contact.id).then((function(a){Mm.b.success("Contact Updated Successfully"),e.setContact(a.data),e.setState({buttonLoading:!1})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):(e.props.account&&(a.account=e.props.account.id),Sh(a).then((function(a){Mm.b.success("Contact Created Successfully"),e.setContact(a.data),e.setState((function(e){return{buttonLoading:!1,unsavedExit:!1,activeKey:[].concat(Object(Ou.a)(e.activeKey),["2"])}})),e.props.callbackContact&&e.props.callbackContact(a.data)})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})})))},e.handleSubmit=function(a){var t=Object(wu.a)(Object(wu.a)({},a),{},{country:a.country||"United States",contact:e.state.contact.id});e.state.address?Bh(e.state.address.id,t).then((function(a){var t=a.data;e.setAddress(t),Mm.b.success("Address updated successfully")})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Uh(t).then((function(a){var t,n,l=a.data;e.setAddress(l),Mm.b.success("Address created successfully"),e.state.address&&(null===(t=e.state.phones)||void 0===t?void 0:t.length)&&(null===(n=e.state.emails)||void 0===n?void 0:n.length)&&(e.setState({unsavedExit:!1}),e.showRequiredSuccessModal(!0))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleDeleteModal=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;e.setState({item:a,type:t,visible:n})},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleDeleteModal(a,t,!0)},className:"border-0 p-0 shadow-none bg-transparent"},"Delete")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{onClick:function(){return e.handleEdit(a,t)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit")))},e.handleClose=function(){e.setState({phones:[],email:[],address:null,contact:null,activeKey:["1"]}),e.props.onClose()},e.handleDefaultEmail=function(a){qh(e.state.contact.id,{email_id:a}).then((function(){e.fetchEmails()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleDefaultPhone=function(a){Lh(e.state.contact.id,{phone_id:a}).then((function(){e.fetchPhones()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.phoneNumberValidate=function(e,a,t){(null===a||void 0===a?void 0:a.toString().length)<10?t("minimum digits should be 10"):t()},e.fetchPositions=function(a){var t=e.state,n=t.page,l=t.search,c={};c=a?{search:l}:{page:n},e.setState({fetching:!0}),Wh(c).then((function(a){1===n?e.setState({positions:a.data.results,totalCount:a.data.count}):e.setState((function(e){return{positions:[].concat(Object(Ou.a)(e.positions),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.onCollapseChange=function(a){e.setState({activeKey:a})},e.resetcontactFields=function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):(e.props.onClose(),e.setState({phones:[],emails:[],address:null,contact:null,activeKey:["1"]}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({contact:null,address:null}),Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.contact,i=n.buttonLoading,r=n.phones,s=n.emails,o=n.activeKey,m=(n.address,n.county),d=n.positions,u=n.fetching,p=n.totalCount,v=n.updateMainState,h=null===s||void 0===s||null===(e=s.find((function(e){return!0===(null===e||void 0===e?void 0:e.default_email)})))||void 0===e?void 0:e.id,f=null===r||void 0===r||null===(a=r.find((function(e){return!0===(null===e||void 0===e?void 0:e.default_phone)})))||void 0===a?void 0:a.id;return l.a.createElement(l.a.Fragment,null,l.a.createElement(wp,{visible:this.state.drawerVisible,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){t.props.onClose(),t.setState({drawerVisible:!1,phones:[],emails:[],address:null,contact:null,activeKey:["1"]})},onCancel:function(){t.setState({drawerVisible:!1})}}),l.a.createElement(Hh,{visible:this.state.drawerrequiredSuccessModalVisible,heading:"You've successfully added all of the required information.",onOK:function(){t.showRequiredSuccessModal(!1)},okText:"Continue"}),l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Create Contact",visible:this.props.visible,onClose:function(){t.state.unsavedExit?t.setState({drawerVisible:!0}):t.handleClose()},onCancel:function(){t.state.unsavedExit?t.setState({drawerVisible:!0}):t.props.onClose()},className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",placement:"right",maskClosable:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){t.state.unsavedExit?t.setState({drawerVisible:!0}):t.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{disabled:!c,onClick:function(){t.resetcontactFields()},type:"primary"},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Below is the required information to create an account. To add more information, please modify the account from the Accounts & Contacts section.")),l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:this.onCollapseChange,activeKey:o,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement($h,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information here.")),l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit},Qh,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"salutation",label:"Salutation",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:"MR."},"Mr."),l.a.createElement(ku.a.Option,{value:"MRS."},"Mrs."),l.a.createElement(ku.a.Option,{value:"MS."},"Ms.")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"first_name",label:"First Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"First Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!1,message:" "}]},l.a.createElement(Pm.a,{placeholder:"Middle Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"last_name",label:"Last Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Last Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"suffix",label:"Suffix",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:null},"Select"),l.a.createElement(ku.a.Option,{value:"JR"},"Jr."),l.a.createElement(ku.a.Option,{value:"SR"},"Sr."),l.a.createElement(ku.a.Option,{value:"I"},"I"),l.a.createElement(ku.a.Option,{value:"II"},"II"),l.a.createElement(ku.a.Option,{value:"III"},"III")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:i,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement($h,{disabled:!c,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("span",null,"Contact Information ",l.a.createElement("sup",null,"*")))),key:"2"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all emails and phone numbers related to this contact.")),l.a.createElement("div",Object.assign({},Qh,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Fm.a,Object.assign({hideRequiredMark:!0,ref:this.emailRef,onFinish:this.handleEmail},Qh,{className:"main-inner-form w-100"}),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Email Address Type",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select",suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(Jh,{value:"WORK"},"Work"),l.a.createElement(Jh,{value:"PERSONAL"},"Personal")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"},{type:"email",message:"Valid Email is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))),l.a.createElement("div",{className:"col-12 validate-div-col mt-0 text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Add")))),l.a.createElement("div",{className:"col-12 p-0"},s.length>0?l.a.createElement("div",null,l.a.createElement(vh.a.Group,{className:"w-100",name:"email",value:h,onChange:function(e){return t.handleDefaultEmail(e.target.value)}},s.map((function(e){return l.a.createElement("div",{key:e.id,className:"col-12"},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main position-relative opportunity-info-div-main ".concat(e.default_email&&"active","\n                                                                                    ")},l.a.createElement("div",{className:"col-12 p-2"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.email_inbox_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.name.toLowerCase()),l.a.createElement("p",{className:"mb-0"},e.email))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:t.menu(e,"email"),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",value:e.id,checked:e.default_email},"Default Email"))))})))):l.a.createElement("div",{className:"row mx-0 no-data-card-row no-data-card-row-2 align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.email_inbox_icon}),l.a.createElement("h6",{className:"mb-0"},"Added email addresses ",l.a.createElement("br",null)," will show up here")))),l.a.createElement(Fm.a,Object.assign({ref:this.phoneRef,onFinish:this.handlePhone},Qh,{hideRequiredMark:!0,className:"main-inner-form w-100"}),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Phone Number Type *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select",suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(Jh,{value:"WORK_MAIN"},"Work (Main)"),l.a.createElement(Jh,{value:"WORK_DIRECT"},"Work (Direct)"),l.a.createElement(Jh,{value:"PERSONAL"},"Personal"),l.a.createElement(Jh,{value:"MOBILE"},"Mobile")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone_number",label:"Phone Number *",rules:[{required:!0,message:"this field is required"},{validator:this.phoneNumberValidate}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,"")},maxLength:22,stringMode:!0,parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12 validate-div-col mt-0 text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Add")))),l.a.createElement("div",{className:"col-12 p-0"},r.length>0?l.a.createElement("div",null,l.a.createElement(vh.a.Group,{name:"phone",value:f,onChange:function(e){return t.handleDefaultPhone(e.target.value)}},r.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-12 mb-3"},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main position-relative opportunity-info-div-main ".concat(e.default_phone&&"active","\n                                                                                    ")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.call_add_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"WORK_MAIN"===e.name?"Work (Main)":"WORK_DIRECT"===e.name?"Work (Direct)":null===(a=e.name)||void 0===a?void 0:a.toLowerCase()),l.a.createElement("p",{className:"mb-0"},yd(e.phone_number)))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:t.menu(e,"phone"),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",value:e.id,checked:e.default_phone},"Default Phone Number"))))})))):l.a.createElement("div",{className:"row mx-0 no-data-card-row no-data-card-row-2 align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.call_add_icon}),l.a.createElement("h6",{className:"mb-0"},"Added phone numbers ",l.a.createElement("br",null)," will show up here")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement($h,{disabled:!c,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information ",l.a.createElement("sup",null,"*")))),key:"3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input main address and billing address.")),l.a.createElement(Fm.a,Object.assign({ref:this.addRef,onFinish:this.handleSubmit},Qh,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc"},l.a.createElement(Pm.a,{placeholder:"Location Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(m,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(v,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"Zip/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{initialValue:"United States",name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,defaultValue:"United States",suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement($h,{disabled:!c,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("span",null,"Account ",l.a.createElement("sup",null,"*")))),key:"4"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",Object.assign({},Qh,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmitAccount},Qh,{hideRequiredMark:!0,className:"main-inner-form w-100"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose one position for this contact.")),l.a.createElement(Fm.a.Item,{name:"role",label:"Position*",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),placeholder:"Select",filterOption:!1,onSearch:function(e){return t.setState({search:e},(function(){t.fetchPositions(!0)}))},onFocus:function(){return t.fetchPositions()},dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,u&&l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)))},onPopupScroll:function(e){var a=e.target;a.scrollTop+a.offsetHeight===a.scrollHeight&&p!=d.length&&t.setState({page:t.state.page+1},(function(){return t.fetchPositions()}))}},d.map((function(e,a){return l.a.createElement(Jh,{value:e.name,key:"".concat(e.name+a)},e.name)})))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:i,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this Contact!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view this Contact, select View Contact"),okTitle:"View Contact",okAction:function(){t.showConfirmModal(!1),t.props.onClose()},visible:this.state.visibleConfirm,onClose:function(){t.showConfirmModal(!1),t.props.onClose()}}),l.a.createElement(iv,{newCommonModal:!0,removeConFunc:function(){t.handleRemove(t.state.item,t.state.type),t.setState({item:null,type:null,visible:!1})},heading:"Are you sure you want to remove this ".concat("email"===this.state.type?"email":"phone number","?"),subHeadingUOM:" ",visible:this.state.visible,onClose:function(){return t.handleDeleteModal(!1)}}))}}]),t}(n.Component),Xh=Object(r.withRouter)(Zh),ef={labelCol:{span:24},wrapperCol:{span:24}},af=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.selectRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,opportunity:{},contactAccount:null,showContactModel:!1,contactModalItem:null,contacts:[],customerModalVisible:!1,removeVisible:!1,deletableAccountId:null,deletableContactId:null,contactDrwrVisible:!1,selectedItem:null,customerAccount:[],customerContactVisible:!1,createAccountType:null},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.showRemoveContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrwrVisible:a,selectedItem:t,deletableContactId:n})},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({customer_accounts:null}),Iv({opportunity:e.props.opportunity.id,account:a.value}).then((function(){e.props.fetchOpportunity()})).catch((function(e){td(e)}))},e.handleDeleteContactAccount=function(a){Dv(e.state.deletableAccountId).then((function(){e.props.fetchOpportunity()}))},e.handleContactSelect=function(a){var t=e.state.contactModalItem;e.selectRef.current.setFieldsValue({contact:null});var n=e.props.opportunity.customer_contact_accounts,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a])};Av(t.id,i).then((function(a){e.props.fetchOpportunity()})).catch((function(e){td(e)}))},e.handleContactDeselect=function(a){e.handleDeleteContact(e.state.contactModalItem,a)},e.handleDeleteContact=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedItem,n=e.state.deletableContactId,l=e.props.opportunity.customer_contact_accounts,c=l.findIndex((function(e){return e.id===t.id})),i={contact:l[c].contact.filter((function(e){return e.id!==n})).map((function(e){return e.id}))};Av(t.id,i).then((function(a){e.props.fetchOpportunity()})).catch((function(e){td(e)}))},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Du(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.getAllContacts=function(a){var t,n=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)({account:null===n||void 0===n||null===(t=n.account)||void 0===t?void 0:t.id},a)).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.handleSubmit=function(){Mm.b.success("Billing Account Updated Successfully!"),e.props.setOpportunity(e.props.opportunity,4)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.callbackCustomerAccount=function(a){Iv({opportunity:e.props.opportunity.id,account:a.id}).then((function(){e.props.fetchOpportunity()}))},e.showCustomerAccount=function(){e.setState({customerModalVisible:!1})},e.showContactAccount=function(){e.setState({customerContactVisible:!1})},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.opportunity.customer_contact_accounts,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a.id])};Av(t.id,i).then((function(a){e.props.fetchOpportunity(),a.data.contact.map((function(e){var t;xh({account:null===(t=a.data)||void 0===t?void 0:t.account.id},e.id).then((function(){})).catch((function(e){td(e)}))}))}))},e.showAccountTypeModal=function(a){e.setState({visibleAcTypeModal:a})},e.setAccountTypeOrVisible=function(a,t){e.setState({createAccountType:a,customerModalVisible:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllAccounts()}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.loading,i=n.accounts,r=(null===(e=this.props.opportunity)||void 0===e?void 0:e.customer_contact_accounts)||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add billing accounts and choose contacts."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},ef,{className:"main-inner-form"}),l.a.createElement("div",{className:"row",style:{padding:"0px 25px"}},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{dropdownClassName:"option-design-fix",name:"customer_accounts",label:"Billing Accounts *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,removeIcon:"",className:"search-and-select-tag",showSearch:!0,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:this.debounceEvent((function(e){return t.getAllAccounts({search:e})}),1e3),notFoundContent:c?l.a.createElement(Wv.a,{size:"small"}):null,onFocus:function(){return t.getAllAccounts()}},i.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Billing Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){return t.showAccountTypeModal(!0)}},"+ Create")),r.map((function(e,a){var n;return l.a.createElement("div",{className:"col-12 col-sm-12",key:a},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===e||void 0===e||null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},"Billing Account")))),l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return t.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return t.handleContactModel(e,!0)}},"+ Add Contact")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row w-100"},e.contact.map((function(a,n){var c,i;return l.a.createElement("div",{className:"col-6 col-sm-6",key:n},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},a.first_name," ",a.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500"}},a.role)),l.a.createElement("p",{className:"mb-0"},a.default_email&&"".concat(null===(c=a.default_email)||void 0===c?void 0:c.email,","),", \xa0"," ",null===(i=a.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return t.showRemoveContact(!0,e,null===a||void 0===a?void 0:a.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"}))))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))))))})),0===r.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Billing Accounts"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add contact",closable:!0,footer:!1,onOk:function(){return t.handleContactModel(null,!1)},onCancel:function(){return t.handleContactModel(null,!1)},destroyOnClose:!0,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},ef,{ref:this.selectRef}),l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleContactSelect,onFocus:function(){return t.getAllContacts()},onSearch:lu((function(e){return t.getAllContacts({search:e})}),300),notFoundContent:c?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact"},null===(a=this.state.contacts)||void 0===a?void 0:a.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){t.setState({customerContactVisible:!0},(function(){return t.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.customerContactVisible,selectedCustomerAccounts:r,onClose:function(){return t.showContactAccount(!1)}}),l.a.createElement(iv,{common:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account?",subHeadingUOM:"If you choose to remove this Billing Account, this might cause issues.",visible:this.state.removeVisible,commonFunc:function(){t.setState({deletableAccountId:null,removeVisible:!1}),t.handleDeleteContactAccount()},onClose:function(){t.showRemoveAccount(!1)}}),l.a.createElement(iv,{removeContactWarning:!0,removeConFunc:function(){t.setState({selectedItem:null,deletableContactId:null,contactDrwrVisible:!1}),t.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrwrVisible,onClose:function(){return t.showRemoveContact(!1)}}),l.a.createElement(Up,{PARTIAL_BILLING:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.visibleAcTypeModal,onClose:function(){return t.showAccountTypeModal(!1)}}),l.a.createElement(kp,{createAccountType:this.state.createAccountType,callbackCustomerAccount:this.callbackCustomerAccount,selectedCustomerAccounts:r,visible:this.state.customerModalVisible,onClose:function(){return t.showCustomerAccount(!1)}}))}}]),t}(n.Component),tf=Object(r.withRouter)(af),nf={labelCol:{span:24},wrapperCol:{span:24}},lf=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={sites:[],county:[],updateMainState:null,unsavedExit:!1,requiredSuccessModalVisible:!1,requiredWarningModalVisible:!1,btnvisible:!1},e.formRef=l.a.createRef(),e.getSiteDetail=function(a){e.setState({sites:a})},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e.phoneNumberValidate=function(e,a,t){a.toString().length<10?t("minimum digits should be 10"):t()},e.handleSubmit=function(a){e.props.selectedAccounts.map((function(t){a.account=t.account.id,vp(a).then((function(a){Mm.b.success("Site Created Successfully"),e.formRef.current.resetFields(),e.props.callbackSite(a.data),e.setState({btnvisible:!0})})).catch((function(e){td(e)}))}))},e.handleCheckChange=function(a){e.setState({checked:a.target.checked},(function(){var a,t,n,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g;e.state.checked&&e.formRef.current.setFieldsValue({street_address:null===(a=e.props.selectedAccounts[0].account)||void 0===a||null===(t=a.main_address)||void 0===t?void 0:t.street_address,apartment:null===(n=e.props.selectedAccounts[0].account)||void 0===n||null===(l=n.main_address)||void 0===l?void 0:l.apartment,county:null===(c=e.props.selectedAccounts[0].account)||void 0===c||null===(i=c.main_address)||void 0===i?void 0:i.county,city:null===(r=e.props.selectedAccounts[0].account)||void 0===r||null===(s=r.main_address)||void 0===s?void 0:s.city,state:null===(o=e.props.selectedAccounts[0].account)||void 0===o||null===(m=o.main_address)||void 0===m?void 0:m.state,zip_code:null===(d=e.props.selectedAccounts[0].account)||void 0===d||null===(u=d.main_address)||void 0===u?void 0:u.zip_code,country:(null===(p=e.props.selectedAccounts[0].account)||void 0===p||null===(v=p.main_address)||void 0===v?void 0:v.country)||"United States",email:null===(h=e.props.selectedAccounts[0].account)||void 0===h||null===(f=h.main_address)||void 0===f?void 0:f.email,phone:null===(E=e.props.selectedAccounts[0].account)||void 0===E||null===(g=E.main_address)||void 0===g?void 0:g.phone})}))},e.handleVisible=function(){var a,t;e.formRef.current&&e.formRef.current.setFieldsValue({name:"".concat(null===(a=e.props.selectedAccounts[0])||void 0===a||null===(t=a.account)||void 0===t?void 0:t.name," Site")})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t=this;Qu({ordering:"county"}).then((function(e){t.setState({county:e.data}),t.setState({updateMainState:e.data})})).catch((function(e){td(e)})),this.formRef.current.setFieldsValue({name:"".concat(null===(e=this.props.selectedAccounts[0])||void 0===e||null===(a=e.account)||void 0===a?void 0:a.name," Site")})}},{key:"render",value:function(){var e,a,t,n=this,c=this.state,i=c.county,r=c.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,afterVisibleChange:this.handleVisible,title:"Create Site",visible:this.props.visible,width:"625px",placement:"right",maskClosable:!1,forceRender:!0,className:"main-all-form-modal main-drawer-div drawer-update",onClose:function(){return n.props.onClose()},onCancel:function(){return n.props.onClose()},footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){n.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{disabled:!this.state.btnvisible,onClick:function(){n.props.onClose()},type:"primary"},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Below is the required information to create an account. To add more information, please modify the account from the Accounts & Contacts section.")),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},nf,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",initialValue:"".concat(null===(e=this.props)||void 0===e||null===(a=e.selectedAccounts[0])||void 0===a||null===(t=a.account)||void 0===t?void 0:t.name," Site"),label:"Site Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Site Name",defaultValue:"Site"}))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"street_address",label:l.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},"Street Address *",l.a.createElement("div",{className:"checkbox-div-main position-absolute"},l.a.createElement(tp.a,{onChange:function(e){return n.handleCheckChange(e)}},"Same as Main Address"))),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(i,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(r,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{initialValue:"United States",name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,defaultValue:"United States",suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))))))))))}}]),t}(n.Component),cf={labelCol:{span:24},wrapperCol:{span:24}},rf=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.siteRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,opportunity:{},contactAccount:null,showContactModel:!1,contactModalItem:null,showSiteModel:!1,siteModalItem:null,contacts:[],sites:[],removeVisible:!1,deletableAccountId:null,contactDrawerVisible:!1,siteDrawerVisible:!1,ownerModalVisible:!1,createAccountType:null},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.handleDeleteAccount=function(a){Fv(e.state.deletableAccountId).then((function(){e.props.fetchOpportunity()}))},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({owner_accounts:null}),Rv({opportunity:e.props.opportunity.id,account:a.value}).then((function(){e.props.fetchOpportunity()}))},e.handleOnDeselect=function(a){var t=e.props.opportunity.owner_contact_accounts.find((function(e){return e.account.id===a.value}));e.handleDeleteOwnerAccount(t.id)},e.handleDeleteOwnerAccount=function(a){Fv(a).then((function(){e.props.fetchOpportunity()}))},e.handleContactSelect=function(a){var t=e.state.contactModalItem;e.contactRef.current.setFieldsValue({contact:null});var n=e.props.opportunity.owner_contact_accounts,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a])};Mv(t.id,i).then((function(a){e.props.fetchOpportunity(e.props.opportunity.id)}))},e.handleContactDeselect=function(a){e.handleDeleteContact(e.state.contactModalItem,a)},e.handleDeleteContact=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedItem,n=e.state.deletableContactId,l=e.props.opportunity.owner_contact_accounts,c=l.findIndex((function(e){return e.id===t.id})),i={contact:l[c].contact.filter((function(e){return e.id!==n})).map((function(e){return e.id}))};Mv(t.id,i).then((function(){e.props.fetchOpportunity()}))},e.handleSiteSelect=function(a){var t=e.state.siteModalItem;e.siteRef.current.setFieldsValue({site:null});var n=e.props.opportunity.owner_contact_accounts,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].site.map((function(e){return e.site.id})),i={site_id:[].concat(Object(Ou.a)(c),[a])};Mv(t.id,i).then((function(){e.props.fetchOpportunity()}))},e.handleDeleteSite=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedSite,n=e.state.deletableSiteId,l=e.props.opportunity.owner_contact_accounts,c=l.findIndex((function(e){return e.id===t.id})),i={site_id:l[c].site.filter((function(e){return e.site.id!==n})).map((function(e){return e.site.id}))};Mv(t.id,i).then((function(){e.props.fetchOpportunity()}))},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),mp(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllSites=function(a){var t=e.state.siteModalItem;e.setState({loading:!0}),hp(Object(wu.a)(Object(wu.a)({},a),{},{account:t.account.id})).then((function(a){e.setState({sites:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllContacts=function(a){var t=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({},a),{},{account:t.account.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.removeContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrawerVisible:a,selectedItem:t,deletableContactId:n})},e.handleRemoveSite=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({siteDrawerVisible:a,selectedSite:t,deletableSiteId:n})},e.handleSubmit=function(){Mm.b.success("Site Manager Account Updated Successfully!"),e.props.setOpportunity(e.props.opportunity,5)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.handleSiteModel=function(a,t){a?e.setState({siteModalItem:a,showSiteModel:t}):e.setState({showSiteModel:t})},e.handlePrimarySite=function(e,a){qv(e,{primary_site_id:a}).then().catch((function(e){td(e)}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.showOwnerAccount=function(){e.setState({ownerModalVisible:!1})},e.showContactAccount=function(){e.setState({ownerContactVisible:!1})},e.showSites=function(){e.setState({onwerSiteVisible:!1})},e.callbackOwnerAccount=function(a){Rv({opportunity:e.props.opportunity.id,account:a.id}).then((function(){e.props.fetchOpportunity()}))},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.opportunity.owner_contact_accounts,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a.id])};Mv(t.id,i).then((function(a){e.props.fetchOpportunity(),a.data.contact.map((function(e){var t;xh({account:null===(t=a.data)||void 0===t?void 0:t.account.id},e.id).then((function(){})).catch((function(e){td(e)}))}))}))},e.callbackSite=function(a){var t=e.state.siteModalItem,n=e.props.opportunity.owner_contact_accounts,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].site.map((function(e){return e.site.id})),i={site_id:[].concat(Object(Ou.a)(c),[a.id])};Mv(t.id,i).then((function(){e.props.fetchOpportunity()}))},e.showAccountTypeModal=function(a){e.setState({visibleAcTypeModal:a})},e.setAccountTypeOrVisible=function(a,t){e.setState({createAccountType:a,ownerModalVisible:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.getAllAccounts()}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.loading,c=t.accounts,i=(null===(e=this.props.opportunity)||void 0===e?void 0:e.owner_contact_accounts)||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add site manager accounts and choose contacts."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},cf,{className:"main-inner-form"}),l.a.createElement("div",{className:"row",style:{padding:"0px 25px"}},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"owner_accounts",label:"Site Manager Account *",rules:[{required:!1,message:""}],dropdownClassName:"option-design-fix",className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,className:"search-and-select-tag",showSearch:!0,disabled:i.length>=1,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:this.debounceEvent((function(e){return a.getAllAccounts({search:e})}),1e3),removeIcon:"",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,onFocus:function(){return a.getAllAccounts()}},c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site Manager Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{disabled:i.length>=1,style:{right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){return a.showAccountTypeModal(!0)}},"+ Create")),i.map((function(e,t){var n,c,i,r,s,o;return l.a.createElement("div",{className:"col-12 col-sm-12",key:t},l.a.createElement("div",{className:"row opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},Lp[null===(c=e.account)||void 0===c?void 0:c.account_type]," ","Account"),l.a.createElement("h6",{className:"mb-0"},"Sales Tax Exemption Status:"," ",(null===(i=e.account)||void 0===i?void 0:i.payment_information)?(null===(r=e.account)||void 0===r||null===(s=r.payment_information)||void 0===s?void 0:s.tax_exemption)?"Exempt":"Non Exempt":"-")))),l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleContactModel(e,!0)}},"+ Add Contact")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},e.contact.map((function(t,n){var c,i;return l.a.createElement("div",{className:"col-6 col-sm-6",key:n},l.a.createElement("div",{style:{minHeight:"100px"},className:"row mx-0 mb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},t.first_name," ",t.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},t.role)),l.a.createElement("p",{className:"mb-0"},t.default_email&&"".concat(null===(c=t.default_email)||void 0===c?void 0:c.email),", \xa0"," ",null===(i=t.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.removeContact(!0,e,null===t||void 0===t?void 0:t.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"}))))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts")))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleSiteModel(e,!0)}},"+ Add Site")),e.site&&0!==e.site.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(vh.a.Group,{defaultValue:null===(o=e.site.find((function(e){return!0===e.primary})))||void 0===o?void 0:o.id},e.site.map((function(t,n){return l.a.createElement("div",{className:"col-12",key:n},l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("h6",{style:{fontSize:"15px",color:"#4f4f4f",fontWeight:"500"},className:"text-capitalize mb-0"},t.site.name)))),l.a.createElement("div",{className:"col-12 col-sm-9 px-3 pt-2 pb-4"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},t.site.street_address||""," ",t.site.apartment||""," ",t.site.city||"",","," ",t.site.state||""," ",t.site.zip_code||""," ","USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},t.site.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},t.site.phone)),l.a.createElement("div",{className:"col-12 col-sm-1 position-relative"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.handleRemoveSite(!0,e,t.site.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{style:{width:"20px"},className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===t||void 0===t?void 0:t.id,onChange:function(){return a.handlePrimarySite(e.id,null===t||void 0===t?void 0:t.site.id)}},"Primary Site"))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))})),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Site Manager Account"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",closable:!0,footer:!1,title:"Add contact",onOk:function(){return a.handleContactModel(null,!1)},onCancel:function(){return a.handleContactModel(null,!1)},destroyOnClose:!0,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},cf,{ref:this.contactRef}),l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,placeholder:"Search",filterOption:!1,removeIcon:"",onChange:this.handleContactSelect,onSearch:lu((function(e){return a.getAllContacts({search:e})}),300),notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onFocus:function(){return a.getAllContacts()}},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({ownerContactVisible:!0},(function(){return a.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add Sites",closable:!0,footer:!1,onOk:function(){return a.handleSiteModel(null,!1)},onCancel:function(){return a.handleSiteModel(null,!1)},destroyOnClose:!0,visible:this.state.showSiteModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},cf,{ref:this.siteRef}),l.a.createElement(Fm.a.Item,{name:"site",label:"Site *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{className:"search-and-select-tag dropdown-fixed",dropdownClassName:"option-design-fix",showSearch:!0,placeholder:"Search",filterOption:!1,removeIcon:"",onSearch:lu((function(e){return a.getAllSites({search:e})}),300),onChange:this.handleSiteSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Site",onFocus:function(){return a.getAllSites()}},this.state.sites.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name,l.a.createElement("br",null),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e?"".concat(null===e||void 0===e?void 0:e.street_address," ").concat(null===e||void 0===e?void 0:e.city,", ").concat(null===e||void 0===e?void 0:e.state," ").concat(null===e||void 0===e?void 0:e.zip_code):" ")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({onwerSiteVisible:!0},(function(){return a.handleSiteModel(!1)}))}},"+ Create"))))),l.a.createElement(Vp,{createAccountType:this.state.createAccountType,callbackOwnerAccount:this.callbackOwnerAccount,selectedAccounts:i,visible:this.state.ownerModalVisible,onClose:function(){return a.showOwnerAccount(!1)}}),l.a.createElement(Up,{PARTIAL_MANAGER:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.visibleAcTypeModal,onClose:function(){return a.showAccountTypeModal(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.ownerContactVisible,selectedAccounts:i,onClose:function(){return a.showContactAccount(!1)}}),l.a.createElement(lf,{callbackSite:this.callbackSite,visible:this.state.onwerSiteVisible,selectedAccounts:i,onClose:function(){return a.showSites(!1)}}),l.a.createElement(iv,{commonInternalLocationPopup:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account?",subHeadingUOM:"If you choose to remove this Site Manager Account, this might cause issues.",visible:this.state.removeVisible,showWarningModal2:function(){a.setState({deletableAccountId:null,removeVisible:!1}),a.handleDeleteAccount()},onClose:function(){return a.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedItem:null,deletableContactId:null,contactDrawerVisible:!1}),a.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrawerVisible,onClose:function(){return a.removeContact(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedSite:null,deletableSiteId:null,siteDrawerVisible:!1}),a.handleDeleteSite()},heading:"Are you sure you want to remove this site?",subHeadingUOM:" ",visible:this.state.siteDrawerVisible,onClose:function(){return a.handleRemoveSite(!1)}}))}}]),t}(n.Component),sf=Object(r.withRouter)(rf);var of=function(e){var a=e.when,t=e.onOK,c=e.onCancel,i=e.title,s=e.okText,o=e.cancelText,m=Object(r.useHistory)(),d=Object(n.useState)(!1),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=Object(n.useState)(""),f=Object(yp.a)(h,2),E=f[0],g=f[1];Object(n.useEffect)((function(){a?m.block((function(e){return g(e.pathname),v(!0),!1})):m.block((function(){}))}),[m,a]);var b=Object(n.useCallback)(Object(Qm.a)($m.a.mark((function e(){return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,Promise.resolve(t());case 3:e.sent&&(m.block((function(){})),m.push(E));case 5:case"end":return e.stop()}}),e)}))),[E,m,t]),N=Object(n.useCallback)(function(){var a=Object(Qm.a)($m.a.mark((function a(t){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.setCancel&&e.setCancel(),!c){a.next=6;break}return a.next=4,Promise.resolve(c());case 4:a.sent&&(m.block((function(){})),m.push(E));case 6:v(!1);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[E,m,c]);return p?l.a.createElement(Cu.a,{className:"unsavedexitprompt-modal confirmation-popup-modal warning- text-center",visible:p,onOk:b,okText:s,onCancel:N,cancelText:o,closable:!0},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.warning_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,i),l.a.createElement("p",{className:"mb-0 mx-auto"},e.unsavedText||"Not adding the required information may cause issues down the line. If you'd like to continue adding information, select Continue. If you would like to exit anyway, select Exit.")))):null},mf=fu.a.Panel,df=!1,uf=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={opportunity:null,fetching:!1,contactVisible:!1,confirmModal:!1,warningModalVisible:!1,activeKey:["1"],unsavedExit:!1,requiredSuccessModalVisible:!1,required:!1},e.setOpportunity=function(a,t){var n,l,c,i=null===(n=e.state)||void 0===n?void 0:n.opportunity;(null===i||void 0===i?void 0:i.name)&&null!==(null===i||void 0===i?void 0:i.status)&&""!==(null===i||void 0===i?void 0:i.status)&&null!==(null===i||void 0===i?void 0:i.source)&&""!==(null===i||void 0===i?void 0:i.source)?(null===a||void 0===a||null===(l=a.customer_contact_accounts)||void 0===l?void 0:l.length)&&(null===a||void 0===a||null===(c=a.owner_contact_accounts)||void 0===c?void 0:c.length)?(e.setState({opportunity:a,unsavedExit:!1}),e.props.match.params.id||df||(df=!0,e.setState({requiredSuccessModalVisible:!0}))):e.setState((function(){return{opportunity:a}})):e.setState((function(){return{opportunity:a,unsavedExit:!0}}));var r=null;e.state.activeKey.length>1&&(r=e.state.activeKey.find((function(e){return e==t}))),r||e.setState((function(e){return{opportunity:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"5")))}}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.showContactInfo=function(a){e.setState({contactVisible:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.showConfirmModal=function(a){e.setState({confirmModal:a})},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.fetchOpportunity=function(){var a;_v(e.props.match.params.id||(null===(a=e.state.opportunity)||void 0===a?void 0:a.id)).then((function(a){e.setState({opportunity:a.data},(function(){var a,t;if(!(null===(a=e.props.match)||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id)){var n,l,c,i=null===(n=e.state)||void 0===n?void 0:n.opportunity;(null===i||void 0===i||null===(l=i.customer_contact_accounts)||void 0===l?void 0:l.length)&&(null===i||void 0===i||null===(c=i.owner_contact_accounts)||void 0===c?void 0:c.length)?e.setState({opportunity:i,unsavedExit:!1}):e.setState((function(){return{opportunity:i,unsavedExit:!0}}))}}))})).catch((function(e){e.response&&Object.keys(e.response.data).forEach((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.opportunity;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.opportunities.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?(this.props.setBreadcrumb([{title:"Edit Opportunity",url:""}]),this.fetchOpportunity(),this.setState({activeKey:this.props.location.editTab||"1"})):this.props.setBreadcrumb([{title:"Create Opportunity",url:""}])}},{key:"render",value:function(){var e,a,t,n=this,c=this.state,i=c.opportunity,r=c.activeKey;c.unsavedExit;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1},setCancel:function(){n.setState({required:!0})}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{onChange:this.collapseOnChange,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},activeKey:r},l.a.createElement(mf,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(ch,{opportunity:i,setOpportunity:this.setOpportunity})),l.a.createElement(mf,{disabled:!i,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"}," Team * "),(this.state.required||(null===(e=this.props.match.params)||void 0===e?void 0:e.id))&&iu(i,"TEAMS")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"2"},l.a.createElement(Nh,{opportunity:i,setOpportunity:this.setOpportunity})),l.a.createElement(mf,{disabled:!i,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Billing Accounts *"),(this.state.required||(null===(a=this.props.match.params)||void 0===a?void 0:a.id))&&iu(i,"CUSTOMER")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"3"},l.a.createElement(tf,{opportunity:i,setOpportunity:this.setOpportunity,fetchOpportunity:this.fetchOpportunity})),l.a.createElement(mf,{disabled:!i,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Site Manager Account *"),(this.state.required||(null===(t=this.props.match.params)||void 0===t?void 0:t.id))&&iu(i,"OWNER")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"4"},l.a.createElement(sf,{opportunity:i,fetchOpportunity:this.fetchOpportunity,setOpportunity:this.setOpportunity})),l.a.createElement(mf,{disabled:!i,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"5"},l.a.createElement(oh,{opportunity:i,setOpportunity:this.setOpportunity}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return n.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{disabled:!i,onClick:function(){return n.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.opportunities.view,{id:i.id})):n.handleViewMainButtonCLick()},type:"primary"},"View Opportunity"))))))),l.a.createElement(Gv,{visible:this.state.contactVisible,onClose:function(){return n.showContactInfo(!1)}}),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Opportunity!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.opportunities.view,{id:i.id}))},className:"border-0 bg-transparent shadow-none p-0"},"View Opportunity")),okAction:function(){return o.push(Object(dh.a)(zm.dashboard.opportunities.view,{id:i.id}))},okTitle:"View Opportunity",visible:this.state.confirmModal,onClose:function(){return n.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Opportunity?"),visible:this.state.warningModalVisible,onClose:function(){return n.showWarningModal(!1)}}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Opportunity, select View Opportunity.",onClose:function(){n.showRequiredSuccessModal(!1)},okText:"View Opportunity",onOK:function(){n.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.opportunities.view,{id:i.id}))}}))}}]),t}(n.Component),pf=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(uf)),vf=t(1055);function hf(e){return function(a){return _v(e).then((function(e){a({type:"OPPORTUNITY_DETAIL_SUCCESS",payload:e.data})}))}}var ff=ku.a.Option;var Ef=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{opportunityDetailAction:hf})(Object(r.withRouter)((function(e){var a,t,c,i=Object(n.useState)(!1),r=Object(yp.a)(i,2),s=r[0],o=r[1],m=Object(n.useState)([]),d=Object(yp.a)(m,2),u=d[0],p=d[1],v=Object(n.useState)([]),h=Object(yp.a)(v,2),f=h[0],E=h[1],g=Object(n.useState)(!1),b=Object(yp.a)(g,2),N=b[0],y=b[1],w=function(e){o(e)},_=function(a){var t=Object(wu.a)(Object(wu.a)({},a),{},{status:(null===a||void 0===a?void 0:a.status)?null===a||void 0===a?void 0:a.status:a});kv(e.match.params.id,t).then((function(t){e.opportunityDetailAction(e.match.params.id),12==(null===a||void 0===a?void 0:a.status)&&Mm.b.success("Opportunity ".concat(e.opportunity.name,"'s status has been successfully changed to LOST."))})).catch((function(e){td(e)}))};Object(n.useEffect)((function(){S()}),[]);var S=function(){Vv().then((function(e){p(e.data.results)})).catch((function(e){td(e)}))},x=e.opportunity;return x.id?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row border-pr-row-btm mb-3"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"OPPORTUNITY ID"),l.a.createElement("h5",null,x.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"OPPORTUNITY NAME"),l.a.createElement("h5",null,x.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"STATUS"),l.a.createElement(ku.a,{className:"status-small-select",placeholder:null===(a=x.status)||void 0===a?void 0:a.title,style:{width:"100%",textAlign:"center",fontSize:"13px"},onChange:function(e){12==e?w(!0):_(e)},suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},u.map((function(e,a){return l.a.createElement(ff,{key:e.id,value:e.id},e.title)}))),12==(null===(t=x.status)||void 0===t?void 0:t.id)&&function(){var a,t,n=e.opportunity;return l.a.createElement("div",{className:"row lost-row-show"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",{className:"list-inline-item"},"Competitor Name:"),l.a.createElement("li",{className:"list-inline-item"},null===n||void 0===n?void 0:n.competitor_name)),l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",{className:"list-inline-item"},"Winning Bid Amount:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===n||void 0===n?void 0:n.bid_amount)),l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",{style:{color:"#4F4F4F"},className:"w-100"},"Reason:"),l.a.createElement("li",{className:"w-100"},10===(null===(a=n.reason_options)||void 0===a?void 0:a.id)?l.a.createElement("span",null," Others - ",null===n||void 0===n?void 0:n.reason," "):null===(t=n.reason_options)||void 0===t?void 0:t.title))))}()),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"OPPORTUNITY SOURCE"),l.a.createElement("h5",{className:"mb-0"},x.source.name)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row border-pr-row-btm mb-3"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Revenue"),l.a.createElement("h5",null,"$",(null===x||void 0===x?void 0:x.estimated_revenue)||0)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"ESTIMATED START AND END DATES"),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Start"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(null===x||void 0===x?void 0:x.project_start_date)||"-")),l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",{className:"list-inline-item"},"End"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(null===x||void 0===x?void 0:x.project_end_date)||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-6 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"DESCRIPTION"),l.a.createElement("h5",null,x.description)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4 col-md-3 col-lg-2"},l.a.createElement("h6",{className:"text-uppercase"},"Bid"),l.a.createElement("h5",{className:"mb-0"},"YES"===(null===x||void 0===x?void 0:x.bid)?"Yes":"NO"===(null===x||void 0===x?void 0:x.bid)?"No":"-")),l.a.createElement("div",{className:"col-12 col-sm-4 col-md-3 col-lg-2"},l.a.createElement("h6",{className:"text-uppercase"},"Bid Date"),l.a.createElement("h5",{className:"mb-0"}," ",Sd(null===x||void 0===x?void 0:x.bid_date)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Link to Bid Advertisement"),l.a.createElement("h5",{className:"mb-0"},l.a.createElement("a",{href:"https://".concat(null===x||void 0===x?void 0:x.bid_link),target:"_blank"},(null===x||void 0===x?void 0:x.bid_link)||"-"))),l.a.createElement("div",{className:"col-12 col-sm-4 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Total Bid Value"),l.a.createElement("h5",{className:"mb-0"},(null===x||void 0===x?void 0:x.bid_value)?"$".concat(null===x||void 0===x?void 0:x.bid_value):"-")),l.a.createElement("div",{className:"col-12 col-sm-4 col-md-3 col-lg-2"},l.a.createElement("h6",{className:"text-uppercase"},"Bid Sector"),l.a.createElement("h5",{className:"mb-0"},(null===x||void 0===x?void 0:x.bid_sector)?null===Zv||void 0===Zv||null===(c=Zv.find((function(e){return e.value===(null===x||void 0===x?void 0:x.bid_sector)})))||void 0===c?void 0:c.name:"-"))))),l.a.createElement(Jv,{reasons:f,reasonLoading:N,getReasons:function(){y(!0),Lv().then((function(e){E(e.data.results),y(!1)})).catch((function(e){td(e)}))},visible:s,onClose:function(){return w(!1)},handleUpdate:_})):l.a.createElement("div",null)})));var gf=Object(Lm.b)((function(e){return Object(wu.a)({},e)}))((function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(!1),s=Object(yp.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)({current:1,pageSize:15}),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=[{title:"Name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},Nd(e)," ")}},{title:l.a.createElement("div",{className:"position-relative"},"FORMAT"),dataIndex:"format",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},".",e)}}];Object(n.useEffect)((function(){f()}),[]);var f=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(!0);var t=e.opportunity;a.opportunity=t.id,Sv(a).then((function(e){i(e.data.results),m(!1),v((function(t){return Object(wu.a)(Object(wu.a)({},t),{},{current:a.page||1,total:e.data.count})}))})).catch((function(e){td(e),m(!1)}))},E=function(a){var t=a.file,n=new FormData;n.append("opportunity",e.opportunity.id),n.append("document",t),yv(n).then((function(e){f()})).catch((function(e){td(e)}))};return l.a.createElement("div",{className:"col-12 ".concat(e.hideTitle?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(e.hideTitle?"":"border-1")},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:E},l.a.createElement(Vm.a,{className:"add-btn-collapse"},"+ Upload"))),e.hideTitle&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return e.onTabChange("5")}},"VIEW ALL"," ")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div documents-table-main"},c.length>0?l.a.createElement(fv.a,{pagination:p,loading:o,className:"main-table-all carpet-cleaning-table border-0",columns:h,onRow:function(e){return{onClick:function(a){window.open(e.document,"_blank")}}},dataSource:c,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:E},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))})),bf={labelCol:{span:24},wrapperCol:{span:24}},Nf=Pm.a.TextArea,yf=ku.a.Option,wf=Object(r.withRouter)((function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(!1),s=Object(yp.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)(null),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=Object(n.useState)(!1),f=Object(yp.a)(h,2),E=f[0],g=f[1],b=Object(n.useRef)(),N=function(e){g(e)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(!0),ud("salesperson",e).then((function(e){i(e.data.results),m(!1)})).catch((function(e){td(e),m(!1)}))},w=function(){var a=Object(Qm.a)($m.a.mark((function a(){var t,n,l,c,i;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.data){a.next=5;break}return a.next=3,y();case 3:b.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.data),{},{assignee:null===(t=e.data)||void 0===t||null===(n=t.assignee)||void 0===n?void 0:n.id,due_date:(null===(l=e.data)||void 0===l?void 0:l.due_date)?hd()(null===(c=e.data)||void 0===c?void 0:c.due_date):null})),v(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.assignee);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:w,centered:!0,maskClosable:!1,destroyOnClose:!0,title:"Post",visible:e.visible,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",onClose:function(){N(!0)},placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){N(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return b.current.submit()},type:"primary"},e.data?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:function(a){var t;a.opportunity=e.match.params.id,a.due_date&&(a.due_date=hd()(a.due_date).format("YYYY-MM-DD")),e.data?Cv(e.data.id,a).then((function(a){Mm.b.success("Post Updated Successfully"),b.current.resetFields(),v(null),e.onSuccess()})).catch((function(e){td(e)})):(t=a,od(ad("opportunity.post"),t)).then((function(a){Mm.b.success("Post Created Successfully"),b.current.resetFields(),v(null),e.onSuccess()})).catch((function(e){td(e)}))},ref:b,hideRequiredMark:!0},bf,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Post Name*")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Post Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"post_type",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Type*"))},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Type"},l.a.createElement(yf,{value:"NOTE"},"Note"),l.a.createElement(yf,{value:"TASK"},"Task")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"assignee",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Assignee")),className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Search Assignee",notFoundContent:o?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return y()},onSearch:function(e){return y({search:e})},onChange:function(e){v(c.find((function(a){return a.id===e})))}},c.map((function(e){return l.a.createElement(yf,{key:e.id,value:e.id},"".concat(e.first_name," ").concat(e.last_name))}))))),p&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(p.first_name,p.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(p.first_name," ").concat(p.last_name)),l.a.createElement("p",{className:"mb-0"},p.role.split("_").join(" ")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"due_date",label:"Due Date"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"priority",label:"Priority"},l.a.createElement(ku.a,{placeholder:"Select Priority"},l.a.createElement(yf,{value:"NORMAL"},l.a.createElement("span",{style:{backgroundColor:"#fcd966"},className:"status-tag"}),"Normal"),l.a.createElement(yf,{value:"HIGH"},l.a.createElement("span",{style:{backgroundColor:"#eb8357"},className:"status-tag"}),"High"),l.a.createElement(yf,{value:"LOW"},l.a.createElement("span",{style:{backgroundColor:"#7fd4ba"},className:"status-tag"}),"Low")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Description"))},l.a.createElement(Nf,{className:"text-area-main text-area-task",placeholder:"Enter Description"})))))))),l.a.createElement(iv,{visible:E,onClose:function(){return N(!1)},heading:"Are you sure you want to exit editing this Post?",handlePostDrawer:!0,closePostDrawer:e.onClose}))}));var _f=Object(Lm.b)((function(e){return Object(wu.a)({},e)}))(Object(r.withRouter)((function(e){var a=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?"gray":n.isSame(a,"day")?"#F2994A":n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0:"gray"},t=[{title:"POST NAME",render:function(e){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{checked:e.completed,onChange:function(){return O(e,!e.completed)},className:"post-checkbox-opacity",onClick:function(e){return e.stopPropagation()}},e.name))}},{title:"TYPE",dataIndex:"post_type",render:function(e){return l.a.createElement("div",null,bd(e))}},{title:"Priority",dataIndex:"priority",render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"Assignee",dataIndex:"assignee",render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name)),(null===e||void 0===e?void 0:e.first_name)||""," ",(null===e||void 0===e?void 0:e.last_name)||"-")}},{title:"POST SOURCE",dataIndex:"post_source",render:function(e){return l.a.createElement("div",null,e)}},{title:l.a.createElement("div",{className:"position-relative"},"Due Date"),sorter:!0,render:function(e){return l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:a(e)}},function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MMMM D, YYYY"):"No Due Date"}(e))}}],c=Object(n.useState)(!1),i=Object(yp.a)(c,2),r=i[0],s=i[1],o=Object(n.useState)([]),m=Object(yp.a)(o,2),d=m[0],u=m[1],p=Object(n.useState)(null),v=Object(yp.a)(p,2),h=v[0],f=v[1],E=Object(n.useState)({current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}),g=Object(yp.a)(E,2),b=g[0],N=g[1],y=Object(n.useState)(!1),w=Object(yp.a)(y,2),_=w[0],S=w[1];Object(n.useEffect)((function(){x()}),[]);var x=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(!0),xv(Object(wu.a)({opportunity:e.match.params.id},a)).then((function(t){var n=Object(wu.a)(Object(wu.a)({},b),{},{current:a.page||1,total:e.viewAll?t.data.count:10});u(e.viewAll?t.data.results:t.data.results.slice(0,10)),N(n),S(!1)})).catch((function(e){td(e),S(!1)}))},C=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s(e),f(a)},O=function(e,a){Cv(e.id,{completed:a}).then((function(t){var n=Object(Ou.a)(d),l=n.findIndex((function(a){return a.id===e.id}));n[l].completed=a,u(n),Mm.b.success("Updated post status")}))},k=e.hideTitle;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(e.hideTitle?"border-1":"")},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(e){return x({search:e.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement(Vm.a,{onClick:function(){return C(!0)},className:"add-btn-collapse"},"+ Create")),!k&&l.a.createElement(Vm.a,{onClick:function(){return e.onTabChange("6")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},0!==(null===d||void 0===d?void 0:d.length)?l.a.createElement("div",{className:"col-12 p-0 table-responsive main-table-div post-table"},l.a.createElement(fv.a,{className:"main-table-all",columns:t,loading:_,dataSource:d,size:"middle",rowKey:function(e){return e.id},rowClassName:function(e){if(e.completed)return"post-opacity"},locale:{emptyText:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.create_post_icon_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-green-tag"},"Create Post"))))},pagination:e.viewAll&&b,onChange:function(e){x({page:e.current})},onRow:function(e,a){return{onClick:function(a){C(!0,e)}}}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{onClick:function(){return C(!0)},className:"col-12 cursor-pointer text-center"},l.a.createElement("img",{src:Rm.note_add_new_create_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-green-tag"},"Create Post")))))),l.a.createElement(wf,{data:h,onSuccess:Object(Qm.a)($m.a.mark((function e(){return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(!1);case 2:return e.next=4,x();case 4:case"end":return e.stop()}}),e)}))),visible:r,onClose:function(){return C(!1)}}))}))),Sf=t(19),xf=function(e){Object(n.useEffect)((function(){var a=e.opportunity;(a.sales_person.id||a.sales_manager.id||a.sales_assistant.id==a.point_opportunity)&&console.log("point of contact")}),[]);var a=e.opportunity;return a.id?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row summary-info-cr"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES MANAGERS")),a.sales_manager.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_manager.map((function(e,t){return l.a.createElement("div",{className:"col-12",key:t},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.point_opportunity===e.id?"active":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},bd(e.role)),l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},a.point_opportunity===e.id?"point of contact":"")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES ASSISTANTS")),a.sales_assistant.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_assistant.map((function(e,t){return l.a.createElement("div",{className:"col-12",key:t},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.point_opportunity===e.id?"active":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},bd(e.role)),l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},a.point_opportunity===e.id?"point of contact":"")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALESPEOPLE")),a.sales_person.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_person.map((function(e,t){return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.point_opportunity===e.id?"active":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},"Salesperson"),l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},a.point_opportunity===e.id?"point of contact":"")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople")))))))))):l.a.createElement("div",null)},Cf=function(e){var a=e.contacts;return l.a.createElement(l.a.Fragment,null,a.length>0?l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"small-heading-contact mb-0"},"Contacts")),a.map((function(e,a){var t,n;return l.a.createElement("div",{key:a,className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||""),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},(null===e||void 0===e?void 0:e.role)||"")),l.a.createElement("p",{className:"mb-0"},(null===e||void 0===e?void 0:e.default_email)&&"".concat(null===(t=e.default_email)||void 0===t?void 0:t.email,",")," ",null===e||void 0===e||null===(n=e.default_phone)||void 0===n?void 0:n.phone_number)))))}))):l.a.createElement("div",{className:"col-12 pt-3 px-0"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Contacts")))))},Of=fu.a.Panel,kf=Object(r.withRouter)((function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(!1),s=Object(yp.a)(r,2),o=(s[0],s[1]);Object(n.useEffect)((function(){m()}),[]);var m=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(!0),a.opportunity=e.match.params.id,a.page="all",jv(Object(wu.a)({},a)).then((function(e){i(e.data),o(!1)})).catch((function(e){td(e),o(!1)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(e.editBtn?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(e){m({search:e.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),e.editBtn&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return e.onTabChange("2")}},"VIEW ALL"," ")))),c.length>0?l.a.createElement("div",{className:"".concat(e.editBtn?"":"sales-site-design-fix")},c.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{defaultActiveKey:["1"],className:"site-owner-collapse-main"},l.a.createElement(Of,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-9 col-sm-9 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Account")))),l.a.createElement("div",{className:"col-3 col-sm-3 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{style:{color:"#4F4F4F"}},e.contact.length," Contacts"))))),key:"1",forceRender:!0},l.a.createElement(Cf,{contacts:e.contact}))))}))):l.a.createElement("div",{className:"col-12 ".concat(e.editBtn?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mx-0 mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Billing Accounts")))))})),jf=function(e){var a=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},a.contact.length>0?a.contact.map((function(e,a){var t,n;return l.a.createElement("div",{key:a,className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div position-relative"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},e.role?e.role:"-")),l.a.createElement("p",{className:"mb-0"},e.default_email&&"".concat(null===(t=e.default_email)||void 0===t?void 0:t.email,","),"\xa0 ",null===(n=e.default_phone)||void 0===n?void 0:n.phone_number)))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.contacts_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))),l.a.createElement("div",{className:"row",style:{padding:"16px 0",borderTop:"1px solid #e0e0e0"}},a.site.length>0?a.site.map((function(e,a){var t,n,c,i,r,s,o;return l.a.createElement("div",{className:"col-12",key:a},l.a.createElement("div",{style:{minHeight:"100px"},className:"row site-details-row-card site-details-row-card-update position-relative ".concat(e.primary?"active":"")},l.a.createElement("div",{className:"col-12 col-sm-2 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("span",{className:"text-uppercase font-weight-500"},null===(t=e.site)||void 0===t?void 0:t.name)))),l.a.createElement("div",{className:"col-12 col-sm-10 px-3 py-0 position-relative"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===(n=e.site)||void 0===n?void 0:n.apartment," ",null===(c=e.site)||void 0===c?void 0:c.city,","," ",null===(i=e.site)||void 0===i?void 0:i.state," ",null===(r=e.site)||void 0===r?void 0:r.zip_code," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},null===(s=e.site)||void 0===s?void 0:s.email)),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},null===(o=e.site)||void 0===o?void 0:o.phone))),e.primary&&l.a.createElement("small",{style:{right:"15px"},className:"primary-text-right text-capitalize position-absolute"}," primary site"))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid mb-2"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))},If=fu.a.Panel,Af=Object(r.withRouter)((function(e){var a,t=Object(n.useState)([]),c=Object(yp.a)(t,2),i=c[0],r=c[1],s=Object(n.useState)(!1),o=Object(yp.a)(s,2),m=(o[0],o[1]);Object(n.useEffect)((function(){d()}),[]);var d=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(!0),Tv(Object(wu.a)({opportunity:e.match.params.id},a)).then((function(e){r(e.data),m(!1)})).catch((function(e){td(e),m(!1)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(e.hideTitle?"":"no-data-card-row-new d-none")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(e){d({search:e.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),e.hideTitle&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return e.onTabChange("3")}},"VIEW ALL"," ")))),(null===(a=i.results)||void 0===a?void 0:a.length)>0?l.a.createElement("div",{className:"".concat(e.hideTitle?"":"sales-site-design-fix")},i.results.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],className:"site-owner-collapse-main"},l.a.createElement(If,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-8 col-sm-8 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Account")))),l.a.createElement("div",{className:"col-4 col-sm-4 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.contact.length," Contacts")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.site.length," Sites"))))),key:"1",forceRender:!0},l.a.createElement(jf,{data:e}))))}))):l.a.createElement("div",{className:"col-12 ".concat(e.hideTitle?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mx-0 mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Site Manager Accounts")))))})),Df=Object(r.withRouter)((function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(),s=Object(yp.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)({current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=[{title:l.a.createElement("div",{className:"text-uppercase"},"Date"),dataIndex:"date",render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD, YYYY hh:mm A"))}},{title:l.a.createElement("div",{className:"text-uppercase"},"Action"),dataIndex:"action"},{title:l.a.createElement("div",{className:"text-uppercase"},"EMPLOYEE"),dataIndex:"user",render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},e.split(" ")[0].split("")[0],e.split(" ")[1].split("")[0]),e)}}];Object(n.useEffect)((function(){f()}),[]);var f=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(!0),Pv(e.match.params.id,a).then((function(t){v(Object(wu.a)(Object(wu.a)({},p),{},{current:a.page||1,total:e.viewAll?t.data.count:10})),i(e.viewAll?t.data.data:t.data.data.slice(0,10))})).catch((function(e){td(e)})).finally((function(){m(!1)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(e.hideTitle?"":"mt-30 no-data-card-row-new")},e.hideTitle&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row justify-content-between account-tabs-min summary-header-details search-view-header-in-collapse align-items-center carpet-cleaning-mini-header"},l.a.createElement(Vm.a,{onClick:function(){return e.onTabChange("7")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},c.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{scroll:{y:300},className:"main-table-all",columns:h,dataSource:c,size:"middle",locale:{emptyText:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.time_activity_add,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Activity"))))},loading:o,pagination:e.viewAll&&p,onChange:function(e){f({page:e.current})}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Time_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Activity"))))))))})),Tf=fu.a.Panel,Rf=ku.a.Option;function Mf(e){console.log("selected ".concat(e))}function Ff(e){console.log(e)}function Pf(e){console.log("checked = ".concat(e.target.checked))}var Vf=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).columns=[{title:"activity date",dataIndex:"activity_date"},{title:"Created",dataIndex:"created"}],e.data=[{key:"1",activity_date:l.a.createElement("div",null,"Dec 01, 2019 11:21 AM"),created:l.a.createElement("div",null,"Created Work Order : 123-4567-890")},{key:"2",activity_date:l.a.createElement("div",null,"Dec 01, 2019 11:21 AM"),created:l.a.createElement("div",null,"Created Work Order : 123-4567-890")},{key:"3",activity_date:l.a.createElement("div",null,"Dec 01, 2019 11:21 AM"),created:l.a.createElement("div",null,"Created Work Order : 123-4567-890")},{key:"4",activity_date:l.a.createElement("div",null,"Dec 01, 2019 11:21 AM"),created:l.a.createElement("div",null,"Created Work Order : 123-4567-890")}],e.parposalColumns=[{title:"Proposal name",dataIndex:"proposal_name"},{title:"Customer",dataIndex:"customer"},{title:"Status",dataIndex:"status"},{title:l.a.createElement("div",{className:"position-relative"},"LAST ACTIVITY DATE"),dataIndex:"last_activity_date",sorter:!0}],e.parposalData=[{key:"1",proposal_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.related_show_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Albertson\u2019s")),customer:l.a.createElement("div",null,"(999) 000\u20130000"),status:l.a.createElement(Vm.a,{className:"main-status-btn border-0 bg-transparent"},"Prospect"),last_activity_date:l.a.createElement("div",null,"Dec 2, 2019, 1:23 PM")},{key:"2",proposal_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.related_show_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Albertson\u2019s")),customer:l.a.createElement("div",null,"(999) 000\u20130000"),status:l.a.createElement(Vm.a,{className:"main-status-btn border-0 bg-transparent"},"Prospect"),last_activity_date:l.a.createElement("div",null,"Dec 2, 2019, 1:23 PM")},{key:"3",proposal_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"}),l.a.createElement("div",{className:"name-id-details"},"Albertson\u2019s")),customer:l.a.createElement("div",null,"(999) 000\u20130000"),status:l.a.createElement(Vm.a,{className:"main-status-btn border-0 bg-transparent"},"Prospect"),last_activity_date:l.a.createElement("div",null,"Dec 2, 2019, 1:23 PM")},{key:"4",proposal_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.related_show_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Albertson\u2019s")),customer:l.a.createElement("div",null,"(999) 000\u20130000"),status:l.a.createElement(Vm.a,{className:"main-status-btn border-0 bg-transparent"},"Prospect"),last_activity_date:l.a.createElement("div",null,"Dec 2, 2019, 1:23 PM")}],e.taskColumns=[{title:"Task",dataIndex:"task",sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"DUe Date"),dataIndex:"due_date",sorter:!0}],e.taskData=[{key:"1",task:l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{onChange:Pf},"Contact client for details ")),due_date:l.a.createElement("span",{className:"main-status-btn approved-btn"},"Due Today")},{key:"2",task:l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{onChange:Pf},"Contact client for details ")),due_date:l.a.createElement("span",{className:"main-status-btn text-red"},"Apr 12, 2020")},{key:"3",task:l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{onChange:Pf},"Contact client for details ")),due_date:l.a.createElement("span",{className:"main-status-btn"},"Apr 12, 2020")},{key:"4",task:l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{onChange:Pf},"Contact client for details ")),due_date:l.a.createElement("span",{className:"main-status-btn"},"Apr 12, 2020")}],e.docsColumns=[{title:"Document Name",dataIndex:"docs_name"},{title:"File Type",dataIndex:"file_type"},{title:l.a.createElement("div",{className:"position-relative"},"Upload Date"),dataIndex:"upload_date",sorter:!0}],e.docsData=[{key:"1",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Job Description")),file_type:l.a.createElement("div",null,"doc"),upload_date:l.a.createElement("div",null,"Sep 08, 2020 3:45 PM")},{key:"2",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Job Description")),file_type:l.a.createElement("div",null,"doc"),upload_date:l.a.createElement("div",null,"Sep 08, 2020 3:45 PM")},{key:"3",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Job Description")),file_type:l.a.createElement("div",null,"doc"),upload_date:l.a.createElement("div",null,"Sep 08, 2020 3:45 PM")},{key:"4",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Job Description")),file_type:l.a.createElement("div",null,"doc"),upload_date:l.a.createElement("div",null,"Sep 08, 2020 3:45 PM")}],e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,title:l.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},l.a.createElement("div",{className:"create-note-div d-flex align-items-center"},l.a.createElement("img",{src:Rm.view_peropsal_icon_head,alt:"",className:"img-fluid"}),l.a.createElement("div",{className:"create-note-heading-drawer bg-transparent p-0"},"Contacts")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{className:"view-proposal-drawer-btn"},"View Proposal"),l.a.createElement(Vm.a,{className:"delete-btn-drawer p-0 border-0 bg-transparent"},l.a.createElement("img",{src:Rm.more_table_elipsis_icon,alt:"",className:"img-fluid"})))),visible:this.props.visible,onOk:this.props.onClose,onCancel:this.props.onClose,onClose:this.props.onClose,className:"main-drawer-div",width:"598px",placement:"right",closeIcon:l.a.createElement("img",{src:Rm.right_arrow_icon_drawer,alt:"",className:"img-fluid"})},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:Ff,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Tf,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flexa align-items-center"},l.a.createElement("span",null,"Opportunity Info"),l.a.createElement(Vm.a,{className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"OPPORTUNITY NAME"),l.a.createElement("h5",null,"Carpet Cleaning")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"SALESPERSON"),l.a.createElement("h5",null,"Alphonso Mourody")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"SALES ASSISTANT"),l.a.createElement("h5",null,"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"SALES MANAGER"),l.a.createElement("h5",null,"Catherine Garcia")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"STATUS"),l.a.createElement(ku.a,{className:"status-small-select",placeholder:"Prospect",style:{width:87},onChange:Mf,suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(Rf,{value:"jack"},"Jack"),l.a.createElement(Rf,{value:"lucy"},"Lucy"),l.a.createElement(Rf,{value:"disabled",disabled:!0},"Disabled"),l.a.createElement(Rf,{value:"Yiminghe"},"yiminghe"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"OPPORTUNITY SOURCE"),l.a.createElement("h5",{className:"mb-0"},"Referral")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-6"},l.a.createElement("h6",{className:"text-uppercase"},"DESCRIPTION"),l.a.createElement("h5",{className:"mb-0"},"Chance to clean 23 carpets at the local carpet store.")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-header-inner-row"},l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Project / Opportunity")),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-account-card-row align-items-center justify-content-between"},l.a.createElement("div",{className:"account-contact-card w-100 border-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-icon-card-flag float-left"},l.a.createElement("img",{src:Rm.folder_icon_main,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"info-icon-card-details float-left"},l.a.createElement("h5",{className:"d-flex align-items-center justify-content-between mb-0"},l.a.createElement("aside",null,"Hudson Cleanup"),l.a.createElement("span",{className:"text-uppercase"},"Owner")),l.a.createElement("p",{className:"font-weight-normal"},"Oil Service LTD"))))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-header-inner-row"},l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Notes (0)"),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{className:"ant-dropdown-link new-opportunity-btn text-capitalize"},"New Note"))),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-account-card-row align-items-center"},l.a.createElement("div",{className:"account-contact-card border-0 w-100"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-icon-card-flag float-left"},l.a.createElement("img",{src:Rm.notes_icon_img,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"info-icon-card-details float-left"},l.a.createElement("h5",{className:"d-flex align-items-center mb-0"},"Contact Client"),l.a.createElement("p",{className:"font-weight-normal p-0"},"Contact client about Special tools",l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"span-tg-summary d-inline-block overflow-hidden"},"needed, details to be dis"),l.a.createElement("a",{href:"#"},"Read More"))))))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-header-inner-row"},l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Activity")),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{pagination:!1,className:"main-table-all border-0 rounded-0 carpet-cleaning-table activity-info-table",columns:this.columns,dataSource:this.data,size:"middle"})))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-header-inner-row"},l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Tasks (15)"),l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search Tasks"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{className:"ant-dropdown-link new-opportunity-btn text-capitalize"},"New Tasks"))),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{pagination:!1,className:"main-table-all border-0 carpet-cleaning-table",columns:this.taskColumns,dataSource:this.taskData,size:"middle"})))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-header-inner-row"},l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Accounts (10)"),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{className:"ant-dropdown-link new-opportunity-btn text-capitalize"},"Add Account"))),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW"," "))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-account-card-row align-items-center"},l.a.createElement("div",{className:"account-contact-card w-100 position-relative border-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-icon-card-flag float-left"},l.a.createElement("img",{src:Rm.dollor_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"info-icon-card-details float-left"},l.a.createElement("h5",{className:"d-flex align-items-center mb-0"},"Clean Carpets 101"," ",l.a.createElement("span",{className:"text-uppercase text-primary"},"Customer")),l.a.createElement("p",{className:"font-weight-normal"},"123 State Street, New York, NY")))),l.a.createElement(Vm.a,{className:"contact-btn-small border-0 p-0 text-uppercase position-absolute"},"Contacts"," ")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-header-inner-row"},l.a.createElement("div",{className:"col-12 "},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Contacts (10)"),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{className:"ant-dropdown-link new-opportunity-btn text-capitalize"},"Add Contact"))),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW"," "))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-account-card-row align-items-center"},l.a.createElement("div",{className:"account-contact-card w-100 position-relative border-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-icon-card-flag float-left"},l.a.createElement("img",{src:Rm.contact_union_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"info-icon-card-details float-left"},l.a.createElement("h5",{className:"d-flex align-items-center mb-0"},"Chris Borelli",l.a.createElement("span",{className:"text-uppercase text-secondary"},"Manager")),l.a.createElement("p",{className:"font-weight-normal"},"Cborelli@email.com"),l.a.createElement("p",{className:"font-weight-normal mt-0"},"(415) 891-2345")))),l.a.createElement(Vm.a,{className:"contact-btn-small border-0 p-0 text-uppercase position-absolute"},"Accounts"," ")))))))))))}}]),t}(n.Component);function qf(e){return od(ad("proposal.proposal"),e)}function Lf(e,a){return md(ad("proposal.proposal",{id:e}),a)}function Uf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("proposal.proposal");return id(a,e)}function Bf(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("proposal.proposal",{id:e});return id(t,a)}function Wf(e){return od(ad("proposal.proposal_document"),e)}function Yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("proposal.proposal_document");return id(a,e)}function Kf(e){return od(ad("proposal.post"),e)}function Gf(e,a){return md(ad("proposal.post",{id:e}),a)}function zf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("proposal.post");return id(a,e)}function Hf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("proposal.customer_contacts");return id(a,e)}function $f(e){return od(ad("proposal.customer_contacts"),e)}function Qf(e,a){return md(ad("proposal.customer_contacts",{id:e}),a)}function Jf(e){return dd(ad("proposal.customer_contacts",{id:e}))}function Zf(e){return od(ad("proposal.owner_contacts"),e)}function Xf(e,a){return md(ad("proposal.owner_contacts",{id:e}),a)}function eE(e){return dd(ad("proposal.owner_contacts",{id:e}))}function aE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("proposal.owner_contacts");return id(a,e)}function tE(e){return id(ad("proposal.proposal_activity",{id:e}))}function nE(){return id(ad("proposal.proposal_status"))}function lE(e,a){return md(ad("proposal.default_customer_recipient",{id:e}),a)}function cE(e,a){return md(ad("proposal.primary_site",{id:e}),a)}function iE(e,a){return rd(ad("proposal.proposal_pdf",{id:e}),a)}function rE(e){return od(ad("proposal.service_variant"),e)}function sE(e){return id(ad("proposal.service_variant"),e)}function oE(e,a){return md(ad("proposal.service_variant",{id:a}),e)}function mE(e){return id(ad("proposal.tax_basis"),e)}function dE(e){return dd(ad("proposal.service_variant",{id:e}))}function uE(e){return od(ad("proposal.generate_proposals"),e)}function pE(e){return sd(ad("proposal.proposal_create_pdf"),e)}var vE=Object(r.withRouter)((function(e){var a=Object(n.useState)(!1),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)([]),s=Object(yp.a)(r,2),m=s[0],d=s[1],u=[{title:"Proposal Id",dataIndex:"id",sorter:!0,width:"10%"},{title:"Proposal name",dataIndex:"name",sorter:!0,width:"40%"},{title:"Status",dataIndex:"status",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},(null===e||void 0===e?void 0:e.title)||"-")},sorter:!0,width:"40%"},{title:"Associated Opportunity",dataIndex:"opportunity",sorter:!0,width:"40%",render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.name)||"-")}},{title:"Billing Account",dataIndex:"customer_contact",sorter:!0,width:"40%",render:function(e){return Object.keys(e).map((function(a,t){return l.a.createElement("span",{key:t},e[a].account.name)}))}},{title:"Associated project",dataIndex:"project",width:"40%",sorter:!0,render:function(e){return l.a.createElement("p",null,"-")}},{title:"LAST ACTIVITY DATE",dataIndex:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:!0}];Object(n.useEffect)((function(){p()}),[]);var p=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Uf(Object(wu.a)({opportunity:e.match.params.id},a)).then((function(e){d(e.data.results)})).catch((function(e){td(e)}))},v=e.hideTitle;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(e.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(e){p({search:e.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),v&&l.a.createElement(Vm.a,{onClick:function(){return e.onTabChange("4")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),m.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all sorter-design-fix border-0",columns:u,dataSource:m,size:"middle",pagination:!1,locale:{emptyText:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.propsal_icon_add,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No proposal"))))},onRow:function(e){return{onClick:function(a){o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:e.id}))}}}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.proposal_empty_state_icon,alt:"proposal_icon_add",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1 text-gray-tag"},"No proposal"))))),l.a.createElement(Vf,{visible:c,onClose:function(){i(!1)}}))})),hE=fu.a.Panel;var fE=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{opportunityDetailAction:hf})(Object(r.withRouter)((function(e){var a=e.onTabChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(hE,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.opportunities.edit,{id:e.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1",forceRender:!0},l.a.createElement(Ef,null)),l.a.createElement(hE,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Posts")),key:"7"},l.a.createElement(_f,{hideTitle:!1,onTabChange:a,viewAll:!1})),l.a.createElement(hE,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Activity")),key:"8"},l.a.createElement(Df,{hideTitle:!0,onTabChange:a,viewAll:!1})),l.a.createElement(hE,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Team *"),l.a.createElement("div",{className:"d-flex align-items-center"},iu(null===e||void 0===e?void 0:e.opportunity,"TEAMS")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.opportunities.edit,{id:e.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"2",forceRender:!0},l.a.createElement(xf,{opportunity:e.opportunity})),l.a.createElement(hE,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Billing Accounts *"),l.a.createElement("div",{className:"d-flex align-items-center"},iu(null===e||void 0===e?void 0:e.opportunity,"CUSTOMER")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.opportunities.edit,{id:e.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"3"},l.a.createElement(kf,{onTabChange:a,editBtn:!0})),l.a.createElement(hE,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Site Manager Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},iu(null===e||void 0===e?void 0:e.opportunity,"OWNER")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.opportunities.edit,{id:e.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"4"},l.a.createElement(Af,{hideTitle:!0,onTabChange:a})),l.a.createElement(hE,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Proposals")),key:"5"},l.a.createElement(vE,{hideTitle:!0,onTabChange:a})),l.a.createElement(hE,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Documents")),key:"6"},l.a.createElement(gf,{hideTitle:!0,onTabChange:a})))))))}))),EE=t(137),gE=t(96);function bE(e,a){return e===a?"active":e>a?"finish":void 0}var NE=Object(Lm.b)((function(e){return Object(wu.a)({},e)}))((function(e){var a,t=Object(n.useState)([]),c=Object(yp.a)(t,2),i=c[0],r=c[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){Vv().then((function(e){r(e.data.results)})).catch((function(e){td(e)}))},o=e.opportunity;if(!o.id)return l.a.createElement("div",null);var m=null===i||void 0===i?void 0:i.filter((function(e){return 12!=e.id})).findIndex((function(e){var a;return e.id===(null===o||void 0===o||null===(a=o.status)||void 0===a?void 0:a.id)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-info-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-status-green-line-main bar-scroll"},12==(null===(a=o.status)||void 0===a?void 0:a.id)?l.a.createElement("div",{className:"summary-line-main lost-line-main text-uppercase position-relative p-0 d-flex align-items-center justify-content-center "},"LOST"):i.filter((function(e){return 12!=e.id})).map((function(e,a){return l.a.createElement(gE.a,{placement:"top",title:null===e||void 0===e?void 0:e.title,overlayStyle:{fontSize:11},arrowPointAtCenter:!0},l.a.createElement("div",{key:a,className:"summary-line-main text-uppercase position-relative p-0 "+bE(m,a)},"finish"===bE(m,a)?l.a.createElement(EE.a,null):null===e||void 0===e?void 0:e.title))})))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 steps-main-div-inn"},l.a.createElement(fE,e)))))})),yE=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(kf,null))}}]),t}(n.Component),wE=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 mt-30 no-data-card-row-new"},l.a.createElement(gf,null)))}}]),t}(n.Component),_E=function(){var e=Object(n.useState)(!1),a=Object(yp.a)(e,2),t=a[0],c=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 mt-30 no-data-card-row-new"},l.a.createElement(_f,{hideTitle:!0,viewAll:!0})),l.a.createElement(wf,{visible:t,onClose:function(){return function(e){c(e)}(!1)}}))},SE=vf.a.TabPane;var xE={opportunityDetailAction:hf,setBreadcrumb:Uv},CE=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),xE)((function(e){var a=Object(n.useState)("1"),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(!0),s=Object(yp.a)(r,2),o=s[0],m=s[1];Object(n.useEffect)((function(){e.opportunityDetailAction(e.match.params.id).then((function(){var a=[{title:"Opportunities",url:zm.dashboard.opportunities.self},{title:e.opportunity.name,url:"#"}];e.setBreadcrumb(a),m($d(e.opportunity))}))}),[e.opportunity.name]);var d=function(e){i(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},o&&l.a.createElement("div",{className:"row mx-0 info-gray-div info-red-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please complete all required information to avoid issues.")),l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",activeKey:c,onChange:d},l.a.createElement(SE,{tab:"Summary",key:"1"},l.a.createElement(NE,{onTabChange:d})),l.a.createElement(SE,{tab:"Posts",key:"6"},l.a.createElement(_E,null)),l.a.createElement(SE,{tab:"Activity",key:"7"},l.a.createElement(Df,{viewAll:!0})),l.a.createElement(SE,{tab:"Billing Accounts",key:"2"},l.a.createElement(yE,null)),l.a.createElement(SE,{tab:"Site Manager Account",key:"3"},l.a.createElement(Af,null)),l.a.createElement(SE,{tab:"Proposals",key:"4"},l.a.createElement(vE,null)),l.a.createElement(SE,{tab:"Documents",key:"5"},l.a.createElement(wE,null))))))})),OE=fu.a.Panel;ku.a.Option;var kE=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).accountColumns=[{title:"Account Name",dataIndex:"name",sorter:{compare:function(e,a){return e-a}}},{title:"Type",dataIndex:"account_type",render:function(e){return"CUSTOMER_OWNER"===e?"Billing, Site Manager":"SITE_OWNER"===e?"Site Manager":"VENDOR"===e?"Vendor":"Billing"},sorter:{compare:function(e,a){return e-a}}},{title:l.a.createElement("div",null,"Last Activity date"),dataIndex:"modified",render:function(e){return hd()(e).format("MMM DD,YYYY hh:mm A")},sorter:{compare:function(e,a){return e-a}}}],n.accountContactColumns=[{title:"Account Name / Contact Name",render:function(e){return e.first_name?e.first_name:e.name},sorter:{compare:function(e,a){return e-a}}},{title:"Type",render:function(e){return"CUSTOMER_OWNER"===e.account_type?"Billing, Site Manager":"SITE_OWNER"===e.account_type?"Site Manager":"VENDOR"===e.account_type?"Vendor":"CUSTOMER"===e.account_type?"Billing":"contact"===e.account_type?"Contact":"Site"},sorter:{compare:function(e,a){return e-a}}},{title:l.a.createElement("div",null,"Last Activity date"),dataIndex:"modified",render:function(e){return hd()(e).format("MMM DD,YYYY hh:mm A")},sorter:{compare:function(e,a){return e-a}}}],n.contactColumns=[{title:"Contact Name",dataIndex:"full_name",sorter:{compare:function(e,a){return e-a}}},{title:"Phone number",render:function(e){var a;return(null===(a=e[0])||void 0===a?void 0:a.phone_number)||"-"},dataIndex:"phone_numbers",sorter:{compare:function(e,a){var t;return e-(null===a||void 0===a?void 0:a.phone_number)||1-(null===(t=a[0])||void 0===t?void 0:t.phone_number)||1}}},{title:"Email",render:function(e){var a;return(null===(a=e[0])||void 0===a?void 0:a.email)||"-"},dataIndex:"emails",sorter:{compare:function(e,a){var t;return e-(null===a||void 0===a?void 0:a.email)||1-(null===(t=a[0])||void 0===t?void 0:t.email)||1}}}],n.siteColumns=[{title:"Site Name",dataIndex:"name",sorter:!0,render:function(e){return e||"-"},key:"name"},{title:"Site manager Account",dataIndex:"account",sorter:!0,key:"account",render:function(e){return l.a.createElement("div",null,e)}},{title:"Address",render:function(e){return l.a.createElement("div",null,"".concat((null===e||void 0===e?void 0:e.apartment)||"")," ",e.street_address||"-",l.a.createElement("br",null),e.city||"-"," ",e.city&&"".concat(e.city||"",",")," ",e.state||"",l.a.createElement("br",null),e.zip_code||""," ",e.country||"")}},{title:"Email Address",dataIndex:"email",sorter:!0,key:"email",render:function(e){return l.a.createElement("div",null,e||"-")}},{title:"Phone Number",dataIndex:"phone",sorter:!0,key:"phone",render:function(e){return l.a.createElement("div",null,e||"-")}}],n.ManagementColumns=[{title:"Name",sorter:!0,render:function(e){return e.name?e.name:e.first_name?e.first_name:e.labor_group_name?e.labor_group_name:"-"}},{title:"Type",sorter:!0,render:function(e){var a=null===e||void 0===e?void 0:e.type;return l.a.createElement("div",null,"line_item"===a?"Service":"service_family"===a?"Service Family":"supply"===a?"Supply/Small Tools":"supply_family"===a?"Supply Family":"supply_group"===a?"Supply Group":"employee"===a?"Employee":"labor_group"===a?"Labor Group":"inventory_family"===a?"Inventory Family":"inventory_item"===a?"Inventory Item":"inventory_kit"===a?"Inventory Kit":"fleet_family"===a?"Fleet Family":"fleet_group"===a?"Fleet Group":"vehicle"===a?"Vehicle":"disposal_family"===a?"Disposal Family":"disposal"===a?"Disposal":"")}},{title:"Last Activity Date",dataIndex:"modified",sorter:!0,render:function(e){return hd()(null===e||void 0===e?void 0:e.modified).format("MMM DD,YYYY hh:mm A")||"-"}}],n.AllManagementColumns=[{title:"Name",sorter:!0,render:function(e){return e.name?e.name:e.first_name?e.first_name:e.labor_group_name?e.labor_group_name:"-"}},{title:"Type",sorter:!0,render:function(e){var a=null===e||void 0===e?void 0:e.type;return l.a.createElement("div",null,"line_item"===a?"Service":"service_family"===a?"Service Family":"supply"===a?"Supply/Small Tools":"supply_family"===a?"Supply Family":"supply_group"===a?"Supply Group":"employee"===a?"Employee":"labor_group"===a?"Labor Group":"inventory_family"===a?"Inventory Family":"inventory_item"===a?"Inventory Item":"inventory_kit"===a?"Inventory Kit":"fleet_family"===a?"Fleet Family":"fleet_group"===a?"Fleet Group":"vehicle"===a?"Vehicle":"disposal_family"===a?"Disposal Family":"disposal"===a?"Disposal":"")}},{title:"Last Activity Date",dataIndex:"modified",sorter:!0,render:function(e){return hd()(null===e||void 0===e?void 0:e.modified).format("MMM DD,YYYY hh:mm A")}}],n.opportunityColumns=[{title:"Opportunity name",dataIndex:"name",sorter:{compare:function(e,a){return e-a}}},{title:"Status",dataIndex:"status",sorter:{compare:function(e,a){return e-a}}},{title:"OPPORTUNITY SOURCE",dataIndex:"source",render:function(e){return l.a.createElement("div",null,e.name)},sorter:{compare:function(e,a){var t;return null===(t=e.name)||void 0===t?void 0:t.localeCompare(a.name)}}},{title:l.a.createElement("div",{className:"position-relative"},"Last Activity Date"),dataIndex:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:{compare:function(e,a){return e-a}}}],n.proposalColumns=[{title:"Proposal name",dataIndex:"name",sorter:{compare:function(e,a){return e-a}}},{title:"Status",dataIndex:"status",sorter:{compare:function(e,a){return e-a}},render:function(e){return l.a.createElement("div",{className:"text-capitalize"},e)}},{title:"Activity",dataIndex:"modified",sorter:{compare:function(e,a){return e-a}},render:function(e){return hd()(e).format("MMM DD,YYYY hh:mm A")}}],n.proposalOpprtunityColumns=[{title:"Proposal/opportunity name",dataIndex:"name",sorter:{compare:function(e,a){return e-a}}},{title:"Status",dataIndex:"status",sorter:{compare:function(e,a){return e-a}},render:function(e){return l.a.createElement("div",{className:"text-capitalize"},e)}},{title:"Activity",dataIndex:"modified",sorter:{compare:function(e,a){return e-a}},render:function(e){return hd()(e).format("MMM DD,YYYY hh:mm A")}}],n.leadsColumns=[{title:"Contact Name",dataIndex:"contact_name",sorter:!0},{title:"Status",dataIndex:"status",sorter:!0},{title:"Contact",dataIndex:"contact",sorter:!0},{title:"Salesperson",dataIndex:"salesperson",sorter:!0},{title:"Last Activity date",dataIndex:"last_activity_date",sorter:!0}],n.setSectionsToAll=function(){n.handleSalesSubsectionSearch("all",!0),n.handleAccountSubsectionSearch("all",!0),n.handleManagementsectionSearch("all",!0)},n.changeTabPosition=function(e){n.setState({tabPosition:e.target.value})},n.handleAccountSubsectionSearch=function(e,a){var t,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N,y,w,_,S,x,C,O,k,j,I,A,D,T,R=n.props.global_search,M=(null===R||void 0===R||null===(t=R.accounts_contacts)||void 0===t?void 0:t.accounts.length)>0?null===R||void 0===R||null===(l=R.accounts_contacts)||void 0===l?void 0:l.accounts:[],F=(null===R||void 0===R||null===(c=R.accounts_contacts)||void 0===c?void 0:c.contacts.length)>0?null===R||void 0===R||null===(i=R.accounts_contacts)||void 0===i?void 0:i.contacts.map((function(e){return Object(wu.a)(Object(wu.a)({},e),{},{account_type:"contact"})})):[],P=(null===R||void 0===R||null===(r=R.accounts_contacts)||void 0===r?void 0:r.sites.length)>0?null===R||void 0===R||null===(s=R.accounts_contacts)||void 0===s?void 0:s.sites.map((function(e){return Object(wu.a)(Object(wu.a)({},e),{},{account_type:"site"})})):[];if(a||n.setState({currentSection:"accounts",showall:!1}),"all"!==e)if("SITES"!==e)if("CONTACTS"!==e){var V="VENDOR"!==e?null===M||void 0===M?void 0:M.filter((function(e){return e.account_type.includes("CUSTOMER_OWNER")})):[];n.setState({accountsData:[].concat(Object(Ou.a)(null===M||void 0===M?void 0:M.filter((function(a){return a.account_type===e}))),Object(Ou.a)(V)),accountsColumns:n.accountColumns,selectedResult:e,heading:"CUSTOMER"===e?"Billing Accounts":"SITE_OWNER"===e?"Site Manager Accounts":"VENDOR"===e?"Vendor accounts":"Accounts & Contacts",count:"CUSTOMER"===e?(null===R||void 0===R||null===(o=R.accounts_contacts)||void 0===o||null===(m=o.accounts)||void 0===m||null===(d=m.filter((function(e){return"CUSTOMER"===e.account_type})))||void 0===d?void 0:d.length)+(null===R||void 0===R||null===(u=R.accounts_contacts)||void 0===u||null===(p=u.accounts)||void 0===p||null===(v=p.filter((function(e){return e.account_type.includes("CUSTOMER_OWNER")})))||void 0===v?void 0:v.length):"SITE_OWNER"===e?(null===R||void 0===R||null===(h=R.accounts_contacts)||void 0===h||null===(f=h.accounts)||void 0===f||null===(E=f.filter((function(e){return e.account_type.includes("SITE_OWNER")})))||void 0===E?void 0:E.length)+(null===R||void 0===R||null===(g=R.accounts_contacts)||void 0===g||null===(b=g.accounts)||void 0===b||null===(N=b.filter((function(e){return e.account_type.includes("CUSTOMER_OWNER")})))||void 0===N?void 0:N.length):"VENDOR"===e?null===R||void 0===R||null===(y=R.accounts_contacts)||void 0===y||null===(w=y.accounts)||void 0===w||null===(_=w.filter((function(e){return e.account_type.includes("VENDOR")})))||void 0===_?void 0:_.length:(null===R||void 0===R||null===(S=R.accounts_contacts)||void 0===S||null===(x=S.accounts)||void 0===x?void 0:x.length)+(null===R||void 0===R||null===(C=R.accounts_contacts)||void 0===C||null===(O=C.contacts)||void 0===O?void 0:O.length)})}else{var q;n.setState({accountsData:F,accountsColumns:n.contactColumns,selectedResult:"contacts",heading:"Contacts",count:(null===R||void 0===R||null===(q=R.accounts_contacts)||void 0===q?void 0:q.contacts.length)||0})}else n.setState({accountsData:P,accountsColumns:n.siteColumns,selectedResult:"SITES",heading:"Sites",count:null===P||void 0===P?void 0:P.length});else n.setState({accountsData:[].concat(Object(Ou.a)(M),Object(Ou.a)(F),Object(Ou.a)(P)),accountsColumns:n.accountContactColumns,heading:"Accounts & Contacts",count:(null===R||void 0===R||null===(k=R.accounts_contacts)||void 0===k||null===(j=k.accounts)||void 0===j?void 0:j.length)+(null===R||void 0===R||null===(I=R.accounts_contacts)||void 0===I||null===(A=I.contacts)||void 0===A?void 0:A.length)+(null===R||void 0===R||null===(D=R.accounts_contacts)||void 0===D||null===(T=D.sites)||void 0===T?void 0:T.length)||0})},n.handleSalesSubsectionSearch=function(e,a){var t,l,c,i,r=n.props.global_search,s=(null===r||void 0===r||null===(t=r.sales)||void 0===t?void 0:t.proposal.length)>0?null===r||void 0===r||null===(l=r.sales)||void 0===l?void 0:l.proposal.map((function(e){return Object(wu.a)(Object(wu.a)({},e),{},{type:"proposal"})})):[],o=(null===r||void 0===r||null===(c=r.sales)||void 0===c?void 0:c.opportunity.length)>0?null===r||void 0===r||null===(i=r.sales)||void 0===i?void 0:i.opportunity.map((function(e){return Object(wu.a)(Object(wu.a)({},e),{},{type:"opportunity"})})):[];a||n.setState({currentSection:"sales",showall:!1}),"all"!==e?"proposals"!==e?"opportunities"===e&&n.setState({salesData:o,salesColumns:n.opportunityColumns,selectedResult:"opportunities",salesHeading:"Opportunities"}):n.setState({salesData:s,salesColumns:n.proposalColumns,selectedResult:"proposals",salesHeading:"Proposals"}):n.setState({salesData:[].concat(Object(Ou.a)(s),Object(Ou.a)(o)),salesColumns:n.proposalOpprtunityColumns,salesHeading:"Sales"})},n.handleManagementsectionSearch=function(e,a){var t,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g=n.props.global_search,b=Object(wu.a)({},g.management),N=[],y=function(e){Object.entries(g.management[e]).forEach((function(a){var t=Object(yp.a)(a,2),n=t[0],l=t[1];l.map((function(a){a.breadcrumb=[e,n],a.type=n})),N=[].concat(Object(Ou.a)(N),Object(Ou.a)(l))}))};for(var w in b)y(w);(a||n.setState({currentSection:"management",showall:!1,selectedResult:e}),"all"!==e)?"service_family"!==e?"line_items"!==e?"labor_group"!==e?"employee"!==e?"fleet_families"!==e?"fleet_groups"!==e?"vehicles"!==e?"inventory_family"!==e?"inventory_kit"!==e?"inventory_item"!==e?"supply"!==e?"supply_family"!==e?"supply_group"!==e?"disposal"!==e?"disposal_family"===e&&n.setState({managementData:null===g||void 0===g||null===(t=g.management)||void 0===t?void 0:t.disposal.disposal_family,managementColumns:n.ManagementColumns,managementHeading:"Disposal Family"}):n.setState({managementData:null===g||void 0===g||null===(l=g.management)||void 0===l?void 0:l.disposal.disposal,managementColumns:n.ManagementColumns,managementHeading:"Disposals"}):n.setState({managementData:null===g||void 0===g||null===(c=g.management)||void 0===c?void 0:c.supply.supply_group,managementColumns:n.ManagementColumns,managementHeading:"Supply Groups"}):n.setState({managementData:null===g||void 0===g||null===(i=g.management)||void 0===i?void 0:i.supply.supply_family,managementColumns:n.ManagementColumns,managementHeading:"Supply Families"}):n.setState({managementData:null===g||void 0===g||null===(r=g.management)||void 0===r?void 0:r.supply.supply,managementColumns:n.ManagementColumns,managementHeading:"Supply/small Tools"}):n.setState({managementData:null===g||void 0===g||null===(s=g.management)||void 0===s?void 0:s.inventory.inventory_item,managementColumns:n.ManagementColumns,managementHeading:"Inventory Item"}):n.setState({managementData:null===g||void 0===g||null===(o=g.management)||void 0===o?void 0:o.inventory.inventory_kit,managementColumns:n.ManagementColumns,managementHeading:"Inventory Kit"}):n.setState({managementData:null===g||void 0===g||null===(m=g.management)||void 0===m?void 0:m.inventory.inventory_family,managementColumns:n.ManagementColumns,managementHeading:"Inventory Family"}):n.setState({managementData:null===g||void 0===g||null===(d=g.management)||void 0===d?void 0:d.fleet.vehicle,managementColumns:n.ManagementColumns,managementHeading:"Vehicles"}):n.setState({managementData:null===g||void 0===g||null===(u=g.management)||void 0===u?void 0:u.fleet.fleet_group,managementColumns:n.ManagementColumns,managementHeading:"Fleet Groups"}):n.setState({managementData:null===g||void 0===g||null===(p=g.management)||void 0===p?void 0:p.fleet.fleet_family,managementColumns:n.ManagementColumns,managementHeading:"Fleet Families"}):n.setState({managementData:null===g||void 0===g||null===(v=g.management)||void 0===v?void 0:v.labor.employee,managementColumns:n.ManagementColumns,managementHeading:"Employees"}):n.setState({managementData:null===g||void 0===g||null===(h=g.management)||void 0===h?void 0:h.labor.labor_group,managementColumns:n.ManagementColumns,managementHeading:"Labor Groups"}):n.setState({managementData:null===g||void 0===g||null===(f=g.management)||void 0===f?void 0:f.service.line_item,managementColumns:n.ManagementColumns,managementHeading:"Line Items"}):n.setState({managementData:null===g||void 0===g||null===(E=g.management)||void 0===E?void 0:E.service.service_family,managementColumns:n.ManagementColumns,managementHeading:"Service Family"}):n.setState({managementData:N,managementColumns:n.AllManagementColumns,managementHeading:"Management"})},n.handleOperationsSectionSearch=function(){n.setState({currentSection:"ops",showall:!1})},n.getTotalResults=function(){var e,a,t,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N,y,w,_,S,x,C,O,k,j,I,A,D,T,R,M,F,P,V,q,L,U=n.props.global_search;return(null===U||void 0===U||null===(e=U.accounts_contacts)||void 0===e||null===(a=e.accounts)||void 0===a?void 0:a.length)+(null===U||void 0===U||null===(t=U.accounts_contacts)||void 0===t||null===(l=t.contacts)||void 0===l?void 0:l.length)+(null===U||void 0===U||null===(c=U.accounts_contacts)||void 0===c||null===(i=c.sites)||void 0===i?void 0:i.length)+(null===U||void 0===U||null===(r=U.sales)||void 0===r?void 0:r.proposal.length)+(null===U||void 0===U||null===(s=U.sales)||void 0===s?void 0:s.opportunity.length)+(null===U||void 0===U||null===(o=U.management)||void 0===o||null===(m=o.service)||void 0===m||null===(d=m.service_family)||void 0===d?void 0:d.length)+(null===U||void 0===U||null===(u=U.management)||void 0===u||null===(p=u.service)||void 0===p||null===(v=p.line_item)||void 0===v?void 0:v.length)+(null===U||void 0===U||null===(h=U.management)||void 0===h||null===(f=h.labor)||void 0===f?void 0:f.labor_group.length)+(null===U||void 0===U||null===(E=U.management)||void 0===E||null===(g=E.labor)||void 0===g?void 0:g.employee.length)+(null===U||void 0===U||null===(b=U.management)||void 0===b||null===(N=b.fleet)||void 0===N?void 0:N.fleet_family.length)+(null===U||void 0===U||null===(y=U.management)||void 0===y||null===(w=y.fleet)||void 0===w?void 0:w.fleet_group.length)+(null===U||void 0===U||null===(_=U.management)||void 0===_||null===(S=_.fleet)||void 0===S?void 0:S.vehicle.length)+(null===U||void 0===U||null===(x=U.management)||void 0===x||null===(C=x.supply)||void 0===C?void 0:C.supply_family.length)+(null===U||void 0===U||null===(O=U.management)||void 0===O||null===(k=O.supply)||void 0===k?void 0:k.supply_group.length)+(null===U||void 0===U||null===(j=U.management)||void 0===j||null===(I=j.supply)||void 0===I?void 0:I.supply.length)+(null===U||void 0===U||null===(A=U.management)||void 0===A||null===(D=A.inventory)||void 0===D?void 0:D.inventory_family.length)+(null===U||void 0===U||null===(T=U.management)||void 0===T||null===(R=T.inventory)||void 0===R?void 0:R.inventory_item.length)+(null===U||void 0===U||null===(M=U.management)||void 0===M||null===(F=M.inventory)||void 0===F?void 0:F.inventory_kit.length)+(null===U||void 0===U||null===(P=U.management)||void 0===P||null===(V=P.disposal)||void 0===V?void 0:V.disposal_family.length)+(null===U||void 0===U||null===(q=U.management)||void 0===q||null===(L=q.disposal)||void 0===L?void 0:L.disposal.length)||0},n.onPanelChange=function(e){switch(e){case"1":return void n.handleAccountSubsectionSearch("all");case"2":return void n.handleSalesSubsectionSearch("all");case"3":return void n.handleOperationsSectionSearch();case"4":return void n.handleManagementsectionSearch("all")}},n.redirect=function(e,a){switch(a){case"CUSTOMER":return o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:e.id}));case"SITE_OWNER":return o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:e.id}));case"site":return o.push(Object(dh.a)(zm.dashboard.owner_account.site_account.view,{id:e.id}));case"contact":return o.push(Object(dh.a)(zm.dashboard.contacts.view,{id:e.id}));case"CUSTOMER_OWNER":return o.push(Object(dh.a)("CUSTOMER"===n.state.selectedResult?zm.dashboard.customer_account.view:zm.dashboard.owner_account.view,{id:e.id}));case"proposal":return o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:e.id}));case"opportunity":return o.push(Object(dh.a)(zm.dashboard.opportunities.view,{id:e.id}));case"service_family":return o.push(Object(dh.a)(zm.dashboard.management.service.family.view,{id:e.id}));case"line_item":return o.push(Object(dh.a)(zm.dashboard.management.service.line_items.view,{id:e.id}));case"supply_group":return o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_groups.view,{id:e.id}));case"supply_family":return o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_packages.view,{id:e.id}));case"supply":return o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_tools.view,{id:e.id}));case"fleet_family":return o.push(Object(dh.a)(zm.dashboard.management.fleet.fleet_family.view,{id:e.id}));case"fleet_group":return o.push(Object(dh.a)(zm.dashboard.management.fleet.groups.view,{id:e.id}));case"vehicle":return o.push(Object(dh.a)(zm.dashboard.management.fleet.vehicle.view,{id:e.id}));case"labor_group":return o.push(Object(dh.a)(zm.dashboard.management.labor.labor_group.view,{id:e.id}));case"employee":return o.push(Object(dh.a)(zm.dashboard.management.labor.employee.view,{id:e.id}));case"inventory_family":return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_packages.view,{id:e.id}));case"inventory_item":return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_items.view,{id:e.id}));case"inventory_kit":return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_kits.view,{id:e.id}));case"disposal_family":return o.push(Object(dh.a)(zm.dashboard.management.disposal.family.view,{id:e.id}));case"disposal":return o.push(Object(dh.a)(zm.dashboard.management.disposal.items.view,{id:e.id}))}},n.state={tabPosition:"left",accountsData:[],accountsColumns:[],salesData:[],salesColumns:[],managementData:[],a:n.props.global_search,currentSection:"",showall:!0,selectedResult:"all",heading:"Accounts & Contacts",count:0,salesHeading:"Sales",managementHeading:"Management",managementColumns:[],sitesData:[],siteColumns:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setSectionsToAll();this.props.setBreadcrumb([{title:"Global Search",url:""}]),this.getTotalResults()}},{key:"componentDidUpdate",value:function(e){this.props.global_search!==e.global_search&&this.setSectionsToAll()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N,y,w,_,S,x,C,O,k,j,I,A,D,T,R,M,F,P,V,q,L,U,B,W,Y,K,G,z,H,$,Q,J,Z,X,ee,ae,te,ne,le,ce,ie,re,se,oe,me,de,ue,pe,ve,he,fe,Ee,ge,be,Ne,ye,we,_e,Se,xe,Ce,Oe,ke,je,Ie,Ae,De,Te,Re,Me,Fe,Pe,Ve,qe,Le,Ue=this,Be=this.props.global_search,We=this.state,Ye=We.showall,Ke=We.selectedResult;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"search-results-main mx-0 row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"search-results-tab-data-main"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"search-results-div"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",null,"Search Results")),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{onClick:function(){Ue.setSectionsToAll(),Ue.setState({showall:!0,selectedResult:"all"})},className:"search-tab-head  d-flex w-100 align-items-center justify-content-between \n                                                    all-results ".concat(Ye?"highlighted-search":""),style:{paddingLeft:15}},"All Results",l.a.createElement("span",{className:"count-tag-col-h"},this.getTotalResults()))),l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{accordion:!0,bordered:!1,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},onChange:this.onPanelChange,className:"custom-collapse-results global-search-cats"},l.a.createElement(OE,{header:l.a.createElement("div",{id:"accontant",className:"search-tab-head d-flex w-100 align-items-center justify-content-between"},"Accounts & Contacts",l.a.createElement("span",{className:"count-tag-col-x"},(null===Be||void 0===Be||null===(e=Be.accounts_contacts)||void 0===e||null===(a=e.accounts)||void 0===a?void 0:a.length)+(null===Be||void 0===Be||null===(t=Be.accounts_contacts)||void 0===t||null===(n=t.contacts)||void 0===n?void 0:n.length)+(null===Be||void 0===Be||null===(c=Be.accounts_contacts)||void 0===c||null===(i=c.sites)||void 0===i?void 0:i.length)||0)),key:"1"},l.a.createElement("ul",{className:"list-inline mb-0 custom-results-list"},l.a.createElement("li",{className:"sub-head-search-sidebar"},"Site Manager Accounts"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center \n                                  justify-content-between ".concat("SITE_OWNER"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleAccountSubsectionSearch("SITE_OWNER")}},l.a.createElement("span",{className:"dot-icon"}),"Site Manager Accounts",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(r=Be.accounts_contacts)||void 0===r||null===(s=r.accounts)||void 0===s||null===(o=s.filter((function(e){return e.account_type.includes("SITE_OWNER")})))||void 0===o?void 0:o.length)+(null===Be||void 0===Be||null===(m=Be.accounts_contacts)||void 0===m||null===(d=m.accounts)||void 0===d?void 0:d.filter((function(e){return e.account_type.includes("CUSTOMER_OWNER")})).length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center \n                                                                    justify-content-between ".concat("SITES"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleAccountSubsectionSearch("SITES")}},l.a.createElement("span",{className:"dot-icon"}),"Sites",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(u=Be.accounts_contacts)||void 0===u||null===(p=u.sites)||void 0===p?void 0:p.length)||0))),l.a.createElement("li",{className:"sub-head-search-sidebar"},"Billing Accounts"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head active d-flex w-100 align-items-center \n                                                                    justify-content-between ".concat("CUSTOMER"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleAccountSubsectionSearch("CUSTOMER")}},l.a.createElement("span",{className:"dot-icon"}),"Billing Accounts",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(v=Be.accounts_contacts)||void 0===v||null===(h=v.accounts)||void 0===h||null===(f=h.filter((function(e){return"CUSTOMER"===e.account_type})))||void 0===f?void 0:f.length)+(null===Be||void 0===Be||null===(E=Be.accounts_contacts)||void 0===E||null===(g=E.accounts)||void 0===g||null===(b=g.filter((function(e){return"CUSTOMER_OWNER"===e.account_type})))||void 0===b?void 0:b.length)||0))),l.a.createElement("li",{className:"sub-head-search-sidebar"},"Vendor Accounts"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("VENDOR"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleAccountSubsectionSearch("VENDOR")}},l.a.createElement("span",{className:"dot-icon"}),"Vendor Accounts",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(N=Be.accounts_contacts)||void 0===N||null===(y=N.accounts)||void 0===y||null===(w=y.filter((function(e){return e.account_type.includes("VENDOR")})))||void 0===w?void 0:w.length)||0))),l.a.createElement("li",{className:"sub-head-search-sidebar"},"Contacts"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("contacts"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleAccountSubsectionSearch("CONTACTS")}},l.a.createElement("span",{className:"dot-icon"}),"Contacts",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(_=Be.accounts_contacts)||void 0===_||null===(S=_.contacts)||void 0===S?void 0:S.length)||0))))),l.a.createElement(OE,{header:l.a.createElement("div",{className:"search-tab-head d-flex w-100 align-items-center justify-content-between"},"Sales",l.a.createElement("span",{className:"count-tag-col-x"},(null===Be||void 0===Be||null===(x=Be.sales)||void 0===x?void 0:x.proposal.length)+(null===Be||void 0===Be||null===(C=Be.sales)||void 0===C?void 0:C.opportunity.length)||0)),key:"2"},l.a.createElement("ul",{className:"list-inline mb-0 custom-results-list"},l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("proposals"===Ke?"highlighted-search":""),onClick:function(){return Ue.handleSalesSubsectionSearch("proposals")}},l.a.createElement("span",{className:"dot-icon"}),"Proposals",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(O=Be.sales)||void 0===O?void 0:O.proposal.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("opportunities"===Ke?"highlighted-search":""),onClick:function(){return Ue.handleSalesSubsectionSearch("opportunities")}},l.a.createElement("span",{className:"dot-icon"}),"Opportunities",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(k=Be.sales)||void 0===k?void 0:k.opportunity.length)||0))))),l.a.createElement(OE,{header:l.a.createElement("div",{className:"search-tab-head d-flex w-100 align-items-center justify-content-between"},"Operations",l.a.createElement("span",{className:"count-tag-col-x"},"0")),key:"3"},l.a.createElement("ul",{className:"list-inline mb-0 custom-results-list"},l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between"},l.a.createElement("span",{className:"dot-icon"}),"Projects",l.a.createElement("span",{className:"count-tag-col-h"},"0"))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between"},l.a.createElement("span",{className:"dot-icon"}),"Work Orders",l.a.createElement("span",{className:"count-tag-col-h"},"0"))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between"},l.a.createElement("span",{className:"dot-icon"}),"Analytics",l.a.createElement("span",{className:"count-tag-col-h"},"0"))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between"},l.a.createElement("span",{className:"dot-icon"}),"Dispatch",l.a.createElement("span",{className:"count-tag-col-h"},"0"))))),au(["ADMIN"])&&l.a.createElement(OE,{header:l.a.createElement("div",{className:"search-tab-head d-flex w-100 align-items-center justify-content-between"},"Management",l.a.createElement("span",{className:"count-tag-col-x"},(null===Be||void 0===Be||null===(j=Be.management)||void 0===j||null===(I=j.service)||void 0===I||null===(A=I.service_family)||void 0===A?void 0:A.length)+(null===Be||void 0===Be||null===(D=Be.management)||void 0===D||null===(T=D.service)||void 0===T||null===(R=T.line_item)||void 0===R?void 0:R.length)+(null===Be||void 0===Be||null===(M=Be.management)||void 0===M||null===(F=M.labor)||void 0===F?void 0:F.labor_group.length)+(null===Be||void 0===Be||null===(P=Be.management)||void 0===P||null===(V=P.labor)||void 0===V?void 0:V.employee.length)+(null===Be||void 0===Be||null===(q=Be.management)||void 0===q||null===(L=q.fleet)||void 0===L?void 0:L.fleet_family.length)+(null===Be||void 0===Be||null===(U=Be.management)||void 0===U||null===(B=U.fleet)||void 0===B?void 0:B.fleet_group.length)+(null===Be||void 0===Be||null===(W=Be.management)||void 0===W||null===(Y=W.fleet)||void 0===Y?void 0:Y.vehicle.length)+(null===Be||void 0===Be||null===(K=Be.management)||void 0===K||null===(G=K.supply)||void 0===G?void 0:G.supply_family.length)+(null===Be||void 0===Be||null===(z=Be.management)||void 0===z||null===(H=z.supply)||void 0===H?void 0:H.supply_group.length)+(null===Be||void 0===Be||null===($=Be.management)||void 0===$||null===(Q=$.supply)||void 0===Q?void 0:Q.supply.length)+(null===Be||void 0===Be||null===(J=Be.management)||void 0===J||null===(Z=J.inventory)||void 0===Z?void 0:Z.inventory_family.length)+(null===Be||void 0===Be||null===(X=Be.management)||void 0===X||null===(ee=X.inventory)||void 0===ee?void 0:ee.inventory_item.length)+(null===Be||void 0===Be||null===(ae=Be.management)||void 0===ae||null===(te=ae.inventory)||void 0===te?void 0:te.inventory_kit.length)+(null===Be||void 0===Be||null===(ne=Be.management)||void 0===ne||null===(le=ne.disposal)||void 0===le?void 0:le.disposal_family.length)+(null===Be||void 0===Be||null===(ce=Be.management)||void 0===ce||null===(ie=ce.disposal)||void 0===ie?void 0:ie.disposal.length)||0)),key:"4"},l.a.createElement("ul",{className:"list-inline mb-0 custom-results-list custom-results-list-managements-div"},l.a.createElement("li",{className:"sub-head-search-sidebar"},"Services"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("service_family"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("service_family")}},l.a.createElement("span",{className:"dot-icon"}),"Service Family",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(re=Be.management)||void 0===re||null===(se=re.service)||void 0===se||null===(oe=se.service_family)||void 0===oe?void 0:oe.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("line_items"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("line_items")}},l.a.createElement("span",{className:"dot-icon"}),"Line Items",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(me=Be.management)||void 0===me||null===(de=me.service)||void 0===de||null===(ue=de.line_item)||void 0===ue?void 0:ue.length)||0))),l.a.createElement("li",{className:"sub-head-search-sidebar"},"Labor"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("labor_group"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("labor_group")}},l.a.createElement("span",{className:"dot-icon"}),"Labor Groups",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(pe=Be.management)||void 0===pe||null===(ve=pe.labor)||void 0===ve?void 0:ve.labor_group.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("employee"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("employee")}},l.a.createElement("span",{className:"dot-icon"}),"Employees",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(he=Be.management)||void 0===he||null===(fe=he.labor)||void 0===fe?void 0:fe.employee.length)||0))),l.a.createElement("li",{className:"sub-head-search-sidebar"},"Fleet"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("fleet_families"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("fleet_families")}},l.a.createElement("span",{className:"dot-icon"}),"Fleet Families",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(Ee=Be.management)||void 0===Ee||null===(ge=Ee.fleet)||void 0===ge?void 0:ge.fleet_family.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("fleet_groups"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("fleet_groups")}},l.a.createElement("span",{className:"dot-icon"}),"Fleet Groups",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(be=Be.management)||void 0===be||null===(Ne=be.fleet)||void 0===Ne?void 0:Ne.fleet_group.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("vehicles"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("vehicles")}},l.a.createElement("span",{className:"dot-icon"}),"Vehicles",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(ye=Be.management)||void 0===ye||null===(we=ye.fleet)||void 0===we?void 0:we.vehicle.length)||0))),l.a.createElement("li",{className:"sub-head-search-sidebar"},"Supplies/Small tools"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("supply_family"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("supply_family")}},l.a.createElement("span",{className:"dot-icon"}),"Supply Families",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(_e=Be.management)||void 0===_e||null===(Se=_e.supply)||void 0===Se?void 0:Se.supply_family.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                  ".concat("supply_group"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("supply_group")}},l.a.createElement("span",{className:"dot-icon"}),"Supply Groups",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(xe=Be.management)||void 0===xe||null===(Ce=xe.supply)||void 0===Ce?void 0:Ce.supply_group.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                                                    ".concat("supply"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("supply")}},l.a.createElement("span",{className:"dot-icon"}),"Supplies/Small tools",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(Oe=Be.management)||void 0===Oe||null===(ke=Oe.supply)||void 0===ke?void 0:ke.supply.length)||0))),l.a.createElement("li",{className:"sub-head-search-sidebar"},"Inventory"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                                                    ".concat("inventory_family"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("inventory_family")}},l.a.createElement("span",{className:"dot-icon"}),"Inventory Families",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(je=Be.management)||void 0===je||null===(Ie=je.inventory)||void 0===Ie?void 0:Ie.inventory_family.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                                                    ".concat("inventory_item"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("inventory_item")}},l.a.createElement("span",{className:"dot-icon"}),"Inventory Items",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(Ae=Be.management)||void 0===Ae||null===(De=Ae.inventory)||void 0===De?void 0:De.inventory_item.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                                                    ".concat("inventory_kit"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("inventory_kit")}},l.a.createElement("span",{className:"dot-icon"}),"Inventory Kits",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(Te=Be.management)||void 0===Te||null===(Re=Te.inventory)||void 0===Re?void 0:Re.inventory_kit.length)||0))),l.a.createElement("li",{className:"sub-head-search-sidebar"},"Disposal"),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                                                    ".concat("disposal_family"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("disposal_family")}},l.a.createElement("span",{className:"dot-icon"}),"Disposal Families",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(Me=Be.management)||void 0===Me||null===(Fe=Me.disposal)||void 0===Fe?void 0:Fe.disposal_family.length)||0))),l.a.createElement("li",null,l.a.createElement(Vm.a,{className:"search-tab-head d-flex w-100 align-items-center justify-content-between\n                                                                    ".concat("disposal"===Ke?"highlighted-search":""),onClick:function(e){return Ue.handleManagementsectionSearch("disposal")}},l.a.createElement("span",{className:"dot-icon"}),"Disposal",l.a.createElement("span",{className:"count-tag-col-h"},(null===Be||void 0===Be||null===(Pe=Be.management)||void 0===Pe||null===(Ve=Pe.disposal)||void 0===Ve?void 0:Ve.disposal.length)||0))))))))),l.a.createElement("div",{className:"search-results-right-details"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 ".concat("accounts"===this.state.currentSection||Ye?"":"hide")},l.a.createElement("div",{className:"row search-table-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row search-main-header-table align-items-center justify-content-between"},l.a.createElement("div",{className:"results-div-head d-flex align-items-center w-100 justify-content-between"},this.state.heading,l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-3"},this.state.count," Results"),l.a.createElement("button",{className:"ant-btn edit-btn-summary",onClick:function(e){return Ue.handleAccountSubsectionSearch("all")}},"View All"))))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{pagination:!1,scroll:{y:450},className:"main-table-all search-result-table search-table-second border-0",columns:this.state.accountsColumns,onRow:function(e,a){return{onClick:function(a){return Ue.redirect(e,e.account_type)}}},dataSource:this.state.accountsData,size:"middle"})))),l.a.createElement("div",{className:"col-12 ".concat("sales"===this.state.currentSection||Ye?"":"hide")},l.a.createElement("div",{className:"row search-table-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row search-main-header-table align-items-center justify-content-between"},l.a.createElement("div",{className:"results-div-head d-flex align-items-center w-100 justify-content-between"},this.state.salesHeading,l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-3"},(null===(qe=this.state.salesData)||void 0===qe?void 0:qe.length)||0," Results"),l.a.createElement("button",{className:"ant-btn edit-btn-summary",onClick:function(e){return Ue.handleSalesSubsectionSearch("all")}},"View All"))))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{pagination:!1,className:"main-table-all search-result-table search-table-second border-0",columns:this.state.salesColumns,scroll:{y:266},onRow:function(e,a){return{onClick:function(a){return Ue.redirect(e,e.type)}}},dataSource:this.state.salesData,size:"middle"})))),l.a.createElement("div",{className:"col-12 ".concat("ops"===this.state.currentSection||Ye?"":"hide")},l.a.createElement("div",{className:"row search-table-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row search-main-header-table align-items-center justify-content-between"},l.a.createElement("div",{className:"results-div-head d-flex align-items-center w-100 justify-content-between"},"Operations",l.a.createElement("span",null,"0 Results")))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{pagination:!1,scroll:{y:266},className:"main-table-all search-result-table border-0",columns:[],dataSource:[],size:"middle"})))),l.a.createElement("div",{className:"col-12 ".concat("management"===this.state.currentSection||Ye?"":"hide")},au(["ADMIN"])&&l.a.createElement("div",{className:"row search-table-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row search-main-header-table align-items-center justify-content-between"},l.a.createElement("div",{className:"results-div-head d-flex align-items-center w-100 justify-content-between"},this.state.managementHeading,l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-3"},(null===(Le=this.state.managementData)||void 0===Le?void 0:Le.length)||0," ","Results"),l.a.createElement("button",{className:"ant-btn edit-btn-summary",onClick:function(e){return Ue.handleManagementsectionSearch("all")}},"View All"))))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{pagination:!1,scroll:{y:266},className:"main-table-all search-result-table border-0",columns:this.state.managementColumns,onRow:function(e,a){return{onClick:function(a){return Ue.redirect(e,e.type)}}},dataSource:this.state.managementData,size:"middle"}))))))))))))}}]),t}(n.Component),jE=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{setBreadcrumb:Uv})(kE),IE=t(1069),AE=Hv.a.RangePicker,DE={labelCol:{span:24},wrapperCol:{span:24}},TE=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleSubmit=function(a){var t,n,l,c;a.date_created&&(t=hd()(a.date_created[0]._d).format("YYYY-MM-DD"),n=hd()(a.date_created[1]._d).format("YYYY-MM-DD")),a.last_activity_date&&(l=hd()(a.last_activity_date[0]._d).format("YYYY-MM-DD"),c=hd()(a.last_activity_date[1]._d).format("YYYY-MM-DD"));var i={start:t,end:n,start_modified:l,end_modified:c};e.props.fetchData(i)},e.resetFields=function(){e.formRef.current.resetFields(),e.props.fetchData()},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"filter-main-card row mx-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},DE,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0 type-working-checkbox"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"date_created",label:"Date Created",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(AE,null))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"last_activity_date",label:"Last Activity Date",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(AE,null))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"footer-row-main-fix justify-content-between border-0 mt-0 mx-0 row"},l.a.createElement(Vm.a,{className:"shadow-none",onClick:this.resetFields},"Clear"),l.a.createElement(Vm.a,{type:"primary",htmlType:"submit"},"Apply Filter")))))))}}]),t}(n.Component),RE=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1},e.filterDataPop=function(){return l.a.createElement(TE,{fetchData:e.props.fetchData})},e.handleVisibleChange=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 align-items-center mini-header-filter-list-grid-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-opportunities-div"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.props.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(IE.a,{overlayClassName:"popover-main-all filter-popover",content:this.filterDataPop,title:!1,trigger:"click",visible:this.state.visible,placement:"bottom",onVisibleChange:this.handleVisibleChange},l.a.createElement(Vm.a,{className:"filter-btn d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter"))),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(qm.a,{to:zm.dashboard.owner_account.create,className:"new-opportunity-btn d-flex align-items-center justify-content-center text-capitalize"},"+ Create Site Manager Account"))))))}}]),t}(n.Component),ME=function(e){var a=[{title:"Account Name",dataIndex:"name",render:function(e){return l.a.createElement("div",{className:"name-id-details"},e)},defaultSortOrder:"ascend",sorter:!0,key:"name"},{title:"City",dataIndex:"main_address",key:"city",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},(null===e||void 0===e?void 0:e.city)||"-")}},{title:"State",dataIndex:"main_address",key:"state",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},(null===e||void 0===e?void 0:e.state)||"-")}},{title:"Last Activity Date",dataIndex:"modified",render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:!0,key:"modified"}];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table"},l.a.createElement(fv.a,{scroll:{y:450},className:"main-table-all",columns:a,dataSource:e.data,pagination:e.pagination,onChange:e.handleTableChange,size:"middle",loading:e.loading,locale:e.locale,rowKey:function(e){return e.id},onRow:function(e,a){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.owner_account.view,{id:e.id}))}}}})))},FE=Object(Lm.b)(null,{setBreadcrumb:Uv})((function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(!0),s=Object(yp.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)({current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=Object(n.useState)(null),f=Object(yp.a)(h,2),E=f[0],g=f[1],b=Object(n.useState)({start:"",end:"",start_modified:"",end_modified:""}),N=Object(yp.a)(b,2),y=N[0],w=N[1];Object(n.useEffect)((function(){var a=[{title:"Site Manager Accounts",url:zm.dashboard.owner_account.self}];e.setBreadcrumb(a);_({ordering:"name",page:1})}),[E,y]);var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(!0),e.ordering||(e.ordering="-modified"),mp(Object(wu.a)(Object(wu.a)({},e),{},{page:e.page||1,search:E},y)).then((function(a){i(a.data.results),m(!1),v(Object(wu.a)(Object(wu.a)({},p),{},{current:e.page||1,total:a.data.count}))})).catch((function(e){m(!1),e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(RE,{onSearch:lu((function(e){g(e.target.value)}),1e3),fetchData:function(e){return function(e){w(Object(wu.a)({},e))}(e)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement(ME,{data:c,locale:o?{emptyText:" "}:{emptyText:l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.person_gray_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"no-data-main-tg mb-0"},"No Site Manager Accounts"))))},loading:o,pagination:p,handleTableChange:function(e,a,t){var n="";"descend"===t.order&&(n="-");var l={page:e.current};t.columnKey?l.ordering="".concat(n).concat(t.columnKey):l.ordering="-modified",_(l)}})))}));function PE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.family");return id(a,e)}function VE(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("fleet.family",{id:e});return id(t,a)}function qE(e){return od(ad("fleet.fleet_group"),e)}function LE(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("fleet.fleet_group",{id:e});return id(t,a)}function UE(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("fleet.fleet_kit",{id:e});return id(t,a)}function BE(e,a){return md(ad("fleet.fleet_group",{id:e}),a)}function WE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.fleet_group");return id(a,e)}function YE(e){return od(ad("fleet.vehicle"),e)}function KE(e){return od(ad("fleet.fleet_kit"),e)}function GE(e,a){return md(ad("fleet.fleet_kit",{id:e}),a)}function zE(e,a){return md(ad("fleet.vehicle",{id:e}),a)}function HE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.vehicle");return id(a,e)}function $E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.fleet_kit");return id(a,e)}function QE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.dispatch_vehicle");return id(a,e)}function JE(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("fleet.vehicle",{id:e});return id(t,a)}function ZE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.region");return id(a,e)}function XE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.block");return id(a,e)}function eg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.duty");return id(a,e)}function ag(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.weight");return id(a,e)}function tg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.internal_location");return id(a,e)}function ng(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("labor.internal_location",{id:e});return md(t,a)}function lg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.internal_location");return od(a,e)}function cg(e){return od(ad("fleet.vehicle_document"),e)}function ig(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("fleet.vehicle_document");return id(a,e)}function rg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("service.family");return id(a,e)}function sg(e){return id(ad("service.family",{id:e}))}function og(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("service.line_item");return id(a,e)}function mg(e){return id(ad("service.line_item",{id:e}))}function dg(e){return od(ad("service.line_item"),e)}function ug(e,a){return md(ad("service.line_item",{id:e}),a)}function pg(e){return dd(ad("service.line_item",{id:e}))}function vg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("service.resource");return id(a,e)}function hg(e){return dd(ad("service.resource",{id:e}))}function fg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("service.family_item");return id(a,e)}function Eg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("service.pricing");return id(a,e)}function gg(e){return od(ad("service.pricing"),e)}function bg(e,a){return md(ad("service.pricing",{id:e}),a)}function Ng(e){return dd(ad("service.pricing",{id:e}))}function yg(e){return id(ad("service.item_pricing"),e)}function wg(e){return id(ad("service.table_data"),e)}function _g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("disposal.family");return id(a,e)}function Sg(e){return id(ad("disposal.family",{id:e}))}function xg(e,a){return md(ad("disposal.family",{id:e}),a)}function Cg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("disposal.disposal");return id(a,e)}function Og(e){return id(ad("disposal.disposal",{id:e}))}function kg(e){return od(ad("disposal.disposal"),e)}function jg(e,a){return md(ad("disposal.disposal",{id:e}),a)}function Ig(e){return dd(ad("disposal.disposal",{id:e}))}function Ag(e){return od(ad("disposal.documents"),e)}function Dg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("disposal.documents");return id(a,e)}function Tg(){return id(ad("disposal.unit_type"))}function Rg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("disposal.unit_name");return id(a,e)}function Mg(e){return od(ad("disposal.custom_measurement"),e)}function Fg(e){return dd(ad("disposal.custom_measurement",{id:e}))}function Pg(e,a){return md(ad("disposal.custom_measurement",{id:e}),a)}function Vg(e){return id(ad("disposal.disposal_location"),e)}function qg(e){return od(ad("disposal.disposal_location"),e)}function Lg(e){return dd(ad("disposal.disposal_location_price",{id:e}))}function Ug(e){return dd(ad("disposal.disposal_vendor_price",{id:e}))}function Bg(e,a){return md(ad("disposal.disposal_location_price",{id:e}),a)}function Wg(e,a){return md(ad("disposal.disposal_vendor_price",{id:e}),a)}function Yg(e,a){return md(ad("disposal.measurement_qty",{id:e}),a)}function Kg(e){return dd(ad("disposal.measurement_qty",{id:e}))}function Gg(e){return id(ad("disposal.disposal_vendor"),e)}function zg(e){return od(ad("disposal.disposal_vendor"),e)}function Hg(e,a){return md(ad("disposal.measurement_vendor_qty",{id:e}),a)}function $g(e){return dd(ad("disposal.measurement_vendor_qty",{id:e}))}var Qg=t(1070),Jg=t(1057),Zg=t(18),Xg=ku.a.Option,eb=function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(0),s=Object(yp.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)(1),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=Object(n.useState)(""),f=Object(yp.a)(h,2),E=f[0],g=f[1],b=Object(n.useState)(!1),N=Object(yp.a)(b,2),y=N[0],w=N[1],_=function(a){w(!0),e.apiCall(Object(wu.a)(Object(wu.a)({search:E},a),{},{page:p},e.initial)).then((function(a){e.tierSet&&e.tierSet(a.data.results),i(a.data.results),m(a.data.count),w(!1)}))},S=function(){w(!0),e.apiCall(Object(wu.a)({search:E,page:p+1},e.initial)).then((function(e){i([].concat(Object(Ou.a)(c),Object(Ou.a)(e.data.results))),m(e.data.count),w(!1)})),v(p+1)};return l.a.createElement(ku.a,{disabled:e.disabled,onFocus:function(){return _(e.kwargs)},onChange:function(a){e.setLoadMoreValue(a)},style:{width:"100%"},showSearch:!0,labelInValue:!0,notFoundContent:y?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,placeholder:"Select",onSearch:lu((function(a){g(a),v(1),_(Object(wu.a)(Object(wu.a)({},e.kwargs),{},{search:a}))}),300),suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select}),dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,c.length!==o&&l.a.createElement(Qg.b,{className:"w-100 d-flex align-items-center justify-content-center",align:"center",style:{padding:"5px 10px",borderTop:"1px solid #f2f2f2"}},l.a.createElement(Jg.a.Link,{onClick:S,style:{whiteSpace:"nowrap"}},"Load More")))}},c.map((function(a,t){return l.a.createElement(Xg,{key:a.id,value:Zg.get(a,e.value)},Zg.get(a,e.label))})))},ab={labelCol:{span:24},wrapperCol:{span:24}},tb=ku.a.Option,nb=ku.a.OptGroup,lb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).fetchRegion=function(){n.setState({fetching:!0});var e=n.state,a=e.page,t=e.search,l=e.kwargs;ZE(Object(wu.a)({page:a,search:t},l.region)).then((function(e){1===n.state.page?n.setState({regions:e.data.results,fetching:!1}):n.setState((function(a){return{regions:[].concat(Object(Ou.a)(a.regions),Object(Ou.a)(e.data.results))}}))})).catch((function(e){td(e),n.setState({fetching:!1})}))},n.fetchLinePackage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({loading:!0}),rg(Object(wu.a)(Object(wu.a)({},e),{},{page:e.page||1})).then((function(a){n.setState({serviceFamilies:a.data.results,pagination:Object(wu.a)(Object(wu.a)({},n.state.pagination),{},{current:e.page||1,total:a.data.count}),loading:!1})})).catch((function(e){td(e),n.setState({loading:!1})}))},n.fetchLineItem=function(){var e,a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(n.setState({loading:!0}),"LINE_ITEM"===t.tierType)?(t.tier_type="SERVICE_LINE_ITEM",t.parent=null===(e=n.formRef.current.getFieldValue("tier"))||void 0===e?void 0:e.value):(t.tier_type="SERVICE_TIER",t.parent=null===(a=n.formRef.current.getFieldValue("family"))||void 0===a?void 0:a.value);og(Object(wu.a)(Object(wu.a)({},t),{},{page:t.page||1})).then((function(e){"LINE_ITEM"===t.tierType?n.setState({items:e.data.results,pagination:Object(wu.a)(Object(wu.a)({},n.state.pagination),{},{current:t.page||1,total:e.data.count}),loading:!1}):n.setState({tiers:e.data.results,pagination:Object(wu.a)(Object(wu.a)({},n.state.pagination),{},{current:t.page||1,total:e.data.count}),loading:!1})})).catch((function(e){td(e),n.setState({loading:!1})}))},n.fetchServiceVariants=function(e){var a,t,l=null===(a=n.formRef.current.getFieldValue("service"))||void 0===a?void 0:a.value,c=null===(t=n.formRef.current.getFieldValue("region"))||void 0===t?void 0:t.value;n.setState({loading:!0}),Eg(Object(wu.a)(Object(wu.a)({},e),{},{service:l,region:c})).then((function(e){n.setState({serviceVariants:e.data.results,loading:!1})})).catch((function(e){n.setState({loading:!1}),td(e)}))},n.fetchUniqueServiceVariants=function(e){var a,t,l=null===(a=n.formRef.current)||void 0===a?void 0:a.getFieldsValue("family");(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("service.pricing_unique_variants");return id(a,e)})(e=(null===(t=n.formRef.current)||void 0===t?void 0:t.getFieldValue("service"))?Object(wu.a)(Object(wu.a)({},e),{},{item:n.state.parent}):(null===l||void 0===l?void 0:l.tier_1)?Object(wu.a)(Object(wu.a)({},e),{},{tier_id:n.state.parent}):Object(wu.a)(Object(wu.a)({},e),{},{parent:n.state.parent})).then((function(e){n.setState({variantsData:e.data})})).catch((function(e){td(e)}))},n.fetchDisplayName=function(e){var a,t,l=null===(a=n.formRef.current)||void 0===a?void 0:a.getFieldsValue("family");(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("service.unique_display_name");return id(a,e)})(e=(null===(t=n.formRef.current)||void 0===t?void 0:t.getFieldValue("service"))?Object(wu.a)(Object(wu.a)({},e),{},{item:n.state.parent}):(null===l||void 0===l?void 0:l.tier_1)?Object(wu.a)(Object(wu.a)({},e),{},{tier_id:n.state.parent}):Object(wu.a)(Object(wu.a)({},e),{},{parent:n.state.parent})).then((function(e){n.setState({displayName:e.data})})).catch((function(e){td(e)}))},n.getUnitName=function(e){n.setState({loading:!0}),Rg(e).then((function(e){var a={};e.data.forEach((function(e){a[e.unit_type.name]||(a[e.unit_type.name]=[]),a[e.unit_type.name].push(e)})),n.setState({allOptions:a})})).catch((function(e){td(e)})).finally((function(){n.setState({loading:!1})}))},n.handleInputsBlur=function(e){var a=e.target.value;if(a){var t=a.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});n.setState(Object(zv.a)({},e.target.name,l.format(t)))}},n.handleApplyFilter=function(){var e,a,t,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g={family:null===(e=n.formRef.current.getFieldValue("family"))||void 0===e?void 0:e.value,familyName:null===(a=n.formRef.current.getFieldValue("family"))||void 0===a?void 0:a.label,tier:n.state.endTier,tierName:null===(t=n.formRef.current.getFieldValue("tier"))||void 0===t?void 0:t.label,daily_low:null===(l=n.state.daily_low)||void 0===l?void 0:l.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),daily_high:null===(c=n.state.daily_high)||void 0===c?void 0:c.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),hourly_low:null===(i=n.state.hourly_low)||void 0===i?void 0:i.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),hourly_high:null===(r=n.state.hourly_high)||void 0===r?void 0:r.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),unit_low:null===(s=n.state.unit_low)||void 0===s?void 0:s.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),unit_high:null===(o=n.state.unit_high)||void 0===o?void 0:o.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),unit:null===(m=n.formRef.current.getFieldValue("unit"))||void 0===m?void 0:m.value,unitName:null===(d=n.formRef.current.getFieldValue("unit"))||void 0===d?void 0:d.label,variant:null===(u=n.formRef.current.getFieldValue("variant"))||void 0===u?void 0:u.label,service:null===(p=n.formRef.current.getFieldValue("service"))||void 0===p?void 0:p.value,serviceName:null===(v=n.formRef.current.getFieldValue("service"))||void 0===v?void 0:v.label,display_name:null===(h=n.formRef.current.getFieldValue("display_name"))||void 0===h?void 0:h.label,region:null===(f=n.formRef.current.getFieldValue("region"))||void 0===f?void 0:f.value,regionName:null===(E=n.formRef.current.getFieldValue("region"))||void 0===E?void 0:E.label};n.props.setFilterObj(g,n.state.breadArr.map((function(e){return e.label}))),n.props.onClose(),n.setState({endTier:null})},n.clearValues=function(){n.formRef.current.resetFields(),n.setState({daily_low:null,daily_high:null,unit_low:null,unit_high:null,hourly_high:null,hourly_low:null,kwargs:{},breadArr:[],serviceID:null}),n.state.tiers.length=1,n.props.setFilterObj(null)},n.handleInputsChange=function(e){n.setState(Object(zv.a)({},e.target.name,e.target.value))},n.setLoadMoreValue=function(e,a,t){var l=n.state,c=l.kwargs,i=l.breadArr,r=e.toString().substring(0,4);if(n.state.removeVal&&n.setState({parent:a.value}),"family"===e)c.tier_1={parent:a.value},n.setState({serviceID:a.value});else if("tier"===r){var s;if("remove"!=t&&(i.length===n.state.tiers.length?i[i.length-1]=a:i.push(a)),n.setState({breadArr:i}),c.service={tier_id:null===(s=i[i.length-1])||void 0===s?void 0:s.value},n.state.tiers.length>=1&&n.state.tierData.length>0){var o,m=null===(o=n.state.tierData)||void 0===o?void 0:o.find((function(e){return e.id==a.value}));n.setState({addDisabled:null===m||void 0===m?void 0:m.child_exists}),c["tier_".concat(n.state.tiers.length)]={parent:(null===m||void 0===m?void 0:m.parent_id)||n.state.tierValue},n.setState({endTier:null===m||void 0===m?void 0:m.id,parentId:null===m||void 0===m?void 0:m.parent_id})}}else"service"===e?c.region={service_id:a.value}:"region"===e&&(c.variant={region:a.value});n.setState({kwargs:c,parent:n.state.parent}),n.formRef.current.setFieldsValue(Object(zv.a)({},e,a)),n.setState({parent:a.value})},n.handleTiers=function(e){if("remove"===e){var a;n.setState({endTier:n.state.parentId});n.state.tiers.pop();n.state.breadArr.pop(),n.state.kwargs.service={tier_id:null===(a=n.state.breadArr[n.state.breadArr.length-1])||void 0===a?void 0:a.value},n.setState({tiers:n.state.tiers}),n.setState({removeVal:!0}),1==n.state.tiers.length&&n.getLineItemData()}else{n.state.tiers.push(n.state.tiers.length+1);n.setState({tiers:n.state.tiers})}},n.getLineItemData=function(){og({parent:n.state.serviceID,page:1,tier_type:"SERVICE_TIER"}).then((function(e){n.tierSet(e.data.results);var a={value:n.state.parentId};n.setLoadMoreValue("tier",a,"remove")})).catch((function(e){td(e)}))},n.handleParams=function(e){var a=n.state.serviceObj;switch(e){case"service":return{tier_type:"SERVICE_LINE_ITEM",parent:null===a||void 0===a?void 0:a.tier};case"tier":return{tier_type:"SERVICE_TIER",parent:null===a||void 0===a?void 0:a.family};case"variant":var t,l;return{service:null===a||void 0===a?void 0:a.service,region:null===(t=n.formRef.current)||void 0===t||null===(l=t.getFieldValue("region"))||void 0===l?void 0:l.value};default:return}},n.tierSet=function(e){n.setState({tierData:e})},n.state={regions:[],serviceFamilies:[],serviceVariants:[],displayName:[],items:[],loading:!1,allOptions:[],filterObj:null,page:1,search:"",kwargs:{},tiers:[1],keyEnd:0,parent:null,endTier:null,removeVal:!1,tierData:[],addDisabled:null,parentId:null,tierValue:null,breadArr:[],serviceID:null,variantsData:[]},n.formRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a){e.filterApplied!==this.props.filterApplied&&!this.props.filterApplied&&this.formRef.current&&this.clearValues()}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.regions,c=t.allOptions,i=t.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,title:"Filter",visible:this.props.visible,onOk:this.props.onClose,closable:!0,onClose:this.props.onClose,onCancel:this.clearValues,className:"main-all-form-modal main-drawer-div drawer-update",width:"400px",placement:"right",footer:l.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"}},l.a.createElement(Vm.a,{className:"apply-filter-update",onClick:this.clearValues,style:{marginRight:8}},"Clear"),l.a.createElement(Vm.a,{className:"apply-filter-update",onClick:this.handleApplyFilter,type:"primary"},"Apply Filter"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please search and select to filter information."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},ab,{className:"main-inner-form",ref:this.formRef}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"family",label:"Service Family",rules:[{required:!1}],className:"position-relative"},l.a.createElement(eb,{disabled:!!(null===(e=this.formRef.current)||void 0===e?void 0:e.getFieldsValue("family").family),setLoadMoreValue:function(e){return a.setLoadMoreValue("family",e)},apiCall:rg,value:"parent.id",label:"name"}))),l.a.createElement("div",{className:"col-12"},this.state.tiers.map((function(e,t){var n,c;return l.a.createElement(Fm.a.Item,{name:"tier_".concat(e),label:1==e?"Tier Name":"",rules:[{required:!1}],className:"position-relative"},l.a.createElement(eb,{disabled:e!==a.state.tiers.length&&!!(null===(n=a.formRef.current)||void 0===n?void 0:n.getFieldsValue("tier_".concat(e))["tier_".concat(e)]),setLoadMoreValue:function(t){return a.setLoadMoreValue("tier_".concat(e),t,e)},initial:{tier_type:"SERVICE_TIER"},apiCall:og,tierSet:a.tierSet,value:"id",label:"name",kwargs:{parent:1===e?a.state.serviceID:null===(c=a.state.breadArr[t-1])||void 0===c?void 0:c.value}}))}))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0 text-right"},l.a.createElement("li",{className:"list-inline-item p-0"},l.a.createElement(Vm.a,{className:"remove-tier",onClick:this.handleTiers,disabled:!this.state.addDisabled},"Add More")),l.a.createElement("li",{className:"list-inline-item p-0"},l.a.createElement(Vm.a,{className:"remove-tier",onClick:function(){return a.handleTiers("remove")},disabled:1===this.state.tiers.length},"Remove")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"service",label:"Service Name",rules:[{required:!1}],className:"position-relative"},l.a.createElement(eb,{initial:{tier_type:"SERVICE_LINE_ITEM",depth:1},setLoadMoreValue:function(e){return a.setLoadMoreValue("service",e)},apiCall:og,value:"id",label:"name",kwargs:this.state.kwargs.service,type:"LINE_ITEM"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"region",label:"Region",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,filterOption:!1,showSearch:!0,onChange:function(e){return a.setLoadMoreValue("region",e)},onPopupScroll:function(e){e.persist();var t=e.target;t.scrollTop+t.offsetHeight>=.9*t.scrollHeight&&2!==a.state.page&&a.setState({page:2},(function(){return a.fetchRegion()}))},notFoundContent:i?l.a.createElement(Wv.a,{size:"small"}):null,onSearch:function(e){a.setState({page:1,search:e},(function(){a.fetchRegion()}))},onFocus:function(){a.setState({page:1},(function(){a.fetchRegion()}))},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},n.map((function(e){return l.a.createElement(tb,{key:e.id,value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(Fm.a.Item,{name:"variant",label:"Service Variant Name",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,notFoundContent:i?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onSearch:function(e){return a.fetchUniqueServiceVariants({search:e})},onFocus:function(){return a.fetchUniqueServiceVariants()},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},this.state.variantsData.map((function(e){return l.a.createElement(tb,{value:e,key:e},e)})))),l.a.createElement("small",{className:"serviceVNote"},"e.g. Service Type, etc")),l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(Fm.a.Item,{name:"display_name",label:"Service Variant Display Name",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,notFoundContent:i?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onSearch:function(e){return a.fetchDisplayName({search:e})},onFocus:function(){return a.fetchDisplayName()},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},this.state.displayName.map((function(e){return l.a.createElement(tb,{value:e,key:e},e)})))),l.a.createElement("small",{className:"serviceVNote"},"e.g. Service Type, etc")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"daily_low",label:"Daily Price",rules:[{required:!1}],className:"position-relative"},l.a.createElement("div",{className:"row position-relative"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Pm.a,{placeholder:"$0.00",name:"daily_low",value:this.state.daily_low,onChange:this.handleInputsChange,onBlur:this.handleInputsBlur})),l.a.createElement("span",{className:"dashed-line position-absolute"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Pm.a,{placeholder:"$0.00",name:"daily_high",value:this.state.daily_high,onChange:this.handleInputsChange,onBlur:this.handleInputsBlur}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"hourly_price",label:"Hourly Price",rules:[{required:!1}],className:"position-relative"},l.a.createElement("div",{className:"row position-relative"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Pm.a,{placeholder:"$0.00",name:"hourly_low",value:this.state.hourly_low,onChange:this.handleInputsChange,onBlur:this.handleInputsBlur})),l.a.createElement("span",{className:"dashed-line position-absolute"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Pm.a,{placeholder:"$0.00",name:"hourly_high",value:this.state.hourly_high,onChange:this.handleInputsChange,onBlur:this.handleInputsBlur}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"unit_price",label:"Unit Price",rules:[{required:!1}],className:"position-relative"},l.a.createElement("div",{className:"row position-relative"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Pm.a,{placeholder:"$0.00",name:"unit_low",value:this.state.unit_low,onChange:this.handleInputsChange,onBlur:this.handleInputsBlur})),l.a.createElement("span",{className:"dashed-line position-absolute"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Pm.a,{placeholder:"$0.00",name:"unit_high",value:this.state.unit_high,onChange:this.handleInputsChange,onBlur:this.handleInputsBlur}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"unit",label:"Unit",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,filterOption:!1,showSearch:!0,notFoundContent:i?l.a.createElement(Wv.a,{size:"small"}):null,onSearch:function(e){return a.getUnitName({search:e})},onFocus:function(){return a.getUnitName()},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},Object.entries(c).map((function(e,a,t){return l.a.createElement(nb,{key:e&&e[0],value:e&&e[0],label:e&&e[0],className:"kit-uom-optgroup"},e&&e[1].map((function(e){return l.a.createElement(tb,{key:e.id,value:e.id,className:"text-lowercase"},e.name)})))})))))))))))}}]),t}(n.Component),cb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,visibleFilter:!1},e.filterDataPop=function(){return l.a.createElement(TE,{fetchData:e.props.fetchData})},e.handleVisibleChange=function(a){e.setState({visible:a})},e.filterClose=function(a){e.setState({visibleFilter:a})},e.checkShowBtn=function(){switch(e.props.buttonName){case"Create Service":case"Create Disposal Inventory":return!1;default:return!0}},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.buttonLink,n=a.buttonName,c=(a.createButtonAction,a.hideDateFilter),i=a.FILTER_NEW;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 align-items-center mini-header-filter-list-grid-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-opportunities-div"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.props.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement(l.a.Fragment,null,i?l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(Vm.a,{onClick:function(){return e.filterClose(!0)},className:"filter-btn d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter")):!c&&l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(IE.a,{overlayClassName:"popover-main-all filter-popover",content:this.filterDataPop,title:!1,trigger:"click",visible:this.state.visible,placement:"bottom",onVisibleChange:this.handleVisibleChange},l.a.createElement(Vm.a,{className:"filter-btn d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter")))),this.checkShowBtn()&&l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(qm.a,{to:t,className:"new-opportunity-btn d-flex align-items-center justify-content-center text-capitalize"},n))))),l.a.createElement(lb,{visible:this.state.visibleFilter,onClose:function(){return e.filterClose(!1)},setFilterObj:this.props.setFilterObj,filterApplied:this.props.filterApplied}))}}]),t}(n.Component),ib=function(){var e=Object(n.useState)([]),a=Object(yp.a)(e,2),t=a[0],c=a[1],i=Object(n.useState)({current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}),r=Object(yp.a)(i,2),s=r[0],m=r[1],d=Object(n.useState)(!1),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=Object(n.useState)(null),f=Object(yp.a)(h,2),E=f[0],g=f[1],b=Object(n.useState)({start:"",end:"",start_modified:"",end_modified:""}),N=Object(yp.a)(b,2),y=N[0],w=N[1],_=[{title:"Site Name",dataIndex:"name",sorter:!0,render:function(e){return e||"-"},key:"name"},{title:"Site manager Account",dataIndex:"account",sorter:!0,key:"account",render:function(e){return l.a.createElement("div",null,null===e||void 0===e?void 0:e.name)}},{title:"Address",render:function(e){return l.a.createElement("div",null,"".concat((null===e||void 0===e?void 0:e.apartment)||"")," ",e.street_address||"-",l.a.createElement("br",null),e.city||"-"," ",e.city&&"".concat(e.city||"",",")," ",e.state||"",l.a.createElement("br",null),e.zip_code||""," ",e.country||"")}},{title:"Email Address",dataIndex:"email",sorter:!0,key:"email",render:function(e){return l.a.createElement("div",null,e||"-")}},{title:"Phone Number",dataIndex:"phone",sorter:!0,key:"phone",render:function(e){return l.a.createElement("div",null,e||"-")}}];Object(n.useEffect)((function(){S({page:1})}),[E,y]);var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(!0),e.ordering||(e.ordering="name"),hp(Object(wu.a)(Object(wu.a)({},e),{},{page:e.page||1,search:E},y)).then((function(a){c(a.data.results),v(!1),m(Object(wu.a)(Object(wu.a)({},s),{},{current:e.page||1,total:a.data.count}))})).catch((function(e){td(e)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(cb,{buttonLink:zm.dashboard.owner_account.site_account.create,buttonName:"+ Create Site",onSearch:lu((function(e){g(e.target.value)}),1e3),fetchData:function(e){return function(e){w(Object(wu.a)({},e))}(e)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table customer-account-table"},l.a.createElement(fv.a,{scroll:{y:450},locale:p?{emptyText:" "}:{emptyText:l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"no-data-main-tg mb-0"},"No Sites"))))},className:"main-table-all",columns:_,dataSource:t,pagination:s,onChange:function(e,a,t){var n="";"descend"===t.order&&(n="-");var l={page:e.current};t.columnKey?l.ordering="".concat(n).concat(t.columnKey):l.ordering="name",S(l)},loading:p,size:"middle",onRow:function(e){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.owner_account.site_account.view,{id:e.id}))}}}}))))))},rb=vf.a.TabPane,sb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(rb,{tab:"Site Manager Accounts",key:"1"},l.a.createElement(FE,null)),l.a.createElement(rb,{tab:"Sites",key:"2"},l.a.createElement(ib,null)))))}}]),t}(n.Component),ob=ku.a.Option,mb=Pm.a.TextArea,db={labelCol:{span:24},wrapperCol:{span:24}},ub=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={buttonLoading:!1,industry:[],page:1},e.formRef=l.a.createRef(),e.onSubmit=function(a){var t,n;e.setState({buttonLoading:!0});var l,c,i=Object(wu.a)(Object(wu.a)({},a),{},{industry:null===(t=a.industry)||void 0===t?void 0:t.value,account_source:a.account_source?a.account_source:null});(null===(n=e.props)||void 0===n?void 0:n.account)?op(null===(l=e.props)||void 0===l||null===(c=l.account)||void 0===c?void 0:c.id,i).then((function(a){Mm.b.success("Account Updated Successfully"),e.props.setAccount(a.data,2),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})})):sp(Object(wu.a)(Object(wu.a)({},a),{},{industry:a.industry?a.industry.value:null,account_source:a.account_source?a.account_source:null})).then((function(a){Mm.b.success("Account Created Successfully"),e.props.setAccount(a.data,2),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))},e.getIndustries=function(){Np({page:e.state.page}).then((function(a){1===e.state.page?e.setState({industry:a.data.results}):e.setState((function(e){return{industry:[].concat(Object(Ou.a)(e.industry),Object(Ou.a)(a.data.results))}}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){if(this.props.match.params.id){var e,a,t,n,l,c=Object(wu.a)({},this.props.account);dp(this.props.match.params.id).then((function(e){c.account_type=e.data.account_type})),c.account_type===qp&&(c.account_type=qp),this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},c),{},{industry:(null===(e=this.props.account)||void 0===e?void 0:e.industry)?{value:null===(a=this.props.account)||void 0===a||null===(t=a.industry)||void 0===t?void 0:t.id,label:"".concat(null===(n=this.props.account)||void 0===n||null===(l=n.industry)||void 0===l?void 0:l.title)}:void 0}))}this.getIndustries()}},{key:"componentDidUpdate",value:function(e,a,t){if(e.account!==this.props.account){var n,l,c,i,r=Object(wu.a)({},this.props.account);r.account_type===qp&&(r.account_type=qp),this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},r),{},{industry:(null===r||void 0===r?void 0:r.industry)?{value:null===(n=this.props.account)||void 0===n||null===(l=n.industry)||void 0===l?void 0:l.id,label:"".concat(null===(c=this.props.account)||void 0===c||null===(i=c.industry)||void 0===i?void 0:i.title)}:void 0}))}}},{key:"render",value:function(){var e=this,a=this.state.buttonLoading;this.props.account;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information here. "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit},db,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Account Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{initialValue:"SITE_OWNER",className:"account-type-item",name:"account_type",label:"Account Type *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{disabled:!0,showArrow:!1,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Payment Term"},l.a.createElement(ob,{value:"CUSTOMER"},"Billing"),l.a.createElement(ob,{value:"SITE_OWNER"},"Site Manager"),l.a.createElement(ob,{value:"CUSTOMER_OWNER"},"Billing, Site Manager")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"industry",label:"Industry",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&e.state.page<3&&e.setState({page:e.state.page+1},(function(){return e.getIndustries()}))}}," ",this.state.industry.map((function(e){return l.a.createElement(ob,{value:e.id},e.title)}))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"website",label:"Website",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"www.website.com"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_source",label:"Account Source",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder account-source-div"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(ob,{value:"ADVERTISEMENT"},"Advertisement"),l.a.createElement(ob,{value:"CONSTRUCTCONNECT"},"ConstructConnect"),l.a.createElement(ob,{value:"WORD_OF_MOUTH"},"Word of Mouth"),l.a.createElement(ob,{value:"MARKETING_ASSISTANT"},"Marketing Assistant")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"note",label:"Note",rules:[{message:"this field is required"}]},l.a.createElement(mb,{placeholder:"Type something",rows:6,style:{height:"auto",paddingTop:15}}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:a,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),pb=Object(r.withRouter)(ub),vb=(ku.a.Option,{labelCol:{span:24},wrapperCol:{span:24}}),hb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={selectedSite:null,sites:[],county:[],updateMainState:null,checked:!1},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{onClick:function(){return e.handleEdit(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit")))},e.handleEdit=function(a){e.setState({selectedSite:a}),e.formRef.current.setFieldsValue(Object(wu.a)({},a))},e.handleRemove=function(a){gp(a.id).then((function(t){Mm.b.success("Site Removed Successfully"),e.fetchSites(),a.id===e.state.selectedSite.id&&(e.formRef.current.resetFields(),e.setState({selectedSite:null}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchSites=function(){e.props.match.params.id?hp({account:e.props.match.params.id}).then((function(a){e.setState({sites:a.data.results},(function(){return e.props.getSiteDetail(e.state.sites)}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):hp({account:e.props.account.id}).then((function(a){e.setState({sites:a.data.results},(function(){return e.props.getSiteDetail(e.state.sites)}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.phoneNumberValidate=function(e,a,t){a.toString().length<10?t("minimum digits should be 10"):t()},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e.handleCheckChange=function(a){e.setState({checked:a.target.checked},(function(){var a,t,n,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g;e.state.checked&&e.formRef.current.setFieldsValue({street_address:null===(a=e.props.address)||void 0===a||null===(t=a.main)||void 0===t?void 0:t.street_address,apartment:null===(n=e.props.address)||void 0===n||null===(l=n.main)||void 0===l?void 0:l.apartment,county:null===(c=e.props.address)||void 0===c||null===(i=c.main)||void 0===i?void 0:i.county,city:null===(r=e.props.address)||void 0===r||null===(s=r.main)||void 0===s?void 0:s.city,state:null===(o=e.props.address)||void 0===o||null===(m=o.main)||void 0===m?void 0:m.state,zip_code:null===(d=e.props.address)||void 0===d||null===(u=d.main)||void 0===u?void 0:u.zip_code,country:(null===(p=e.props.address)||void 0===p||null===(v=p.main)||void 0===v?void 0:v.country)||"United States",email:null===(h=e.props.address)||void 0===h||null===(f=h.main)||void 0===f?void 0:f.email,phone:null===(E=e.props.address)||void 0===E||null===(g=E.main)||void 0===g?void 0:g.phone})}))},e.onSubmit=function(a){a.account=e.props.account.id,e.state.selectedSite?Ep(a,e.state.selectedSite.id).then((function(a){Mm.b.success("Site Updated Successfully"),e.setState({selectedSite:null}),e.formRef.current.resetFields(),e.fetchSites()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):vp(a).then((function(a){Mm.b.success("Site Created Successfully"),e.formRef.current.resetFields(),e.fetchSites()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleSubmit=function(){Mm.b.success("Account Updated Successfully!"),e.props.setAccount(e.props.account,4)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&this.fetchSites(),this.state.selectedSite||this.formRef.current.setFieldsValue({country:"United States"}),Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(e){td(e)}))}},{key:"componentDidUpdate",value:function(){this.state.selectedSite||this.formRef.current.setFieldsValue({country:"United States"})}},{key:"render",value:function(){var e=this,a=this.state,t=(a.selectedSite,a.county),n=a.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all related sites here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef,hideRequiredMark:!0},vb,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",initialValue:"".concat(this.props.account.name," Site"),label:"Site Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Site Name "}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"street_address",label:l.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},"Street Address *",l.a.createElement("div",{className:"checkbox-div-main position-absolute"},l.a.createElement(tp.a,{onChange:function(a){return e.handleCheckChange(a)}},"Same as Main Address"))),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(n,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address "},l.a.createElement(Pm.a,{placeholder:"Email Address"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number ",rules:[{required:!1,message:""}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,"")},maxLength:22,parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},this.state.selectedSite?"Edit":"Add"))),this.state.sites.length>0?l.a.createElement("div",{className:"col-12"},this.state.sites.map((function(a){return l.a.createElement("div",{style:{minHeight:"102px"},key:a.id,className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"text-capitalize"},a.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(a.street_address||""," ").concat(a.apartment||""," ").concat(a.city||""," ").concat(a.state||""," ").concat(a.country||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0 text-elipsiss"},a.email||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(a.phone)||"")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))))}))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row add-site-blank-row align-items-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",null,"No Sites")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Vm.a,{className:"validate-btn-main",onClick:this.handleSubmit},"Save and Continue")))))))}}]),t}(n.Component),fb=Object(r.withRouter)(hb),Eb={labelCol:{span:24},wrapperCol:{span:24}},gb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleCreatePosition=function(){Yh({name:e.formRef.current.getFieldValue("position")}).then((function(a){Mm.b.success("Position created successfully!"),e.props.onClose()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,closable:!0,title:"Create Position",visible:this.props.visible,onClose:function(){return e.props.onClose()},onCancel:function(){return e.props.onClose()},className:"main-all-form-modal main-drawer-div drawer-update",width:"500px",placement:"right",maskClosable:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onCancel:function(){return e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.formRef.current.submit()},type:"primary"},"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleCreatePosition},Eb,{hideRequiredMark:!0,className:"main-inner-form w-100"}),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"position",label:"Position *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Position"})))))))))}}]),t}(n.Component),bb=Object(r.withRouter)(gb),Nb=ku.a.Option,yb={labelCol:{span:24},wrapperCol:{span:24}},wb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={contacts:[],selectedContacts:[],fetching:!1,visible:!1,contact:[],item:null,visibleWarning:!1,modalVisible:!1,positions:[],positionVisible:!1,page:1,totalCount:0,search:""},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0,a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(){var a=e.state.item,t=e.state.selectedContacts.filter((function(e){return e.id!==a.id})),n=e.state.contact.filter((function(e){return e!==a.id}));e.setState({selectedContacts:t},(function(){return e.props.contactCallback(e.state.selectedContacts)})),e.setState({contact:n}),xh({account:null},a.id).then((function(e){Mm.b.success("Contact removed successfully!")})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchContacts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),yh(a).then((function(a){e.setState({contacts:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.getContactsById=function(){yh({account:e.props.match.params.id||e.props.account.id}).then((function(a){e.setState({selectedContacts:a.data.results,contacts:a.data.results,contact:a.data.results.map((function(e){return e.id}))},(function(){return e.props.contactCallback(e.state.selectedContacts)}));var t={};a.data.results.forEach((function(e){t["role".concat(e.id)]=e.role})),t.contacts=a.data.results.map((function(e){return e.id})),e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},t),{},{contacts:null}))})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSelect=function(a){var t=e.state,n=t.selectedContacts,l=t.contacts,c=(t.accountPopup,e.props.account);e.formRef.current.setFieldsValue({contacts:null});var i=l.find((function(e){return e.id==a}));e.setState({accountPopup:i},(function(){var t;if(i.account&&(null===(t=i.account)||void 0===t?void 0:t.id)!==c.id)e.setState({modalVisible:!0});else{var r=n.map((function(e){return e.id}));r.push(a);var s=l.filter((function(e){return r.includes(e.id)})),o=s.map((function(e){return e.id}));e.setState({contact:Object(Ou.a)(o),selectedContacts:s,accountPopup:null})}}))},e.callbackContact=function(a){var t=e.state.selectedContacts,n=(t=[].concat(Object(Ou.a)(t),[a])).map((function(e){return e.id}));e.setState({selectedContacts:t,contacts:t,contact:Object(Ou.a)(n)})},e.handleAccountChange=function(){var a=e.state.accountPopup;xh({contact_account:!0,insert_account:e.props.account.id},a.id).then((function(a){e.setState({modalVisible:!1,accountPopup:null},(function(){e.getContactsById()}))})).catch((function(e){return td(e)}))},e.handleSubmit=function(a){a.contacts=Object(Ou.a)(e.state.contact),a.contacts.map((function(t,n){xh({account:e.props.account.id,role:a["role".concat(t)]},t).then((function(a){0==n&&Mm.b.success("Contact updated successfully!"),e.props.setAccount(e.props.account,6)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}))},e.showContact=function(){e.setState({visible:!1})},e.showWarningModal=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visibleWarning:a,item:t})},e.fetchPositions=function(){var a=e.state,t=a.page,n=a.search,l={page:t,search:n};e.setState({fetching:!0}),Wh(l).then((function(a){1===t?e.setState({positions:a.data.results,totalCount:a.data.count}):e.setState((function(e){return{positions:[].concat(Object(Ou.a)(e.positions),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.showPosition=function(a){e.setState({positionVisible:a})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){(this.props.match.params.id||this.props.account.id)&&this.getContactsById()}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.contacts,c=a.selectedContacts,i=a.positions,r=a.totalCount,s=this.props.account;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all contacts related to this account."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,hideRequiredMark:!0,ref:this.formRef},yb,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"contacts",label:"Contacts ",className:"remove-cross-icon position-relative"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchContacts()},onSearch:this.debounceEvent((function(a){return e.fetchContacts({search:a})}),1e3),onSelect:this.handleSelect,showSearch:!0,className:"custom-search-select",dropdownClassName:"custom-search-select option-design-fix"},n.map((function(e){var a;return l.a.createElement(Nb,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.account?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===e||void 0===e?void 0:e.role)||"")," ",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(a=e.account)||void 0===a?void 0:a.name)||"")):" "))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute text-capitalize",onClick:function(){e.setState({visible:!0})}},"+ Create")),0===c.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts")))),c.map((function(a){var n,c,s,o;return l.a.createElement("div",{key:a.id,className:"col-12"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{style:{height:"100px",minHeight:"100px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(a.first_name," ").concat(a.last_name)),l.a.createElement("p",{className:"mb-0"},(null===a||void 0===a?void 0:a.default_phone)&&(null===a||void 0===a?void 0:a.default_email)?"".concat((null===a||void 0===a||null===(n=a.default_phone)||void 0===n?void 0:n.phone_number)||" "," | ").concat((null===a||void 0===a||null===(c=a.default_email)||void 0===c?void 0:c.email)||" "):(null===a||void 0===a?void 0:a.default_phone)?(null===a||void 0===a||null===(s=a.default_phone)||void 0===s?void 0:s.phone_number)||" ":(null===a||void 0===a||null===(o=a.default_email)||void 0===o?void 0:o.email)||" ")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"role".concat(a.id),label:"Position",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Search and Select",notFoundContent:null,filterOption:!1,onSearch:function(a){e.setState({page:1,search:a},(function(){e.fetchPositions()}))},showSearch:!0,onFocus:function(){return e.fetchPositions()},dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,t&&l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)))},onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&r!=i.length&&e.setState({page:e.state.page+1},(function(){return e.fetchPositions()}))}},i.map((function(e,a){return l.a.createElement(Nb,{value:e.name,key:"".concat(e.name+a)},e.name)})))),l.a.createElement(Vm.a,{className:"create-btn-main create-btn-main-update position-absolute",onClick:function(){return e.showPosition(!0)}},"+ Create"))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(bb,{visible:this.state.positionVisible,onClose:function(){return e.showPosition(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,account:s,visible:this.state.visible,onClose:function(){return e.showContact(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to remove this Contact?",subHeadingUOM:"If you choose to remove this Contact, this might cause issues.",common:!0,commonFunc:function(){e.handleRemove(),e.showWarningModal(!1)}}),l.a.createElement(iv,{changeAccountType:!0,visible:this.state.modalVisible,onClose:function(){return e.setState({modalVisible:!1})},heading:"Are you sure you want to change account for this contact?",subHeadingUOM:" This contact is already tied to an account. If you want to change the account for this contact, please select Yes, I want to change.",cancelText:"No, cancel this action",okText:"Yes, I want to change",handleAccountChange:this.handleAccountChange}))}}]),t}(n.Component),_b=Object(r.withRouter)(wb),Sb={labelCol:{span:24},wrapperCol:{span:24}},xb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format"}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("account",e.props.account.id),n.append("document",t),Wu(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchFiles=function(){Gu({account:e.props.account.id}).then((function(a){e.setState({files:a.data.results},(function(){return e.props.documentsCallback(e.state.files)}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},Sb,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"Documents",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse"))))))),l.a.createElement("div",{className:"col-12 px-3 table-responsive main-table-div"},0===this.state.files.length?"":l.a.createElement(fv.a,{pagination:!1,className:"main-table-all border-0 carpet-cleaning-table",columns:this.columns,dataSource:this.state.files,size:"middle",locale:{emptyText:" "}})),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Vm.a,{className:"validate-btn-main"},"Save and Continue")))))))}}]),t}(n.Component),Cb=Object(r.withRouter)(xb),Ob=fu.a.Panel,kb={labelCol:{span:24},wrapperCol:{span:24}},jb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Create Sales Manager",visible:this.props.visible,onClose:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",placement:"right",maskClosable:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{type:"primary"},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Ob,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},kb,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"team_member_type",label:"Team Member Type",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{disabled:!0,placeholder:"Sales Manager"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"salutation",label:"Salutation",rules:[{required:!1,message:" "}]},l.a.createElement(Pm.a,{placeholder:"Ms., Mr., Mrs., etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"f_name",label:"First Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"First Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!1,message:" "}]},l.a.createElement(Pm.a,{placeholder:"Middle Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"last_name",label:"Last Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Last Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"suffix",label:"Suffix",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:null},"Select"),l.a.createElement(ku.a.Option,{value:"JR"},"JR"),l.a.createElement(ku.a.Option,{value:"SR"},"SR"),l.a.createElement(ku.a.Option,{value:"I"},"I"),l.a.createElement(ku.a.Option,{value:"II"},"II"),l.a.createElement(ku.a.Option,{value:"III"},"III")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(Ob,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Contact Information *"))),key:"2"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",Object.assign({},kb,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Fm.a,Object.assign({hideRequiredMark:!0,ref:this.formRef},kb,{className:"main-inner-form w-100"}),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))))))))))}}]),t}(n.Component),Ib=fu.a.Panel,Ab={labelCol:{span:24},wrapperCol:{span:24}},Db=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Create Sales Assistant",visible:this.props.visible,onClose:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",placement:"right",maskClosable:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{type:"primary"},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Ib,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},Ab,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"team_member_type",label:"Team Member Type",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{disabled:!0,placeholder:"Sales Assistant"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"salutation",label:"Salutation",rules:[{required:!1,message:" "}]},l.a.createElement(Pm.a,{placeholder:"Ms., Mr., Mrs., etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"f_name",label:"First Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"First Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!1,message:" "}]},l.a.createElement(Pm.a,{placeholder:"Middle Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"last_name",label:"Last Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Last Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"suffix",label:"Suffix",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:null},"Select"),l.a.createElement(ku.a.Option,{value:"JR"},"JR"),l.a.createElement(ku.a.Option,{value:"SR"},"SR"),l.a.createElement(ku.a.Option,{value:"I"},"I"),l.a.createElement(ku.a.Option,{value:"II"},"II"),l.a.createElement(ku.a.Option,{value:"III"},"III")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(Ib,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Contact Information *"))),key:"2"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",Object.assign({},Ab,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Fm.a,Object.assign({hideRequiredMark:!0,ref:this.formRef},Ab,{className:"main-inner-form w-100"}),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))))))))))}}]),t}(n.Component),Tb=fu.a.Panel,Rb={labelCol:{span:24},wrapperCol:{span:24}},Mb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Create Salesperson",visible:this.props.visible,onClose:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",placement:"right",maskClosable:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{type:"primary"},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Tb,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},Rb,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"team_member_type",label:"Team Member Type",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{disabled:!0,placeholder:"Salesperson"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"salutation",label:"Salutation",rules:[{required:!1,message:" "}]},l.a.createElement(Pm.a,{placeholder:"Ms., Mr., Mrs., etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"f_name",label:"First Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"First Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!1,message:" "}]},l.a.createElement(Pm.a,{placeholder:"Middle Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"last_name",label:"Last Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Last Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"suffix",label:"Suffix",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:null},"Select"),l.a.createElement(ku.a.Option,{value:"JR"},"JR"),l.a.createElement(ku.a.Option,{value:"SR"},"SR"),l.a.createElement(ku.a.Option,{value:"I"},"I"),l.a.createElement(ku.a.Option,{value:"II"},"II"),l.a.createElement(ku.a.Option,{value:"III"},"III")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(Tb,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Contact Information *"))),key:"2"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",Object.assign({},Rb,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Fm.a,Object.assign({hideRequiredMark:!0,ref:this.formRef},Rb,{className:"main-inner-form w-100"}),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))))))))))}}]),t}(n.Component),Fb=ku.a.Option,Pb={labelCol:{span:24},wrapperCol:{span:24}},Vb={salesPerson:"salesperson",salesAssistant:"salesassistant",salesManager:"salesmanager"},qb={salesPerson:"sales_person",salesAssistant:"sales_assistant",salesManager:"sales_manager"},Lb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={salesPerson:[],salesAssistant:[],salesManager:[],salesPersonSelected:[],salesAssistantSelected:[],salesManagerSelected:[],fetching:!1,buttonLoading:!1,visible:!1,item:null,type:null,salesManagerVisible:!1,salesAssistantVisible:!1,salesPersonVisible:!1},e.formRef=l.a.createRef(),e.showSalesManager=function(a){e.setState({salesManagerVisible:a})},e.showSalesAssistant=function(a){e.setState({salesAssistantVisible:a})},e.showSalesPerson=function(a){e.setState({salesPersonVisible:a})},e.showWarningModal=function(a,t,n){a&&e.setState({item:t,type:n}),e.setState({visible:a})},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0,a,t)},className:"border-0 bg-transparent text-center p-0 w-100"},"Remove")))},e.removeUsers=function(){var a=e.state,t=a.item,n=a.type;e.setState(Object(zv.a)({},"".concat(n,"Selected"),e.state["".concat(n,"Selected")].filter((function(e){return e.id!==t.id}))))},e.fetchUser=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.setState({fetching:!0}),ud(Vb[a],t).then((function(t){var n;e.setState((n={},Object(zv.a)(n,a,t.data.results),Object(zv.a)(n,"fetching",!1),n))})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSelect=function(a,t){var n=e.state,l=n.salesAssistantSelected,c=n.salesManagerSelected,i=n.salesPersonSelected;0==c.length&&0==i.length&&0==l.length&&e.handleUpdatePoc(a),e.formRef.current.setFieldsValue(Object(zv.a)({},qb[t],null));var r=e.state[t].filter((function(e){return a===e.id}));if(e.state["".concat(t,"Selected")].find((function(e){return a===e.id})))return null;e.setState((function(e){return Object(zv.a)({},"".concat(t,"Selected"),[].concat(Object(Ou.a)(e["".concat(t,"Selected")]),Object(Ou.a)(r)))}))},e.handleSubmit=function(){e.setState({buttonLoading:!0});var a={sales_manager:e.state.salesManagerSelected.map((function(e){return e.id})),sales_assistant:e.state.salesAssistantSelected.map((function(e){return e.id})),sales_person:e.state.salesPersonSelected.map((function(e){return e.id}))},t=e.props.match.params.id?e.props.match.params.id:e.props.account.id;t&&op(t,a).then((function(a){e.props.match.params.id?Mm.b.success("Team Updated Successfully!"):Mm.b.success("Team added Successfully!"),e.props.setAccount(a.data,5)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){e.setState({buttonLoading:!1})}))},e.handleUpdatePoc=function(a){op(e.props.account.id,{point_owner:a}).then((function(a){e.props.setAccount(a.data)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a=this,t=this.props.match.params.id?this.props.match.params.id:null===(e=this.props.account)||void 0===e?void 0:e.id;t&&dp(t).then((function(e){var t,n,l;a.setState({buttonLoading:!1,salesPersonSelected:null===(t=e.data)||void 0===t?void 0:t.sales_person,salesAssistantSelected:null===(n=e.data)||void 0===n?void 0:n.sales_assistant,salesManagerSelected:null===(l=e.data)||void 0===l?void 0:l.sales_manager}),a.fetchUser("salesManager"),a.fetchUser("salesAssistant"),a.fetchUser("salesPerson")}))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row general-info"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can only choose one point of contact for this account."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,requiredMark:!1,ref:this.formRef},Pb,{className:"main-inner-form"}),l.a.createElement(vh.a.Group,{value:null===(e=this.props.account)||void 0===e?void 0:e.point_owner},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_manager",label:"Sales Managers *",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onChange:function(e){return o.handleSelect(e,"salesManager")},showSearch:!0,onFocus:function(){return o.fetchUser("salesManager")},onSearch:function(e){return o.fetchUser("salesManager",{search:e})},className:"custom-search-select"},this.state.salesManager.map((function(e){return l.a.createElement(Fb,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Manager")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(a=this.state.salesManagerSelected)||void 0===a?void 0:a.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))),null===(t=this.state.salesManagerSelected)||void 0===t?void 0:t.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat(e.id===(null===(a=o.props.account)||void 0===a?void 0:a.point_owner)&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},"AD")),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Manager")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesManager")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(Fm.a.Item,{name:"sales_person",label:"Salespeople *",rules:[{required:!1,message:""}],className:"search-overlap"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,showSearch:!0,onChange:function(e){return o.handleSelect(e,"salesPerson")},onFocus:function(){return o.fetchUser("salesPerson")},onSearch:function(e){return o.fetchUser("salesPerson",{search:e})},className:"custom-search-select"},this.state.salesPerson.map((function(e){return l.a.createElement(Fb,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Salesperson")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(n=this.state.salesPersonSelected)||void 0===n?void 0:n.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople")))),null===(c=this.state.salesPersonSelected)||void 0===c?void 0:c.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat(e.id===(null===(a=o.props.account)||void 0===a?void 0:a.point_owner)&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},"AD")),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Salesperson")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesPerson")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_assistant",label:"Sales Assistants *",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,showSearch:!0,onChange:function(e){return o.handleSelect(e,"salesAssistant")},onFocus:function(){return o.fetchUser("salesAssistant")},onSearch:function(e){return o.fetchUser("salesAssistant",{search:e})},className:"custom-search-select"},null===(i=this.state.salesAssistant)||void 0===i?void 0:i.map((function(e){return l.a.createElement(Fb,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Assistant")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(r=this.state.salesAssistantSelected)||void 0===r?void 0:r.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))),null===(s=this.state.salesAssistantSelected)||void 0===s?void 0:s.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat(e.id===(null===(a=o.props.account)||void 0===a?void 0:a.point_owner)&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},"AD")),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Assistant")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesAssistant")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(iv,{visible:this.state.visible,onClose:function(){return o.showWarningModal(!1)},heading:"Are you sure you want to remove this Team Member?",subHeadingUOM:"If you choose to remove this Team Member, this might cause issues.",common:!0,commonFunc:function(){o.removeUsers(),o.showWarningModal(!1)}}),l.a.createElement(jb,{visible:this.state.salesManagerVisible,onClose:function(){return o.showSalesManager(!1)}}),l.a.createElement(Db,{visible:this.state.salesAssistantVisible,onClose:function(){return o.showSalesAssistant(!1)}}),l.a.createElement(Mb,{visible:this.state.salesPersonVisible,onClose:function(){return o.showSalesPerson(!1)}}))}}]),t}(n.Component),Ub=Object(r.withRouter)(Lb),Bb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:this.props.onOK,onCancel:this.props.onClose,centered:!0,className:"confirmation-popup-modal warning-modal required-fields-warning-modal",okText:"Exit",cancelText:"Continue Filling"},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.warning_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),this.props.subHeading?l.a.createElement("p",{className:"mb-0 mx-auto"},this.props.subHeading):l.a.createElement("p",{className:"mb-0 mx-auto"})))))}}]),t}(n.Component),Wb=(Object(r.withRouter)(Bb),fu.a.Panel),Yb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={account:null,payment:null,warningModalVisible:!1,visibleConfirm:!1,address:null,contacts:null,sites:null,docs:null,unsavedExit:!1,activeKey:["1"],requiredSuccessModalVisible:!1,requiredWarningModalVisible:!1,required:!1},e.setAccount=function(a,t){var n;(null===(n=e.state.account)||void 0===n?void 0:n.name)?e.setState((function(){return{account:a}})):e.setState((function(){return{account:a,unsavedExit:!0}}));var l=null;e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l||e.setState((function(e){return{account:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.setPayment=function(a,t){var n,l,c,i=null;e.state.activeKey.length>1&&(i=e.state.activeKey.find((function(e){return e==t}))),i||e.setState((function(e){return{payment:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}})),e.setState({payment:a}),(null===(n=e.state)||void 0===n||null===(l=n.sites)||void 0===l?void 0:l.length)&&(null===(c=e.state)||void 0===c?void 0:c.address)?(e.setState({payment:a,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState({payment:a})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.showRequiredWarningModal=function(a){e.setState({requiredWarningModalVisible:a})},e.getOwnerAccount=function(a){dp(e.props.match.params.id||a).then((function(a){var t={main:a.data.main_address,billing:a.data.billing_address};e.setState({account:a.data,payment:a.data.payment_information,address:t})})).catch((function(e){td(e)}))},e.checkSiteData=function(){var a,t=e.state.account;(null===t||void 0===t||null===(a=t.sites)||void 0===a?void 0:a.length)?e.setState({unsavedExit:!1}):e.setState({unsavedExit:!0})},e.getSiteDetail=function(a){var t,n,l;(null===a||void 0===a?void 0:a.length)?(e.getOwnerAccount(a[0].account.id),(null===(t=e.state)||void 0===t?void 0:t.address)&&(null===(n=e.state)||void 0===n?void 0:n.payment)?(e.setState({sites:a,account:Object(wu.a)(Object(wu.a)({},e.state.account),{},{sites:a})},(function(){e.checkSiteData()})),e.props.match.params.id||(!e.props.match.params.id&&e.state.sites&&(null===(l=e.state.sites)||void 0===l?void 0:l.map((function(e){return e.id===a.find((function(e){return e.id}))})))?e.setState({requiredSuccessModalVisible:!1}):e.setState({requiredSuccessModalVisible:!0}))):e.setState({sites:a,account:Object(wu.a)(Object(wu.a)({},e.state.account),{},{sites:a})},(function(){e.checkSiteData()}))):e.getOwnerAccount()},e.contactCallback=function(a){e.setState({contacts:a})},e.documentsCallback=function(a){e.setState({docs:a})},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.setAddress=function(a,t){var n,l,c;(null===(n=e.state)||void 0===n||null===(l=n.sites)||void 0===l?void 0:l.length)&&(null===(c=e.state)||void 0===c?void 0:c.payment)?(e.setState({address:a,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState({address:a});var i=null;e.state.activeKey.length>1&&(i=e.state.activeKey.find((function(e){return e==t}))),i||e.setState((function(e){return{address:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.handleCollapseChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.account;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?e.setState({unsavedExit:!1},o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:l.id}))):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Site Manager Account",url:zm.dashboard.owner_account.create}],t=[{title:"Edit Site Manager Account",url:zm.dashboard.owner_account.edit}];this.props.match.params.id?(this.props.setBreadcrumb(t),dp(this.props.match.params.id).then((function(a){var t={main:a.data.main_address,billing:a.data.billing_address};e.setState({account:a.data,payment:a.data.payment_information,address:t,activeKey:e.props.location.editTab||"1"})})).catch((function(e){td(e)}))):this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.account,n=a.address,c=a.sites,i=a.contacts,r=a.docs,s=a.activeKey,m=a.payment;a.sitesDetail;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1},setCancel:function(){e.setState({required:!0})}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:s,onChange:this.handleCollapseChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},defaultActiveKey:this.props.location.editTab?[this.props.location.editTab]:["1"]},l.a.createElement(Wb,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:t&&""!==t.name?"panel-title mb-0":"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(pb,{account:t,setAccount:this.setAccount})),l.a.createElement(Wb,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:null!=(null===m||void 0===m?void 0:m.tax_exemption)?"panel-title mb-0":"mb-0"},"Payment Information"))),key:"2"},l.a.createElement(Dp,{account:t,payment:m,setPayment:this.setPayment})),l.a.createElement(Wb,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:null!=(null===n||void 0===n?void 0:n.billing)||null!=(null===n||void 0===n?void 0:n.main)?"panel-title mb-0":"mb-0"},"Address Information"))),key:"3"},l.a.createElement(rp,{account:t,address:n,setAddress:this.setAddress})),l.a.createElement(Wb,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:(null===c||void 0===c?void 0:c.length)>0?"panel-title mb-0":"mb-0"},"Sites ",l.a.createElement("sup",null,"*")),(this.state.required||this.props.match.params.id)&&cu(t,"SITES")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"4"},l.a.createElement(fb,{account:t,getSiteDetail:this.getSiteDetail,setAccount:this.setAccount,address:n})),l.a.createElement(Wb,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:i&&i.length>0?"panel-title mb-0":"mb-0"},"Contacts"))),key:"5"},l.a.createElement(_b,{account:t,contactCallback:this.contactCallback,setAccount:this.setAccount})),l.a.createElement(Wb,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Team"))),key:"6"},l.a.createElement(Ub,{account:t,contactCallback:this.contactCallback,setAccount:this.setAccount})),l.a.createElement(Wb,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:r&&r.length>0?"panel-title mb-0":"mb-0"},"Documents"))),key:"7"},l.a.createElement(Cb,{account:t,documentsCallback:this.documentsCallback}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{style:{marginRight:10},onClick:function(){e.state.unsavedExit?o.push(zm.dashboard.owner_account.self):e.showWarningModal(!0)}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:t.id})):e.handleViewMainButtonCLick()},type:"primary"},"View Account"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this Site Manager Account!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select"," ",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:t.id}))},className:"border-0 shadow-none p-0 bg-transparent"},"View Site Manager Account.")),okTitle:"View Site Manager Account",okAction:function(){e.setState({unsavedExit:!1},o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:t.id})))},visible:this.state.visibleConfirm,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:this.props.match.params.id?"Are you sure you want to exit editing this Site Manager Account?":"Are you sure you want to exit creating this Site Manager Account?",visible:this.state.warningModalVisible,onClose:function(){return e.showWarningModal(!1)},okAction:function(){e.setState({unsavedExit:!1},(function(){o.push(zm.dashboard.owner_account.self)}))},uomWarning:!0}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the account, select View Account.",onClose:function(){e.showRequiredSuccessModal(!1)},onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:t.id}))}}))}}]),t}(n.Component),Kb=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{setBreadcrumb:Uv})(Object(r.withRouter)(Yb)),Gb=fu.a.Panel,zb=ku.a.Option,Hb={labelCol:{span:24},wrapperCol:{span:24}},$b=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={visibleConfirm:!1,page:1,industry:[],warningModalVisible:!1,createdAccount:null},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.getIndustries=function(){Np({page:e.state.page}).then((function(a){1===e.state.page?e.setState({industry:a.data.results}):e.setState((function(e){return{industry:[].concat(Object(Ou.a)(e.industry),Object(Ou.a)(a.data.results))}}))}))},e.onSubmit=function(a){e.setState({buttonLoading:!0});var t=Object(wu.a)(Object(wu.a)({},a),{},{account_source:a.account_source?a.account_source:null});e.state.createdAccount?op(t).then((function(a){Mm.b.success("Account Created Successfully"),e.setState({buttonLoading:!1,createdAccount:a.data})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})})):sp(t).then((function(a){Mm.b.success("Account Created Successfully"),e.setState({buttonLoading:!1,createdAccount:a.data,visibleConfirm:!0})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getIndustries()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Create Site Manager Account",visible:this.props.visible,onClose:function(){e.state.createdAccount||e.setState({warningModalVisible:!0})},onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div bg-gray-main drawer-update",width:"625px",placement:"right",maskClosable:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{className:"continue-green",disabled:!this.state.createdAccount,onClick:function(){e.setState({createdAccount:null}),e.props.onClose()},type:"primary"},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Gb,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},Hb,{hideRequiredMark:!0,onFinish:this.onSubmit,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{initialValue:"SITE_OWNER",className:"account-type-item",name:"account_type",label:"Account Type *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{disabled:!0,showArrow:!1,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Payment Term"},l.a.createElement(zb,{value:"CUSTOMER"},"Billing"),l.a.createElement(zb,{value:"SITE_OWNER"},"Site Manager"),l.a.createElement(zb,{value:"CUSTOMER_OWNER"},"Billing, Site Manager")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"industry",label:"Industry",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&e.state.page<3&&e.setState({page:e.state.page+1},(function(){return e.getIndustries()}))}}," ",this.state.industry.map((function(e){return l.a.createElement(zb,{value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"website",label:"Website",rules:[{required:!1,message:" "}]},l.a.createElement(Pm.a,{placeholder:"Website"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_source",label:"Account Source",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder account-source-div"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(zb,{value:"ADVERTISEMENT"},"Advertisement"),l.a.createElement(zb,{value:"CONSTRUCTCONNECT"},"ConstructConnect"),l.a.createElement(zb,{value:"WORD_OF_MOUTH"},"Word of Mouth"),l.a.createElement(zb,{value:"MARKETING_ASSISTANT"},"Marketing Assistant")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully added all of the required information.",okTitle:"Continue",okAction:function(){e.showConfirmModal(!1),e.setState({createdAccount:null}),e.props.callback(e.state.createdAccount)},visible:this.state.visibleConfirm}),l.a.createElement(wp,{visible:this.state.warningModalVisible,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){e.setState({warningModalVisible:!1}),e.props.onClose()},onCancel:function(){e.setState({warningModalVisible:!1})}}))}}]),t}(n.Component),Qb=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:this.props.okAction,onCancel:this.props.onClose,centered:!0,className:"confirmation-popup-modal warning-modal sites-drawer",okText:"Yes, I want to continue",cancelText:"Go back"},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.warning_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading)))))}}]),t}(n.Component),Jb=Object(r.withRouter)(Qb),Zb=ku.a.Option,Xb={labelCol:{span:24},wrapperCol:{span:24}},eN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,pagination:null,accounts:[],loading:!1,selectedAccount:null,visibleModal:!1,selectedSite:null,selectedValue:null,checked:!1,visibleWarning:!1,selectValue:null,disableField:!1,county:[],updateMainState:null},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleEdit(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit")))},e.handleEdit=function(a){e.setState({selectedSite:a,disableField:!1}),e.formRef.current.setFieldsValue(Object(wu.a)({},a))},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e.getSingleSiteData=function(){e.setState({fetching:!0}),fp(e.props.match.params.id).then((function(a){console.log(a,"responseeeeee"),e.setState({selectedSite:a.data,selectedAccount:a.data.account,fetching:!1},(function(){e.state.selectedSite.account.main_address.street_address===e.state.selectedSite.street_address&&e.state.selectedSite.account.main_address.apartment===e.state.selectedSite.apartment&&e.state.selectedSite.account.main_address.county===e.state.selectedSite.county&&e.state.selectedSite.account.main_address.city===e.state.selectedSite.city&&e.state.selectedSite.account.main_address.state===e.state.selectedSite.state&&e.state.selectedSite.account.main_address.zip_code===e.state.selectedSite.zip_code&&e.state.selectedSite.account.main_address.country===e.state.selectedSite.country&&e.state.selectedSite.account.main_address.email===e.state.selectedSite.email&&e.state.selectedSite.account.main_address.phone===e.state.selectedSite.phone&&e.setState({checked:!0})})),e.formRef.current.setFieldsValue(Object(wu.a)({},a.data))})).catch((function(a){e.setState({fetching:!1}),td(a)}))},e.fetchOwnerAccountData=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Iu(a).then((function(t){e.setState({accounts:t.data.results,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count})})})).catch((function(a){e.setState({loading:!1}),a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])}))}))},e.handleChange=function(a){console.log(a,"call"),e.setState({selectValue:a}),Au(a).then((function(a){console.log(a,"response"),"CUSTOMER"===a.data.account_type?e.setState({visibleModal:!0,selectedValue:null}):e.setState({selectedAccount:a.data},(function(){var t,n,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N,y,w;e.state.checked&&e.formRef.current.setFieldsValue((w={street_address:null===(t=e.state.selectedAccount)||void 0===t||null===(n=t.main_address)||void 0===n?void 0:n.street_address,apartment:null===(l=e.state.selectedAccount)||void 0===l||null===(c=l.main_address)||void 0===c?void 0:c.apartment,county:null===(i=e.state.selectedAccount)||void 0===i||null===(r=i.main_address)||void 0===r?void 0:r.county,city:null===(s=e.state.selectedAccount)||void 0===s||null===(o=s.main_address)||void 0===o?void 0:o.county},Object(zv.a)(w,"city",null===(m=e.state.selectedAccount)||void 0===m||null===(d=m.main_address)||void 0===d?void 0:d.city),Object(zv.a)(w,"state",null===(u=e.state.selectedAccount)||void 0===u||null===(p=u.main_address)||void 0===p?void 0:p.state),Object(zv.a)(w,"zip_code",null===(v=e.state.selectedAccount)||void 0===v||null===(h=v.main_address)||void 0===h?void 0:h.zip_code),Object(zv.a)(w,"country",null===(f=e.state.selectedAccount)||void 0===f||null===(E=f.main_address)||void 0===E?void 0:E.country),Object(zv.a)(w,"email",null===(g=e.state.selectedAccount)||void 0===g||null===(b=g.main_address)||void 0===b?void 0:b.email),Object(zv.a)(w,"phone",null===(N=e.state.selectedAccount)||void 0===N||null===(y=N.main_address)||void 0===y?void 0:y.phone),w));e.formRef.current.setFieldsValue({name:"".concat(a.data.name," Site")})}))})).catch((function(e){td(e)}))},e.updateAccount=function(){Ru(e.state.selectValue,{account_type:"CUSTOMER_OWNER"}).then((function(a){e.setState({selectedAccount:a.data,visibleModal:!1,selectedValue:null},(function(){var a,t,n,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N,y;e.state.checked&&e.formRef.current.setFieldsValue((y={street_address:null===(a=e.state.selectedAccount)||void 0===a||null===(t=a.main_address)||void 0===t?void 0:t.street_address,apartment:null===(n=e.state.selectedAccount)||void 0===n||null===(l=n.main_address)||void 0===l?void 0:l.apartment,county:null===(c=e.state.selectedAccount)||void 0===c||null===(i=c.main_address)||void 0===i?void 0:i.county,city:null===(r=e.state.selectedAccount)||void 0===r||null===(s=r.main_address)||void 0===s?void 0:s.county},Object(zv.a)(y,"city",null===(o=e.state.selectedAccount)||void 0===o||null===(m=o.main_address)||void 0===m?void 0:m.city),Object(zv.a)(y,"state",null===(d=e.state.selectedAccount)||void 0===d||null===(u=d.main_address)||void 0===u?void 0:u.state),Object(zv.a)(y,"zip_code",null===(p=e.state.selectedAccount)||void 0===p||null===(v=p.main_address)||void 0===v?void 0:v.zip_code),Object(zv.a)(y,"country",null===(h=e.state.selectedAccount)||void 0===h||null===(f=h.main_address)||void 0===f?void 0:f.country),Object(zv.a)(y,"email",null===(E=e.state.selectedAccount)||void 0===E||null===(g=E.main_address)||void 0===g?void 0:g.email),Object(zv.a)(y,"phone",null===(b=e.state.selectedAccount)||void 0===b||null===(N=b.main_address)||void 0===N?void 0:N.phone),y));e.formRef.current.setFieldsValue({name:"".concat(e.state.selectedAccount.name," Site")})}))})).catch((function(e){td(e)}))},e.showManagerAccount=function(a){e.setState({visible:a})},e.handleSubmit=function(a){var t,n,l;a.account=null===(t=e.state.selectedAccount)||void 0===t?void 0:t.id;var c=(null===(n=e.state.selectedSite)||void 0===n?void 0:n.id)?null===(l=e.state.selectedSite)||void 0===l?void 0:l.id:e.props.match.params.id;c?Ep(a,c).then((function(a){e.setState({selectedSite:a.data},(function(){e.setState({disableField:!0})})),Mm.b.success("Site Updated Successfully")})).catch((function(e){td(e)})):vp(a).then((function(a){e.setState({selectedSite:a.data},(function(){e.setState({disableField:!0})})),Mm.b.success("Site Created Successfully"),e.props.setSite(a.data,2)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.phoneNumberValidate=function(e,a,t){a.toString().length<10?t("minimum digits should be 10"):t()},e.onClose=function(a){e.setState({visibleModal:a,selectedAccount:null,selectedValue:null})},e.handleCheckChange=function(a){e.setState({checked:a.target.checked},(function(){var a,t,n,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g;e.state.checked&&e.formRef.current.setFieldsValue({street_address:null===(a=e.state.selectedAccount)||void 0===a||null===(t=a.main_address)||void 0===t?void 0:t.street_address,apartment:null===(n=e.state.selectedAccount)||void 0===n||null===(l=n.main_address)||void 0===l?void 0:l.apartment,county:null===(c=e.state.selectedAccount)||void 0===c||null===(i=c.main_address)||void 0===i?void 0:i.county,city:null===(r=e.state.selectedAccount)||void 0===r||null===(s=r.main_address)||void 0===s?void 0:s.city,state:null===(o=e.state.selectedAccount)||void 0===o||null===(m=o.main_address)||void 0===m?void 0:m.state,zip_code:null===(d=e.state.selectedAccount)||void 0===d||null===(u=d.main_address)||void 0===u?void 0:u.zip_code,country:null===(p=e.state.selectedAccount)||void 0===p||null===(v=p.main_address)||void 0===v?void 0:v.country,email:null===(h=e.state.selectedAccount)||void 0===h||null===(f=h.main_address)||void 0===f?void 0:f.email,phone:null===(E=e.state.selectedAccount)||void 0===E||null===(g=E.main_address)||void 0===g?void 0:g.phone})}))},e.callback=function(a){e.setState({selectedAccount:a,visible:!1},(function(){var a,t,n,l,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N,y;e.state.checked&&e.formRef.current.setFieldsValue((y={street_address:null===(a=e.state.selectedAccount)||void 0===a||null===(t=a.main_address)||void 0===t?void 0:t.street_address,apartment:null===(n=e.state.selectedAccount)||void 0===n||null===(l=n.main_address)||void 0===l?void 0:l.apartment,county:null===(c=e.state.selectedAccount)||void 0===c||null===(i=c.main_address)||void 0===i?void 0:i.county,city:null===(r=e.state.selectedAccount)||void 0===r||null===(s=r.main_address)||void 0===s?void 0:s.county},Object(zv.a)(y,"city",null===(o=e.state.selectedAccount)||void 0===o||null===(m=o.main_address)||void 0===m?void 0:m.city),Object(zv.a)(y,"state",null===(d=e.state.selectedAccount)||void 0===d||null===(u=d.main_address)||void 0===u?void 0:u.state),Object(zv.a)(y,"zip_code",null===(p=e.state.selectedAccount)||void 0===p||null===(v=p.main_address)||void 0===v?void 0:v.zip_code),Object(zv.a)(y,"country",null===(h=e.state.selectedAccount)||void 0===h||null===(f=h.main_address)||void 0===f?void 0:f.country),Object(zv.a)(y,"email",null===(E=e.state.selectedAccount)||void 0===E||null===(g=E.main_address)||void 0===g?void 0:g.email),Object(zv.a)(y,"phone",null===(b=e.state.selectedAccount)||void 0===b||null===(N=b.main_address)||void 0===N?void 0:N.phone),y))}))},e.checkType=function(e){switch(e){case"CUSTOMER_OWNER":return"Site Manager / Billing Account";case"CUSTOMER":return"Billing Account";case"VENDOR":return"Vendor Account";default:return"Site Manager Account"}},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id?this.getSingleSiteData():this.formRef.current.setFieldsValue({country:"United States"}),this.fetchOwnerAccountData(),Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(e){td(e)}))}},{key:"componentDidUpdate",value:function(e,a){e.siteData!=this.props.siteData&&this.setState({disableField:!0})}},{key:"render",value:function(){var e=this,a=this.state,t=a.accounts,n=a.selectedAccount,c=a.loading,i=a.selectedSite,r=a.fetching,s=a.checked,o=a.selectedValue,m=a.disableField,d=a.county,u=a.updateMainState;return r?l.a.createElement("div",null):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},Xb,{onFinish:this.handleSubmit,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Site Manager")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{label:"Site Manager / Billing",rules:[{required:!1}],className:"position-relative remove-cross-icon search-overlap"},l.a.createElement(ku.a,{showSearch:!0,filterOption:!1,disabled:!!n,value:o,onFocus:this.fetchOwnerAccountData,placeholder:"Search",notFoundContent:c?l.a.createElement(Wv.a,{size:"small"}):null,onSearch:function(a){return e.fetchOwnerAccountData({search:a})},className:"customer-contact",onChange:this.handleChange},t.map((function(a){return l.a.createElement(Zb,{value:a.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},a.name,l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.checkType(a.account_type))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},e.checkType(a.account_type))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{onClick:function(){return e.showManagerAccount(!0)},className:"create-btn-main position-absolute text-capitalize",disabled:!!this.state.selectedAccount},"+ Create")),n?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-12 col-sm-11 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"},n.name),l.a.createElement("h6",{className:"mb-0"},"CUSTOMER_OWNER"===n.account_type?"Site Manager / Billing Account":"SITE_OWNER"===n.account_type?"Site Manager Account":"Billing Account")))),l.a.createElement("div",{className:"col-1 col-sm-1 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center justify-content-end h-100"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return e.showWarningModal(!0)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.no_account_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Account"))))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Site")),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"checkbox-div-main position-absolute"},l.a.createElement(tp.a,{onChange:function(a){return e.handleCheckChange(a)},checked:s},"Same as Main Address")),l.a.createElement(Fm.a.Item,{name:"name",label:"Site Name",rules:[{required:!1}]},l.a.createElement(Pm.a,{placeholder:"Site Name",disabled:m}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address",disabled:m}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment,Suite,etc",rules:[{required:!1}]},l.a.createElement(Pm.a,{placeholder:"Apartment,Suite,etc",disabled:m}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(d,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Enter here",disabled:m}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(u,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 pr-2"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Enter here",disabled:m}))),l.a.createElement("div",{className:"col-12 col-sm-6 pl-2"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country",disabled:m},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address",disabled:m}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"},{validator:this.phoneNumberValidate}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,"")},maxLength:22,disabled:m,parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))),i&&l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"text-capitalize"},i.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(i.street_address||""," ").concat(i.apartment||""," ").concat(i.city||""," ").concat(i.state||""," ").concat(i.country||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0 text-elipsiss"},i.email||"")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(i.phone)||"")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:this.menu(i),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))))))))),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to remove this Account?",subHeadingUOM:"If you choose to remove this account, this might cause issues.",common:!0,commonFunc:function(){e.setState({selectedAccount:null,visibleWarning:!1})}}),l.a.createElement($b,{callback:this.callback,visible:this.state.visible,onClose:function(){return e.showManagerAccount(!1)}}),l.a.createElement(Jb,{visible:this.state.visibleModal,heading:"Selecting the Billing Account will make the account function as a billing and site manager account.",okAction:function(){return e.updateAccount()},onClose:function(){return e.onClose(!1)}}))}}]),t}(n.Component),aN=Object(r.withRouter)(eN),tN={labelCol:{span:24},wrapperCol:{span:24}},nN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format"}],e.uploadFile=function(a){var t,n=a.file,l=new FormData;l.append("site",null===(t=e.props.siteDetail)||void 0===t?void 0:t.id),l.append("document",n),Yu(l).then((function(){Mm.b.success("Document uploaded successfully!"),e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchFiles=function(){var a;Ku({site:null===(a=e.props.siteDetail)||void 0===a?void 0:a.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e;(null===(e=this.props.siteDetail)||void 0===e?void 0:e.id)&&this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},tN,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"Documents",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_icon,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse"))))))),l.a.createElement("div",{className:"col-12 table-responsive px-3 main-table-div"},0===this.state.files.length?"":l.a.createElement(fv.a,{pagination:!1,className:"main-table-all border-0 carpet-cleaning-table",columns:this.columns,dataSource:this.state.files,size:"middle",locale:{emptyText:" "}})),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Vm.a,{className:"validate-btn-main"},"Save and Continue")))))))}}]),t}(n.Component),lN=Object(r.withRouter)(nN),cN=fu.a.Panel,iN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={warningModalVisible:!1,visibleConfirm:!1,siteData:null,activeKey:["1"]},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.setSite=function(a,t){e.setState({siteData:a},(function(){e.setState((function(e){return{activeKey:[].concat(Object(Ou.a)(e.activeKey),["2"])}}))}))},e.onCollapseChange=function(a){e.setState({activeKey:a})},e.getSiteData=function(){fp(e.props.match.params.id?e.props.match.params.id:e.state.siteData.id).then((function(a){var t,n=[{title:"".concat((null===(t=e.props.match.params)||void 0===t?void 0:t.id)?"Edit":"Create"," Site")}];e.props.setBreadcrumb(n),e.setState({siteData:a.data})})).catch((function(e){td(e)}))},e.documentsCallback=function(a){e.setState({docs:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l;(null===(a=e.props.match.params)||void 0===a?void 0:a.id)||(null===(t=e.state.siteDetail)||void 0===t?void 0:t.id)?o.push(Object(dh.a)(zm.dashboard.owner_account.site_account.view,{id:(null===(n=e.props.match.params)||void 0===n?void 0:n.id)||(null===(l=e.state.siteDetail)||void 0===l?void 0:l.id)})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e;(this.props.match.params.id?this.props.match.params.id:null===(e=this.state.siteData)||void 0===e?void 0:e.id)&&this.getSiteData()}},{key:"render",value:function(){var e=this,a=this.state.siteData;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:this.state.activeKey,onChange:this.onCollapseChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},defaultActiveKey:["1"]},l.a.createElement(cN,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information"))),key:"1"},l.a.createElement(aN,{siteData:a,setSite:this.setSite})),l.a.createElement(cN,{disabled:!a,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"2"},l.a.createElement(lN,{siteDetail:a,documentscallback:this.documentsCallback}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{style:{marginRight:10},onClick:function(){return e.showWarningModal(!0)}},"Cancel"),l.a.createElement(Vm.a,{disabled:!a,onClick:function(){return e.handleViewMainButtonCLick()},type:"primary"}," View Site"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this site!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view this site, select"," ",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.owner_account.site_account.view,{id:a.id}))},className:"border-0 shadow-none p-0 bg-transparent"},"View Site.")),okTitle:"View Site",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.owner_account.site_account.view,{id:a.id}))},visible:this.state.visibleConfirm,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:this.props.match.params.id?"Are you sure you want to exit editing this Site?":"Are you sure you want to exit creating this Site?",visible:this.state.warningModalVisible,onClose:function(){return e.showWarningModal(!1)}}))}}]),t}(n.Component),rN=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(iN)),sN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={activity:[],loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.activityColumns=[{title:"DATE",dataIndex:"date",sorter:!0,render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD, YYYY hh:mm A"))}},{title:"ACTION",dataIndex:"action",sorter:!0},{title:"EMPLOYEE",dataIndex:"user",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},e.split(" ")[0].split("")[0],e.split(" ")[1].split("")[0]),e)}}],e.fetchActivity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Fu(e.props.match.params.id).then((function(t){e.setState({activity:e.props.hideTitle?t.data.data.slice(0,10):t.data.data,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.hideTitle?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).forEach((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){e.setState({loading:!1})}))},e.handleChange=function(a){e.fetchActivity({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchActivity()}},{key:"render",value:function(){var e=this,a=this.state,t=a.activity,n=a.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},this.props.hideSearch&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center carpet-cleaning-mini-header"},l.a.createElement(Vm.a,{onClick:function(){window.location.href.includes("billing")?e.props.tabChange("10"):e.props.tabChange("11")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),t?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.activityColumns,dataSource:t,size:"middle",onChange:this.handleChange,pagination:!this.props.hideTitle&&this.state.pagination,loading:n})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Time_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 approved-btn"},"No Activity"))))))}}]),t}(n.Component),oN=Object(r.withRouter)(sN),mN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).viewOwner=function(){o.push(Object(Sf.a)(zm.dashboard.owner_account.view,{id:e.props.id})),e.props.onClose()},e.viewCustomer=function(){o.push(Object(Sf.a)(zm.dashboard.customer_account.view,{id:e.props.id})),e.props.onClose()},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:function(){return e.viewOwner()},onCancel:function(){return e.viewCustomer()},centered:!0,className:"confirmation-popup-modal customer-owner-confirm",okText:"View as Site Manager",cancelText:"View as Billing",maskClosable:!1},l.a.createElement("div",{className:"row mx-0 confirm-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.check_icon,alt:"icon",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading)),l.a.createElement("div",{className:"mb-0 text-center"}," ",this.props.subHeading," "))))}}]),t}(n.Component),dN=Object(r.withRouter)(mN),uN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"NAME",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.document},e.name)))}},{title:"SIZE",sorter:!0,dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE FORMAT",sorter:!0,dataIndex:"format"}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("site",e.props.siteData.id),n.append("document",t),Yu(n).then((function(a){Mm.b.success("Document uploaded successfully!"),e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchFiles=function(){var a;Ku({site:null===(a=e.props.siteData)||void 0===a?void 0:a.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e;(null===(e=this.props.siteData)||void 0===e?void 0:e.id)&&this.fetchFiles()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"new-opportunity-btn text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("5")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 mt-3 table-responsive main-table-div documents-table-main"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:!1,className:" border-0 carpet-cleaning-table",columns:this.columns,dataSource:this.state.files,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_icon,alt:"cloud icon",style:{width:40}}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),pN=Object(r.withRouter)(uN),vN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={opportunities:[],pagination:{current:1,pageSize:15},loading:!1},e.opportunitiesColumns=[{title:"OPPORTUNITY ID",dataIndex:"id",sorter:!0},{title:"OPPORTUNITY NAME",dataIndex:"name",sorter:!0},{title:"STATUS",dataIndex:"status",sorter:!0},{title:"OPPORTUNITY SOURCE",dataIndex:"source",sorter:!0,render:function(e){return l.a.createElement("div",null,e.name)}},{title:"LAST ACTIVITY DATE",dataIndex:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:!0}],e.fetchOpportunity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),wv(Object(wu.a)({account:e.props.match.params.id},a)).then((function(a){e.setState({opportunities:a.data.results,loading:!1})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.fetchOpportunity({search:a.target.value,page:1})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchOpportunity()}},{key:"render",value:function(){var e=this,a=this.state,t=a.pagination,n=a.opportunities,c=a.loading;return this.props.pagination||(t=!1),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},!this.props.hideSearch&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("7")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),n.length>0?l.a.createElement("div",{className:"col-12 table-responsive width-160-id main-table-div"},l.a.createElement(fv.a,{pagination:t,className:"border-0 carpet-cleaning-table",columns:this.opportunitiesColumns,rowKey:function(e){return e.id},loading:c,dataSource:n,size:"middle"})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.leads_icon_black,alt:"logo",className:"img-fluid",style:{opacity:"0.5"}}),l.a.createElement("h6",{className:"text-gray-tag"},"No Opportunities"))))))}}]),t}(n.Component),hN=(Object(r.withRouter)(vN),{labelCol:{span:24},wrapperCol:{span:24}});var fN=Pm.a.TextArea,EN=ku.a.Option,gN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={assignees:[],fetching:!1,selectedData:null,warningVisible:!1},e.formRef=l.a.createRef(),e.handleChange=function(a){e.setState({selectedData:e.state.assignees.find((function(e){return e.id===a}))})},e.showWarningM=function(a){e.setState({warningVisible:a})},e.fetchUser=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ud("salesperson",a).then((function(a){e.setState({assignees:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSubmit=function(a){a.account=e.props.match.params.id,a.due_date&&(a.due_date=hd()(a.due_date).format("YYYY-MM-DD")),e.props.data?$u(e.props.data.id,a).then((function(a){Mm.b.success("Post Updated Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Hu(a).then((function(a){Mm.b.success("Post Created Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.populateData=Object(Qm.a)($m.a.mark((function a(){var t;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.props.data){a.next=5;break}return a.next=3,e.fetchUser();case 3:e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.data),{},{assignee:null===(t=e.props.data.assignee)||void 0===t?void 0:t.id,due_date:e.props.data.due_date?hd()(e.props.data.due_date):null})),e.setState({selectedData:e.props.data.assignee});case 5:case"end":return a.stop()}}),a)}))),e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.assignees,c=a.selectedData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,title:"Post",maskClosable:!1,visible:this.props.visible,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",onClose:function(){e.showWarningM(!0)},placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){e.showWarningM(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.formRef.current.submit()},type:"primary"},this.props.data?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},hN,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Post Name*")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Post Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"post_type",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Type"))},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Type"},l.a.createElement(EN,{value:"NOTE"},"Note"),l.a.createElement(EN,{value:"TASK"},"Task")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"assignee",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Assignee")),className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Search Assignee",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchUser()},onSearch:function(a){return e.fetchUser({search:a})},onChange:this.handleChange,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},n.map((function(e){return l.a.createElement(EN,{key:e.id,value:e.id},"".concat(e.first_name," ").concat(e.last_name))}))))),c&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(null===c||void 0===c?void 0:c.first_name,null===c||void 0===c?void 0:c.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(c.first_name," ").concat(c.last_name)),l.a.createElement("p",{className:"mb-0"},c.role.split("_").join(" ")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"due_date",label:"Due Date"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"priority",label:"Priority"},l.a.createElement(ku.a,{placeholder:"Select Priority"},l.a.createElement(EN,{value:"NORMAL"},l.a.createElement("span",{style:{backgroundColor:"#fcd966"},className:"status-tag"}),"Normal"),l.a.createElement(EN,{value:"HIGH"},l.a.createElement("span",{style:{backgroundColor:"#eb8357"},className:"status-tag"}),"High"),l.a.createElement(EN,{value:"LOW"},l.a.createElement("span",{style:{backgroundColor:"#7fd4ba"},className:"status-tag"}),"Low")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Description"))},l.a.createElement(fN,{className:"text-area-main text-area-task",placeholder:"Enter Description"})))))))),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningM(!1)},heading:"Are you sure you want to exit editing this Post?",handlePostDrawer:!0,closePostDrawer:function(){e.props.onClose(),e.formRef.current.resetFields()}}))}}]),t}(n.Component),bN=Object(r.withRouter)(gN),NN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,posts:[],selectedData:null,pagination:{current:1,pageSize:15},loading:!1},e.showPost=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,selectedData:t})},e.getPostDateColor=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return t?"gray":n.isSame(a,"day")?"#F2994A":n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0},e.getPostDateText=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MMMM D, YYYY")},e.changePostStatus=function(a,t){var n=e.state.posts;$u(a.id,{completed:t}).then((function(l){var c=n.findIndex((function(e){return e.id===a.id}));n[c].completed=t,e.setState({posts:n}),Mm.b.success("Updated post status")}))},e.postColumns=[{title:"POST NAME",render:function(a){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{checked:a.completed,onChange:function(){return e.changePostStatus(a,!a.completed)}},a.name))},sorter:!0},{title:"TYPE",dataIndex:"post_type",render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.split("_").join(" "))||"-")},sorter:!0},{title:"PRIORITY",dataIndex:"priority",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"ASSIGNEE",dataIndex:"assignee",render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},"MM"),"".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"-"))},sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"DUE DATE"),sorter:!0,render:function(a){return l.a.createElement(l.a.Fragment,null,a?l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:e.getPostDateColor(a)}},e.getPostDateText(a)):"-")}}],e.getPosts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),zu(Object(wu.a)({account:e.props.match.params.id},a)).then((function(t){e.setState({posts:t.data.results,loading:!1,pagination:{current:a.page||1,total:t.data.count}})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.getPosts({search:a.target.value,page:1})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var e=this,a=this.state,t=a.pagination,n=a.loading;return this.props.pagination||(t=!1),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{onClick:function(){return e.showPost(!0)},className:"new-opportunity-btn text-uppercase"},"CREATE")),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("10")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),this.state.posts.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"carpet-cleaning-table border-0",columns:this.postColumns,dataSource:this.state.posts,size:"middle",loading:n,pagiantion:t,rowKey:function(e){return e.id}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.add_new_notes_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{onClick:function(){return e.showPost(!0)},className:"mb-0 approved-btn",style:{cursor:"pointer"}},"Create Post"))))),l.a.createElement(bN,{data:this.state.selectedData,onSuccess:Object(Qm.a)($m.a.mark((function a(){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.showPost(!1);case 2:return a.next=4,e.getPosts();case 4:case"end":return a.stop()}}),a)}))),visible:this.state.visible,onClose:function(){return e.showPost(!1)}}))}}]),t}(n.Component),yN=(Object(r.withRouter)(NN),function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visibleProposal:!1,proposals:[]},e.columns=[{title:"Proposal name",dataIndex:"name",sorter:!0},{title:"Associated project",dataIndex:"project",sorter:!0,render:function(e){return Object.keys(e).map((function(a,t){return l.a.createElement("span",{key:t},e[a].name)}))}},{title:"Billing Account",dataIndex:"customer_contact",sorter:!0,render:function(e){return Object.keys(e).map((function(a,t){return l.a.createElement("span",{key:t},e[a].account.name)}))}},{title:"Status",dataIndex:"status",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},e)},sorter:!0}],e.showViewProposal=function(a){e.setState({visibleProposal:a})},e.fetchProposals=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Uf(Object(wu.a)({opportunity:e.props.match.params.id},a)).then((function(a){e.setState({proposals:a.data.results})})).catch((function(e){td(e)}))},e.onSearch=function(a){e.fetchProposals({search:a.target.value})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchProposals()}},{key:"render",value:function(){var e=this,a=this.state.proposals,t=this.props.hideTitle;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{className:"add-btn-collapse text-capitalize"},"ADD"))),t&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("4")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),a.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all carpet-cleaning-table border-0",columns:this.columns,dataSource:a,size:"middle",pagination:!1,locale:{emptyText:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.propsal_icon_add,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No proposal"))))},onRow:function(a,t){return{onClick:function(a){e.showViewProposal(!0)}}}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.propsal_icon_add,alt:"proposal_icon_add",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1 text-gray-tag"},"No proposal"))))),l.a.createElement(Vf,{visible:this.state.visibleProposal,onClose:function(){return e.showViewProposal(!1)}}))}}]),t}(n.Component)),wN=(Object(r.withRouter)(yN),function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i=this.props.siteData;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"CUSTOMER_OWNER"===(null===i||void 0===i||null===(e=i.account)||void 0===e?void 0:e.account_type)?"Billing / Site Manager Account":"SITE_OWNER"===(null===i||void 0===i||null===(a=i.account)||void 0===a?void 0:a.account_type)?"Site Manager Account":"Billing"),l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 mb-4 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,null===i||void 0===i||null===(t=i.account)||void 0===t?void 0:t.name),l.a.createElement("p",{className:"mb-0"},"CUSTOMER_OWNER"===(null===i||void 0===i||null===(n=i.account)||void 0===n?void 0:n.account_type)?"Billing / Site Manager Account":"SITE_OWNER"===(null===i||void 0===i||null===(c=i.account)||void 0===c?void 0:c.account_type)?"Site Manager Account":"Billing"))))),l.a.createElement("div",{className:"col-12"},i?l.a.createElement("div",{className:"row mx-0 mb-3 site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"text-capitalize"},i.name||"-"))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(i.street_address||""," ").concat(i.apartment||""," ").concat(i.city||""," ").concat(i.state||""," ").concat(i.country||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},i.email||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(i.phone)))):l.a.createElement("div",{className:"row mx-0 no-data-card-row no-data-card-row-2 align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.location_gray}),l.a.createElement("h6",{className:"mb-0"},"No Site Information")))))))}}]),t}(n.Component)),_N=fu.a.Panel,SN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={visibleConfirm:!1,siteData:null},e.getSiteData=function(){fp(e.props.match.params.id).then((function(a){var t=[{title:"Sites",url:zm.dashboard.owner_account.self},{title:a.data.name||"-",url:"#"}];e.props.setBreadcrumb(t),e.setState({siteData:a.data})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getSiteData()}},{key:"render",value:function(){var e=this,a=this.state.siteData;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-info-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 steps-main-div-inn mt-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(_N,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(dh.a)(zm.dashboard.owner_account.site_account.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement(wN,{siteData:a})),l.a.createElement(_N,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Documents")),key:"2"},l.a.createElement(pN,Object.assign({},this.props,{siteData:a,hideTitle:!0})))))),l.a.createElement(dN,{heading:"You\u2019ve successfully created this Billing & Site Manager Account!",subHeading:l.a.createElement("div",null,l.a.createElement("p",{className:"m-0"},"To view this account as a Billing, select"," ",l.a.createElement(Vm.a,{className:"border-0 shadow-none p-0 bg-transparent"},"View Billing Account.")),l.a.createElement("p",{className:"m-0"},"To view this account as a Site Manager, select"," ",l.a.createElement(Vm.a,{className:"border-0 shadow-none p-0 bg-transparent"},"View Site Manager Account."))),visible:this.state.visibleConfirm,onClose:function(){return e.setState({visibleConfirm:!1})}}))))))}}]),t}(n.Component),xN=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(SN)),CN=(n.Component,n.Component,vf.a.TabPane),ON=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={tab:"1",siteData:null},e.tabChange=function(a){e.setState({tab:a})},e}return Object(d.a)(t,[{key:"render",value:function(){this.state.siteData;var e=[{name:"Summary",id:1,component:l.a.createElement(xN,null)},{name:"Documents",id:2,component:l.a.createElement(pN,null)}];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},l.a.createElement(vf.a,{activeKey:this.state.tab,onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},e.map((function(e){return l.a.createElement(CN,{tab:"".concat(e.name),key:e.id},e.component)}))))))}}]),t}(n.Component),kN=Object(r.withRouter)(ON),jN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={sites:[],visible:!1,pagination:{current:1,pageSize:15},loading:!1,view:!1,total:null},e.siteColumns=[{title:"SITE NAME",dataIndex:"name",sorter:!0},{title:"SITE MANAGER ACCOUNT",dataIndex:"account",sorter:!0,render:function(e){return l.a.createElement("span",null,"CUSTOMER_OWNER"==e.account_type?"Billing, Site Manager Account":"Site Manager Account")}},{title:"ADDRESS",dataIndex:"",sorter:!0,render:function(e){return l.a.createElement("span",null,e.street_address||""," ",l.a.createElement("br",null),e.city||"",l.a.createElement("br",null)," ",e.state||""," ",e.country||""," ",e.zip_code||"")}},{title:"EMAIL ADDRESS",dataIndex:"email",sorter:!0},{title:"PHONE NUMBER",dataIndex:"phone",sorter:!0}],e.getSites=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),hp(Object(wu.a)({account:e.props.match.params.id},a)).then((function(t){e.setState({sites:!1===e.props.viewAll?t.data.results.slice(0,10):t.data.results,loading:!1,total:t.data.count,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:!1===e.props.viewAll?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.getSites({search:a.target.value,page:1})},e.handleChange=function(a){e.getSites({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getSites()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",this.state.total),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("3")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "),!this.props.hideTitle&&l.a.createElement(Vm.a,{className:"edit-btn-summary ml-auto",onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.owner_account.edit,{id:e.props.match.params.id}),editTab:"4"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),this.state.sites.length>0?this.state.view?l.a.createElement("div",{className:"col-12 table-responsive main-table-div pt-3"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.siteColumns,dataSource:this.state.sites,size:"middle",pagination:!1!==this.props.viewAll&&this.state.pagination,onChange:this.handleChange,onRow:function(e,a){return{onClick:function(a){return o.push(Object(Sf.a)(zm.dashboard.owner_account.site_account.view,{id:e.id}))}}}})):l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},l.a.createElement("div",{className:"col-12"},this.state.sites.map((function(e){return l.a.createElement("div",{style:{minHeight:"102px"},key:e.id,onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.owner_account.site_account.view,{id:e.id}))},className:"row mx-0 site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(e.apartment||""," ").concat(e.street_address||""," ").concat(e.city||""," ").concat(e.state||""," ").concat(e.country||""," ").concat(e.zip_code||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0 text-elipsiss"},e.email||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(e.phone))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Sites")))))))}}]),t}(n.Component),IN=Object(r.withRouter)(jN),AN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},data:[],page:1,view:!1,total:null},e.contactColumns=[{title:"CONTACT NAME",dataIndex:"full_name",sorter:!0},{title:"LAST ACTIVITY DATE",dataIndex:"modified",sorter:!0,render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))}}],e.handleChange=function(a){e.fetchContact({page:a.current})},e.Pagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchContactonLoadmore()}))},e.fetchContactonLoadmore=function(){e.setState({loading:!0}),yh({account:e.props.match.params.id,page:e.state.page}).then((function(a){e.setState({data:[].concat(Object(Ou.a)(e.state.data),Object(Ou.a)(a.data.results)),loading:!1})}))},e.fetchContact=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({account:e.props.match.params.id},a),{},{page:e.state.page})).then((function(t){e.setState({data:e.props.viewAll?t.data.results:t.data.results.slice(0,10),loading:!1,total:t.data.count,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:!1===e.props.viewAll?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.fetchContact({search:a.target.value,page:1})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchContact()}},{key:"render",value:function(){var e=this,a=this.state.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12 p-0 service-family-table"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",this.state.total),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("4")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "),!this.props.hideTitle&&l.a.createElement(Vm.a,{className:"edit-btn-summary ml-auto",onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.owner_account.edit,{id:e.props.match.params.id}),editTab:"5"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),a.length>0?this.state.view?l.a.createElement("div",{className:"col-12 table-responsive opportunity-db-table contact-info-table main-table-div pt-3"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.contactColumns,dataSource:a,size:"middle",pagination:!1!==this.props.viewAll&&this.state.pagination,onChange:this.handleChange,onRow:function(e,a){return{onClick:function(a){return o.push(Object(Sf.a)(zm.dashboard.contacts.view,{id:e.id}))}}}})):l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},a.map((function(e){var a,t,n,c;return l.a.createElement("div",{className:"col-12 col-sm-6",onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.contacts.view,{id:e.id}))}},l.a.createElement("div",{style:{height:"100px",minHeight:"100px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e?void 0:e.role," ",null===e||void 0===e?void 0:e.account.name),l.a.createElement("br",null),l.a.createElement("p",{className:"mb-0"},(null===e||void 0===e?void 0:e.default_phone)&&(null===e||void 0===e?void 0:e.default_email)?"".concat((null===e||void 0===e||null===(a=e.default_phone)||void 0===a?void 0:a.phone_number)||" "," | ").concat((null===e||void 0===e||null===(t=e.default_email)||void 0===t?void 0:t.email)||" "):(null===e||void 0===e?void 0:e.default_phone)?(null===e||void 0===e||null===(n=e.default_phone)||void 0===n?void 0:n.phone_number)||" ":(null===e||void 0===e||null===(c=e.default_email)||void 0===c?void 0:c.email)||" ")))))})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},this.state.loading&&l.a.createElement(Wv.a,null),!0===this.props.viewAll&&!this.state.loading&&a.length!=this.state.total&&l.a.createElement(Vm.a,{onClick:this.Pagination},"Load More")))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Contacts")))))))}}]),t}(n.Component),DN=Object(r.withRouter)(AN),TN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"NAME",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.document},e.name)))}},{title:"SIZE",sorter:!0,dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE FORMAT",sorter:!0,dataIndex:"format"}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("account",e.props.match.params.id),n.append("document",t),Wu(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchFiles=function(){Gu({account:e.props.match.params.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"new-opportunity-btn text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("5")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 mt-3 table-responsive main-table-div documents-table-main"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:!1,className:" border-0 carpet-cleaning-table",columns:this.columns,dataSource:this.state.files,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),RN=Object(r.withRouter)(TN),MN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,posts:[],selectedData:null,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},loading:!1},e.showPost=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,selectedData:t})},e.getPostDateColor=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?"gray":n.isSame(a,"day")?"#F2994A":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0:"gray":"gray"},e.getPostDateText=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MMMM D, YYYY"):"No Due Date":"No Due Date"},e.changePostStatus=function(a,t){var n=e.state.posts;$u(a.id,{completed:t}).then((function(l){var c=n.findIndex((function(e){return e.id===a.id}));n[c].completed=t,e.setState({posts:n}),Mm.b.success("Updated post status")}))},e.postColumns=[{title:"POST NAME",render:function(a){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{checked:a.completed,onChange:function(){return e.changePostStatus(a,!a.completed)},onClick:function(e){return e.stopPropagation()},className:"post-checkbox-opacity"},a.name))},sorter:!0},{title:"TYPE",dataIndex:"post_type",render:function(e){return l.a.createElement("div",null,bd(e))},sorter:!0},{title:"PRIORITY",dataIndex:"priority",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"ASSIGNEE",dataIndex:"assignee",render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},(null===e||void 0===e?void 0:e.first_name)?l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name)):" ","".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"-"))},sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"DUE DATE"),sorter:!0,render:function(a){return l.a.createElement(l.a.Fragment,null,a?l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:e.getPostDateColor(a)}},e.getPostDateText(a)):"-")}}],e.getPosts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),zu(Object(wu.a)({account:e.props.match.params.id},a)).then((function(t){e.setState({posts:e.props.hideTitle?t.data.results.slice(0,10):t.data.results,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.hideTitle?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.getPosts({search:a.target.value,page:1})},e.handleChange=function(a){e.getPosts({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var e=this,a=this.state,t=(a.pagination,a.loading);return this.props.pagination||!1,l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{onClick:function(){return e.showPost(!0)},className:"new-opportunity-btn"},"+ Create")),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("10")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),this.state.posts.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div post-table"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.postColumns,dataSource:this.state.posts,rowClassName:function(e){if(e.completed)return"post-opacity"},size:"middle",loading:t,onChange:this.handleChange,pagination:!this.props.hideTitle&&this.state.pagination,rowKey:function(e){return e.id},onRow:function(a,t){return{onClick:function(t){e.showPost(!0,a)}}}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 col-sm-2 mx-auto text-center curser-pointer",onClick:function(){return e.showPost(!0)}},l.a.createElement("img",{src:Rm.note_add_new_create_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 approved-btn"},"Create Post"))))),l.a.createElement(bN,{data:this.state.selectedData,onSuccess:Object(Qm.a)($m.a.mark((function a(){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.showPost(!1);case 2:return a.next=4,e.getPosts();case 4:case"end":return a.stop()}}),a)}))),visible:this.state.visible,onClose:function(){return e.showPost(!1)}}))}}]),t}(n.Component),FN=Object(r.withRouter)(MN),PN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={main:null,billing:null},e.handleBillingAddress=function(){var a=e.state.billing;return!!(a&&(null===a||void 0===a?void 0:a.street_address)||(null===a||void 0===a?void 0:a.apartment)||(null===a||void 0===a?void 0:a.county)||(null===a||void 0===a?void 0:a.city)||(null===a||void 0===a?void 0:a.state)||(null===a||void 0===a?void 0:a.zip_code))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a=this;(e={account:this.props.match.params.id},id(ad("account.customerMainAddress"),e)).then((function(e){a.setState({main:e.data.results[0]})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})),function(e){return id(ad("account.customerBillingAddress"),e)}({account:this.props.match.params.id}).then((function(e){a.setState({billing:e.data.results[0]})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.main,n=a.billing;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},!this.props.hideTitle&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},!this.props.hideTitle&&l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.customer_account.edit,{id:e.props.match.params.id}),editTab:"3"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},l.a.createElement("div",{className:"col-12"},t?l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Main Address"))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(t.street_address||""," ").concat(t.apartment||""," ").concat(t.county||""," ").concat(t.city||""," ").concat(t.state||""," ").concat(t.zip_code||""," ").concat(t.country||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},t.email||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(t.phone)||"-"))):l.a.createElement("div",{className:"row mx-0 no-data-card-row  bg-transparent no-data-card-row-2 align-items-center mb-0 justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.location_gray}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Address Information"))),this.handleBillingAddress()&&l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Billing Address"))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat((null===n||void 0===n?void 0:n.street_address)||""," ").concat((null===n||void 0===n?void 0:n.apartment)||""," ").concat((null===n||void 0===n?void 0:n.county)||""," ").concat((null===n||void 0===n?void 0:n.city)||""," ").concat((null===n||void 0===n?void 0:n.state)||""," ").concat((null===n||void 0===n?void 0:n.zip_code)||""," ").concat((null===n||void 0===n?void 0:n.country)||"")))))))))}}]),t}(n.Component),VN=Object(r.withRouter)(PN),qN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={opportunities:[],pagination:{current:1,pageSize:15},loading:!1},e.opportunitiesColumns=[{title:"OPPORTUNITY ID",dataIndex:"id",sorter:!0},{title:"OPPORTUNITY NAME",dataIndex:"name",sorter:!0},{title:"STATUS",dataIndex:"status",sorter:!0,render:function(e){return(null===e||void 0===e?void 0:e.title)||"-"}},{title:"OPPORTUNITY SOURCE",dataIndex:"source",sorter:!0,render:function(e){return l.a.createElement("div",null,e.name)}},{title:"LAST ACTIVITY DATE",dataIndex:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:!0}],e.fetchOpportunity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),wv(Object(wu.a)({owner_account:e.props.owner?e.props.owner.id:e.props.match.params.id},a)).then((function(a){e.setState({opportunities:a.data.results,loading:!1})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.fetchOpportunity({search:a.target.value,page:1})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchOpportunity()}},{key:"render",value:function(){var e=this,a=this.state,t=a.pagination,n=a.opportunities,c=a.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},!this.props.hideSearch&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("7")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),n.length>0?l.a.createElement("div",{className:"col-12 table-responsive width-160-id main-table-div"},l.a.createElement(fv.a,{pagination:t,className:"border-0 carpet-cleaning-table",columns:this.opportunitiesColumns,rowKey:function(e){return e.id},onRow:function(e,a){return{onClick:function(a){o.push(Object(dh.a)(zm.dashboard.opportunities.view,{id:e.id}))}}},loading:c,dataSource:n,size:"middle"})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Opportunity_empty_state_icon,alt:"logo",className:"img-fluid"}),l.a.createElement("h6",{className:"text-gray-tag"},"No Opportunities"))))))}}]),t}(n.Component),LN=Object(r.withRouter)(qN),UN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.data,t=e.columns,n=e.rowLink,c=e.pagination,i=e.loading,r=e.checkDisposalRequired,s=e.checkInventoryRequired,m=e.checkLaborRequired,d=e.checkSupplyRequired,u=e.checkFleetRequired,p=e.locale,v=!1;return c&&(v=c),l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table customer-account-table"},l.a.createElement(fv.a,{scroll:{y:450},loading:i,locale:p,className:"main-table-all",columns:t,dataSource:a,pagination:v,onChange:this.props.onTableChange,size:"middle",rowKey:function(e){return e.id},onRow:function(e,a){return{onClick:function(a){o.push(Object(Gm.reverse)(n,{id:e.id}))}}},rowClassName:function(e){return r&&Gd(e)||u&&Qd(e)||s&&Jd(e)||m&&Zd(e)||d&&Xd(e)?"is-required":void 0}}))}}]),t}(n.Component),BN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleTableChange=function(e,a,t){var n="";"descend"===t.order&&(n="-");var l={page:e.current};t.columnKey&&(l.ordering="".concat(n).concat(t.columnKey))},n.showWorkList=function(e){n.setState({visible:!0,workHistory:e})},n.columns=[{title:"ACCOUNT NAME",key:"name",dataIndex:"name",sorter:{compare:function(e,a){return e-a}}},{title:"ACCOUNT TYPE",sorter:{compare:function(e,a){return e.account_type-a.account_type}},render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},"CUSTOMER_OWNER"==e.account_type?"Billing, Site Manager":"SITE_OWNER"===e.account_type?"Site Manager":"Billing")}},{title:"WORK HISTORY ",dataIndex:"type",sorter:{compare:function(e,a){return console.log(e,a)}},render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&(e.opportunity.length>0?l.a.createElement("div",{className:"d-flex align-items-center associated-history-div"},l.a.createElement("span",{className:"associated-history"},"".concat(e.opportunity[0]))," ",l.a.createElement("span",null,"(Opportunity)")):l.a.createElement("div",{className:"d-flex align-items-center associated-history-div"},l.a.createElement("span",{className:"associated-history"},"".concat(e.proposal[0]))," ",l.a.createElement("span",null,"(Proposal)"))),e.opportunity.length+e.proposal.length>1&&l.a.createElement("span",{className:"d-inline-block count-div-tag"},"and"," ",l.a.createElement("span",{onClick:function(){return n.showWorkList(e)},className:"more-text cursor-pointer"},e.opportunity.length+e.proposal.length-1," more")))}}],n.onClose=function(){n.setState({visible:!1})},n.fetchAssociatedAccounts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({loading:!0}),n.props.hideTitle&&(e.page=1),bp(n.props.match.params.id,Object(wu.a)({},e)).then((function(e){n.setState({accounts:e.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).forEach((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){n.setState({loading:!1})}))},n.onSearch=function(e){n.fetchAssociatedAccounts({search:e.target.value})},n.state={accounts:[],accountsList:[],loading:!1,visible:!1},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchAssociatedAccounts()}},{key:"render",value:function(){var e=this,a=this.props,t=a.pagination,n=a.hideTitle,c=this.state,i=c.loading,r=c.accounts,s=c.visible,o=c.workHistory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),n&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("6")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row associated-table my-3"},r.length>0?l.a.createElement(UN,{data:r,loading:i,pagination:t,columns:this.columns}):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"no-data-wrapper row d-flex",style:{alignItems:"center"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"No Data"}),l.a.createElement("h6",{className:"text-gray-tag"},"No Associated Accounts")))))),s&&l.a.createElement(ju.a,{title:"Work History",placement:"right",className:"main-all-form-modal main-drawer-div",width:500,closable:!0,onClose:this.onClose,visible:s,getContainer:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:this.onClose,type:"primary"},"Close"))},l.a.createElement("div",{className:"row account-history-heading"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0 d-flex align-items-center"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"heading-tag-history"},this.props.customer.name),l.a.createElement("span",{className:"title-details"},"(","CUSTOMER_OWNER"==this.props.customer.account_type?"Billing, Site Manager":"Billing",")")))),l.a.createElement("div",{className:"row opportunity-db-table work-history-table"},l.a.createElement("div",{className:"col-12 table-responsive main-table-all"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",{className:"ant-table-thead"},l.a.createElement("tr",null,l.a.createElement("th",{className:"ant-table-cell"},"Work History"))),l.a.createElement("tbody",null,o&&o.opportunity&&o.opportunity.map((function(e){return l.a.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},l.a.createElement("td",{className:"ant-table-cell font-weight-bold"},e," ",l.a.createElement("span",{className:"font-weight-normal"},"(Opportunity)")))})),o&&o.proposal&&o.proposal.map((function(e){return l.a.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},l.a.createElement("td",{className:"ant-table-cell font-weight-bold"},e," ",l.a.createElement("span",{className:"font-weight-normal"},"(Proposal)")))})))))))))}}]),t}(n.Component),WN=Object(r.withRouter)(BN),YN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props.owner;return(null===a||void 0===a?void 0:a.id)?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row summary-info-cr mt-3"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES MANAGERS")),a.sales_manager.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_manager.map((function(a,t){var n,c;return l.a.createElement("div",{className:"col-12",key:t},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.id===(null===(n=e.props.owner)||void 0===n?void 0:n.point_owner)&&"active")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(a.first_name,a.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,a.first_name," ",a.last_name),l.a.createElement("p",{className:"mb-0"},bd(a.role)),a.id===(null===(c=e.props.owner)||void 0===c?void 0:c.point_owner)&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES ASSISTANTS")),a.sales_assistant.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_assistant.map((function(a,t){var n,c;return l.a.createElement("div",{className:"col-12",key:t},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.id===(null===(n=e.props.owner)||void 0===n?void 0:n.point_owner)&&"active")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(a.first_name,a.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,a.first_name," ",a.last_name),l.a.createElement("p",{className:"mb-0"},bd(a.role)),a.id===(null===(c=e.props.owner)||void 0===c?void 0:c.point_owner)&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALESPEOPLE")),a.sales_person.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_person.map((function(a,t){var n,c;return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.id===(null===(n=e.props.owner)||void 0===n?void 0:n.point_owner)&&"active")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(a.first_name,a.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,a.first_name," ",a.last_name),l.a.createElement("p",{className:"mb-0"},bd(a.role)),a.id===(null===(c=e.props.owner)||void 0===c?void 0:c.point_owner)&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople")))))))))):l.a.createElement("div",null)}}]),t}(n.Component),KN=Object(r.withRouter)((function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(!1),s=Object(yp.a)(r,2),m=s[0],d=s[1],u=Object(n.useState)({current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}),p=Object(yp.a)(u,2),v=p[0],h=p[1],f=Object(n.useState)({search:null,page:1}),E=Object(yp.a)(f,2),g=E[0],b=E[1],N=[{title:"PROPOSAL ID",dataIndex:"id",sorter:!0},{title:"PROPOSAL NAME",dataIndex:"name",sorter:!0},{title:"STATUS",dataIndex:"status",sorter:!0,render:function(e){return(null===e||void 0===e?void 0:e.title)||"-"}},{title:"ASSOCIATED OPPORTUNITY",dataIndex:"opportunity",sorter:!0,render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.name)||"-")}},{title:"Billing Account",dataIndex:"customer_contact",sorter:!0,render:function(e){return Object.keys(e).map((function(a,t){return l.a.createElement("span",{key:t},e[a].account&&e[a].account.name)}))},key:"account"},{title:"LAST ACTIVITY DATE",dataIndex:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:!0}];Object(n.useEffect)((function(){y(Object(wu.a)({},g))}),[g]);var y=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(!0),Uf(Object(wu.a)({owner_account:e.owner?e.owner.id:e.match.params.id},a)).then((function(a){i(e.viewAll?a.data.results:a.data.results.slice(0,10)),d(!1),h(Object(wu.a)(Object(wu.a)({},v),{},{total:e.viewAll?a.data.count:10}))})).catch((function(e){}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(e.hideTitle?"":"mt-30 no-data-card-row-new")},!e.hideSearch&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(e){b({search:e.target.value,page:1})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),e.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.tabChange("12")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),c.length>0?l.a.createElement("div",{className:"col-12 table-responsive width-160-id main-table-div"},l.a.createElement(fv.a,{pagination:0!=e.viewAll&&v,className:"border-0 carpet-cleaning-table",columns:N,rowKey:function(e){return e.id},loading:m,onRow:function(e,a){return{onClick:function(a){return o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:e.id}))}}},dataSource:c,onChange:function(e){b(Object(wu.a)(Object(wu.a)({},g),{},{page:e.current})),h(Object(wu.a)(Object(wu.a)({},e),{},{current:e.current}))},size:"middle"})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Opportunity_empty_state_icon,alt:"logo",className:"img-fluid"}),l.a.createElement("h6",{className:"text-gray-tag"},"No Proposals"))))))})),GN=fu.a.Panel;function zN(e){}var HN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={visibleTaskCreate:!1,visibleCreateNote:!1,visibleViewContact:!1,visibleCreateContact:!1,visibleViewAccount:!1,visibleAddAccount:!1,visibleConfirm:!1,updated_owner:null,visibleWarning:!1},e.showCreateTask=function(a){e.setState({visibleTaskCreate:a})},e.showCreateNote=function(a){e.setState({visibleCreateNote:a})},e.showViewContact=function(a){e.setState({visibleViewContact:a})},e.showCreateContact=function(a){e.setState({visibleCreateContact:a})},e.showViewAccount=function(a){e.setState({visibleViewAccount:a})},e.showAddAccount=function(a){e.setState({visibleAddAccount:a})},e.updateAccountRole=function(){op(e.props.match.params.id,{account_type:qp}).then((function(a){e.setState({visibleConfirm:!0,visibleWarning:!1,updated_owner:a.data})})).catch((function(e){td(e)}))},e.viewOwner=function(a){o.push(Object(Sf.a)(zm.dashboard.owner_account.view,{id:a})),e.setState({visibleConfirm:!1})},e.viewCustomer=function(a){o.push(Object(Sf.a)(zm.dashboard.customer_account.view,{id:a})),e.setState({visibleConfirm:!1})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n=this,c=this.props.owner,i=this.state.updated_owner;return t=c&&c.account_source?-1!=c.account_source.indexOf("_")?c.account_source.toLowerCase().replace(/_/g," "):c.account_source.toLowerCase():"-",c.id?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:zN,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.owner_account.edit,{id:c.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase "},"ACCOUNT NAME"),l.a.createElement("h5",{className:"font-weight-bold"},c.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"ACCOUNT TYPE"),l.a.createElement("h5",{style:{textTransform:"capitalize",minWidth:300},className:"mb-0"},(null===i||void 0===i?void 0:i.account_type)===qp||c.account_type===qp?l.a.createElement("div",null,l.a.createElement("a",{className:"activeRole"}," ",Lp.SITE_OWNER," "),l.a.createElement("a",{className:"nonActiveRole ml-2",onClick:function(){o.push(Object(Sf.a)(zm.dashboard.customer_account.view,{id:c.id}))}},Lp.CUSTOMER)):l.a.createElement("div",null,l.a.createElement("span",null,Lp[c.account_type]),l.a.createElement("br",null),l.a.createElement("span",null,l.a.createElement("button",{className:"create-account mt-2",onClick:function(){return n.setState({visibleWarning:!0})}},"+ Billing account"))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Industry"),l.a.createElement("h5",null,(null===c||void 0===c||null===(e=c.industry)||void 0===e?void 0:e.title)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Website"),l.a.createElement("h5",null,l.a.createElement("a",{href:"https://".concat(null===c||void 0===c?void 0:c.website),target:"_blank"},(null===c||void 0===c?void 0:c.website)||l.a.createElement("span",{className:"text-dark"},"-")))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Account Source"),l.a.createElement("h5",{className:"text-capitalize"},t||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Note"),l.a.createElement("h5",null,(null===c||void 0===c?void 0:c.note)||"-")))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Posts")),key:"10"},l.a.createElement(FN,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Activity ")),key:"13"},l.a.createElement(oN,Object.assign({},this.props,{hideTitle:!0,hideSearch:!0,owner:!0}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Payment Information"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.owner_account.edit,{id:c.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"2"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Sales Tax Exemption Status"),l.a.createElement("h5",{className:"mb-0"},(null===(a=c.payment_information)||void 0===a?void 0:a.tax_exemption)?"Exempt":"Non Exempt")))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.owner_account.edit,{id:c.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"3"},l.a.createElement(VN,{hideTitle:!0})),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Sites ",l.a.createElement("sup",null,"*")),l.a.createElement("div",{className:"d-flex align-items-center"},cu(this.props.owner,"SITES")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.owner_account.edit,{id:c.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"4"},l.a.createElement(IN,Object.assign({},this.props,{hideTitle:!0,viewAll:!1}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Contacts "),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.owner_account.edit,{id:c.id}),editTab:"5"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"5"},l.a.createElement(DN,Object.assign({},this.props,{hideTitle:!0,viewAll:!1}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Team "),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.owner_account.edit,{id:c.id}),editTab:"6"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"6"},l.a.createElement(YN,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Documents")),key:"7"},l.a.createElement(RN,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Associated Accounts")),key:"8"},l.a.createElement(WN,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Opportunities")),key:"9"},l.a.createElement(LN,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Proposals")),key:"14"},l.a.createElement(KN,Object.assign({},this.props,{hideTitle:!0,viewAll:!1}))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Projects")),key:"11"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return n.props.tabChange("8")}},"VIEW ALL")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.folder_gray_no_data,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Projects"))))))),l.a.createElement(GN,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Work Orders")),key:"12"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement(Vm.a,{className:"add-btn-collapse text-uppercase"},"CREATE")),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return n.props.tabChange("9")}},"VIEW ALL")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.work_setting,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Work Order")))))))))),l.a.createElement(iv,{heading:"Are you sure you want this account to function as  Billing & Site Manager Account?",subHeadingUOM:l.a.createElement("p",{style:{color:"#828282",width:"98%"}}," ","If yes, select \u201cYes, I would like to\u201d. If no, select \u201cNo, go back\u201d."),visible:this.state.visibleWarning,changeAccountTypeConfirmation:!0,changeAccountType:function(){n.updateAccountRole()},onClose:function(){return n.setState({visibleWarning:!1})}}),l.a.createElement(dN,{heading:"You\u2019ve successfully created this Billing & Site Manager Account!",subHeading:l.a.createElement("div",null,l.a.createElement("p",{className:"m-0"},"To view this account as a Billing, select"," ",l.a.createElement(Vm.a,{onClick:function(){return n.viewCustomer(c.id)},className:"border-0 shadow-none p-0 bg-transparent"},"View Billing Account.")),l.a.createElement("p",{className:"m-0"},"To view this account as a Site Manager, select"," ",l.a.createElement(Vm.a,{onClick:function(){return n.viewOwner(c.id)},className:"border-0 shadow-none p-0 bg-transparent"},"View Site Manager Account."))),id:c.id,visible:this.state.visibleConfirm,onClose:function(){return n.setState({visibleConfirm:!1})}}))):l.a.createElement("div",null)}}]),t}(n.Component),$N=Object(Lm.b)((function(e){return Object(wu.a)({},e)}))(Object(r.withRouter)(HN)),QN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-info-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 steps-main-div-inn mt-3"},l.a.createElement($N,this.props)))))}}]),t}(n.Component),JN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).projectColumns=[{title:"PROPOSAL NAME",dataIndex:"docs_name",sorter:!0},{title:"Size",dataIndex:"size",sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"FORMAT"),dataIndex:"format",sorter:!0}],e.projectData=[{key:"1",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"2",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"3",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"4",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")}],e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.folder_gray_no_data,alt:"cloud upload",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1 text-gray-tag"},"No Projects"))))))}}]),t}(n.Component),ZN=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{className:"new-opportunity-btn text-capitalize"},"CREATE")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.work_setting,alt:"cloud upload",className:"img-fluid"}),l.a.createElement("h6",{className:"text-gray-tag"},"No Work Order"))))))}}]),t}(n.Component);var XN=vf.a.TabPane,ey=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={tab:"1"},e.tabChange=function(a){e.setState({tab:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.ownerAccountDetailAction(this.props.match.params.id).then((function(){var a=e.props.owner,t=[{title:"Site Manager Accounts",url:zm.dashboard.owner_account.self},{title:a.name,url:"#"}];e.props.setBreadcrumb(t)}))}},{key:"render",value:function(){var e=[{name:"Summary",id:1,component:l.a.createElement(QN,Object.assign({tabChange:this.tabChange},this.props))},{name:"Posts",id:10,component:l.a.createElement(FN,null)},{name:"Activity",id:11,component:l.a.createElement(oN,null)},{name:"Sites",id:3,component:l.a.createElement(IN,null)},{name:"Contacts",id:4,component:l.a.createElement(DN,{viewAll:!0})},{name:"Documents",id:5,component:l.a.createElement(RN,null)},{name:"Associated Accounts",id:6,component:l.a.createElement(WN,this.props)},{name:"Opportunities",id:7,component:l.a.createElement(LN,null)},{name:"Proposals",id:12,component:l.a.createElement(KN,{viewAll:!0})},{name:"Projects",id:8,component:l.a.createElement(JN,null)},{name:"Work Orders",id:9,component:l.a.createElement(ZN,null)}];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},l.a.createElement(vf.a,{activeKey:this.state.tab,onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},e.map((function(e){return l.a.createElement(XN,{tab:"".concat(e.name),key:e.id},e.component)}))))))}}]),t}(n.Component),ay=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{ownerAccountDetailAction:function(e){return function(a){return dp(e).then((function(e){a({type:"CUSTOMER_ACCOUNT_DETAIL_SUCCESS",payload:e.data})}))}},setBreadcrumb:Uv})(Object(r.withRouter)(ey)),ty=ku.a.Option,ny=Pm.a.TextArea,ly={labelCol:{span:24},wrapperCol:{span:24}},cy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={buttonLoading:!1,industry:[],page:1},e.handleSubmit=function(a){if(e.setState({buttonLoading:!0}),e.props.account){var t,n=Object(wu.a)(Object(wu.a)({},a),{},{industry:(null===(t=a.industry)||void 0===t?void 0:t.value)||null,account_source:a.account_source?a.account_source:null});Ru(e.props.account.id,n).then((function(a){Mm.b.success("Billing, Site Manager Account Updated Successfully"),e.props.setAccount(a.data,2),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))}else{Tu(Object(wu.a)(Object(wu.a)({},a),{},{industry:a.industry?a.industry.value:null,account_source:a.account_source?a.account_source:null})).then((function(a){Mm.b.success("Billing, Site Manager Account Created Successfully"),e.setState({buttonLoading:!1}),e.props.setAccount(a.data,2)})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))}},e.getIndustries=function(){Np({page:e.state.page}).then((function(a){var t;1===e.state.page?e.setState({industry:null===(t=a.data)||void 0===t?void 0:t.results}):e.setState((function(e){return{industry:[].concat(Object(Ou.a)(e.industry),Object(Ou.a)(a.data.results))}}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getIndustries()}},{key:"render",value:function(){var e=this,a=this.state.buttonLoading;this.props.account;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit},ly,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Account Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{initialValue:qp,name:"account_type",label:"Account Type *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{disabled:!0,showArrow:!1},l.a.createElement(ty,{value:"CUSTOMER"},"Billing"),l.a.createElement(ty,{value:"SITE_OWNER"},"Site Manager"),l.a.createElement(ty,{value:"CUSTOMER_OWNER"},Lp.CUSTOMER_OWNER)))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"industry",label:"Industry",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&e.state.page<3&&e.setState({page:e.state.page+1},(function(){return e.getIndustries()}))}}," ",this.state.industry.map((function(e){return l.a.createElement(ty,{value:e.id},e.title)}))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"website",label:"Website",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"www.website.com"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_source",label:"Account Source",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder account-source-div"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(ty,{value:"ADVERTISEMENT"},"Advertisement"),l.a.createElement(ty,{value:"CONSTRUCTCONNECT"},"ConstructConnect"),l.a.createElement(ty,{value:"WORD_OF_MOUTH"},"Word of Mouth"),l.a.createElement(ty,{value:"MARKETING_ASSISTANT"},"Marketing Assistant")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"note",label:"Note",rules:[{message:"this field is required"}]},l.a.createElement(ny,{placeholder:"Type something",rows:6,style:{height:"auto",paddingTop:15}}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:a,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),iy=ku.a.Option,ry={labelCol:{span:24},wrapperCol:{span:24}},sy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={buttonLoading:!1,duns:null,ein:null},e.formRef=l.a.createRef(),e.onSubmit=function(a){var t,n=a.duns_number.replace(/-/g,"");a.duns_number=n;var l=null===(t=a.ein)||void 0===t?void 0:t.replace(/-/g,"");a.ein=l,e.setState({buttonLoading:!0}),a.account=e.props.account.id,a.default_sales_tax=a.tax_exemption?"EXEMPT":"NON_EXEMPT",Pu(a).then((function(a){Mm.b.success("Payment Created Successfully"),e.props.setPayment(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))},e.onNumberOnlyChange=function(e){var a=e.keyCode||e.which,t=String.fromCharCode(a);new RegExp("[0-9]").test(t)||e.preventDefault()},e.handleDunChange=function(a){var t,n=a.target.value;n=null===(t=n)||void 0===t?void 0:t.match(/\d*/g).join("").match(/(\d{0,2})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,""),e.setState({duns:n},(function(){e.formRef.current.setFieldsValue({duns_number:e.state.duns})}))},e.handleEinChange=function(a){var t,n=a.target.value;n=null===(t=n)||void 0===t?void 0:t.match(/\d*/g).join("").match(/(\d{0,2})(\d{0,7})/).slice(1).join("-").replace(/-*$/g,""),e.setState({ein:n},(function(){e.formRef.current.setFieldsValue({ein:e.state.ein})}))},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state.buttonLoading,t=this.props.payment;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit,hideRequiredMark:!0},ry,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"credit_rating",label:"Credit Rating *",className:"position-relative",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{disabled:t,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Credit Rating"},l.a.createElement(iy,{value:"LOW_RISK"},"Low Risk"),l.a.createElement(iy,{value:"MODERATE_RISK"},"Moderate Risk"),l.a.createElement(iy,{value:"HIGH_RISK"},"High Risk"),l.a.createElement(iy,{value:"SEVERE_RISK"},"Severe Risk"),l.a.createElement(iy,{value:"OUT_OF_BUSINESS"},"Out of Business"))),l.a.createElement("span",{className:"small-text-div-select position-absolute"},"Please upload credit rating related documents in the documents section.")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"payment_term",label:"Payment Term *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{disabled:t,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Payment Term"},l.a.createElement(iy,{value:"ON_RECEIPT"},"On receipt"),l.a.createElement(iy,{value:"DAYS_15"},"15 Days"),l.a.createElement(iy,{value:"NET_30"},"Net 30"),l.a.createElement(iy,{value:"NET_60"},"Net 60"),l.a.createElement(iy,{value:"NET_30_2_PERCENT"},"Net 30 2% 10 day discount")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"credit_limit",label:"Credit Limit *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:t,placeholder:"Credit Limit"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"duns_number",label:"DUNS Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:t,placeholder:"00-000-0000",onChange:function(a){return e.handleDunChange(a)},onKeyPress:this.onNumberOnlyChange,maxLength:"11"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"Active",label:"Active"},l.a.createElement(ku.a,{disabled:t,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select"},l.a.createElement(iy,{value:!0},"Yes"),l.a.createElement(iy,{value:!1},"No")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"ein",label:"EIN",rules:[]},l.a.createElement(Pm.a,{placeholder:"00-0000000",onChange:function(a){return e.handleEinChange(a)},onKeyPress:this.onNumberOnlyChange,maxLength:"10"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"tax_exemption",label:"Sales Tax Exemption Status *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{disabled:t,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Default Sales Tax"},l.a.createElement(iy,{value:!0,key:"a"},"Exempt"),l.a.createElement(iy,{value:!1,key:"b"},"Non Exempt")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"entity_type",label:"Entity Type"},l.a.createElement(ku.a,{disabled:t,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Entity type"},l.a.createElement(iy,{value:"INDIVIDUAL"},"Individual/sole proprietor or single-member LLC"),l.a.createElement(iy,{value:"CORPORATION"},"C Corporation"),l.a.createElement(iy,{value:"S_CORPORATION"},"S Corporation"),l.a.createElement(iy,{value:"PARTNERSHIP"},"Partnership"),l.a.createElement(iy,{value:"TRUST"},"Trust/estate")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{disabled:t,loading:a,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),oy={labelCol:{span:24},wrapperCol:{span:24}},my=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={checked:!1,county:[],updateMainState:null,updateBillingState:null},e.formRef=l.a.createRef(),e.handleSubmit=function(a){var t={street_address:a.street_address,apartment:a.apartment,city:a.city,state:a.state,zip_code:a.zip_code,country:a.country,phone:a.phone,email:a.email,account:e.props.account.id},n={street_address:a.street_address_1,apartment:a.apartment_1,city:a.city_1,state:a.state_1,zip_code:a.zip_code_1,country:a.country_1,is_same_main_address:e.state.checked,account:e.props.account.id};qu(t).then((function(a){Uu(n).then((function(t){var n={main_address:a.data,billing_address:t.data};e.props.setAddress(n,4),Mm.b.success("Address created Successfully")}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleCheckbox=function(a){e.setState({checked:a.target.checked},(function(){if(e.state.checked){var a=e.formRef.current,t=a.setFieldsValue,n=a.getFieldValue;t({street_address_1:n("street_address"),apartment_1:n("apartment"),city_1:n("city"),state_1:n("state"),zip_code_1:n("zip_code"),country_1:n("country"),county_1:n("county")})}}))},e.phoneNumberValidate=function(e,a,t){(null===a||void 0===a?void 0:a.toString().length)<10?t("minimum digits should be 10"):t()},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e.handleBillingCountyChange=function(a){e.formRef.current.setFieldsValue({state_1:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateBillingState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state_1:t[0].state})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.formRef.current.setFieldsValue({country:"United States",country_1:"United States"}),Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data}),e.setState({updateBillingState:a.data})})).catch((function(a){td(a),e.setState({load:!1})}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.county,n=a.updateMainState,c=a.updateBillingState,i=this.props.address;return i&&(i,i),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit,hideRequiredMark:!0},oy,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 border-rit-div"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h4",null,"Main Address")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:i,placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc"},l.a.createElement(Pm.a,{disabled:i,placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:i,placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},1!==(null===n||void 0===n?void 0:n.length)?l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(n,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))):l.a.createElement(Pm.a,{placeholder:"state"}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:i,placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{key:e.name,value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"},{validator:this.phoneNumberValidate}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,"")},parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"123-456-7890",maxLength:"22"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:i,placeholder:"Email Address"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement("h4",null,"Billing Address"),l.a.createElement("div",{className:"same-address-label position-absolute"},l.a.createElement(Fm.a.Item,{name:"is_same_main_address"},l.a.createElement(tp.a,{disabled:i,checked:this.state.checked,onChange:function(a){return e.handleCheckbox(a)}},"Same as Main Address")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address_1",label:"Street Address",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:i,placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"apartment_1",label:"Apartment, Suite, etc"},l.a.createElement(Pm.a,{disabled:i,placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"county_1",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleBillingCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city_1",label:"City",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:i,placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state_1",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},1!==(null===c||void 0===c?void 0:c.length)?l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onFocus:this.onCountyFocus},Object(lp.uniqBy)(Object(lp.orderBy)(c,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))):l.a.createElement(Pm.a,{placeholder:"state"}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code_1",label:"ZIP/Postal Code",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:i,placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country_1",label:"Country",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{key:e.name,value:e.name},e.name)}))))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{disabled:i,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),dy=ku.a.Option,uy={labelCol:{span:24},wrapperCol:{span:24}},py=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={contacts:[],selectedContacts:[],fetching:!1,visible:!1,contact:[],modalVisible:!1,visibleWarning:!1,positionVisible:!1,positions:[],page:1,totalCount:0,search:""},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0,a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(){var a=e.state.item,t=e.state.selectedContacts.filter((function(e){return e.id!==a.id})),n=e.state.contact.filter((function(e){return e!==a.id}));e.setState({selectedContacts:t,contact:n}),xh({account:null},a.id).then((function(e){Mm.b.success("Contact removed successfully!")})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchContacts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),yh(a).then((function(a){e.setState({contacts:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.getSelectedContacts=function(){var a=e.props.account;yh({account:null===a||void 0===a?void 0:a.id}).then((function(a){e.setState({selectedContacts:a.data.results,contacts:a.data.results,contact:a.data.results.map((function(e){return e.id}))});var t={};a.data.results.forEach((function(e){t["role".concat(e.id)]=e.role})),t.contacts=a.data.results.map((function(e){return e.id})),e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},t),{},{contacts:null}))})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSelect=function(a){e.formRef.current.setFieldsValue({contacts:null});var t=e.state.contacts.find((function(e){return e.id==a}));e.setState({accountPopup:t},(function(){var n;if(t.account&&(null===(n=t.account)||void 0===n?void 0:n.id)!==e.props.account.id)e.setState({modalVisible:!0});else{var l=e.state.selectedContacts.map((function(e){return e.id}));l.push(a);var c=e.state.contacts.filter((function(e){return l.includes(e.id)})),i=c.map((function(e){return e.id}));e.setState({contact:Object(Ou.a)(i),selectedContacts:c,accountPopup:null})}}))},e.callbackContact=function(a){var t=e.state.selectedContacts,n=(t=[].concat(Object(Ou.a)(t),[a])).map((function(e){return e.id}));e.setState({selectedContacts:t,contacts:t,contact:Object(Ou.a)(n)})},e.handleAccountChange=function(){var a,t;xh({contact_account:!0,insert_account:null===(a=e.props)||void 0===a||null===(t=a.account)||void 0===t?void 0:t.id},e.state.accountPopup.id).then((function(){e.setState({modalVisible:!1,accountPopup:null},(function(){e.getSelectedContacts()}))})).catch((function(e){return td(e)}))},e.showWarningModal=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visibleWarning:a,item:t})},e.handleSubmit=function(a){a.contacts=Object(Ou.a)(e.state.contact),a.contacts.map((function(t){xh({account:e.props.account.id,role:a["role".concat(t)]},t).then((function(a){Mm.b.success("Contact added successfully!"),e.props.setAccount(e.props.account,6)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}))},e.showContact=function(){e.setState({visible:!1})},e.fetchPositions=function(){var a=e.state,t=a.page,n=a.search,l={page:t,search:n};e.setState({fetching:!0}),Wh(l).then((function(a){1===t?e.setState({positions:a.data.results,totalCount:a.data.count}):e.setState((function(e){return{positions:[].concat(Object(Ou.a)(e.positions),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.showPosition=function(a){e.setState({positionVisible:a})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.getSelectedContacts()}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.contacts,c=a.selectedContacts,i=a.positions,r=a.totalCount,s=this.props.account;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,hideRequiredMark:!0,ref:this.formRef},uy,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"contacts",label:"Contacts ",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchContacts()},onSearch:this.debounceEvent((function(a){return e.fetchContacts({search:a})}),1e3),onSelect:this.handleSelect,showSearch:!0,className:"customer-contact"},n.map((function(e){var a;return l.a.createElement(dy,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.account?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===e||void 0===e?void 0:e.role)||"")," ",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(a=e.account)||void 0===a?void 0:a.name)||"")):" "))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute text-capitalize",onClick:function(){e.setState({visible:!0})}},"+ Create")),0===c.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_union_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts")))),c.map((function(a){var n,c,s,o;return l.a.createElement("div",{key:a.id,className:"col-12"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{style:{height:"100px",minHeight:"100px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(a.first_name," ").concat(a.last_name)),l.a.createElement("p",{className:"mb-0"},(null===a||void 0===a?void 0:a.default_phone)&&(null===a||void 0===a?void 0:a.default_email)?"".concat((null===a||void 0===a||null===(n=a.default_phone)||void 0===n?void 0:n.phone_number)||" "," | ").concat((null===a||void 0===a||null===(c=a.default_email)||void 0===c?void 0:c.email)||" "):(null===a||void 0===a?void 0:a.default_phone)?(null===a||void 0===a||null===(s=a.default_phone)||void 0===s?void 0:s.phone_number)||" ":(null===a||void 0===a||null===(o=a.default_email)||void 0===o?void 0:o.email)||" ")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"role".concat(a.id),label:"Position",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Search and Select",notFoundContent:null,filterOption:!1,onSearch:function(a){e.setState({page:1,search:a},(function(){e.fetchPositions()}))},showSearch:!0,onFocus:function(){return e.fetchPositions()},dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,t&&l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)))},onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&r!=i.length&&e.setState({page:e.state.page+1},(function(){return e.fetchPositions()}))}},i.map((function(e,a){return l.a.createElement(dy,{value:e.name,key:"".concat(e.name+a)},e.name)})))),l.a.createElement(Vm.a,{className:"create-btn-main create-btn-main-update position-absolute",onClick:function(){return e.showPosition(!0)}},"+ Create"))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(bb,{visible:this.state.positionVisible,onClose:function(){return e.showPosition(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,account:s,visible:this.state.visible,onClose:function(){return e.showContact(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to remove this Contact?",subHeadingUOM:"If you choose to remove this Contact, this might cause issues.",common:!0,commonFunc:function(){e.handleRemove(),e.showWarningModal(!1)}}),l.a.createElement(iv,{changeAccountType:!0,visible:this.state.modalVisible,onClose:function(){return e.setState({modalVisible:!1})},heading:"Are you sure you want to change account for this contact?",subHeadingUOM:" This contact is already tied to an account. If you want to change the account for this contact, please select Yes, I want to change.",cancelText:"No, cancel this action",okText:"Yes, I want to change",handleAccountChange:this.handleAccountChange}))}}]),t}(n.Component),vy=Object(r.withRouter)(py),hy={labelCol:{span:24},wrapperCol:{span:24}},fy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))},sorter:!0},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("account",e.props.account.id),n.append("document",t),Wu(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchFiles=function(){Gu({account:e.props.account.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},hy,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.state.files.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{pagination:!1,className:"main-table-all border-0 carpet-cleaning-table",columns:this.columns,dataSource:this.state.files,size:"middle"})):l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"Documents",label:"Documents",rules:[{required:!0,message:"please upload a valid docs"}]},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_icon,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or"," ",l.a.createElement("span",{className:"ml-1"},"Browse"))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Vm.a,{className:"validate-btn-main"},"Save and Continue")))))))}}]),t}(n.Component),Ey=(ku.a.Option,{labelCol:{span:24},wrapperCol:{span:24}}),gy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={selectedSite:null,sites:[],county:[],updateMainState:null},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{onClick:function(){return e.handleEdit(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit")))},e.handleEdit=function(a){e.setState({selectedSite:a}),e.formRef.current.setFieldsValue(Object(wu.a)({},a))},e.handleRemove=function(a){gp(a.id).then((function(a){Mm.b.success("Site Removed Successfully"),e.fetchSites()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e.fetchSites=function(){hp({account:e.props.account.id}).then((function(a){e.setState({sites:a.data.results},(function(){e.props.getSiteDetail(e.state.sites)}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSubmit=function(a){a.account=e.props.account.id,e.state.selectedSite?Ep(a,e.state.selectedSite.id).then((function(a){Mm.b.success("Site Updated Successfully"),e.setState({selectedSite:null}),e.formRef.current.resetFields(),e.fetchSites()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):vp(a).then((function(a){Mm.b.success("Site Created Successfully"),e.formRef.current.resetFields(),e.fetchSites()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.formRef.current.setFieldsValue({country:"United States"}),Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.county,n=a.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef,hideRequiredMark:!0},Ey,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Site Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Site Name "}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc",rules:[{required:!1}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(n,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{key:e.name,value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{minLength:10,formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")},parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},this.state.selectedSite?"Edit":"Add"))),0===this.state.sites.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row add-site-blank-row align-items-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"d-inline-block w-100"},"Added sites",l.a.createElement("br",null),"will show up here")))),this.state.sites.map((function(a){return l.a.createElement("div",{key:a.id,className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(a.street_address," ").concat(a.apartment," ").concat(a.city," ").concat(a.state," ").concat(a.country))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},a.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(a.phone))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))))})),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Vm.a,{className:"validate-btn-main",onClick:function(){return Mm.b.success("Billing, Site Manager Account Updated Successfully!")}},"Save and Continue")))))))}}]),t}(n.Component),by=fu.a.Panel,Ny=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={account:null,payment:null,address:null,warningModalVisible:!1,visibleConfirm:!1,unsavedExit:!1,requiredSuccessModalVisible:!1,activeKey:["1"],required:!1},e.setAccount=function(a,t){var n,l,c,i;(null===(n=e.state)||void 0===n||null===(l=n.account)||void 0===l?void 0:l.name)&&(null===(c=e.state)||void 0===c||null===(i=c.account)||void 0===i?void 0:i.account_type)?e.setState({account:a}):e.setState({account:a,unsavedExit:!0});var r=null;e.state.activeKey.length>1&&(r=e.state.activeKey.find((function(e){return e==t}))),r||e.setState((function(e){return{account:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.setPayment=function(a,t){var n,l,c;(null===(n=e.state)||void 0===n||null===(l=n.sites)||void 0===l?void 0:l.length)&&(null===(c=e.state)||void 0===c?void 0:c.address)?e.setState({payment:a,unsavedExit:!1}):e.setState({payment:a});var i=null;e.state.activeKey.length>1&&(i=e.state.activeKey.find((function(e){return e==t}))),i||e.setState((function(e){return{payment:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.setAddress=function(a,t){var n,l,c;(null===(n=e.state)||void 0===n||null===(l=n.sites)||void 0===l?void 0:l.length)&&(null===(c=e.state)||void 0===c?void 0:c.payment)?e.setState({address:a,unsavedExit:!1}):e.setState({address:a});var i=null;e.state.activeKey.length>1&&(i=e.state.activeKey.find((function(e){return e==t}))),i||e.setState((function(e){return{address:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.getSiteDetail=function(a){var t,n;(e.setState({account:Object(wu.a)(Object(wu.a)({},e.state.account),{},{sites:a})}),null===a||void 0===a?void 0:a.length)?(null===(t=e.state)||void 0===t?void 0:t.address)&&(null===(n=e.state)||void 0===n?void 0:n.payment)?(e.setState({sites:a,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState({sites:a,unsavedExit:!0}):e.setState({sites:a,unsavedExit:!0})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.viewOwner=function(a){o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:a})),e.setState({visibleConfirm:!1})},e.viewCustomer=function(a){o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:a})),e.setState({visibleConfirm:!1})},e.handleCollapseChange=function(a){e.setState({activeKey:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{title:"Create Billing & Site Manager Account",url:zm.dashboard.owner_account.create}])}},{key:"render",value:function(){var e=this,a=this.state,t=a.account,n=a.payment,c=a.address,i=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1},setCancel:function(){e.setState({required:!0})}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:i,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},defaultActiveKey:this.props.location.editTab?[this.props.location.editTab]:["1"],onChange:this.handleCollapseChange},l.a.createElement(by,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(cy,{account:t,setAccount:this.setAccount})),l.a.createElement(by,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Payment Information ",l.a.createElement("sup",null,"*")),(this.state.required||this.props.match.params.id)&&cu(n,"CUSTOMEROWNER_PAYMENT")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"2"},l.a.createElement(sy,{account:t,payment:n,setPayment:this.setPayment})),l.a.createElement(by,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Address Information ",l.a.createElement("sup",null,"*")),(this.state.required||this.props.match.params.id)&&cu(c,"ADDRESS")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"3"},l.a.createElement(my,{account:t,address:c,setAddress:this.setAddress})),l.a.createElement(by,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Sites ",l.a.createElement("sup",null,"*")),(this.state.required||this.props.match.params.id)&&cu(t,"SITES")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"4"},l.a.createElement(gy,{account:t,setAccount:this.setAccount,getSiteDetail:this.getSiteDetail})),l.a.createElement(by,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Contacts"))),key:"5"},l.a.createElement(vy,{account:t,setAccount:this.setAccount})),l.a.createElement(by,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"6"},l.a.createElement(fy,{account:t,setAccount:this.setAccount}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{style:{marginRight:10},onClick:function(){return e.showWarningModal(!0)}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){return e.showConfirmModal(!0)},type:"primary"},"View Account"))))))),l.a.createElement(dN,{heading:"You\u2019ve successfully created this Billing & Site Manager Account!",subHeading:l.a.createElement("div",{style:{paddingLeft:"5%"}},l.a.createElement("p",{className:"m-0"},"To view this account as a Billing, select"," ",l.a.createElement(Vm.a,{onClick:function(){return e.viewCustomer(t?t.id:null)},className:"border-0 shadow-none p-0 bg-transparent"},"View as Billing.")),l.a.createElement("p",{className:"m-0 siteowner-row"},"To view this account as a Site Manager, select"," ",l.a.createElement(Vm.a,{onClick:function(){return e.viewOwner(t?t.id:null)},className:"border-0 shadow-none p-0 bg-transparent"},"View as Site Manager."))),id:t?t.id:null,visible:this.state.visibleConfirm,onClose:function(){return e.setState({visibleConfirm:!1})}}),l.a.createElement(iv,{heading:this.props.match.params.id?"Are you sure you want to exit editing this Billing & Site Manager Account?":"Are you sure you want to exit creating this Billing & Site Manager Account?",visible:this.state.warningModalVisible,onClose:function(){return e.showWarningModal(!1)}}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the account, select View Account.",onClose:function(){e.showRequiredSuccessModal(!1)},onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:t.id}))}}))}}]),t}(n.Component),yy=Object(Lm.b)(null,{setBreadcrumb:Uv})(Ny),wy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1},e.filterDataPop=function(){return l.a.createElement(TE,{fetchData:e.props.fetchData})},e.handleVisibleChange=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 align-items-center mini-header-filter-list-grid-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-opportunities-div"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.props.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(IE.a,{overlayClassName:"popover-main-all filter-popover",content:this.filterDataPop,title:!1,trigger:"click",visible:this.state.visible,placement:"bottom",onVisibleChange:this.handleVisibleChange},l.a.createElement(Vm.a,{className:"filter-btn d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter"))),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(qm.a,{to:zm.dashboard.customer_account.create,className:"new-opportunity-btn d-flex align-items-center justify-content-center text-capitalize"},"+ Create Billing Account"))))))}}]),t}(n.Component),_y=function(e){var a=[{title:"Account Name",dataIndex:"name",key:"name",sorter:!0,defaultSortOrder:"ascend",render:function(e){return l.a.createElement("div",{className:"name-id-details"},e)}},{title:"Industry",dataIndex:"industry",key:"industry",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},(null===e||void 0===e?void 0:e.title)||"-")}},{title:"City",dataIndex:"main_address",key:"city",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},(null===e||void 0===e?void 0:e.city)||"-")}},{title:"State",dataIndex:"main_address",key:"state",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},(null===e||void 0===e?void 0:e.state)||"-")}},{title:"Primary Team Member",dataIndex:"point_customer",render:function(e){return l.a.createElement("div",null,e||"-")},sorter:!0,key:"point_project"},{title:"Last Activity Date",dataIndex:"modified",key:"modified",sorter:!0,render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD,YYYY hh:mm A"))}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table customer-account-table"},l.a.createElement(fv.a,{scroll:{y:500},className:"main-table-all",columns:a,dataSource:e.data,size:"middle",loading:e.loading,pagination:e.pagination,locale:e.locale,onChange:function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="-modified",e.fetchTableData(c)},rowKey:function(e){return e.id},onRow:function(e,a){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.customer_account.view,{id:e.id}))}}}})))},Sy=Object(Lm.b)(null,{setBreadcrumb:Uv})((function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(!1),s=Object(yp.a)(r,2),o=s[0],m=s[1],d=Object(n.useState)({current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}),u=Object(yp.a)(d,2),p=u[0],v=u[1],h=Object(n.useState)(null),f=Object(yp.a)(h,2),E=f[0],g=f[1],b=Object(n.useState)({start:"",end:"",start_modified:"",end_modified:""}),N=Object(yp.a)(b,2),y=N[0],w=N[1];Object(n.useEffect)((function(){var a=[{title:"Billing Accounts",url:zm.dashboard.customer_account.self}];e.setBreadcrumb(a);_({ordering:"name",page:1})}),[E,y]);var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(!0),e.ordering||(e.ordering="-modified"),Du(Object(wu.a)(Object(wu.a)({},e),{},{page:e.page||1,search:E},y)).then((function(a){m(!1),i(a.data.results),v(Object(wu.a)(Object(wu.a)({},p),{},{current:e.page||1,total:a.data.count}))})).catch((function(e){}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement(wy,{onSearch:lu((function(e){g(e.target.value)}),1e3),fetchData:function(e){return function(e){w(Object(wu.a)({},e))}(e)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement(_y,{loading:o,fetchTableData:_,data:c,locale:o?{emptyText:" "}:{emptyText:l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},"No Billing Accounts"))))},pagination:p}))))})),xy=ku.a.Option,Cy=Pm.a.TextArea,Oy={labelCol:{span:24},wrapperCol:{span:24}},ky=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={buttonLoading:!1,industry:[],page:1},e.formRef=l.a.createRef(),e.handleSubmit=function(a){var t,n;e.setState({buttonLoading:!0});var l,c=e.props.match.params.id?e.props.match.params.id:null===(t=e.props)||void 0===t||null===(n=t.account)||void 0===n?void 0:n.id;c?Ru(c,Object(wu.a)(Object(wu.a)({},a),{},{industry:(null===(l=a.industry)||void 0===l?void 0:l.value)||null,account_source:a.account_source?a.account_source:null})).then((function(a){Mm.b.success("Billing Account Updated Successfully"),e.props.setAccount(a.data,2),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})})):Tu(Object(wu.a)(Object(wu.a)({},a),{},{industry:a.industry?a.industry.value:null,account_source:a.account_source?a.account_source:null})).then((function(a){Mm.b.success("Billing Account Created Successfully"),e.props.setAccount(a.data,2),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))},e.getIndustries=function(){Np({page:e.state.page}).then((function(a){1===e.state.page?e.setState({industry:a.data.results}):e.setState((function(e){return{industry:[].concat(Object(Ou.a)(e.industry),Object(Ou.a)(a.data.results))}}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t=this.props.account;this.props.match.params.id&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},t),{},{account_type:(null===t||void 0===t?void 0:t.account_type)||"CUSTOMER",industry:(null===t||void 0===t?void 0:t.industry)?{value:(null===t||void 0===t||null===(e=t.industry)||void 0===e?void 0:e.id)||null,label:"".concat(null===t||void 0===t||null===(a=t.industry)||void 0===a?void 0:a.title)||""}:void 0}));this.getIndustries()}},{key:"componentDidUpdate",value:function(e,a,t){if(e.account!==this.props.account){var n,l,c=Object(wu.a)({},this.props.account);this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},c),{},{account_type:(null===c||void 0===c?void 0:c.account_type)||"CUSTOMER",industry:(null===c||void 0===c?void 0:c.industry)?{value:null===c||void 0===c||null===(n=c.industry)||void 0===n?void 0:n.id,label:"".concat(null===c||void 0===c||null===(l=c.industry)||void 0===l?void 0:l.title)}:void 0}))}}},{key:"render",value:function(){var e=this,a=this.state.buttonLoading;this.props.account;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},Oy,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information here."))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Account Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{initialValue:"CUSTOMER",name:"account_type",label:"Account Type *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{disabled:!0,showArrow:!1,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Payment Term"},l.a.createElement(xy,{value:"CUSTOMER"},"Billing"),l.a.createElement(xy,{value:"SITE_OWNER"},"Site Manager"),l.a.createElement(xy,{value:"CUSTOMER_OWNER"},"Billing, Site Manager")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"industry",label:"Industry",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&e.state.page<3&&e.setState({page:e.state.page+1},(function(){return e.getIndustries()}))}}," ",this.state.industry.map((function(e){return l.a.createElement(xy,{value:e.id},e.title)}))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"website",label:"Website",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"www.website.com"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_source",label:"Account Source",rules:[{required:!1,message:""}],className:"position-relative remove-padding-placeholder account-source-div"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(xy,{value:"ADVERTISEMENT"},"Advertisement"),l.a.createElement(xy,{value:"CONSTRUCTCONNECT"},"ConstructConnect"),l.a.createElement(xy,{value:"WORD_OF_MOUTH"},"Word of Mouth"),l.a.createElement(xy,{value:"MARKETING_ASSISTANT"},"Marketing Assistant")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"epa_id",label:"EPA ID",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"ABC123456789"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"note",label:"Note",rules:[{message:"this field is required"}]},l.a.createElement(Cy,{placeholder:"Type something",rows:6,style:{height:"auto",paddingTop:15}}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:a,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),jy=Object(r.withRouter)(ky),Iy=ku.a.Option,Ay={labelCol:{span:24},wrapperCol:{span:24}},Dy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={contacts:[],selectedContacts:[],fetching:!1,visible:!1,contact:[],modalVisible:!1,positionVisible:!1,positions:[],page:1,totalCount:0,search:""},e.formRef=l.a.createRef(),e.showPosition=function(a){e.setState({positionVisible:a})},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(a){var t=e.state.selectedContacts.filter((function(e){return e.id!==a.id})),n=e.state.contact.filter((function(e){return e!==a.id}));e.setState({selectedContacts:t,contact:n}),xh({account:null},a.id).then((function(e){Mm.b.success("Contact removed successfully!")})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleRemovefromSelect=function(a){var t=e.state.selectedContacts.filter((function(e){return e.id!==a}));e.setState({selectedContacts:t}),e.formRef.current.setFieldsValue({contacts:e.formRef.current.getFieldValue("contacts").filter((function(e){return e!==a}))}),xh({account:null},a).then((function(e){})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchContacts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),yh(a).then((function(a){e.setState({contacts:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.getSelectedContacts=function(){var a=e.props.account;yh({account:null===a||void 0===a?void 0:a.id}).then((function(a){e.setState({selectedContacts:a.data.results,contacts:a.data.results,contact:a.data.results.map((function(e){return e.id}))});var t={};a.data.results.forEach((function(e){t["role".concat(e.id)]=e.role})),t.contacts=a.data.results.map((function(e){return e.id})),e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},t),{},{contacts:null}))})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSelect=function(a){var t=e.state,n=t.selectedContacts,l=t.contacts,c=(t.accountPopup,e.props.account);e.formRef.current.setFieldsValue({contacts:null});var i=l.find((function(e){return e.id==a}));e.setState({accountPopup:i},(function(){var t;if(i.account&&(null===(t=i.account)||void 0===t?void 0:t.id)!==c.id)e.setState({modalVisible:!0});else{var r=n.map((function(e){return e.id}));r.push(a);var s=l.filter((function(e){return r.includes(e.id)})),o=s.map((function(e){return e.id}));e.setState({contact:Object(Ou.a)(o),selectedContacts:s,accountPopup:null})}}))},e.callbackContact=function(a){var t=e.state.selectedContacts,n=(t=[].concat(Object(Ou.a)(t),[a])).map((function(e){return e.id}));e.setState({selectedContacts:t,contacts:t,contact:Object(Ou.a)(n)})},e.handleAccountChange=function(){xh({contact_account:!0,insert_account:e.props.account.id},e.state.accountPopup.id).then((function(){e.setState({modalVisible:!1,accountPopup:null},(function(){e.getSelectedContacts()}))})).catch((function(e){return td(e)}))},e.handleSubmit=function(a){a.contacts=Object(Ou.a)(e.state.contact),console.log(e.state.contact,"state"),a.contacts.map((function(t){var n={account:e.props.account.id,role:a["role".concat(t)]};console.log(n,t,"ttttttttttttttt"),xh(n,t).then((function(){Mm.b.success("Contact updated successfully!"),e.props.setAccount(e.props.account,6)})).catch((function(e){td(e)}))}))},e.showContact=function(){e.setState({visible:!1})},e.fetchPositions=function(){var a=e.state,t=a.page,n=a.search,l={page:t,search:n};e.setState({fetching:!0}),Wh(l).then((function(a){1===t?e.setState({positions:a.data.results,totalCount:a.data.count}):e.setState((function(e){return{positions:[].concat(Object(Ou.a)(e.positions),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.getSelectedContacts()}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.contacts,c=a.selectedContacts,i=a.positions,r=a.totalCount,s=this.props.account;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,hideRequiredMark:!0,ref:this.formRef},Ay,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all contacts related to this account."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"contacts",label:"Contacts ",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchContacts()},onSearch:this.debounceEvent((function(a){return e.fetchContacts({search:a})}),1e3),onSelect:this.handleSelect,showSearch:!0,className:"custom-search-select",dropdownClassName:"custom-search-select option-design-fix"},n.map((function(e){var a;return l.a.createElement(Iy,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.account?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===e||void 0===e?void 0:e.role)||"")," ",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(a=e.account)||void 0===a?void 0:a.name)||"")):" "))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute text-capitalize",onClick:function(){e.setState({visible:!0})}},"+ Create")),0===c.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts")))),c.map((function(a){var n,c,s,o;return l.a.createElement("div",{key:a.id,className:"col-12"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{style:{height:"100px",minHeight:"100px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(a.first_name," ").concat(a.last_name)),l.a.createElement("p",{className:"mb-0"},(null===a||void 0===a?void 0:a.default_phone)&&(null===a||void 0===a?void 0:a.default_email)?"".concat((null===a||void 0===a||null===(n=a.default_phone)||void 0===n?void 0:n.phone_number)||" "," | ").concat((null===a||void 0===a||null===(c=a.default_email)||void 0===c?void 0:c.email)||" "):(null===a||void 0===a?void 0:a.default_phone)?(null===a||void 0===a||null===(s=a.default_phone)||void 0===s?void 0:s.phone_number)||" ":(null===a||void 0===a||null===(o=a.default_email)||void 0===o?void 0:o.email)||" ")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 col-sm-6 position-relative"},l.a.createElement(Fm.a.Item,{name:"role".concat(a.id),label:"Position",rules:[{required:!0,message:"this field is required"}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{placeholder:"Search and Select",notFoundContent:null,filterOption:!1,onSearch:function(a){e.setState({page:1,search:a},(function(){e.fetchPositions()}))},showSearch:!0,onFocus:function(){return e.fetchPositions()},dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,t&&l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)))},onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&r!=i.length&&e.setState({page:e.state.page+1},(function(){return e.fetchPositions()}))}},i.map((function(e,a){return l.a.createElement(Iy,{value:e.name,key:"".concat(e.name+a)},e.name)})))),l.a.createElement(Vm.a,{className:"create-btn-main create-btn-main-update position-absolute",onClick:function(){return e.showPosition(!0)}},"+ Create"))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(bb,{visible:this.state.positionVisible,onClose:function(){return e.showPosition(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,account:s,visible:this.state.visible,onClose:function(){e.showContact(!1)}}),l.a.createElement(iv,{changeAccountType:!0,visible:this.state.modalVisible,onClose:function(){return e.setState({modalVisible:!1})},heading:"Are you sure you want to change account for this contact?",subHeadingUOM:" This contact is already tied to an account. If you want to change the account for this contact, please select Yes, I want to change.",cancelText:"No, cancel this action",okText:"Yes, I want to change",handleAccountChange:this.handleAccountChange}))}}]),t}(n.Component),Ty=Object(r.withRouter)(Dy),Ry={labelCol:{span:24},wrapperCol:{span:24}},My=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("account",e.props.account.id),n.append("document",t),Wu(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchFiles=function(){Gu({account:e.props.account.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},Ry,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"Documents",label:"",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse"))))))),l.a.createElement("div",{className:"col-12 px-3 table-responsive main-table-div"},0===this.state.files.length?"":l.a.createElement(fv.a,{pagination:!1,className:"main-table-all border-0 carpet-cleaning-table",columns:this.columns,dataSource:this.state.files,size:"middle",locale:{emptyText:" "}})),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Vm.a,{className:"validate-btn-main"},"Save and Continue")))))))}}]),t}(n.Component),Fy=Object(r.withRouter)(My),Py=ku.a.Option,Vy={labelCol:{span:24},wrapperCol:{span:24}},qy={salesPerson:"salesperson",salesAssistant:"salesassistant",salesManager:"salesmanager"},Ly={salesPerson:"sales_person",salesAssistant:"sales_assistant",salesManager:"sales_manager"},Uy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={salesPerson:[],salesAssistant:[],salesManager:[],salesPersonSelected:[],salesAssistantSelected:[],salesManagerSelected:[],fetching:!1,buttonLoading:!1,salesManagerVisible:!1,salesAssistantVisible:!1,salesPersonVisible:!1},e.formRef=l.a.createRef(),e.showSalesManager=function(a){e.setState({salesManagerVisible:a})},e.showSalesAssistant=function(a){e.setState({salesAssistantVisible:a})},e.showSalesPerson=function(a){e.setState({salesPersonVisible:a})},e.showWarningModal=function(a,t,n){a&&e.setState({item:t,type:n}),e.setState({visible:a})},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0,a,t)},className:"border-0 bg-transparent text-center p-0 w-100"},"Remove")))},e.removeUsers=function(){var a=e.state,t=a.item,n=a.type;e.setState(Object(zv.a)({},"".concat(n,"Selected"),e.state["".concat(n,"Selected")].filter((function(e){return e.id!==t.id}))))},e.fetchUser=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.setState({fetching:!0}),ud(qy[a],t).then((function(t){var n;e.setState((n={},Object(zv.a)(n,a,t.data.results),Object(zv.a)(n,"fetching",!1),n))})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSelect=function(a,t){var n=e.state,l=n.salesAssistantSelected,c=n.salesManagerSelected,i=n.salesPersonSelected;0==c.length&&0==i.length&&0==l.length&&e.handleDefaultPoc(a),e.formRef.current.setFieldsValue(Object(zv.a)({},Ly[t],null));var r=e.state[t].filter((function(e){return a===e.id}));if(e.state["".concat(t,"Selected")].find((function(e){return a===e.id})))return null;e.setState((function(e){return Object(zv.a)({},"".concat(t,"Selected"),[].concat(Object(Ou.a)(e["".concat(t,"Selected")]),Object(Ou.a)(r)))}))},e.handleSubmit=function(){e.setState({buttonLoading:!0});var a={sales_manager:e.state.salesManagerSelected.map((function(e){return e.id})),sales_assistant:e.state.salesAssistantSelected.map((function(e){return e.id})),sales_person:e.state.salesPersonSelected.map((function(e){return e.id}))};Ru(e.props.match.params.id?e.props.match.params.id:e.props.account.id,a).then((function(a){e.props.match.params.id?Mm.b.success("Team Updated Successfully!"):Mm.b.success("Team added Successfully!"),e.props.setAccount(a.data,5)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){e.setState({buttonLoading:!1})}))},e.handleDefaultPoc=function(a){console.log(a,"itemId");var t={point_customer:a};Ru(e.props.account.id,t).then((function(a){e.props.setAccount(a.data)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a=this,t=this.props.match.params.id?this.props.match.params.id:null===(e=this.props.account)||void 0===e?void 0:e.id;t&&Mu(t).then((function(e){var t,n,l;a.setState({buttonLoading:!1,salesPersonSelected:null===(t=e.data)||void 0===t?void 0:t.sales_person,salesAssistantSelected:null===(n=e.data)||void 0===n?void 0:n.sales_assistant,salesManagerSelected:null===(l=e.data)||void 0===l?void 0:l.sales_manager}),a.fetchUser("salesManager"),a.fetchUser("salesAssistant"),a.fetchUser("salesPerson")}))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row general-info"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,requiredMark:!1,ref:this.formRef},Vy,{className:"main-inner-form"}),l.a.createElement(vh.a.Group,{value:null===(e=this.props.account)||void 0===e?void 0:e.point_customer},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can only choose one point of contact for this account."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_manager",label:"Sales Managers *",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,showSearch:!0,onChange:function(e){return o.handleSelect(e,"salesManager")},onFocus:function(){return o.fetchUser("salesManager")},onSearch:function(e){return o.fetchUser("salesManager",{search:e})},className:"custom-search-select"},this.state.salesManager.map((function(e){return l.a.createElement(Py,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Manager")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(a=this.state.salesManagerSelected)||void 0===a?void 0:a.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))),null===(t=this.state.salesManagerSelected)||void 0===t?void 0:t.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat((null===(a=o.props.account)||void 0===a?void 0:a.point_customer)===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},"AD")),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Manager")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesManager")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleDefaultPoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(Fm.a.Item,{name:"sales_person",label:"Salespeople *",rules:[{required:!1,message:""}],className:"search-overlap"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,showSearch:!0,onChange:function(e){return o.handleSelect(e,"salesPerson")},onFocus:function(){return o.fetchUser("salesPerson")},onSearch:function(e){return o.fetchUser("salesPerson",{search:e})},className:"custom-search-select"},this.state.salesPerson.map((function(e){return l.a.createElement(Py,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Salesperson")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(n=this.state.salesPersonSelected)||void 0===n?void 0:n.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople")))),null===(c=this.state.salesPersonSelected)||void 0===c?void 0:c.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat((null===(a=o.props.account)||void 0===a?void 0:a.point_customer)===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},"AD")),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Salesperson")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesPerson")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleDefaultPoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_assistant",label:"Sales Assistants *",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,showSearch:!0,onChange:function(e){return o.handleSelect(e,"salesAssistant")},onFocus:function(){return o.fetchUser("salesAssistant")},onSearch:function(e){return o.fetchUser("salesAssistant",{search:e})},className:"custom-search-select"},null===(i=this.state.salesAssistant)||void 0===i?void 0:i.map((function(e){return l.a.createElement(Py,{value:e.id,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Assistant")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(r=this.state.salesAssistantSelected)||void 0===r?void 0:r.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))),null===(s=this.state.salesAssistantSelected)||void 0===s?void 0:s.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat((null===(a=o.props.account)||void 0===a?void 0:a.point_customer)===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},"AD")),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Assistant")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesAssistant")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleDefaultPoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(iv,{visible:this.state.visible,onClose:function(){return o.showWarningModal(!1)},heading:"Are you sure you want to remove this Team Member?",subHeadingUOM:"If you choose to remove this Team Member, this might cause issues.",common:!0,commonFunc:function(){o.removeUsers(),o.showWarningModal(!1)}}),l.a.createElement(jb,{visible:this.state.salesManagerVisible,onClose:function(){return o.showSalesManager(!1)}}),l.a.createElement(Db,{visible:this.state.salesAssistantVisible,onClose:function(){return o.showSalesAssistant(!1)}}),l.a.createElement(Mb,{visible:this.state.salesPersonVisible,onClose:function(){return o.showSalesPerson(!1)}}))}}]),t}(n.Component),By=Object(r.withRouter)(Uy),Wy=fu.a.Panel,Yy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={account:null,payment:null,address:null,warningModalVisible:!1,visibleConfirm:!1,unsavedExit:!1,activeKey:["1"],requiredSuccessModalVisible:!1,requiredWarningModalVisible:!1,required:!1},e.setAddress=function(a){e.getAccountDetail(a.main),e.setState({address:a,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})},e.setAccount=function(a,t){var n;null===(n=e.state.account)||void 0===n||n.name,e.setState((function(){return{account:a}}));var l=null;e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l||e.setState((function(e){return{account:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.setPayment=function(a,t){e.getAccountDetail(a);var n=null;e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n||e.setState((function(e){return{payment:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.showRequiredWarningModal=function(a){e.setState({requiredWarningModalVisible:a})},e.getAccountDetail=function(a){Mu(e.props.match.params.id||a.account).then((function(a){e.setState({account:a.data,payment:a.data.payment_information,address:{main:a.data.main_address,billing:a.data.billing_address}})})).catch((function(e){td(e)}))},e.handleCollapseChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.account;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?(e.setState({unsavedExit:!1}),o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:l.id}))):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Billing Account",url:zm.dashboard.customer_account.create}];this.props.match.params.id?(this.props.setBreadcrumb([{title:"Edit Billing Account",url:"#"}]),Mu(this.props.match.params.id).then((function(a){e.setState({account:a.data,payment:a.data.payment_information,address:{main:a.data.main_address,billing:a.data.billing_address},activeKey:e.props.location.editTab||"1"})})).catch((function(e){td(e)}))):this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.account,n=a.payment,c=a.address,i=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1},setCancel:function(){e.setState({required:!0})}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:i,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},defaultActiveKey:this.props.location.editTab?[this.props.location.editTab]:["1"],onChange:this.handleCollapseChange},l.a.createElement(Wy,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(jy,{account:t,setAccount:this.setAccount})),l.a.createElement(Wy,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Payment Information"))),key:"2"},l.a.createElement(ep,{account:t,payment:n,setPayment:this.setPayment})),l.a.createElement(Wy,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Address Information"))),key:"3"},l.a.createElement(rp,{account:t,address:c,setAddress:this.setAddress})),l.a.createElement(Wy,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Contacts"))),key:"4"},l.a.createElement(Ty,{account:t,setAccount:this.setAccount})),l.a.createElement(Wy,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Team"))),key:"6"},l.a.createElement(By,{account:t,setAccount:this.setAccount})),l.a.createElement(Wy,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"5"},l.a.createElement(Fy,{account:t,setAccount:this.setAccount}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{style:{marginRight:10},onClick:function(){e.state.unsavedExit?o.push(zm.dashboard.customer_account.self):e.showWarningModal(!0)}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:t.id})):e.handleViewMainButtonCLick()},type:"primary"},"View Account"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this Billing Account!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view this billing account, select"," ",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:t.id}))},className:"border-0 shadow-none p-0 bg-transparent"},"View Billing Account.")),okAction:function(){e.setState({unsavedExit:!1}),o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:t.id}))},okTitle:"View Billing Account",visible:this.state.visibleConfirm,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:this.props.match.params.id?"Are you sure you want to exit editing this Billing Account?":"Are you sure you want to exit creating this Billing Account?",okAction:function(){e.setState({unsavedExit:!1},(function(){o.push(zm.dashboard.customer_account.self)}))},visible:this.state.warningModalVisible,onClose:function(){e.showWarningModal(!1)},uomWarning:!0}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the account, select View Account.",onClose:function(){e.showRequiredSuccessModal(!1)},onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:t.id}))}}))}}]),t}(n.Component),Ky=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(Yy)),Gy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,posts:[],selectedData:null,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},loading:!1},e.getPostDateColor=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?"gray":n.isSame(a,"day")?"#F2994A":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0:"gray":"gray"},e.getPostDateText=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MM/DD/YYYY"):"No Due Date":"No Due Date"},e.changePostStatus=function(a,t){var n=e.state.posts;$u(a.id,{completed:t}).then((function(l){var c=n.findIndex((function(e){return e.id===a.id}));n[c].completed=t,e.setState({posts:n}),Mm.b.success("Updated post status")}))},e.postColumns=[{title:"POST NAME",sorter:!0,render:function(a){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{className:"post-checkbox-opacity",checked:a.completed,onChange:function(){return e.changePostStatus(a,!a.completed)},onClick:function(e){return e.stopPropagation()}},a.name))}},{title:"TYPE",dataIndex:"post_type",sorter:!0,render:function(e){return l.a.createElement("div",null,bd(e))}},{title:"PRIORITY",dataIndex:"priority",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"ASSIGNEE",dataIndex:"assignee",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},(null===e||void 0===e?void 0:e.first_name)?l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name)):" ","".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"-"))}},{title:l.a.createElement("div",{className:"position-relative"},"DUE DATE"),sorter:!0,render:function(a){return l.a.createElement(l.a.Fragment,null,a?l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:e.getPostDateColor(a)}},e.getPostDateText(a)):"-")}}],e.showPost=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,selectedData:t})},e.getPosts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),zu(Object(wu.a)({account:e.props.match.params.id},a)).then((function(t){e.setState({posts:e.props.hideTitle?t.data.results.slice(0,10):t.data.results,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.hideTitle?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.getPosts({search:a.target.value,page:1})},e.handleChange=function(a){e.getPosts({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var e=this,a=this.state,t=(a.pagination,a.loading);return this.props.pagination||!1,l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},!this.props.hideSearch&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{onClick:function(){return e.showPost(!0)},className:"new-opportunity-btn "},"+ Create")),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("9")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),this.state.posts.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div post-table"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.postColumns,dataSource:this.state.posts,size:"middle",loading:t,onChange:this.handleChange,pagination:!this.props.hideTitle&&this.state.pagination,rowKey:function(e){return e.id},rowClassName:function(e){if(e.completed)return"post-opacity"},onRow:function(a,t){return{onClick:function(t){e.showPost(!0,a)}}}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{onClick:function(){return e.showPost(!0)},className:"col-12 mx-auto col-sm-2 curser-pointer text-center"},l.a.createElement("img",{src:Rm.note_add_new_create_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 approved-btn"},"Create Post"))))),l.a.createElement(bN,{data:this.state.selectedData,onSuccess:Object(Qm.a)($m.a.mark((function a(){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.showPost(!1);case 2:return a.next=4,e.getPosts();case 4:case"end":return a.stop()}}),a)}))),visible:this.state.visible,onClose:function(){return e.showPost(!1)}}))}}]),t}(n.Component),zy=Object(r.withRouter)(Gy),Hy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={visibleConfirm:!1,visibleWarning:!1,updated_customer:null},e.updateAccountRole=function(){Ru(e.props.match.params.id,{account_type:qp}).then((function(a){e.setState({visibleConfirm:!0,visibleWarning:!1,updated_customer:a.data})}))},e.viewOwner=function(a){o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:a})),e.setState({visibleConfirm:!1})},e.viewCustomer=function(a){o.push(Object(dh.a)(zm.dashboard.customer_account.view,{id:a})),e.setState({visibleConfirm:!1})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this,n=this.state.updated_customer,c=this.props.customer;return a=c&&c.account_source?-1!=c.account_source.indexOf("_")?c.account_source.toLowerCase().replace(/_/g," "):c.account_source.toLowerCase():"-",l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase "},"ACCOUNT NAME"),l.a.createElement("h5",{className:"text-capitalize font-weight-bold"},c.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"ACCOUNT TYPE"),l.a.createElement("h5",{className:"mb-0 text-capitalize",style:{minWidth:350}},(null===n||void 0===n?void 0:n.account_type)===qp||c.account_type===qp?l.a.createElement("div",null,l.a.createElement("a",{className:"mr-2 activeRole"},Lp.CUSTOMER),l.a.createElement("a",{className:"nonActiveRole",onClick:function(){o.push(Object(dh.a)(zm.dashboard.owner_account.view,{id:c.id}))}},Lp.SITE_OWNER)):l.a.createElement("div",null,l.a.createElement("span",null,Lp[c.account_type]),l.a.createElement("br",null),l.a.createElement("span",null,l.a.createElement("button",{className:"create-account mt-2",onClick:function(){return t.setState({visibleWarning:!0})}},"+ Site Manager account"))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Industry"),l.a.createElement("h5",null,(null===c||void 0===c||null===(e=c.industry)||void 0===e?void 0:e.title)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Website"),l.a.createElement("h5",null,l.a.createElement("a",{href:"https://".concat(null===c||void 0===c?void 0:c.website),target:"_blank"},(null===c||void 0===c?void 0:c.website)||l.a.createElement("span",{className:"text-dark"},"-")))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Account Source"),l.a.createElement("h5",{className:"text-capitalize"},a||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Epa Id"),l.a.createElement("h5",null,(null===c||void 0===c?void 0:c.epa_id)||"-")),l.a.createElement(dN,{heading:"You\u2019ve successfully created this Billing & Site Manager account!",subHeading:l.a.createElement("div",{style:{paddingLeft:"5%"}},l.a.createElement("p",{className:"m-0"},"To view this account as a Billing, select"," ",l.a.createElement(Vm.a,{onClick:function(){return t.viewCustomer(c.id)},className:"border-0 shadow-none p-0 bg-transparent"},"View as Customer.")),l.a.createElement("p",{className:"m-0"},"To view this account as a Site Manager, select"," ",l.a.createElement(Vm.a,{onClick:function(){return t.viewOwner(c.id)},className:"border-0 shadow-none p-0 bg-transparent"},"View as Site Manager."))),id:c.id,okTitle:"View Site Manager Account",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.owner_account.view))},visible:this.state.visibleConfirm,onClose:function(){return t.setState({visibleConfirm:!1})}}),l.a.createElement(iv,{heading:"Are you sure you want this account to function as  Billing & Site Manager Account?",subHeadingUOM:l.a.createElement("p",{style:{color:"#828282",width:"98%"}}," ","If yes, select \u201cYes, I would like to\u201d. If no, select \u201cNo, go back\u201d."),visible:this.state.visibleWarning,changeAccountTypeConfirmation:!0,changeAccountType:function(){t.updateAccountRole()},onClose:function(){return t.setState({visibleWarning:!1})}}))}}]),t}(n.Component);var $y=Object(Lm.b)((function(e){return Object(wu.a)({},e)}))(Object(r.withRouter)(Hy)),Qy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this.props.customer.payment_information||{};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"CREDIT RATING"),l.a.createElement("h5",{className:"text-capitalize"},bd(a.credit_rating)||" - ")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"CREDIT LIMIT"),l.a.createElement("h5",{className:"text-capitalize"},a.credit_limit||" - ")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"DUNS NUMBER"),l.a.createElement("h5",{className:"text-capitalize"},(e=a.duns_number)&&e.match(/\d*/g).join("").match(/(\d{0,2})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")||" - ")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"EIN"),l.a.createElement("h5",{className:"text-capitalize"},wd(a.ein)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"ENTITY TYPE"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},"CORPORATION"===(null===a||void 0===a?void 0:a.entity_type)?"C Corporation":bd(a.entity_type)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"PAYMENT TERM"),l.a.createElement("h5",{className:"text-capitalize text-capitalize"},bd(a.payment_term)||" - ")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"ACTIVE"),l.a.createElement("h5",{className:"text-capitalize"},!0===a.active?"Yes":!1===a.active?"No":"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Sales Tax Exemption Status"),l.a.createElement("h5",{className:"text-capitalize"},"EXEMPT"===(null===a||void 0===a?void 0:a.default_sales_tax)||!0===(null===a||void 0===a?void 0:a.default_sales_tax)?"Exempt":("NON_EXEMPT"==a.default_sales_tax||!1===(null===a||void 0===a?void 0:a.default_sales_tax)?"Non Exempt":"-")||" - "))))}}]),t}(n.Component);var Jy=Object(Lm.b)((function(e){return Object(wu.a)({},e)}))(Qy),Zy=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:[],loading:!1,view:!1,page:1,total:null,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.contactColumns=[{title:"CONTACT NAME",dataIndex:"full_name",sorter:!0},{title:"LAST ACTIVITY DATE",dataIndex:"modified",sorter:!0,render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))}}],e.handleChange=function(a){e.fetchContact({page:a.current})},e.Pagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchContactonLoadmore()}))},e.fetchContactonLoadmore=function(){e.setState({loading:!0}),yh({account:e.props.match.params.id,page:e.state.page}).then((function(a){e.setState({data:[].concat(Object(Ou.a)(e.state.data),Object(Ou.a)(a.data.results)),loading:!1})}))},e.fetchContact=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),yh(Object(wu.a)({account:e.props.match.params.id,page:e.state.page},a)).then((function(t){e.setState({data:e.props.viewAll?t.data.results:t.data.results.slice(0,10),loading:!1,total:t.data.count,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:!1===e.props.viewAll?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.fetchContact({search:a.target.value,page:1})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchContact()}},{key:"render",value:function(){var e=this,a=this.state.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12 p-0 service-family-table"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",this.state.total),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("3")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "),!this.props.hideTitle&&l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.customer_account.edit,{id:e.props.match.params.id}),editTab:"4"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),a.length>0?this.state.view?l.a.createElement("div",{className:"ol-12 table-responsive opportunity-db-table contact-info-table main-table-div pt-3"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.contactColumns,dataSource:a,size:"middle",pagination:!1!==this.props.viewAll&&this.state.pagination,onChange:this.handleChange})):l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},a.map((function(e){var a,t,n,c;return l.a.createElement("div",{key:null===e||void 0===e?void 0:e.id,className:"col-12 col-sm-6",onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.contacts.view,{id:e.id}))}},l.a.createElement("div",{style:{height:"100px",minHeight:"100px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name)),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e?void 0:e.role," ",null===e||void 0===e?void 0:e.account.name),l.a.createElement("br",null),l.a.createElement("p",null,(null===e||void 0===e?void 0:e.default_phone)&&(null===e||void 0===e?void 0:e.default_email)?"".concat((null===e||void 0===e||null===(a=e.default_phone)||void 0===a?void 0:a.phone_number)||" "," | ").concat((null===e||void 0===e||null===(t=e.default_email)||void 0===t?void 0:t.email)||" "):(null===e||void 0===e?void 0:e.default_phone)?(null===e||void 0===e||null===(n=e.default_phone)||void 0===n?void 0:n.phone_number)||" ":(null===e||void 0===e||null===(c=e.default_email)||void 0===c?void 0:c.email)||" ")))))})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},this.state.loading&&l.a.createElement(Wv.a,null),!0===this.props.viewAll&&!this.state.loading&&a.length!=this.state.total&&l.a.createElement(Vm.a,{onClick:this.Pagination},"Load More")))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Contacts")))))))}}]),t}(n.Component),Xy=Object(r.withRouter)(Zy),ew=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"NAME",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.document},e.name)))}},{title:"SIZE",sorter:!0,dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE FORMAT",sorter:!0,dataIndex:"format"}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("account",e.props.match.params.id),n.append("document",t),Wu(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.account=e.props.match.params.id,a.page="all",Gu(a).then((function(a){e.setState({files:a.data})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.fetchFiles({search:a.target.value})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},!this.props.hideSearch&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"new-oppobtnrtunity--div"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"new-opportunity-btn text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("4")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div documents-table-main"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:!1,className:" border-0 carpet-cleaning-table",columns:this.columns,dataSource:this.state.files,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height my-3 d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),aw=Object(r.withRouter)(ew),tw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={opportunities:[],pagination:{current:1,pageSize:15},loading:!1},e.opportunitiesColumns=[{title:"OPPORTUNITY ID",dataIndex:"id",sorter:!0},{title:"OPPORTUNITY NAME",dataIndex:"name",sorter:!0},{title:"STATUS",dataIndex:"status",sorter:!0,render:function(e){return(null===e||void 0===e?void 0:e.title)||"-"}},{title:"OPPORTUNITY SOURCE",dataIndex:"source",sorter:!0,render:function(e){return l.a.createElement("div",null,e.name)}},{title:"LAST ACTIVITY DATE",dataIndex:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:!0}],e.fetchOpportunity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),wv(Object(wu.a)({customer_account:e.props.customer?e.props.customer.id:e.props.match.params.id},a)).then((function(a){e.setState({opportunities:a.data.results,loading:!1})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.fetchOpportunity({search:a.target.value,page:1})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchOpportunity()}},{key:"render",value:function(){var e=this,a=this.state,t=a.pagination,n=a.opportunities,c=a.loading;return console.log(n,"opp"),this.props.pagination||(t=!1),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},!this.props.hideSearch&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("6")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),n.length>0?l.a.createElement("div",{className:"col-12 table-responsive width-160-id main-table-div"},l.a.createElement(fv.a,{pagination:t,className:"main-table-all",columns:this.opportunitiesColumns,rowKey:function(e){return e.id},loading:c,dataSource:n,onClick:console.log(n.id),size:"middle",onRow:function(e,a){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.opportunities.view,{id:e.id}))}}}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Opportunity_empty_state_icon,alt:"logo",className:"img-fluid"}),l.a.createElement("h6",{className:"text-gray-tag"},"No Opportunities"))))))}}]),t}(n.Component),nw=Object(r.withRouter)(tw),lw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleTableChange=function(e,a,t){var n="";"descend"===t.order&&(n="-");var l={page:e.current};t.columnKey&&(l.ordering="".concat(n).concat(t.columnKey))},n.showWorkList=function(e){n.setState({visible:!0,workHistory:e})},n.columns=[{title:"ACCOUNT NAME",key:"name",dataIndex:"name",sorter:{compare:function(e,a){return e-a}}},{title:"ACCOUNT TYPE",sorter:{compare:function(e,a){return e.account_type-a.account_type}},render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},"CUSTOMER_OWNER"==e.account_type?"Billing, Site Manager":"SITE_OWNER"===e.account_type?"Site Manager":"Billing")}},{title:"WORK HISTORY",dataIndex:"type",key:"type",sorter:{compare:function(e,a){return console.log(e,a)}},render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&(e.opportunity.length>0?l.a.createElement("div",{className:"d-flex align-items-center associated-history-div"},l.a.createElement("span",{className:"associated-history"},"".concat(e.opportunity[0])),l.a.createElement("span",null,"(Opportunity)")):l.a.createElement("div",{className:"d-flex align-items-center associated-history-div"},l.a.createElement("span",{className:"associated-history"},"".concat(e.proposal[0]))," ",l.a.createElement("span",null,"(Proposal)"))),e.opportunity.length+e.proposal.length>1&&l.a.createElement("span",{className:"d-inline-block count-div-tag"},"and"," ",l.a.createElement("span",{onClick:function(){return n.showWorkList(e)},className:"more-text cursor-pointer"},e.opportunity.length+e.proposal.length-1," more")))}}],n.onClose=function(){n.setState({visible:!1})},n.fetchAssociatedAccounts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({loading:!0}),n.props.hideTitle&&(e.page=1),bp(n.props.match.params.id,Object(wu.a)({},e)).then((function(e){n.setState({accounts:e.data.results}),console.log(n.state.accounts)})).catch((function(e){e.response&&Object.keys(e.response.data).forEach((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){n.setState({loading:!1})}))},n.onSearch=function(e){n.fetchAssociatedAccounts({search:e.target.value})},n.state={accounts:[],loading:!1,visible:!1,workHistory:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchAssociatedAccounts()}},{key:"render",value:function(){var e=this,a=this.props,t=a.pagination,n=a.hideTitle,c=this.state,i=c.loading,r=c.accounts,s=c.visible,o=c.workHistory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),n&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("5")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row associated-table my-3"},r.length>0?l.a.createElement(UN,{data:r,loading:i,pagination:t,columns:this.columns}):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"no-data-wrapper row d-flex",style:{alignItems:"center"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"No Data"}),l.a.createElement("h6",{className:"text-gray-tag"},"No Associated Accounts"))))))),s&&l.a.createElement(ju.a,{title:"Work History",placement:"right",className:"main-all-form-modal main-drawer-div",width:500,closable:!0,onClose:this.onClose,visible:s,getContainer:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:this.onClose,type:"primary"},"Close"))},l.a.createElement("div",{className:"row account-history-heading"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0 d-flex align-items-center"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"heading-tag-history"},this.props.customer.name),l.a.createElement("span",{className:"title-details"},"(","CUSTOMER_OWNER"==this.props.customer.account_type?"Billing, Site Manager":"Billing",")")))),l.a.createElement("div",{className:"row opportunity-db-table work-history-table"},l.a.createElement("div",{className:"col-12 table-responsive main-table-all"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",{className:"ant-table-thead"},l.a.createElement("tr",null,l.a.createElement("th",{className:"ant-table-cell"},"Work History"))),l.a.createElement("tbody",null,o.opportunity&&o.opportunity.map((function(e){return l.a.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},l.a.createElement("td",{className:"ant-table-cell font-weight-bold"},e," ",l.a.createElement("span",{className:"font-weight-normal"},"(Opportunity)")))})),o.proposal&&o.proposal.map((function(e){return l.a.createElement("tr",{className:"ant-table-row ant-table-row-level-0"},l.a.createElement("td",{className:"ant-table-cell font-weight-bold"},e," ",l.a.createElement("span",{className:"font-weight-normal"},"(Proposal)")))}))))))))}}]),t}(n.Component),cw=Object(r.withRouter)(lw),iw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props.owner;return(null===a||void 0===a?void 0:a.id)?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row summary-info-cr mt-3"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES MANAGERS")),a.sales_manager.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_manager.map((function(a,t){var n,c;return l.a.createElement("div",{className:"col-12",key:t},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.id===(null===(n=e.props.customer)||void 0===n?void 0:n.point_customer)&&"active")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(a.first_name,a.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,a.first_name," ",a.last_name),l.a.createElement("p",{className:"mb-0"},bd(a.role)),a.id===(null===(c=e.props.customer)||void 0===c?void 0:c.point_customer)&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES ASSISTANTS")),a.sales_assistant.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_assistant.map((function(a,t){var n,c;return l.a.createElement("div",{className:"col-12",key:t},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.id===(null===(n=e.props.customer)||void 0===n?void 0:n.point_customer)&&"active")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(a.first_name,a.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,a.first_name," ",a.last_name),l.a.createElement("p",{className:"mb-0"},bd(a.role)),a.id===(null===(c=e.props.customer)||void 0===c?void 0:c.point_customer)&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALESPEOPLE")),a.sales_person.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},a.sales_person.map((function(a,t){var n,c;return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main ".concat(a.id===(null===(n=e.props.customer)||void 0===n?void 0:n.point_customer)&&"active")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(a.first_name,a.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,a.first_name," ",a.last_name),l.a.createElement("p",{className:"mb-0"},bd(a.role)),a.id===(null===(c=e.props.customer)||void 0===c?void 0:c.point_customer)&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact")))))})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople")))))))))):l.a.createElement("div",null)}}]),t}(n.Component),rw=Object(r.withRouter)((function(e){var a=Object(n.useState)([]),t=Object(yp.a)(a,2),c=t[0],i=t[1],r=Object(n.useState)(!1),s=Object(yp.a)(r,2),m=s[0],d=s[1],u=Object(n.useState)({current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}),p=Object(yp.a)(u,2),v=p[0],h=p[1],f=Object(n.useState)({search:null,page:1}),E=Object(yp.a)(f,2),g=E[0],b=E[1],N=[{title:"PROPOSAL ID",dataIndex:"id",sorter:!0},{title:"PROPOSAL NAME",dataIndex:"name",sorter:!0},{title:"STATUS",dataIndex:"status",sorter:!0,render:function(e){return(null===e||void 0===e?void 0:e.title)||"-"}},{title:"ASSOCIATED OPPORTUNITY",dataIndex:"opportunity",sorter:!0,render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.name)||"-")}},{title:"Billing Account",dataIndex:"customer_contact",sorter:!0,render:function(e){return Object.keys(e).map((function(a,t){return l.a.createElement("span",{key:t},e[a].account&&e[a].account.name)}))},key:"account"},{title:"LAST ACTIVITY DATE",dataIndex:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:!0}];Object(n.useEffect)((function(){y(Object(wu.a)({},g))}),[g]);var y=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(!0),Uf(Object(wu.a)({customer_account:e.customer?e.customer.id:e.match.params.id},a)).then((function(a){i(e.viewAll?a.data.results:a.data.results.slice(0,10)),d(!1),h(Object(wu.a)(Object(wu.a)({},v),{},{total:e.viewAll?a.data.count:10}))})).catch((function(e){}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(e.hideTitle?"":"mt-30 no-data-card-row-new")},!e.hideSearch&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(e){b(Object(wu.a)(Object(wu.a)({},g),{},{search:e.target.value,page:1}))}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),e.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.tabChange("11")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),c.length>0?l.a.createElement("div",{className:"col-12 table-responsive width-160-id main-table-div"},l.a.createElement(fv.a,{pagination:0!=e.viewAll&&v,className:"border-0 carpet-cleaning-table",columns:N,rowKey:function(e){return e.id},loading:m,onRow:function(e,a){return{onClick:function(a){return o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:e.id}))}}},dataSource:c,onChange:function(e){b(Object(wu.a)(Object(wu.a)({},g),{},{page:e.current})),h(Object(wu.a)(Object(wu.a)({},e),{},{current:e.current}))},size:"middle"})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Opportunity_empty_state_icon,alt:"logo",className:"img-fluid"}),l.a.createElement("h6",{className:"text-gray-tag"},"No Proposals"))))))})),sw=fu.a.Panel;function ow(e){}var mw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={visibleTaskCreate:!1,visibleCreateNote:!1,visibleViewContact:!1,visibleCreateContact:!1,visibleViewAccount:!1,visibleAddAccount:!1},e.showCreateTask=function(a){e.setState({visibleTaskCreate:a})},e.showCreateNote=function(a){e.setState({visibleCreateNote:a})},e.showViewContact=function(a){e.setState({visibleViewContact:a})},e.showCreateContact=function(a){e.setState({visibleCreateContact:a})},e.showViewAccount=function(a){e.setState({visibleViewAccount:a})},e.showAddAccount=function(a){e.setState({visibleAddAccount:a})},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this;this.props.customer;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:ow,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.customer_account.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement($y,null)),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Posts ")),key:"10"},l.a.createElement(zy,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Activity ")),key:"11"},l.a.createElement(oN,Object.assign({},this.props,{hideTitle:!0,hideSearch:!0}))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Payment Information"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.customer_account.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"2"},l.a.createElement(Jy,null)),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.customer_account.edit,{id:e.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"3"},l.a.createElement(VN,{hideTitle:!0})),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Contacts "),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.customer_account.edit,{id:e.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"4"},l.a.createElement(Xy,Object.assign({},this.props,{hideTitle:!0,hideSearch:!0,viewAll:!1}))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Team "),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.customer_account.edit,{id:e.props.match.params.id}),editTab:"6"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"12"},l.a.createElement(iw,Object.assign({},this.props,{hideTitle:!0,hideSearch:!0}))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Documents ")),key:"5"},l.a.createElement(aw,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Associated Accounts")),key:"6"},l.a.createElement(cw,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Opportunities")),key:"7"},l.a.createElement(nw,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Proposals")),key:"13"},l.a.createElement(rw,Object.assign({},this.props,{hideTitle:!0,viewAll:!1}))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Projects")),key:"8"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return e.props.tabChange("7")}},"VIEW ALL")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.folder_gray_no_data,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Project"))))))),l.a.createElement(sw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Work Orders")),key:"9"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return e.props.tabChange("8")}},"VIEW ALL")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.work_setting,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Work Order"))))))))))))}}]),t}(n.Component),dw=Object(r.withRouter)(mw),uw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-info-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 steps-main-div-inn mt-3"},l.a.createElement(dw,this.props)))))}}]),t}(n.Component),pw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).projectColumns=[{title:"PROPOSAL NAME",dataIndex:"docs_name",sorter:!0},{title:"Size",dataIndex:"size",sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"FORMAT"),dataIndex:"format",sorter:!0}],e.projectData=[{key:"1",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"2",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"3",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"4",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")}],e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.folder_gray_no_data,alt:"cloud upload",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1 text-gray-tag"},"No Project"))))))}}]),t}(n.Component),vw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).workOrdersColumns=[{title:"Work order id",dataIndex:"work_order_id",sorter:!0},{title:"project",dataIndex:"project",sorter:!0},{title:"Site",dataIndex:"site",sorter:!0},{title:"Status",dataIndex:"status",sorter:!0},{title:"Truck(S)",dataIndex:"truck",sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"Service date"),dataIndex:"service_date",sorter:!0}],e.workOrdersData=[{key:"1",work_order_id:l.a.createElement("div",{className:"d-flex align-items-center"},"Project Name"),project:l.a.createElement("div",{className:"font-weight-normal"},"15 KB"),site:l.a.createElement("div",{className:"font-weight-normal"},".docx"),status:l.a.createElement("div",{className:"font-weight-normal"},".docx"),truck:l.a.createElement("div",{className:"font-weight-normal"},".docx"),service_date:l.a.createElement("div",{className:"font-weight-normal"},".docx")},{key:"2",work_order_id:l.a.createElement("div",{className:"d-flex align-items-center"},"Project Name"),project:l.a.createElement("div",{className:"font-weight-normal"},"15 KB"),site:l.a.createElement("div",{className:"font-weight-normal"},".docx"),status:l.a.createElement("div",{className:"font-weight-normal"},".docx"),truck:l.a.createElement("div",{className:"font-weight-normal"},".docx"),service_date:l.a.createElement("div",{className:"font-weight-normal"},".docx")},{key:"3",work_order_id:l.a.createElement("div",{className:"d-flex align-items-center"},"Project Name"),project:l.a.createElement("div",{className:"font-weight-normal"},"15 KB"),site:l.a.createElement("div",{className:"font-weight-normal"},".docx"),status:l.a.createElement("div",{className:"font-weight-normal"},".docx"),truck:l.a.createElement("div",{className:"font-weight-normal"},".docx"),service_date:l.a.createElement("div",{className:"font-weight-normal"},".docx")},{key:"4",work_order_id:l.a.createElement("div",{className:"d-flex align-items-center"},"Project Name"),project:l.a.createElement("div",{className:"font-weight-normal"},"15 KB"),site:l.a.createElement("div",{className:"font-weight-normal"},".docx"),status:l.a.createElement("div",{className:"font-weight-normal"},".docx"),truck:l.a.createElement("div",{className:"font-weight-normal"},".docx"),service_date:l.a.createElement("div",{className:"font-weight-normal"},".docx")}],e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.work_setting,alt:"cloud upload",className:"img-fluid"}),l.a.createElement("h6",{className:"text-gray-tag"},"No Work Order"))))))}}]),t}(n.Component),hw=vf.a.TabPane,fw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={tab:"1"},e.tabChange=function(a){e.setState({tab:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.customerAccountDetailAction(this.props.match.params.id).then((function(){var a=e.props.customer,t=[{title:"Billing Accounts",url:zm.dashboard.customer_account.self},{title:a.name,url:"#"}];e.props.setBreadcrumb(t)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},l.a.createElement(vf.a,{activeKey:this.state.tab,onChange:this.tabChange,className:"carpet-cleaning-main-common-tab"},l.a.createElement(hw,{tab:"Summary",key:"1"},l.a.createElement(uw,Object.assign({tabChange:this.tabChange},this.props))),l.a.createElement(hw,{tab:"Posts",key:"9"},l.a.createElement(zy,null)),l.a.createElement(hw,{tab:"Activity",key:"10"},l.a.createElement(oN,null)),l.a.createElement(hw,{tab:"Contacts",key:"3"},l.a.createElement(Xy,{viewAll:!0})),l.a.createElement(hw,{tab:"Documents",key:"4"},l.a.createElement(aw,null)),l.a.createElement(hw,{tab:"Associated Accounts",key:"5"},l.a.createElement(cw,this.props)),l.a.createElement(hw,{tab:"Opportunities",key:"6"},l.a.createElement(nw,{pagination:!0})),l.a.createElement(hw,{tab:"Proposals",key:"11"},l.a.createElement(rw,{pagination:!0,viewAll:!0})),l.a.createElement(hw,{tab:"Projects",key:"7"},l.a.createElement(pw,null)),l.a.createElement(hw,{tab:"Work Orders",key:"8"},l.a.createElement(vw,null))))))}}]),t}(n.Component);var Ew={customerAccountDetailAction:function(e){return function(a){return Mu(e).then((function(e){a({type:"CUSTOMER_ACCOUNT_DETAIL_SUCCESS",payload:null===e||void 0===e?void 0:e.data})}))}},setBreadcrumb:Uv},gw=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),Ew)(fw),bw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1},e.filterDataPop=function(){return l.a.createElement(TE,{fetchData:e.props.fetchData})},e.handleVisibleChange=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 align-items-center mini-header-filter-list-grid-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-opportunities-div"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.props.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(IE.a,{overlayClassName:"popover-main-all filter-popover",content:this.filterDataPop,title:!1,trigger:"click",visible:this.state.visible,placement:"bottom",onVisibleChange:this.handleVisibleChange},l.a.createElement(Vm.a,{className:"filter-btn d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter"))),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(qm.a,{to:Object(Sf.a)(zm.dashboard.contacts.create),className:"new-opportunity-btn d-flex align-items-center justify-content-center text-capitalize"},"+ Create Contact"))))))}}]),t}(n.Component),Nw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).setacctype=function(e){return"CUSTOMER_OWNER"===e?"Billing, Site Manager":"SITE_OWNER"===e?"Site Manager":"VENDOR"==e?"Vendor":"Billing"},e.columns=[{title:"Contact Name",dataIndex:"full_name",render:function(e){return l.a.createElement("div",{className:"name-id-details"},e)},key:"first_name",defaultSortOrder:"ascend",sorter:!0},{title:"Account Type",dataIndex:"account",render:function(a){return l.a.createElement("div",null,e.setacctype(null===a||void 0===a?void 0:a.account_type))},sorter:!0,key:"account"},{title:"Email",dataIndex:"default_email",render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.email)||"-")},sorter:!0,key:"default_phone"},{title:"Phone",dataIndex:"default_phone",render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.phone_number)||"-")},sorter:!0,key:"default_phone"},{title:"CITY",dataIndex:"contact_address",render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.city)||"-")},sorter:!0,key:"contact_address"},{title:"STATE",dataIndex:"contact_address",render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.state)||"-")},sorter:!0,key:"contact_address"},{title:"Last Activity Date",dataIndex:"modified",render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD,YYYY hh:mm A"))},key:"modified",sorter:!0}],e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="-modified",e.props.fetchTableData(c)},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.pagination,t=e.loading,n=e.data,c=e.locale;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table customer-account-table"},l.a.createElement(fv.a,{scroll:{y:500,x:1200},className:"main-table-all",columns:this.columns,dataSource:n,size:"middle",locale:c,loading:t,rowKey:function(e){return e.id},pagination:a,onChange:this.handleTableChange,onRow:function(e,a){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.contacts.view,{id:e.id}))}}}})))}}]),t}(n.Component),yw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={date:{start:"",end:"",start_modified:"",end_modified:""},pagination:{current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},data:[],loading:!1},e.fetchTableData=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.date;e.setState({loading:!0}),a.ordering||(a.ordering="-modified"),yh(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({loading:!1,data:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count})})})).catch((function(e){}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.onSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchTableData()}))},e.getLocaleData=function(){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.person_gray_icon_carve,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},"No Billing Accounts"))))},e.handleDateFilter=function(a){e.setState({date:Object(wu.a)(Object(wu.a)({},e.state.date),a)},(function(){e.fetchTableData()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Contacts",url:zm.dashboard.contacts.self}];this.props.setBreadcrumb(e);this.fetchTableData({ordering:"first_name"})}},{key:"render",value:function(){var e=this,a=this.state,t=a.data,n=a.pagination,c=a.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement(bw,{onSearch:this.debounceEvent(this.onSearch,1e3),fetchData:function(a){return e.handleDateFilter(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement(Nw,{loading:c,fetchTableData:this.fetchTableData,data:t,locale:c?{emptyText:" "}:{emptyText:this.getLocaleData()},pagination:n}))))}}]),t}(n.Component),ww=Object(Lm.b)(null,{setBreadcrumb:Uv})(yw),_w={labelCol:{span:24},wrapperCol:{span:24}},Sw=Pm.a.TextArea,xw=ku.a.Option,Cw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={assignees:[],fetching:!1,selectedData:null,warningVisible:!1},e.formRef=l.a.createRef(),e.handleChange=function(a){e.setState({selectedData:e.state.assignees.find((function(e){return e.id===a}))})},e.showWarningM=function(a){e.setState({warningVisible:a})},e.handleSubmit=function(a){a.contact=e.props.match.params.id,a.due_date&&(a.due_date=hd()(a.due_date).format("YYYY-MM-DD")),e.props.data?Vh(a,e.props.data.id).then((function(a){Mm.b.success("Post Updated Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Fh(a).then((function(a){Mm.b.success("Post Created Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.populateData=Object(Qm.a)($m.a.mark((function a(){var t;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.props.data){a.next=5;break}return a.next=3,e.fetchUser();case 3:e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.data),{},{assignee:null===(t=e.props.data.assignee)||void 0===t?void 0:t.id,due_date:e.props.data.due_date?hd()(e.props.data.due_date):null})),e.setState({selectedData:e.props.data.assignee});case 5:case"end":return a.stop()}}),a)}))),e.fetchUser=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ud("salesperson",a).then((function(a){e.setState({assignees:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.assignees,c=a.selectedData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,destroyOnClose:!0,title:"Post",maskClosable:!1,visible:this.props.visible,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",onClose:function(){e.showWarningM(!0)},placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){e.showWarningM(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.formRef.current.submit()},type:"primary"},this.props.data?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},_w,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Post Name*")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Post Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"post_type",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Type*"))},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Type"},l.a.createElement(xw,{value:"NOTE"},"Note"),l.a.createElement(xw,{value:"TASK"},"Task")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"assignee",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Assignee")),className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Search Assignee",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchUser()},onSearch:function(a){return e.fetchUser({search:a})},onChange:this.handleChange,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},n.map((function(e){return l.a.createElement(xw,{key:e.id,value:e.id},"".concat(e.first_name," ").concat(e.last_name))}))))),c&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(null===c||void 0===c?void 0:c.first_name,null===c||void 0===c?void 0:c.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(c.first_name," ").concat(c.last_name)),l.a.createElement("p",{className:"mb-0"},c.role.split("_").join(" ")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"due_date",label:"Due Date"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"priority",label:"Priority"},l.a.createElement(ku.a,{placeholder:"Select Priority"},l.a.createElement(xw,{value:"NORMAL"},l.a.createElement("span",{style:{backgroundColor:"#fcd966"},className:"status-tag"}),"Normal"),l.a.createElement(xw,{value:"HIGH"},l.a.createElement("span",{style:{backgroundColor:"#eb8357"},className:"status-tag"}),"High"),l.a.createElement(xw,{value:"LOW"},l.a.createElement("span",{style:{backgroundColor:"#7fd4ba"},className:"status-tag"}),"Low")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Description *"))},l.a.createElement(Sw,{className:"text-area-main text-area-task",placeholder:"Enter Description"})))))))),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningM(!1)},heading:"Are you sure you want to exit editing this Post?",handlePostDrawer:!0,closePostDrawer:function(){e.props.onClose(),e.formRef.current.resetFields()}}))}}]),t}(n.Component),Ow=Object(r.withRouter)(Cw),kw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,posts:[],selectedData:null,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},loading:!1},e.postColumns=[{title:"POST NAME",sorter:!0,render:function(a){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{checked:a.completed,onChange:function(){return e.changePostStatus(a,!a.completed)},className:"post-checkbox-opacity"},a.name))}},{title:"TYPE",dataIndex:"post_type",sorter:!0,render:function(e){return l.a.createElement("div",{className:"text-capitalize"},(null===e||void 0===e?void 0:e.split("_").join(" ").toLowerCase())||"-")}},{title:"PRIORITY",dataIndex:"priority",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"Assignee",dataIndex:"assignee",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},(null===e||void 0===e?void 0:e.first_name)?l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name)):" ","".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"-"))}},{title:l.a.createElement("div",{className:"position-relative"},"Due Date"),sorter:!0,render:function(a){return l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:e.getPostDateColor(a)}},e.getPostDateText(a))}}],e.changePostStatus=function(a,t){var n=e.state.posts;Vh(a.id,{completed:t}).then((function(l){var c=n.findIndex((function(e){return e.id===a.id}));n[c].completed=t,e.setState({posts:n}),Mm.b.success("Updated post status")}))},e.showPost=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,selectedData:t})},e.getPostDateColor=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?"gray":n.isSame(a,"day")?"#F2994A":n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0:"gray"},e.getPostDateText=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MMMM D, YYYY"):"No Due Date"},e.getPosts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Ph(Object(wu.a)({contact:e.props.match.params.id},a)).then((function(t){e.setState({posts:e.props.hideTitle?t.data.results.slice(0,10):t.data.results,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.hideTitle?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.getPosts({search:a.target.value,page:1})},e.handleChange=function(a){e.getPosts({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var e=this,a=this.state,t=(a.pagination,a.loading);return this.props.pagination||!1,l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{onClick:function(){return e.showPost(!0)},className:"new-opportunity-btn"},"+ Create")),this.props.hideButton&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase ml-auto",onClick:function(){return e.props.tabChange("8")}},"VIEW ALL"))),this.state.posts.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div post-table"},l.a.createElement(fv.a,{className:"carpet-cleaning-table border-0",columns:this.postColumns,dataSource:this.state.posts,size:"middle",loading:t,onChange:this.handleChange,pagination:!this.props.hideTitle&&this.state.pagination,rowKey:function(e){return e.id},onRow:function(a,t){return{onClick:function(t){e.showPost(!0,a)}}},rowClassName:function(e){if(e.completed)return"post-opacity"}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.note_add_new_create_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{onClick:function(){return e.showPost(!0)},className:"mb-0 approved-btn",style:{cursor:"pointer"}},"Create Post"))))),l.a.createElement(Ow,{data:this.state.selectedData,onSuccess:Object(Qm.a)($m.a.mark((function a(){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.showPost(!1);case 2:return a.next=4,e.getPosts();case 4:case"end":return a.stop()}}),a)}))),visible:this.state.visible,onClose:function(){return e.showPost(!1)}}))}}]),t}(n.Component),jw=Object(r.withRouter)(kw),Iw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.contact;return e.id?l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Salutation"),l.a.createElement("h5",null,"MR."===e.salutation?"Mr.":"MRS."===e.salutation?"Mrs.":"MS."===e.salutation?"Ms.":"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"FIRST NAME"),l.a.createElement("h5",{className:"mb-0"},null===e||void 0===e?void 0:e.first_name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Middle NAME"),l.a.createElement("h5",{className:"mb-0"},(null===e||void 0===e?void 0:e.middle_name)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Last Name"),l.a.createElement("h5",{className:"mb-0"},null===e||void 0===e?void 0:e.last_name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Suffix"),l.a.createElement("h5",{className:"mb-0"},"JR"===(null===e||void 0===e?void 0:e.suffix)?"Jr":"SR"===(null===e||void 0===e?void 0:e.suffix)?"Sr":"I"===(null===e||void 0===e?void 0:e.suffix)?"I":"II"===(null===e||void 0===e?void 0:e.suffix)?"II":"III"===(null===e||void 0===e?void 0:e.suffix)?"III":"-")),l.a.createElement("div",{className:"col-12 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Note"),l.a.createElement("h5",{className:"mb-0"},(null===e||void 0===e?void 0:e.note)||"-"))):l.a.createElement("div",null)}}]),t}(n.Component);var Aw=Object(Lm.b)((function(e){return Object(wu.a)({},e)}))(Iw),Dw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={opportunities:[],pagination:{current:1,pageSize:15},loading:!1},e.opportunitiesColumns=[{title:"OPPORTUNITY ID",sorter:!0,render:function(e){return l.a.createElement("div",null,null===e||void 0===e?void 0:e.opportunity.id)}},{title:"Opportunity name",sorter:!0,render:function(e){return l.a.createElement("div",null,null===e||void 0===e?void 0:e.opportunity.name)}},{title:"Status",sorter:!0,render:function(e){return l.a.createElement("div",null,null===e||void 0===e?void 0:e.opportunity.status.title)}},{title:"OPPORTUNITY SOURCE",sorter:!0,render:function(e){return l.a.createElement("div",null,null===e||void 0===e?void 0:e.opportunity.source.name)}},{title:"Last Activity Date",sorter:!0,render:function(e){return l.a.createElement("div",null,hd()(null===e||void 0===e?void 0:e.opportunity.modified).format("MMM DD,YYYY hh:mm A"))}}],e.fetchOpportunity=function(){var a,t=(null===(a=e.props.contact)||void 0===a?void 0:a.contact_opportunity)||[];e.setState({opportunities:t})},e.onSearch=function(e){},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchOpportunity()}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.pagination,c=t.opportunities,i=t.loading;return this.props.pagination||(n=!1),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),(null===(e=this.props)||void 0===e?void 0:e.hideSearch)&&l.a.createElement(Vm.a,{onClick:function(){return a.props.tabChange("4")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),(null===c||void 0===c?void 0:c.length)>0?l.a.createElement("div",{className:"col-12 mt-2 table-responsive width-160-id main-table-div"},l.a.createElement(fv.a,{pagination:n,className:"main-table-all border-0 carpet-cleaning-table",columns:this.opportunitiesColumns,rowKey:function(e){return e.id},loading:i,dataSource:c,size:"middle"})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.no_opportunities_icon,alt:"logo",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Opportunities"))))))}}]),t}(n.Component),Tw=Object(r.withRouter)(Dw),Rw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[],pagination:{current:1,pageSize:15},loading:!1},e.docsColumns=[{title:"NAME",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.document},e.name)))}},{title:"SIZE",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE FORMAT",dataIndex:"format",sorter:!0}],e.fetchDocument=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Rh(Object(wu.a)({contact:e.props.match.params.id},a)).then((function(a){e.setState({files:a.data.results,loading:!1})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.fetchDocument({search:a.target.value,page:1})},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("contact",e.props.match.params.id),n.append("document",t),Mh(n).then((function(a){e.fetchDocument()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchDocument()}},{key:"render",value:function(){var e=this,a=this.state,t=a.pagination,n=a.loading;return this.props.pagination||(t=!1),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"new-opportunity-btn text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("3")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div documents-table-main"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:t,className:"border-0 carpet-cleaning-table",columns:this.docsColumns,loading:n,rowKey:function(e){return e.id},dataSource:this.state.files,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"p-0 border-0 shadow-none bg-transparent"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{className:"mb-0",style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),Mw=Object(r.withRouter)(Rw),Fw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this,n={color:"#38bc94",fontWeight:500},c=this.props.contact;return c.id?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"no-data-card-row-new mt-30")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),!this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.contacts.edit,{id:c.id}))},className:"edit-btn-summary ml-auto"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return t.props.tabChange("2")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},l.a.createElement("div",{className:"col-12 col-sm-6"},c.emails.map((function(e){var a;return l.a.createElement("div",{style:{minHeight:"76px"},className:"row mx-0 pb-0 align-items-center user-info-div-main mb-3 position-relative opportunity-info-div-main ".concat(e.default_email&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12 d-flex align-items-center"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.email_inbox_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,null===e||void 0===e?void 0:e.name),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e?void 0:e.email)),(null===e||void 0===e?void 0:e.id)===(null===c||void 0===c||null===(a=c.default_email)||void 0===a?void 0:a.id)&&l.a.createElement("span",{className:"w-25",style:n},"Default Email")))}))),l.a.createElement("div",{className:"col-12 col-sm-6"},c.phone_numbers.map((function(e){var a;return l.a.createElement("div",{style:{minHeight:"76px"},className:"row mx-0 pb-0 align-items-center user-info-div-main mb-3 position-relative opportunity-info-div-main ".concat(e.default_phone&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12 d-flex align-items-center"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.call_add_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,null===e||void 0===e?void 0:e.name),l.a.createElement("p",{className:"mb-0"},yd(null===e||void 0===e?void 0:e.phone_number))),(null===e||void 0===e?void 0:e.id)===(null===c||void 0===c||null===(a=c.default_phone)||void 0===a?void 0:a.id)&&l.a.createElement("span",{className:"w-25",style:n},"Default Phone")))}))),l.a.createElement("div",{className:"col-12"},0===(null===c||void 0===c||null===(e=c.phone_numbers)||void 0===e?void 0:e.length)&&0===(null===c||void 0===c||null===(a=c.emails)||void 0===a?void 0:a.length)?l.a.createElement("div",{className:"row no-data-upload-screens bg-transparent no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Contact Information"))):""))))):l.a.createElement("div",null)}}]),t}(n.Component);var Pw=Object(Lm.b)((function(e){return Object(wu.a)({},e)}))(Fw),Vw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).columns=[{title:"Proposal name",dataIndex:"proposal_name",sorter:!0},{title:"Customer",dataIndex:"customer",sorter:!0},{title:"Status",dataIndex:"status",sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"LAST ACTIVITY DATE"),dataIndex:"last_activity_date",sorter:!0}],e.data=[{key:"1",proposal_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.related_show_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Albertson\u2019s")),customer:l.a.createElement("div",null,"(999) 000\u20130000"),status:l.a.createElement(Vm.a,{className:"main-status-btn border-0 bg-transparent"},"Prospect"),last_activity_date:l.a.createElement("div",null,"Dec 2, 2019, 1:23 PM")},{key:"2",proposal_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.related_show_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Albertson\u2019s")),customer:l.a.createElement("div",null,"(999) 000\u20130000"),status:l.a.createElement(Vm.a,{className:"main-status-btn border-0 bg-transparent"},"Prospect"),last_activity_date:l.a.createElement("div",null,"Dec 2, 2019, 1:23 PM")},{key:"3",proposal_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"}),l.a.createElement("div",{className:"name-id-details"},"Albertson\u2019s")),customer:l.a.createElement("div",null,"(999) 000\u20130000"),status:l.a.createElement(Vm.a,{className:"main-status-btn border-0 bg-transparent"},"Prospect"),last_activity_date:l.a.createElement("div",null,"Dec 2, 2019, 1:23 PM")},{key:"4",proposal_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.related_show_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Albertson\u2019s")),customer:l.a.createElement("div",null,"(999) 000\u20130000"),status:l.a.createElement(Vm.a,{className:"main-status-btn border-0 bg-transparent"},"Prospect"),last_activity_date:l.a.createElement("div",null,"Dec 2, 2019, 1:23 PM")}],e.fetchDocument=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Rh(Object(wu.a)({contact:e.props.match.params.id},a)).then((function(a){e.setState({files:a.data.results,loading:!1})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.onSearch=function(a){e.fetchDocument({search:a.target.value,page:1})},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("5")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.proposal_empty_state_icon,alt:"cloud upload",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1 text-gray-tag"},"No Proposals"))))))}}]),t}(n.Component),qw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={activity:[],loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.activityColumns=[{title:"DATE",dataIndex:"date",sorter:!0,render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A"))}},{title:"Action",dataIndex:"action",sorter:!0},{title:"EMPLOYEE",dataIndex:"user",sorter:!0,render:function(e){return l.a.createElement("div",{className:'className="d-flex align-items-center"'},l.a.createElement("span",{className:"assign-tag-card d-flex float-left align-items-center justify-content-center text-uppercase rounded-circle"},e.split(" ")[0].split("")[0],e.split(" ")[1].split("")[0]),e)}}],e.fetchActivity=function(){var a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),_h(null===(a=e.props.match)||void 0===a?void 0:a.params.id).then((function(a){e.setState({activity:e.props.hideTitle?a.data.data.slice(0,10):a.data.data,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:t.page||1,total:e.props.hideTitle?10:a.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).forEach((function(a){return Mm.b.error(e.response.data[a])}))})).finally((function(){e.setState({loading:!1})}))},e.handleChange=function(a){e.fetchActivity({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchActivity()}},{key:"render",value:function(){var e=this,a=this.state,t=a.activity,n=a.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},this.props.hideSearch&&l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center carpet-cleaning-mini-header"},l.a.createElement(Vm.a,{onClick:function(){e.props.tabChange("9")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"))),t?l.a.createElement("div",{className:"col-12 table-responsive main-table-div p-0"},l.a.createElement(fv.a,{className:" border-0 carpet-cleaning-table",columns:this.activityColumns,dataSource:t,size:"middle",onChange:this.handleChange,pagination:!this.props.hideTitle&&this.state.pagination,loading:n})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Time_empty_state_icon,alt:"cloud upload",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1"},"No Activity"))))))}}]),t}(n.Component),Lw=Object(r.withRouter)(qw),Uw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={address:null},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l,c,i,r,s=this;(null===(e=this.props)||void 0===e||null===(a=e.contact)||void 0===a||null===(t=a.contact_address)||void 0===t?void 0:t.id)&&(i=null===(n=this.props)||void 0===n||null===(l=n.contact)||void 0===l||null===(c=l.contact_address)||void 0===c?void 0:c.id,id(ad("contact.address",{id:i}),r)).then((function(e){console.log(e.data,"response"),s.setState({address:e.data})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}},{key:"render",value:function(){var e=this,a=this.state.address;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},!this.props.hideTitle&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},!this.props.hideTitle&&l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.customer_account.edit,{id:e.props.match.params.id}),editTab:"3"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},l.a.createElement("div",{className:"col-12"},a?l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{style:{color:"#4F4F4F"}},"Main Address"))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(a.street_address||""," ").concat(a.apartment||""," ").concat(a.county||""," ").concat(a.city||""," ").concat(a.state||""," ").concat(a.zip_code||""," ").concat(a.country||"")))):l.a.createElement("div",{className:"row mx-0 no-data-card-row bg-transparent mb-0 no-data-card-row-2 align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.location_gray}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Address Information"))))))))}}]),t}(n.Component),Bw=Object(r.withRouter)(Uw),Ww=Object(r.withRouter)((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},e.contact.account?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 col-sm-6 col-md-6 col-lg-6 mb-15-bt"},e.contact.account.account_type===qp?l.a.createElement("div",null,l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main mb-3 position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12",style:{cursor:"pointer"},onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.customer_account.view,{id:e.contact.account.id}))}},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.contact.account.name),l.a.createElement("p",{className:"mb-0"},Lp.CUSTOMER_OWNER))))):"SITE_OWNER"===e.contact.account.account_type?l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main mb-3 position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12",style:{cursor:"pointer"},onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.owner_account.view,{id:e.contact.account.id}))}},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.contact.account.name),l.a.createElement("p",{className:"mb-0"},Lp.SITE_OWNER)))):"CUSTOMER"===e.contact.account.account_type?l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main mb-3 position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12",style:{cursor:"pointer"},onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.customer_account.view,{id:e.contact.account.id}))}},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.contact.account.name),l.a.createElement("p",{className:"mb-0"},Lp.CUSTOMER)))):l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main mb-3 position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.contact.account.name),l.a.createElement("p",{className:"mb-0"},Lp.VENDOR))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-6 col-lg-6 mb-15-bt",style:{marginTop:"2.3vh"}},l.a.createElement("h6",{className:"text-uppercase"},"Position"),l.a.createElement("h5",{className:"mb-0"},e.contact.role||"-"))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center contacts-account-empty"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Account"))))))})),Yw=fu.a.Panel;function Kw(e){}var Gw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).proposalsColumns=[{title:"Name",dataIndex:"name"},{title:"TYPE",dataIndex:"type"},{title:"Assignee",dataIndex:"assignee"},{title:l.a.createElement("div",{className:"position-relative"},"Due Date"),dataIndex:"due_date",sorter:!0}],e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props.contact;return a.id?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:Kw,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.contacts.edit,{id:a.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement(Aw,null)),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Contact Information"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.contacts.edit,{id:a.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"3"},l.a.createElement(Pw,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.contacts.edit,{id:a.id}),editTab:"6"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"4"},l.a.createElement(Bw,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Posts")),key:"9"},l.a.createElement(jw,Object.assign({hideTitle:!0},this.props,{hideButton:!0,hideSearch:!0}))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Activity")),key:"10"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("9")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," ")),l.a.createElement(Lw,{pagination:!0,hideTitle:!0}))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Account"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.contacts.edit,{id:a.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("10")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," ")),l.a.createElement(Ww,{contact:this.props.contact}))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Documents ")),key:"11"},l.a.createElement(Mw,Object.assign({},this.props,{hideTitle:!0,hideSearch:!0}))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Opportunities")),key:"5"},l.a.createElement(Tw,Object.assign({},this.props,{hideTitle:!0,hideSearch:!0}))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Proposals")),key:"6"},l.a.createElement(Vw,Object.assign({},this.props,{hideTitle:!0}))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Projects")),key:"7"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("6")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.folder_gray_no_data,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Projects"))))))),l.a.createElement(Yw,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center"},l.a.createElement("span",null,"Work Orders")),key:"8"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("7")},className:"view-all-btn text-uppercase ml-auto"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.work_setting,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Work Order")))))))))))):l.a.createElement("div",null)}}]),t}(n.Component),zw=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{})(Gw),Hw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-info-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 steps-main-div-inn mt-3"},l.a.createElement(zw,this.props)))))}}]),t}(n.Component),$w=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).projectColumns=[{title:"PROPOSAL NAME",dataIndex:"docs_name",sorter:!0},{title:"Size",dataIndex:"size",sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"FORMAT"),dataIndex:"format",sorter:!0}],e.projectData=[{key:"1",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"2",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"3",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")},{key:"4",docs_name:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},"Project Name")),size:l.a.createElement("div",{className:"name-id-details"},"15 KB"),format:l.a.createElement("div",{className:"name-id-details"},".docx")}],e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.folder_icon_main,alt:"cloud upload",className:"img-fluid"}),l.a.createElement("h6",{style:{color:"#BDBDBD"}},"No Projects"))))))}}]),t}(n.Component),Qw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).workOrdersColumns=[{title:"Work order id",dataIndex:"work_order_id",sorter:!0},{title:"project",dataIndex:"project",sorter:!0},{title:"Site",dataIndex:"site",sorter:!0},{title:"Status",dataIndex:"status",sorter:!0},{title:"Truck(S)",dataIndex:"truck",sorter:!0},{title:l.a.createElement("div",{className:"position-relative"},"Service date"),dataIndex:"service_date",sorter:!0}],e.workOrdersData=[{key:"1",work_order_id:l.a.createElement("div",{className:"d-flex align-items-center"},"Project Name"),project:l.a.createElement("div",{className:"font-weight-normal"},"15 KB"),site:l.a.createElement("div",{className:"font-weight-normal"},".docx"),status:l.a.createElement("div",{className:"font-weight-normal"},".docx"),truck:l.a.createElement("div",{className:"font-weight-normal"},".docx"),service_date:l.a.createElement("div",{className:"font-weight-normal"},".docx")},{key:"2",work_order_id:l.a.createElement("div",{className:"d-flex align-items-center"},"Project Name"),project:l.a.createElement("div",{className:"font-weight-normal"},"15 KB"),site:l.a.createElement("div",{className:"font-weight-normal"},".docx"),status:l.a.createElement("div",{className:"font-weight-normal"},".docx"),truck:l.a.createElement("div",{className:"font-weight-normal"},".docx"),service_date:l.a.createElement("div",{className:"font-weight-normal"},".docx")},{key:"3",work_order_id:l.a.createElement("div",{className:"d-flex align-items-center"},"Project Name"),project:l.a.createElement("div",{className:"font-weight-normal"},"15 KB"),site:l.a.createElement("div",{className:"font-weight-normal"},".docx"),status:l.a.createElement("div",{className:"font-weight-normal"},".docx"),truck:l.a.createElement("div",{className:"font-weight-normal"},".docx"),service_date:l.a.createElement("div",{className:"font-weight-normal"},".docx")},{key:"4",work_order_id:l.a.createElement("div",{className:"d-flex align-items-center"},"Project Name"),project:l.a.createElement("div",{className:"font-weight-normal"},"15 KB"),site:l.a.createElement("div",{className:"font-weight-normal"},".docx"),status:l.a.createElement("div",{className:"font-weight-normal"},".docx"),truck:l.a.createElement("div",{className:"font-weight-normal"},".docx"),service_date:l.a.createElement("div",{className:"font-weight-normal"},".docx")}],e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.work_setting,alt:"cloud upload",className:"img-fluid"}),l.a.createElement("h6",{style:{color:"#BDBDBD"}},"No Work Orders"))))))}}]),t}(n.Component);var Jw=vf.a.TabPane,Zw=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={tab:"1"},e.tabChange=function(a){e.setState({tab:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Qm.a)($m.a.mark((function e(){var a;return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.contactDetailAction(this.props.match.params.id);case 2:a=[{title:"Contacts",url:zm.dashboard.contacts.self},{title:this.props.contact.first_name+" "+this.props.contact.last_name,url:"#"}],this.props.setBreadcrumb(a);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",activeKey:this.state.tab,onChange:this.tabChange},l.a.createElement(Jw,{tab:"Summary",key:"1"},l.a.createElement(Hw,{tabChange:this.tabChange})),l.a.createElement(Jw,{tab:"Contact Info",key:"2"},l.a.createElement(Pw,null)),l.a.createElement(Jw,{tab:"Posts",key:"8"},l.a.createElement(jw,{pagination:!0})),l.a.createElement(Jw,{tab:"Activity",key:"9"},l.a.createElement(Lw,{pagination:!0})),l.a.createElement(Jw,{tab:"Account",key:"10"},l.a.createElement(Ww,{contact:this.props.contact})),l.a.createElement(Jw,{tab:"Documents",key:"3"},l.a.createElement(Mw,{pagination:!0})),l.a.createElement(Jw,{tab:"Opportunities",key:"4"},l.a.createElement(Tw,Object.assign({pagination:!0},this.props))),l.a.createElement(Jw,{tab:"Proposals",key:"5"},l.a.createElement(Vw,null)),l.a.createElement(Jw,{tab:"Projects",key:"6"},l.a.createElement($w,null)),l.a.createElement(Jw,{tab:"Work Orders",key:"7"},l.a.createElement(Qw,null))))))}}]),t}(n.Component);var Xw={contactDetailAction:function(e){return function(a){return wh(e).then((function(e){a({type:"CONTACT_DETAIL_SUCCESS",payload:e.data})}))}},setBreadcrumb:Uv},e_=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),Xw)(Zw),a_=Pm.a.TextArea,t_={labelCol:{span:24},wrapperCol:{span:24}},n_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={buttonLoading:!1},e.formRef=l.a.createRef(),e.onSubmit=function(a){e.setState({buttonLoading:!0}),e.props.contact?xh(a,e.props.contact.id).then((function(a){Mm.b.success("Contact Updated Successfully"),e.props.setContact(a.data,2),e.setState({buttonLoading:!1})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Sh(a).then((function(a){Mm.b.success("Contact Created Successfully"),e.props.setContact(a.data,2),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){e.contact!==this.props.contact&&this.formRef.current.setFieldsValue(Object(wu.a)({},this.props.contact))}},{key:"render",value:function(){this.props.contact;var e=this.state.buttonLoading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit,requiredMark:!1},t_,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"salutation",label:"Salutation",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:"MR."},"Mr."),l.a.createElement(ku.a.Option,{value:"MRS."},"Mrs."),l.a.createElement(ku.a.Option,{value:"MS."},"Ms.")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"first_name",label:"First Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"First Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Middle Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"last_name",label:"Last Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Last Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"suffix",label:"Suffix",rules:[{message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Jr."},l.a.createElement(ku.a.Option,{value:"JR"},"Jr."),l.a.createElement(ku.a.Option,{value:"SR"},"Sr."),l.a.createElement(ku.a.Option,{value:"I"},"I"),l.a.createElement(ku.a.Option,{value:"II"},"II"),l.a.createElement(ku.a.Option,{value:"III"},"III")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"note",label:"Note",rules:[{message:"this field is required"}]},l.a.createElement(a_,{placeholder:"Type something",rows:6,style:{height:"auto",paddingTop:15}}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:e,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),l_={labelCol:{span:24},wrapperCol:{span:24}},c_=ku.a.Option,i_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={emails:[],phones:[],selectedPhone:null,selectedEmail:null},e.emailRef=l.a.createRef(),e.phoneRef=l.a.createRef(),e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove(a,t)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{onClick:function(){return e.handleEdit(a,t)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit")))},e.handleRemove=function(a,t){"email"===t?jh(a.id).then((function(){var t,n=e.props.emails.filter((function(e){return e.id!=a.id}));(Mm.b.success("Email removed successfully!"),n.length>0&&a.default_email)?e.handleDefaultEmail(null===(t=n[0])||void 0===t?void 0:t.id):e.props.fetchEmails()})).catch((function(e){td(e)})):Th(a.id).then((function(){var t,n=e.props.phones.filter((function(e){return e.id!=a.id}));(Mm.b.success("Phone Number removed successfully!"),n.length>0&&a.default_phone)?e.handleDefaultPhone(null===(t=n[0])||void 0===t?void 0:t.id):e.props.fetchPhones()})).catch((function(e){td(e)}))},e.handleEdit=function(a,t){"email"===t?(e.emailRef.current.setFieldsValue(Object(wu.a)({},a)),e.setState({selectedEmail:a})):(e.phoneRef.current.setFieldsValue(Object(wu.a)({},a)),e.setState({selectedPhone:a}))},e.handleEmail=function(a){a.contact=e.props.contact.id,e.state.selectedEmail?kh(a,e.state.selectedEmail.id).then((function(a){Mm.b.success("Email Updated Successfully!"),e.setState({selectedEmail:null}),e.emailRef.current.resetFields(),e.props.fetchEmails()})).catch((function(e){td(e)})):Oh(a).then((function(a){Mm.b.success("Email Created Successfully!"),e.emailRef.current.resetFields();[].push(a.data),e.props.emails.length?e.props.fetchEmails():e.handleDefaultEmail(a.data.id)})).catch((function(e){td(e)}))},e.handlePhone=function(a){a.contact=e.props.contact.id,e.state.selectedPhone?Dh(a,e.state.selectedPhone.id).then((function(a){Mm.b.success("Phone Number updated Successfully"),e.setState({selectedPhone:null}),e.phoneRef.current.resetFields(),e.props.fetchPhones()})).catch((function(e){td(e)})):Ah(a).then((function(a){Mm.b.success("Phone Number Created Successfully!"),e.phoneRef.current.resetFields();[].push(a.data),e.props.phones.length?e.props.fetchPhones():e.handleDefaultPhone(a.data.id)})).catch((function(e){td(e)}))},e.phoneNumberValidate=function(e,a,t){a.toString().length<10?t("minimum digits should be 10"):t()},e.handleDefaultEmail=function(a){qh(e.props.contact.id,{email_id:a}).then((function(){e.props.fetchEmails()})).catch((function(e){td(e)}))},e.handleDefaultPhone=function(a){Lh(e.props.contact.id,{phone_id:a}).then((function(){e.props.fetchPhones()})).catch((function(e){td(e)}))},e.handleSubmit=function(){e.props.setContact(e.props.contact,6),Mm.b.success("Contact updated successfully!")},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.selectedEmail,i=n.selectedPhone,r=this.props,s=r.emails,o=r.phones,m=null===s||void 0===s||null===(e=s.find((function(e){return!0===e.default_email})))||void 0===e?void 0:e.id,d=null===o||void 0===o||null===(a=o.find((function(e){return!0===e.default_phone})))||void 0===a?void 0:a.id;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all emails and phone numbers related to this contact."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 border-rit-div"},l.a.createElement("div",{className:"row"},l.a.createElement(Fm.a,Object.assign({ref:this.emailRef,onFinish:this.handleEmail,hideRequiredMark:!0},l_,{className:"main-inner-form w-100"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("h4",null,"Email Address")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Email Address Type *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select",suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(c_,{value:"WORK"},"Work"),l.a.createElement(c_,{value:"PERSONAL"},"Personal")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"},{type:"email",message:"Valid Email is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))),l.a.createElement("div",{className:"col-12 validate-div-col validate-div-col-2 text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},c?"Edit":"Add")))),(null===s||void 0===s?void 0:s.length)>0?l.a.createElement(vh.a.Group,{className:"w-100",name:"email",value:m,onChange:function(e){return t.handleDefaultEmail(e.target.value)}},null===s||void 0===s?void 0:s.map((function(e){return l.a.createElement("div",{key:e.id,className:"col-12"},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main position-relative opportunity-info-div-main ".concat(e.default_email&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.email_inbox_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.name.toLowerCase()),l.a.createElement("p",{className:"mb-0"},e.email)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:t.menu(e,"email"),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",value:e.id,checked:e.default_email},"Default Email"))))}))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row no-data-card-row-2 align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.email_inbox_gray}),l.a.createElement("h6",{className:"mb-0"},"Added email addresses ",l.a.createElement("br",null)," will show up here")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement(Fm.a,Object.assign({ref:this.phoneRef,hideRequiredMark:!0,onFinish:this.handlePhone},l_,{className:"main-inner-form w-100"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("h4",null,"Phone Number")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Phone Number Type *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Select",suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(c_,{value:"WORK_MAIN"},"Work (Main)"),l.a.createElement(c_,{value:"WORK_DIRECT"},"Work (Direct)"),l.a.createElement(c_,{value:"PERSONAL"},"Personal"),l.a.createElement(c_,{value:"MOBILE"},"Mobile")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone_number",label:"Phone Number *",rules:[{required:!0,message:"this field is required"},{validator:this.phoneNumberValidate}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,"")},maxLength:22,stringMode:!0,parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12 validate-div-col validate-div-col-2 text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},i?"Edit":"Add")))),(null===o||void 0===o?void 0:o.length)>0?l.a.createElement(vh.a.Group,{name:"phone",value:d,onChange:function(e){return t.handleDefaultPhone(e.target.value)}},null===o||void 0===o?void 0:o.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-12"},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main position-relative opportunity-info-div-main ".concat(e.default_phone&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.call_add_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"WORK_MAIN"===e.name?"Work (Main)":"WORK_DIRECT"===e.name?"Work (Direct)":null===(a=e.name)||void 0===a?void 0:a.toLowerCase()),l.a.createElement("p",{className:"mb-0"},yd(e.phone_number))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:t.menu(e,"phone"),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",value:e.id,checked:e.default_phone},"Default Phone Number"))))}))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row no-data-card-row-2 align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.phone_add_gray}),l.a.createElement("h6",{className:"mb-0"},"Added phone numbers ",l.a.createElement("br",null)," will show up here")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main",onClick:this.handleSubmit},"Save and Continue")))))))}}]),t}(n.Component),r_=Object(r.withRouter)(i_),s_={labelCol:{span:24},wrapperCol:{span:24}},o_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("contact",e.props.contact.id),n.append("document",t),Mh(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchFiles=function(){Rh({contact:e.props.contact.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},s_,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"Documents",label:"Documents",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse"))))))),l.a.createElement("div",{className:"col-12 px-0 table-responsive main-table-div"},0===this.state.files.length?"":l.a.createElement(fv.a,{pagination:!1,className:"main-table-all border-0 carpet-cleaning-table",columns:this.columns,dataSource:this.state.files,size:"middle",locale:{emptyText:" "}})),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Vm.a,{className:"validate-btn-main"},"Save and Continue")))))))}}]),t}(n.Component),m_=Object(r.withRouter)(o_),d_=ku.a.Option,u_={labelCol:{span:24},wrapperCol:{span:24}},p_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={accounts:[],selected:null,fetching:!1,buttonLoading:!1,positionVisible:!1,positions:[],page:1,totalCount:0},e.formRef=l.a.createRef(),e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){e.formRef.current.resetFields(),e.setState({selected:null})},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},"Edit"))),e.fetchAccount=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Iu(a).then((function(a){e.setState({accounts:a.data.results,fetching:!1},(function(){e.formRef.current.setFieldsValue({account:null})}))})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleChange=function(a){e.formRef.current.setFieldsValue({account:null});var t=e.state.accounts.find((function(e){return e.id===a}));e.setState({selected:t})},e.onSubmit=function(a){var t,n=Object(wu.a)(Object(wu.a)({},a),{},{account:(null===(t=e.state.selected)||void 0===t?void 0:t.id)||null});e.setState({buttonLoading:!0}),xh(n,e.props.contact.id).then((function(a){Mm.b.success("Account linked successfully"),e.props.setContact(a.data,3),e.props.fetchContacts(),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))},e.fetchPositions=function(){var a=e.state,t=a.page,n=a.search,l={page:t,search:n};e.setState({fetching:!0}),Wh(l).then((function(a){1===t?e.setState({positions:a.data.results,totalCount:a.data.count}):e.setState((function(e){return{positions:[].concat(Object(Ou.a)(e.positions),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.showPosition=function(a){e.setState({positionVisible:a})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.handleAccountModal=function(){e.setState({AccountModalVisible:!1})},e.callbackAccount=function(a){var t=a;e.setState({selected:t})},e.showCustomerAccount=function(){e.setState({customerModalVisible:!1})},e.showSitemanagerAccount=function(){e.setState({ownerModalVisible:!1})},e.setAccountTypeOrVisible=function(a,t){"CUSTOMER"===a||a===qp?e.setState({createAccountType:a,customerModalVisible:t}):e.setState({createAccountType:a,ownerModalVisible:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&wh(this.props.match.params.id).then((function(a){e.fetchAccount({search:a.data.account?a.data.account.name:""}),e.formRef.current.setFieldsValue({role:a.data.role}),e.setState({selected:a.data.account})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.accounts,c=a.selected,i=a.buttonLoading,r=a.positions,s=a.totalCount;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Each contact can only be associated with one account."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,hideRequiredMark:!0,ref:this.formRef},u_,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account",label:"Account",rules:[{required:!1,message:""}],className:"position-relative ant-select-single-placeholder"},l.a.createElement(ku.a,{placeholder:"Search",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchAccount()},showSearch:!0,disabled:!!c,onSearch:this.debounceEvent((function(a){return e.fetchAccount({search:a})}),1e3),onChange:this.handleChange},n.map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},Lp[e.account_type])))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute text-capitalize",disabled:!!c,onClick:function(){e.setState({AccountModalVisible:!0})}},"+ Create")),!c&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center contacts-account-empty"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Account")))),c&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,c.name),l.a.createElement("p",{className:"mb-0"},Lp[c.account_type]))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:this.menu,trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"role",label:"Position",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{placeholder:"Search and Select",notFoundContent:null,filterOption:!1,onSearch:function(a){e.setState({page:1,search:a},(function(){e.fetchPositions()}))},showSearch:!0,onFocus:function(){return e.fetchPositions()},dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,t&&l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)))},onPopupScroll:function(a){a.persist();var t=a.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&s!=r.length&&e.setState({page:e.state.page+1},(function(){return e.fetchPositions()}))}},r.map((function(e,a){return l.a.createElement(d_,{value:e.name,key:"".concat(e.name+a)},e.name)})))),l.a.createElement(Vm.a,{className:"create-btn-main create-btn-main-update position-absolute",onClick:function(){return e.showPosition(!0)}},"+ Create")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:i,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(bb,{visible:this.state.positionVisible,onClose:function(){return e.showPosition(!1)}}),l.a.createElement(Up,{PARTIAL_BILLING:!0,PARTIAL_MANAGER:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.AccountModalVisible,onClose:function(){return e.handleAccountModal(!1)}}),this.state.customerModalVisible?l.a.createElement(kp,{createAccountType:this.state.createAccountType,visible:this.state.customerModalVisible,callbackCustomerAccount:this.callbackAccount,onClose:function(){return e.showCustomerAccount(!1)}}):"",this.state.ownerModalVisible?l.a.createElement(Vp,{createAccountType:this.state.createAccountType,visible:this.state.ownerModalVisible,callbackOwnerAccount:this.callbackAccount,onClose:function(){return e.showSitemanagerAccount(!1)}}):"")}}]),t}(n.Component),v_=Object(r.withRouter)(p_),h_=t(105),f_={labelCol:{span:24},wrapperCol:{span:24}},E_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).formRef=l.a.createRef(),n.handleSubmit=function(e){var a=n.props.contact,t=Object(wu.a)(Object(wu.a)({},e),{},{contact:null===a||void 0===a?void 0:a.id});n.props.address?Bh(n.props.address.id,t).then((function(e){var a=e.data;n.props.setAddress(a,3),Mm.b.success("Address updated successfully")})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Uh(t).then((function(e){var a=e.data;n.props.setAddress(a,3),Mm.b.success("Address created successfully")})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},n.handleCountyChange=function(e){n.formRef.current.setFieldsValue({state:null});var a=n.state.county.filter((function(a){return a.county===e}));n.setState({updateMainState:a}),1===(null===a||void 0===a?void 0:a.length)&&n.formRef.current.setFieldsValue({state:a[0].state})},n.state={addressInfo:null,county:[],updateMainState:null},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l,c,i,r=this;(null===(e=this.props)||void 0===e||null===(a=e.match)||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id)?wh(null===(n=this.props)||void 0===n||null===(l=n.match)||void 0===l||null===(c=l.params)||void 0===c?void 0:c.id).then((function(e){var a;r.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.data.contact_address),{},{country:(null===(a=e.data.contact_address)||void 0===a?void 0:a.country)||"United States"}))})).catch((function(e){td(e)})):(null===(i=this.formRef)||void 0===i?void 0:i.current)&&this.formRef.current.setFieldsValue({country:"United States"});Qu({ordering:"county"}).then((function(e){r.setState({county:e.data}),r.setState({updateMainState:e.data})})).catch((function(e){td(e),r.setState({load:!1})}))}},{key:"render",value:function(){var e=this.state,a=e.county,t=e.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input main address and billing address."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},f_,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Location Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(a,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(t,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"Zip/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Image.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))))}}]),t}(n.Component),g_=Object(h_.withRouter)(E_),b_=ku.a.Option,N_={labelCol:{span:24},wrapperCol:{span:24}},y_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:[],opportunities:[],fetching:!1,loading:!1},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.removeOpportunity(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},"Edit")))},e.opportunitiesColumns=[{title:"Opportunity name",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},null===e||void 0===e?void 0:e.opportunity.name)}},{title:"Status",sorter:!0,render:function(e){var a;return l.a.createElement("div",{className:"font-weight-normal"},null===e||void 0===e||null===(a=e.opportunity.status)||void 0===a?void 0:a.title)}},{title:"OPPORTUNITY SOURCE",sorter:!0,render:function(a,t){var n;return l.a.createElement("div",{className:"font-weight-normal position-relative"},null===a||void 0===a||null===(n=a.opportunity.source)||void 0===n?void 0:n.name,l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main table-add-remove",overlay:e.menu(t),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))))}}],e.removeOpportunity=function(a){Gh(a.id).then((function(a){e.props.fetchContacts()})).catch((function(e){td(e)}))},e.handleChange=function(a){Kh({opportunity:a,contact:e.props.contact.id}).then((function(a){e.props.fetchContacts(e.props.contact.id),e.formRef.current.resetFields()})).catch((function(e){td(e)}))},e.fetchAllOpportunity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),wv(a).then((function(a){e.setState({data:a.data.results,fetching:!1})})).catch((function(e){td(e)})),e.setState({fetching:!1})},e.onSearch=function(a){e.fetchOpportunity({search:a.target.value})},e.handleSubmit=function(){e.props.setContact(e.props.contact,5),Mm.b.success("Contact updated successfully!")},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n;(null===(e=this.props)||void 0===e||null===(a=e.match)||void 0===a?void 0:a.params.id)&&this.props.fetchContacts(null===(t=this.props)||void 0===t||null===(n=t.match)||void 0===n?void 0:n.params.id)}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.fetching,c=t.data,i=(null===(e=this.props.contact)||void 0===e?void 0:e.contact_opportunity)||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},N_,{className:"main-inner-form",onFinish:this.handleSubmit}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"opportunities",label:"Opportunities *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Search Opportunities",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,showSearch:!0,onFocus:function(){return a.fetchAllOpportunity()},onSearch:function(e){return a.fetchAllOpportunity({search:e})},onChange:this.handleChange},c.map((function(e){return l.a.createElement(b_,{key:e.id,value:e.id},e.name)}))))),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center contacts-opportunity-empty"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.no_opportunities_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Opportunities")))),i.length>0&&l.a.createElement("div",{className:"col-12 table-responsive px-3 main-table-div"},l.a.createElement(fv.a,{pagination:!1,loading:this.state.loading,className:"main-table-all border-0 carpet-cleaning-table",columns:this.opportunitiesColumns,dataSource:i,size:"middle"})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue"))))))))}}]),t}(n.Component),w_=(Object(r.withRouter)(y_),fu.a.Panel),__=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={contact:null,visibleConfirm:!1,unsavedExit:!1,address:null,activeKey:["1"],requiredSuccessModalVisible:!1,requiredWarningModalVisible:!1,required:!1,emails:[],phones:[]},e.showContactInfo=function(a){e.setState({contactVisible:a})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.setAddress=function(a,t){a.city&&a.state&&a.country&&a.street_address&&a.zip_code?(e.setState((function(){return{address:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{address:a}}));var n=null;e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n||e.setState((function(e){return{address:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.setContact=function(a,t){var n,l,c,i,r,s=null===(n=e.state)||void 0===n?void 0:n.contact;(null===s||void 0===s?void 0:s.first_name)&&(null===s||void 0===s?void 0:s.last_name)?(null===(l=e.state)||void 0===l||null===(c=l.phones)||void 0===c?void 0:c.length)&&(null===(i=e.state)||void 0===i||null===(r=i.emails)||void 0===r?void 0:r.length)?e.setState((function(){return{contact:a,unsavedExit:!1}})):e.setState((function(){return{contact:a}})):e.setState((function(){return{contact:a}}));var o=null;e.state.activeKey.length>1&&(o=e.state.activeKey.find((function(e){return e==t}))),o||e.setState((function(e){return{contact:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.showRequiredWarningModal=function(a){e.setState({requiredWarningModalVisible:a})},e.fetchContacts=function(){wh(e.props.match.params.id||e.state.contact.id).then((function(a){e.setState({contact:a.data},(function(){var a,t,n,l,c,i,r=null===(a=e.state)||void 0===a?void 0:a.contact;(null===r||void 0===r?void 0:r.first_name)&&(null===r||void 0===r?void 0:r.last_name)&&((null===(t=e.props.match.params)||void 0===t?void 0:t.id)||((null===r||void 0===r?void 0:r.account)&&(null===(n=e.state)||void 0===n||null===(l=n.phones)||void 0===l?void 0:l.length)&&(null===(c=e.state)||void 0===c||null===(i=c.emails)||void 0===i?void 0:i.length)?(e.setState((function(){return{contact:r,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{contact:r}}))))}))})).catch((function(e){}))},e.fetchEmails=function(){var a,t;Ch({contact:(null===(a=e.state.contact)||void 0===a?void 0:a.id)?null===(t=e.state.contact)||void 0===t?void 0:t.id:e.props.match.params.id}).then((function(a){e.setState({emails:a.data.results}),e.fetchContacts()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.fetchPhones=function(){var a,t;Ih({contact:(null===(a=e.state.contact)||void 0===a?void 0:a.id)?null===(t=e.state.contact)||void 0===t?void 0:t.id:e.props.match.params.id}).then((function(a){e.setState({phones:a.data.results}),e.fetchContacts()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.contact;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?e.setState({unsavedExit:!1},o.push(Object(dh.a)(zm.dashboard.contacts.view,{id:l.id}))):e.showConfirmModal(!0)},e.handleCancel=function(){},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Contact",url:zm.dashboard.contacts.create}],t=[{title:"Edit Contact",url:zm.dashboard.contacts.edit}];this.props.match.params.id?(this.props.setBreadcrumb(t),wh(this.props.match.params.id).then((function(a){e.setState({contact:a.data,address:a.data.contact_address})})).catch((function(e){})),this.fetchPhones(),this.fetchEmails(),this.setState({activeKey:this.props.location.editTab||"1"})):this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.contact,n=a.emails,c=a.phones,i=a.activeKey,r=a.address;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1},setCancel:function(){e.setState({required:!0})}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:i,onChange:this.collapseOnChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(w_,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(n_,{setContact:this.setContact,contact:t})),l.a.createElement(w_,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Contact Information"))),key:"2"},l.a.createElement(r_,{setContact:this.setContact,contact:t,emails:n,phones:c,fetchEmails:this.fetchEmails,fetchPhones:this.fetchPhones})),l.a.createElement(w_,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Address Information"))),key:"6"},l.a.createElement(g_,{contact:t,address:r,setAddress:this.setAddress})),l.a.createElement(w_,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Account"))),key:"3"},l.a.createElement(v_,{setContact:this.setContact,contact:t,fetchContacts:this.fetchContacts})),l.a.createElement(w_,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"5"},l.a.createElement(m_,{contact:t}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{style:{marginRight:10},onClick:function(){e.state.unsavedExit?o.push(zm.dashboard.contacts.self):e.showWarningModal(!0)}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.contacts.view,{id:t.id})):e.handleViewMainButtonCLick()},type:"primary"},"View Contact"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this contact!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view this contact,"," ",l.a.createElement(Vm.a,{className:"border-0 shadow-none p-0 bg-transparent",onClick:function(){return o.push(Object(dh.a)(zm.dashboard.contacts.view,{id:t.id}))}}," ","select View Contact"," "),"."),okTitle:"View Contact",okAction:function(){e.setState({unsavedExit:!1},o.push(Object(dh.a)(zm.dashboard.contacts.view,{id:t.id})))},visible:this.state.visibleConfirm,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:this.props.match.params.id?"Are you sure you want to exit editing this contact?":"Are you sure you want to exit creating this contact?",okAction:function(){e.setState({unsavedExit:!1},o.push(zm.dashboard.contacts.self))},visible:this.state.warningModalVisible,onClose:function(){return e.showWarningModal(!1)}}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the account, select View Account.",onClose:function(){e.showRequiredSuccessModal(!1)},onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.contacts.view,{id:t.id}))}}))}}]),t}(n.Component);var S_={setBreadcrumb:Uv},x_=Object(Lm.b)((function(e){return{}}),S_)(Object(r.withRouter)(__)),C_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Accounts & Contacts",url:zm.dashboard.account_contact}];this.props.setBreadcrumb(e)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.customer_account.self)},className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div mx-0 row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.green_shade_customer_img,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Billing Accounts"),l.a.createElement("h6",{className:"mb-0"},"Account that pays for the service"))))))),l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.owner_account.self)},className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.owner,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Site Manager Accounts"),l.a.createElement("h6",{className:"mb-0"},"Account that manages sites"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6",onClick:function(){return o.push(zm.dashboard.vendor_account.self)}},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Vendor,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Vendor Accounts"),l.a.createElement("h6",{className:"mb-0"},"The account that provides external services"))))))),l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.contacts.self)},className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Contacts,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Contacts"),l.a.createElement("h6",{className:"mb-0"},"The person who represents an account"))))))))))))}}]),t}(n.Component),O_=Object(Lm.b)(null,{setBreadcrumb:Uv})(C_),k_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Sales",url:zm.dashboard.sales.self}];this.props.setBreadcrumb(e)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.opportunities.self)},className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div mx-0 row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Opportunities,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Opportunities"),l.a.createElement("h6",{className:"mb-0"},"Potential Jobs/Services"))))))),l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.sales.proposal.self)},className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Proposals,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Proposals"),l.a.createElement("h6",{className:"mb-0"},"Proposed Jobs/Services"))))))),l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.sales.price_lookup.self)},className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.price_lookup,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Price Lookup"),l.a.createElement("h6",{className:"mb-0"},"Lookup Service Variants\u2019 Prices"))))))))))))}}]),t}(n.Component),j_=Object(Lm.b)(null,{setBreadcrumb:Uv})(k_),I_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.operations.projects.self)},className:"shade-card-main-div mx-0 curser-pointer row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Projects,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Projects"),l.a.createElement("h6",{className:"mb-0"},"Finalized jobs/services"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{className:"shade-card-main-div curser-pointer row mx-0",onClick:function(){return o.push(zm.dashboard.operations.work_order.self)}},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.WorkOrder,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Work Orders"),l.a.createElement("h6",{className:"mb-0"},"Jobs/services ready to be assigned"))))))),au(["ADMIN"])&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{className:"shade-card-main-div curser-pointer row mx-0",onClick:function(){return o.push(zm.dashboard.operations.dispatch.self)}},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Dispatch,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Dispatch"),l.a.createElement("h6",{className:"mb-0"},"Jobs/services to be set in motion"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{className:"shade-card-main-div shade-card-inactive-section row mx-0",disabled:!0},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.warehouse_management_coming_soon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Warehouse Management"),l.a.createElement("h6",{className:"mb-0"},"Short description of this section"))),l.a.createElement("div",{className:"coming-soon-div d-flex align-items-center m-auto"},"Coming Soon")))))))))))}}]),t}(n.Component),A_=Object(Lm.b)(null,{setBreadcrumb:Uv})(I_),D_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).changeUrl=function(e){o.push(e)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Management",url:zm.dashboard.management.self}];this.props.setBreadcrumb(e)}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0",onClick:function(){return e.changeUrl(zm.dashboard.management.service.self)}},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.lineItem,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Services"),l.a.createElement("h6",{className:"mb-0"},"Service Families, Services, and Service Variants"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0",onClick:function(){return e.changeUrl(zm.dashboard.management.labor.self)}},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Labor,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Labor"),l.a.createElement("h6",{className:"mb-0"},"Labor Groups and Employees"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div mx-0 row"},l.a.createElement("div",{className:"col-12 p-0",onClick:function(){return e.changeUrl(zm.dashboard.management.fleet.self)}},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Fleet,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Fleet"),l.a.createElement("h6",{className:"mb-0"},"Fleet Families, Fleet Groups, and Vehicles"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0",onClick:function(){return e.changeUrl(zm.dashboard.management.supply_tools.self)}},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Equipment,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Supplies/Small Tools"),l.a.createElement("h6",{className:"mb-0"},"Supply Families, Supply Groups, and Supplies/Small Tools"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0",onClick:function(){return e.changeUrl(zm.dashboard.management.inventory.self)}},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Supplies,className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Inventory"),l.a.createElement("h6",{className:"mb-0"},"Inventory and Disposal Inventory Families, Inventory, Disposal Inventory, and Inventory Kits"))))))),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 cursor-pointer"},l.a.createElement("div",{className:"shade-card-main-div row mx-0"},l.a.createElement("div",{className:"col-12 p-0",onClick:function(){return e.changeUrl(zm.dashboard.management.disposal.self)}},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.disposal_sidebar,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Disposal"),l.a.createElement("h6",{className:"mb-0"},"Disposal Families and Disposal"))))))))))))}}]),t}(n.Component),T_=Object(Lm.b)(null,{setBreadcrumb:Uv})(D_),R_=vf.a.TabPane,M_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).columns=[{title:"Fleet Family Name",dataIndex:"name",sorter:!0,key:"name"},{title:"Fleet Groups",dataIndex:"childCount",sorter:!0},{title:"Last Activity Date",dataIndex:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD, YYYY hh:mm A"))},sorter:!0,key:"modified"}],e.fleetColumns=[{title:"Fleet Kit Name",dataIndex:"name",sorter:!0},{title:"Fleet Groups",dataIndex:"group_count",sorter:!0}],e.vehicleColumns=[{title:"Vehicle Id",dataIndex:"id",sorter:!0,key:"id"},{title:"Vehicle Name",dataIndex:"name",sorter:!0,key:"name"},{title:"Make",dataIndex:"make",sorter:!0,key:"make"},{title:"Model",dataIndex:"model",sorter:!0,key:"model"},{title:"Year",dataIndex:"year",sorter:!0,key:"year"},{title:"Vin/Sin",dataIndex:"vin_sin",sorter:!0,key:"vin_sin"},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",null,e?e.name:"-")}},{title:"Status",dataIndex:"status",sorter:!0,key:"status",render:function(e){return l.a.createElement("span",{style:"INACTIVE"===e?{color:"red"}:null},"INACTIVE"===e?"Inactive":"Active")}},{title:"Vehicle Group",dataIndex:"fleet_group",render:function(e){return(null===e||void 0===e?void 0:e.name)||"-"}}],e.vehicleGroupColumns=[{title:"Fleet Group Name",sorter:!0,key:"name",render:function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.name),Qd(e)&&l.a.createElement("p",{className:"red-text-disposal"},"Please complete all required information to avoid issues"))}},{title:"Fleet Family",render:function(e){return l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:e.name},l.a.createElement(qm.a,null,e.name)))}},{title:"Vehicles",dataIndex:"vehicle",sorter:!0}],e.state={packages:[],groups:[],vehicles:[],fleetKit:[],key:"1",loading:!1,pagination:{current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},lengthValue:0,datePackage:{start:"",end:"",start_modified:"",end_modified:""}},e.createVehicle=function(){console.log("clicked")},e.getChildren=function(a,t){a.forEach((function(a){e.getAllSiblings(a,t)}))},e.getAllSiblings=function(a,t){t.push({id:a.id,tier_type:a.tier_type}),e.getChildren(a.children,t),a.children.length},e.fetchAllPackages=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.datePackage;a.ordering||(a.ordering="-modified"),e.setState({loading:!0}),PE(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){var n=t.data.results.map((function(a,t){var n=[];e.getChildren(a.parent.children,n);var l=n.filter((function(e){return e.tier_type===Bd})).length;return Object(wu.a)(Object(wu.a)({},a),{},{childCount:l})}));e.setState({packages:n,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.datePackage;a.ordering||(a.ordering="name"),e.setState({loading:!0}),a.tier_type="FLEET_GROUP",WE(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({groups:t.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e})),pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllVehicles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.datePackage;a.ordering||(a.ordering="name"),e.setState({loading:!0}),HE(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({vehicles:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllFleetKit=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.ordering||(a.ordering="name"),e.setState({loading:!0}),$E(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1})).then((function(t){e.setState({fleetKit:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.onSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllPackages()}))},e.onGroupSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllGroups()}))},e.onVehicleSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllVehicles()}))},e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="-modified",e.fetchAllPackages(c)},e.handleTableChangeVehicleGroups=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllGroups(c)},e.handleTableChangeVehicle=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllVehicles(c)},e.handleTableFleetKit=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllFleetKit(c),e.fetchAllFleetKit({page:a.current})},e.tabChange=function(a){e.setState({key:a,search:"",datePackage:{start:"",end:"",start_modified:"",end_modified:""},pagination:{current:1,pageSize:15,showSizeChanger:!1}},(function(){switch(a){case"1":return e.props.setBreadcrumb([{title:"Fleet"},{title:"Fleet Families"}]),void e.fetchAllPackages();case"2":var t=[{title:"Fleet",url:zm.dashboard.management.fleet.self},{title:"Fleet Groups",url:zm.dashboard.management.fleet.self}];return e.props.setBreadcrumb(t),void e.fetchAllGroups();case"3":var n=[{title:"Fleet",url:zm.dashboard.management.fleet.self},{title:"Vehicles",url:zm.dashboard.management.fleet.self}];return e.props.setBreadcrumb(n),void e.fetchAllVehicles();case"4":var l=[{title:"Fleet",url:zm.dashboard.management.fleet.self},{title:"Fleet Kits",url:zm.dashboard.management.fleet.self}];return e.props.setBreadcrumb(l),void e.fetchAllFleetKit()}}))},e.getLocaleData=function(e){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},1==e.key?"No Fleet Families":2==e.key?"No Fleet Groups":3==e.key?"No Vehicles":"No Fleet Kits"))))},e.handleFilterPackage=function(a){a?e.setState({datePackage:Object(wu.a)(Object(wu.a)({},e.state.datePackage),a)},(function(){e.fetchAllPackages()})):e.setState({datePackage:null},(function(){e.fetchAllPackages()}))},e.handleFilterGroup=function(a){a?e.setState({datePackage:Object(wu.a)(Object(wu.a)({},e.state.datePackage),a)},(function(){e.fetchAllGroups()})):e.setState({datePackage:null},(function(){e.fetchAllGroups()}))},e.handleFilterVehicle=function(a){a?e.setState({datePackage:Object(wu.a)(Object(wu.a)({},e.state.datePackage),a)},(function(){e.fetchAllVehicles()})):e.setState({datePackage:null},(function(){e.fetchAllVehicles()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Fleet",url:zm.dashboard.management.fleet.self},{title:"Fleet Families",url:zm.dashboard.management.fleet.self}];this.props.setBreadcrumb(e),this.tabChange(Md())}},{key:"render",value:function(){var e=this,a=this.state,t=a.packages,n=a.loading,c=a.pagination,i=a.groups,r=a.vehicles,s=a.fleetKit;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement(vf.a,{onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",activeKey:this.state.key},l.a.createElement(R_,{tab:"Fleet Families",key:"1"},l.a.createElement(cb,{createButtonAction:function(){return e.createVehicle()},buttonLink:zm.dashboard.management.fleet.fleet_family.create,buttonName:"+ Create Fleet Family",onSearch:lu(this.onSearch,1e3),fetchData:function(a){return e.handleFilterPackage(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-family-table"},l.a.createElement(UN,{data:t,loading:n,pagination:c,onTableChange:this.handleTableChange,rowLink:zm.dashboard.management.fleet.fleet_family.view,columns:this.columns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:1})}}))))),l.a.createElement(R_,{tab:"Fleet Groups",key:"2"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.fleet.groups.create,buttonName:"+ Create Fleet Group",onSearch:lu(this.onGroupSearch,1e3),fetchData:function(a){return e.handleFilterGroup(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row vehicle-3-center"},l.a.createElement(UN,{checkFleetRequired:!0,data:i,loading:n,pagination:c,onTableChange:this.handleTableChangeVehicleGroups,rowLink:zm.dashboard.management.fleet.groups.view,columns:this.vehicleGroupColumns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:2})}}))))),l.a.createElement(R_,{tab:"Vehicles",key:"3"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.fleet.vehicle.create,buttonName:"+ Create Vehicle",onSearch:lu(this.onVehicleSearch,1e3),fetchData:function(a){return e.handleFilterVehicle(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row vehicle-table-text-center width-160-id"},l.a.createElement(UN,{data:r,loading:n,pagination:c,onTableChange:this.handleTableChangeVehicle,rowLink:zm.dashboard.management.fleet.vehicle.view,columns:this.vehicleColumns,locale:n?" ":{emptyText:this.getLocaleData({key:3})}}))))),l.a.createElement(R_,{tab:"Fleet Kits",key:"4"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.fleet.kit.create,buttonName:"+ Create Fleet Kit"}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row vehicle-table-text-center width-160-id"},l.a.createElement(UN,{data:s,loading:n,pagination:c,onTableChange:this.handleTableFleetKit,rowLink:zm.dashboard.management.fleet.kit.view,columns:this.fleetColumns,locale:n?" ":{emptyText:this.getLocaleData({key:4})}}))))))))}}]),t}(n.Component),F_=Object(Lm.b)(null,{setBreadcrumb:Uv})(M_),P_={labelCol:{span:24},wrapperCol:{span:24}},V_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).setFieldData=function(e){n.formRef.current.setFieldsValue({name:e.name,description:e.description})},n.onSubmit=function(e){var a,t;n.setState({buttonLoading:!0}),n.props.packageData?(a=n.props.packageData.id,t=e,md(ad("fleet.family",{id:a}),t)).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Fleet Family updated successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})})):function(e){return od(ad("fleet.family"),e)}(e).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Fleet Family created successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})}))},n.formRef=l.a.createRef(),n.state={buttonLoading:!1},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData&&this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"render",value:function(){return l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input fleet family name and description."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef},P_,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Fleet Family Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Fleet Family Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Description"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))}}]),t}(n.Component),q_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onBlurSaveInput=function(e){qE({name:e.target.value,parent:n.props.packageData.parent.id,tier_type:n.state.tier_type}).then((function(){n.props.getPackageData(n.props.packageData.id),n.setState({visibleInput:!1})}))},n.handleVisibleInput=function(e){n.setState({visibleInput:!n.props.visibleInput,tier_type:e})},n.handleKeyDown=function(e){"Enter"==e.key&&n.onBlurSaveInput(e)},n.addTierMenu=function(){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput("FLEET_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Fleet Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput(Bd)}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.fleet_group,alt:"",className:"img-fluid mr-2"}),"Fleet Group")))},n.state={visibleInput:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state.visibleInput;return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement("div",{className:"row mx-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},l.a.createElement("div",{className:"mb-0 d-flex children-heading-last align-items-center"},l.a.createElement(Pm.a,{onBlur:function(a){return e.onBlurSaveInput(a)},onKeyDown:this.handleKeyDown}))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){e.setState({visibleInput:!1})}},l.a.createElement("span",null,"Cancel")))),l.a.createElement("div",{className:"row mx-0 add-sub-tier-main-row"},l.a.createElement("div",{className:""},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return e.addTierMenu()}},l.a.createElement(Vm.a,{className:"add-sub-tier-btn bg-transparent border-0 rounded-0 shadow-none text-uppercase"},"+ ADD TIER/FLEET GROUP")))))}}]),t}(n.Component),L_=t(1060),U_=t(84),B_={labelCol:{span:24},wrapperCol:{span:24}},W_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={loading:!1,data:null},e.formRef=l.a.createRef(),e.handleSubmit=function(a){var t,n,l,c,i;a.name=e.props.name||(null===(t=e.props.data)||void 0===t?void 0:t.name),a.parent=(null===(n=e.props.subtier)||void 0===n?void 0:n.id)?null===(l=e.props.subtier)||void 0===l?void 0:l.id:null===(c=e.props.data)||void 0===c||null===(i=c.parent)||void 0===i?void 0:i.id,e.props.data?BE(e.props.data.id,a).then((function(a){Mm.b.success("Fleet Group Updated Successfully"),e.props.drawer?e.props.onClose():e.props.setData(a.data,2),e.setState({data:a.data})})).catch((function(e){td(e)})):Mm.b.error("Kindly fill the above steps")},e.handleFormChange=function(){var a=e.formRef.current,t=a.getFieldValue,n=a.setFieldsValue,l=t("purchase_cost")/t("estimated_life")/t("estimated_days")||0,c=t("annual_premium")/t("estimated_days")||0,i=t("average_price")*t("average_gallon")||0,r=t("annual_fee")/t("estimated_days")||0,s=t("annual_permit_fee")/t("estimated_days")||0,o=t("maintenance_per_year")/t("estimated_days")||0,m=t("other_cost_per_year")/t("estimated_days")||0;n({per_day_dpr:l.toFixed(2),insurance_per_day:c.toFixed(2),fuel_per_day:i.toFixed(2),reg_per_day:r.toFixed(2),permit_per_day:s.toFixed(2),maintenance_per_day:o.toFixed(2),other_cost_per_day:m.toFixed(2)}),e.setState({total:parseFloat(l.toFixed(2))+parseFloat(c.toFixed(2))+parseFloat(i.toFixed(2))+parseFloat(r.toFixed(2))+parseFloat(s.toFixed(2))+parseFloat(o.toFixed(2))+parseFloat(m.toFixed(2))})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&LE(this.props.match.params.id).then((function(a){e.formRef.current.setFieldsValue(Object(wu.a)({},a.data)),e.handleFormChange()}))}},{key:"render",value:function(){var e,a;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Vehicle calculations at the group level and at the vehicle level are NOT associated."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,onFieldsChange:this.handleFormChange,ref:this.formRef},B_,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Per Day Depr")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimated_days",label:"Estimated Days of Use per Year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{type:"number",placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimated_life",label:"Estimated Life (Years) *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{type:"number",placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_hours",label:"Average Hours per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{type:"number",placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_cost",label:"Purchase Cost *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-sm-6"},l.a.createElement(Fm.a.Item,{name:"per_day_dpr",label:"Per Day Depr *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{style:{background:"#F2F2F2"},formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"0"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Insurance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_premium",label:"Annual Auto Insurance Premium *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"insurance_per_day",label:"Insurance per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Fuel Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_price",label:"Average Fuel Price per Gallon *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_gallon",label:"Average Gallons per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{lder:"0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_per_day",label:"Fuel per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{style:{background:"#F2F2F2"},disabled:!0,placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Registration Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_fee",label:"Annual Registration Fee *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"reg_per_day",label:"Registration per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{style:{background:"#F2F2F2"},formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Permit Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_permit_fee",label:"Annual Permit Fee *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"permit_per_day",label:"Permit per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{style:{background:"#F2F2F2"},disabled:!0,placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Maintenance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_year",label:"Maintenance per Year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_day",label:"Maintenance per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{style:{background:"#F2F2F2"},disabled:!0,placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_year",label:"Other Cost per Year",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_day",label:"Other Cost per Day",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-sm-6"},l.a.createElement("ul",{className:"list-inline text-md-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Day:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===(e=this.state.total)||void 0===e?void 0:e.toFixed(2))),l.a.createElement("ul",{className:"list-inline text-md-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Hour:"),l.a.createElement("li",{className:"list-inline-item"},"$",(this.state.total/((null===(a=this.formRef.current)||void 0===a?void 0:a.getFieldValue("average_hours"))||1)).toFixed(2)))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),Y_=Object(r.withRouter)(W_);var K_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.visible,t=e.item;return l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.line_item_icon_green}),l.a.createElement("span",{className:"ml-3"},t.name)),placement:"right",width:700,closable:!1,onClose:this.props.onClose,visible:a,style:{position:"absolute"}},l.a.createElement("div",{className:"breadcrumb-inner-details inline-item-breadcrumb"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},t.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:t.name},l.a.createElement(qm.a,null,t.name)))),l.a.createElement(Y_,{data:t,drawer:!0,onClose:this.props.onClose}))}}]),t}(n.Component),G_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onSelect=function(e,a){},n.openDeleteModal=function(e){n.setState({warningModalVisible:!0,deleteItem:e})},n.removeItem=function(){var e,a;(a=null===(e=n.state.deleteItem)||void 0===e?void 0:e.id,dd(ad("fleet.fleet_group",{id:a}))).then((function(){n.props.getPackage(n.props.packageData.id)})),n.showWarningModal(!1)},n.showWarningModal=function(e){n.setState({warningModalVisible:e})},n.menu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.onEditItem(e)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.openDeleteModal(e)}},"Delete")))},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"FLEET_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Fleet Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,Bd)}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.fleet_group,alt:"",className:"img-fluid mr-2"}),"Fleet Group")))},n.handleKeyDown=function(e,a){"Enter"==e.key&&n.onBlurSaveInput(e,a)},n.renderItemTree=function(e){var a;return l.a.createElement("div",{key:e.id,className:"row ml-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},"FLEET_TIER"===e.tier_type?l.a.createElement("div",{className:"only-text d-flex align-items-center"},e.name,l.a.createElement("div",{className:"add-tier-div-plus"},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return n.addTierMenu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0"},l.a.createElement("span",null,"+"))))):e.tier_type===Bd?l.a.createElement("div",{onClick:function(){return n.handleItemDrawer(e)},className:"mb-0 d-flex images-with-name children-heading-last align-items-center"},l.a.createElement("img",{src:Rm.fleet_group,alt:"",className:"img-fluid",style:{marginRight:"10px"}}),e.title):l.a.createElement("div",{className:"mb-0 d-flex input-with-name children-heading-last align-items-center"},e.item_type===Bd&&l.a.createElement("img",{src:Rm.fleet_group,alt:"",className:"img-fluid"}),l.a.createElement(Pm.a,{value:n.state.editFormValue,autoFocus:!0,disabled:n.state.inputLoader,onChange:function(e){return n.setState({editFormValue:e.target.value})},onBlur:function(a){return n.onBlurSaveInput(a,e)},onKeyDown:function(a){return n.handleKeyDown(a,e)}}),n.state.inputLoader&&l.a.createElement(U_.a,{style:{fontSize:"25px",marginLeft:"20px"}})),"FLEET_TIER"===e.tier_type&&l.a.createElement("span",{className:"d-flex align-items-center small-heading"},e.children.length,l.a.createElement("span",null,l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement("div",{className:"remove-dropdown"},e.tier_type!==Ud?l.a.createElement(xu.a,{trigger:"click",overlay:function(){return n.menu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0",onClick:function(e){e.preventDefault(),e.stopPropagation()}},l.a.createElement("span",{className:"mr-1"},null===(a=Yd[null===e||void 0===e?void 0:e.tier_type])||void 0===a?void 0:a.name),l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))):l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex cancel-btn-tree cancel-btn-tree-1 align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){return n.onRemoveInputField(e)}},l.a.createElement("span",null,"Cancel")))))},n.onAddInputField=function(e,a){var t=n.props.packageData.parent.children;t=JSON.parse(JSON.stringify(t)),e.item_type=a;var l=n.handleTreeData(t,e),c=n.state.keys;c.push(e.key),n.setState({treeData:Object(Ou.a)(l),editFormValue:"",keys:c})},n.onEditItem=function(e){var a=n.props.packageData.parent.children;a=JSON.parse(JSON.stringify(a));var t=n.handleTreeData(a,e,!0);n.setState({treeData:Object(Ou.a)(t),editFormValue:e.name})},n.onRemoveInputField=function(e){var a=n.props.packageData.parent.children,t=n.handleTreeData(a);n.setState({treeData:Object(Ou.a)(t)})},n.handleItemDrawer=function(e){n.setState({visibleItemDrawer:!n.state.visibleItemDrawer,itemDrawer:e})},n.onExpand=function(e){n.setState({keys:e})},n.handleTreeData=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((function(e){e.title=e.name,e.key=e.id?e.id:e.name;var l=e.children;return t&&a&&a.id===e.id?(e.item_type=a.tier_type,e.tier_type=Ud):!t&&a&&a.id===e.id&&l.unshift({name:"INPUT TITLE"+a.id,tier_type:Ud,children:[],item_type:a.item_type,parent:a}),n.handleTreeData(l,a,t)})),e},n.onBlurSaveInput=function(e,a){if(e.target.value){n.setState({inputLoader:!0});var t={name:e.target.value,tier_type:a.item_type};a.id?BE(a.id,t).then((function(){n.setState({inputLoader:!1}),n.props.getPackageData(n.props.packageData.id)})):(t.parent=a.parent.id,qE(t).then((function(e){n.setState({inputLoader:!1}),n.props.getPackageData(n.props.packageData.id)})))}},n.setFieldData=function(e){var a=[];(null===e||void 0===e?void 0:e.parent)&&(a=n.handleTreeData(e.parent.children)),n.setState({treeData:a})},n.onClose=function(){n.setState({visibleItemDrawer:!1})},n.state={treeData:[],inputLoader:!1,visibleItemDrawer:!1,itemDrawer:null,editFormValue:"",keys:[]},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"componentDidMount",value:function(){this.setFieldData(this.props.packageData)}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.treeData,i=n.visibleItemDrawer,r=n.itemDrawer;return c.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(L_.a,{defaultExpandAll:!0,className:"custom-tree-structure custom-tree-structure-update",switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),onSelect:this.onSelect,titleRender:this.renderItemTree,treeData:c,onExpand:this.onExpand}),i?l.a.createElement(K_,{visible:i,item:r,onClose:this.onClose}):"",l.a.createElement(mh,{heading:"Are you sure you want to delete this ".concat("FLEET_TIER"===(null===(e=this.state.deleteItem)||void 0===e?void 0:e.tier_type)?"Tier":"Fleet Group","?"),okAction:function(){return t.removeItem()},subHeading:l.a.createElement("p",{className:"mb-0 mx-auto",style:{width:"95%"}},l.a.createElement("span",null,"FLEET_TIER"===(null===(a=this.state.deleteItem)||void 0===a?void 0:a.tier_type)?"If you choose to delete this Tier, the Tier and everything that it includes (Tiers, Fleet Groups) would be deleted.":"If you choose to delete this Fleet Group, this Fleet Group and everything that it includes (Vehicles, etc) would be deleted.")),visible:this.state.warningModalVisible,onClose:function(){return t.showWarningModal(!1)},deleteLineItem:!0,okTitle:"Yes, I want to delete",cancelText:"No, cancel this action"})):l.a.createElement("div",null)}}]),t}(n.Component),z_=Object(r.withRouter)(G_),H_={labelCol:{span:24},wrapperCol:{span:24}},$_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleSubmit=function(){Mm.b.success("Fleet Family updated successfully!"),n.props.getPackage(n.props.packageData.id)},n.state={loading:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please build your fleet family using tiers and fleet groups."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},H_,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"Fleet")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(z_,this.props)),l.a.createElement("div",{className:"col-12 p-0 service-div"},l.a.createElement(q_,this.props)),l.a.createElement("div",{className:"col-12 p-0 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",onClick:function(){return e.handleSubmit()}},"Save and Continue")))))))}}]),t}(n.Component),Q_=fu.a.Panel,J_=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={current:0,packageData:null,visible:!1,visibleWarning:!1,activeKey:["1"],unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.next=function(){e.setState({current:e.state.current+1})},e.setPackage=function(a,t){var n;(null===(n=e.state.packageData)||void 0===n?void 0:n.name)?e.setState((function(){return{packageData:a}})):e.setState((function(){return{packageData:a,unsavedExit:!0}}));var l=null;if(e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l)return null;e.setState((function(e){return{packageData:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"2")))}}))},e.prev=function(){e.setState({current:e.state.current-1})},e.onCompleteVehiclePackage=function(){var a,t;o.push(Object(Sf.a)(zm.dashboard.management.fleet.fleet_family.view,{id:null===(a=e.state)||void 0===a||null===(t=a.packageData)||void 0===t?void 0:t.id}))},e.getPackageData=function(a){e.setState({loading:!0}),VE(a).then((function(a){e.setState({packageData:a.data},(function(){e.setState({loading:!1})}))}))},e.getPackage=function(){var a=Object(Qm.a)($m.a.mark((function a(t){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({loading:!0}),a.next=3,VE(t).then((function(a){e.setState({packageData:a.data},(function(){var a,t,n,l=null===(a=e.state)||void 0===a?void 0:a.packageData;(null===l||void 0===l?void 0:l.name)&&((null===l||void 0===l||null===(t=l.parent)||void 0===t||null===(n=t.children)||void 0===n?void 0:n.length)?(e.setState({packageData:l,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.props.match.params.id||e.setState({packageData:l,unsavedExit:!0}))}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.collapseOnChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n;e.state.packageData;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?e.onCompleteVehiclePackage():e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Create Fleet Family",url:zm.dashboard.management.fleet.fleet_family.create}],a=[{title:"Edit Fleet Family",url:zm.dashboard.management.fleet.fleet_family.edit}];this.props.setBreadcrumb(this.props.match.params.id?a:e),this.props.match.params.id&&(this.getPackage(this.props.match.params.id),this.setState({activeKey:this.props.location.editTab||"1"}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.packageData,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement("div",{className:"steps-content"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},activeKey:n,onChange:this.collapseOnChange},l.a.createElement(Q_,{header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*"))),key:"1"},l.a.createElement(V_,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage})),l.a.createElement(Q_,{disabled:!t,header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Fleet Family ",l.a.createElement("sup",null,"*"))),key:"2"},l.a.createElement($_,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage,getPackageData:this.getPackageData})))),l.a.createElement("div",{className:"steps-action common-steps-action d-flex align-items-center justify-content-end"},l.a.createElement(Vm.a,{className:"border-0 shadow-none text-center",style:{margin:"0 8px"},onClick:function(){return e.showWarningModal(!0)}},"Cancel"),l.a.createElement(Vm.a,{type:"primary",className:"border-0 shadow-none text-center",onClick:function(){var a,t;return e.state.unsavedExit?o.push(Object(Sf.a)(zm.dashboard.management.fleet.fleet_family.view,{id:null===(a=e.state)||void 0===a||null===(t=a.packageData)||void 0===t?void 0:t.id})):e.handleViewMainButtonCLick()}},"View Fleet Family"))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Fleet Family!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select"," ",l.a.createElement(Vm.a,{onClick:this.onCompleteVehiclePackage,className:"p-0 bg-transparent shadow-none border-0"},"View Fleet Family"),"."),okTitle:"View Fleet Family",okAction:this.onCompleteVehiclePackage,visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Fleet Family?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the fleet family, select View fleetFamily.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View fleetFamily",onOK:function(){var a,t;e.showRequiredSuccessModal(!1),o.push(Object(Sf.a)(zm.dashboard.management.fleet.fleet_family.view,{id:null===(a=e.state)||void 0===a||null===(t=a.packageData)||void 0===t?void 0:t.id}))}}))}}]),t}(n.Component),Z_=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(J_)),X_=fu.a.Panel,eS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={treeData:[]},e.handleKey=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a){var n=Object(Ou.a)(a);return n.forEach((function(a,n){a.type||(a.key=t?t+"parent"+n:a.id),a.children=e.handleKey(a.children)})),n}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;VE(this.props.match.params.id).then((function(a){var t=[{title:"Fleet",url:zm.dashboard.management.fleet.self},{title:"Fleet Families",url:zm.dashboard.management.fleet.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t);var n=e.handleKey(a.data.parent.children,a.data.parent.id);e.setState({treeData:n,package:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e,a,t=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(X_,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.fleet_family.edit,{id:t.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Fleet Family Name"),l.a.createElement("h5",{className:"mb-0"},null===(e=this.state.package)||void 0===e?void 0:e.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Description"),l.a.createElement("h5",{className:"mb-0"},null===(a=this.state.package)||void 0===a?void 0:a.description)))))),l.a.createElement(X_,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Fleet Family ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.fleet_family.edit,{id:t.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"row mx-0 px-0 pt-0 summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"Fleet")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),this.state.treeData.length>0?l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(L_.a,{className:"custom-tree-structure",showLine:!0,defaultExpandAll:!0,switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),filterTreeNode:function(e){return!(e.tier_type!==Bd||!Qd(e))},selectable:!1,titleRender:function(e){return l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between ".concat(e.tier_type===Bd&&Qd(e)&&"is-required"),onClick:function(){return e.tier_type===Bd?o.push(Object(Sf.a)(zm.dashboard.management.fleet.groups.view,{id:e.id})):null}},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},e.tier_type===Bd&&l.a.createElement("img",{src:Rm.fleet_group,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},e.name)),e.children&&0!==e.children.filter((function(e){return!e.type})).length&&l.a.createElement("div",{className:"branch-div-tg d-flex align-items-center"},l.a.createElement("span",{className:"count-span-tg"},e.children.filter((function(e){return!e.type})).length),l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"d-flex align-items-center"},e.tier_type===Bd&&Qd(e)&&l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("p",{className:"mb-0 ml-1",style:{fontSize:"11px",fontStyle:"italic",color:"#EB5757"}},"Please complete all required information to avoid issues"))),l.a.createElement("div",{className:"text-green-tag text-right-tree"},"FLEET_TIER"==e.tier_type?"Fleet Tier":"Fleet Group"))},treeData:Object(Ou.a)(this.state.treeData)})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"50px"},className:"row mx-0 mb-0 mt-3 border-0 no-data-card-row align-items-center bg-transparent justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.Truck_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Fleet")))))))))))}}]),t}(n.Component),aS=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(eS)),tS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={lastChild:[],originalLastChild:[],loading:!1,pagination:{current:1,pageSize:15}},e.vehicleColumns=[{title:"Name",dataIndex:"name",sorter:!0},{title:"Vehicles",sorter:!0,render:function(e){return l.a.createElement("div",null,e.vehicle)}}],e.handleTableChange=function(a,t,n){e.getGroups({page:a.current})},e.getGroups=function(){e.setState({loading:!0}),VE(e.props.match.params.id).then((function(a){e.fetchLastChild(a.data.parent.children,[],a.data.parent.name),e.setState({loading:!1})})).catch((function(a){e.setState({loading:!1}),td(a)}))},e.fetchLastChild=function(a,t,n){a.forEach((function(a){a.parent=Object(Ou.a)(t),a.parent.push(n);var l=a.children.filter((function(e){return!e.type}));0===l.length?(delete a.children,e.setState((function(e){return{lastChild:[].concat(Object(Ou.a)(e.lastChild),[a]),originalLastChild:[].concat(Object(Ou.a)(e.originalLastChild),[a])}}))):e.fetchLastChild(l,a.parent,a.name)}))},e.onSearch=function(a){e.setState({lastChild:Object(Ou.a)(e.state.originalLastChild).filter((function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a.target.value.toLowerCase())}))})},e.getLocaleData=function(){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Truck_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},"No Fleet Groups"))))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getGroups()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(cb,{buttonLink:zm.dashboard.management.fleet.groups.create,buttonName:"Add Fleet Group",onSearch:this.onSearch}),l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(UN,{data:this.state.lastChild,loading:this.state.loading,pagination:!1,onTableChange:this.handleTableChange,rowLink:zm.dashboard.management.fleet.groups.view,columns:this.vehicleColumns,locale:this.state.loading?"":{emptyText:this.getLocaleData()}})))))}}]),t}(n.Component),nS=Object(r.withRouter)(tS),lS=vf.a.TabPane,cS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(lS,{tab:"Summary",key:"1"},l.a.createElement(aS,null)),l.a.createElement(lS,{tab:"Fleet Groups",key:"2"},l.a.createElement(nS,null)))))))}}]),t}(n.Component),iS={labelCol:{span:24},wrapperCol:{span:24}},rS=ku.a.Option,sS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={assignees:[],fetching:!1,selectedData:null,vehicles:[],selected_vehicle:"",selected_vehicle_id:null,fleet_group:e.props.match.params.id},e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"w-100 border-0 shadow-none bg-transparent text-dark"},"Remove"))),e.fetchAllVehicles=function(){e.setState({fetching:!0}),HE().then((function(a){e.setState({vehicles:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleChange=function(a){var t=e.state.vehicles.find((function(e){return e.id===a}));e.setState({selected_vehicle:t.name,selected_vehicle_id:t.id,fleet_group:e.props.match.params.id})},e.addVehicle=function(){zE(e.state.selected_vehicle_id,{fleet_group:e.props.match.params.id}).then((function(){Mm.b.success("Vehicle Added Successfully"),e.props.onSuccess(),e.handleClose()})).catch((function(a){a.response&&(Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.handleClose())}))},e.handleClose=function(){e.setState({assignees:[],fetching:!1,selectedData:null,vehicles:[],selected_vehicle:"",selected_vehicle_id:null,fleet_group:e.props.match.params.id}),e.props.onClose()},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.fetching;a.assignees;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,title:"Add Vehicles",visible:this.props.visible,onOk:this.addVehicle,onCancel:this.handleClose,closable:!0,onClose:this.handleClose,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",placement:"right",destroyOnClose:!0,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:this.props.onClose,style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{type:"primary",onClick:this.addVehicle},"Add"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},iS,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"assignee",label:"Vehicles",rules:[{required:!0,message:"this field is required"}],className:"position-relative show-arrow-false"},l.a.createElement(ku.a,{showArrow:!1,placeholder:"Search",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchAllVehicles()},onChange:this.handleChange,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),value:null},this.state.vehicles.map((function(e,a){return l.a.createElement(rS,{key:a,value:e.id},e.name)}))),l.a.createElement(Vm.a,{style:{left:"5px",top:"0",bottom:"0"},className:"position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))))),this.state.selected_vehicle?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.truck_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content float-left"},l.a.createElement("h6",null,this.state.selected_vehicle)),l.a.createElement("div",{className:"dropdown-main-select my-auto d-flex align-items-center"},l.a.createElement(xu.a,{overlayClassName:"remove-dropdown",overlay:this.menu,trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link p-0 border-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.eva_more_elisis,alt:"",className:"img-fluid"})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 mt-3 no-data-card-row shadow-card-box align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Vehicles")))))))}}]),t}(n.Component),oS=Object(r.withRouter)(sS),mS=fu.a.Panel,dS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:null,visible:!1,loading:!0,vehicle:[],view:!1},e.vehicleColumns=[{title:"VEHICLE ID",dataIndex:"id",sorter:function(e,a){return e.id-a.id}},{title:"VEHICLE NAME",dataIndex:"name",sorter:function(e,a){return e.id-a.id}},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,null===e||void 0===e?void 0:e.name))}},{title:"STATUS",dataIndex:"status",sorter:!0},{title:"VEHICLE GROUP",dataIndex:"fleet_group",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e.name))}}],e.showAddVehicles=function(a){e.setState({visible:a})},e.fetchVehicles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};HE(Object(wu.a)(Object(wu.a)({},a),{},{fleet_group:e.props.match.params.id})).then((function(a){e.setState({vehicle:a.data.results})})).catch((function(e){td(e)}))},e.handleDrawerSuccess=function(){e.fetchVehicles()},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),LE(this.props.match.params.id).then((function(a){var t=[{title:"Fleet",url:zm.dashboard.management.fleet.self},{title:"Fleet Groups",url:zm.dashboard.management.fleet.self},{title:a.data.name,url:"#"}];e.props.setFleetGroup(a.data),e.props.setBreadcrumb(t);var n={per_day_dpr:(a.data.purchase_cost/a.data.estimated_life/a.data.estimated_days||0).toFixed(2),insurance_per_day:(a.data.annual_premium/a.data.estimated_days||0).toFixed(2),fuel_per_day:(a.data.average_price*a.data.average_gallon||0).toFixed(2),reg_per_day:(a.data.annual_fee/a.data.estimated_days||0).toFixed(2),permit_per_day:(a.data.annual_permit_fee/a.data.estimated_days||0).toFixed(2),maintenance_per_day:(a.data.maintenance_per_year/a.data.estimated_days||0).toFixed(2),other_cost_per_day:(a.data.other_cost_per_year/a.data.estimated_days||0).toFixed(2)},l=Object.keys(n).reduce((function(e,a){return e+parseFloat(n[a]||0)}),0).toFixed(2);e.setState({data:Object(wu.a)(Object(wu.a)(Object(wu.a)({},a.data),n),{},{total:l}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),this.fetchVehicles()}},{key:"render",value:function(){var e=this,a=this.state,t=a.data;return a.loading?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement(Wv.a,null))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(mS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.groups.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Fleet Group Name"),l.a.createElement("h5",{className:"mb-0"},null===t||void 0===t?void 0:t.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Fleet Family / Tier"),l.a.createElement("h5",{className:"mb-0"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},null===t||void 0===t?void 0:t.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,null,l.a.createElement(qm.a,null,null===t||void 0===t?void 0:t.name))))))))),l.a.createElement(mS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Fleet Group Calculations ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){var a;return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.groups.edit,{id:null===(a=e.props.match)||void 0===a?void 0:a.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center carpet-cleaning-mini-header"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row pt-2 pb-1"},l.a.createElement("div",{className:"total_cost_per"},"Total Cost Per Day"),l.a.createElement("div",{className:"total_cost_per_count"},xd((null===t||void 0===t?void 0:t.total)||"0")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row pt-1 pb-2"},l.a.createElement("div",{className:"total_cost_per"},"Total Cost Per hour"),l.a.createElement("div",{className:"total_cost_per_count"},"$ ".concat(parseFloat(xd((null===t||void 0===t?void 0:t.total)/(null===t||void 0===t?void 0:t.average_hours)||"0").slice(1)).toFixed(2)))))),l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Per Day Depreciation")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Per Day Depr"),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.per_day_dpr)||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Days of Use per Year *"),l.a.createElement("h5",{className:"mb-0"},(null===t||void 0===t?void 0:t.estimated_days)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Life (Years)"," "),l.a.createElement("h5",{className:"mb-0"},(null===t||void 0===t?void 0:t.estimated_life)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Average Hours per Day"," "),l.a.createElement("h5",{className:"mb-0"},(null===t||void 0===t?void 0:t.average_hours)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Cost "),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.purchase_cost)||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Insurance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Insurance per Day"),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.insurance_per_day)||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Auto Insurance Premium"," "),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.annual_premium)||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Fuel Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel per Day"," "),l.a.createElement("h5",{className:"mb-3"},xd((null===t||void 0===t?void 0:t.fuel_per_day)||"0"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"text-uppercase"},"Average Gallons per Day *"),l.a.createElement("h5",{className:"mb-0"},(null===t||void 0===t?void 0:t.average_gallon)||"-")))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Average Fuel Price per Gallon"," "),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.average_price)||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Registration Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Registration per Day"),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.reg_per_day)||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Registration Fee"),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.annual_fee)||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Permit Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Permit per Day"),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.permit_per_day)||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Permit Fee"," "),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.annual_permit_fee)||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Maintenance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Maintenance per Day"),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.maintenance_per_day)||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Maintenance per Year"," "),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.maintenance_per_year)||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Other per Day"),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.other_cost_per_year)||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Other per Year "),l.a.createElement("h5",{className:"mb-0"},xd((null===t||void 0===t?void 0:t.other_cost_per_day)||"0")))))))),l.a.createElement(mS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Vehicles")),key:"3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.fetchVehicles({search:a.target.value})},placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement(Vm.a,{onClick:function(){return e.showAddVehicles(!0)},className:"add-btn-collapse ml-2 text-uppercase"},"Add")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item"},"Total : ",this.state.vehicle.length),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"}))))),l.a.createElement(Vm.a,{onClick:function(){return e.props.handleViewAll("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),this.state.vehicle.length>0?this.state.view?l.a.createElement("div",{className:"col-12 table-responsive main-table-div mt-3"},l.a.createElement(fv.a,{className:" border-0 carpet-cleaning-table",columns:this.vehicleColumns,dataSource:this.state.vehicle,size:"middle",pagination:!0,onRow:function(e){return{onClick:function(){e&&o.push(Object(Sf.a)(zm.dashboard.management.fleet.vehicle.view,{id:e.id}))}}}})):l.a.createElement("div",{className:"row mt-4"},this.state.vehicle.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 col-sm-6",onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.management.fleet.vehicle.view,{id:e.id}))}},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.truck_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content float-left"},l.a.createElement("h6",null,e.name),l.a.createElement("p",{className:"mb-0 text-capitalize"},e.status.toLowerCase()))))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Truck_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Vehicles"))))))))),l.a.createElement(oS,{visible:this.state.visible,onClose:function(){return e.showAddVehicles(!1)},onSuccess:this.handleDrawerSuccess}))}}]),t}(n.Component),uS=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(dS)),pS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={vehicle:[],loading:!1,visible:!1,view:!1},e.vehicleColumns=[{title:"VEHICLE ID",dataIndex:"id",sorter:!0},{title:"VEHICLE NAME",dataIndex:"name",sorter:!0},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,null===e||void 0===e?void 0:e.name))}},{title:"STATUS",dataIndex:"status",sorter:!0},{title:"VEHICLE GROUP",dataIndex:"fleet_group",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e.name))}}],e.showAddVehicles=function(a){e.setState({visible:a})},e.fetchVehicle=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.fleet_group=e.props.match.params.id,HE(a).then((function(a){e.setState({vehicle:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchVehicle()}},{key:"render",value:function(){var e=this,a=this.state,t=a.vehicle;a.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-collapse-inner-row-main pt-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header "},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.fetchVehicle({search:a.target.value})},placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement(Vm.a,{onClick:function(){return e.showAddVehicles(!0)},className:"add-btn-collapse ml-2 text-uppercase"},"Add")),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",this.state.vehicle.length),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))))))),t.length>0?this.state.view?l.a.createElement("div",{className:"row mx-0 px-5"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.vehicleColumns,dataSource:this.state.vehicle,size:"middle",pagination:!0,onRow:function(e){return{onClick:function(){e&&o.push(Object(dh.a)(zm.dashboard.management.fleet.vehicle.view,{id:e.id}))}}}}))):l.a.createElement("div",{className:"row mx-0 px-5  summary-collapse-inner-row-main"},t.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 col-sm-6",onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.fleet.vehicle.view,{id:e.id}))}},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.truck_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content float-left"},l.a.createElement("h6",null,e.name),l.a.createElement("p",{className:"mb-0 text-capitalize"},e.status.toLowerCase()))))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Truck_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Vehicles"))),l.a.createElement(oS,{visible:this.state.visible,onClose:function(){return e.showAddVehicles(!1)}}))))}}]),t}(n.Component),vS=Object(r.withRouter)(pS),hS=vf.a.TabPane,fS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={key:"1",fleetGroupData:null,requiredFields:!0},e.handleTabChange=function(a){e.setState({key:a})},e.setFleetGroup=function(a){e.setState({requiredFields:Qd(a)})},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this.state.requiredFields;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},e&&l.a.createElement("div",{className:"row mx-0 info-gray-div info-red-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please complete all required information to avoid issues")),l.a.createElement(vf.a,{onChange:this.handleTabChange,className:"carpet-cleaning-main-common-tab",activeKey:this.state.key},l.a.createElement(hS,{tab:"Summary",key:"1"},l.a.createElement(uS,{handleViewAll:this.handleTabChange,setFleetGroup:this.setFleetGroup})),l.a.createElement(hS,{tab:"Vehicles",key:"2"},l.a.createElement(vS,null)))))))}}]),t}(n.Component),ES=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.docsColumns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.vehicle=null===(a=e.props.match)||void 0===a?void 0:a.params.id,ig(t).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t,n=a.file,l=new FormData;l.append("vehicle",null===(t=e.props.match)||void 0===t?void 0:t.params.id),l.append("document",n),cg(l).then((function(a){e.fetchFiles()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c;(null===(t=e.vehicle)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)!==(null===(l=this.props.vehicle)||void 0===l||null===(c=l.documents)||void 0===c?void 0:c.length)&&this.fetchFiles()}},{key:"render",value:function(){var e=this,a=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.hideTitle?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse ml-2 text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},a.length>0?l.a.createElement(fv.a,{pagination:!1,onRow:function(e,a){return{onClick:function(a){window.open(e.document,"_blank")}}},className:"main-table-all carpet-cleaning-table border-0",columns:this.docsColumns,dataSource:a,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),gS=Object(r.withRouter)(ES),bS=fu.a.Panel,NS=(ku.a.Option,ku.a.OptGroup,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[],loading:!1,pagination:{current:1,pageSize:15},visible:!1,vehicle:null},e.showAddVehicles=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&JE(this.props.match.params.id).then((function(a){var t=[{title:"Fleet",url:zm.dashboard.management.fleet.self},{title:"Vehicles",url:zm.dashboard.management.fleet.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t);var n={per_day_dpr:(a.data.purchase_cost/a.data.estimated_life/a.data.estimated_days||0).toFixed(2),insurance_per_day:(a.data.annual_premium/a.data.estimated_days||0).toFixed(2),fuel_per_day:(a.data.average_price/a.data.average_gallon||0).toFixed(2),reg_per_day:(a.data.annual_fee/a.data.estimated_days||0).toFixed(2),permit_per_day:(a.data.annual_permit_fee/a.data.estimated_days||0).toFixed(2),maintenance_per_day:(a.data.maintenance_per_year/a.data.estimated_days||0).toFixed(2),other_cost_per_day:(a.data.other_cost_per_year/a.data.estimated_days||0).toFixed(2)},l=Object.keys(n).reduce((function(e,a){return e+parseFloat(n[a]||0)}),0).toFixed(2);e.setState({vehicle:Object(wu.a)(Object(wu.a)(Object(wu.a)({},a.data),n),{},{total:l})})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,m,d,u,p=this,v=null===(e=this.state.vehicle)||void 0===e?void 0:e.internal_location,h=this.state.vehicle;return h?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.vehicle.edit,{id:p.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"STATUS"),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.status)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Current Operator"),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h||null===(a=h.operator)||void 0===a?void 0:a.first_name)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Vehicle ID"),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.id)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Vehicle Name"),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.name)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Fleet Group Name "),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h||null===(t=h.fleet_group)||void 0===t?void 0:t.name)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt offset-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Region "),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.region)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Year "),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.year)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt offset-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Make "),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.make)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Model "),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.make)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Trim "),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.trim)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 offset-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Color "),l.a.createElement("h5",{className:"mb-0"},(null===h||void 0===h?void 0:h.color)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Type "),l.a.createElement("h5",{className:"mb-0 text-capitalize"},(null===h||void 0===h||null===(n=h.type)||void 0===n?void 0:n.toLowerCase())||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Type "),l.a.createElement("h5",{className:"mb-0 text-capitalize"},(null===h||void 0===h||null===(c=h.fuel_type)||void 0===c?void 0:c.split("_").join(" ").toLowerCase())||"-")))))),l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Vehicle Calculations"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.vehicle.edit,{id:p.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"7"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center carpet-cleaning-mini-header"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row pt-2 pb-1"},l.a.createElement("div",{className:"total_cost_per"},"Total Cost Per Day"),l.a.createElement("div",{className:"total_cost_per_count"},xd(h.total||"0")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row pt-1 pb-2"},l.a.createElement("div",{className:"total_cost_per"},"Total Cost Per Hour"),l.a.createElement("div",{className:"total_cost_per_count"},"$ ".concat(parseFloat(xd(h.total/h.average_hours||"0").slice(1)).toFixed(2)))))),l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Per Day Depreciation")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Per Day Depr"),l.a.createElement("h5",{className:"mb-0"},xd(h.per_day_dpr||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Days of Use per Year *"),l.a.createElement("h5",{className:"mb-0"},h.estimated_days||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Life (Years)"," "),l.a.createElement("h5",{className:"mb-0"},h.estimated_life||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Average Hours per Day"," "),l.a.createElement("h5",{className:"mb-0"},h.average_hours||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Cost "),l.a.createElement("h5",{className:"mb-0"},xd(h.purchase_cost||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Insurance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Insurance per Day"),l.a.createElement("h5",{className:"mb-0"},xd(h.insurance_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Auto Insurance Premium"," "),l.a.createElement("h5",{className:"mb-0"},h.annual_permium||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Fuel Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Per Day"," "),l.a.createElement("h5",{className:"mb-3"},xd(h.fuel_per_day||"0"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"text-uppercase"},"Average Gallons per Day *"),l.a.createElement("h5",{className:"mb-0"},h.average_gallon||"-")))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Average Fuel Price per Gallon"," "),l.a.createElement("h5",{className:"mb-0"},xd(h.average_price||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Registration Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Registration Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(h.reg_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Registration Fee"),l.a.createElement("h5",{className:"mb-0"},xd(h.annual_fee||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Permit Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Permit Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(h.permit_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Permit Fee"," "),l.a.createElement("h5",{className:"mb-0"},xd(h.annual_permit_fee||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Maintenance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Maintenance Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(h.maintenance_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Maintenance per Year"," "),l.a.createElement("h5",{className:"mb-0"},xd(h.maintenance_per_year||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Other Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(h.other_cost_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Other per Year "),l.a.createElement("h5",{className:"mb-0"},xd(h.other_cost_per_year||"0")))))))),l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Warehouse ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.vehicle.edit,{id:p.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"8"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},l.a.createElement("div",{className:"col-12"},h.internal_location?l.a.createElement("div",{key:null===v||void 0===v?void 0:v.id,className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===v||void 0===v?void 0:v.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(null===v||void 0===v?void 0:v.street_address," ").concat(null===v||void 0===v?void 0:v.name," ").concat(null===v||void 0===v?void 0:v.city," ").concat(null===v||void 0===v?void 0:v.state," ").concat(null===v||void 0===v?void 0:v.country))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===v||void 0===v?void 0:v.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(null===v||void 0===v?void 0:v.phone)))):l.a.createElement("div",{className:"row mx-0 no-data-card-row bg-transparent align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.location_gray}),l.a.createElement("h6",{className:"mb-0"},"No Warehouse")))))))),l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Registration Information"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.vehicle.edit,{id:p.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"VIN/SN"),l.a.createElement("h5",{className:"mb-0"},h.vin_sin||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"License Plate"),l.a.createElement("h5",{className:"mb-0"},h.license_plate||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Registration State/Province"," "),l.a.createElement("h5",{className:"mb-0"},"CT")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Ownership *"),l.a.createElement("h5",{className:"mb-0"},h.ownership||"-"))))))),l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Metrics ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.vehicle.edit,{id:p.props.match.params.id}),editTab:"5"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Current Meter Unit"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},(null===(i=h.current_meter_unit)||void 0===i||null===(r=i.name)||void 0===r?void 0:r.toLowerCase().split("_").join(" "))||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Secondary Meter Unit"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},(null===(s=h.secondary_meter_unit)||void 0===s||null===(m=s.name)||void 0===m?void 0:m.toLowerCase().split("_").join(" "))||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Volume Unit"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},(null===(d=h.fuel_volume_unit)||void 0===d||null===(u=d.name)||void 0===u?void 0:u.toLowerCase())||"-"))))))),l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Lifetime Costs"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.vehicle.edit,{id:p.props.match.params.id}),editTab:"6"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"4"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Service Costs (Lifetime)"),l.a.createElement("h5",{className:"mb-0"},xd(h.service_cost||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Costs (Lifetime)"),l.a.createElement("h5",{className:"mb-0"},xd(h.fuel_cost||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Other Costs (Lifetime)"),l.a.createElement("h5",{className:"mb-0"},xd(h.other_cost||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Meter Usage per Day (Lifetime)"),l.a.createElement("h5",{className:"mb-0"},h.meter_uses_per_day||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Secondary Meter Usage per Day (Lifetime)"),l.a.createElement("h5",{className:"mb-0"},h.secondary_meter_uses_per_day||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Volume Unit"),l.a.createElement("h5",{className:"mb-0"},h.fuel_volume_unit_cost||"-"))))))),l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents")),key:"9"},l.a.createElement(gS,{hideTitle:!0,onTabChange:this.props.onTabChange})),l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Technical Details"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.vehicle.edit,{id:p.props.match.params.id}),editTab:"7"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"5"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"General")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Body Type"),l.a.createElement("h5",{className:"mb-0"},h.body_type||"-"," ")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Body Subtype"),l.a.createElement("h5",{className:"mb-0"},h.body_sub_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Drive Type"),l.a.createElement("h5",{className:"mb-0"},h.drive_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Brake System"),l.a.createElement("h5",{className:"mb-0"},h.brake_system||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"MSRP"),l.a.createElement("h5",{className:"mb-0"},xd(h.msrp||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Fuel")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Tank 1 Capacity"),l.a.createElement("h5",{className:"mb-0"},h.fuel_tank_1_capacity||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Tank 2 Capacity"),l.a.createElement("h5",{className:"mb-0"},h.fuel_tank_2_capacity||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"EPA City"),l.a.createElement("h5",{className:"mb-0"},h.epa_city||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"EPA Highway"),l.a.createElement("h5",{className:"mb-0"},h.epa_highway||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"EPA Combined"),l.a.createElement("h5",{className:"mb-0"},h.epa_combined||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Dimensions")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Front Track Width"),l.a.createElement("h5",{className:"mb-0"},h.front_track_width||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Ground Clearance"),l.a.createElement("h5",{className:"mb-0"},h.ground_clearance||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Height "),l.a.createElement("h5",{className:"mb-0"},h.height)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Length"),l.a.createElement("h5",{className:"mb-0"},h.length||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Rear Track Width"),l.a.createElement("h5",{className:"mb-0"},h.rear_track_width||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Width"),l.a.createElement("h5",{className:"mb-0"},h.width||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Wheelbase"),l.a.createElement("h5",{className:"mb-0"},h.wheelbase||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Tires & Wheels")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Front Tire PSI"),l.a.createElement("h5",{className:"mb-0"},h.front_tire_psi||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Rear Tire PSI"),l.a.createElement("h5",{className:"mb-0"},h.reat_tire_psi||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Rear Axle "),l.a.createElement("h5",{className:"mb-0"},h.rear_axle||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"}),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Front Tire Type"),l.a.createElement("h5",{className:"mb-0"},h.front_tire_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Front Wheel Diameter"),l.a.createElement("h5",{className:"mb-0"},h.front_wheel_diameter||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Rear Tire Type"),l.a.createElement("h5",{className:"mb-0"},h.rear_tire_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Rear Wheel Diameter"),l.a.createElement("h5",{className:"mb-0"},h.rear_wheel_diameter||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Weight and Capacity")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Towing Capacity"),l.a.createElement("h5",{className:"mb-0"},h.towing_capacity||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Curb Weight"),l.a.createElement("h5",{className:"mb-0"},h.curb_weight||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Gross Vehicle Weight Training"),l.a.createElement("h5",{className:"mb-0"},h.gross_vehicle_weight||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Bed Length"),l.a.createElement("h5",{className:"mb-0"},h.bed_length||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Max Payload"),l.a.createElement("h5",{className:"mb-0"},h.max_payload||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Engine")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Engine Summary"),l.a.createElement("h5",{className:"mb-0"},h.engine_summary||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Engine Brand"),l.a.createElement("h5",{className:"mb-0"},h.engine_brand||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Aspiration"),l.a.createElement("h5",{className:"mb-0"},h.aspiration||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Block Type"),l.a.createElement("h5",{className:"mb-0"},h.block_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Bore"),l.a.createElement("h5",{className:"mb-0"},h.bore||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Cam Type"),l.a.createElement("h5",{className:"mb-0"},h.cam_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Compression"),l.a.createElement("h5",{className:"mb-0"},h.compression||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Cylinders"),l.a.createElement("h5",{className:"mb-0"},h.cylinders||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Induction"),l.a.createElement("h5",{className:"mb-0"},h.fuel_induction||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Fuel Quality"),l.a.createElement("h5",{className:"mb-0"},h.fuel_quality||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Max HP"),l.a.createElement("h5",{className:"mb-0"},h.max_hp||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Max Torque"),l.a.createElement("h5",{className:"mb-0"},h.max_torque||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Oil Capacity"),l.a.createElement("h5",{className:"mb-0"},h.oil_capacity||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Redline RPM"),l.a.createElement("h5",{className:"mb-0"},h.redline_rpm||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Stroke"),l.a.createElement("h5",{className:"mb-0"},h.stroke||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Valves"),l.a.createElement("h5",{className:"mb-0"},h.valves||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Transmission")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Transmission Summary"),l.a.createElement("h5",{className:"mb-0"},h.transmission_summary||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Transmission Brand"),l.a.createElement("h5",{className:"mb-0"},h.transmission_brand||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Transmission Type"),l.a.createElement("h5",{className:"mb-0"},h.transmission_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Transmission Gears"),l.a.createElement("h5",{className:"mb-0"},h.tranmission_grears||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Volume")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Cargo Volume"),l.a.createElement("h5",{className:"mb-0"},h.volume||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Interior Volume"),l.a.createElement("h5",{className:"mb-0"},h.interior_volume||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Passenger Volume"),l.a.createElement("h5",{className:"mb-0"},h.passenger_volume||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Duty Type & Weight Class")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Duty Type"),l.a.createElement("h5",{className:"mb-0"},h.duty_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Weight Class"),l.a.createElement("h5",{className:"mb-0"},h.weight_class||"-"))))))),l.a.createElement(bS,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Payment Information"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.vehicle.edit,{id:p.props.match.params.id}),editTab:"8"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"6"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Payment")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Acquisition Type"),l.a.createElement("h5",{className:"mb-0"},h.acquisition_type||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Monthly Cost"),l.a.createElement("h5",{className:"mb-0"},xd(h.monthaly_cost||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Acquisition Date"),l.a.createElement("h5",{className:"mb-0"},h.acquisition_date||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Loan Amount"),l.a.createElement("h5",{className:"mb-0"},xd(h.loan_amount||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Capitalized Cost"),l.a.createElement("h5",{className:"mb-0"},xd(h.capitalized_cost||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Down Payment Amount"),l.a.createElement("h5",{className:"mb-0"},xd(h.down_payment_amount||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Percentage Rate"),l.a.createElement("h5",{className:"mb-0"},h.annual_percentage_rate||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"First Payment Date"),l.a.createElement("h5",{className:"mb-0"},h.first_payment_date||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Number of Payments"),l.a.createElement("h5",{className:"mb-0"},h.number_of_payment||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Reference Number"),l.a.createElement("h5",{className:"mb-0"},h.reference_number||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Residual Value "),l.a.createElement("h5",{className:"mb-0"},xd(h.residual_value||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"}),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Mileage Cap"),l.a.createElement("h5",{className:"mb-0"},h.mileage_cap||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Mileage Charge"),l.a.createElement("h5",{className:"mb-0"},xd(h.mileage_charge||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Acquisition End Date"),l.a.createElement("h5",{className:"mb-0"},h.acquisition_end_date||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Generate Expenses"),l.a.createElement("h5",{className:"mb-0"},xd(h.generate_expenses||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Vendor Name"),l.a.createElement("h5",{className:"mb-0"},h.vendor_name||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Lender Name"),l.a.createElement("h5",{className:"mb-0"},h.lender_name||"-")),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-lg-8 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Notes"),l.a.createElement("h5",{className:"mb-0"},h.notes||"-"))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",{className:"mb-0"},"Purchase & Warranty")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Date"),l.a.createElement("h5",{className:"mb-0"},h.purchase_date||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Price"),l.a.createElement("h5",{className:"mb-0"},xd(h.purchase_price||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Meter Value"),l.a.createElement("h5",{className:"mb-0"},h.purchase_master_value||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Vendor"),l.a.createElement("h5",{className:"mb-0"},h.purchase_vendor||"-")),l.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-lg-8 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Comment"),l.a.createElement("h5",{className:"mb-0"},h.purchase_comment||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Warranty Expiration Date"),l.a.createElement("h5",{className:"mb-0"},h.warrant_expiration_date||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Warranty Expiration Meter"),l.a.createElement("h5",{className:"mb-0"},h.warrant_expiration_meter||"-")))))))))))):l.a.createElement("div",{className:"text-center my-4"},l.a.createElement(Wv.a,null))}}]),t}(n.Component)),yS=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(NS)),wS=vf.a.TabPane,_S=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={active:"1"},e.onTabChange=function(a){e.setState({active:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{onChange:this.onTabChange,activeKey:this.state.active,className:"carpet-cleaning-main-common-tab"},l.a.createElement(wS,{tab:"Summary",key:"1"},l.a.createElement(yS,{onTabChange:this.onTabChange})),l.a.createElement(wS,{tab:"Documents",key:"2"},l.a.createElement(gS,{onChange:this.onTabChange})))))))}}]),t}(n.Component),SS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s=null===(e=this.props.data)||void 0===e?void 0:e.customer_contact,o=null===(a=this.props.data)||void 0===a?void 0:a.owner_contact;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 custom-tree-row justify-content-between py-2"},l.a.createElement("div",{className:"common-select-option-row",style:{width:"87%"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},this.props.img&&l.a.createElement("div",{className:this.props.img?"select-option-icon d-inline-block":"",style:Object(wu.a)(Object(wu.a)({},null===(t=this.props)||void 0===t?void 0:t.style),{},{float:"left"})},l.a.createElement("img",{src:this.props.img,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"d-inline-block",style:{width:"calc(100% - 45px)"}},l.a.createElement("h6",{style:{display:"inline-block",maxWidth:"98%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},className:"mb-0 custom-select-option-title"},this.props.data.name),l.a.createElement("ul",{className:"list-inline mb-0 person-list-details"},l.a.createElement("li",null,l.a.createElement("img",{src:Rm.person_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("span",null,(null===s||void 0===s?void 0:s.length)?null===(n=s[0])||void 0===n||null===(c=n.account)||void 0===c?void 0:c.name:"-")),l.a.createElement("li",null,l.a.createElement("img",{src:Rm.person_round_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("span",null,(null===o||void 0===o?void 0:o.length)?null===(i=o[0])||void 0===i||null===(r=i.account)||void 0===r?void 0:r.name:"-")))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},this.props.type)))}}]),t}(n.Component),xS=Object(Lm.b)(null,{setBreadcrumb:Uv})(SS),CS={labelCol:{span:24},wrapperCol:{span:24}},OS=ku.a.Option,kS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={subtiers:[],fetching:!1},e.formRef=l.a.createRef(),e.fetchSubTiers=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),WE(Object(wu.a)(Object(wu.a)({},a),{},{not_group:!0})).then((function(a){e.setState({subtiers:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSubmit=function(a){var t=Object(wu.a)(Object(wu.a)({},a),{},{parent:a.parent.value,tier_type:Bd});e.props.data?BE(e.props.data.id,t).then((function(a){e.props.setData(a.data,2),Mm.b.success("Fleet Group updated successfully!")})).catch((function(e){td(e)})):qE(t).then((function(a){e.props.setData(a.data,2),Mm.b.success("Fleet Group created successfully!")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchSubTiers()}},{key:"componentDidUpdate",value:function(){var e=Object(Qm.a)($m.a.mark((function e(a,t,n){var l,c,i,r,s,o,m,d;return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.data===this.props.data){e.next=4;break}return e.next=3,this.fetchSubTiers({search:this.props.name});case 3:this.formRef.current.setFieldsValue({name:this.props.name,parent:{label:(null===(l=this.props)||void 0===l||null===(c=l.subtier)||void 0===c?void 0:c.name)||(null===(i=this.props)||void 0===i||null===(r=i.subtier)||void 0===r?void 0:r.label),value:(null===(s=this.props)||void 0===s||null===(o=s.subtier)||void 0===o?void 0:o.id)||(null===(m=this.props)||void 0===m||null===(d=m.subtier)||void 0===d?void 0:d.key)}});case 4:case"end":return e.stop()}}),e,this)})));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.subtiers,c=this.props,i=c.name,r=c.subtier,s=c.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input fleet group name and choose fleet family / tier."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},CS,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Fleet Group Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{value:i,onChange:function(e){return s("name",e.target.value)},placeholder:"Enter Fleet Group Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"parent",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Fleet Family / Tier *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative custom-select-main"},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,placeholder:"Search and Select Region",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchSubTiers()},dropdownClassName:"custom-select-drop-main",value:{label:null===r||void 0===r?void 0:r.label,value:null===r||void 0===r?void 0:r.key},onSearch:function(a){return e.fetchSubTiers({search:a})},onChange:function(e){s("subtier",e)},optionLabelProp:"label"},n.map((function(e){return l.a.createElement(OS,{key:e.id,label:e.name,value:e.id},l.a.createElement(xS,{img:e.parent?null:Rm.fleet_group_truck,data:e,type:e.parent?"Fleet Tier":"Fleet Family"}))}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),jS=Object(r.withRouter)(kS),IS=fu.a.Panel,AS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:null,name:"",subtier:null,activeKey:["1"],visible:!1,visibleWarning:!1,unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.onChange=function(a,t){e.setState(Object(zv.a)({},a,t))},e.setData=function(a,t){var n,l;(null===(n=e.state.data)||void 0===n?void 0:n.name)&&(null===(l=e.state.data)||void 0===l?void 0:l.parent)?(e.setState((function(){return{data:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{data:a,unsavedExit:!0}}));var c,i=null;e.state.activeKey.length>1&&(i=null===(c=e.state.activeKey)||void 0===c?void 0:c.find((function(e){return e==t})));if(i)return null;e.setState((function(e){return{data:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"2")))}}))},e.onCollapseChange=function(a){e.setState({activeKey:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.data;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.fleet.groups.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l=this,c=[{title:"Create Fleet Group",url:zm.dashboard.management.fleet.groups.create}],i=[{title:"Edit Fleet Group",url:zm.dashboard.management.fleet.groups.edit}];(null===(e=this.props.match)||void 0===e?void 0:e.params.id)?(this.props.setBreadcrumb(i),LE(null===(a=this.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id).then((function(e){l.setState({data:null===e||void 0===e?void 0:e.data,name:e.data.name,subtier:e.data.parent})})).catch((function(e){td(e)})),this.setState({activeKey:this.props.location.editTab||"1"})):this.props.setBreadcrumb(c)}},{key:"render",value:function(){var e=this,a=this.state,t=a.data,n=a.name,c=a.subtier,i=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:i,onChange:this.onCollapseChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(IS,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(jS,{onChange:this.onChange,name:n,subtier:c,setData:this.setData,data:t})),l.a.createElement(IS,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Fleet Group Calculations ",l.a.createElement("sup",null,"*")))),key:"2"},l.a.createElement(Y_,{name:n,subtier:c,data:t,setData:this.setData}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.fleet.groups.view,{id:t.id})):e.handleViewMainButtonCLick()},type:"primary"},"View Fleet Group"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Fleet Group !"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.fleet.groups.view,{id:t.id}))},className:"border-0 bg-transparent shadow-none p-0"},"View Fleet Group"),"."),okTitle:"View Fleet Group",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.fleet.groups.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Fleet Group?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Fleet Group, select View Fleet Group.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View Fleet Group ",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.fleet.groups.view,{id:t.id}))}}))}}]),t}(n.Component),DS=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(AS)),TS={labelCol:{span:24},wrapperCol:{span:24}},RS=(ku.a.Option,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={fetching:!1,fleetData:null,fleetName:""},e.formRef=l.a.createRef(),e.handleSubmit=function(a){e.props.fleetKit?GE(e.props.match.params.id?e.props.match.params.id:e.props.fleetKit,a).then((function(a){e.props.handleFleetKit(a.data,2),Mm.b.success("Fleet Kit updated successfully")})).catch((function(e){td(e)})):KE(a).then((function(a){e.props.handleFleetKit(a.data,2),Mm.b.success("Fleet Kit created successfully")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){var n;e.fleetKit!==this.props.fleetKit&&this.formRef.current.setFieldsValue({name:null===(n=this.props.fleetKit)||void 0===n?void 0:n.name})}},{key:"render",value:function(){var e=this.state,a=(e.fetching,e.subtiers,e.fleetName,this.props);a.name,a.subtier,a.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input inventory kit name and choose unit of measurement."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},TS,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Fleet Kit Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter Fleet Kit Name"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component)),MS=Object(r.withRouter)(RS),FS=t(1050),PS=ku.a.Option,VS={labelCol:{span:24},wrapperCol:{span:24}},qS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={fetching:!1,fleetGroup:null,fleetGroupOptions:[],page:1,search:"",totalCount:""},e.formRef=l.a.createRef(),e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove(a,t)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(a,t){var n={remove_fleet:t};GE(a.id,n).then((function(a){e.props.handleFleetKit(a.data)}))},e.fetchFleetKit=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.page;t.fetching;e.setState({fetching:!0}),WE(Object(wu.a)(Object(wu.a)({},a),{},{page:n})).then((function(a){e.setState({totalCount:a.data.count}),1==n?e.setState({fleetGroupOptions:a.data.results}):e.setState((function(e){return{fleetGroupOptions:[].concat(Object(Ou.a)(e.fleetGroupOptions),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchFleetKit()}))},e.handleSelect=function(a){var t,n={fleet_group_id:a};e.formRef.current.setFieldsValue({fleetgroup:""}),GE(null===(t=e.props.fleetKit)||void 0===t?void 0:t.id,n).then((function(a){e.props.handleFleetKit(a.data)})).catch((function(e){td(e)}))},e.handleContinue=function(){e.props.fleetKit?Mm.b.success("Fleet Group updated successfully"):Mm.b.success("Fleet Group created successfully")},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this,t=this.state,n=t.fetching,c=(t.fleetKit,t.fleetGroupOptions),i=t.totalCount;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,hideRequiredMark:!0,ref:this.formRef},VS,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all the fleet groups belong to this kit."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"fleetgroup",label:"Fleet Group ",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{placeholder:"Search",filterOption:!1,onFocus:function(){a.setState({page:1},(function(){a.fetchFleetKit()}))},onSelect:this.handleSelect,onSearch:function(e){return a.fetchFleetKit({search:e})},showSearch:!0,className:"custom-search-select",dropdownClassName:"custom-search-select option-design-fix",dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},n?l.a.createElement(Wv.a,null):c.length!==i&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(e){a.handlePagination(),e.stopPropagation()}},"Load More"))))))}},c.map((function(e,a){return l.a.createElement(PS,{label:e.name,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.fleet_group,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row",style:{width:"87%",float:"left"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name)),e.breadcrumb&&l.a.createElement("div",{className:"col-12"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_right_search_select_small,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,null,e)}))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Fleet Group"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),this.state.fleetGroup?l.a.createElement("div",{className:"col-12 fleet-kit-table table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"TYPE"),l.a.createElement("th",null,"Name / Info"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Fleet Kit"),l.a.createElement("td",null,this.state.fleetGroup.name)),null===(e=this.state.fleetGroup)||void 0===e?void 0:e.fleet_group.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,"Fleet Group "),l.a.createElement("td",{className:"position-relative"},l.a.createElement("span",{className:"rectangle-icon-div rectangle-icon-update position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"branch-tree-div"},e.name),l.a.createElement(xu.a,{className:"custoom-dropdown",overlay:a.menu(a.state.fleetGroup,e.id),trigger:["click"]},l.a.createElement("a",{onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Fleet Group"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main",onClick:this.handleContinue},"Save and Continue"))))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{fleetGroup:e.fleetKit}}}]),t}(n.Component),LS=Object(r.withRouter)(qS),US=fu.a.Panel,BS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={fleetKit:null,name:"",subtier:null,activeKey:["1"],visible:!1,visibleWarning:!1,unsavedExit:!1,kitCreate:null,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.handleFleetKit=function(a,t){e.setState({fleetKit:a});var n=null;if(e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n)return null;e.setState((function(e){return{activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"2")))}}))},e.onCollapseChange=function(a){e.setState({activeKey:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l=this,c=[{title:"Create Fleet Kit",url:zm.dashboard.management.fleet.kit.create}],i=[{title:"Edit Fleet Kit",url:zm.dashboard.management.fleet.kit.edit}];(null===(e=this.props.match)||void 0===e?void 0:e.params.id)?(this.props.setBreadcrumb(i),UE(null===(a=this.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id).then((function(e){l.setState({fleetKit:null===e||void 0===e?void 0:e.data})})).catch((function(e){td(e)})),this.setState({activeKey:this.props.location.editTab||"1"})):this.props.setBreadcrumb(c)}},{key:"render",value:function(){var e=this.state,a=e.fleetKit,t=e.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:t,onChange:this.onCollapseChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(US,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(MS,{fleetKit:a,handleFleetKit:this.handleFleetKit})),l.a.createElement(US,{disabled:!this.state.fleetKit,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Fleet Groups"))),key:"2"},l.a.createElement(LS,{fleetKit:a,handleFleetKit:this.handleFleetKit}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{disabled:!this.state.fleetKit,onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.fleet.kit.view,{id:a.id}))},type:"primary"},"View Fleet Kit"))))))))}}]),t}(n.Component),WS=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(BS)),YS={labelCol:{span:24},wrapperCol:{span:24}},KS=ku.a.Option,GS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={groups:[],regions:[],employees:[],fetching:!1,vehicle_package_item:[]},e.formRef=l.a.createRef(),e.fetchGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),a.tier_type=Bd,WE(a).then((function(a){e.setState({groups:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSubmit=function(a){var t,n;a.fleet_group=null===a||void 0===a||null===(t=a.fleet_group)||void 0===t?void 0:t.value,a.operator=null===a||void 0===a||null===(n=a.operator)||void 0===n?void 0:n.value,e.props.vehicle?zE(e.props.vehicle.id,a).then((function(a){e.props.setVehicle(a.data,2),Mm.b.success("Vehicle updated successfully")})).catch((function(e){td(e)})):YE(a).then((function(a){e.props.setVehicle(a.data,2),Mm.b.success("Vehicle created successfully")})).catch((function(e){td(e)}))},e.getRegion=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ZE(a).then((function(a){e.setState({regions:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.getOperator=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Bp(a).then((function(a){e.setState({employees:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(Qm.a)($m.a.mark((function e(a,t,n){var l,c,i,r,s,o,m,d,u,p;return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.vehicle===this.props.vehicle){e.next=4;break}return e.next=3,this.fetchGroups();case 3:this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.vehicle),{},{fleet_group:{value:null===(l=this.props.vehicle)||void 0===l||null===(c=l.fleet_group)||void 0===c?void 0:c.id,label:null===(i=this.props.vehicle)||void 0===i||null===(r=i.fleet_group)||void 0===r?void 0:r.name},operator:{value:(null===(s=this.props.vehicle)||void 0===s||null===(o=s.operator)||void 0===o?void 0:o.id)||null,label:"".concat((null===(m=this.props.vehicle)||void 0===m||null===(d=m.operator)||void 0===d?void 0:d.first_name)||"Select"," ").concat((null===(u=this.props.vehicle)||void 0===u||null===(p=u.operator)||void 0===p?void 0:p.last_name)||" ")}}));case 4:case"end":return e.stop()}}),e,this)})));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.groups,c=a.regions,i=a.employees,r=this.props,s=r.fleet_group,o=r.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input Vehicle\u2019s general information."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},YS,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Vehicle Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Vehicle Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fleet_group",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Vehicle Group *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,optionLabelProp:"label",showSearch:!0,placeholder:"Search Vehicle Groups",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onChange:function(e){o("fleet_group",e)},value:s,dropdownClassName:"custom-select-drop-main",onFocus:function(){return e.fetchGroups()},onSearch:function(a){return e.fetchGroups({search:a})}},n.map((function(e,a){return l.a.createElement(KS,{key:a,value:e.id,label:e.name},l.a.createElement("div",{className:"row option-with-image align-item-center px-2 mx-0"},l.a.createElement("div",{className:"option-icon"},l.a.createElement("img",{src:Rm.fleet_group_truck,className:"img-fluid"})),l.a.createElement("div",{className:"option-txt"},l.a.createElement(xS,{data:e,img:e.tier_type?null:Rm.fleet_group_truck,type:"Fleet Group"}))))}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"status",label:"Status *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select status"},l.a.createElement(KS,{value:"ACTIVE"},"Active"),l.a.createElement(KS,{value:"INACTIVE"},"Inactive")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"operator",label:"Current Operator",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,optionLabelProp:"label",placeholder:"Current Operator",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.getOperator()},onSearch:function(a){return e.getOperator({search:a})}},i.map((function(e){return l.a.createElement(KS,{key:e.id,value:e.id,label:"".concat(e.first_name," ").concat(e.last_name)},l.a.createElement("div",{className:"row custom-tree-row custom-tree-row-1"},l.a.createElement("div",{className:"common-select-option-row col-12 d-flex align-items-center"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("span",{style:{background:"#7FD4BA",color:"#fff",borderRadius:"50%",width:"35px",height:"35px"},className:"d-flex justify-content-center align-items-center"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block ml-1"},e.first_name," ",e.last_name)),l.a.createElement("div",{style:{display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Employee"))))}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"region",label:"Region",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,placeholder:"Search Vehicle Groups",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.getRegion()},onSearch:function(a){return e.getRegion({search:a})},suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},c.map((function(e){return l.a.createElement(KS,{key:e.id,value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"year",label:"Year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"2019"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"make",label:"Make",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Chevrolet"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"model",label:"Model *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Silverado 1500"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"trim",label:"Trim",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Work Truck"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"color",label:"Color",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Gray"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"type",label:"Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Pickup Truck"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_type",label:"Fuel Type",className:"position-relative"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Fuel Type"},l.a.createElement(KS,{value:"GASOLINE"},"Gasoline"),l.a.createElement(KS,{value:"DIESEL"},"Diesel"),l.a.createElement(KS,{value:"LIQUIFIED_PETROLEUM"},"Liquified Petroleum"),l.a.createElement(KS,{value:"ETHANOL"},"Ethanol"),l.a.createElement(KS,{value:"COMPRESSED_NATURAL_GAS"},"Compressed Natural Gas"),l.a.createElement(KS,{value:"BIODIESEL"},"Biodiesel"),l.a.createElement(KS,{value:"FLEX_FUEL"},"Flex Fuel")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),zS=Object(r.withRouter)(GS),HS={labelCol:{span:24},wrapperCol:{span:24}},$S=(ku.a.Option,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleSubmit=function(a){zE(e.props.vehicle.id,a).then((function(a){e.props.setVehicle(a.data,5),Mm.b.success("Vehicle updated successfully")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&JE(this.props.match.params.id).then((function(a){e.formRef.current.setFieldsValue(Object(wu.a)({},a.data))})).catch((function(e){td(e)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input this vehicle\u2019s registration information."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},HS,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"vin_sin",label:"VIN/SN",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{style:{textTransform:"uppercase"},placeholder:"JTHKD5BH3B2016342"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"license_plate",label:"License Plate",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{style:{textTransform:"uppercase"},placeholder:"A50 GLU"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"Registration State/Province",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"State"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"ownership",label:"Ownership",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Ownership"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component)),QS=Object(r.withRouter)($S),JS={labelCol:{span:24},wrapperCol:{span:24}},ZS=ku.a.Option,XS=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={allOptions:[]},e.handleSubmit=function(a){zE(e.props.vehicle.id,a).then((function(a){e.props.setVehicle(a.data,6),Mm.b.success("Vehicle updated successfully")})).catch((function(e){td(e)}))},e.getSubUnitName=function(a){Rg(a).then((function(a){e.setState({allOptions:a.data})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&JE(this.props.match.params.id).then((function(a){var t,n,l,c,i,r;e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},a.data),{},{fuel_volume_unit:null===(t=a.data)||void 0===t||null===(n=t.fuel_volume_unit)||void 0===n?void 0:n.id,secondary_meter_unit:null===(l=a.data)||void 0===l||null===(c=l.secondary_meter_unit)||void 0===c?void 0:c.id,current_meter_unit:null===(i=a.data)||void 0===i||null===(r=i.current_meter_unit)||void 0===r?void 0:r.id})),e.getSubUnitName()})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state.allOptions;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"please choose metrics."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},JS,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"current_meter_unit",label:"Current Meter Unit *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Meter Unit",showSearch:!0,filterOption:!1,onSearch:function(a){return e.getSubUnitName({search:a})}},a.map((function(e){return l.a.createElement(ZS,{key:e.id,value:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"secondary_meter_unit",label:"Secondary Meter Unit",className:"position-relative"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Secondary Meter Unit",showSearch:!0,filterOption:!1,onSearch:function(a){return e.getSubUnitName({search:a})}},a.map((function(e){return l.a.createElement(ZS,{key:e.id,value:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_volume_unit",label:"Fuel Volume Unit *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Volume Unit",showSearch:!0,filterOption:!1,onSearch:function(a){return e.getSubUnitName({search:a})}},a.filter((function(e){return 4===e.unit_type.id})).map((function(e){return l.a.createElement(ZS,{key:e.id,value:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),ex=Object(r.withRouter)(XS),ax={labelCol:{span:24},wrapperCol:{span:24}},tx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleSubmit=function(a){zE(e.props.vehicle.id,a).then((function(a){e.props.setVehicle(a.data,7),Mm.b.success("Vehicle updated successfully")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&JE(this.props.match.params.id).then((function(a){e.formRef.current.setFieldsValue(Object(wu.a)({},a.data))})).catch((function(e){td(e)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input lifetime costs."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},ax,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"service_cost",label:"Service Costs (Lifetime)",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_cost",label:"Fuel Costs (Lifetime)",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost",label:"Other Costs (Lifetime)",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"meter_uses_per_day",label:"Meter Usage per Day (Lifetime)",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"10 mi"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"secondary_meter_uses_per_day",label:"Secondary Meter Usage per Day (Lifetime)",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0 hr"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_volume_unit_cost",label:"Fuel Volume Unit",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"US Gallons"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),nx=Object(r.withRouter)(tx),lx={labelCol:{span:24},wrapperCol:{span:24}},cx=ku.a.Option,ix=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={blocks:[],weight:[],duty:[],fetching:!1},e.formRef=l.a.createRef(),e.fetchBlock=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),XE(a).then((function(a){e.setState({blocks:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.fetchDuty=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),eg(a).then((function(a){e.setState({duty:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.fetchWeight=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ag(a).then((function(a){e.setState({weight:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSubmit=function(a){zE(e.props.vehicle.id,a).then((function(a){e.props.setVehicle(a.data,8),Mm.b.success("Vehicle updated successfully")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&JE(this.props.match.params.id).then((function(a){e.formRef.current.setFieldsValue(Object(wu.a)({},a.data))})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.blocks,n=a.duty,c=a.weight;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input technical details."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},lx,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",{className:"mt-0"},"General")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"body_type",label:"Body Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Body Type"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"body_sub_type",label:"Body Subtype",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Body Subtype"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"drive_type",label:"Drive Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Drive Type"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"brake_system",label:"Brake System",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Brake System"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"msrp",label:"MSRP",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Fuel")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_tank_1_capacity",label:"Fuel Tank 1 Capacity",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_tank_2_capacity",label:"Fuel Tank 2 Capacity",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"epa_city",label:"EPA City",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"epa_highway",label:"EPA Highway",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"epa_combined",label:"EPA Combined",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Dimensions")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"front_track_width",label:"Front Track Width",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"ground_clearance",label:"Ground Clearance",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"height",label:"Height ",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"length",label:"Length",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"rear_track_width",label:"Rear Track Width",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"width",label:"Width",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"wheelbase",label:"Wheelbase",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Tires & Wheels")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"front_tire_psi",label:"Front Tire PSI",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"rear_tire_psi",label:"Rear Tire PSI",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"rear_axle",label:"Rear Axle",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"front_tire_type",label:"Front Tire Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"front_wheel_diameter",label:"Front Wheel Diameter",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"rear_tire_type",label:"Rear Tire Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"rear_wheel_diameter",label:"Rear Wheel Diameter",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Weight and Capacity")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"towing_capacity",label:"Towing Capacity",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"curb_weight",label:"Curb Weight",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"gross_vehicle_weight_training",label:"Gross Vehicle Weight Training",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"bed_length",label:"Bed Length",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"max_payload",label:"Max Payload",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Engine")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"engine_summary",label:"Engine Summary",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Vortec 4.8L"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"engine_brand",label:"Engine Brand",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Vortec"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"aspiration",label:"Aspiration",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Turbo Charger"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"block_type",label:"Block Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,onSearch:function(a){return e.fetchBlock({search:a})},onFocus:function(){return e.fetchBlock()},suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Block Type"},t.map((function(e){return l.a.createElement(cx,{value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"bore",label:"Bore",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"3.8"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"cam_type",label:"Cam Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"OHV"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"compression",label:"Compression",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"8.8"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"cylinders",label:"Cylinders",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"8"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_induction",label:"Fuel Induction",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Direct Injection"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_quantity",label:"Fuel Quality",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"8.7"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"max_hp",label:"Max HP",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"307"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"max_torque",label:"Max Torque",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"333"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"oil_capacity",label:"Oil Capacity",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"7.6"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"redline_rpm",label:"Redline RPM",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"6000"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"stroke",label:"Stroke",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"7.6"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"valves",label:"Valves",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"16"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Transmission")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"transmission_summary",label:"Transmission Summary",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"4-Speed Automatic"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"transmission_brand",label:"Transmission Brand",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Allison 1000"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"transmission_type",label:"Transmission Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Automatic"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"transmission_gears",label:"Transmission Gears",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"4"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Volume")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"cargo_volume",label:"Cargo Volume",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"239.17"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"interior_volume",label:"Interior Volume",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"239.17"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"passenger_volume",label:"Passenger Volume",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"120.8"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Duty Type & Weight Class")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"duty_type",label:"Duty Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,onSearch:function(a){return e.fetchDuty({search:a})},onFocus:function(){return e.fetchDuty()},suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Duty Type"},n.map((function(e){return l.a.createElement(cx,{value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"weight_class",label:"Weight Class",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,onSearch:function(a){return e.fetchWeight({search:a})},onFocus:function(){return e.fetchWeight()},suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Weight"},c.map((function(e){return l.a.createElement(cx,{value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),rx=Object(r.withRouter)(ix),sx={labelCol:{span:24},wrapperCol:{span:24}},ox=Pm.a.TextArea,mx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleSubmit=function(a){zE(e.props.vehicle.id,a).then((function(a){e.props.setVehicle(a.data,9),Mm.b.success("Vehicle updated successfully")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&JE(this.props.match.params.id).then((function(a){var t,n,l,c,i,r,s,o,m,d;e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},a.data),{},{acquisition_date:(null===(t=a.data)||void 0===t?void 0:t.acquisition_date)?hd()(null===(n=a.data)||void 0===n?void 0:n.acquisition_date):null,first_payment_date:(null===(l=a.data)||void 0===l?void 0:l.first_payment_date)?hd()(null===(c=a.data)||void 0===c?void 0:c.first_payment_date):null,acquisition_end_date:(null===(i=a.data)||void 0===i?void 0:i.acquisition_end_date)?hd()(null===(r=a.data)||void 0===r?void 0:r.acquisition_end_date):null,purchase_date:(null===(s=a.data)||void 0===s?void 0:s.purchase_date)?hd()(null===(o=a.data)||void 0===o?void 0:o.purchase_date):null,warrant_expiration_date:(null===(m=a.data)||void 0===m?void 0:m.warrant_expiration_date)?hd()(null===(d=a.data)||void 0===d?void 0:d.warrant_expiration_date):null}))})).catch((function(e){td(e)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input payment information."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},sx,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",{className:"mt-0"},"Payment")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"acquisition_type",label:"Acquisition Type",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"monthaly_cost",label:"Monthly Cost",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},type:"number",placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"acquisition_date",label:"Acquisition Date",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Hv.a,null))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"loan_amount",label:"Loan Amount",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"capitalized_cost",label:"Capitalized Cost",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"down_payment_amount",label:"Down Payment Amount",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_percentage_rate",label:"Annual Percentage Rate",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{type:"number",placeholder:"Input"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"first_payment_date",label:"First Payment Date",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Hv.a,null))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"number_of_payment",label:"Number of Payments",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"reference_number",label:"Reference Number",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"residual_value",label:"Residual Value ",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"mileage_cap",label:"Mileage Cap",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"mileage_charge",label:"Mileage Charge",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"acquisition_end_date",label:"Acquisition End Date",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Hv.a,null))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"generate_expenses",label:"Generate Expenses",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"vendor_name",label:"Vendor Name",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"lender_name",label:"Lender Name",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"notes",label:"Notes",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ox,{placeholder:"Notes",className:"text-area-main text-area-task"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Purchase & Warranty")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_date",label:"Purchase Date",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Hv.a,{format:"YYYY-MM-DD",placeholder:"mm/dd/yyyy"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_price",label:"Purchase Price",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_master_value",label:"Purchase Meter Value",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_vendor",label:"Purchase Vendor",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"purchase_comment",label:"Purchase Comment",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ox,{placeholder:"Purchase Comment",className:"text-area-main text-area-task"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"warrant_expiration_date",label:"Warranty Expiration Date",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Hv.a,{placeholder:"mm/dd/yyyy"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"warrant_expiration_meter",label:"Warranty Expiration Meter",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Input"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),dx=Object(r.withRouter)(mx),ux={labelCol:{span:24},wrapperCol:{span:24}},px=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={total:null},e.handleSubmit=function(a){zE(e.props.vehicle.id,a).then((function(a){e.props.setVehicle(a.data,3),Mm.b.success("Vehicle updated successfully")})).catch((function(e){td(e)}))},e.handleFormChange=function(){var a=e.formRef.current,t=a.getFieldValue,n=a.setFieldsValue,l=t("purchase_cost")/t("estimated_life")/t("estimated_days")||0,c=t("annual_premium")/t("estimated_days")||0,i=t("average_price")/t("average_gallon")||0,r=t("annual_fee")/t("estimated_days")||0,s=t("annual_permit_fee")/t("estimated_days")||0,o=t("maintenance_per_year")/t("estimated_days")||0,m=t("other_cost_per_year")/t("estimated_days")||0;n({per_day_dpr:l.toFixed(2),insurance_per_day:c.toFixed(2),fuel_per_day:i.toFixed(2),reg_per_day:r.toFixed(2),permit_per_day:s.toFixed(2),maintenance_per_day:o.toFixed(2),other_cost_per_day:m.toFixed(2)}),e.setState({total:parseFloat(l.toFixed(2))+parseFloat(c.toFixed(2))+parseFloat(i.toFixed(2))+parseFloat(r.toFixed(2))+parseFloat(s.toFixed(2))+parseFloat(o.toFixed(2))+parseFloat(m.toFixed(2))})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&JE(this.props.match.params.id).then((function(a){e.formRef.current.setFieldsValue(Object(wu.a)({},a.data)),e.handleFormChange()})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e,a,t;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Vehicle calculations at the group level and at the vehicle level are NOT associated."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFieldsChange:this.handleFormChange,ref:this.formRef,onFinish:this.handleSubmit},ux,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Per Day Depr")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimated_days",label:"Estimated Days of use per year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimated_life",label:"Estimated Life (Years) *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_hours",label:"Average Hours per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{type:"number",placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_cost",label:"Purchase Cost *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"per_day_dpr",label:"Per Day Depr *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Insurance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_premium",label:"Annual Auto Insurance Premium *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"insurance_per_day",label:"Insurance per Day *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Fuel Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_price",label:"Average Fuel Price per Gallon *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_gallon",label:"Average Gallons per Day *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"0"}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-sm-6"},l.a.createElement(Fm.a.Item,{name:"fuel_per_day",label:"Fuel per Day *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Registration Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_fee",label:"Annual Registration Fee *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"reg_per_day",label:"Registration Per Day *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Permit Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_permit_fee",label:"Annual Permit Fee *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"permit_per_day",label:"Permit per Day *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Maintenance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_year",label:"Maintenance per Year *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_day",label:"Maintenance per Day *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_year",label:"Other Cost per Year",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_day",label:"Other Cost per Day",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-sm-6"},l.a.createElement("ul",{className:"list-inline text-md-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Day:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===(e=this.state.total)||void 0===e?void 0:e.toFixed(2))),l.a.createElement("ul",{className:"list-inline text-md-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Hour:"),l.a.createElement("li",{className:"list-inline-item"},"$",this.state.total/(null===(a=this.formRef.current)||void 0===a||null===(t=a.getFieldValue("average_hours"))||void 0===t?void 0:t.toFixed(2))||0))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),vx=Object(r.withRouter)(px),hx={labelCol:{span:24},wrapperCol:{span:24}},fx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={county:[],updateMainState:null},e.formRef=l.a.createRef(),e.onSubmit=function(a){if(e.props.editData){var t=Object(wu.a)(Object(wu.a)({},a),{},{type:"FLEET",fleet_id:e.props.match.params.id});ng(e.props.editData.id,t).then((function(a){Mm.b.success("Internal Location Updated Successfully"),e.props.callbackContact&&e.props.callbackContact(a.data),e.formRef.current.resetFields()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}else{lg(Object(wu.a)(Object(wu.a)({},a),{},{type:"FLEET",fleet_id:e.props.match.params.id})).then((function(a){Mm.b.success("Internal Location Created Successfully"),e.props.callbackContact&&e.props.callbackContact(a.data),e.formRef.current.resetFields()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}e.props.onClose()},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e.populateData=function(){var a;e.props.editData?e.formRef.current.setFieldsValue(Object(wu.a)({},e.props.editData)):(null===(a=e.formRef)||void 0===a?void 0:a.current)&&e.formRef.current.setFieldsValue({country:"United States"})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=(this.props.editData,this.state),t=a.county,n=a.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,closable:!0,destroyOnClose:!0,title:"Create Warehouse",visible:this.props.visible,onClose:this.props.onClose,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){e.formRef.current.submit(),e.showConfirmModal(!0)},type:"primary"},"".concat(this.props.editData?"Update":"Create")))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit},hx,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Location Name",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Location Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(n,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"zip",label:"Zip/Postal Code",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")},parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"})))))))))}}]),t}(n.Component),Ex=Object(r.withRouter)(fx),gx=ku.a.Option,bx={labelCol:{span:24},wrapperCol:{span:24}},Nx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={contacts:[],sites:[],fetching:!1,visible:!1},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleEdit(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleEdit=function(a){e.setState({editData:a,visible:!0})},e.handleRemove=function(){e.setState({sites:[]})},e.fetchContacts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(wu.a)({},a);tg(t).then((function(a){e.setState({contacts:a.data.results})})).catch((function(e){}))},e.handleSelect=function(a){e.formRef.current.setFieldsValue({contacts:null});var t=e.state.contacts.filter((function(e){return e.id==a}));e.setState({sites:t})},e.callbackContact=function(a){e.setState({sites:[a]}),e.formRef.current.setFieldsValue({contacts:e.state.sites[0].name})},e.handleSubmit=function(){var a,t={type:"FLEET",internal_location:null===(a=e.state.sites[0])||void 0===a?void 0:a.id};zE(e.props.vehicle.id,t).then((function(a){Mm.b.success("Vehicle updated successfully!"),e.props.setVehicle(a.data,4)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.showContact=function(){e.setState({visible:!1,editData:null})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&tg({fleet_id:this.props.match.params.id,type:"FLEET"}).then((function(a){e.setState({sites:a.data.results})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.contacts;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can only choose one warehouse per vehicle."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,hideRequiredMark:!0,ref:this.formRef},bx,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"contacts",label:l.a.createElement("div",null,"Warehouse ",l.a.createElement("sup",null,"*")),rules:[{required:!1}],className:"position-relative remove-cross-icon search-overlap"},l.a.createElement(ku.a,{className:"custom-search-select",showSearch:!0,placeholder:"Search",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchContacts({})},onSearch:function(a){return e.fetchContacts({search:a})},onChange:this.handleSelect},n.map((function(e){return l.a.createElement(gx,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name,l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.street_address||"",", ",e.city||"",","," ",e.state||"",",",e.zip||""," ",e.country||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Warehouse")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute text-capitalize",onClick:function(){e.setState({visible:!0})}},"+ Create"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},0===this.state.sites.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row add-site-blank-row align-items-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"d-inline-block w-100"},"No Warehouse")))),this.state.sites.map((function(a){return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{key:a.id,className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(a.street_address," ").concat(a.name," ").concat(a.city," ").concat(a.state," ").concat(a.country))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},a.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(a.phone))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))),l.a.createElement(Ex,{callbackContact:this.callbackContact,fetchContacts:this.fetchContacts,editData:this.state.editData,visible:this.state.visible,onClose:function(a){return e.showContact(!1,a)}}))}}]),t}(n.Component),yx=Object(r.withRouter)(Nx),wx={labelCol:{span:24},wrapperCol:{span:24}},_x=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))},sorter:!0},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a,t;ig({vehicle:null===(a=e.props)||void 0===a||null===(t=a.vehicle)||void 0===t?void 0:t.id}).then((function(a){var t=Object(wu.a)(Object(wu.a)({},e.props.vehicle),{},{documents:a.data.results});e.setState({files:a.data.results}),e.props.setVehicle(t)})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t;e.setState({buttonLoading:!0});var n=a.file,l=new FormData;l.append("vehicle",null===(t=e.props)||void 0===t?void 0:t.vehicle.id),l.append("document",n),cg(l).then((function(a){e.setState({buttonLoading:!1}),e.fetchFiles(),Mm.b.success("Documents Upload Successfully")})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?this.fetchFiles(this.props.match.params.id):this.fetchFiles()}},{key:"render",value:function(){var e=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},wx,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},e.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.columns,dataSource:e,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),Sx=Object(r.withRouter)(_x),xx=fu.a.Panel,Cx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={vehicle:null,activeKey:["1"],button:"View",visible:!1,visibleWarning:!1,unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.setVehicle=function(a,t){var n,l,c=null===(n=e.state)||void 0===n?void 0:n.vehicle;(null===c||void 0===c?void 0:c.name)&&(null===(l=e.state)||void 0===l?void 0:l.fleet_group)&&(null===c||void 0===c?void 0:c.status)&&(null===c||void 0===c?void 0:c.fuel_type)?a.current_meter_unit&&a.secondary_meter_unit&&a.fuel_volume_unit&&a.internal_location?(e.setState((function(){return{vehicle:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{vehicle:a}})):e.setState((function(){return{vehicle:a,unsavedExit:!0}}));var i=null;e.state.activeKey.length>1&&(i=e.state.activeKey.find((function(e){return e==t}))),i||e.setState((function(e){return{vehicle:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"9")))}}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.onCompletedVehicleCreate=function(){var a,t;o.push(Object(Gm.reverse)(zm.dashboard.management.fleet.vehicle.view,{id:null===(a=e.state)||void 0===a||null===(t=a.vehicle)||void 0===t?void 0:t.id}))},e.onChange=function(a,t){e.setState(Object(zv.a)({},a,t))},e.handleViewMainButtonCLick=function(){var a,t,n;e.state.data;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?e.onCompletedVehicleCreate():e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Vehicle",url:zm.dashboard.management.fleet.vehicle.create}],t=[{title:"Edit Vehicle",url:zm.dashboard.management.fleet.vehicle.edit}];this.props.match.params.id?(this.props.setBreadcrumb(t),JE(this.props.match.params.id).then((function(a){var t,n;e.setState({vehicle:a.data,fleet_group:null===(t=a.data)||void 0===t||null===(n=t.fleet_group)||void 0===n?void 0:n.id})})).catch((function(e){td(e)})),this.setState({activeKey:this.props.location.editTab||"1"})):this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.vehicle,n=a.activeKey,c=a.button,i=a.fleet_group;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:n,onChange:this.collapseOnChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(xx,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(zS,{onChange:this.onChange,fleet_group:i,setVehicle:this.setVehicle,vehicle:t})),l.a.createElement(xx,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Vehicle Calculations"))),key:"2"},l.a.createElement(vx,{setVehicle:this.setVehicle,vehicle:t})),l.a.createElement(xx,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Warehouse ",l.a.createElement("sup",null,"*")))),key:"3"},l.a.createElement(yx,{setVehicle:this.setVehicle,vehicle:t})),l.a.createElement(xx,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Registration Information"))),key:"4"},l.a.createElement(QS,{setVehicle:this.setVehicle,vehicle:t})),l.a.createElement(xx,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Metrics ",l.a.createElement("sup",null,"*")))),key:"5"},l.a.createElement(ex,{setVehicle:this.setVehicle,vehicle:t})),l.a.createElement(xx,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Lifetime Costs"))),key:"6"},l.a.createElement(nx,{setVehicle:this.setVehicle,vehicle:t})),l.a.createElement(xx,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Technical Details"))),key:"7"},l.a.createElement(rx,{setVehicle:this.setVehicle,vehicle:t})),l.a.createElement(xx,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Payment Information"))),key:"8"},l.a.createElement(dx,{setVehicle:this.setVehicle,vehicle:t})),l.a.createElement(xx,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"9"},l.a.createElement(Sx,{setVehicle:this.setVehicle,vehicle:t}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.state.unsavedExit?e.onCompletedVehicleCreate():e.handleViewMainButtonCLick()},disabled:!t,type:"primary"},c," Vehicle"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this Vehicle!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select",l.a.createElement(Vm.a,{style:{marginLeft:4},onClick:this.onCompletedVehicleCreate,className:"shadow-none border-0 bg-transparent p-0"},"View Vehicle"),"."),okTitle:"View Vehicle",visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)},okAction:this.onCompletedVehicleCreate}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Vehicle?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Vehicle, select View Vehicle.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View Fleet Group ",onOK:function(){e.showRequiredSuccessModal(!1),o.push(zm.dashboard.management.fleet.vehicle.view,{id:t.id})}}))}}]),t}(n.Component),Ox=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(Cx)),kx=vf.a.TabPane,jx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={groups:[],employees:[],loading:!1,key:"1",pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},laborDate:{start:"",end:"",start_modified:"",end_modified:""}},e.laborColumns=[{title:"Labor Group Name",sorter:!0,key:"name",render:function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.labor_group_name),Zd(e)&&l.a.createElement("p",{className:"red-text-disposal"},"Please complete all required information to avoid issues"))}},{title:"Type",dataIndex:"union_type",sorter:!0,key:"type",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},(null===e||void 0===e?void 0:e.split("_").join(" ").toLowerCase())||"-")}},{title:"Region",dataIndex:"region",render:function(e){return e.title},sorter:!0,key:"region"},{title:"Employees",dataIndex:"employee",sorter:!0},{title:"Last Activity Date",dataIndex:"modified",sorter:!0,key:"modified",render:function(e){return l.a.createElement("div",null,hd()(e).format("MMM DD,YYYY hh:mm A")||"-")}}],e.employeeColumns=[{title:"Employee Id",dataIndex:"id",sorter:!0,key:"id"},{title:"Company Code",dataIndex:"company_code",sorter:!0,key:"company_code",render:function(e){return l.a.createElement("div",null,e||"-")}},{title:"Employee Name",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("span",{style:{background:"#7FD4BA",color:"#fff",borderRadius:"50%",width:"35px",height:"35px"},className:"d-flex justify-content-center align-items-center"},Ed(e.first_name,e.last_name))),"".concat(e.first_name||""," ").concat(e.middle_name||""," ").concat(e.last_name||""))}},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",null,e?e.name:"-")}},{title:"Home Labor Group",dataIndex:"home_group",sorter:!0,render:function(e){return l.a.createElement("div",null,e?e.labor_group_name:"-")}},{title:"Phone Number",dataIndex:"phone",render:function(e){return l.a.createElement("div",null,e||"-")},sorter:!0},{title:"Email",dataIndex:"email",render:function(e){return l.a.createElement("div",null,e||"-")},sorter:!0}],e.fetchLaborGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.laborDate;a.ordering||(a.ordering="-modified"),e.setState({loading:!0}),zp(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({groups:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.laborDate;e.setState({loading:!0}),a.ordering||(a.ordering="id"),Bp(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({employees:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.tabChange=function(a){e.setState({key:a,search:"",pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:1,pageSize:15}),laborDate:{start:"",end:"",start_modified:"",end_modified:""}},(function(){switch(a){case"1":var t=[{title:"Labor",url:zm.dashboard.management.labor.self},{title:"Labor Groups",url:zm.dashboard.management.labor.self}];e.props.setBreadcrumb(t),e.fetchLaborGroups();break;case"2":var n=[{title:"Labor",url:zm.dashboard.management.labor.self},{title:"Employees",url:zm.dashboard.management.labor.self}];e.props.setBreadcrumb(n),e.fetchEmployees()}}))},e.onSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchLaborGroups()}))},e.onLaborSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchEmployees()}))},e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="-modified",e.fetchLaborGroups(c)},e.handleEmployeeTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="id",e.fetchEmployees(c)},e.getLocaleData=function(e){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.teams_labor_no_data_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},e?"No Employees":"No Labor Groups"))))},e.handleFilterLabor=function(a){a?e.setState({laborDate:Object(wu.a)(Object(wu.a)({},e.state.laborDate),a)},(function(){e.fetchLaborGroups()})):e.setState({laborDate:null},(function(){e.fetchLaborGroups()}))},e.handleFilterEmployee=function(a){a?e.setState({laborDate:Object(wu.a)(Object(wu.a)({},e.state.laborDate),a)},(function(){e.fetchEmployees()})):e.setState({laborDate:null},(function(){e.fetchEmployees()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Labor",url:zm.dashboard.management.labor.self},{title:"Labor Groups",url:zm.dashboard.management.labor.self}];this.props.setBreadcrumb(e),this.fetchLaborGroups(),this.tabChange(Md())}},{key:"render",value:function(){var e=this,a=this.state,t=a.loading,n=a.employees,c=a.groups,i=a.pagination;return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(vf.a,{onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",activeKey:this.state.key},l.a.createElement(kx,{tab:"Labor Groups",key:"1"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.labor.labor_group.create,buttonName:"+ Create Labor Group",onSearch:lu(this.onSearch,1e3),fetchData:function(a){return e.handleFilterLabor(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(UN,{checkLaborRequired:!0,data:c,loading:t,pagination:i,onTableChange:this.handleTableChange,rowLink:zm.dashboard.management.labor.labor_group.view,columns:this.laborColumns,locale:t?{emptyText:" "}:{emptyText:this.getLocaleData()}}))))),l.a.createElement(kx,{tab:"Employees",key:"2"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.labor.employee.create,buttonName:"+ Create Employee",onSearch:lu(this.onLaborSearch,1e3),fetchData:function(a){return e.handleFilterEmployee(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row vehicle-table-text-center width-160-id base-rate-center"},l.a.createElement(UN,{data:n,loading:t,pagination:i,onTableChange:this.handleEmployeeTableChange,rowLink:zm.dashboard.management.labor.employee.view,columns:this.employeeColumns,locale:t?{emptyText:" "}:{emptyText:this.getLocaleData(!0)}})))))))}}]),t}(n.Component),Ix=Object(Lm.b)(null,{setBreadcrumb:Uv})(jx),Ax=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={employees:[],view:!1,page:1,total:null,loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.employeeColumns=[{title:"EMPLOYEE ID",dataIndex:"id",sorter:"true",width:"30%"},{title:"EMPLOYEE NAME",dataIndex:"",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},e.first_name.split("")[0],e.last_name.split("")[0]),e.first_name,"\xa0",e.last_name)},width:"30%"},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,null===e||void 0===e?void 0:e.name))},width:"30%"},{title:"HOME LABOR GROUP",dataIndex:"home_group",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e&&e.labor_group_name))}},{title:"PHONE NUMBER",dataIndex:"phone",sorter:!0},{title:"Email",dataIndex:"email",sorter:!0,width:"30%"}],e.handleScroll=function(){window.innerHeight+window.scrollY>=document.documentElement.offsetHeight&&e.state.page<=Math.floor(e.state.total/e.state.pagination.pageSize)&&e.setState({page:e.state.page+1},(function(){return e.getEmployees()}))},e.getEmployees=function(){var a={page:e.state.page};Bp(Object(wu.a)(Object(wu.a)({},a),{},{page:(null===a||void 0===a?void 0:a.page)||e.state.page,group:e.props.match.params.id})).then((function(a){1===e.state.page?e.setState({employees:a.data.results,loading:!1}):e.setState((function(e){return{employees:[].concat(Object(Ou.a)(e.employees),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)}))},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Bp(Object(wu.a)(Object(wu.a)({},a),{},{page:(null===a||void 0===a?void 0:a.page)||e.state.page,group:e.props.match.params.id})).then((function(t){e.setState((function(e){return{employees:t.data.results,total:t.data.count,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.pagination),{},{current:(null===a||void 0===a?void 0:a.page)||1,total:t.data.count})}}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.handleChange=function(a){e.fetchEmployees({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchEmployees(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,a=this.state,t=a.employees,n=a.total;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 px-3 mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header "},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.fetchEmployees({search:a.target.value})},placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",n),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.labor_group.edit,{id:e.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")))),l.a.createElement("div",{className:"col-12"},t.length>0?this.state.view?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.employeeColumns,dataSource:t,size:"middle",pagination:this.state.pagination,loading:this.state.loading,onChange:this.handleChange,onRow:function(e){return{onClick:function(){e&&o.push(Object(Sf.a)(zm.dashboard.management.labor.employee.view,{id:e.id}))}}}})):l.a.createElement("div",{className:"row px-0 summary-collapse-inner-row-main"},t.map((function(e){return l.a.createElement("div",{className:"col-6 col-sm-6",onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.management.labor.employee.view,{id:e.id}))}},l.a.createElement("div",{className:"row mx-0 align-items-center position-relative user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},e.first_name.split("")[0],e.last_name.split("")[0])),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name))))))}))):l.a.createElement("div",{className:"row mx-0 mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.staff_icon_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Employees"))))))}}]),t}(n.Component),Dx=Object(r.withRouter)(Ax),Tx=t(703),Rx=fu.a.Panel,Mx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).handleCellChange=function(a,t,n){t[n]=a,e.props.handleChangeFields(t)},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){e.props.handleVisible(!0,a)}},"Delete"))},e.getTotalPrices=function(e){return{straight_time_total:(parseFloat(e.straight_time_health)+parseFloat(e.straight_time_benefits)+parseFloat(Od(.8,e.straight_time_multiplier*e.base_rate))+parseFloat(Od(7.65,e.straight_time_multiplier*e.base_rate))+parseFloat(Od(7,e.straight_time_multiplier*e.base_rate))+parseFloat(e.straight_time_multiplier*e.base_rate)||0).toFixed(2),over_time_total:(parseFloat(e.over_time_health)+parseFloat(e.over_time_benefits)+parseFloat(Od(.8,e.over_time_multiplier*e.base_rate))+parseFloat(Od(7.65,e.over_time_multiplier*e.base_rate))+parseFloat(Od(7,e.over_time_multiplier*e.base_rate))+parseFloat(e.over_time_multiplier*e.base_rate)||0).toFixed(2),double_time_total:(parseFloat(e.double_time_health)+parseFloat(e.double_time_benefits)+parseFloat(Od(.8,e.double_time_multiplier*e.base_rate))+parseFloat(Od(7.65,e.double_time_multiplier*e.base_rate))+parseFloat(Od(7,e.double_time_multiplier*e.base_rate))+parseFloat(e.double_time_multiplier*e.base_rate)||0).toFixed(2),off_shift_total:(parseFloat(e.off_shift_health)+parseFloat(e.off_shift_benefits)+parseFloat(Od(.8,e.off_shift_multiplier*e.base_rate))+parseFloat(Od(7.65,e.off_shift_multiplier*e.base_rate))+parseFloat(Od(7,e.off_shift_multiplier*e.base_rate))+parseFloat(e.off_shift_multiplier*e.base_rate)||0).toFixed(2),night_time_off_shift_total:(parseFloat(e.night_time_off_shift_health)+parseFloat(e.night_time_off_shift_benefits)+parseFloat(Od(.8,e.night_time_off_shift_multiplier*e.base_rate))+parseFloat(Od(7.65,e.night_time_off_shift_multiplier*e.base_rate))+parseFloat(Od(7,e.night_time_off_shift_multiplier*e.base_rate))+parseFloat(e.night_time_off_shift_multiplier*e.base_rate)||0).toFixed(2)}},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.labors,n=a.viewOnly;return t=t||[],l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-wage-info-main"},l.a.createElement("div",{className:"col-12 custom-table-change"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row custom-table-header"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Cost Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Multiplier")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"Base Rate")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Wc",l.a.createElement("br",null),l.a.createElement("small",null,"(7%)"))),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Er Taxes",l.a.createElement("br",null),l.a.createElement("small",null,"(7.65%)"))),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Suta/Futa",l.a.createElement("br",null),l.a.createElement("small",null,"(0.8%)"))),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Benefits")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Healthcare",l.a.createElement("br",null),l.a.createElement("small",null,"(Hourly)"))),l.a.createElement("div",{style:{width:"12.2%"},className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Per Hour Total")))),l.a.createElement("div",{className:"col-12 custom-table-body p-0"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:"0",expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"custom-table-collapse-main"},t.map((function(a,t){return l.a.createElement(Rx,Object(zv.a)({key:a.wage_type,header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:n?"wage-table-view custom-table-row custom-table-row-level-1 row mx-0 wage-collapse":"wage-table-edit custom-table-row custom-table-row-level-1 row mx-0 wage-collapse"},l.a.createElement("div",{className:"custom-table-cell-td wage-info-collapse-td wage-collapse-first-col"},l.a.createElement("div",null,a.wage_type)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 background-white-div justify-content-center d-flex"},l.a.createElement("div",{className:"px-3"},"7%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 background-white-div justify-content-center d-flex"},l.a.createElement("span",{className:"px-3"},"7.65%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 background-white-div justify-content-center d-flex"},l.a.createElement("span",{className:"px-3"},"0.8%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7 wage-info-collapse-td-second wage-collapse-col"}),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},!n&&l.a.createElement("div",{className:"px-3"},l.a.createElement(xu.a,{trigger:"click",overlay:e.menu(a),onClick:function(e){return e.stopPropagation()}},l.a.createElement("img",{src:Rm.eva_more_elisis,alt:"",className:"img-fluid"}))))))},"key",t),l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Straight Time")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{disabled:n,onChange:function(t){return e.handleCellChange(t,a,"straight_time_multiplier")},value:a.straight_time_multiplier,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd((a.straight_time_multiplier*a.base_rate).toFixed(2)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(7,a.straight_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd(Od(7.65,a.straight_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(.8,a.straight_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"straight_time_benefits")},value:a.straight_time_benefits,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"straight_time_health")},value:a.straight_time_health,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9 gray-2-color"},l.a.createElement("div",{className:"px-3"},xd(e.getTotalPrices(a).straight_time_total)))),l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Over Time")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{disabled:n,onChange:function(t){return e.handleCellChange(t,a,"over_time_multiplier")},value:a.over_time_multiplier,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd((a.over_time_multiplier*a.base_rate).toFixed(2)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(7,a.over_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd(Od(7.65,a.over_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(.8,a.over_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"over_time_benefits")},value:a.over_time_benefits,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"over_time_health")},value:a.over_time_health,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9 gray-2-color"},l.a.createElement("div",{className:"px-3"},xd(e.getTotalPrices(a).over_time_total)))),l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Double Time")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{disabled:n,onChange:function(t){return e.handleCellChange(t,a,"double_time_multiplier")},value:a.double_time_multiplier,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd((a.double_time_multiplier*a.base_rate).toFixed(2)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(7,a.double_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd(Od(7.65,a.double_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(.8,a.double_time_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"double_time_benefits")},value:a.double_time_benefits,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"double_time_health")},value:a.double_time_health,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9 gray-2-color"},l.a.createElement("div",{className:"px-3"},xd(e.getTotalPrices(a).double_time_total)))),l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Off Shift")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{disabled:n,onChange:function(t){return e.handleCellChange(t,a,"off_shift_multiplier")},value:a.off_shift_multiplier,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd((a.off_shift_multiplier*a.base_rate).toFixed(2)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(7,a.off_shift_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd(Od(7.65,a.off_shift_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(.8,a.off_shift_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"off_shift_benefits")},value:a.off_shift_benefits,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"off_shift_health")},value:a.off_shift_health,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9 gray-2-color"},l.a.createElement("div",{className:"px-3"},xd(e.getTotalPrices(a).off_shift_total)))),l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Night Time Off Shift")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{disabled:n,onChange:function(t){return e.handleCellChange(t,a,"night_time_off_shift_multiplier")},value:a.night_time_off_shift_multiplier,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd((a.night_time_off_shift_multiplier*a.base_rate).toFixed(2)||0))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(7,a.night_time_off_shift_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-end d-flex"},l.a.createElement("div",{className:"px-3"},xd(Od(7.65,a.night_time_off_shift_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 justify-content-end d-flex"},l.a.createElement("div",null,xd(Od(.8,a.night_time_off_shift_multiplier*a.base_rate)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"night_time_off_shift_benefits")},value:a.night_time_off_shift_benefits,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,disabled:n,precision:2,onChange:function(t){return e.handleCellChange(t,a,"night_time_off_shift_health")},value:a.night_time_off_shift_health,placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9 gray-2-color"},l.a.createElement("div",{className:"px-3"},xd(e.getTotalPrices(a).night_time_off_shift_total)))))})))))))))}}]),t}(n.Component),Fx=fu.a.Panel,Px=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={employees:[],view:!1},e.employeeColumns=[{title:"EMPLOYEE ID",dataIndex:"id",sorter:!0,width:"30%"},{title:"EMPLOYEE NAME",dataIndex:"",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},e.first_name.split("")[0],e.last_name.split("")[0]),e.first_name,"\xa0",e.last_name)},width:"30%"},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},null===e||void 0===e?void 0:e.name)},width:"30%"},{title:"HOME LABOR GROUP",dataIndex:"home_group",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e&&e.labor_group_name))},width:"30%"},{title:"PHONE NUMBER",dataIndex:"phone",sorter:!0,width:"30%"},{title:"Email",dataIndex:"email",sorter:!0}],e.fetchEmployees=function(a){Bp(Object(wu.a)(Object(wu.a)({},a),{},{group:e.props.match.params.id})).then((function(a){e.setState({employees:a.data.results,total:a.data.count})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchEmployees()}},{key:"render",value:function(){var e=this,a=this.props.group;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Fx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.labor_group.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Region"),l.a.createElement("h5",null,a.region.title)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"User Group Name"),l.a.createElement("h5",{className:"mb-0"},a.labor_group_name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Type"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},a.union_type.split("_").join(" ").toLowerCase())))),l.a.createElement(Fx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Wage Information"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.labor_group.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"row mt-3 mb-3"},l.a.createElement("div",{className:"col-12 col-sm-12 col-md-11 mx-auto"},l.a.createElement(Mx,{viewOnly:!0,labors:a.table_data})))),l.a.createElement(Fx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Employees"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.labor_group.edit,{id:e.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.fetchEmployees({search:a.target.value})},placeholder:"Search Employees"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",this.state.total),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))),l.a.createElement(Vm.a,{onClick:this.props.tabChange,className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),this.state.employees.length>0?this.state.view?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.employeeColumns,dataSource:this.state.employees,size:"middle",pagination:!1,onRow:function(e){return{onClick:function(){e&&o.push(Object(Sf.a)(zm.dashboard.management.labor.employee.view,{id:e.id}))}}}})):l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},this.state.employees.map((function(e){var a,t=null===(a=e.labors)||void 0===a?void 0:a.find((function(a){var t;return a.id===(null===(t=e.home_group)||void 0===t?void 0:t.id)}));return l.a.createElement("div",{className:"col-6 col-sm-6",onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.management.labor.employee.view,{id:e.id}))}},l.a.createElement("div",{className:"row mx-0 align-items-center position-relative user-info-div-main opportunity-info-div-main ".concat(t&&"active")},l.a.createElement("div",{className:"col-12 d-flex"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div d-flex align-items-center"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),t&&l.a.createElement("p",null,l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Home labor group"))))))}))):l.a.createElement("div",{className:"row mx-0 no-data-card-row mt-3 align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Labor_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Employees"))))))))))}}]),t}(n.Component),Vx=Object(r.withRouter)(Px),qx=vf.a.TabPane,Lx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={group:null,active:"1",requiredFields:!0},e.handleTabChange=function(a){e.setState({active:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&Hp(this.props.match.params.id).then((function(a){var t=[{title:"Labor",url:zm.dashboard.management.labor.self},{title:"Labor Groups",url:zm.dashboard.management.labor.self},{title:a.data.labor_group_name,url:"#"}];e.props.setBreadcrumb(t),e.setState({group:a.data},(function(){e.setState({requiredFields:Zd(e.state.group)})}))})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state.group;return a?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},this.state.requiredFields&&l.a.createElement("div",{className:"row mx-0 info-gray-div info-red-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please complete all required information to avoid issues")),l.a.createElement(vf.a,{activeKey:this.state.active,onChange:this.handleTabChange,className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(qx,{tab:"Summary",key:"1"},l.a.createElement(Vx,{tabChange:function(){return e.handleTabChange("2")},group:a})),l.a.createElement(qx,{tab:"Employees",key:"2"},l.a.createElement(Dx,{hideTitle:!0,group:a}))))))):l.a.createElement("div",{className:"main-content-div text-center"},l.a.createElement(Wv.a,null))}}]),t}(n.Component),Ux=Object(Lm.b)(null,{setBreadcrumb:Uv})(Lx),Bx=fu.a.Panel,Wx=(ku.a.Option,ku.a.OptGroup,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:[],files:[],employee:null,view:!1,loading:!1,pagination:{current:1,pageSize:15},laborGroup:[]},e.docsColumns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.laborGroupColumns=[{title:"LABOR GROUP NAME",dataIndex:"labor_group_name",sorter:!0,render:function(a,t){return l.a.createElement("div",{className:"d-flex align-items-center"},a,l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},t.id===e.state.employee.home_group.id?"(HOME LABOR GROUP)":""))}},{title:"TYPE",dataIndex:"union_type",sorter:!0},{title:"REGION",dataIndex:"region",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e.title))}},{title:"EMPLOYEE",dataIndex:"employee",sorter:!0},{title:"LAST ACTIVITY DATE",dataIndex:"modified",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},hd()(e).format("MMM DD YYYY hh:mm A"))}}],e.getFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Zp(Object(wu.a)(Object(wu.a)({},a),{},{employee:e.props.match.params.id})).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("employee",e.props.match.params.id),n.append("document",t),Xp(n).then((function(a){e.getFiles()})).catch((function(e){td(e)}))},e.fetchLaborGroups=function(a){zp(Object(wu.a)(Object(wu.a)({},a),{},{employee:e.props.match.params.id})).then((function(a){e.setState({laborGroup:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&(Wp(this.props.match.params.id).then((function(a){var t=[{title:"Labor",url:zm.dashboard.management.labor.self},{title:"Employee",url:zm.dashboard.management.labor.self},{title:"".concat(a.data.first_name," ").concat(a.data.last_name),url:"#"}];e.props.setBreadcrumb(t),e.setState({employee:a.data})})).catch((function(e){td(e)})),this.getFiles(),this.fetchLaborGroups())}},{key:"render",value:function(){var e=this,a=this.state.employee;return a?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Bx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.employee.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMPLOYEE ID"),l.a.createElement("h5",null,a.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"payroll ID"),l.a.createElement("h5",null,a.payroll_id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Company Code"),l.a.createElement("h5",null,a.company_code||"-"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mt-3"},l.a.createElement("h6",{className:"text-uppercase"},"FIRST NAME"),l.a.createElement("h5",{className:"mb-0"},a.first_name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mt-3"},l.a.createElement("h6",{className:"text-uppercase"},"Middle NAME"),l.a.createElement("h5",{className:"mb-0"},a.middle_name||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mt-3"},l.a.createElement("h6",{className:"text-uppercase"},"Last Name"),l.a.createElement("h5",{className:"mb-0"},a.last_name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mt-3"},l.a.createElement("h6",{className:"text-uppercase"},"Suffix"),l.a.createElement("h5",{className:"mb-0"},a.suffix||"-")))))))),l.a.createElement(Bx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address & Contact Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.employee.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("h5",{className:"mb-0"},"".concat(a.street||""," ").concat(a.apartment||""," ").concat(a.city||""," ").concat(a.state||""," ").concat(a.zip_code||""," ").concat(a.country||""))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("h5",{className:"mb-0"},a.email)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-2"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("h5",{className:"mb-0"},yd(a.phone))))))),l.a.createElement(Bx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Warehouse ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.employee.edit,{id:e.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"3"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},l.a.createElement("div",{className:"col-12"},a.internal_location?l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,a.internal_location.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(a.internal_location.street_address," ").concat(a.internal_location.city,"\n                                                                 ").concat(a.internal_location.state," ").concat(a.internal_location.zip," ").concat(a.internal_location.country))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},a.internal_location.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(a.internal_location.phone)))):l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center bg-transparent justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.location_gray}),l.a.createElement("h6",{className:"mb-0"},"No Warehouse")))))))),l.a.createElement(Bx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Wage Information"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.employee.edit,{id:e.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"4"},a.table_data?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Mx,{viewOnly:!0,labors:a.table_data||[]})))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center bg-transparent justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.billing_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Wage Information"))))),l.a.createElement(Bx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Labor Groups"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.employee.edit,{id:e.props.match.params.id}),editTab:"5"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"5"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(a){return e.fetchLaborGroups({search:a.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Total : ",this.state.laborGroup.length),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))),l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),this.state.laborGroup.length>0?this.state.view?l.a.createElement("div",{className:"col-12 table-responsive main-table-div mt-3"},l.a.createElement(fv.a,{className:" border-0 carpet-cleaning-table",columns:this.laborGroupColumns,dataSource:this.state.laborGroup,size:"middle",pagination:!0})):l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 summary-collapse-inner-row-main-scroll"},this.state.laborGroup.map((function(e){return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{className:a.home_group&&a.home_group.id===e.id?"row mx-0 align-items-center position-relative user-info-div-main  opportunity-info-div-main home-group-row-div-bg":"row mx-0 align-items-center position-relative user-info-div-main  opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div position-relative"},l.a.createElement("img",{src:a.home_group&&a.home_group.id===e.id?Rm.person_group_green_icon:Rm.person_group_black_icon,alt:"",className:"img-fluid black-icon-emp"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.labor_group_name),l.a.createElement("p",{className:"mb-0"},e.region.title))),a.home_group&&a.home_group.id===e.id?l.a.createElement("div",{className:"home-labor-group position-absolute home-labor-group-employee-view"},"Home Labor Group"):""))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Labor_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Labor Groups"))))),l.a.createElement(Bx,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents")),key:"6"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse ml-2 text-capitalize"},"+ Upload"))),l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("3")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:!0,loading:this.state.loading,className:"main-table-all",columns:this.docsColumns,dataSource:this.state.files,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," "))))))))))))):l.a.createElement("div",{className:"text-center my-4"},l.a.createElement(Wv.a,null))}}]),t}(n.Component)),Yx=Object(r.withRouter)(Object(Lm.b)(null,{setBreadcrumb:Uv})(Wx)),Kx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={labor:[],employee:[],laborGroup:[],view:!1},e.laborGroupColumns=[{title:"LABOR GROUP NAME",dataIndex:"labor_group_name",sorter:!0,render:function(a,t){return l.a.createElement("div",{className:"d-flex align-items-center"},a,l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},t.id===e.state.employee.home_group.id?"(HOME LABOR GROUP)":""))}},{title:"TYPE",dataIndex:"union_type",sorter:!0},{title:"REGION",dataIndex:"region",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e.title))}},{title:"EMPLOYEE",dataIndex:"employee",sorter:!0},{title:"LAST ACTIVITY DATE",dataIndex:"modified",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},hd()(e).format("MMM DD YYYY hh:mm A"))}}],e.fetchLaborGroups=function(a){zp(Object(wu.a)(Object(wu.a)({},a),{},{employee:e.props.match.params.id})).then((function(a){e.setState({laborGroup:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Wp(this.props.match.params.id).then((function(a){e.setState({labor:a.data.labors,employee:a.data})})).catch((function(e){td(e)})),this.fetchLaborGroups()}},{key:"render",value:function(){var e=this,a=this.state,t=a.employee;a.labor;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 pt-0 pb-0 summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header "},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(a){return e.fetchLaborGroups({search:a.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",this.state.laborGroup.length),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.employee.edit,{id:e.props.match.params.id}),editTab:"5"})},className:"edit-btn-summary ml-2"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},this.state.view?l.a.createElement("div",{className:"col-12 table-responsive main-table-div mt-3"},l.a.createElement(fv.a,{className:" border-0 carpet-cleaning-table",columns:this.laborGroupColumns,dataSource:this.state.laborGroup,size:"middle",pagination:!0})):this.state.laborGroup.map((function(e){var a;return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{className:"row mx-0 align-items-center position-relative user-info-div-main  opportunity-info-div-main ".concat((null===t||void 0===t||null===(a=t.home_group)||void 0===a?void 0:a.id)===(null===e||void 0===e?void 0:e.id)?"isActive":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div position-relative"},l.a.createElement("img",{src:t.home_group&&t.home_group.id===e.id?Rm.person_group_green_icon:Rm.person_group_black_icon,alt:"",className:"img-fluid black-icon-emp"}),l.a.createElement("img",{src:Rm.person_group_green_icon,alt:"",className:"img-fluid green-icon-emp position-absolute"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.labor_group_name),l.a.createElement("p",{className:"mb-0"},e.region.title))),t.home_group&&t.home_group.id===e.id?l.a.createElement("div",{className:"home-labor-group home-labor-group-2 text-capitalize position-absolute"},"Home Labor group"):""))})))))}}]),t}(n.Component),Gx=Object(r.withRouter)(Kx),zx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:[],files:[],loading:!1,pagination:{current:1,pageSize:15}},e.columns=[{title:"NAME",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"SIZE",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.docsData=[{key:"1",docs_name:"Mike",size:32,format:"10 Downing Street"},{key:"2",name:"John",age:42,address:"10 Downing Street"}],e.getFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Zp(Object(wu.a)(Object(wu.a)({},a),{},{employee:e.props.match.params.id})).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("employee",e.props.match.params.id),n.append("document",t),Xp(n).then((function(a){e.getFiles()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getFiles()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 summary-collapse-inner-row-main pb-0 pt-0"},l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header "},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.labor.employee.edit,{id:e.props.match.params.id}),editTab:"6"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),l.a.createElement("div",{className:"col-12 no-data-card-row-new"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main pb-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:!0,loading:this.state.loading,className:"main-table-all",columns:this.columns,dataSource:this.state.files,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_icon,alt:"cloud icon",style:{width:40}}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))))}}]),t}(n.Component),Hx=Object(r.withRouter)(zx),$x=vf.a.TabPane,Qx=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={tab:"1"},e.tabChange=function(a){e.setState({tab:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",onChange:this.tabChange,activeKey:this.state.tab},l.a.createElement($x,{tab:"Summary",key:"1"},l.a.createElement(Yx,{tabChange:this.tabChange})),l.a.createElement($x,{tab:"Labor Groups",key:"2"},l.a.createElement(Gx,null)),l.a.createElement($x,{tab:"Documents",key:"3"},l.a.createElement(Hx,{hideTitle:!0})))))))}}]),t}(n.Component),Jx=Object(Lm.b)(null,{setBreadcrumb:Uv})(Qx),Zx=ku.a.Option,Xx={labelCol:{span:24},wrapperCol:{span:24}},eC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={regions:[],buttonLoading:!1,fetching:!1},e.formRef=l.a.createRef(),e.fetchRegion=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ZE(a).then((function(a){e.setState({regions:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSubmit=function(a){e.props.group?Qp(e.props.group.id,a).then((function(a){e.props.setGroup(a.data,1),Mm.b.success("Labor Group updated successfully!"),e.setState({buttonLoading:!1})})).catch((function(e){td(e)})):$p(a).then((function(a){e.props.setGroup(a.data,1),e.props.handleAllFilled(a.data),Mm.b.success("Labor Group created successfully!"),e.setState({buttonLoading:!1})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.group!==e.group&&(this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.group),{},{region:this.props.group.region.id})),this.fetchRegion())}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.regions,c=a.buttonLoading,i={display:"block",height:"30px",lineHeight:"30px"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose a Region and input Labor Group Name."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},Xx,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"region",label:"Region *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,placeholder:"Search and Select Region",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchRegion()},onSearch:function(a){return e.fetchRegion({search:a})}},n.map((function(e){return l.a.createElement(Zx,{key:e.id,value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"labor_group_name",label:"Labor Group Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter here"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"union_type",label:"Type *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(vh.a.Group,null,l.a.createElement(vh.a,{style:i,value:"UNION"},"Union"),l.a.createElement(vh.a,{style:i,value:"NON_UNION"},"Non - Union")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:c,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),aC=Object(r.withRouter)(eC),tC=ku.a.Option,nC={labelCol:{span:24},wrapperCol:{span:24}},lC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={employees:[],fetchemployees:[],fetching:!1,selectedEmployee:[],visible:!1},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){e.handleVisible(!0,a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(a){var t=e.state.selectedEmployee.filter((function(e){return e.id!==a.id}));e.setState({selectedEmployee:t})},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Bp(a).then((function(a){e.setState({employees:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSelect=function(a){e.formRef.current.setFieldsValue({employee_labor:null});var t=Object(Ou.a)(e.state.selectedEmployee);if(!t.find((function(e){return e.id===a}))){var n=e.state.employees.find((function(e){return a===e.id}));t.push(n)}e.setState({selectedEmployee:t})},e.handleSubmit=function(a){a.employee_labor=e.state.selectedEmployee.map((function(e){return e.id})),Qp(e.props.group.id,a).then((function(a){e.props.setGroup(a.data,3),Mm.b.success("Labor Group updated successfully!")})).catch((function(e){td(e)}))},e.handleVisible=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,item:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.match.params.id){var a=this.props.group.employees_attached.map((function(e){return e.id}));Bp().then((function(t){e.setState({selectedEmployee:t.data.results.filter((function(e){return a.includes(e.id)})),employees:t.data.results}),e.formRef.current.setFieldsValue({employee_labor:null})})).catch((function(e){td(e)}))}}},{key:"render",value:function(){var e=this,a=this.state,t=a.employees,n=a.selectedEmployee,c=a.fetching;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all employees belonging to this group."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},nC,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement(Fm.a.Item,{name:"employee_labor",label:"Employees",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"custom-search-select",placeholder:"Search and Select Region",notFoundContent:c?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,showSearch:!0,onFocus:function(){return e.fetchEmployees()},onSearch:function(a){return e.fetchEmployees({search:a})},onChange:this.handleSelect},t.map((function(e){return l.a.createElement(tC,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row custom-tree-row-1"},l.a.createElement("div",{className:"common-select-option-row col-12 d-flex align-items-center"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("span",{style:{background:"#7FD4BA",color:"#fff",borderRadius:"50%",width:"35px",height:"35px"},className:"d-flex justify-content-center align-items-center"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block ml-1"},e.first_name," ",e.last_name)),l.a.createElement("div",{style:{display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Employee"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===n.length?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Labor_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Employees")))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},n.map((function(a){return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center position-relative user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-11 d-flex align-items-center"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle"},Ed(a.first_name,a.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(a.first_name," ").concat(a.middle_name?a.middle_name:""," ").concat(a.last_name)))),l.a.createElement("div",{className:"col-1 p-0"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.eva_more_elisis,alt:"",className:"img-fluid"}))))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(iv,{visible:this.state.visible,onClose:function(){return e.handleVisible(!1)},wageInfoDelete:!0,empDelete:!0,apprenticeCost:!0,removeItem:function(){e.handleRemove(e.state.item),e.handleVisible(!1)},heading:"Are you sure you want to remove this Employee?",subHeadingUOM:"If you choose to remove this employee, this might cause issues."}))}}]),t}(n.Component),cC=Object(r.withRouter)(lC),iC=ku.a.Option,rC={labelCol:{span:24},wrapperCol:{span:24}},sC=(n.Component,ku.a.Option),oC={labelCol:{span:24},wrapperCol:{span:24}},mC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={labors:[],employeeType:[],fetching:!1,item:null},e.formRef=l.a.createRef(),e.fetchEmployeeType=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ev(a).then((function(a){e.setState({employeeType:e.sortArr(a.data.results),fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.sortArr=function(e){for(var a=e,t={},n=["Operator","Tech","Apprentice 1","Apprentice 2","Apprentice 3","Apprentice 4"],l=0;l<n.length;l++)t[n[l]]=l;return a.sort((function(e,a){return t[e.title]-t[a.title]})),a},e.handleChangeFields=function(a){var t=e.state.labors.map((function(e){return e.id===a.id?a:e}));e.setState({labors:t})},e.handleRemove=function(a){e.setState((function(e){return{labors:e.labors.filter((function(e){return e.id!==a.id}))}}),(function(){return e.submitTable()}))},e.handleSubmit=function(a){var t={id:a.wage_type.value,wage_type:a.wage_type.label,base_rate:a.base_rate,straight_time_multiplier:1,straight_time_benefits:0,straight_time_health:0,over_time_multiplier:1.5,over_time_benefits:0,over_time_health:0,double_time_multiplier:2,double_time_benefits:0,double_time_health:0,off_shift_multiplier:2.3,off_shift_benefits:0,off_shift_health:0,night_time_off_shift_multiplier:3,night_time_off_shift_benefits:0,night_time_off_shift_health:0},n=[].concat(Object(Ou.a)(e.state.labors),[t]);e.setState({labors:e.sortArr(n)}),e.formRef.current.resetFields()},e.submitTable=function(){Qp(e.props.group.id,{table_data:e.state.labors}).then((function(a){e.props.setGroup(a.data,3),Mm.b.success("Labor Group updated successfully!")})).catch((function(e){td(e)}))},e.handleVisible=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,item:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.group.table_data&&this.setState({labors:this.props.group.table_data||[]})}},{key:"render",value:function(){var e=this,a=this.state,t=a.labors,n=a.employeeType,c=a.fetching;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose wage type, input base rate, then click \u2018Add\u2019 button to generate wage information."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},oC,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"wage_type",label:"Wage Type *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,labelInValue:!0,placeholder:"Select",notFoundContent:c?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchEmployeeType()},onSearch:function(a){return e.fetchEmployeeType({search:a})},suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},n.filter((function(e){return!t.some((function(a){return a.wage_type===e.title}))})).map((function(e){return l.a.createElement(sC,{key:e.id,value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row remove-arrow"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"base_rate",label:"Base Rate *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,placeholder:"$0.00"}))))),l.a.createElement("div",{className:"col-12 validate-div-col mt-0 text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Add"))),0===t.length?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.billing_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"Added costs will show up here")))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Mx,{handleVisible:this.handleVisible,handleChangeFields:this.handleChangeFields,labors:t}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{disabled:0===t.length,onClick:this.submitTable,className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(iv,{visible:this.state.visible,onClose:function(){return e.handleVisible(!1)},wageInfoDelete:!0,removeItem:function(){e.handleRemove(e.state.item),e.handleVisible(!1)},heading:"Are you sure you want to delete this Wage Information?",subHeadingUOM:"If you choose to delete this Wage Information, and if this Wage Information is included in service variants, this might cause issues."}))}}]),t}(n.Component),dC=fu.a.Panel;var uC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={group:null,activeKey:["1"],visible:!1,visibleWarning:!1,lastActive:1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.setGroup=function(a,t){var n=null;if(e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n)return null;e.setState((function(t){for(var n="",l=0;l<=e.state.activeKey.length;l++)l==e.state.activeKey.length&&(n=l.toString());return{group:a,activeKey:[].concat(Object(Ou.a)(t.activeKey),Object(Ou.a)(_d(n,"4")))}}))},e.handleAllFilled=function(a){a&&e.setState({requiredSuccessModalVisible:!0})},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.group;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.labor.labor_group.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Labor Group",url:zm.dashboard.management.labor.labor_group.create}],t=[{title:"Edit Labor Group",url:zm.dashboard.management.labor.labor_group.edit}];this.props.setBreadcrumb(this.props.match.params.id?t:a),this.props.match.params.id&&Hp(this.props.match.params.id).then((function(a){e.setState({group:a.data}),e.setState({activeKey:e.props.location.editTab||"1"})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.group,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:n,onChange:this.collapseOnChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(dC,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(aC,{group:t,setGroup:this.setGroup,handleAllFilled:this.handleAllFilled})),l.a.createElement(dC,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Wage Information"))),key:"2"},l.a.createElement(mC,{group:t,setGroup:this.setGroup})),l.a.createElement(dC,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Employees"))),key:"3"},l.a.createElement(cC,{group:t,setGroup:this.setGroup}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.labor.labor_group.view,{id:t.id})):e.handleViewMainButtonCLick()},disabled:!t,type:"primary"},"View Labor Group"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Labor Group!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.labor.labor_group.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Labor Group"),"."," "),okTitle:"View Labor Group",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.labor.labor_group.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Labor Group?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the labor group, select View laborGroup.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View laborGroup",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.labor.labor_group.view,{id:t.id}))}}))}}]),t}(n.Component),pC=Object(r.withRouter)(Object(Lm.b)(null,{setBreadcrumb:Uv})(uC)),vC={labelCol:{span:24},wrapperCol:{span:24}},hC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleSubmit=function(a){e.props.employee?Kp(e.props.employee.id,a).then((function(a){Mm.b.success("Employee Updated successfully!"),e.props.setEmployee(a.data,2)})).catch((function(e){td(e)})):Yp(a).then((function(a){Mm.b.success("Employee Created successfully!"),e.props.setEmployee(a.data,2)})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){e.employee!==this.props.employee&&this.formRef.current.setFieldsValue(Object(wu.a)({},this.props.employee))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input employee\u2019s general information."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},vC,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"first_name",label:"First Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"John"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"middle_name",label:"Middle Name",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Nicholas"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"last_name",label:"Last Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Doe"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"suffix",label:"Suffix",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:"JR"},"Jr"),l.a.createElement(ku.a.Option,{value:"SR"},"Sr"),l.a.createElement(ku.a.Option,{value:"I"},"I"),l.a.createElement(ku.a.Option,{value:"II"},"II"),l.a.createElement(ku.a.Option,{value:"III"},"III")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"payroll_id",label:"Payroll ID *",rules:[{required:!0,message:""}]},l.a.createElement(Pm.a,{placeholder:"Input"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"company_code",label:"Company Code ",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Company Code"}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),fC=Object(r.withRouter)(hC),EC={labelCol:{span:24},wrapperCol:{span:24}},gC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={county:[],updateMainState:null},e.formRef=l.a.createRef(),e.handleSubmit=function(a){Kp(e.props.employee.id,a).then((function(a){Mm.b.success("Employee Updated successfully!"),e.props.setEmployee(a.data,3)})).catch((function(e){td(e)}))},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.employee&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.employee),{},{country:this.props.employee.country?this.props.employee.country:"United States"})),Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(a){td(a),e.setState({load:!1})}))}},{key:"render",value:function(){var e=this.state,a=e.county,t=e.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input employee\u2019s address, phone number, email, and payroll ID."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit,hideRequiredMark:!0},EC,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 border-rit-div"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h4",null,"Main Address")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc",rules:[{required:!1}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(a,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},"                              ",Object(lp.uniqBy)(Object(lp.orderBy)(t,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)}))))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement("h4",null,"Contact Information")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{className:"number-arrow-none",name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,"")},parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number",maxLength:"22"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"},{type:"email",message:"Provide valid email!"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),bC=ku.a.Option,NC={labelCol:{span:24},wrapperCol:{span:24}},yC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={labors:[],employeeType:[],fetching:!1,visible:!1,item:null},e.formRef=l.a.createRef(),e.fetchEmployeeType=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ev(a).then((function(a){e.setState({employeeType:e.sortArr(a.data.results),fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.sortArr=function(e){for(var a=e,t={},n=["Operator","Tech","Apprentice 1","Apprentice 2","Apprentice 3","Apprentice 4"],l=0;l<n.length;l++)t[n[l]]=l;return a.sort((function(e,a){return t[e.title]-t[a.title]})),a},e.handleChangeFields=function(a){var t=e.state.labors.map((function(e){return e.id===a.id?a:e}));e.setState({labors:t})},e.handleRemove=function(a){e.setState((function(e){return{labors:e.labors.filter((function(e){return e.id!==a.id}))}}),(function(){return e.submitTable()}))},e.handleSubmit=function(a){var t={id:a.wage_type.value,wage_type:a.wage_type.label,base_rate:a.base_rate,straight_time_multiplier:1,straight_time_benefits:0,straight_time_health:0,over_time_multiplier:1.5,over_time_benefits:0,over_time_health:0,double_time_multiplier:2,double_time_benefits:0,double_time_health:0,off_shift_multiplier:2.3,off_shift_benefits:0,off_shift_health:0,night_time_off_shift_multiplier:3,night_time_off_shift_benefits:0,night_time_off_shift_health:0};e.setState((function(e){return{labors:[].concat(Object(Ou.a)(e.labors),[t])}})),e.formRef.current.resetFields()},e.submitTable=function(){Kp(e.props.employee.id,{table_data:e.state.labors}).then((function(a){e.props.setEmployee(a.data,5),Mm.b.success("Employee updated successfully!")})).catch((function(e){td(e)}))},e.handleVisible=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,item:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.employee.table_data&&this.setState({labors:this.props.employee.table_data||[]})}},{key:"render",value:function(){var e=this,a=this.state,t=a.labors,n=a.employeeType,c=a.fetching;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose wage type, input base rate, then click \u2018Add\u2019 button to generate wage information."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},NC,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"wage_type",label:"Wage Type *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,labelInValue:!0,placeholder:"Select",notFoundContent:c?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchEmployeeType()},onSearch:function(a){return e.fetchEmployeeType({search:a})},suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},n.filter((function(e){return!t.some((function(a){return a.wage_type===e.title}))})).map((function(e){return l.a.createElement(bC,{key:e.id,value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"base_rate",label:"Base Rate here *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:xd,parser:Cd,placeholder:"$0.00"}))))),l.a.createElement("div",{className:"col-12 validate-div-col mt-0 text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Add"))),0===t.length?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.billing_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"Added costs will show up here")))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Mx,{handleVisible:this.handleVisible,handleChangeFields:this.handleChangeFields,labors:t}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{disabled:0===t.length,onClick:this.submitTable,className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(iv,{visible:this.state.visible,onClose:function(){return e.handleVisible(!1)},wageInfoDelete:!0,removeItem:function(){e.handleRemove(e.state.item),e.handleVisible(!1)},heading:"Are you sure you want to delete this Wage Information?",subHeadingUOM:"If you choose to delete this Wage Information, and if this Wage Information is included in service variants, this might cause issues."}))}}]),t}(n.Component),wC=ku.a.Option,_C={labelCol:{span:24},wrapperCol:{span:24}},SC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={id:null,groups:[],selectedGroups:[],selectedEmployeeGroups:[],value:0,fetching:!1,currentEmployee:[],isChecked:!1,checkData:null,warningVisible:!1,itemToBeDltd:null},e.formRef=l.a.createRef(),e.onChange=function(a){e.setState({value:a.target.value})},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarning(!0,a)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(){var a,t,n,l=e.state.itemToBeDltd,c=e.state.selectedGroups.filter((function(e){return e.id!==l.id}));(e.setState({selectedGroups:c}),null===(a=e.props.employee)||void 0===a?void 0:a.home_group)&&((null===l||void 0===l?void 0:l.id)===(null===(t=e.state.currentEmployee)||void 0===t||null===(n=t.home_group)||void 0===n?void 0:n.id)&&e.setState({checkData:null}))},e.fetchGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),zp(a).then((function(a){e.setState({groups:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSelect=function(a){e.formRef.current.setFieldsValue({employee_labor:null});e.setState((function(t){return{selectedGroups:[].concat(Object(Ou.a)(t.selectedGroups),Object(Ou.a)(e.state.selectedGroups.find((function(e){return e.id===a}))?[]:e.state.groups.filter((function(e){return a===e.id}))))}}))},e.handleSubmit=function(a){a.employee_labor=e.state.selectedGroups.map((function(e){return e.id})),a.home_group=e.state.checkData,Kp(e.props.employee.id,a).then((function(a){e.props.setEmployee(a.data,6),Mm.b.success("Employee updated successfully!")})).catch((function(e){td(e)}))},e.checkboxchange=function(a,t){e.state.isChecked==t?e.setState({checkData:null}):e.setState({isChecked:t,checkData:t})},e.showWarning=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({warningVisible:a,itemToBeDltd:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.match.params.id){this.fetchGroups();var a=this.props.employee.labors.map((function(e){return e.id}));if(zp().then((function(t){e.setState({selectedGroups:t.data.results.filter((function(e){return a.includes(e.id)})),groups:t.data.results})})).catch((function(e){})),this.props.employee.home_group){var t=this.props.employee.home_group.id;this.setState({checkData:t})}}}},{key:"render",value:function(){var e=this,a=this.state,t=a.buttonLoading,n=a.fetching,c=a.groups,i=(a.value,a.selectedGroups);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all labor groups this employee belongs to."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},_C,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement(Fm.a.Item,{name:"employee_labor",label:"Labor groups *",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ku.a,{className:"custom-search-select",dropdownClassName:"custom-search-select",placeholder:"Search",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,showSearch:!0,onFocus:function(){return e.fetchGroups()},onSearch:function(a){return e.fetchGroups({search:a})},onChange:this.handleSelect},c.map((function(e){return l.a.createElement(wC,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row custom-tree-row-1"},l.a.createElement("div",{className:"common-select-option-row col-12 d-flex align-items-center"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("img",{style:{height:"30px"},src:Rm.person_group_green_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block"},e.labor_group_name)),l.a.createElement("div",{style:{paddingTop:"15px",display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Labor Group"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Labor_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Labor groups")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"home_group",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},i.map((function(a){var t;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center position-relative user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-11"},l.a.createElement("div",{className:"user-icons-div position-relative"},l.a.createElement("img",{src:Rm.person_group_black_icon,alt:"",className:"img-fluid black-icon-emp"}),l.a.createElement("img",{src:Rm.person_group_green_icon,alt:"",className:"img-fluid green-icon-emp position-absolute"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,a.labor_group_name),l.a.createElement("p",{className:"mb-0"},null===(t=a.region)||void 0===t?void 0:t.title))),l.a.createElement("div",{className:"col-1 p-0"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.eva_more_elisis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-6 col-sm-6 d-flex align-items-center"},l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{name:"myCheckbox",checked:e.state.checkData==a.id,onChange:function(t){return e.checkboxchange(t,a.id)}},"Home Labor Group"," "))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:t,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(iv,{heading:"Are you sure you want to remove this Labor Group?",subHeadingUOM:"If you choose to remove this Labor Group, and you already have service variants set up, this might cause issues.",visible:this.state.warningVisible,onClose:function(){return e.showWarning(!1)},laborGroupModal:!0,resourceWarning:!0,commonFunc:function(){e.handleRemove(),e.showWarning(!1)}}))}}]),t}(n.Component),xC=Object(r.withRouter)(SC),CC={labelCol:{span:24},wrapperCol:{span:24}},OC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[],loading:!1},e.docsColumns=[{title:"Name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},Nd(e)," ")}},{title:l.a.createElement("div",{className:"position-relative"},"FORMAT"),dataIndex:"format",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},".",e)}}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("employee",e.props.employee.id),n.append("document",t),Xp(n).then((function(a){e.fetchFiles()})).catch((function(e){td(e)}))},e.fetchFiles=function(){Zp({employee:e.props.employee.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?this.fetchFiles(this.props.match.params.id):this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},CC,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.state.files.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.docsColumns,dataSource:this.state.files,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.loading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),kC=Object(r.withRouter)(OC),jC={labelCol:{span:24},wrapperCol:{span:24}},IC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={warningVisible:!1,county:[],updateMainState:null},e.formRef=l.a.createRef(),e.showWarning=function(a){e.setState({warningVisible:a})},e.onSubmit=function(a){if(e.props.editData){var t=Object(wu.a)(Object(wu.a)({},a),{},{type:Ld});tv(e.props.editData.id,t).then((function(a){Mm.b.success("Internal Location Updated Successfully"),e.props.callbackContact&&e.props.callbackContact(a.data),e.formRef.current.resetFields()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}else{nv(Object(wu.a)(Object(wu.a)({},a),{},{type:Ld})).then((function(a){Mm.b.success("Internal Location Created Successfully"),e.props.callbackContact&&e.props.callbackContact(a.data),e.formRef.current.resetFields()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}e.props.onClose()},e.populateData=function(){var a;e.props.editData?e.formRef.current.setFieldsValue(Object(wu.a)({},e.props.editData)):(null===(a=e.formRef)||void 0===a?void 0:a.current)&&e.formRef.current.setFieldsValue({country:"United States"})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data}),e.setState({updateBillingState:a.data})})).catch((function(a){td(a),e.setState({load:!1})}))}},{key:"render",value:function(){var e=this,a=(this.props.editData,this.state),t=a.county,n=a.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,closable:!0,destroyOnClose:!0,title:"Create Warehouse",visible:this.props.visible,onClose:this.props.onClose,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.showWarning(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){e.formRef.current.submit()},type:"primary"},"".concat(this.props.editData?"Update":"Create")))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit},jC,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Warehouse Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Warehouse Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(n,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"zip",label:"Zip/Postal Code",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")},parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"})))))))),l.a.createElement(iv,{heading:"Are you sure you want to exit creating this Warehouse?",subHeadingUOM:"If you choose to exit, none of the progress you have made will be saved.",visible:this.state.warningVisible,onClose:function(){return e.showWarning(!1)},commonInternalLocationPopup:!0,showWarningModal2:function(){e.showWarning(!1),e.props.onClose()}}))}}]),t}(n.Component),AC=Object(r.withRouter)(IC),DC=ku.a.Option,TC={labelCol:{span:24},wrapperCol:{span:24}},RC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={contacts:[],selectedContacts:[],fetching:!1,visible:!1,warningVisible:!1},e.formRef=l.a.createRef(),e.showWarningModal=function(a){e.setState({warningVisible:a})},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(){e.setState({selectedContacts:[]},(function(){e.formRef.current.setFieldsValue({internal_location:null})}))},e.fetchContacts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(wu.a)({},a);av(t).then((function(a){e.setState({contacts:a.data.results})})).catch((function(e){}))},e.callbackContact=function(a){e.setState({selectedContacts:[a]}),e.fetchContacts()},e.handleSelect=function(a){e.formRef.current.setFieldsValue({internal_location:null});var t=e.state.contacts.filter((function(e){return e.id==a}));e.setState({selectedContacts:t})},e.handleSubmit=function(a){var t,n={type:Ld,internal_location:(null===(t=e.state.selectedContacts[0])||void 0===t?void 0:t.id)||null};Kp(e.props.employee.id,n).then((function(a){e.props.setEmployee(a.data,4),e.props.fetchEmployee(),Mm.b.success("Employee updated successfully!")})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.showContact=function(){e.setState({visible:!1})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&av({employee_id:this.props.match.params.id,type:Ld}).then((function(a){e.setState({selectedContacts:a.data.results}),e.formRef.current.setFieldsValue({internal_location:null})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.contacts,c=a.selectedContacts;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can only choose one warehouse per employee."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,hideRequiredMark:!0,ref:this.formRef},TC,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"internal_location",label:"Warehouse * ",rules:[{required:!1}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{className:"custom-search-select",dropdownClassName:"custom-search-select",placeholder:"Search ",showSearch:!0,notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,disabled:c.length>0,onFocus:function(){return e.fetchContacts()},onSearch:function(a){return e.fetchContacts({search:a})},onChange:this.handleSelect},n.map((function(e){return l.a.createElement(DC,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name,l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.street_address||"",", ",e.city||"",","," ",e.state||"",",",e.zip||""," ",e.country||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Warehouse")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute disabledBtnStyle",onClick:function(){e.setState({visible:!0})},disabled:c.length>0},"+ Create"))),0===c.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row add-site-blank-row align-items-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"color-gray-3"},"No Warehouse")))),c.map((function(a){return l.a.createElement("div",{className:"col-12",key:a.id},l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(a.street_address," ").concat(a.name," ").concat(a.city," ").concat(a.state," ").concat(a.country))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},a.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(a.phone))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))})),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))),l.a.createElement(AC,{callbackContact:this.callbackContact,fetchContacts:this.fetchContacts,visible:this.state.visible,onClose:function(a){return e.showContact(!1,a)}}),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to remove this Warehouse?",subHeadingUOM:"If you choose to remove this Warehouse, this might cause issues.",common:!0,commonFunc:function(){e.handleRemove(),e.showWarningModal(!1)}}))}}]),t}(n.Component),MC=Object(r.withRouter)(RC),FC=fu.a.Panel,PC=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={employee:null,activeKey:["1"],visible:!1,visibleWarning:!1,unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.setEmployee=function(a,t){var n,l=null===(n=e.state)||void 0===n?void 0:n.employee;(null===l||void 0===l?void 0:l.first_name)&&(null===l||void 0===l?void 0:l.last_name)?a.street&&a.zip_code&&a.phone&&a.email&&a.payroll_id&&a.internal_location?(e.setState((function(){return{employee:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{employee:a}})):e.setState((function(){return{employee:a,unsavedExit:!0}}));var c=null;if(e.state.activeKey.length>1&&(c=e.state.activeKey.find((function(e){return e==t}))),c)return null;e.setState((function(e){return{employee:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.fetchEmployee=function(){Wp(e.props.match.params.id||e.state.employee.id).then((function(a){e.setState({employee:a.data},(function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.employee;(null===t||void 0===t?void 0:t.first_name)&&(null===t||void 0===t?void 0:t.last_name)&&(e.props.match.params.id||(t.street&&t.zip_code&&t.phone&&t.email&&t.payroll_id&&t.internal_location?e.setState((function(){return{employee:t,unsavedExit:!1}})):e.setState((function(){return{employee:t,unsavedExit:!0}}))))}))})).catch((function(e){td(e)}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.employee;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.labor.employee.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Employee",url:zm.dashboard.management.labor.employee.create}],t=[{title:"Edit Employee",url:zm.dashboard.management.labor.employee.edit}];this.props.setBreadcrumb(this.props.match.params.id?t:a),this.props.match.params.id&&Wp(this.props.match.params.id).then((function(a){e.setState({employee:a.data}),e.setState({activeKey:e.props.location.editTab||"1"})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.employee,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:n,onChange:this.collapseOnChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(FC,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information *"))),key:"1"},l.a.createElement(fC,{employee:t,setEmployee:this.setEmployee})),l.a.createElement(FC,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Address & Contact Information ",l.a.createElement("sup",null,"*")))),key:"2"},l.a.createElement(gC,{employee:t,setEmployee:this.setEmployee})),l.a.createElement(FC,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Warehouse ",l.a.createElement("sup",null,"*")))),key:"3"},l.a.createElement(MC,{employee:t,setEmployee:this.setEmployee,fetchEmployee:this.fetchEmployee})),l.a.createElement(FC,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Wage Information"))),key:"4"},l.a.createElement(yC,{employee:t,setEmployee:this.setEmployee,fetchEmployee:this.fetchEmployee})),l.a.createElement(FC,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"labor Groups"))),key:"5"},l.a.createElement(xC,{employee:t,setEmployee:this.setEmployee})),l.a.createElement(FC,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"6"},l.a.createElement(kC,{employee:t,setEmployee:this.setEmployee}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.labor.employee.view,{id:t.id})):e.handleViewMainButtonCLick()},disabled:!t,type:"primary"},"View Employee"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Employee!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.labor.employee.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Employee"),"."," "),okTitle:"View Employee",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.labor.employee.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Employee?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Opportunity, select View Opportunity.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View Employee",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.labor.employee.view,{id:t.id}))}}))}}]),t}(n.Component),VC=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(PC));function qC(e){return od(ad("inventory.inventory_package"),e)}function LC(e,a){return md(ad("inventory.inventory_package",{id:e}),a)}function UC(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("inventory.inventory_package",{id:e});return id(t,a)}function BC(e){return od(ad("inventory.inventory_package_item"),e)}function WC(e){return dd(ad("inventory.inventory_package_item",{id:e}))}function YC(e,a){return md(ad("inventory.inventory_package_item",{id:e}),a)}function KC(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("inventory.inventory_package_item",{id:e});return id(t,a)}function GC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("inventory.inventory_package_item");return id(a,e)}function zC(e,a){return md(ad("inventory.inventory",{id:e}),a)}function HC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("inventory.inventory");return id(a,e)}function $C(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("inventory.inventory",{id:e});return id(t,a)}function QC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("inventory.inventory_kit");return id(a,e)}function JC(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("inventory.inventory_kit",{id:e});return id(t,a)}function ZC(e){return od(ad("inventory.inventory_kit"),e)}function XC(e,a){return md(ad("inventory.inventory_kit",{id:e}),a)}function eO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("inventory.inventory_kit_item");return id(a,e)}function aO(e){return od(ad("inventory.inventory_kit_item"),e)}function tO(e,a){return md(ad("inventory.inventory_kit_item",{id:e}),a)}function nO(e){return dd(ad("inventory.inventory_kit_item",{id:e}))}function lO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("inventory.family");return id(a,e)}function cO(e){return id(ad("inventory.family",{id:e}))}function iO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("inventory.inventory");return id(a,e)}function rO(e){return od(ad("inventory.inventory"),e)}function sO(e){return id(ad("inventory.inventory_location"),e)}function oO(e){return od(ad("inventory.inventory_location"),e)}function mO(e,a){return md(ad("inventory.measurement_qty",{id:e}),a)}function dO(e){return dd(ad("inventory.measurement_qty",{id:e}))}function uO(e){return id(ad("inventory.inventory_vendor"),e)}function pO(e){return od(ad("inventory.inventory_vendor"),e)}function vO(e,a){return md(ad("inventory.measurement_vendor_qty",{id:e}),a)}function hO(e){return dd(ad("inventory.measurement_vendor_qty",{id:e}))}function fO(e){return od(ad("inventory.inventory_document"),e)}function EO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("inventory.inventory_document");return id(a,e)}var gO=vf.a.TabPane,bO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={packages:[{key:1,name:"",parent:""},{key:2,name:"",parent:""}],inventories:[],disInvFamilies:[],kits:[],key:"1",loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},dateFilter:{start:"",end:"",start_modified:"",end_modified:""},disposalInventory:[]},e.columns=[{title:"Inventory family Name",dataIndex:"name",sorter:!0,key:"name"},{title:"Inventory Items",dataIndex:"parent",render:function(e){return l.a.createElement("div",null,e&&e.children.length||"0")}}],e.disposalInventoryFamilyColumns=[{title:"Disposal Inventory Family Name",dataIndex:"name",sorter:!0,key:"name"},{title:"Disposal Items",dataIndex:"parent",render:function(e){return l.a.createElement("div",null,e&&e.children.length||"0")},sorter:!0}],e.inventoryItemsColumns=[{title:"Inventory Id",dataIndex:"id",sorter:!0,key:"id"},{title:"Inventory Name",sorter:!0,key:"name",render:function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.name),Jd(e)&&l.a.createElement("p",{className:"red-text-disposal"},"Please complete all required information to avoid issues"))}},{title:"Inventory Family/Tier",render:function(e){var a;return l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},null===e||void 0===e||null===(a=e.breadcrumb)||void 0===a?void 0:a.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:e.name},l.a.createElement(qm.a,null,e.name)))}},{title:"Cost",render:function(e){var a,t;return l.a.createElement("div",null,"$",(null===e||void 0===e?void 0:e.unit_cost)||0,(null===e||void 0===e||null===(a=e.uom)||void 0===a?void 0:a.symbol)&&"/",null===e||void 0===e||null===(t=e.uom)||void 0===t?void 0:t.symbol)}},{title:"Quantity per Warehouse",sorter:!1,render:function(e){var a,t,n,c,i,r,s,o,m,d,u,p,v,h,f;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"mb-0 list-inline qty-location-ul"},l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(a=e.internal_location[0])||void 0===a||null===(t=a.internal_location)||void 0===t?void 0:t.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(n=e.internal_location[0])||void 0===n?void 0:n.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(c=e.internal_location[0])||void 0===c?void 0:c.qty)&&(null===e||void 0===e||null===(i=e.inventory_uom)||void 0===i?void 0:i.symbol))),l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(r=e.internal_location[1])||void 0===r||null===(s=r.internal_location)||void 0===s?void 0:s.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(o=e.internal_location[1])||void 0===o?void 0:o.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(m=e.internal_location[1])||void 0===m?void 0:m.qty)&&(null===e||void 0===e||null===(d=e.inventory_uom)||void 0===d?void 0:d.symbol))),l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(u=e.internal_location[2])||void 0===u||null===(p=u.internal_location)||void 0===p?void 0:p.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(v=e.internal_location[2])||void 0===v?void 0:v.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location)&&(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(h=e.internal_location[2])||void 0===h?void 0:h.qty)&&(null===e||void 0===e||null===(f=e.inventory_uom)||void 0===f?void 0:f.symbol))))))}}],e.inventoryKitColumns=[{title:"Inventory Kit name",dataIndex:"name",sorter:!0,key:"name",render:function(e){return l.a.createElement("div",{className:"font-weight-bold"},e)}},{title:"Items",dataIndex:"items",sorter:!0}],e.disposalInventoryColumns=[{title:"Disposal ID",dataIndex:"id",sorter:!0,key:"id"},{title:"Disposal Name",dataIndex:"name",sorter:!0,key:"name"},{title:"Disposal Family / Tier",render:function(e){return l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:e.name},l.a.createElement(qm.a,null,e.name)))}},{title:"Cost",sorter:!0,key:"cost",render:function(e){var a,t;return l.a.createElement("div",null,"$",(null===e||void 0===e?void 0:e.unit_cost)||0,(null===e||void 0===e||null===(a=e.uom)||void 0===a?void 0:a.symbol)&&"/",null===e||void 0===e||null===(t=e.uom)||void 0===t?void 0:t.symbol)}},{title:"Quantity per Warehouse",sorter:!1,render:function(e){var a,t,n,c,i,r,s,o,m,d,u,p,v,h,f;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"mb-0 list-inline qty-location-ul"},l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(a=e.internal_location[0])||void 0===a||null===(t=a.internal_location)||void 0===t?void 0:t.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(n=e.internal_location[0])||void 0===n?void 0:n.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(c=e.internal_location[0])||void 0===c?void 0:c.qty)&&(null===e||void 0===e||null===(i=e.disposal_uom)||void 0===i?void 0:i.symbol))),l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(r=e.internal_location[1])||void 0===r||null===(s=r.internal_location)||void 0===s?void 0:s.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(o=e.internal_location[1])||void 0===o?void 0:o.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(m=e.internal_location[1])||void 0===m?void 0:m.qty)&&(null===e||void 0===e||null===(d=e.disposal_uom)||void 0===d?void 0:d.symbol))),l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(u=e.internal_location[2])||void 0===u||null===(p=u.internal_location)||void 0===p?void 0:p.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(v=e.internal_location[2])||void 0===v?void 0:v.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(h=e.internal_location[2])||void 0===h?void 0:h.qty)&&(null===e||void 0===e||null===(f=e.disposal_uom)||void 0===f?void 0:f.symbol))))))}}],e.fetchAllPackages=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),lO(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({packages:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.state.search;e.setState({loading:!0}),GC(a).then((function(t){e.setState({groups:t.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e})),pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllInventories=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),a.tier_type="INVENTORY_ITEM",iO(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({inventories:t.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e})),pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllInventoryKits=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),QC(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({kits:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllDisposalInventories=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),a.tier_type="DISPOSAL",a.is_inventory="True",Cg(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({disposalInventory:t.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e})),pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.onSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllPackages()}))},e.onGroupSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllGroups()}))},e.onKitSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllInventoryKits()}))},e.onItemSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllInventories()}))},e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllPackages(c)},e.handleTableChangeInventoryGroups=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllGroups(c)},e.handleTableChangeInventory=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllInventories(c)},e.handleTableChangeInventoryKit=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllInventoryKits(c)},e.handleDisInvTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllDisposalInventories(c)},e.handleDisInvFamTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllFamily(c)},e.tabChange=function(a){e.setState({key:a,search:"",dateFilter:{start:"",end:"",start_modified:"",end_modified:""},pagination:{current:1,pageSize:10}},(function(){switch(a){case"1":var t=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Inventory Families",url:zm.dashboard.management.inventory.self}];return e.props.setBreadcrumb(t),void e.fetchAllPackages();case"2":var n=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Inventory Items",url:zm.dashboard.management.inventory.self}];return e.props.setBreadcrumb(n),void e.fetchAllInventories();case"3":var l=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Inventory Kits",url:zm.dashboard.management.inventory.self}];return e.props.setBreadcrumb(l),void e.fetchAllInventoryKits();case"4":var c=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Disposal Inventory Families",url:zm.dashboard.management.inventory.self}];return e.props.setBreadcrumb(c),void e.fetchAllFamily();case"5":var i=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Disposal Inventory",url:zm.dashboard.management.inventory.self}];return e.props.setBreadcrumb(i),void e.fetchAllDisposalInventories()}}))},e.fetchAllFamily=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),_g(Object(wu.a)(Object(wu.a)({},a),{},{is_inventory:"True",page:a.page||1,search:n},l)).then((function(t){e.setState({disInvFamilies:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.onDisInvSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllDisposalInventories()}))},e.onDisInvFamilySearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllFamily()}))},e.getLocaleData=function(e){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:1==e.key||2==e.key?Rm.inventory_empty_gray_icon:3==e.key?Rm.inventory_empty:Rm.disposal_empty_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},1==e.key?"No Inventory Families":2==e.key?"No Inventory Items":3==e.key?"No Inventory Kits":4==e.key?"No Disposal Inventory Families":"No Disposal Inventory"))))},e.handleFilterPackage=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllPackages()})):e.setState({dateFilter:null},(function(){e.fetchAllPackages()}))},e.handleFilterInventories=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllInventories()})):e.setState({dateFilter:null},(function(){e.fetchAllInventories()}))},e.handleFilterInventoryKits=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllInventoryKits()})):e.setState({dateFilter:null},(function(){e.fetchAllInventoryKits()}))},e.handleFilterFamily=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllFamily()})):e.setState({dateFilter:null},(function(){e.fetchAllFamily()}))},e.handleFilterDisposalInventories=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllDisposalInventories()})):e.setState({dateFilter:null},(function(){e.fetchAllDisposalInventories()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Inventory Families",url:zm.dashboard.management.inventory.self}];this.props.setBreadcrumb(e),this.tabChange(Md())}},{key:"render",value:function(){var e=this,a=this.state,t=a.packages,n=a.loading,c=a.pagination,i=a.inventories,r=a.kits,s=a.disInvFamilies,o=a.disposalInventory;return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(vf.a,{onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",activeKey:this.state.key},l.a.createElement(gO,{tab:"Inventory Families",key:"1"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.inventory.inventory_packages.create,buttonName:"+ Create Inventory Family",onSearch:lu(this.onSearch,1e3),fetchData:function(a){return e.handleFilterPackage(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-family-table"},l.a.createElement(UN,{data:t,loading:n,pagination:c,onTableChange:this.handleTableChange,rowLink:zm.dashboard.management.inventory.inventory_packages.view,columns:this.columns,locale:n?" ":{emptyText:this.getLocaleData({key:1})}}))))),l.a.createElement(gO,{tab:"Inventory Items",key:"2"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.inventory.inventory_items.create,buttonName:"+ Create Inventory Item",onSearch:lu(this.onItemSearch,1e3),fetchData:function(a){return e.handleFilterInventories(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row vehicle-table-text-center width-160-id"},l.a.createElement(UN,{checkInventoryRequired:!0,data:i,loading:n,pagination:c,onTableChange:this.handleTableChangeInventory,rowLink:zm.dashboard.management.inventory.inventory_items.view,columns:this.inventoryItemsColumns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:2})}}))))),l.a.createElement(gO,{tab:"Inventory Kits",key:"3"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.inventory.inventory_kits.create,buttonName:"+ Create Inventory Kit",onSearch:lu(this.onKitSearch,1e3),fetchData:function(a){return e.handleFilterInventoryKits(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-family-table"},l.a.createElement(UN,{data:r,loading:n,pagination:c,onTableChange:this.handleTableChangeInventoryKit,rowLink:zm.dashboard.management.inventory.inventory_kits.view,columns:this.inventoryKitColumns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:3})}}))))),l.a.createElement(gO,{tab:"Disposal Inventory Family",key:"4"},l.a.createElement(cb,{buttonName:"Create Service",onSearch:lu(this.onDisInvFamilySearch,1e3),fetchData:function(a){return e.handleFilterFamily(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-family-table"},l.a.createElement(UN,{data:s,loading:n,pagination:c,onTableChange:this.handleDisInvFamTableChange,rowLink:zm.dashboard.management.disposal_inventory.family.view,columns:this.disposalInventoryFamilyColumns,rowClassName:this.checkRequiredAddClass,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:4})}}))))),l.a.createElement(gO,{tab:"Disposal Inventory",key:"5"},l.a.createElement(cb,{buttonName:"Create Disposal Inventory",onSearch:lu(this.onDisInvSearch,1e3),fetchData:function(a){return e.handleFilterDisposalInventories(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-family-table"},l.a.createElement(UN,{data:o,loading:n,pagination:c,onTableChange:this.handleDisInvTableChange,rowLink:zm.dashboard.management.disposal_inventory.view,columns:this.disposalInventoryColumns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:5})}})))))))}}]),t}(n.Component),NO=Object(Lm.b)(null,{setBreadcrumb:Uv})(bO),yO=t(1066),wO=t(702),_O=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleClickOutside=function(e){n.wrapperRef&&!n.wrapperRef.current.contains(e.target)&&n.setState({showInput:!1,subtierName:""})},n.handleInput=function(){n.setState({showInput:!0})},n.addChild=function(){n.setState({showInput:!1,subtierName:""}),n.props.addChild(n.state.subtierName,n.props.parent)},n.state={showInput:!1,subtierName:""},n.wrapperRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this,a=this.state,t=a.showInput,n=a.subtierName,c=this.props,i=c.buttonName,r=c.root,s=c.parent;return l.a.createElement("div",{ref:this.wrapperRef},t?l.a.createElement("div",{className:"row mx-0 add-sub-tier-input-form"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{autoFocus:!0,value:n,onChange:function(a){return e.setState({subtierName:a.target.value})},name:"subtierName",type:"text"}),l.a.createElement("span",{className:"img-tag-icon position-absolute"},l.a.createElement("img",{alt:" ",className:"img-fluid",src:Rm.list_nested_icon_green})),l.a.createElement(Vm.a,{onClick:this.addChild,className:"create-sub-tier text-uppercase w-100 border-0"},"Create Sub-tier"))):r?l.a.createElement("div",{className:"row mx-0 add-sub-tier-main-row"},l.a.createElement(Vm.a,{disabled:!s,onClick:this.handleInput,className:"add-sub-tier-btn bg-transparent border-0 rounded-0 shadow-none text-uppercase"},"+ ADD SUB-TIER")):l.a.createElement("div",{onClick:this.handleInput,className:"text-gray-tag text-right-tree"},i))}}]),t}(n.Component),SO={labelCol:{span:24},wrapperCol:{span:24}},xO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleSubmit=function(){var a=e.formRef.current.getFieldValue("name");a?(e.props.onUpdate(e.props.data.id,{name:a}),e.props.onClose()):Mm.b.error("Name is required")},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){e.data!==this.props.data&&this.formRef.current.setFieldsValue(Object(wu.a)({},this.props.data))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{centered:!0,title:"Edit Package Item",visible:this.props.visible,onOk:this.handleSubmit,onCancel:this.props.onClose,className:"main-all-form-modal",cancelText:"Cancel",okText:"Update",width:"575px"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({hideRequiredMark:!0,ref:this.formRef},SO,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Package Item Name"})))))))))}}]),t}(n.Component),CO={labelCol:{span:24},wrapperCol:{span:24}},OO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={packageData:null,treeData:[],data:[{title:"Hello",key:"0-0",children:[{title:"Hello-1",key:"0-1",children:[{title:"Hell0-1-1",key:"0-1-1",children:[{title:"Hello 0-1-1-1",key:"0-1-1-1",children:[]}]},{title:"Hell0-1-2",key:"0-1-2",children:[]}]},{title:"Hello-2",key:"0-2",children:[]}]}]},e.formRef=l.a.createRef(),e.handleAddButton=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a){var n=Object(Ou.a)(a);return n.forEach((function(a,n){if(!a.type){a.key=t?t+"parent"+n:a.id;var l={title:"Add Tier under ".concat(a.name),type:"add",key:"add"+a.name+a.id,parentKey:a.id};a.children.push(l)}a.children=e.handleAddButton(a.children)})),n}},e.getPackage=function(a){UC(a).then((function(t){e.props.setPackage(t.data);var n=e.handleAddButton(t.data.parent.children,a);e.setState({packageData:t.data,treeData:n}),e.formRef.current.setFieldsValue({name:t.data.name,description:t.data.description})})).catch((function(e){td(e)}))},e.handleAddChild=function(a,t){BC({name:a,parent:t}).then((function(a){e.getPackage(e.state.packageData.id)})).catch((function(e){td(e)}))},e.handlePackageName=function(){var a={name:e.formRef.current.getFieldValue("name"),description:e.formRef.current.getFieldValue("description")};e.state.packageData?LC(e.state.packageData.id,a).then((function(a){e.setState({packageData:a.data}),e.getPackage(a.data.id)})).catch((function(e){td(e)})):qC(a).then((function(a){e.setState({packageData:a.data}),e.getPackage(a.data.id)})).catch((function(e){td(e)}))},e.showEditModal=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,editData:t})},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return e.showEditModal(!0,a)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return e.handleRemove(a)}},"Remove")))},e.handleRemove=function(a){WC(a.id).then((function(a){e.getPackage(e.state.packageData.id)})).catch((function(e){td(e)}))},e.updatePackageItem=function(a,t){YC(a,t).then((function(a){e.getPackage(e.state.packageData.id)})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?this.getPackage(this.props.match.params.id):this.props.packageData&&this.getPackage(this.props.packageData.id)}},{key:"render",value:function(){var e=this,a=this.state.packageData;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},CO,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},!this.props.hideTitle&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Inventory Family Name",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{onBlur:this.handlePackageName,placeholder:"Inventory Family Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a.TextArea,{className:"text-area-main",onBlur:this.handlePackageName,placeholder:"Enter Here"})))),this.props.hideTitle&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 notes-all-common"},l.a.createElement("div",{className:"col-2 p-0"},l.a.createElement("div",{className:"row mx-0 icon-info-notes align-items-center h-100 justify-content-center"},l.a.createElement("img",{src:Rm.information_green_icon,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"col-10"},l.a.createElement("div",{className:"row mx-0 h-100 icon-info-details align-items-center"},l.a.createElement("small",{className:"small-text-main"},"Note: The tiers with nothing inside of them will become inventory",l.a.createElement("b",{className:"text-black-50"},"groups"),"in the next step."))))),this.state.treeData.length>0&&l.a.createElement("div",{className:"col-12"},l.a.createElement(L_.a,{className:"custom-tree-structure",showLine:!0,defaultExpandAll:!0,selectable:!1,switcherIcon:l.a.createElement(wO.a,null),titleRender:function(a){return a.type?l.a.createElement(_O,{addChild:e.handleAddChild,parent:a.parentKey,buttonName:a.title}):l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("img",{src:"parent"===a.type?Rm.list_nested_icon_green:a.children.filter((function(e){return!e.type})).length>0?null:Rm.list_nested_icon_green,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},a.name)),a.children&&0!==a.children.filter((function(e){return!e.type})).length&&l.a.createElement("div",{className:"branch-div-tg d-flex align-items-center"},l.a.createElement("span",{className:"count-span-tg"},a.children.filter((function(e){return!e.type})).length),l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},0===a.children.filter((function(e){return"add"!==e.type})).length?"Inventory Group":"Inventory Tier",l.a.createElement("div",{className:"remove-dropdown"},l.a.createElement(xu.a,{trigger:"click",overlay:e.menu(a)},l.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))))))},treeData:this.state.treeData})),l.a.createElement("div",{className:"col-12"},l.a.createElement(_O,{root:!0,parent:a?a.parent.id:null,addChild:this.handleAddChild}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(xO,{data:this.state.editData,onUpdate:this.updatePackageItem,visible:this.state.visible,onClose:function(){return e.showEditModal(!1)}}))}}]),t}(n.Component),kO=Object(r.withRouter)(OO),jO=fu.a.Panel;function IO(e){}n.Component;var AO=ku.a.Option,DO={labelCol:{span:24},wrapperCol:{span:24}},TO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={loading:!1,data:null},e.formRef=l.a.createRef(),e.handleSubmit=function(a){YC(e.props.data.id,a).then((function(a){e.setState({data:a.data})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.data&&this.formRef.current.setFieldsValue(Object(wu.a)({},this.props.data))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},DO,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h5",null,"Inventory Group Cost")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"unit",label:"Unit of Measurement *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select cost type"},l.a.createElement(AO,{value:"UNITS"},"Units"),l.a.createElement(AO,{value:"FEET"},"Feet"),l.a.createElement(AO,{value:"POUNDS"},"Pounds")))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"unit_cost",label:"Estimated Unit Cost *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),RO=(Object(r.withRouter)(TO),fu.a.Panel);function MO(e){}n.Component;var FO={labelCol:{span:24},wrapperCol:{span:24}},PO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).setFieldData=function(e){n.formRef.current.setFieldsValue({name:e.name,description:e.description})},n.onSubmit=function(e){var a,t;n.setState({buttonLoading:!0}),n.props.packageData?(a=n.props.packageData.id,t=e,md(ad("service.family",{id:a}),t)).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Service Family updated successfully")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})})):function(e){return od(ad("service.family"),e)}(e).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Service Family created successfully")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})}))},n.formRef=l.a.createRef(),n.state={buttonLoading:!1},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData&&this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"render",value:function(){return l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef},FO,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input the name and description of the service family."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Service Family Name*",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Service Family Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Description"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))}}]),t}(n.Component),VO=(ku.a.Option,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onBlurSaveInput=function(e){dg({name:e.target.value,parent:n.props.packageData.parent.id,tier_type:n.state.tier_type}).then((function(){n.props.getPackageData(n.props.packageData.id),n.setState({visibleInput:!1})}))},n.handleVisibleInput=function(e){n.setState({visibleInput:!n.props.visibleInput,tier_type:e})},n.handleKeyDown=function(e){"Enter"==e.key&&n.onBlurSaveInput(e)},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput("SERVICE_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput("SERVICE_LINE_ITEM")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid mr-2"}),"Service")))},n.state={visibleInput:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state.visibleInput;return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement("div",{className:"row mx-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},l.a.createElement("div",{className:"mb-0 d-flex children-heading-last align-items-center"},l.a.createElement(Pm.a,{onBlur:function(a){return e.onBlurSaveInput(a)},autoFocus:!0,onKeyDown:this.handleKeyDown}))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){e.setState({visibleInput:!1})}},l.a.createElement("span",null,"Cancel")))),l.a.createElement("div",{className:"row mx-0 add-sub-tier-main-row"},l.a.createElement("div",{className:""},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return e.addTierMenu()}},l.a.createElement(Vm.a,{className:"add-sub-tier-btn bg-transparent border-0 rounded-0 shadow-none text-uppercase"},"+ ADD TIER/Service")))))}}]),t}(n.Component)),qO=t(1058),LO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,centered:!0,className:"confirmation-popup-modal warning-modal",footer:l.a.createElement("div",null,l.a.createElement(Vm.a,{className:"ant-btn ant-btn-primary w-100",onClick:this.props.onClose},this.props.footerText||"Close"))},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.check_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),l.a.createElement("p",null,this.props.subHeading)))))}}]),t}(n.Component),UO=Object(r.withRouter)(LO),BO={labelCol:{span:24},wrapperCol:{span:24}},WO=ku.a.Option,YO=ku.a.OptGroup,KO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={allOptions:[]},e.formRef=l.a.createRef(),e.costFormRef=l.a.createRef(),e.handleFormChange=function(){e.props.newFunc(e.formRef.current.getFieldsValue())},e.handleCostFormChange=function(){e.props.newFunc(e.costFormRef.current.getFieldsValue());var a=e.costFormRef.current.getFieldValue("cost_uom");a&&e.formRef.current.setFieldsValue({pricing_uom:{value:null===a||void 0===a?void 0:a.value,name:null===a||void 0===a?void 0:a.label}})},e.getUnitName=function(a){e.setState({fetching:!0}),Rg(a).then((function(a){var t={};a.data.forEach((function(e){t[e.unit_type.name]||(t[e.unit_type.name]=[]),t[e.unit_type.name].push(e)})),e.setState({allOptions:t})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l,c,i,r,s=this.props.selectedPricing;this.formRef.current.setFieldsValue({hourly_price:null===s||void 0===s?void 0:s.hourly_price,daily_price:null===s||void 0===s?void 0:s.daily_price,price:null===s||void 0===s?void 0:s.price,pricing_uom:(null===s||void 0===s?void 0:s.cost_uom)?{value:null===s||void 0===s||null===(e=s.cost_uom)||void 0===e?void 0:e.id,name:null===s||void 0===s||null===(a=s.cost_uom)||void 0===a?void 0:a.name}:{value:null===s||void 0===s||null===(t=s.pricing_uom)||void 0===t?void 0:t.id,name:null===s||void 0===s||null===(n=s.pricing_uom)||void 0===n?void 0:n.name}}),this.costFormRef.current.setFieldsValue({unit_cost:null===s||void 0===s?void 0:s.unit_cost,cost_uom:(null===s||void 0===s?void 0:s.cost_uom)?{value:null===s||void 0===s||null===(l=s.cost_uom)||void 0===l?void 0:l.id,name:null===s||void 0===s||null===(c=s.cost_uom)||void 0===c?void 0:c.name}:{value:null===s||void 0===s||null===(i=s.pricing_uom)||void 0===i?void 0:i.id,name:null===s||void 0===s||null===(r=s.pricing_uom)||void 0===r?void 0:r.name}}),this.getUnitName()}},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c,i,r,s,o,m,d=this.props.selectedPricing;(null===(t=e.selectedPricing)||void 0===t?void 0:t.margin)!=(null===d||void 0===d?void 0:d.margin)&&(this.formRef.current.setFieldsValue({hourly_price:null===d||void 0===d?void 0:d.hourly_price,daily_price:null===d||void 0===d?void 0:d.daily_price,price:null===d||void 0===d?void 0:d.price,pricing_uom:(null===d||void 0===d?void 0:d.cost_uom)?{value:null===d||void 0===d||null===(n=d.cost_uom)||void 0===n?void 0:n.id,name:null===d||void 0===d||null===(l=d.cost_uom)||void 0===l?void 0:l.name}:{value:null===d||void 0===d||null===(c=d.pricing_uom)||void 0===c?void 0:c.id,name:null===d||void 0===d||null===(i=d.pricing_uom)||void 0===i?void 0:i.name}}),this.costFormRef.current.setFieldsValue({unit_cost:null===d||void 0===d?void 0:d.unit_cost,cost_uom:(null===d||void 0===d?void 0:d.cost_uom)?{value:null===d||void 0===d||null===(r=d.cost_uom)||void 0===r?void 0:r.id,name:null===d||void 0===d||null===(s=d.cost_uom)||void 0===s?void 0:s.name}:{value:null===d||void 0===d||null===(o=d.pricing_uom)||void 0===o?void 0:o.id,name:null===d||void 0===d||null===(m=d.pricing_uom)||void 0===m?void 0:m.name}}))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d,u=this,p=this.props.newPrice,v=null===(e=this.props.selectedPricing)||void 0===e?void 0:e.suggested_daily_price,h=null===(a=this.props.selectedPricing)||void 0===a?void 0:a.suggested_hourly_price,f=null===(t=this.props.selectedPricing)||void 0===t?void 0:t.daily_cost,E=null===(n=this.props.selectedPricing)||void 0===n?void 0:n.hourly_cost,g=this.state.fetching;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 bg-white price-estimated-row-table-1"},l.a.createElement("div",{className:"row mx-0 suggest-price-row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"mb-0"},"Cost:")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},BO,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"hourly_cost",label:"Hourly Cost *",className:"position-relative"},l.a.createElement(Pm.a,{disabled:!0,placeholder:"$".concat(E||0)}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"daily",label:"Daily Cost *",className:"position-relative"},l.a.createElement(Pm.a,{disabled:!0,placeholder:"$".concat(f||0)})))))))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"mb-0"},"Unit Cost:")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},BO,{ref:this.costFormRef,hideRequiredMark:!0,onFieldsChange:this.handleCostFormChange,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"unit_cost",label:"Cost",className:(null===(c=this.costFormRef.current)||void 0===c?void 0:c.getFieldValue("unit_cost"))?"position-relative add-dollar-main-item color-change":"position-relative add-dollar-main-item"},l.a.createElement(Pm.a,{style:{paddingLeft:"22px"},placeholder:"0.00"})),l.a.createElement("small",{className:"add-dollar add-dollar-2 position-absolute"},"$")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("span",{style:{color:"#333333",lineHeight:"22px",fontSize:"17px",left:"-3px",bottom:"29px"},className:"position-absolute"},"/"," "),l.a.createElement(Fm.a.Item,{name:"cost_uom",label:"Unit",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{labelInValue:!0,dropdownClassName:"dropdown-select-search",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_down_small_select}),showSearch:!0,notFoundContent:g?l.a.createElement(Wv.a,null):null,filterOption:!1,onSearch:function(e){return u.getUnitName({search:e})},defaultValue:(null===p||void 0===p?void 0:p.cost_uom)?{value:null===p||void 0===p||null===(i=p.cost_uom)||void 0===i?void 0:i.id,name:null===p||void 0===p||null===(r=p.cost_uom)||void 0===r?void 0:r.name}:"a"},Object.entries(this.state.allOptions).map((function(e,a,t){return l.a.createElement(YO,{key:e&&e[0],value:e&&e[0],label:e&&e[0],className:"kit-uom-optgroup"},e&&e[1].map((function(e){return l.a.createElement(WO,{key:e.id,value:e.id,className:"text-lowercase"},e.name)})))}))))))))))),l.a.createElement("div",{className:"row mx-0 suggest-price-row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"mb-0"},"Suggested Price:")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},BO,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"suggested_hourly_price",label:"Hourly Price *",className:"position-relative"},l.a.createElement(Pm.a,{disabled:!0,placeholder:"$".concat(h||0)}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"suggested_daily_price",label:"Daily Price *",className:"position-relative"},l.a.createElement(Pm.a,{disabled:!0,placeholder:"$".concat(v||0)})))))))))),l.a.createElement("div",{className:"col-12 bg-white price-estimated-row-table-2"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},BO,{hideRequiredMark:!0,onFieldsChange:this.handleFormChange,className:"main-inner-form"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mr-0 suggest-price-row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"mb-0"},"Price:")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("div",{className:"row mr-0 common-form-card-row pb-0 pr-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"hourly_price",label:"Hourly Price *",className:(null===(s=this.formRef.current)||void 0===s?void 0:s.getFieldValue("hourly_price"))?"position-relative add-dollar-main-item color-change":"position-relative add-dollar-main-item"},l.a.createElement(Pm.a,{style:{paddingLeft:"22px"},placeholder:"".concat(this.props.hourPrice||0)})),l.a.createElement("small",{className:"add-dollar add-dollar-2 position-absolute"},"$")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"daily_price",label:"Daily Price *",className:(null===(o=this.formRef.current)||void 0===o?void 0:o.getFieldValue("daily_price"))?"position-relative add-dollar-main-item color-change":"position-relative add-dollar-main-item"},l.a.createElement(Pm.a,{style:{paddingLeft:"22px"},placeholder:"".concat(this.props.totalPrice||0)})),l.a.createElement("small",{className:"add-dollar add-dollar-2 position-absolute"},"$"))))))),l.a.createElement("div",{className:"row mr-0 suggest-price-row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"mb-0"},"Unit Price:")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("div",{className:"row mr-0 common-form-card-row pt-0 pr-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"price",label:"Price",className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("span",{style:{color:"#333333",lineHeight:"22px",fontSize:"17px",left:"-3px",bottom:"29px"},className:"position-absolute"},"/"," "),l.a.createElement(Fm.a.Item,{name:"pricing_uom",label:"Unit",rules:[{required:!1,message:""}]},l.a.createElement(ku.a,{labelInValue:!0,disabled:!0,dropdownClassName:"dropdown-select-search",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_down_small_select}),showSearch:!0,notFoundContent:g?l.a.createElement(Wv.a,null):null,filterOption:!1,onSearch:function(e){return u.getUnitName({search:e})},defaultValue:(null===p||void 0===p?void 0:p.pricing_uom)?{value:null===p||void 0===p||null===(m=p.pricing_uom)||void 0===m?void 0:m.id,name:null===p||void 0===p||null===(d=p.pricing_uom)||void 0===d?void 0:d.name}:"a"},Object.entries(this.state.allOptions).map((function(e,a,t){return l.a.createElement(YO,{key:e&&e[0],value:e&&e[0],label:e&&e[0],className:"kit-uom-optgroup"},e&&e[1].map((function(e){return l.a.createElement(WO,{key:e.id,value:e.id,className:"text-lowercase"},e.name)})))}))))))))))))))))}}]),t}(n.Component),GO=ku.a.Option,zO=ku.a.OptGroup,HO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleGroupChange=function(e,a){var t={group:e.value};n.updateTableRow(a.id,t)},n.handleAddMore=function(e){var a,t={parent:e.parent?e.parent:e.id,type:"LABOR_CHILD"};(a=t,od(ad("service.add_table_data"),a)).then((function(e){n.setState({rows:e.data},(function(){n.props.getBackendPricing()}))})).catch((function(e){td(e)}))},n.getUpdatedPricing=function(e){(function(e){return id(ad("service.pricing",{id:e}))})(e).then((function(e){n.props.setSelectedPricing(e.data)})).catch((function(e){td(e)}))},n.handleChangeName=function(e,a,t){if("delete_row"===e)n.wageTypeModalHandler(!0,a);else{var l={name:e};n.updateTableRow(a.id,l)}},n.handleChangeUom=function(e,a){var t="string"===typeof e.value&&e.value.split("_");console.log(t,"dsdsf");var l={uom:"select"==e.value?null:t.length>0?t[(null===t||void 0===t?void 0:t.length)-1]:e.value,uom_type:"select"==e.value?null:t.length>0?"COM":"UOM"};n.updateTableRow(a.id,l)},n.handleChangeDocument=function(e,a){var t={doc_type:e.value};"select"!=e.value&&n.updateTableRow(a.id,t)},n.wageTypeModalHandler=function(e,a){n.setState({visibleWageTypeConfirmation:e,selectedWageType:a})},n.fetchGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zp(e).then((function(e){n.setState({groups:e.data.results})})).catch((function(e){td(e)}))},n.handleChangeQty=function(e,a,t){var l=e.target.value,c={qty:l};0!=l&&n.updateTableRow(a.id,c)},n.addNewRow=function(e){return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color green-light-color-div"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 green-light-color-div"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_green_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{onClick:function(){return n.handleAddMore(e)},className:"add-new-row-btn"},l.a.createElement("img",{src:Rm.new_add_plus_green_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Add Wage Type")))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 green-light-color-div"},l.a.createElement("div",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 green-light-color-div"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 green-light-color-div"},l.a.createElement("div",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 green-light-color-div"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7 green-light-color-div"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 green-light-color-div"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 green-light-color-div"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")))},n.handleInventoryItem=function(e,a,t){var c,i,r,s,o,m,d,u=n.props.view;return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(t?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},a&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:a&&{paddingLeft:"30px"}},e.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center"},a?l.a.createElement("span",{className:"px-3 text-capitalize"},(null===e||void 0===e?void 0:e.uom)?"".concat(null===e||void 0===e||null===(c=e.uom)||void 0===c||null===(i=c.name)||void 0===i?void 0:i.toLowerCase()," (").concat(null===e||void 0===e||null===(r=e.uom)||void 0===r?void 0:r.symbol,")"):"-"):l.a.createElement(Fm.a,null,l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),disabled:u,onChange:function(a){return n.handleChangeUom(a,e)},placeholder:"Please Select",value:e.uom?"COM"===e.uom_type?{value:"COM_".concat(null===(s=e.uom)||void 0===s?void 0:s.id),label:"".concat(e.uom.name," (").concat(e.uom.abbreviation,")")}:{value:null===(o=e.uom)||void 0===o?void 0:o.id,label:"".concat(e.uom.name," (").concat(e.uom.symbol,")")}:{value:"select",label:"Select"}},l.a.createElement(GO,{value:"select"},"Select"),null===e||void 0===e||null===(m=e.inventory_uom)||void 0===m?void 0:m.map((function(e){return l.a.createElement(GO,{key:e.id,value:e.id},e.name," (",e.symbol,")")})),null===e||void 0===e||null===(d=e.inventory_com)||void 0===d?void 0:d.map((function(e){var a="COM_".concat(e.id);return l.a.createElement(GO,{key:a,value:a},e.name," (",e.abbreviation,")")})))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{value:e.qty,disabled:!!e.parent||!!u,onBlur:function(a){return n.handleChangeQty(a,e)},placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.cost))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,null===e||void 0===e?void 0:e.margin,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.price_unit))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.total_price))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")))},n.handleFleetKit=function(e,a,t){var c,i,r,s,o,m,d,u=n.props.view;return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(t?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},a&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:a&&{paddingLeft:"30px"}},e.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center"},a?l.a.createElement("span",{className:"px-3 text-capitalize"},(null===e||void 0===e?void 0:e.uom)?"".concat(null===e||void 0===e||null===(c=e.uom)||void 0===c||null===(i=c.name)||void 0===i?void 0:i.toLowerCase()," (").concat(null===e||void 0===e||null===(r=e.uom)||void 0===r?void 0:r.symbol,")"):"-"):l.a.createElement(Fm.a,null,l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),disabled:u,onChange:function(a){return n.handleChangeUom(a,e)},placeholder:"Please Select",value:e.uom?"COM"===e.uom_type?{value:"COM_".concat(null===(s=e.uom)||void 0===s?void 0:s.id),label:"".concat(e.uom.name," (").concat(e.uom.abbreviation,")")}:{value:null===(o=e.uom)||void 0===o?void 0:o.id,label:"".concat(e.uom.name," (").concat(e.uom.symbol,")")}:{value:"select",label:"Select"}},l.a.createElement(GO,{value:"select"},"Select"),null===e||void 0===e||null===(m=e.inventory_uom)||void 0===m?void 0:m.map((function(e){return l.a.createElement(GO,{key:e.id,value:e.id},e.name," (",e.symbol,")")})),null===e||void 0===e||null===(d=e.inventory_com)||void 0===d?void 0:d.map((function(e){var a="COM_".concat(e.id);return l.a.createElement(GO,{key:a,value:a},e.name," (",e.abbreviation,")")})))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{value:e.qty,disabled:!!e.parent||!!u,onBlur:function(a){return n.handleChangeQty(a,e)},placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.cost))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,null===e||void 0===e?void 0:e.margin,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.price_unit))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.total_price))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")))},n.laborChild=function(e,a,t){var c,i,r,s=n.props.view;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0 ".concat(n.props.view&&"view-dropdowns-tbl")},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 custom-table-cell-td-name-info pr-lg-0  \n                  ".concat(t?"":" last-child ")},l.a.createElement("div",{className:"editalble-form-data\n                    ".concat(n.props.view&&"caret-arrow-hide")},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement(ku.a,{value:e.name||"select",disabled:s,onChange:function(t){return n.handleChangeName(t,e,a)},placeholder:"Please Select"},l.a.createElement(GO,{value:"select"},"Select"),l.a.createElement(GO,{value:"straight_time"},"Straight Time"),l.a.createElement(GO,{value:"over_time"},"Over Time"),l.a.createElement(GO,{value:"double_time"},"Double Time"),l.a.createElement(GO,{value:"off_shift"},"Off Shift"),l.a.createElement(GO,{value:"night_time"},"Night Time Off Shift"),l.a.createElement(GO,{className:"text-danger",value:"delete_row"},"Delete Row")),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 search-btn-icon"},l.a.createElement(wO.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 custom-table-cell-td-labor-group"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-edit"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ku.a,{value:{value:null===(c=e.group)||void 0===c?void 0:c.id,label:null===(i=e.group)||void 0===i?void 0:i.labor_group_name,key:null===(r=e.type_id)||void 0===r?void 0:r.id}||void 0,disabled:s,showSearch:!0,labelInValue:!0,className:"pricing-group",filterOption:!1,onSearch:function(e){return n.fetchGroup({search:e})},onFocus:function(){return n.fetchGroup()},onChange:function(a){return n.handleGroupChange(a,e)},placeholder:"Search"},n.state.groups.map((function(e){return l.a.createElement(GO,{key:e.id,value:e.id},e.labor_group_name)})))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{value:e.qty||1,disabled:s,onBlur:function(a){return n.handleChangeQty(a,e)},placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},"$".concat(gd(null===e||void 0===e?void 0:e.cost)||0)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,e.margin,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},"$".concat(gd(null===e||void 0===e?void 0:e.price_unit)||0)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},"$".concat(gd(null===e||void 0===e?void 0:e.total_price)||0)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-"))))},n.renderRow=function(e){var a,t,c,i,r,s,o,m,d,u,p,v,h=n.props.view;switch(e.type){case Ld:return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 gray-2-color"},l.a.createElement("div",null,e.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data text-right"})),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.map((function(a,t){var l=e.children.length>t+1;return n.laborChild(a,e,l)})),!e.children&&!h&&n.addNewRow(e),null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.map((function(a,t){if(e.children.length===t+1&&!h)return n.addNewRow(a)})));case Bd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,e.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{value:e.qty||1,disabled:h,onBlur:function(a){return n.handleChangeQty(a,e)},placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.cost))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,(null===e||void 0===e?void 0:e.margin)||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.price_unit))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.total_price))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-")));case Wd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Supply Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,e.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{value:e.qty||1,disabled:h,onBlur:function(a){return n.handleChangeQty(a,e)},placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.cost))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,e.margin||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.price_unit))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.total_price))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case"DISPOSAL":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Disposal")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,"".concat(e.disposal_code||""," ").concat((null===e||void 0===e?void 0:e.disposal_code)?"-":""," ").concat(e.name)))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center blank-red"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),placeholder:"Select",onChange:function(a){return n.handleVendorLocationChange(a,e)},disabled:h,value:"WAREHOUSE"===(null===e||void 0===e?void 0:e.facility_type)?{value:null===e||void 0===e||null===(c=e.facility_id)||void 0===c?void 0:c.id,label:null===e||void 0===e||null===(i=e.facility_id)||void 0===i?void 0:i.internal_location.name}:"VENDOR"===(null===e||void 0===e?void 0:e.facility_type)?{value:null===e||void 0===e||null===(r=e.facility_id)||void 0===r?void 0:r.id,label:null===e||void 0===e||null===(s=e.facility_id)||void 0===s?void 0:s.vendor.name}:void 0},l.a.createElement(zO,{label:"Warehouses"},null===e||void 0===e?void 0:e.warehouse.map((function(e){return l.a.createElement(GO,{value:e.id},e.internal_location.name)}))),l.a.createElement(zO,{label:"Vendors"},null===e||void 0===e?void 0:e.vendor.map((function(e){return l.a.createElement(GO,{value:e.id},e.vendor.name)}))))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),disabled:h,onChange:function(a){return n.handleChangeUom(a,e)},value:e.uom?"COM"===e.uom_type?{value:"COM_".concat(null===(o=e.uom)||void 0===o?void 0:o.id),label:"".concat(e.uom.name," (").concat(e.uom.abbreviation,")")}:{value:null===(m=e.uom)||void 0===m?void 0:m.id,label:"".concat(e.uom.name," (").concat(e.uom.symbol,")")}:{value:"select",label:"Select"},placeholder:"Please Select"},l.a.createElement(GO,{value:"select"},"Select"),null===e||void 0===e||null===(d=e.disposal_uom)||void 0===d?void 0:d.map((function(e){return l.a.createElement(GO,{key:e.id,value:e.id},e.name," (",e.symbol,")")})),null===e||void 0===e||null===(u=e.disposal_com)||void 0===u?void 0:u.map((function(e){var a="COM_".concat(e.id);return l.a.createElement(GO,{key:a,value:a},e.name," (",e.abbreviation,")")})))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{value:e.qty||1,disabled:h,onBlur:function(a){return n.handleChangeQty(a,e)},placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.cost)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,(null===e||void 0===e?void 0:e.margin)||"-","%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.price_unit)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.total_price)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center blank-red"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),disabled:h,onChange:function(a){return n.handleChangeDocument(a,e)},value:e.doc_type?{value:e.doc_type,label:"".concat("BILL_OF_LADING"===e.doc_type?"Bill of Lading":"NEITHER"===e.doc_type?"Neither":"Manifest")}:null,placeholder:"Select"},l.a.createElement(GO,{value:"MANIFEST"},"Manifest"),l.a.createElement(GO,{value:"BILL_OF_LADING"},"Bill of Lading"),l.a.createElement(GO,{value:"NEITHER"},"Neither")))))));case"INVENTORY_ITEM":return n.handleInventoryItem(e);case"INVENTORY_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Kit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,e.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Unit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),null===e||void 0===e||null===(p=e.children)||void 0===p?void 0:p.map((function(a,t){var l=e.children.length>t+1;return n.handleInventoryItem(a,!0,l)})));case"FLEET_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Kit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",null,e.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Unit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("span",{className:"px-3"},e.qty)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.cost)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,(null===e||void 0===e?void 0:e.margin)||"-","%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.price_unit)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"$",gd(null===e||void 0===e?void 0:e.total_price)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-"))),null===e||void 0===e||null===(v=e.children)||void 0===v?void 0:v.map((function(a,t){var l=e.children.length>t+1;return n.handleFleetKit(a,!0,l)})))}},n.handleVendorLocationChange=function(e,a){var t=[].concat(Object(Ou.a)(a.vendor),Object(Ou.a)(a.warehouse)).find((function(a){return a.id===e.value})).vendor?"VENDOR":"WAREHOUSE",l={facility_id:e.value,facility_type:t};n.updateTableRow(a.id,l)},n.updateTableRow=function(e,a){(function(e,a){return md(ad("service.add_table_data",{id:e}),a)})(e,a).then((function(e){var a,t;n.props.getBackendPricing(),n.getUpdatedPricing(null===(a=n.props)||void 0===a||null===(t=a.selectedPricing)||void 0===t?void 0:t.id)})).catch((function(e){td(e)}))},n.state={rows:[],groups:[],selectedWageType:null,visibleWageTypeConfirmation:!1},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Qm.a)($m.a.mark((function e(){var a,t;return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,t=a.rows,a.view){e.next=5;break}return e.next=4,this.props.getBackendPricing();case 4:this.fetchGroup();case 5:this.setState({rows:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,a){a.margin!=this.state.margin&&this.setState({rows:this.props.rows})}},{key:"render",value:function(){var e=this,a=this.props.selectedPricing,t=this.state.rows;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-header1 custom-update-table service-variant-update"},l.a.createElement("div",{className:"col-12 update-header"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"Labor Group")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"Facility")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Qty/Day Estimate")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Cost",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Margin")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per Unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Price")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Document")))),l.a.createElement("div",{className:"col-12 custom-table-body p-0"},t.map((function(a,t){return e.renderRow(a)}))))),l.a.createElement(iv,{visible:this.state.visibleWageTypeConfirmation,onClose:function(){e.setState({visibleWageTypeConfirmation:!1})},deleteWageType:!0,updateAfterDltdWageType:function(){var a,t=e.state.selectedWageType;(a=t.id,dd(ad("service.table_data",{id:a}))).then((function(){e.props.getBackendPricing()})).catch((function(e){td(e)})).finally((function(){e.setState({visibleWageTypeConfirmation:!1})}))},heading:"Are you sure you want to delete this wage type?",subHeadingUOM:"If you choose to delete this wage type, your data will disappear."}),this.props.formPrice&&l.a.createElement(KO,{selectedPricing:a,newFunc:this.props.newFunc}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{rows:e.rows}}}]),t}(n.Component),$O={labelCol:{span:24},wrapperCol:{span:24}},QO=ku.a.Option,JO=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={fetching:!1,regions:[],pricing:null,newValues:null,warningVisible:!1,pricingNew:[],variantName:null,variantRegion:null,displayName:null,totalRegionCount:0,page:1},e.tableRef=l.a.createRef(),e.formRef=l.a.createRef(),e.fetchRegion=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),a.search&&e.setState({page:1}),ZE(a).then((function(a){1==e.state.page?e.setState({regions:a.data.results,totalRegionCount:a.data.count,fetching:!1}):e.setState((function(e){return{regions:[].concat(Object(Ou.a)(e.regions),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.showWarning=function(a){e.setState({warningVisible:a})},e.handleSubmit=function(a){a.line_item=e.props.data.id,a.region=a.region.value,e.state.pricing?bg(e.state.pricing.id,a).then((function(a){e.setState({pricing:a.data},(function(){e.props.setSelectedPricing(a.data),e.getBackendPricing()}))})).catch((function(e){td(e)})):gg(a).then((function(a){e.setState({pricing:a.data},(function(){e.props.setSelectedPricing(a.data),e.getBackendPricing()}))})).catch((function(e){td(e)}))},e.getBackendPricing=function(){var a;e.setState({fetching:!0}),wg({pricing:null===(a=e.state.pricing)||void 0===a?void 0:a.id}).then((function(a){e.setState({pricingNew:a.data})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.closeViewModal=function(){e.setState({visible:!1})},e.updateTable=function(){var a=e.formRef.current.getFieldValue("name"),t=e.formRef.current.getFieldValue("region"),n=e.formRef.current.getFieldValue("display_name"),l={};l=e.state.variantName!==a||e.state.variantRegion!==t.value||e.state.displayName!=n?Object(wu.a)(Object(wu.a)({},e.state.newValues),{},{name:a,region:t.value,display_name:n}):Object(wu.a)({},e.state.newValues),bg(e.state.pricing.id,l).then((function(a){e.setState({pricing:a.data,visible:!0}),e.props.onClose(a.data),e.formRef.current.resetFields()})).catch((function(e){td(e)}))},e.populateData=function(){var a,t=null===(a=e.state.regions)||void 0===a?void 0:a.find((function(a){var t;return a.title==(null===(t=e.props.selectedPricing)||void 0===t?void 0:t.region)}));e.setState({pricing:e.props.selectedPricing}),e.props.selectedPricing&&(e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.selectedPricing),{},{region:{label:null===t||void 0===t?void 0:t.title,value:null===t||void 0===t?void 0:t.id}})),e.setState({variantName:e.props.selectedPricing.name,variantRegion:null===t||void 0===t?void 0:t.id,displayName:e.props.display_name}),e.getBackendPricing())},e.newFunc=function(a){var t,n;console.log(a,"cost values");var l=Object(wu.a)(Object(wu.a)({},e.state.newValues),{},{hourly_price:a.hourly_price||0,daily_price:a.daily_price||0,price:a.price||0,pricing_uom:(null===(t=a.pricing_uom)||void 0===t?void 0:t.value)||null,cost_uom:null===(n=a.cost_uom)||void 0===n?void 0:n.value,unit_cost:a.unit_cost});e.setState({newValues:l})},e.findMergedArr=function(){var a,t=(null===(a=e.props.selectedPricing)||void 0===a?void 0:a.table_data)||[],n=e.props.resource||[],l=t.filter((function(e){return n.find((function(a){return a.id===e.id||"string"===typeof e.id&&e.id.startsWith("child")}))})),c=[].concat(Object(Ou.a)(l),Object(Ou.a)(n)),i=[],r=c.filter((function(e){return-1===i.indexOf(e.id)&&(i.push(e.id),!0)})),s=[];return["LABOR","FLEET_GROUP","SUPPLY_GROUP","DISPOSAL","INVENTORY_ITEM","INVENTORY_KIT"].forEach((function(e){r=r.filter((function(a){return"LABOR"===a.item_type||"labor_child"===a.item_type?(s.push(a),!1):a.item_type!==e||(s.push(a),!1)}))})),s},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchRegion({page:e.state.page})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchRegion(),this.getBackendPricing()}},{key:"componentDidUpdate",value:function(e,a){var t=this;if(a.regions!==a.regions){var n=this.state.regions.find((function(e){var a;return e.title==(null===(a=t.props.selectedPricing)||void 0===a?void 0:a.region)}));this.formRef.current.setFieldsValue({region:{label:n.title,value:n.id}})}}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.regions,c=a.totalRegionCount,i=this.props,r=i.data,s=i.selectedPricing,o=i.serviceText;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,maskClosable:!1,title:o?"Edit Service Variant":"Create Service Variant",destroyOnClose:!0,visible:this.props.visible,onOk:this.props.onClose,onCancel:function(){e.props.onClose(),e.setState({page:1})},className:"main-all-form-modal main-drawer-div drawer-update-design",width:"750px",placement:"right",closable:!0,onClose:function(){e.showWarning(!0),e.setState({page:1})},footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.showWarning(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{disabled:!this.state.pricing,onClick:this.updateTable,type:"primary"},o?"Update":"Create"," Service Variant"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-card-heading-row pl-0 align-items-center"},l.a.createElement("h5",{className:"mb-0 vehicle-group-heading d-flex align-items-center"},l.a.createElement("img",{src:Rm.line_items_group_icons,alt:" ",className:"img-fluid"}),r.name))),l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",null,"Please select a region, input a service variant name, and add a margin. Margin applies to everything except for disposal, disposal inventory, inventory item, and inventory kit."),l.a.createElement("h6",{className:"mb-0"},"Please note: You can modify the margin by modifying margin then clicking generate pricing."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},$O,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"region",label:"Region *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,onFocus:function(){return e.fetchRegion({page:e.state.page})},onSearch:function(a){return e.fetchRegion({search:a})},notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Type",dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},t?l.a.createElement(Wv.a,null):n.length!==c&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination(),a.stopPropagation()}},"Load More"))))))}},n.map((function(e){return l.a.createElement(QO,{key:e.id,value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"display_name",label:"Display Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,null))),l.a.createElement("div",{className:"col-12 col-sm-6 position-relative"},l.a.createElement(Fm.a.Item,{name:"name",label:"Service Variant Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Name"})),l.a.createElement("small",{className:"serviceVNote"},"e.g. Service Type, etc")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"margin",label:"Margin *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{min:0,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},placeholder:"%"})),l.a.createElement("small",{style:{fontWeight:400,color:"#828282",bottom:"-10px"},className:"small-text-tag"},"Please input a margin and then click Generate Pricing. Margin applies to everything except inventory and disposal.")),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Generate Pricing"))),this.state.pricing?l.a.createElement("div",{className:"col-12 service-varient-edit-col"},l.a.createElement(HO,{formPrice:!0,newFunc:this.newFunc,rows:this.state.pricingNew,selectedPricing:s,setSelectedPricing:this.props.setSelectedPricing,getBackendPricing:this.getBackendPricing,margin:this.state.pricing.margin})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.billing_gray_no_data_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Pricing"))))))))),l.a.createElement(UO,{visible:this.state.visible,onClose:this.closeViewModal,heading:l.a.createElement("div",null,"You've successfully ",l.a.createElement("br",null)," updated this Pricing!")}),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarning(!1)},addPricingWarning:!0,confirmClose:function(){e.showWarning(!1),e.props.onClose()},heading:"Are you sure you want to exit creating/updating this Service Variant?",subHeadingUOM:"If you choose to exit, none of the progress you have made will be saved."}))}}]),t}(n.Component),ZO=Object(r.withRouter)(JO);function XO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("supply.family");return id(a,e)}function ek(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("supply.family",{id:e});return id(t,a)}function ak(e){return od(ad("supply.supply_group"),e)}function tk(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("supply.supply_group",{id:e});return id(t,a)}function nk(e,a){return md(ad("supply.supply_group",{id:e}),a)}function lk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("supply.supply_group");return id(a,e)}function ck(e){return dd(ad("supply.supply_group",{id:e}))}function ik(e){return od(ad("supply.supply"),e)}function rk(e,a){return md(ad("supply.supply",{id:e}),a)}function sk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("supply.supply");return id(a,e)}function ok(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("supply.supply_dispatch");return id(a,e)}function mk(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("supply.supply",{id:e});return id(t,a)}function dk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.internal_location");return id(a,e)}function uk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("supply.supply_doc");return id(a,e)}function pk(e){return od(ad("supply.supply_doc"),e)}var vk=ku.a.Option,hk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleClickOutside=function(e){n.wrapperRef&&!n.wrapperRef.current.contains(e.target)&&n.setState({renderType:"button",subtierName:"",data:[]})},n.handleInput=function(e){n.setState({renderType:"input",type:e})},n.handleDropdown=function(){n.setState({renderType:"dropdown"})},n.addResource=function(e){var a=n.state.data.find((function(a){return a.id===e})),t=n.props,l=t.item,c=t.getResource;(function(e){return od(ad("service.resource"),e)})({line_item:l.id,labor_type:"LABOR"==n.state.type?a.id:null,item_type:Kd[n.state.type].server_key,item_id:"LABOR"!=n.state.type?a.id:null}).then((function(e){c()})),n.setState({renderType:"button",data:[],subtierName:"",type:null})},n.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(n.setState({fetching:!0}),n.state.type){case Kd.FLEET.key:WE(Object(wu.a)(Object(wu.a)({},e),{},{tier_type:Bd})).then((function(e){n.setState({data:e.data.results.filter((function(e){return e.parent})),fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}));break;case Kd.FLEET_KIT.key:$E(Object(wu.a)(Object(wu.a)({},e),{},{tier_type:"FLEET_KIT"})).then((function(e){n.setState({data:e.data.results,fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}));break;case Kd.INVENTORY.key:GC(Object(wu.a)(Object(wu.a)({},e),{},{tier_type:"INVENTORY_ITEM"})).then((function(e){n.setState({data:e.data.results.filter((function(e){return e.parent})),fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}));break;case Kd.INVENTORY_KIT.key:QC(e).then((function(e){n.setState({data:e.data.results,fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}));break;case Kd.SUPPLY.key:lk(Object(wu.a)(Object(wu.a)({},e),{},{tier_type:Wd})).then((function(e){n.setState({data:e.data.results,fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}));break;case Kd.LABOR.key:ev(e).then((function(e){n.setState({data:e.data.results,fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}));break;case Kd.DISPOSAL.key:Cg(Object(wu.a)(Object(wu.a)({},e),{},{tier_type:"DISPOSAL"})).then((function(e){n.setState({data:e.data.results,fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}));break;default:n.setState({fetching:!1})}},n.getMenu=function(){return l.a.createElement(_u.a,null,Object.keys(Kd).map((function(e){return l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return n.handleInput(e)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Kd[e].icon}),Kd[e].name))})))},n.state={data:[],renderType:"button",subtierName:"",type:null,fetching:!1},n.wrapperRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this,a=this.state,t=a.renderType,n=a.fetching,c=a.data,i=a.type;return l.a.createElement("div",{className:"col-12 p-0",ref:this.wrapperRef},"button"===t?l.a.createElement("div",{onClick:this.handleDropdown,className:"add-resource-btn add-resources-btn-update text-right-tree"},"+Add Resources"):"dropdown"===t?l.a.createElement("div",{id:"area",className:"row mx-0 add-sub-tier-input-form add-sub-tier-input-form-resources"},l.a.createElement(xu.a,{getPopupContainer:function(){return document.getElementById("area")},visible:!0,placement:"bottomCenter",overlayClassName:"add-adding-dropdown",overlay:this.getMenu,trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link text-uppercase w-100 text-left border-0",onClick:function(e){return e.preventDefault()}},"Add Resources..."))):l.a.createElement("div",{className:"row mx-0 add-sub-tier-input-form add-resources add-search-icon position-relative",id:"area_multi"},l.a.createElement(ku.a,{dropdownClassName:"sub-tier-select",autoFocus:!0,defaultOpen:!0,placeholder:" ",filterOption:!1,getPopupContainer:function(){return document.getElementById("area_multi")},notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,onSearch:function(a){return e.fetchData({search:a})},showSearch:!0,onChange:this.addResource},c.map((function(a){return l.a.createElement(vk,{value:a.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row"},l.a.createElement("div",{className:"vc-select-option-img"},l.a.createElement("img",{src:Kd[i].icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"vc-select-option-data"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},"LABOR"==e.state.type?a.title:"DISPOSAL"==e.state.type?"".concat(a.disposal_code||""," ").concat(a.disposal_code?"-":""," ").concat(a.name):a.name)),a.breadcrumb&&l.a.createElement("div",{className:"col-12"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_right_search_select_small,alt:"",className:"img-fluid"})},a.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,null,e)}))))))))}))),l.a.createElement(Vm.a,{className:"icon-div-search position-absolute border-0 bg-transparent shadow-none p-0 rounded-0"},l.a.createElement("img",{src:Rm.search_icon_gray,alt:"",className:"img-fluid"}))))}}]),t}(n.Component),fk={labelCol:{span:24},wrapperCol:{span:24}},Ek=fu.a.Panel,gk={FLEET_GROUP:Rm.vehicle_group_icon_new,FLEET_KIT_GROUP:Rm.vehicle_group_icon_new,FLEET_KIT:Rm.double_truck,LABOR:Rm.labor_sub_tier_icon,SUPPLY_GROUP:Rm.supply_group_icon_new,INVENTORY_ITEM:Rm.inventory_kit_sub_tier_icon_new,INVENTORY_KIT:Rm.inventory_kit_sub_tier_icon,DISPOSAL:Rm.disposal},bk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,pricing:[],qualifier:[],value:1,selectedPricing:null,fetching:!0,resources:[],warningVisible:!1,deleteResource:null,page:1,totalCount:null,pricingNew:[],serviceText:!1,tooltipData:[]},e.formRef=l.a.createRef(),e.onChange=function(a){e.setState({value:a.target.value})},e.removePrice=function(a){Ng(a.id).then((function(t){var n=e.state.pricing.filter((function(e){return e.id!=a.id}));e.setState({pricing:n,totalCount:n.length})})).catch((function(e){td(e)}))},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return e.showAddPricing(!0,a,!0)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return e.removePrice(a)}},"Remove")))},e.menu_2=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return e.showWarning(!0,a)}},"Remove")))},e.columns=[{title:"dry Name",key:"name",render:function(e){var a,t;return"FLEET_KIT"==e.item_type?l.a.createElement("div",{id:"FLEET_KIT_".concat(e.id),className:"d-flex align-items-center ".concat((null===e||void 0===e?void 0:e.resource_item.fleet_group.length)>0?"fleet-kit-parent":"")},l.a.createElement("img",{alt:" ",className:"img-fluid",src:gk[e.item_type]}),l.a.createElement("span",{className:"ml-2"},e.resource_name)):"FLEET_KIT_GROUP"==e.item_type?l.a.createElement("div",{"data-id":"FLEET_KIT_".concat(e.fleet_id),className:"d-flex align-items-center fleet-kit-child"},l.a.createElement("img",{alt:" ",className:"img-fluid",src:gk[e.item_type]}),l.a.createElement("span",{className:"ml-2"},e.name)):l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:" ",className:"img-fluid",src:gk[e.item_type]}),l.a.createElement("span",{className:"ml-2"},"DISPOSAL"===e.item_type?"".concat((null===(a=e.resource_item)||void 0===a?void 0:a.disposal_code)||""," ").concat((null===(t=e.resource_item)||void 0===t?void 0:t.disposal_code)?"-":""," ").concat(e.resource_name):"FLEET_KIT_GROUP"===(null===e||void 0===e?void 0:e.item_type)?"".concat(null===e||void 0===e?void 0:e.name):e.resource_name))}},{title:"edit remove",key:"edit_remove",render:function(a){return l.a.createElement("div",{className:"d-flex align-items-center justify-content-end"},l.a.createElement("span",{className:"resource-type-title"},bd("FLEET_KIT_GROUP"===a.item_type?"FLEET GROUP":a.item_type)),l.a.createElement(xu.a,{trigger:"click",overlay:function(){return e.menu_2(a)}},l.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))))}}],e.handleRequiredLabel=function(){var a=e.state.resources,t=a.find((function(e){return"LABOR"==e.item_type})),n=a.find((function(e){return"FLEET_KIT"==e.item_type})),l=a.find((function(e){return"FLEET_KIT_GROUP"==e.item_type}));console.log(t,n,l,"trio"),t&&n&&l&&(console.log("true"),e.props.handleLabel())},e.removeItem=function(){hg(e.state.deleteResource.id).then((function(a){e.getResource()})).catch((function(e){td(e)}))},e.getResource=function(){vg({item:e.props.item.id}).then((function(a){for(var t,n={},l=["LABOR","FLEET_GROUP","FLEET_KIT","SUPPLY_GROUP","DISPOSAL","INVENTORY_ITEM","INVENTORY_KIT"],c=0;c<l.length;c++)n[l[c]]=c;var i=a.data.results.sort((function(e,a){return n[e.item_type]-n[a.item_type]||e.item_type.localeCompare(a.item_type)})),r=[];i.forEach((function(e,a){r.push(e),"FLEET_KIT"==e.item_type&&e.resource_item.fleet_group.forEach((function(a,t){r.push({item_type:"FLEET_KIT_GROUP",name:a.name,id:a.id,fleet_id:e.id})}))})),e.setState({resources:r}),e.handleRequiredLabel(),e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.item),{},{qualifier:(null===(t=e.props.item.qualifier)||void 0===t?void 0:t.split("^"))||[]}))})).catch((function(e){td(e)}))},e.getPricing=function(){e.setState({loading:!0}),Eg({item:e.props.item.id,page:e.state.page}).then((function(a){setTimeout((function(){e.setState((function(e){return{pricing:[].concat(Object(Ou.a)(e.pricing),Object(Ou.a)(a.data.results)),totalCount:a.data.count}}))}),1e3)})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.showAddPricing=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;a&&e.setState({fetching:!1}),e.setState({visible:a,selectedPricing:t,serviceText:n})},e.handleUpdate=function(a){ug(e.props.item.id,a).then((function(a){Mm.b.success("Line Item Updated Successfully"),e.props.onClose()})).catch((function(e){td(e)}))},e.fetchGroup=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zp(a).then((function(a){e.setState({groups:a.data.results})})).catch((function(e){td(e)}))},e.totalPrice=function(e){for(var a=null===e||void 0===e?void 0:e.table_data,t=0,n=0;n<(null===a||void 0===a?void 0:a.length);n++)if("labor_child"==a[n].item_type){var l=a[n].data;t+=(a[n].hours||1)*Number(Rd(Td(l,a[n].time,a[n].name),e.margin))}else if(a[n].item_type==Bd)t+=(a[n].hours||1)*Number(Rd(Id(a[n].data),e.margin));else if(a[n].item_type==Wd)t+=(a[n].hours||1)*Number(Rd(Ad(a[n].data),e.margin));else if("INVENTORY_ITEM"==a[n].item_type){var c,i,r,s,o;if(a[n].kit_child)t+=((a[n].quantity?a[n].quantity:a[n].initQuantity)||1)*Number(Rd((null===(c=a[n])||void 0===c?void 0:c.unit_cost)||0,(null===(i=a[n])||void 0===i?void 0:i.margin)||0));else t+=(a[n].hours||1)*Number(Rd((null===(r=a[n].data)||void 0===r?void 0:r.unit_cost)||0,(null===(s=a[n])||void 0===s||null===(o=s.data)||void 0===o?void 0:o.margin)||0))}else if("DISPOSAL"==a[n].item_type){var m,d,u,p;t+=(a[n].hours||1)*Number(Rd((null===(m=a[n])||void 0===m||null===(d=m.data)||void 0===d?void 0:d.unit_cost)||0,(null===(u=a[n])||void 0===u||null===(p=u.data)||void 0===p?void 0:p.margin)||0))}return t.toFixed(2)},e.hourPrice=function(a){for(var t=null===a||void 0===a?void 0:a.table_data,n=[],l=0;l<(null===t||void 0===t?void 0:t.length);l++)("labor_child"==t[l].item_type||t[l].item_type==Bd||t[l].item_type==Wd)&&n.push(t[l].hours);var c=n.filter((function(e){return void 0!=e}));return isFinite(Math.max.apply(Math,Object(Ou.a)(c)))?(e.totalPrice(a)/Math.max.apply(Math,Object(Ou.a)(c))).toFixed(2):e.totalPrice(a)},e.showWarning=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({warningVisible:a,deleteResource:t})},e.handleChange=function(a){var t=e.formRef.current.getFieldValue("tax");ug(e.props.item.id,Object(wu.a)(Object(wu.a)({},a),{},{tax:t})).then().catch((function(e){td(e)}))},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.getPricing()}))},e.getBackendPricing=function(a){wg({pricing:(null===a||void 0===a?void 0:a.id)?null===a||void 0===a?void 0:a.id:a}).then((function(a){e.setState({pricingNew:a.data})})).catch((function(e){td(e)}))},e.setSelectedPricing=function(a){e.setState({selectedPricing:a})},e.returnToolTipData=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{style:{borderBottom:"1px solid #BDBDBD",color:"#BDBDBD",marginBottom:5,fontSize:"15px"}},l.a.createElement("img",{src:Rm.teams_labor_no_data_icon,alt:""})," Labor Groups"),l.a.createElement("ul",{style:{paddingLeft:"15px",paddinTop:"5px"}},e.length>0?null===e||void 0===e?void 0:e.map((function(e){return l.a.createElement("li",null,e||"-")})):l.a.createElement("li",null,"-")))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.item&&(this.getResource(),this.getPricing()),this.fetchGroup()}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.pricing,c=t.resources,i=(t.fetching,t.loading),r=t.totalCount,s=t.activeKey,o=(t.tooltipData,this.props.item);return c=null===(e=c)||void 0===e?void 0:e.map((function(e){return delete e.resources,e})),o?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 py-0 resource-row-main"},c.length>0?l.a.createElement("div",{className:"col-12 table-responsive create-dry-table main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",dataSource:c,columns:this.columns,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Resources")))),l.a.createElement(hk,{item:o,getResource:this.getResource})),l.a.createElement("div",{className:"row common-form-card-row common-dry-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleUpdate,onFieldsChange:this.handleChange,ref:this.formRef},fk,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row p-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"tax"},l.a.createElement(vh.a.Group,{style:{width:"100%"}},l.a.createElement(dv.a,null,l.a.createElement(uv.a,{span:2},l.a.createElement(vh.a,{value:!0},"Taxable")),l.a.createElement(uv.a,{span:4},l.a.createElement(vh.a,{value:!1},"Non-taxable"))))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"divider-line-div"})),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("h6",null,"Service Variants"),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(Vm.a,{disabled:0===c.length,onClick:function(){return a.showAddPricing(!0)},className:"new-opportunity-btn text-capitalize"},"+ Create Service Variant")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 my-3 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Once the resources have been added, you can create Service Variants. Names of Service Variants are \u2018Region + Service Variant\u2019s name\u2019, (e.g. NY-Westchester - Sunday)."))),1===this.state.page&&i?l.a.createElement("div",{className:"col-12 d-flex align-items-center text-center loading"},l.a.createElement(Wv.a,{className:"mx-auto"})):n.length>0?l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{className:"vehicle-group-collapse-main dry-group-collapse-main",accordion:!0,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},onChange:function(e){a.setState({activeKey:e},(function(){a.getBackendPricing(e)}))},activeKey:s},n.map((function(e){var t,n,c,i,r;return l.a.createElement(Ek,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center pr-0 justify-content-between"},l.a.createElement("h5",{className:"mb-0 vehicle-group-heading"},"".concat(null===e||void 0===e?void 0:e.region," - ").concat(e.name),l.a.createElement(gE.a,{className:"labor-group-info",placement:"top",title:function(){return a.returnToolTipData(null===e||void 0===e?void 0:e.labor_groups)},overlayStyle:{fontSize:11},arrowPointAtCenter:!0,destroyTooltipOnHide:!0},l.a.createElement("img",{src:Rm.info_small,alt:""}))),l.a.createElement(gE.a,{placement:"top",className:"display_name_info",title:null===e||void 0===e?void 0:e.display_name},l.a.createElement("span",{className:"display_data"},"Display Name: ".concat(e.display_name||"-"," "))),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"show-when-collapsed d-flex align-items-center justify-content-between"},l.a.createElement("ul",{className:"list-inline mb-0 pricing-estimated-ul d-flex align-items-center"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"d-flex align-items-center"},"Hourly Price:")),l.a.createElement("li",{className:"list-inline-item"},"$",(null===e||void 0===e||null===(t=e.hourly_price)||void 0===t?void 0:t.toLocaleString())||"-"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"d-flex align-items-center"},"Daliy Price:")),l.a.createElement("li",{className:"list-inline-item"},"$",(null===e||void 0===e||null===(n=e.daily_price)||void 0===n?void 0:n.toLocaleString())||"-"),l.a.createElement("li",{className:"list-inline-item pl-1"},l.a.createElement("span",{className:"d-flex align-items-center"},"Unit Price:")),l.a.createElement("li",{className:"list-inline-item"},"$",e.price||0," ",(null===e||void 0===e?void 0:e.pricing_uom)&&"/ ".concat(null===e||void 0===e||null===(c=e.pricing_uom)||void 0===c?void 0:c.symbol)))),l.a.createElement("div",{className:"remove-dropdown",onClick:function(e){return e.stopPropagation()}},l.a.createElement(xu.a,{trigger:"click",overlay:function(){return a.menu(e)}},l.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""})))))))),key:e.id},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative"},l.a.createElement(HO,{view:!0,rows:a.state.pricingNew,getBackendPricing:function(){return a.getBackendPricing(e)},margin:e.margin}),l.a.createElement("div",{className:"col-12 show-when-collapse-show footer-data-main footer-data-main-update"},l.a.createElement("div",{className:"row table-footer--1-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0 pricing-estimated-ul"},l.a.createElement("li",{className:"list-inline-item"},"Cost:"),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Hourly Cost:"),l.a.createElement("li",{className:"list-inline-item"},"$",(null===e||void 0===e?void 0:e.hourly_cost)||0),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Daliy Cost:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===e||void 0===e?void 0:e.daily_cost),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Unit Cost:"),l.a.createElement("li",{className:"list-inline-item"},(null===e||void 0===e?void 0:e.unit_cost)?"$".concat(null===e||void 0===e?void 0:e.unit_cost,"/").concat(null===e||void 0===e||null===(i=e.cost_uom)||void 0===i?void 0:i.symbol):"-")))),l.a.createElement("div",{className:"d-flex row table-footer--2-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0 pricing-estimated-ul"},l.a.createElement("li",{className:"list-inline-item"},"Suggested Price:"),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Hourly Price:"),l.a.createElement("li",{className:"list-inline-item"},"$",(null===e||void 0===e?void 0:e.suggested_hourly_price)||0),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Daliy Price:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===e||void 0===e?void 0:e.suggested_daily_price)))),l.a.createElement("div",{className:"d-flex row table-footer--3-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0 pricing-estimated-ul"},l.a.createElement("li",{className:"list-inline-item"},"Price:"),l.a.createElement("li",{className:"list-inline-item border-0 pr-0 position-relative ".concat(0==e.hourly_percentage&&"no-percentage")},l.a.createElement("span",null,"Hourly Price:"),0!=e.hourly_percentage&&l.a.createElement("small",null,e.hourly_percentage>0?"".concat(e.hourly_percentage,"% markup"):"".concat(Math.abs(e.hourly_percentage),"% markdown"))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"theme-color"},"$",e.hourly_price||"-")),l.a.createElement("li",{className:"list-inline-item border-0 pr-0 position-relative ".concat(0==e.daily_percentage&&"no-percentage")},l.a.createElement("span",null,"Daliy Price:"),0!=e.daily_percentage&&l.a.createElement("small",null,e.daily_percentage>0?"".concat(e.daily_percentage,"% markup"):"".concat(Math.abs(e.daily_percentage),"% markdown"))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"theme-color"},"$",e.daily_price||"-")),l.a.createElement("li",{className:"list-inline-item border-0"},l.a.createElement("span",null,"Unit Price:")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"theme-color"},"$",e.price||0," ",(null===e||void 0===e?void 0:e.pricing_uom)&&"/ ".concat(null===e||void 0===e||null===(r=e.pricing_uom)||void 0===r?void 0:r.symbol)))))))))))}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},i?l.a.createElement(Wv.a,null):n.length!==r&&l.a.createElement(Vm.a,{onClick:this.handlePagination},"Load More")))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:0===c.length?{cursor:"not-allowed",opacity:"0.6"}:{},className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{style:0===c.length?{pointerEvents:"none"}:{},className:"col-12 text-center"},l.a.createElement("img",{src:Rm.no_varient,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Service Variants")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{onClick:function(){return a.formRef.current.submit()},className:"validate-btn-main"},"Validate"))))))),l.a.createElement(ZO,{serviceText:this.state.serviceText,data:this.props.item,visible:this.state.visible,resource:this.state.resources,selectedPricing:this.state.selectedPricing,setSelectedPricing:this.setSelectedPricing,onClose:function(e){if(a.showAddPricing(!1),e){a.getBackendPricing(e?e.id:s);var t=Object(Ou.a)(a.state.pricing),n=t.findIndex((function(a){return a.id===e.id}));"-1"!=n?(t[n]=e,a.setState({pricing:t})):(t.push(e),a.setState((function(e){return{pricing:t,totalCount:e.totalCount+1}}))),a.props.callBackData(e)}}}),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return a.showWarning(!1)},resourceWarning:!0,addPricingWarning:!0,confirmClose:function(){a.removeItem(),a.showWarning(!1)},heading:"Are you sure you want to remove this Resource?",subHeadingUOM:"If you choose to remove this Resource, if you already have service variants set up, this might cause issues."})):l.a.createElement(Wv.a,null)}}]),t}(n.Component),Nk=Object(r.withRouter)(bk);var yk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={dataToBeUpdated:null,labelRequired:!0},e.callBackData=function(a){e.setState({dataToBeUpdated:a})},e.handleLabel=function(){e.setState({labelRequired:!1})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this,t=this.props,n=t.visible,c=t.item,i=t.onClose,r=t.regions,s=this.state.dataToBeUpdated;return l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.line_item_icon_green}),l.a.createElement("span",{className:"ml-3"},c.name)),placement:"right",width:"72%",maskClosable:!1,onOk:i,onCancel:i,closable:!0,onClose:function(){return i(s)},visible:n},l.a.createElement("div",{className:"breadcrumb-inner-details inline-item-breadcrumb"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},null===c||void 0===c||null===(e=c.breadcrumb)||void 0===e?void 0:e.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:c.name},l.a.createElement(qm.a,null,c.name)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 my-3 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select the resources you would like to include in your service.",this.state.labelRequired?l.a.createElement("span",{className:"fleet-kit-label"},"Labor and Fleet Group / Fleet Kit are required *"):""))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 tree-heading tree-heading-custom"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"Resource")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))))),l.a.createElement(Nk,{regions:r,item:c,onClose:i,callBackData:function(e){return a.callBackData(e)},handleLabel:this.handleLabel}),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right",style:{padding:"20px 30px 50px 30px"}},l.a.createElement(Vm.a,{className:"ant-btn validate-btn-main-new",onClick:function(){return i(s)}},l.a.createElement("span",null,"Close"))))}}]),t}(n.Component);var wk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this.props,t=a.visible,n=a.item,c=a.onClose;return l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.line_item_icon_green}),l.a.createElement("span",{className:"ml-3"},n.name)),placement:"right",width:"880px",closable:!1,onClose:c,visible:t},l.a.createElement("div",{className:"breadcrumb-inner-details inline-item-breadcrumb"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},null===n||void 0===n||null===(e=n.breadcrumb)||void 0===e?void 0:e.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:null===n||void 0===n?void 0:n.name},l.a.createElement(qm.a,null,null===n||void 0===n?void 0:n.name)))),l.a.createElement(kk,{item:[n],drawerItem:!0,packageData:this.props.packageData,getPackage:this.props.getPackage}))}}]),t}(n.Component),_k={labelCol:{span:24},wrapperCol:{span:24}},Sk=ku.a.Option,xk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onSelect=function(e,a){},n.openDeleteModal=function(e){n.setState({warningModalVisible:!0,deleteItem:e})},n.removeItem=function(){pg(n.state.deleteItem.id).then((function(){n.props.getPackageData(n.props.packageData.id)})),n.showWarningModal(!1)},n.menu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.onEditItem(e)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.onMoveItem(e)}},"Move")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.openDeleteModal(e)}},"Delete")))},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"SERVICE_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"SERVICE_LINE_ITEM")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid mr-2"}),"Service")))},n.handleKeyDown=function(e,a){"Enter"==e.key&&n.onBlurSaveInput(e,a)},n.renderItemTree=function(e){return l.a.createElement("div",{key:e.id,className:"row ml-0 tree-row-main custom-tree-row align-items-center justify-content-between",onClick:function(){return"SERVICE_LINE_ITEM"==e.tier_type&&n.handleItemDrawer(e)}},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},"SERVICE_TIER"===e.tier_type?l.a.createElement("div",{className:"only-text d-flex align-items-center"},l.a.createElement("span",null," ",e.name),l.a.createElement("div",{className:"add-tier-div-plus",onClick:function(e){return e.stopPropagation()}},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return n.addTierMenu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0"},l.a.createElement("span",null,"+"))))):"SERVICE_LINE_ITEM"===e.tier_type?l.a.createElement("div",{onClick:function(){return n.handleItemDrawer(e)},className:"mb-0 d-flex images-with-name children-heading-last align-items-center"},l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid",style:{marginRight:"10px"}}),e.title):l.a.createElement("div",{className:"mb-0 d-flex input-with-name children-heading-last align-items-center"},"SERVICE_LINE_ITEM"===e.item_type&&l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid"}),l.a.createElement(Pm.a,{value:n.state.editFormValue,autoFocus:!0,disabled:n.state.inputLoader,onChange:function(e){return n.setState({editFormValue:e.target.value})},onBlur:function(a){return n.onBlurSaveInput(a,e)},onKeyDown:function(a){return n.handleKeyDown(a,e)}}),n.state.inputLoader&&l.a.createElement(U_.a,{style:{fontSize:"25px",marginLeft:"20px"}})),"SERVICE_TIER"===e.tier_type&&l.a.createElement("span",{className:"d-flex align-items-center small-heading"},e.children.length,l.a.createElement("span",null,l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement("div",{className:"remove-dropdown",onClick:function(e){return e.stopPropagation()}},e.tier_type!==Ud?l.a.createElement(xu.a,{trigger:"click",overlay:function(){return n.menu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0",onClick:function(e){e.preventDefault(),e.stopPropagation()}},l.a.createElement("span",{className:"mr-1"},Yd[e.tier_type].name),l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))):l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree cancel-btn-tree-1 d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){return n.onRemoveInputField(e)}},l.a.createElement("span",null,"Cancel")))))},n.onAddInputField=function(e,a){var t=n.props.packageData.parent.children;t=JSON.parse(JSON.stringify(t)),e.item_type=a;var l=n.handleTreeData(t,e),c=n.state.keys;c.push(e.key),n.setState({treeData:Object(Ou.a)(l),editFormValue:"",keys:c})},n.onEditItem=function(e){var a=n.props.packageData.parent.children;a=JSON.parse(JSON.stringify(a));var t=n.handleTreeData(a,e,!0);n.setState({treeData:Object(Ou.a)(t),editFormValue:e.name})},n.onRemoveInputField=function(e){var a=n.props.packageData.parent.children,t=n.handleTreeData(a);n.setState({treeData:Object(Ou.a)(t)})},n.onMoveItem=function(e){n.setState({selectedTierId:e.id}),n.handleMoveItemDrawer(!0)},n.handleMoveItemDrawer=function(e){n.setState({moveItemDrawer:e})},n.handleItemDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({visibleItemDrawer:!n.state.visibleItemDrawer,itemDrawer:e})},n.handleTreeData=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((function(e){e.title=e.name,e.key=e.id?e.id:e.name;var l=e.children;return t&&a&&a.id===e.id?(e.item_type=a.tier_type,e.tier_type=Ud):!t&&a&&a.id===e.id&&l.unshift({name:"INPUT TITLE"+a.id,tier_type:Ud,children:[],item_type:a.item_type,parent:a}),n.handleTreeData(l,a,t)})),e},n.removeServiceFromTree=function(e){return e.children=e.children.filter((function(e){return"SERVICE_TIER"===e.tier_type})).map((function(e){return n.removeServiceFromTree(e)})),e},n.onBlurSaveInput=function(e,a){if(e.target.value){n.setState({inputLoader:!0});var t={name:e.target.value,tier_type:a.item_type};a.id?ug(a.id,t).then((function(){n.setState({inputLoader:!1}),n.props.getPackageData(n.props.packageData.id)})):(t.parent=a.parent.id,dg(t).then((function(e){n.setState({inputLoader:!1}),n.props.getPackageData(n.props.packageData.id)})))}},n.setFieldData=function(e){var a=[],t=[];if(null===e||void 0===e?void 0:e.parent){a=n.handleTreeData(e.parent.children);var l=JSON.parse(JSON.stringify(e.parent));t=n.removeServiceFromTree(l)}n.props.packageData&&n.setState({treeData:a,tierTreeData:[].concat(Object(Ou.a)(t.children),[{title:"No Tier",key:null}])})},n.handleApplyFilter=function(){var e,a={};null==n.state.tierSelectId?a={parent:null===(e=n.props.packageData.parent)||void 0===e?void 0:e.id}:a={parent:n.state.tierSelectId};ug(n.state.selectedTierId,a).then((function(e){n.setFieldData(n.props.packageData),n.props.getPackageData(n.props.packageData.id),n.handleMoveItemDrawer(!1)})).catch((function(e){td(e)}))},n.clearValues=function(){n.setState({tierSelectId:null})},n.showWarningModal=function(e){n.setState({warningModalVisible:e})},n.onExpand=function(e){n.setState({keys:e})},n.tierTreeOnChange=function(e){n.setState({tierSelectId:e})},n.handleServiceFamily=function(){n.setState({fetching:!0});rg({move_tier:1}).then((function(e){n.setState({serviceFamily:e.data,totalFamilyCount:e.data.count})})).catch((function(e){td(e)}))},n.handlePagination=function(){n.setState((function(e){return{page:e.page+1}}),(function(){n.handleServiceFamily({page:n.state.page})}))},n.handleUpdateFamily=function(e){var a=n.state.serviceFamily.find((function(a){return a.id===e}));n.setFieldData(a)},n.state={treeData:[],tierTreeData:[],lineItems:[],inputLoader:!1,moveItemDrawer:!1,visibleItemDrawer:!1,visibleTierDrawer:!1,itemDrawer:null,tierDrawer:null,tiersData:null,selectedTierId:null,editFormValue:"",keys:[],tiers:[1],childExist:!1,tierSelectId:null,serviceFamily:[]},n.formRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"componentDidMount",value:function(){this.setFieldData(this.props.packageData),this.handleServiceFamily()}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.state,r=i.treeData,s=i.visibleItemDrawer,o=i.itemDrawer,m=i.visibleTierDrawer,d=i.tierDrawer,u=i.tierTreeData;return r.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(L_.a,{defaultExpandAll:!0,className:"custom-tree-structure custom-tree-structure-update",switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),onSelect:this.onSelect,titleRender:this.renderItemTree,treeData:r,onExpand:this.onExpand}),s?l.a.createElement(yk,{visible:s,item:o,onClose:this.handleItemDrawer}):"",m?l.a.createElement(wk,{visible:m,item:d,packageData:this.props.packageData,getPackage:this.props.getPackage,onClose:this.handleTierDrawer}):"",l.a.createElement(mh,{heading:"Are you sure you want to delete this ".concat("SERVICE_TIER"==(null===(e=this.state.deleteItem)||void 0===e?void 0:e.tier_type)?"tier":"Service","?"),okAction:function(){return c.removeItem()},subHeading:l.a.createElement("p",{className:"mb-0 mx-auto",style:{width:"91%"}},l.a.createElement("span",null,"SERVICE_TIER"==(null===(a=this.state.deleteItem)||void 0===a?void 0:a.tier_type)?"If you choose to delete this Tier, the Tier and everything that it includes (Tiers, Services, Service Variants) would be deleted.":"If you choose to delete this Service, this Service and everything that it includes (Service Variants, etc) would be deleted.")),visible:this.state.warningModalVisible,onClose:function(){return c.showWarningModal(!1)},deleteLineItem:!0,cancelText:"No, I want to go back"}),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Move Under...",onOk:function(){return c.handleMoveItemDrawer(!1)},onCancel:function(){return c.handleMoveItemDrawer(!1)},destroyOnClose:!0,closable:!0,visible:this.state.moveItemDrawer,footer:l.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"}},l.a.createElement(Vm.a,{className:"apply-filter-update",onClick:this.clearValues,style:{marginRight:8}},"Clear"),l.a.createElement(Vm.a,{className:"apply-filter-update",onClick:this.handleApplyFilter,type:"primary"},"Apply"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose where this tier / service variant need to be moved."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},_k,{className:"main-inner-form",ref:this.formRef}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"family",label:"Service Family",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{defaultValue:this.props.packageData.id,onChange:this.handleUpdateFamily,onFocus:function(){return c.handleServiceFamily({page:c.state.page})}},(null===(t=this.state.serviceFamily)||void 0===t?void 0:t.length)&&(null===(n=this.state.serviceFamily)||void 0===n?void 0:n.map((function(e){return l.a.createElement(Sk,{value:e.id},e.name)})))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(qO.a,{showSearch:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Please select",allowClear:!0,value:this.state.tierSelectId,showCheckedStrategy:qO.a.SHOW_PARENT,treeDefaultExpandAll:!0,treeData:u,onChange:this.tierTreeOnChange,filterTreeNode:!0,treeNodeFilterProp:"name"})))))))):l.a.createElement("div",null)}}]),t}(n.Component),Ck=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onSelect=function(e,a){},n.openDeleteModal=function(e){n.setState({warningModalVisible:!0,deleteItem:e})},n.removeItem=function(){pg(n.state.deleteItem.id).then((function(){n.props.getPackageData(n.props.packageData.id)})),n.showWarningModal(!1)},n.menu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.onEditItem(e)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.openDeleteModal(e)}},"Delete")))},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"SERVICE_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"SERVICE_LINE_ITEM")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid mr-2"}),"Service")))},n.handleKeyDown=function(e,a){"Enter"==e.key&&n.onBlurSaveInput(e,a)},n.renderItemTree=function(e){return l.a.createElement("div",{key:e.id,className:"row mx-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},"SERVICE_TIER"===e.tier_type?l.a.createElement(l.a.Fragment,null,e.name,l.a.createElement("div",{className:"add-tier-div-plus"},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return n.addTierMenu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0"},l.a.createElement("span",null,"+"))))):"SERVICE_LINE_ITEM"===e.tier_type?l.a.createElement("div",{onClick:function(){if(n.props.drawerItem)return null;n.handleItemDrawer(e)},className:"mb-0 d-flex children-heading-last align-items-center"},l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid",style:{marginRight:"10px"}}),e.title):l.a.createElement("div",{className:"mb-0 d-flex children-heading-last align-items-center"},"SERVICE_LINE_ITEM"===e.item_type&&l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid"}),l.a.createElement(Pm.a,{value:n.state.editFormValue,autoFocus:!0,disabled:n.state.inputLoader,onChange:function(e){return n.setState({editFormValue:e.target.value})},onBlur:function(a){return n.onBlurSaveInput(a,e)},onKeyDown:function(a){return n.handleKeyDown(a,e)}}),n.state.inputLoader&&l.a.createElement(U_.a,{style:{fontSize:"25px",marginLeft:"20px"}})),"SERVICE_TIER"===e.tier_type&&l.a.createElement("span",{className:"d-flex align-items-center small-heading"},e.children.length,l.a.createElement("span",null,l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement("div",{className:"remove-dropdown"},e.tier_type!==Ud?l.a.createElement(xu.a,{trigger:"click",overlay:function(){return n.menu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0",onClick:function(e){e.preventDefault(),e.stopPropagation()}},l.a.createElement("span",{className:"mr-1"},Yd[e.tier_type].name),l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))):l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree cancel-btn-tree-1 d-flex align-items-center border-0 shadow-none p-0",onMouseDown:function(a){return n.onRemoveInputField(e)}},l.a.createElement("span",null,"Cancel")),"cancel")))},n.onAddInputField=function(e,a){var t=n.props.packageData.parent.children;t=JSON.parse(JSON.stringify(t)),e.item_type=a;var l=n.handleTreeData(t,e);n.setState({newTreeData:Object(Ou.a)(l),editFormValue:""})},n.onEditItem=function(e){var a=n.props.packageData.parent.children;a=JSON.parse(JSON.stringify(a));var t=n.handleTreeData(a,e,!0);n.setState({newTreeData:Object(Ou.a)(t),editFormValue:e.name})},n.onRemoveInputField=function(e){var a=n.props.packageData.parent.children,t=n.handleTreeData(a);n.setState({newTreeData:Object(Ou.a)(t)})},n.handleItemDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({visibleItemDrawer:!n.state.visibleItemDrawer,itemDrawer:e})},n.handleTreeData=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((function(e){e.title=e.name,e.key=e.id?e.id:e.name;var l=e.children;return t&&a&&a.id===e.id?(e.item_type=a.tier_type,e.tier_type=Ud):!t&&a&&a.id===e.id&&l.unshift({name:"INPUT TITLE"+a.id,tier_type:Ud,children:[],item_type:a.item_type,parent:a}),n.handleTreeData(l,a,t)})),e},n.onBlurSaveInput=function(e,a){if(e.target.value){n.setState({inputLoader:!0});var t={name:e.target.value,tier_type:a.item_type};a.id?ug(a.id,t).then((function(){n.setState({inputLoader:!1}),n.props.getPackageData(n.props.packageData.id)})):(t.parent=a.parent.id,dg(t).then((function(e){n.setState({inputLoader:!1}),n.props.getPackageData(n.props.packageData.id)})))}},n.setFieldData=function(e){var a=[];(null===e||void 0===e?void 0:e.parent)&&(a=n.handleTreeData(e.parent.children)),n.setState({newTreeData:a})},n.showWarningModal=function(e){n.setState({warningModalVisible:e})},n.state={newTreeData:n.props.item,inputLoader:!1,visibleItemDrawer:!1,visibleTierDrawer:!1,itemDrawer:null,tierDrawer:null,editFormValue:""},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"componentDidMount",value:function(){this.props.drawerItem||this.setFieldData(this.props.packageData)}},{key:"render",value:function(){var e,a,t=this,n=this.state;n.newTreeData,n.visibleItemDrawer,n.itemDrawer,n.visibleTierDrawer,n.tierDrawer;return this.props.item.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(L_.a,{defaultExpandAll:!0,className:"custom-tree-structure custom-tree-structure-update",switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),onSelect:this.onSelect,titleRender:this.renderItemTree,treeData:this.state.newTreeData,autoExpandParent:!1}),l.a.createElement(mh,{heading:"Are you sure you want to delete this ".concat("SERVICE_TIER"==(null===(e=this.state.deleteItem)||void 0===e?void 0:e.tier_type)?"tier":"line item","?"),okAction:function(){return t.removeItem()},subHeading:l.a.createElement("p",{className:"mb-0 mx-auto",style:{width:"91%"}},l.a.createElement("span",null,"To permanently delete"," ","SERVICE_TIER"==(null===(a=this.state.deleteItem)||void 0===a?void 0:a.tier_type)?"Tier":"Line Item",", Select \u201dYes, I want to Continue\u201d")," ",l.a.createElement("br",null),l.a.createElement("span",null,"To cancel, Select \u201dNo, I want to go back\u201d")),visible:this.state.warningModalVisible,onClose:function(){return t.showWarningModal(!1)},deleteLineItem:!0,cancelText:"No, I want to go back"})):l.a.createElement("div",null)}}]),t}(n.Component),Ok={labelCol:{span:24},wrapperCol:{span:24}},kk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleSubmit=function(){Mm.b.success("Service Family updated successfully"),n.props.getPackage(n.props.packageData.id)},n.state={loading:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},Ok,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please build your service family using tiers and services."))),l.a.createElement("div",{className:"col-12 tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"Services")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),l.a.createElement("div",{className:"col-12 p-0"},this.props.drawerItem?l.a.createElement(Ck,this.props):l.a.createElement(xk,this.props)),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(VO,this.props)),l.a.createElement("div",{className:"col-12 p-0 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",onClick:function(){return e.handleSubmit()}},"Save and Continue")))))))}}]),t}(n.Component),jk={labelCol:{span:24},wrapperCol:{span:24}},Ik=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).setFieldData=function(e){n.formRef.current.setFieldsValue({name:e.name,description:e.description})},n.onSubmit=function(e){var a,t;n.setState({buttonLoading:!0}),n.props.packageData?(a=n.props.packageData.id,t=e,md(ad("inventory.family",{id:a}),t)).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Inventory Family updated successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})})):function(e){return od(ad("inventory.family"),e)}(e).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Inventory Family created successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})}))},n.formRef=l.a.createRef(),n.state={buttonLoading:!1},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData&&this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef},jk,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input inventory family name and description."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Inventory Family Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{onBlur:this.handlePackageName,placeholder:"Inventory Family Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",rules:[{required:!1}],className:"position-relative"},l.a.createElement(Pm.a.TextArea,{className:"text-area-main",onBlur:this.handlePackageName,placeholder:"Description"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),Ak=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onBlurSaveInput=function(e){rO({name:e.target.value,parent:n.props.packageData.parent.id,tier_type:n.state.tier_type}).then((function(){n.props.getPackage(n.props.packageData.id),n.setState({visibleInput:!1})}))},n.handleVisibleInput=function(e){n.setState({visibleInput:!n.props.visibleInput,tier_type:e})},n.handleKeyDown=function(e){"Enter"==e.key&&n.onBlurSaveInput(e)},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput("INVENTORY_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Inventory Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput("INVENTORY_ITEM")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.inventory_item_icon,alt:"",className:"img-fluid mr-2"}),"Inventory Item")))},n.state={visibleInput:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state.visibleInput;return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement("div",{className:"row mx-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},l.a.createElement("div",{className:"mb-0 d-flex children-heading-last align-items-center"},l.a.createElement(Pm.a,{onBlur:function(a){return e.onBlurSaveInput(a)},onKeyDown:this.handleKeyDown}))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-red-btn cancel-btn-treed-flex align-items-center",onMouseDown:function(a){e.setState({visibleInput:!1})}},l.a.createElement("span",null,"Cancel")))),l.a.createElement("div",{className:"row mx-0 add-sub-tier-main-row"},l.a.createElement("div",{className:""},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return e.addTierMenu()}},l.a.createElement(Vm.a,{className:"add-sub-tier-btn bg-transparent border-0 rounded-0 shadow-none text-uppercase"},"+ ADD TIER/ITEM")))))}}]),t}(n.Component),Dk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onSelect=function(e,a){},n.removeItem=function(){var e;(e=n.state.deleteItem.id,dd(ad("inventory.inventory",{id:e}))).then((function(){n.props.getPackage(n.props.packageData.id)})),n.showWarningModal(!1)},n.openDeleteModal=function(e){n.setState({warningModalVisible:!0,deleteItem:e})},n.menu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.onEditItem(e)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.openDeleteModal(e)}},"Delete")))},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"INVENTORY_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Inventory Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"INVENTORY_ITEM")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.inventory_item_icon,alt:"",className:"img-fluid mr-2"}),"Inventory Item")))},n.handleKeyDown=function(e,a){"Enter"==e.key&&n.onBlurSaveInput(e,a)},n.renderItemTree=function(e){return l.a.createElement("div",{key:e.id,className:"row ml-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},"INVENTORY_TIER"===e.tier_type?l.a.createElement("div",{className:"only-text d-flex align-items-center"},e.name,l.a.createElement("div",{className:"add-tier-div-plus"},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return n.addTierMenu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0"},l.a.createElement("span",null,"+"))))):"INVENTORY_ITEM"===e.tier_type?l.a.createElement("div",{onClick:function(){return n.handleItemDrawer(e)},className:"mb-0 d-flex images-with-name children-heading-last align-items-center"},l.a.createElement("img",{src:Rm.inventory_item_icon,alt:"",className:"img-fluid",style:{marginRight:"10px"}}),e.title):l.a.createElement("div",{className:"mb-0 d-flex input-with-name children-heading-last align-items-center"},"INVENTORY_ITEM"===e.item_type&&l.a.createElement("img",{src:Rm.inventory_item_icon,alt:"",className:"img-fluid mr-2"}),l.a.createElement(Pm.a,{value:n.state.editFormValue,autoFocus:!0,disabled:n.state.inputLoader,onChange:function(e){return n.setState({editFormValue:e.target.value})},onBlur:function(a){return n.onBlurSaveInput(a,e)},onKeyDown:function(a){return n.handleKeyDown(a,e)}}),n.state.inputLoader&&l.a.createElement(U_.a,{style:{fontSize:"25px",marginLeft:"20px"}})),"INVENTORY_TIER"===e.tier_type&&l.a.createElement("span",{className:"d-flex align-items-center small-heading"},e.children.length,l.a.createElement("span",null,l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement("div",{className:"remove-dropdown"},e.tier_type!==Ud?l.a.createElement(xu.a,{trigger:"click",overlay:function(){return n.menu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0",onClick:function(e){e.preventDefault(),e.stopPropagation()}},l.a.createElement("span",{className:"mr-1"},"INVENTORY_TIER"==e.tier_type?"Inventory Tier":"Inventory Item"),l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))):l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree cancel-btn-tree-1 d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){return n.onRemoveInputField(e)}},l.a.createElement("span",null,"Cancel")))))},n.onAddInputField=function(e,a){var t=n.props.packageData.parent.children;t=JSON.parse(JSON.stringify(t)),e.item_type=a;var l=n.handleTreeData(t,e),c=n.state.keys;c.push(e.key),n.setState({treeData:Object(Ou.a)(l),editFormValue:"",keys:c})},n.onEditItem=function(e){var a=n.props.packageData.parent.children;a=JSON.parse(JSON.stringify(a));var t=n.handleTreeData(a,e,!0);n.setState({treeData:Object(Ou.a)(t),editFormValue:e.name})},n.onRemoveInputField=function(e){var a=n.props.packageData.parent.children,t=n.handleTreeData(a);n.setState({treeData:Object(Ou.a)(t)})},n.handleItemDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({visibleItemDrawer:!n.state.visibleItemDrawer,itemDrawer:e})},n.handleTreeData=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((function(e){e.title=e.name,e.key=e.id?e.id:e.name;var l=e.children;return t&&a&&a.id===e.id?(e.item_type=a.tier_type,e.tier_type=Ud):!t&&a&&a.id===e.id&&l.unshift({name:"INPUT TITLE"+a.id,tier_type:Ud,children:[],item_type:a.item_type,parent:a}),n.handleTreeData(l,a,t)})),e},n.onBlurSaveInput=function(e,a){if(e.target.value){n.setState({inputLoader:!0});var t={name:e.target.value,tier_type:a.item_type};a.id?function(e,a){return md(ad("inventory.inventory",{id:e}),a)}(a.id,t).then((function(){n.props.getPackage(n.props.packageData.id)})).finally((function(){n.setState({inputLoader:!1})})):(t.parent=a.parent.id,rO(t).then((function(e){n.props.getPackage(n.props.packageData.id)})).finally((function(){n.setState({inputLoader:!1})})))}},n.setFieldData=function(e){var a=[];(null===e||void 0===e?void 0:e.parent)&&(a=n.handleTreeData(e.parent.children)),n.setState({treeData:a})},n.showWarningModal=function(e){n.setState({warningModalVisible:e})},n.onExpand=function(e){n.setState({keys:e})},n.state={treeData:[],inputLoader:!1,visibleItemDrawer:!1,itemDrawer:null,editFormValue:"",keys:[]},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"componentDidMount",value:function(){this.setFieldData(this.props.packageData)}},{key:"render",value:function(){var e,a,t=this,n=this.state.treeData;return n.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(L_.a,{defaultExpandAll:!0,className:"custom-tree-structure custom-tree-structure-update",switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),onSelect:this.onSelect,titleRender:this.renderItemTree,treeData:n,onExpand:this.onExpand}),l.a.createElement(mh,{heading:"Are you sure you want to delete this ".concat("INVENTORY_TIER"==(null===(e=this.state.deleteItem)||void 0===e?void 0:e.tier_type)?"Tier":"Inventory Item","?"),okAction:function(){return t.removeItem()},subHeading:l.a.createElement("p",{className:"mb-0 mx-auto",style:{width:"100%"}},"INVENTORY_TIER"==(null===(a=this.state.deleteItem)||void 0===a?void 0:a.tier_type)?"If you choose to delete this Tier, the Tier and everything that it includes (Tiers, Inventory Items) would be deleted.":"If you choose to delete this Inventory Item, the Inventory Item and everything that it includes would be deleted."),visible:this.state.warningModalVisible,onClose:function(){return t.showWarningModal(!1)},deleteLineItem:!0,cancelText:"No, cancel this action",okTitle:"Yes, I want to delete"})):l.a.createElement("div",null)}}]),t}(n.Component),Tk={labelCol:{span:24},wrapperCol:{span:24}},Rk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!1},n}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 tree-heading-second tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"INVENTORY")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},Tk,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please build your inventory family using tiers and inventory items."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Dk,this.props)),l.a.createElement("div",{className:"col-12"},l.a.createElement(Ak,this.props)),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main",onClick:function(){return Mm.b.success("Inventory Family updated successfully!")}},"Save and Continue")))))))}}]),t}(n.Component),Mk=(yO.a.Step,fu.a.Panel),Fk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={current:0,packageData:null,visible:!1,visibleWarning:!1,activeKey:"1",unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.next=function(){e.setState({current:e.state.current+1})},e.setPackage=function(a,t){var n;(null===(n=e.state.packageData)||void 0===n?void 0:n.name)?e.setState((function(){return{packageData:a}})):e.setState((function(){return{packageData:a,unsavedExit:!0}}));var l=null;e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l||e.setState((function(e){return{packageData:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"2")))}}))},e.prev=function(){e.setState({current:e.state.current-1})},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.getPackage=function(a){e.setState({loading:!0}),cO(a).then((function(a){e.setState({packageData:a.data},(function(){var a,t,n,l=null===(a=e.state)||void 0===a?void 0:a.packageData;(null===l||void 0===l?void 0:l.name)&&((null===l||void 0===l||null===(t=l.parent)||void 0===t||null===(n=t.children)||void 0===n?void 0:n.length)?(e.setState({packageData:l,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.props.match.params.id||e.setState({packageData:l,unsavedExit:!0}))}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.packageData;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_packages.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.getPackage(this.props.match.params.id),this.setState({activeKey:this.props.location.editTab||"1"}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.activeKey,n=a.packageData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement("div",{className:"steps-content"},l.a.createElement(fu.a,{onChange:this.collapseOnChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},activeKey:t},l.a.createElement(Mk,{header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*"))),key:"1"},l.a.createElement(Ik,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage})),l.a.createElement(Mk,{header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Inventory Family ",l.a.createElement("sup",null,"*"))),key:"2"},l.a.createElement(Rk,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage})))),l.a.createElement("div",{className:"steps-action common-steps-action d-flex align-items-center justify-content-end"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},className:"border-0 shadow-none text-center",style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{disabled:!n,type:"primary",className:"border-0 shadow-none text-center",onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_packages.view,{id:n.id})):e.handleViewMainButtonCLick()}},"View Inventory Family"))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Inventory Family!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_packages.view,{id:n.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Inventory Family"),"."),okTitle:"View Inventory Family",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_packages.view,{id:n.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Inventory Family?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the inventory family, select View inventoryFamily.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View inventoryFamily",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_packages.view,{id:n.id}))}}))}}]),t}(n.Component),Pk=Object(Lm.b)(null,{setBreadcrumb:Uv})(Fk),Vk=fu.a.Panel,qk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={treeData:[]},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.handleKey=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a){var n=Object(Ou.a)(a);return n.forEach((function(a,n){a.type||(a.key=t?t+"parent"+n:a.id),a.children=e.handleKey(a.children)})),n}},e.checkRequired=function(e){return!(e.margin&&e.name&&e.unit_cost&&e.uom&&e.uom_array&&e.internal_location&&e.inventory_uom&&e.inventory_family)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;cO(this.props.match.params.id).then((function(a){var t=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Inventory Families",url:zm.dashboard.management.inventory.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t);var n=e.handleKey(a.data.parent.children,a.data.parent.id);e.setState({treeData:n,itemPackage:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.treeData,n=a.itemPackage;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{onChange:this.collapseOnChange,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Vk,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_packages.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row mx-0 px-0 summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"mb-0 text-uppercase"},"Inventory Family Name"),l.a.createElement("h5",{className:"mb-0"},null===n||void 0===n?void 0:n.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-8 col-lg-9"},l.a.createElement("h6",{className:"mb-0 text-uppercase"},"Description"),l.a.createElement("h5",{className:"mb-0"},null===n||void 0===n?void 0:n.description)))),l.a.createElement(Vk,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Inventory Family ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_packages.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"row mx-0 px-0 pt-0 summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"INVENTORY")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),this.state.treeData.length>0?l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(L_.a,{className:"custom-tree-structure",showLine:!0,filterTreeNode:function(e){return!("INVENTORY_ITEM"!==e.tier_type||!Jd(e))},defaultExpandAll:!0,switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),selectable:!1,titleRender:function(e){return l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between ".concat("INVENTORY_ITEM"===e.tier_type&&Jd(e)&&"is-required","\n\n                                "),onClick:function(){return"INVENTORY_ITEM"===e.tier_type?o.push(Object(Sf.a)(zm.dashboard.management.inventory.inventory_items.view,{id:e.id})):null}},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},"INVENTORY_ITEM"===e.tier_type&&l.a.createElement("img",{src:Rm.inventory_item_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},e.name)),e.children&&0!==e.children.filter((function(e){return!e.type})).length&&l.a.createElement("div",{className:"branch-div-tg d-flex align-items-center"},l.a.createElement("span",{className:"count-span-tg"},e.children.filter((function(e){return!e.type})).length),l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"d-flex align-items-center"},"INVENTORY_ITEM"===e.tier_type&&Jd(e)&&l.a.createElement("div",{className:"d-flex mr-3 align-items-center"},l.a.createElement("p",{className:"mb-0 ml-1",style:{fontSize:"11px",fontStyle:"italic",color:"#EB5757"}},"Please complete all required information to avoid issues")),l.a.createElement("div",{className:"text-green-tag text-right-tree"},Yd[e.tier_type].name)))},treeData:t})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"50px"},className:"row mx-0 mb-0 mt-3 border-0 no-data-card-row align-items-center bg-transparent justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.Inventory_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Inventory")))))))))))}}]),t}(n.Component),Lk=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(qk)),Uk=vf.a.TabPane,Bk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(Uk,{tab:"Summary",key:"1"},l.a.createElement(Lk,null)))))))}}]),t}(n.Component),Wk={labelCol:{span:24},wrapperCol:{span:24}},Yk=ku.a.Option,Kk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={subtiers:[],fetching:!1},e.formRef=l.a.createRef(),e.fetchSubTiers=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),GC(a).then((function(a){e.setState({subtiers:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(Qm.a)($m.a.mark((function e(a,t,n){return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.data===this.props.data){e.next=4;break}return e.next=3,this.fetchSubTiers({search:this.props.name});case 3:this.formRef.current.setFieldsValue({name:this.props.name,subtier:this.props.subtier});case 4:case"end":return e.stop()}}),e,this)})));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.subtiers,c=this.props,i=c.name,r=c.subtier,s=c.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},Wk,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Lorem ipsum"))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Inventory Group Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{value:i,onChange:function(e){return s("name",e.target.value)},placeholder:"Inventory Group Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"subtier",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Inventory Family / Sub-Tiers *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative custom-select-main"},l.a.createElement(ku.a,{showSearch:!0,placeholder:"Inventory Family / Sub-Tiers *",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchSubTiers()},onSearch:function(a){return e.fetchSubTiers({search:a})},value:r,dropdownClassName:"custom-select-drop-main",onChange:function(a){s("subtier",a),e.formRef.current.setFieldsValue({name:n.find((function(e){return e.id===a})).name}),s("name",n.find((function(e){return e.id===a})).name)},optionLabelProp:"label"},n.map((function(e){return l.a.createElement(Yk,{key:e.id,value:e.id,label:e.name},l.a.createElement(xS,{img:e.parent?Rm.list_nested_icon_green:Rm.package_icon_vehicle,data:e}))}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),Gk=Object(r.withRouter)(Kk),zk={labelCol:{span:24},wrapperCol:{span:24}},Hk=ku.a.Option,$k=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={loading:!1},e.formRef=l.a.createRef(),e.handleSubmit=function(a){a.name=e.props.name,a.parent=e.props.subtier,e.props.data?YC(e.props.data.id,a).then((function(a){e.props.setData(a.data)})).catch((function(e){td(e)})):BC(a).then((function(a){e.props.setData(a.data)})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.data&&this.formRef.current.setFieldsValue(Object(wu.a)({},this.props.data))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},zk,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Lorem ipsum"))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"unit",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Unit of Measurement *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(Hk,{value:"UNITS"},"Units"),l.a.createElement(Hk,{value:"FEET"},"Feet"),l.a.createElement(Hk,{value:"POUNDS"},"Pounds")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"unit_cost",label:"Estimated Unit Cost *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"margin",label:"Margin *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},placeholder:"%"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),Qk=Object(r.withRouter)($k),Jk=fu.a.Panel;function Zk(e){}var Xk=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:null,name:"",subtier:void 0,visible:!1,visibleWarning:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.onChange=function(a,t){e.setState(Object(zv.a)({},a,t))},e.setData=function(a){e.setState({data:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Inventory Group",url:zm.dashboard.management.inventory.inventory_groups.create}],t=[{title:"Edit Inventory Group",url:zm.dashboard.management.inventory.inventory_groups.edit}];this.props.match.params.id?(this.props.setBreadcrumb(t),KC(this.props.match.params.id).then((function(a){e.setState({data:a.data,name:a.data.name,subtier:a.data.parent})})).catch((function(e){td(e)}))):this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.data,n=a.name,c=a.subtier;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},defaultActiveKey:["1"],onChange:Zk},l.a.createElement(Jk,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(Gk,{onChange:this.onChange,name:n,subtier:c,data:t})),l.a.createElement(Jk,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Cost ",l.a.createElement("sup",null,"*")))),key:"2"},l.a.createElement(Qk,{onChange:this.onChange,name:n,subtier:c,data:t,setData:this.setData}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){return e.showConfirmModal(!0)},type:"primary"},"View Inventory Group"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Inventory Group!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_groups.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Inventory Group"),"."),okTitle:"View Inventory Group",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_groups.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Inventory Group?")}))}}]),t}(n.Component),ej=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(Xk)),aj=fu.a.Panel,tj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:null,visible:!1,loading:!0,inventory:[],kits:[]},e.fetchInventory=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};HC(Object(wu.a)(Object(wu.a)({},a),{},{item:e.props.match.params.id})).then((function(a){e.setState({inventory:a.data.results})})).catch((function(e){td(e)}))},e.fetchInventoryKit=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eO(Object(wu.a)(Object(wu.a)({},a),{},{item:e.props.match.params.id})).then((function(a){e.setState({kits:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),KC(this.props.match.params.id).then((function(a){var t=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Inventory Groups",url:zm.dashboard.management.inventory.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t),e.setState({data:a.data,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),this.fetchInventory(),this.fetchInventoryKit()}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.data;return t.loading?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement(Wv.a,null))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(aj,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information"),l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.management.inventory.inventory_groups.edit,{id:a.props.match.params.id}))},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Inventory group name"),l.a.createElement("h5",{className:"mb-0"},n.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Inventory Family / tier"),l.a.createElement("h5",{className:"mb-0"},n.inventory_package.name)))))),l.a.createElement(aj,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Cost"),l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(Sf.a)(zm.dashboard.management.inventory.inventory_groups.edit,{id:a.props.match.params.id}))},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Unit of measurement"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},(null===(e=n.unit)||void 0===e?void 0:e.toLowerCase())||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated unit cost"),l.a.createElement("h5",{className:"mb-0"},xd(n.unit_cost||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Margin"),l.a.createElement("h5",{className:"mb-0"},n.margin||"0"))))))),l.a.createElement(aj,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Inventory Items ")),key:"3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mb-4 new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(e){return a.fetchInventory({search:e.target.value})},placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement(Vm.a,{onClick:function(){return a.props.onTabChange("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),this.state.inventory.length>0?l.a.createElement("div",{className:"row mx-0"},this.state.inventory.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.inventory_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content float-left"},l.a.createElement("h6",null,e.name),l.a.createElement("p",{className:"mb-0"},e.sku))))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.supply_icon_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Inventory Items"))))),l.a.createElement(aj,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Inventory Kits ")),key:"4"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mb-4 new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(e){return a.fetchInventoryKit({search:e.target.value})},placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement(Vm.a,{onClick:function(){return a.props.onTabChange("3")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),this.state.kits.length>0?l.a.createElement("div",{className:"row mx-0"},this.state.kits.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.inventory_set_box_icons_green,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content d-flex align-items-center justify-content-between float-left"},l.a.createElement("div",null,l.a.createElement("h6",null,e.item.name),l.a.createElement("p",{className:"mb-0 text-capitalize"},"QTY:",e.quantity)),l.a.createElement("div",null,l.a.createElement("h6",null,"Subtotal:"," ",xd(e.quantity*e.item.unit_cost))))))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.inventory_kits_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Inventory Items"))))))))))}}]),t}(n.Component),nj=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(tj)),lj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={inventory:[]},e.fetchInventory=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};HC(Object(wu.a)(Object(wu.a)({},a),{},{item:e.props.match.params.id})).then((function(a){e.setState({inventory:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchInventory()}},{key:"render",value:function(){var e=this,a=this.state.inventory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"opportunity_info-collapse account-summary-header row mx-0 align-items-center"},l.a.createElement("span",null,"Inventory Items"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header "},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.fetchInventory({search:a.target.value})},placeholder:"Inventory Items"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))))),a.length>0?l.a.createElement("div",{className:"row mx-0 summary-collapse-inner-row-main"},a.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.inventory_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content float-left"},l.a.createElement("h6",null,e.name),l.a.createElement("p",{className:"mb-0"},e.sku))))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.supply_icon_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Inventory Items"))))}}]),t}(n.Component),cj=Object(r.withRouter)(lj),ij=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={kits:[]},e.fetchInventoryKit=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eO(Object(wu.a)(Object(wu.a)({},a),{},{item:e.props.match.params.id})).then((function(a){e.setState({kits:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchInventoryKit()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"opportunity_info-collapse account-summary-header row mx-0 align-items-center"},l.a.createElement("span",null,"Inventory Kits"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header "},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.fetchInventoryKit({search:a.target.value})},placeholder:"Inventory Items"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))))),this.state.kits.length>0?l.a.createElement("div",{className:"row mx-0 mt-3"},this.state.kits.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.inventory_set_box_icons_green,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content d-flex align-items-center justify-content-between float-left"},l.a.createElement("div",null,l.a.createElement("h6",null,e.item.name),l.a.createElement("p",{className:"mb-0 text-capitalize"},"QTY:",e.quantity)),l.a.createElement("div",null,l.a.createElement("h6",null,"Subtotal:"," ",xd(e.quantity*e.item.unit_cost))))))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.inventory_kits_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Inventory Items"))))}}]),t}(n.Component),rj=Object(r.withRouter)(ij),sj=vf.a.TabPane,oj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={active:"1"},e.onTabChange=function(a){e.setState({active:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{activeKey:this.state.active,onChange:this.onTabChange,className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(sj,{tab:"Summary",key:"1"},l.a.createElement(nj,{onTabChange:this.onTabChange})),l.a.createElement(sj,{tab:"Inventory Items",key:"2"},l.a.createElement(cj,null)),l.a.createElement(sj,{tab:"Inventory Kits",key:"3"},l.a.createElement(rj,null)))))))}}]),t}(n.Component),mj={labelCol:{span:24},wrapperCol:{span:24}},dj=ku.a.Option,uj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).formRef=l.a.createRef(),n.fetchGroups=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({fetching:!0});var a=[];GC(Object(wu.a)(Object(wu.a)({},e),{},{not_group:!0})).then((function(e){null!=n.props.inventory?(a=e.data.results.filter((function(e){return e.id!=n.props.inventory.id})),n.setState({groups:a,fetching:!1})):n.setState({groups:e.data.results,fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}))},n.handleSubmit=function(e){var a;n.props.inventory?("string"===typeof e.parent&&(e.parent=n.props.inventory.parent.id),zC(n.props.inventory.id,e).then((function(e){n.props.setInventory(e.data,2),Mm.b.success("Inventory updated successfully")})).catch((function(e){td(e)}))):(e.tier_type="INVENTORY_ITEM",(a=e,od(ad("inventory.inventory"),a)).then((function(e){n.props.setInventory(e.data,2),Mm.b.success("Inventory created successfully")})).catch((function(e){td(e)})))},n.state={groups:[],fetching:!1},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){var n,l;e.inventory!==this.props.inventory&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.inventory),{},{parent:null===(n=this.props)||void 0===n||null===(l=n.inventory)||void 0===l?void 0:l.parent.name}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=(a.groups,this.props),c=n.subtier,i=n.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},mj,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Inventory Item Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter a nickname to distinguish the inventory item"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"parent",label:"Inventory Family / Tier *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,placeholder:"Search Inventory Family / Tier",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,dropdownClassName:"custom-select-drop-main",value:c,onFocus:function(){return e.fetchGroups()},onSearch:function(a){return e.fetchGroups({search:a})},onChange:function(e){i("subtier",e)},optionLabelProp:"label"},this.state.groups.map((function(e,a){return l.a.createElement(dj,{key:a,label:e.name,value:e.id},l.a.createElement(xS,{style:{width:"28px"},data:e,img:e.tier_type?null:Rm.inventory_item_icon,type:e.tier_type?"Inventory Tier":"Inventory Family"}))}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),pj=Object(r.withRouter)(uj),vj={labelCol:{span:24},wrapperCol:{span:24}},hj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={selectValue:null,unit_type:null},e.handleSubmit=function(a){var t=e.state,n=t.selectValue,l=t.unit_type;if(n){var c=Object(wu.a)(Object(wu.a)({},a),{},{uom:n,unit_type:l});zC(e.props.inventory.id,c).then((function(a){e.props.setInventory(a.data,5),Mm.b.success("Inventory updated successfully")})).catch((function(e){td(e)}))}},e.handleFormChange=function(){var a=e.formRef.current,t=a.getFieldValue,n=a.setFieldsValue,l=(t("unit_cost")/100*t("margin")||0)+parseFloat(t("unit_cost"));n({price:parseFloat(l.toFixed(2))})},e.handleSelectChange=function(a){var t=a.value;if(t){var n,l="string"===typeof t&&t.includes("COM")?"COM":"UOM";if("COM"===l){var c=null===t||void 0===t?void 0:t.split("_");n=parseInt(c[c.length-1])}else n=t;e.setState({selectValue:n,unit_type:l})}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l=this;(null===(e=this.props.match)||void 0===e||null===(a=e.params)||void 0===a?void 0:a.id)&&$C(null===(t=this.props.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id).then((function(e){var a,t,n="COM"===e.data.unit_type?null===(a=e.data.com)||void 0===a?void 0:a.find((function(a){return a.id===e.data.uom.id})):null===(t=e.data.uom_array)||void 0===t?void 0:t.find((function(a){return a.id===e.data.uom.id}));l.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.data),{},{uom:{value:null===n||void 0===n?void 0:n.id,label:null===n||void 0===n?void 0:n.name}})),l.setState({selectValue:null===n||void 0===n?void 0:n.id,unit_type:e.data.unit_type}),l.handleFormChange()})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e,a,t,n,c,i,r=this.props.inventory,s=this.state,o=s.selectValue,m="COM"===s.unit_type?null===r||void 0===r||null===(e=r.com)||void 0===e||null===(a=e.find((function(e){return e.id===o})))||void 0===a?void 0:a.abbreviation:null===r||void 0===r||null===(t=r.uom_array)||void 0===t||null===(n=t.find((function(e){return e.id===o})))||void 0===n?void 0:n.symbol;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},vj,{hideRequiredMark:!0,onFieldsChange:this.handleFormChange,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"This section gives us the information we need in order to factor the price of an inventory item (e.g. garbage bag) when creating a line item."))),l.a.createElement("div",{className:"col-12 col-sm-6 position-relative pb-3"},l.a.createElement(Fm.a.Item,{name:"uom",label:"Unit of Measurement *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{labelInValue:!0,onChange:this.handleSelectChange,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Option"},null===r||void 0===r||null===(c=r.uom_array)||void 0===c?void 0:c.map((function(e){return l.a.createElement(ku.a.Option,{value:e.id},e.name," (",e.symbol,")")})),null===r||void 0===r||null===(i=r.com)||void 0===i?void 0:i.map((function(e){var a="COM_".concat(e.id);return l.a.createElement(ku.a.Option,{key:a,value:a},e.name," (",e.abbreviation,")")})))),l.a.createElement("small",{className:"small-text-tag",style:this.state.selectValue?null:{color:"red"}},"You're choosing Unit of Measurements from your pre-selected Custom and Universal Unit of Measurements")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"unit_cost",label:"Estimate Unit Cost *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"})),this.state.selectValue?l.a.createElement("small",{className:"cost-symbol"},m):l.a.createElement("small",{className:"cost-symbol",style:{color:"red"}},"UOM")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"margin",label:"Margin *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{min:0,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},placeholder:"%"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"price",label:"Price",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"})),this.state.selectValue?l.a.createElement("small",{className:"cost-symbol"},m):l.a.createElement("small",{className:"cost-symbol",style:{color:"red"}},"UOM")),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),fj=Object(r.withRouter)(hj),Ej=ku.a.Option,gj={labelCol:{span:24},wrapperCol:{span:24}},bj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:null,buttonLoading:!1,visibleConfirm:!1,county:[],updateMainState:null},e.formRef=l.a.createRef(),e.showConfirmModal=function(a){e.setState({visibleConfirm:a}),e.setState({data:null})},e.onSubmit=function(a){if(e.props.editData){var t=Object(wu.a)(Object(wu.a)({},a),{},{type:"INVENTORY",inventory_id:e.props.match.params.id});tv(e.props.editData.id,t).then((function(a){Mm.b.success("Internal Location Updated Successfully"),e.formRef.current.resetFields(),e.props.editData&&e.props.callbackContact(a.data),e.props.onClose()})).catch((function(e){td(e)}))}else{nv(Object(wu.a)(Object(wu.a)({},a),{},{type:"INVENTORY"})).then((function(a){Mm.b.success("Internal Location Created Successfully"),e.props.callbackContact(a.data,!0),e.props.onClose()})).catch((function(e){td(e)}))}},e.populateData=function(){var a;e.props.editData?e.formRef.current.setFieldsValue(Object(wu.a)({},e.props.editData)):(null===(a=e.formRef)||void 0===a?void 0:a.current)&&e.formRef.current.setFieldsValue({country:"United States"})},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(a){td(a),e.setState({load:!1})}))}},{key:"render",value:function(){var e=this,a=this.props.editData,t=this.state,n=t.county,c=t.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,closable:!0,destroyOnClose:!0,title:a?"Edit Warehouse":"Create Warehouse",visible:this.props.visible,onClose:this.props.onClose,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){e.formRef.current.submit()},type:"primary"},"".concat(this.props.editData?"Update":"Create")))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef},gj,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Location Name *")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Location Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"epa_id",label:"EPA ID",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"ABC123456789"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(n,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(c,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"ZIP/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Select Country",suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},np.map((function(e){return l.a.createElement(Ej,{value:e.name},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")},maxLength:12,parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"123-456-7890"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{type:"email",placeholder:"Email Address"})))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this Warehouses!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view this Warehouses, select View Facility"),okTitle:"View Warehouses",okAction:function(){e.showConfirmModal(!1),e.props.onClose()},visible:this.state.visibleConfirm,onClose:function(){e.showConfirmModal(!1),e.props.onClose()}}))}}]),t}(n.Component),Nj=Object(r.withRouter)(bj),yj={labelCol:{span:24},wrapperCol:{span:24}},wj=ku.a.Option,_j=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={visible:!1,location:[],selectValue:null,sites:[],newSites:[],unit_type:""},e.showFacility=function(a){e.setState({visible:a})},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent",onClick:function(){return e.handleRemove(a.id)}},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent",onClick:function(){return e.handleEdit(a.internal_location)}},"Edit")))},e.getInventoryLocation=function(){sO({inventory_item:e.props.match.params.id}).then((function(a){e.setState({newSites:a.data.results[0].location||[]})})).catch((function(e){td(e)}))},e.fetchContacts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(wu.a)({},a);av(t).then((function(a){e.setState({contacts:a.data.results})})).catch((function(e){}))},e.handleEdit=function(a){e.setState({editData:a,visible:!0})},e.handleRemove=function(a){dO(a).then((function(t){var n=Object(Ou.a)(e.state.newSites).filter((function(e){return a!==e.id}));e.setState({newSites:n},(function(){return e.props.getInventoryItem()})),Mm.b.success("deleted!")})).catch((function(e){td(e)}))},e.handleSubmit=function(){e.props.setInventory(e.props.inventory,6),Mm.b.success("Inventory updated successfully!")},e.showContact=function(){e.setState({visible:!1,editData:null})},e.handleSelect=function(a){var t,n=e.props.match.params.id?e.props.match.params.id:null===(t=e.props.inventory)||void 0===t?void 0:t.id;e.formRef.current.setFieldsValue({internal_locations:null});var l=e.state.newSites.map((function(e){return e.internal_location.id})),c=e.state.contacts.find((function(e){return a==e.id}));l.push(c.id),e.setState({sites:l});var i="COM"===e.state.unit_type;oO({inventory_item:n,unit_type:e.state.unit_type,uom:i?null:e.state.selectValue,com:i?e.state.selectValue:null,internal_location_id:l.map((function(e){return e})),location:[]}).then((function(a){e.props.getInventoryItem(),e.setState({newSites:a.data.location})})).catch((function(e){td(e)}))},e.callbackContact=function(a,t){if(t){var n=e.state.newSites.map((function(e){return e.internal_location}));n.push(a);var l="COM"===e.state.unit_type;oO({disposal:e.props.match.params.id,unit_type:e.state.unit_type,uom:l?null:e.state.selectValue,com:l?e.state.selectValue:null,internal_location_id:n.map((function(e){return e.id})),inventory_item:e.props.inventory.id,location:[]}).then((function(a){e.setState({newSites:a.data.location})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}else{var c=e.state.newSites.findIndex((function(e){return e.internal_location.id==a.id})),i=e.state.newSites.slice();i[c].internal_location=a,e.setState({newSites:i})}},e.handleQtyChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].qty=l,e.setState({newSites:c});var i={qty:l,type:"INVENTORY",id:t.id,inventory_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleMinQtyChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].min_qty=l,e.setState({newSites:c});var i={min_qty:l,type:"INVENTORY",id:t.id,inventory_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleMaxQtyChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].max_qty=l,e.setState({newSites:c});var i={max_qty:l,type:"INVENTORY",id:t.id,inventory_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleUnitCostChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].unit_cost=l,e.setState({newSites:c});var i={unit_cost:l,type:"INVENTORY",id:t.id,inventory_id:e.props.match.params.id};e.updateLocation(i,t)}},e.updateLocation=function(e,a){mO(a.id,e).then().catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleSelectChange=function(a){var t=a.value;if(t){var n,l="string"===typeof t&&t.includes("COM")?"COM":"UOM";if("COM"===l){var c=null===t||void 0===t?void 0:t.split("_");n=parseInt(c[c.length-1])}else n=t;e.setState({selectValue:n,unit_type:l})}},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e;(null===(e=this.props.match)||void 0===e?void 0:e.params.id)&&this.getInventoryLocation()}},{key:"render",value:function(){var e,a,t,n,c,i=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 px-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},yj,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row col-12-12"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"This section gives us the information we need in order to account an inventory item (e.g. garbage bag) at a warehouse"))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"uom",label:"Unit of Measurement *"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Option",onChange:this.handleSelectChange},null===(e=this.props.inventory)||void 0===e||null===(a=e.uom_array)||void 0===a?void 0:a.map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},e.name," (",e.symbol,")")})),null===(t=this.props.inventory)||void 0===t||null===(n=t.com)||void 0===n?void 0:n.map((function(e){var a="COM_".concat(e.id);return l.a.createElement(ku.a.Option,{key:a,value:a},e.name," (",e.abbreviation,")")}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 divider-row"},"You are choosing a unit of measurement from your pre-selected custom and universal units of measurement.")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"internal_locations",label:"Warehouses",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"custom-search-select",disabled:!this.state.selectValue,showSearch:!0,placeholder:"Search",notFoundContent:null,filterOption:!1,onFocus:function(){return i.fetchContacts()},onSearch:this.debounceEvent((function(e){return i.fetchContacts({search:e})}),1e3),onChange:this.handleSelect},null===(c=this.state.contacts)||void 0===c?void 0:c.map((function(e){return l.a.createElement(wj,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row custom-tree-row-1"},l.a.createElement("div",{className:"common-select-option-row col-12 d-flex align-items-center"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block ml-1"},e.name),l.a.createElement("p",{style:{color:"#BDBDBD",fontSize:"11px"},className:"mb-0"},e.street_address||"",", ",e.city||"",","," ",e.state||"",",",e.zip||""," ",e.country||"")),l.a.createElement("div",{style:{display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Warehouse"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute text-capitalize",disabled:!this.state.selectValue,onClick:function(){return i.showFacility(!0)}},"+ Create")),this.state.newSites.length>0?this.state.newSites.map((function(e,a){var t,n,c="COM"==(null===e||void 0===e?void 0:e.unit_type)?null===e||void 0===e||null===(t=e.com)||void 0===t?void 0:t.abbreviation:null===e||void 0===e||null===(n=e.uom)||void 0===n?void 0:n.symbol;return l.a.createElement("div",{className:"col-12 location-row-main",key:e.internal_location.id},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("h6",{className:"mb-0"},"Location ",a+1))),l.a.createElement("div",{className:"row site-details-row-card site-details-row-card-2 radius-bottom-0  position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.internal_location.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(e.internal_location.street_address," ").concat(e.internal_location.name," ").concat(e.internal_location.city," ").concat(e.internal_location.state," ").concat(e.internal_location.country))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},e.internal_location.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(e.internal_location.phone))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return i.menu(e,a)},trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"row custom-design-update"},l.a.createElement("div",{className:"col-12 table-responsive mt-0 custom-internal-location"},l.a.createElement("div",{className:"row mx-0 custom-table-thead"},l.a.createElement("div",{className:"custom-th-main"},l.a.createElement("div",null,"Min QTY",l.a.createElement("br",null),l.a.createElement("span",{className:"font-weight-light"},"(REORDER POINT)"))),l.a.createElement("div",{className:"custom-th-main"},l.a.createElement("div",null,"Max QTY",l.a.createElement("br",null)," ",l.a.createElement("span",{className:"font-weight-light"},"(SINGLE RESTOCK QTY)"))),l.a.createElement("div",{className:"custom-th-main"},l.a.createElement("div",null,"Current QTY"))),l.a.createElement("div",{className:"row mx-0 custom-table-tbody"},l.a.createElement("div",{className:"custom-td position-relative"},l.a.createElement(ap.a,{value:e.min_qty||0,onBlur:function(t){return i.handleMinQtyChange(t,e,a)}}),l.a.createElement("small",{style:{top:"22px"},className:"position-absolute unit-cost-name"},c)),l.a.createElement("div",{className:"custom-td position-relative"},l.a.createElement(ap.a,{value:e.max_qty||0,onBlur:function(t){return i.handleMaxQtyChange(t,e,a)}}),l.a.createElement("small",{style:{top:"22px"},className:"position-absolute unit-cost-name"},c)),l.a.createElement("div",{className:"custom-td position-relative"},l.a.createElement(ap.a,{value:e.qty||0,onBlur:function(t){return i.handleQtyChange(t,e,a)}}),l.a.createElement("small",{style:{top:"22px"},className:"position-absolute unit-cost-name"},c))))))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Warehouses"))))),l.a.createElement("div",{className:"col-12 p-0 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))),l.a.createElement(Nj,{callbackContact:this.callbackContact,fetchContacts:this.fetchContacts,editData:this.state.editData,visible:this.state.visible,onClose:function(e){return i.showContact(!1,e)}}))}}]),t}(n.Component),Sj=Object(r.withRouter)(_j),xj={labelCol:{span:24},wrapperCol:{span:24}},Cj=Pm.a.Group,Oj=ku.a.Option,kj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onChangeCheck=function(e){},n.updateData=function(){var e,a=null===(e=n.props)||void 0===e?void 0:e.com,t={com:[].concat(Object(Ou.a)(a),Object(Ou.a)(n.state.newComId))};zC(n.props.inventory.id,t).then((function(e){n.props.setInventory(e.data),Mm.b.success("Inventory updated successfully"),n.props.onClose(),n.setState({subUnitNames:[],comName:"",factor:null,abbr:"",newComId:[]})})).catch((function(e){td(e)}))},n.sendComData=function(){var e={name:n.state.comName,factor:n.state.factor,uom:n.state.uomSelect||n.props.baseUnitValue,abbreviation:n.state.abbr};n.props.editData?Pg(n.props.editData.id,e).then((function(e){n.setState({newComId:[]},(function(){return n.updateData()})),Mm.b.success("successfully added!")})).catch((function(e){td(e)})):Mg(e).then((function(e){n.setState({newComId:[e.data.id]},(function(){return n.updateData()})),Mm.b.success("successfully added!")})).catch((function(e){td(e)}))},n.handleNameChange=function(e){n.setState({comName:e.target.value})},n.handleAbbrChange=function(e){n.setState({abbr:e.target.value})},n.state={subUnitNames:[],comName:"",uomSelect:null,factor:null,newComId:[],abbr:""},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var a,t=this.props.editData;e.editData!=this.props.editData&&this.setState({comName:null===t||void 0===t?void 0:t.name,factor:null===t||void 0===t?void 0:t.factor,uomSelect:null===t||void 0===t||null===(a=t.uom)||void 0===a?void 0:a.id,abbr:null===t||void 0===t?void 0:t.abbreviation})}},{key:"render",value:function(){var e,a,t=this,n=this.props,c=n.inventory,i=(n.selectedUom,n.baseUnitValue);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Custom Unit of Measurement")),centered:!0,width:500,closable:!0,onClose:function(){t.props.onClose(),t.setState({subUnitNames:[],comName:"",factor:null,abbr:"",newComId:[]})},placement:"right",visible:this.props.visible,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:this.props.onClose},"Cancel"),l.a.createElement(Vm.a,{onClick:this.sendComData,type:"primary"},(null===(e=this.props.editData)||void 0===e?void 0:e.id)?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 unit-measurement-row-drawer pt-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-4"},l.a.createElement("div",{className:"col-12"},l.a.createElement("p",null,"Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint."," ")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},xj,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Custom Unit of Measurement Name *"),l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.info_small})),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{type:"text",placeholder:"MY UOM",value:this.state.comName,onChange:function(e){return t.handleNameChange(e)}}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Abbreviation *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{type:"text",placeholder:"Symbol",value:this.state.abbr,onChange:function(e){return t.handleAbbrChange(e)}}))),l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",null,"Conversion")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"types",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Custom UOM *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(Cj,{compact:!0},l.a.createElement(Pm.a,{disabled:!0,style:{width:"40%",borderRight:"0",borderRadius:"6px 0 0 6px"},defaultValue:"1"}),l.a.createElement(Pm.a,{disabled:!0,style:{width:"50%",borderLeft:"0",borderRadius:"0 6px 6px 0"},value:this.state.abbr})),l.a.createElement("span",{className:"equal-sign position-absolute"},"=")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"types",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Universal UOM *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Cj,{compact:!0},l.a.createElement(ap.a,{style:{width:"30%",borderRight:"0",borderRadius:"6px 0 0 6px"},onChange:function(e){return t.setState({factor:e})},value:this.state.factor||null}),l.a.createElement(ku.a,{className:"custom-pound-select",style:{width:"70%"},suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),onChange:function(e){return t.setState({uomSelect:e})},value:this.state.uomSelect||i,disabled:!0},null===c||void 0===c||null===(a=c.uom_array)||void 0===a?void 0:a.map((function(e){return l.a.createElement(Oj,{value:e.id},e.name," ","(".concat(e.symbol,")"))})))))))))))))))))))}}]),t}(n.Component),jj=(Pm.a.Group,ku.a.Option,{labelCol:{span:24},wrapperCol:{span:24}}),Ij=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,com:[],editData:null,baseUnitValue:null},e.showCustomUnitCreate=function(a,t){e.setState({visible:a,editData:t})},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"w-100 p-0 text-left bg-transparent border-0 shadow-none",onClick:function(){return e.showCustomUnitCreate(!0,a)}},"Edit")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"w-100 p-0 text-left bg-transparent border-0 shadow-none",onClick:function(){return e.handleDelete(a.id)}},"Remove")))},e.handleDelete=function(a){Fg(a).then((function(a){Mm.b.success("Successfully deleted"),e.props.getInventoryItem()})).catch((function(e){td(e)}))},e.handleSubmit=function(){e.props.setInventory(e.props.inventory,4),Mm.b.success("Inventory updated successfully!")},e.handleSelectChange=function(a){e.setState({baseUnitValue:a})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i=this,r=this.state,s=r.visible,o=r.baseUnitValue,m=this.props.inventory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},jj,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select Universal Units of Measurement to add Custom Units of Measurement."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"base_unit",label:"Base Unit of Measurement *",rules:[{required:!0,message:"Please select Custom UOM"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Option",disabled:!(null===m||void 0===m?void 0:m.uom_array),value:o,onChange:this.handleSelectChange},null===(e=this.props.inventory)||void 0===e||null===(a=e.uom_array)||void 0===a?void 0:a.map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},"".concat(e.name," (").concat(e.symbol,")"))})))),l.a.createElement("small",{class:"small-text-tag"},"You are choosing a unit of measurement from your pre-selected universal units of measurement.")),0==this.state.com.length?l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{onClick:function(){o&&i.showCustomUnitCreate(!0)},className:"row mx-0 cursor-pointer common-card-upload pointer-no-card"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.measuring_tape_gray_new,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0",style:{color:o?"#38BC94":"#4F4F4F"}},"Create Custom Units of Measurement")))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row measurement-row-details"},l.a.createElement("div",{className:"col-12 margin-tb-30"},l.a.createElement(Vm.a,{onClick:function(){return i.showCustomUnitCreate(!0)},className:"edit-create-btn text-uppercase",disabled:!o},"Add")))),this.state.com.length>0&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 custom-uom-table custom-uom-table-2"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"custom uom name"),l.a.createElement("th",null,"abbreviation"),l.a.createElement("th",null,"conversion"))),l.a.createElement("tbody",null,null===(t=this.state.com)||void 0===t?void 0:t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name||"-"),l.a.createElement("td",null,e.abbreviation||"-"),l.a.createElement("td",null,l.a.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"1",e.abbreviation," = ",e.factor||1,e.uom.symbol||"-"),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return i.menu(e)},trigger:["click"]},l.a.createElement("a",{className:"ant-dropdown-link more-btn-tag position-absolute",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))))))}))))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(kj,{callbackFacility:this.callbackFacility,visible:s,com:null===(n=this.state.com)||void 0===n?void 0:n.map((function(e){return e.id})),inventory:this.props.inventory,editData:this.state.editData,selectedUom:this.state.com.length>0?null===(c=this.state.com[0])||void 0===c?void 0:c.uom:null,baseUnitValue:o,setInventory:this.props.setInventory,onClose:function(e){i.showCustomUnitCreate(!1),e&&i.props.getInventoryItem()}}))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t;return{com:(null===e||void 0===e||null===(t=e.inventory)||void 0===t?void 0:t.com)||[]}}}]),t}(n.Component),Aj=Object(r.withRouter)(Ij);function Dj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("account.vendor_account");return id(a,e)}function Tj(e){return id(ad("account.vendor_account",{id:e}))}function Rj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("account.vendor_account");return od(a,e)}function Mj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=ad("account.vendor_account",{id:a});return md(t,e)}function Fj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("account.vendor_main_address");return od(a,e)}function Pj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("account.vendor_billing_address");return od(a,e)}function Vj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=ad("account.vendor_main_address",{id:a});return md(t,e)}function qj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=ad("account.vendor_billing_address",{id:a});return md(t,e)}var Lj=fu.a.Panel,Uj=ku.a.Option,Bj={labelCol:{span:24},wrapperCol:{span:24}};var Wj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).formRef=l.a.createRef(),n.mainRef=l.a.createRef(),n.populateVendorData=function(){var e,a,t,l,c,i,r,s,o,m,d;(n.props.visible&&n.mainRef.current.setFieldsValue({country:"US",country_1:"US"}),n.props.editData)&&(n.formRef.current.setFieldsValue({name:n.props.editData.name,ein:null===(e=n.props.editData)||void 0===e?void 0:e.ein,account_1099:null===(a=n.props.editData)||void 0===a?void 0:a.account_1099}),n.mainRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},n.props.editData.main_address),{},{phone_number:null===(t=n.props.editData)||void 0===t||null===(l=t.main_address)||void 0===l?void 0:l.phone,apartment_1:null===(c=n.props.editData.billing_address)||void 0===c?void 0:c.apartment,street_address_1:null===(i=n.props.editData.billing_address)||void 0===i?void 0:i.street_address,country_1:null===(r=n.props.editData.billing_address)||void 0===r?void 0:r.country,city_1:null===(s=n.props.editData.billing_address)||void 0===s?void 0:s.city,state_1:null===(o=n.props.editData.billing_address)||void 0===o?void 0:o.state,zip_code_1:null===(m=n.props.editData.billing_address)||void 0===m?void 0:m.zip_code,county_1:null===(d=n.props.editData.billing_address)||void 0===d?void 0:d.county})),n.setState({vendor:n.props.editData}))},n.handleCreateVendor=function(e){var a=Object(wu.a)(Object(wu.a)({},e),{},{account_type:"VENDOR"});n.props.editData?Mj(a,n.props.editData.id).then((function(e){n.setState((function(a){return{vendor:e.data,activeKey:[].concat(Object(Ou.a)(a.activeKey),["2"])}})),Mm.b.success("Vendor Account Updated Successfully"),n.props.handleVendorInfo(e.data)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Rj(a).then((function(e){Mm.b.success("Vendor Account Created Successfully"),n.setState((function(a){return{vendor:e.data,unsavedExit:!0,activeKey:[].concat(Object(Ou.a)(a.activeKey),["2"])}})),n.props.handleVendorInfo(e.data,!0)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},n.handleSubmit=function(e){var a,t,l,c={street_address:e.street_address,apartment:e.apartment,city:e.city,state:e.state,zip_code:e.zip_code,country:e.country||"US",phone:e.phone_number,email:e.email,account:n.state.vendor.id},i={street_address:e.street_address_1,apartment:e.apartment_1,city:e.city_1,state:e.state_1,zip_code:e.zip_code_1,country:e.country_1||"US",is_same_main_address:n.state.checked,account:n.state.vendor.id};(null===(a=n.props.editData)||void 0===a?void 0:a.main_address)&&(null===(t=n.props.editData)||void 0===t?void 0:t.billing_address)?Vj(c,null===(l=n.props.editData)||void 0===l?void 0:l.main_address.id).then((function(e){var a;qj(i,null===(a=n.props.editData)||void 0===a?void 0:a.billing_address.id).then((function(a){n.setState({main:e.data,billing:a.data}),Mm.b.success("Address updated Successfully"),n.props.handleVendorAddress(e.data,a.data)}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Fj(c).then((function(e){Pj(i).then((function(a){n.setState({main:e.data,billing:a.data},(function(){n.setState({requiredSuccessModalVisible:!0},(function(){n.setState({unsavedExit:!1})}))})),n.props.handleVendorAddress(e.data,a.data,!0),Mm.b.success("Address created Successfully")}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},n.handleCheckbox=function(e){n.setState({checked:e.target.checked},(function(){if(n.state.checked){var e=n.mainRef.current,a=e.setFieldsValue,t=e.getFieldValue;a({street_address_1:t("street_address"),apartment_1:t("apartment"),city_1:t("city"),state_1:t("state"),zip_code_1:t("zip_code"),country_1:t("country"),county_1:t("county")})}}))},n.phoneNumberValidate=function(e,a,t){(null===a||void 0===a?void 0:a.toString().length)<10?t("minimum digits should be 10"):t()},n.checkDisable=function(){return!(n.state.vendor&&n.state.main&&n.state.billing)},n.onCollapseChange=function(e){n.setState({activeKey:e})},n.showRequiredSuccessModal=function(e){n.setState({requiredSuccessModalVisible:e})},n.handleClose=function(){n.setState({activeKey:["1"]}),n.props.onClose()},n.onNumberOnlyChange=function(e){var a=e.keyCode||e.which,t=String.fromCharCode(a);new RegExp("[0-9]").test(t)||e.preventDefault()},n.handleEinChange=function(e){var a=wd(e.target.value);n.setState({ein:a},(function(){n.formRef.current.setFieldsValue({ein:n.state.ein})}))},n.handleCountyChange=function(e){n.mainRef.current.setFieldsValue({state:null});var a=n.state.county.filter((function(a){return a.county===e}));n.setState({updateMainState:a}),1===(null===a||void 0===a?void 0:a.length)&&n.mainRef.current.setFieldsValue({state:a[0].state})},n.handleBillingCountyChange=function(e){n.mainRef.current.setFieldsValue({state_1:null});var a=n.state.county.filter((function(a){return a.county===e}));n.setState({updateBillingState:a}),1===(null===a||void 0===a?void 0:a.length)&&n.mainRef.current.setFieldsValue({state_1:a[0].state})},n.state={checked:!1,unsavedExit:!1,requiredSuccessModalVisible:!1,activeKey:["1"],county:[],updateMainState:null,updateBillingState:null},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data}),e.setState({updateBillingState:a.data})})).catch((function(a){td(a),e.setState({load:!1})}))}},{key:"render",value:function(){var e=this,a=this.props.editData,t=this.state,n=t.county,c=t.updateMainState,i=t.updateBillingState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:a?"Edit Vendor":"Create Vendor",visible:this.props.visible,afterVisibleChange:this.populateVendorData,onOk:this.props.onClose,closable:!0,onClose:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.handleClose()},onCancel:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.handleClose()},className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){e.state.unsavedExit?e.setState({drawerVisible:!0}):e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{type:"primary",disabled:this.checkDisable(),onClick:this.props.onClose},a?"Update Vendor":"Create Vendor"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:this.onCollapseChange,activeKey:this.state.activeKey,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Lj,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleCreateVendor},Bj,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Account Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_type",label:"Account Type *"},l.a.createElement(Pm.a,{disabled:!0,placeholder:"Vendor"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"ein",label:"EIN",rules:[]},l.a.createElement(Pm.a,{placeholder:"00-0000000",onKeyPress:this.onNumberOnlyChange,maxLength:"10",onChange:this.handleEinChange}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_1099",label:"1099",rules:[]},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:"YES"},"Yes"),l.a.createElement(ku.a.Option,{value:"NO"},"No")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"epa_id",label:"EPA ID",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"ABC123456789"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(Lj,{disabled:!this.state.vendor,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information *"))),key:"2",forceRender:!0},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",Object.assign({},Bj,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Fm.a,Object.assign({},Bj,{ref:this.mainRef,onFinish:this.handleSubmit,className:"main-inner-form w-100"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mt-3"},"Main Address")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(n,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"please input your city"}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(c,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"please input your zip"}]},l.a.createElement(Pm.a,{placeholder:"ZIP/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",initialValue:"US",rules:[{required:!0,message:"please select your Country"}]},l.a.createElement(ku.a,null,np.map((function(e){return l.a.createElement(Uj,{value:e.code,key:e.code},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone_number",label:"Phone Number *",rules:[{required:!0,message:"please input your phone number"},{validator:this.phoneNumberValidate}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")},maxLength:12,parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"please input your Email"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))),l.a.createElement("div",{className:"hr-line col-12"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 my-3 align-items-center justify-content-between"},l.a.createElement("h5",{className:"m-0"},"Billing Address"),l.a.createElement(Fm.a.Item,{name:"is_same_main_address"},l.a.createElement(tp.a,{checked:this.state.checked,onChange:function(a){return e.handleCheckbox(a)}},"Same as Main Address")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address_1",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"apartment_1",label:"Apartment, Suite, etc",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"county_1",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleBillingCountyChange,placeholder:"Select"},Object(lp.uniqBy)(n,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city_1",label:"City *",rules:[{required:!0,message:"please input your city"}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state_1",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(i,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code_1",label:"ZIP/Postal Code *",rules:[{required:!0,message:"please input your zip"}]},l.a.createElement(Pm.a,{placeholder:"ZIP/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country_1",label:"Country *",initialValue:"US",rules:[{required:!0,message:"please select your Country"}]},l.a.createElement(ku.a,{placeholder:"Select"},np.map((function(e){return l.a.createElement(Uj,{value:e.code,key:e.code},e.name)}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))))))))))),l.a.createElement(Hh,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",onOK:function(){e.showRequiredSuccessModal(!1)},okText:"Continue"}),l.a.createElement(wp,{visible:this.state.drawerVisible,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){e.props.onClose(),e.setState({drawerVisible:!1,activeKey:["1"],vendor:null})},onCancel:function(){e.setState({drawerVisible:!1})}}))}}]),t}(n.Component),Yj={labelCol:{span:24},wrapperCol:{span:24}},Kj=ku.a.Option,Gj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,location:[],newLoc:[],selectValue:null},e.formRef=l.a.createRef(),e.showVendor=function(a){e.setState({visible:a,editData:null})},e.getInventoryVendor=function(){uO({inventory_item:e.props.match.params.id}).then((function(a){e.setState({newLoc:a.data.results[0].vendor})})).catch((function(e){td(e)}))},e.getAllAccounts=function(){Dj().then((function(a){e.setState({location:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleSelectChange=function(a){e.setState({selectValue:a.value})},e.handleRefNumChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newLoc.slice();c[n].reference_number=l,e.setState({newLoc:c});var i={reference_number:l,id:t.id,inventory_id:e.props.match.params.id};e.updateVendorMeasurement(i,t)}},e.handleItemSelectChange=function(a,t,n){if(a){var l,c="string"===typeof a&&a.includes("COM")?"COM":"UOM",i={},r=e.state.newLoc.slice();if("COM"===c){var s=null===a||void 0===a?void 0:a.split("_");l=s[s.length-1],r[n].vendor_com=l,r[n].unit_type=c,i.vendor_com=l}else l=a,r[n].vendor_uom=l,r[n].unit_type=c,i.vendor_uom=l;e.setState({newLoc:r}),i=Object(wu.a)(Object(wu.a)({},i),{},{id:t.id,unit_type:c,inventory_id:e.props.match.params.id}),e.updateVendorMeasurement(i,t)}},e.handleUnitCostChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newLoc.slice();c[n].unit_cost=l,e.setState({newLoc:c});var i={unit_cost:l,id:t.id,inventory_id:e.props.match.params.id};e.updateVendorMeasurement(i,t)}},e.updateVendorMeasurement=function(e,a){vO(a.id,e).then().catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleSelect=function(a){var t,n=e.props.match.params.id?e.props.match.params.id:e.props.inventory.id;e.formRef.current.setFieldsValue({vendors:null});var l=null===(t=e.state.newLoc)||void 0===t?void 0:t.map((function(e){return e.vendor.id})),c=e.state.location.find((function(e){return a==e.id}));l.push(c.id),pO({inventory_item:Number(n),uom:e.state.selectValue,vendor_id:l.map((function(e){return e})),vendor:[]}).then((function(a){e.setState({newLoc:a.data.vendor})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.showVendorContact=function(){e.setState({visibleVendors:!1,editVendorData:null})},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent",onClick:function(){return e.handleRemove(a.id)}},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent",onClick:function(){return e.handleEdit(a.vendor)}},"Edit")))},e.handleEdit=function(a){e.setState({editData:a,visible:!0})},e.handleVendorInfo=function(a,t){if(t){var n=e.state.newLoc.map((function(e){return e.vendor}));n.push(a),pO({inventory_item:e.props.match.params.id,vendor_id:n.map((function(e){return e.id})),vendor:[]}).then((function(a){e.setState({newLoc:a.data.vendor}),e.showVendorContact()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}else{var l=e.state.newLoc.findIndex((function(e){var t;return(null===(t=e.vendor)||void 0===t?void 0:t.id)==a.id})),c=e.state.newLoc.slice();c[l].vendor=a,e.setState({newLoc:c})}},e.handleVendorAddress=function(a,t,n){var l=e.state.newLoc.slice();if(n){var c=e.state.newLoc.findIndex((function(e){var t;return(null===(t=e.vendor)||void 0===t?void 0:t.id)==a.account}));l[c].vendor.main_address=a,l[c].vendor.billing_address=t}else{if(a)l[e.state.newLoc.findIndex((function(e){var t,n;return(null===(t=e.vendor)||void 0===t||null===(n=t.main_address)||void 0===n?void 0:n.id)==a.id}))].vendor.main_address=a;if(t)l[e.state.newLoc.findIndex((function(e){var a,n;return(null===(a=e.vendor)||void 0===a||null===(n=a.billing_address)||void 0===n?void 0:n.id)==t.id}))].vendor.billing_address=t}e.setState({newLoc:l})},e.handleRemove=function(a){hO(a).then((function(t){var n=Object(Ou.a)(e.state.newLoc).filter((function(e){return a!==e.id}));e.setState({newLoc:n}),Mm.b.success("deleted!")})).catch((function(e){td(e)}))},e.handleSubmit=function(){e.props.setInventory(e.props.inventory,7),Mm.b.success("Inventory updated successfully!")},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.getInventoryVendor(),this.getAllAccounts()}},{key:"render",value:function(){var e,a,t=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},Yj,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"This section tells us how many suppliers this inventory item can come from, what each suppliers\u2019 costs, and what each supplier charges us for it. This also gives us the data in order to create a purchase order for this inventory item."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"vendors",label:"Vendors",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon search-overlap"},l.a.createElement(ku.a,{placeholder:"Search",showSearch:!0,filterOption:!1,onFocus:function(){return t.getAllAccounts()},onChange:this.handleSelect,dropdownClassName:"option-design-fix",className:"custom-search-select"},this.state.location.map((function(e){var a,t,n,c,i;return l.a.createElement(Kj,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row custom-tree-row-1"},l.a.createElement("div",{className:"common-select-option-row col-12 d-flex align-items-center"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("img",{style:{height:"30px"},src:Rm.vendor_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block ml-1"},e.name),l.a.createElement("p",{style:{color:"#BDBDBD",fontSize:"11px"},className:"mb-0"},(null===(a=e.main_address)||void 0===a?void 0:a.street_address)||"",","," ",(null===(t=e.main_address)||void 0===t?void 0:t.city)||"",","," ",(null===(n=e.main_address)||void 0===n?void 0:n.state)||"",",",(null===(c=e.main_address)||void 0===c?void 0:c.zip_code)||""," ",(null===(i=e.main_address)||void 0===i?void 0:i.country)||"")),l.a.createElement("div",{style:{display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Vendor"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute",onClick:function(){return t.showVendor(!0)}},"+ Create"))),l.a.createElement("div",{className:"row"},(null===(e=this.state.newLoc)||void 0===e?void 0:e.length)>0?null===(a=this.state.newLoc)||void 0===a?void 0:a.map((function(e,a){var n,c,i,r,s,o,m,d,u,p=null===(n=e.vendor)||void 0===n?void 0:n.main_address,v=null===(c=t.props.inventory)||void 0===c||null===(i=c.uom_array)||void 0===i||null===(r=i.find((function(a){return a.id===e.vendor_uom})))||void 0===r?void 0:r.symbol;return l.a.createElement("div",{className:"col-12 col-12-12"},l.a.createElement("div",{className:"row location-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-3"},"Vendor ",a+1)),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 site-details-row-card site-details-row-card-2 radius-bottom-0  position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.waste_management_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===(s=e.vendor)||void 0===s?void 0:s.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat((null===p||void 0===p?void 0:p.street_address)||""," ").concat((null===p||void 0===p?void 0:p.city)||""," ").concat((null===p||void 0===p?void 0:p.state)||""," ").concat((null===p||void 0===p?void 0:p.country)||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},(null===p||void 0===p?void 0:p.email)||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},(null===p||void 0===p?void 0:p.phone)||"-")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return t.menu(e,a)},trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"row mx-0 custom-design-update"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{className:"position-relative",label:"Item Reference Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"00000",type:"number",defaultValue:e.reference_number,onBlur:function(n){return t.handleRefNumChange(n,e,a)}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{label:"Unit of Measurement *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Option",onChange:function(n){return t.handleItemSelectChange(n,e,a)},value:"UOM"===(null===e||void 0===e?void 0:e.unit_type)?null===e||void 0===e?void 0:e.vendor_uom:"COM_".concat(null===e||void 0===e?void 0:e.vendor_com)},null===(o=t.props.inventory)||void 0===o||null===(m=o.uom_array)||void 0===m?void 0:m.map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},e.name," (",e.symbol,")")})),null===(d=t.props.inventory)||void 0===d||null===(u=d.com)||void 0===u?void 0:u.map((function(e){var a="COM_".concat(e.id);return l.a.createElement(ku.a.Option,{key:a,value:a},e.name," (",e.abbreviation,")")})))),l.a.createElement("small",{className:"small-text-input"},"You're choosing Unit of Measurement's from your pre-",l.a.createElement("br",null),"selected custom and universal Unit of Measurement.")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{className:"position-relative",label:"Unit Cost *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement("small",{className:"vendor-dollar position-absolute"},"$"),l.a.createElement(ap.a,{placeholder:"0.00",style:{paddingLeft:12},value:e.unit_cost,onBlur:function(n){return t.handleUnitCostChange(n,e,a)}}),l.a.createElement("small",{style:{top:"14px"},className:"position-absolute unit-cost-name"},v)))))))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.vendor_gray_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Vendors"))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mt-0 validate-div-col text-md-right mt-4"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(Wj,{editData:this.state.editData,visible:this.state.visible,handleVendorInfo:this.handleVendorInfo,handleVendorAddress:this.handleVendorAddress,onClose:function(){return t.showVendor(!1)}}))}}]),t}(n.Component),zj=Object(r.withRouter)(Gj),Hj=(fu.a.Panel,{labelCol:{span:24},wrapperCol:{span:24}}),$j=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).formRef=l.a.createRef(),n.onChange=function(e){n.state.value?(n.showConfirmModal(!0),n.setState({newValue:e})):n.setState({value:e},(function(){return n.getSubUnitName()}))},n.onCheckChange=function(e,a){var t=n.state.subUnitNames;t.forEach((function(t){t.id===a&&(t.isChecked=e.target.checked)}));var l=null===t||void 0===t?void 0:t.filter((function(e){return 1==e.isChecked})).map((function(e){return e.id}));n.setState({selectedCheckboxes:l})},n.showConfirmModal=function(e){n.setState({visibleConfirm:e,data:null})},n.getUnitTypes=function(){Tg().then((function(e){n.setState({unit_types:e.data.results})})).catch((function(e){td(e)}))},n.getSubUnitName=function(){var e,a,t,l,c,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(null===(e=n.props.inventory)||void 0===e?void 0:e.uom_array)&&(null===(a=n.props.inventory)||void 0===a?void 0:a.uom_array[0])&&(null===(t=n.props.inventory)||void 0===t||null===(l=t.uom_array[0])||void 0===l||null===(c=l.unit_type)||void 0===c?void 0:c.id),o=null===(i=n.props.inventory)||void 0===i?void 0:i.uom_array;r.unit=n.state.value?n.state.value:s,Rg(r).then((function(e){n.setState({subUnitNames:e.data},(function(){var e;o&&o.forEach((function(e){e.isChecked=!0}));var a=null===(e=n.state.subUnitNames)||void 0===e?void 0:e.map((function(e){return(null===o||void 0===o?void 0:o.find((function(a){return a.id===e.id})))||e}));n.setState({subUnitNames:a})}))})).catch((function(e){td(e)}))},n.handleSubmit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.uom_array=n.state.selectedCheckboxes;var a=n.props.match.params.id?n.props.match.params.id:n.props.inventory.id;zC(a,e).then((function(e){n.props.setInventory(e.data,3),Mm.b.success("Inventory updated successfully"),n.props.onClose()})).catch((function(e){td(e)}))},n.state={value:null,data:null,buttonLoading:!1,visibleConfirm:!1,unit_types:[],subUnitNames:[],selectedCheckboxes:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l;this.getUnitTypes(),this.getSubUnitName(),this.setState({value:(null===(e=this.props.inventory)||void 0===e?void 0:e.uom_array)&&(null===(a=this.props.inventory)||void 0===a?void 0:a.uom_array[0])&&(null===(t=this.props.inventory)||void 0===t||null===(n=t.uom_array[0])||void 0===n||null===(l=n.unit_type)||void 0===l?void 0:l.id)})}},{key:"render",value:function(){var e,a,t,n,c=this,i=null===(e=this.state)||void 0===e||null===(a=e.unit_types)||void 0===a?void 0:a.find((function(e){return e.id===c.state.value})),r=(this.state.value,{display:"block",height:"40px",lineHeight:"25px"});return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer drawer-update",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Universal Units of Measurement")),centered:!0,width:1e3,closable:!0,onClose:function(){var e,a,t,n,l;c.props.onClose(),c.setState({value:(null===(e=c.props.inventory)||void 0===e?void 0:e.uom_array)&&(null===(a=c.props.inventory)||void 0===a?void 0:a.uom_array[0])&&(null===(t=c.props.inventory)||void 0===t||null===(n=t.uom_array[0])||void 0===n||null===(l=n.unit_type)||void 0===l?void 0:l.id)},(function(){return c.getSubUnitName()}))},placement:"right",visible:this.props.visible,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:this.props.onClose},"Cancel"),l.a.createElement(Vm.a,{type:"primary",onClick:function(){return c.handleSubmit()}},"Create"))},l.a.createElement("div",{className:"row mx-0 unit-measurement-row-drawer pt-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 border-right-1"},l.a.createElement("div",{className:"row mt-4"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select a type of unit of measurement to select unit(s) of measurements."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},Hj,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"types",label:"",rules:[{required:!1,message:""}],className:"position-relative"},this.state.unit_types.map((function(e){return l.a.createElement(vh.a,{style:r,onChange:function(){return c.onChange(e.id)},checked:c.state.value===e.id,key:e.id},e.name,l.a.createElement("small",null,1==e.id?" (e.g. pieces)":2==e.id?" (e.g. gram, kilogram, pound, etc.)":3==e.id?" (e.g. inch, foot, milimeter, etc.)":" (e.g. pint, quart, gallon, etc.)"))}))))))))),this.state.value&&l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"col-12 mt-4"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row unit-measurement-table"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row custom-table-header"},l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Selected")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Unit Name")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Unit",l.a.createElement("bt",null),"Symbol")))),l.a.createElement("div",{className:"col-12 custom-table-body p-0 bg-white"},l.a.createElement("div",{className:"custom-table-row custom-row-heading row mx-0"},null===i||void 0===i?void 0:i.name),null===(t=this.state)||void 0===t||null===(n=t.subUnitNames)||void 0===n?void 0:n.map((function(e){return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-2 bg-white row mx-0",key:e.id},l.a.createElement("div",{className:"custom-table-cell-td justify-content-center bg-white"},l.a.createElement(tp.a,{checked:e.isChecked,onChange:function(a){return c.onCheckChange(a,e.id)}})),l.a.createElement("div",{className:"custom-table-cell-td justify-content-center text-center bg-white"},e.name),l.a.createElement("div",{className:"custom-table-cell-td justify-content-center text-center bg-white"},e.symbol))})))))))))))),l.a.createElement(iv,{heading:"Are you sure you want to change universal unit of measurements?",subHeadingUOM:l.a.createElement("p",{className:"mb-0",style:{width:"98%"}},"If you continue, this will affect all unit of measurements in this inventory item."),uomWarning:!0,okAction:function(){c.showConfirmModal(!1),c.setState({value:c.state.newValue},(function(){return c.getSubUnitName()}))},visible:this.state.visibleConfirm,onClose:function(){c.showConfirmModal(!1)}}))}}]),t}(n.Component),Qj=Object(r.withRouter)($j),Jj={labelCol:{span:24},wrapperCol:{span:24}},Zj=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={visible:!1},e.showUniversalType=function(a){e.setState({visible:a})},e.handleSubmit=function(){e.props.setInventory(e.props.inventory,3),Mm.b.success("Inventory updated successfully!")},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this,t=((null===(e=this.props)||void 0===e?void 0:e.inventory)||[]).uom_array;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},Jj,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select the universal unit(s) of measurement for this item."))),(null===t||void 0===t?void 0:t.length)>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row measurement-row-details"},l.a.createElement("div",{className:"col-12 margin-tb-30"},l.a.createElement(Vm.a,{onClick:function(){return a.showUniversalType(!0)},className:"edit-create-btn text-uppercase"},"Edit")),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 custom-uom-table"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Unit Name"),l.a.createElement("th",null,"Abbreviation"))),l.a.createElement("tbody",null,l.a.createElement("tr",{className:"uom-table-small-header"},l.a.createElement("td",{colSpan:"2"},t&&t[0]&&t[0].unit_type.name)),null===t||void 0===t?void 0:t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.symbol))}))))))))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{onClick:function(){return a.showUniversalType(!0)},className:"row mx-0 common-card-upload cursor-pointer pointer-no-card"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.measuring_tape_gray_new,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"Add Universal Units of Measurement")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(Qj,{inventory:this.props.inventory,callbackFacility:this.callbackFacility,visible:this.state.visible,onClose:function(){return a.showUniversalType(!1)},setInventory:this.props.setInventory}))}}]),t}(n.Component),Xj=Object(r.withRouter)(Zj),eI={labelCol:{span:24},wrapperCol:{span:24}},aI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))},sorter:!0},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a,t;EO({inventory:null===(a=e.props)||void 0===a||null===(t=a.inventory)||void 0===t?void 0:t.id}).then((function(a){var t=Object(wu.a)(Object(wu.a)({},e.props.inventory),{},{documents:a.data.results});e.setState({files:a.data.results}),e.props.setInventory(t)})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t;e.setState({buttonLoading:!0});var n=a.file,l=new FormData;l.append("inventory",null===(t=e.props)||void 0===t?void 0:t.inventory.id),l.append("document",n),fO(l).then((function(a){e.setState({buttonLoading:!1}),e.fetchFiles(),Mm.b.success("Documents Upload Successfully")})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?this.fetchFiles(this.props.match.params.id):this.fetchFiles()}},{key:"render",value:function(){var e=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},eI,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},e.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.columns,dataSource:e,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),tI=Object(r.withRouter)(aI),nI=fu.a.Panel,lI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={inventory:null,active:["1"],visible:!1,visibleWarning:!1,unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.getInventoryItem=function(){var a,t,n;$C((null===(a=e.props.match)||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id)||(null===(n=e.state.inventory)||void 0===n?void 0:n.id)).then((function(a){e.setState({inventory:a.data,subtier:a.data.parent.id},(function(){var a,t,n,l,c,i=null===(a=e.state)||void 0===a?void 0:a.inventory;(null===i||void 0===i?void 0:i.name)&&(null===i||void 0===i?void 0:i.inventory_family)&&((null===(t=e.props.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)||((null===i||void 0===i||null===(l=i.uom_array)||void 0===l?void 0:l.length)&&(null===i||void 0===i?void 0:i.uom)&&(null===i||void 0===i?void 0:i.margin)&&(null===i||void 0===i?void 0:i.unit_cost)&&(null===i||void 0===i||null===(c=i.internal_location)||void 0===c?void 0:c.length)?e.setState((function(){return{inventory:i,unsavedExit:!1}})):e.setState((function(){return{inventory:i,unsavedExit:!0}}))))}))})).catch((function(e){td(e)}))},e.onCollapseChange=function(a){e.setState({active:a})},e.setInventory=function(a,t){var n,l,c,i=null===(n=e.state)||void 0===n?void 0:n.inventory;(null===i||void 0===i?void 0:i.name)&&(null===i||void 0===i?void 0:i.inventory_family)?(null===a||void 0===a||null===(l=a.uom_array)||void 0===l?void 0:l.length)&&(null===a||void 0===a?void 0:a.uom)&&(null===a||void 0===a?void 0:a.margin)&&(null===a||void 0===a?void 0:a.unit_cost)&&(null===a||void 0===a||null===(c=a.internal_location)||void 0===c?void 0:c.length)?(e.setState((function(){return{inventory:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{inventory:a}})):e.setState((function(){return{inventory:a,unsavedExit:!0}}));var r=null;if(e.state.active.length>1&&(r=e.state.active.find((function(e){return e==t}))),r)return null;e.setState((function(e){return{inventory:a,active:[].concat(Object(Ou.a)(e.active),Object(Ou.a)(_d(t-1,"7")))}}))},e.onChange=function(a,t){e.setState(Object(zv.a)({},a,t))},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.inventory;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_items.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Create Inventory Item",url:zm.dashboard.management.inventory.inventory_items.create}],a=[{title:"Edit Inventory Item",url:zm.dashboard.management.inventory.inventory_items.edit}];this.props.match.params.id?(this.props.setBreadcrumb(a),this.getInventoryItem(),this.setState({active:this.props.location.editTab||"1"})):this.props.setBreadcrumb(e)}},{key:"render",value:function(){var e=this,a=this.state,t=a.inventory,n=a.subtier;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:this.state.active,onChange:this.onCollapseChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(nI,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(pj,{onChange:this.onChange,subtier:n,inventory:t,setInventory:this.setInventory})),l.a.createElement(nI,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0 text-capitalize"},"Universal Units of Measurement ",l.a.createElement("sup",null,"*")))),key:"2"},l.a.createElement(Xj,{inventory:t,setInventory:this.setInventory})),l.a.createElement(nI,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Custom units of Measurement"))),key:"3"},l.a.createElement(Aj,{getInventoryItem:this.getInventoryItem,inventory:t,setInventory:this.setInventory})),l.a.createElement(nI,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Unit Price ",l.a.createElement("sup",null,"*")))),key:"4"},l.a.createElement(fj,{inventory:t,setInventory:this.setInventory})),l.a.createElement(nI,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Warehouses ",l.a.createElement("sup",null,"*")))),key:"5"},l.a.createElement(Sj,{getInventoryItem:this.getInventoryItem,inventory:t,setInventory:this.setInventory,setInternalLocOnDelete:this.setInternalLocOnDelete})),l.a.createElement(nI,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Vendors"))),key:"6"},l.a.createElement(zj,{inventory:t,setInventory:this.setInventory})),l.a.createElement(nI,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"7"},l.a.createElement(tI,{inventory:t,setInventory:this.setInventory}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_items.view,{id:t.id})):e.handleViewMainButtonCLick()},type:"primary"},"View Inventory Item"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Inventory Item!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_items.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Inventory Item"),"."),okTitle:"View Inventory Item",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_items.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Inventory Item?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Inventory Item, select View Inventory Item.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View InventoryItem",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_items.view,{id:t.id}))}}))}}]),t}(n.Component),cI=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(lI)),iI=(ku.a.Option,ku.a.OptGroup,fu.a.Panel,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={newSites:[],uom:null},e.menu=function(){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},"Edit")))},e.handleChange=function(a,t){e.setState({selectValue:a,selectOption:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;sO({inventory_item:this.props.match.params.id}).then((function(a){var t,n;e.setState({newSites:null===(t=a.data.results[0])||void 0===t?void 0:t.location,uom:null===(n=a.data.results[0])||void 0===n?void 0:n.uom})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e,a,t=this,n=(this.props.inventory,this.state.uom);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 d-flex align-items-center list-inline"},l.a.createElement("li",{className:"list-inline-item"},this.props.editBtn?l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.management.inventory.inventory_items.edit,{id:t.props.match.params.id}),editTab:"5"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"):l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return t.props.tabChange("3")}},"VIEW ALL"," "))))),l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row mx-0 mb-3"},l.a.createElement("div",{className:"col-12 summary-collapse-inner-row-main pt-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{style:{borderBottom:"1px solid #e0e0e0"},className:"col-12 pb-3"},l.a.createElement("h6",null,"Unit Of Measurement"),l.a.createElement("h5",null,n?"".concat(n.name," (").concat(n.symbol,")"):"-"," "))))),(null===(e=this.state.newSites)||void 0===e?void 0:e.length)>0?null===(a=this.state.newSites)||void 0===a?void 0:a.map((function(e){var a,c,i,r,s,o,m,d,u,p,v,h,f,E;return l.a.createElement("div",{className:"row mx-0 margin-btn-30"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row m-0  site-details-row-card site-details-row-card-2  position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===e||void 0===e||null===(a=e.internal_location)||void 0===a?void 0:a.name))),l.a.createElement("div",{className:"col-12 col-sm-9 pb-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(null===(c=e.internal_location)||void 0===c?void 0:c.street_address," ").concat(null===(i=e.internal_location)||void 0===i?void 0:i.name," ").concat(null===(r=e.internal_location)||void 0===r?void 0:r.city," ").concat(null===(s=e.internal_location)||void 0===s?void 0:s.state," ").concat(null===(o=e.internal_location)||void 0===o?void 0:o.country))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e||null===(m=e.internal_location)||void 0===m?void 0:m.email)),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e||null===(d=e.internal_location)||void 0===d?void 0:d.phone)),l.a.createElement("div",{className:"col-12 Quantities-details-div"},l.a.createElement("h6",{className:"text-uppercase"},"Quantities"),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Min QTY (Reorder Point):"),l.a.createElement("li",{className:"list-inline-item"},e.min_qty||0," ",null===(u=t.state)||void 0===u||null===(p=u.selectOption)||void 0===p?void 0:p.children[4]," ",null===n||void 0===n?void 0:n.symbol)),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Max QTY (Single Restock QTY):"),l.a.createElement("li",{className:"list-inline-item"},e.max_qty||0," ",null===(v=t.state)||void 0===v||null===(h=v.selectOption)||void 0===h?void 0:h.children[4]," ",null===n||void 0===n?void 0:n.symbol)),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Current QTY:"),l.a.createElement("li",{className:"list-inline-item font-weight-bold"},e.qty||0," ",null===(f=t.state)||void 0===f||null===(E=f.selectOption)||void 0===E?void 0:E.children[4]," ",null===n||void 0===n?void 0:n.symbol))))))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Warehouse"))))))}}]),t}(n.Component)),rI=Object(r.withRouter)(iI),sI=(ku.a.Option,ku.a.OptGroup,fu.a.Panel,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={newLoc:[]},e.handleChange=function(a,t){e.setState({selectValue:a,selectOption:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l=this;uO({inventory_item:this.props.match.params.id}).then((function(e){var a;l.setState({newLoc:e.data.results&&(null===(a=e.data.results[0])||void 0===a?void 0:a.vendor)})})).catch((function(e){td(e)})),this.setState({selectValue:(null===(e=this.props.inventory)||void 0===e?void 0:e.uom_array)&&(null===(a=this.props.inventory)||void 0===a?void 0:a.uom_array[0])&&(null===(t=this.props.inventory)||void 0===t||null===(n=t.uom_array[0])||void 0===n?void 0:n.id)})}},{key:"render",value:function(){var e,a,t=this;this.props.inventory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 d-flex align-items-center list-inline"},l.a.createElement("li",{className:"list-inline-item"},this.props.editBtn?l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return o.push({pathname:Object(dh.a)(zm.dashboard.management.inventory.inventory_items.edit,{id:t.props.match.params.id}),editTab:"6"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"):l.a.createElement(Vm.a,{onClick:function(){return t.props.tabChange("4")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))))),l.a.createElement("div",{className:"col-12 my-3 ".concat(this.props.editBtn?"design-update-collapse":"")},(null===(e=this.state.newLoc)||void 0===e?void 0:e.length)>0?null===(a=this.state.newLoc)||void 0===a?void 0:a.map((function(e){var a,n,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N=null===(a=t.props.inventory)||void 0===a||null===(n=a.uom_array)||void 0===n?void 0:n.find((function(a){return a.id===e.vendor_uom}));return l.a.createElement("div",{className:"row mx-0 margin-btn-30"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row m-0  site-details-row-card site-details-row-card-2  position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.waste_management_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===e||void 0===e||null===(c=e.vendor)||void 0===c?void 0:c.name))),l.a.createElement("div",{className:"col-12 col-sm-9 pb-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat((null===(i=e.vendor)||void 0===i||null===(r=i.main_address)||void 0===r?void 0:r.street_address)||""," ").concat((null===(s=e.vendor)||void 0===s||null===(o=s.main_address)||void 0===o?void 0:o.name)||""," ").concat((null===(m=e.vendor)||void 0===m||null===(d=m.main_address)||void 0===d?void 0:d.city)||""," ").concat((null===(u=e.vendor)||void 0===u||null===(p=u.main_address)||void 0===p?void 0:p.state)||""," ").concat((null===(v=e.vendor)||void 0===v||null===(h=v.main_address)||void 0===h?void 0:h.country)||""))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},(null===(f=e.vendor)||void 0===f||null===(E=f.main_address)||void 0===E?void 0:E.email)||"-")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},(null===(g=e.vendor)||void 0===g||null===(b=g.main_address)||void 0===b?void 0:b.phone)||"-")),l.a.createElement("div",{className:"col-12 Quantities-details-div"},l.a.createElement("h6",{className:"text-uppercase"},"COSTS"),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Reference Number:"),l.a.createElement("li",{className:"list-inline-item"},Math.round(e.reference_number)||"-")),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Unit of Measurement:"),l.a.createElement("li",{className:"list-inline-item"},null===N||void 0===N?void 0:N.symbol)),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Unit Cost:"),l.a.createElement("li",{className:"list-inline-item font-weight-bold"},"$",e.unit_cost||"-",(null===N||void 0===N?void 0:N.symbol)&&"/",(null===N||void 0===N?void 0:N.symbol)&&(null===N||void 0===N?void 0:N.symbol)))))))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.vendor_gray_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Vendors"))))))}}]),t}(n.Component)),oI=Object(r.withRouter)(sI),mI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.docsColumns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a,t,n,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.inventory=null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id,EO(l).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("inventory",e.props.match.params.id),n.append("document",t),fO(n).then((function(a){e.fetchFiles()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c;(null===(t=e.inventory)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)!==(null===(l=this.props.inventory)||void 0===l||null===(c=l.documents)||void 0===c?void 0:c.length)&&this.fetchFiles()}},{key:"render",value:function(){var e=this,a=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.hideTitle?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse ml-2 text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("6")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},a.length>0?l.a.createElement(fv.a,{pagination:!1,onRow:function(e,a){return{onClick:function(a){window.open(e.document,"_blank")}}},className:"main-table-all carpet-cleaning-table border-0",columns:this.docsColumns,dataSource:a,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),dI=Object(r.withRouter)(mI),uI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={kits:[],loading:!1},e.fetchVehicle=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.item=e.props.match.params.id,QC(a).then((function(a){e.setState({kits:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchVehicle()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(a){return e.fetchVehicle({search:a.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 d-flex align-items-center list-inline"},l.a.createElement("li",{className:"list-inline-item"},!this.props.editBtn&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return e.props.tabChange("5")}},"VIEW ALL"," "))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-4 ".concat(this.props.editBtn?"no-data-card-row-new":"")},0==this.state.kits.length?l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement("div",{className:"no-data-wrapper row d-flex",style:{alignItems:"center"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{className:"img-fluid",src:Rm.inventory_empty,alt:"No Data"}),l.a.createElement("h6",{className:"color-gray-3"},"No Inventory Kit")))):this.state.kits.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.inventory_set_box_icons_green,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content d-flex align-items-center justify-content-between float-left"},l.a.createElement("div",null,l.a.createElement("h6",null,e.name),l.a.createElement("p",{className:"mb-0 text-capitalize"}," QTY: ",e.qty||1)))))})))))}}]),t}(n.Component),pI=Object(r.withRouter)(uI),vI={1:1,2:.001,3:158.9873,4:3.785,5:.946353,6:.473176,7:.236588,8:.118294,9:.03,10:.014787,11:.004929,12:23.3352,13:764.555,14:28.3168,15:.016387,16:1e3,17:.001,18:1233e3,19:36.3687,20:3624.56,21:.23,22:.014,23:.004736,25:1609.34,26:.9144,27:.3048,28:.0254,29:1e3,30:1,31:.01,32:.001,33:5.0292,34:.001,35:1,36:1e3,37:1e-6,38:.02835,39:.453592,40:1,41:1e3},hI=ku.a.Option,fI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={comData:null,uomData:null,calc:1,inputValue:1},e.handleComData=function(a){var t=e.props.inventory.com.find((function(e){return e.id===a}));if(t.uom.id===e.state.uomData)e.setState({calc:e.state.inputValue*t.factor});else if(t.uom){var n=e.state.inputValue*t.factor/vI[e.state.uomData];e.setState({calc:n})}else e.setState({calc:e.state.inputValue*vI[e.state.uomData]});e.setState({comData:a})},e.handleUomData=function(a){var t=e.props.inventory.com.find((function(a){return a.id===e.state.comData}));if(t.uom.id===a)e.setState({uomData:a,calc:e.state.inputValue*(null===t||void 0===t?void 0:t.factor)});else{var n=vI[e.state.uomData],l=(e.state.calc*(n||1)/vI[a]).toFixed(2);e.setState({uomData:a,calc:l})}},e.handleInput=function(a){e.setState((function(e){return{inputValue:a||1,calc:e.calc*(a||1)/e.inputValue}}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.inventory;(null===a||void 0===a?void 0:a.com[0])&&this.setState({comData:null===a||void 0===a?void 0:a.com[0].id},(function(){e.handleComData(e.state.comData)})),(null===a||void 0===a?void 0:a.uom_array)&&(null===a||void 0===a?void 0:a.uom_array[0])&&this.setState({uomData:a.uom_array[0].id})}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.props.inventory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement("div",{className:"row mx-0"},(null===(e=i.uom_array)||void 0===e?void 0:e.length)>0&&(null===i||void 0===i||null===(a=i.com)||void 0===a?void 0:a.length)>0?l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(Fm.a,{className:"main-inner-form"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-3 position-relative"},l.a.createElement("div",{className:"row custom-unit-converter-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(ku.a,{className:"custom-pound-select",style:{width:"100%"},suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),onChange:this.handleComData,value:this.state.comData},null===i||void 0===i||null===(t=i.com)||void 0===t?void 0:t.map((function(e){return l.a.createElement(hI,{value:e.id},e.name)})))),l.a.createElement("div",{className:"col-12"},l.a.createElement(ap.a,{type:"number",placeholder:"1",value:this.state.inputValue||1,onChange:this.handleInput}))),l.a.createElement("span",{className:"equal-sign position-absolute"},"=")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"row custom-unit-converter-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(ku.a,{className:"custom-pound-select",style:{width:"100%"},suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),onChange:this.handleUomData,value:this.state.uomData},null===i||void 0===i||null===(n=i.uom_array)||void 0===n?void 0:n.map((function(e){return l.a.createElement(hI,{value:e.id},e.name)})))),l.a.createElement("div",{className:"col-12"},l.a.createElement(ap.a,{type:"number",placeholder:"1",onChange:function(e){return c.setState({calc:e})},value:this.state.calc}))))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.measuring_tape_gray_new,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Unit Converter"))))))))}}]),t}(n.Component),EI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this.props.inventory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),(null===t||void 0===t||null===(e=t.uom_array)||void 0===e?void 0:e.length)>0?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 custom-uom-table"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Unit Name"),l.a.createElement("th",null,"Abbreviation"))),l.a.createElement("tbody",null,l.a.createElement("tr",{className:"uom-table-small-header"},l.a.createElement("td",{colSpan:"2"},(null===t||void 0===t?void 0:t.uom_array)&&(null===t||void 0===t?void 0:t.uom_array[0])&&(null===t||void 0===t?void 0:t.uom_array[0].unit_type.name))),null===t||void 0===t||null===(a=t.uom_array)||void 0===a?void 0:a.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.symbol))})))))))):l.a.createElement("div",{className:"row mx-0 mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.measuring_tape_gray_new,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Universal Units of Measurement")))))}}]),t}(n.Component),gI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this,n=this.props.inventory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 d-flex align-items-center list-inline"},l.a.createElement("li",{className:"list-inline-item"},this.props.editBtn?l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.management.inventory.inventory_items.edit,{id:t.props.match.params.id}),editTab:"2"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"):l.a.createElement(Vm.a,{onClick:function(){return t.props.tabChange("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")))),l.a.createElement("div",{className:"row summary-collapse-inner-row-main pb-0 px-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Base Unit Of Measurement"),l.a.createElement("h5",null,"-"))),(null===n||void 0===n||null===(e=n.com)||void 0===e?void 0:e.length)>0?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mt-2 mb-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 custom-uom-table custom-uom-table-2"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"custom uom name"),l.a.createElement("th",null,"abbreviation"),l.a.createElement("th",null,"conversion"))),l.a.createElement("tbody",null,null===n||void 0===n||null===(a=n.com)||void 0===a?void 0:a.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,"U"),l.a.createElement("td",null,l.a.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"1",e.abbreviation," = ",e.factor,e.uom.symbol))))}))))))))))):l.a.createElement("div",{className:"row mx-0 mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.measuring_tape_gray_new,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Custom Units of Measurement")))))}}]),t}(n.Component),bI=Object(h_.withRouter)(gI),NI=fu.a.Panel,yI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={kits:[],vendors:0,inventory:null,loading:!0},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.match.params.id&&($C(this.props.match.params.id).then((function(a){var t=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Inventory Items",url:zm.dashboard.management.inventory.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t),e.setState({inventory:a.data,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),QC({inventory:this.props.match.params.id}).then((function(a){e.setState({kits:a.data.results})})).catch((function(e){td(e)})))}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.state,r=i.inventory,s=i.loading;i.newPrice;return s?l.a.createElement("div",{className:"text-center my-4"},l.a.createElement(Wv.a,null)):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-info-inner-row inventory-items-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information  ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_items.edit,{id:c.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Inventory ID"),l.a.createElement("h5",null,r.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Inventory item name"),l.a.createElement("h5",null,r.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-6"},l.a.createElement("h6",{className:"text-uppercase"},"INVENTORY FAMILY / TIER"),l.a.createElement("h5",{className:"text-capitalize"}," ",l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},r.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))}))))))))),l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Unit Converter")),key:"2"},l.a.createElement(fI,{inventory:r})),l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Universal Units of Measurement ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_items.edit,{id:c.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"3"},l.a.createElement(EI,{inventory:r})),l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Custom Units of Measurement"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_items.edit,{id:c.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"4"},l.a.createElement(bI,Object.assign({},this.props,{inventory:r}))),l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Unit Price ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_items.edit,{id:c.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"5"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},r?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Unit Of Measurement"),l.a.createElement("h5",null,(null===r||void 0===r?void 0:r.uom)?"".concat(null===r||void 0===r||null===(e=r.uom)||void 0===e?void 0:e.name," (").concat(null===r||void 0===r||null===(a=r.uom)||void 0===a?void 0:a.symbol,")"):"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Unit Cost"),l.a.createElement("h5",null,xd(r.unit_cost||"-"),(null===r||void 0===r?void 0:r.uom)&&"/",null===r||void 0===r||null===(t=r.uom)||void 0===t?void 0:t.symbol)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Margin"),l.a.createElement("h5",{className:"text-capitalize"}," ",r.margin||"-"," %")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Price"),l.a.createElement("h5",null,"$",0==Rd(null===r||void 0===r?void 0:r.unit_cost,null===r||void 0===r?void 0:r.margin)?" -":Rd(null===r||void 0===r?void 0:r.unit_cost,null===r||void 0===r?void 0:r.margin),(null===r||void 0===r?void 0:r.uom)&&"/",null===r||void 0===r||null===(n=r.uom)||void 0===n?void 0:n.symbol))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 mb-0 mt-3 no-data-card-row align-items-center bg-transparent justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.billing_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Unit Price"))))))),l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Warehouses ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_items.edit,{id:c.props.match.params.id}),editTab:"5"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"6"},l.a.createElement(rI,Object.assign({},this.props,{inventory:r}))),l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Vendors"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_items.edit,{id:c.props.match.params.id}),editTab:"6"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"7"},l.a.createElement(oI,Object.assign({},this.props,{inventory:r}))),l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Inventory Kits")),key:"9"},l.a.createElement(pI,this.props)),l.a.createElement(NI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents")),key:"8"},l.a.createElement(dI,Object.assign({},this.props,{showBtn:!0})))))))}}]),t}(n.Component),wI=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(yI)),_I=vf.a.TabPane,SI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={tab:"1",inventory:null,requiredFields:!0},e.tabChange=function(a){e.setState({tab:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&$C(this.props.match.params.id).then((function(a){e.setState({inventory:a.data},(function(){e.setState({requiredFields:Jd(e.state.inventory)})}))})).catch((function(a){td(a),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.state.inventory;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},this.state.requiredFields&&l.a.createElement("div",{className:"row mx-0 info-gray-div info-red-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please complete all required information to avoid issues")),l.a.createElement(vf.a,{onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",activeKey:this.state.tab},l.a.createElement(_I,{tab:"Summary",key:"1"},l.a.createElement(wI,{tabChange:this.tabChange})),l.a.createElement(_I,{tab:"Custom Unit of Measurement",key:"2"},l.a.createElement(bI,{editBtn:!0,inventory:e})),l.a.createElement(_I,{tab:"Warehouses",key:"3"},l.a.createElement(rI,{editBtn:!0,inventory:e})),l.a.createElement(_I,{tab:"Vendors",key:"4"},l.a.createElement(oI,{editBtn:!0,inventory:e})),l.a.createElement(_I,{tab:"Inventory Kits",key:"5"},l.a.createElement(pI,{editBtn:!0,inventory:e})),l.a.createElement(_I,{tab:"Documents",key:"6"},l.a.createElement(dI,{editBtn:!0,inventory:e}))))))}}]),t}(n.Component),xI={labelCol:{span:24},wrapperCol:{span:24}},CI=ku.a.Option,OI=ku.a.OptGroup,kI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={UnitTypes:{}},e.handleSubmit=function(a){e.props.kit?XC(e.props.kit.id,Object(wu.a)(Object(wu.a)({},a),{},{unit:a.unit.value})).then((function(a){e.props.setKit(a.data,2),Mm.b.success("Inventory Kit updated Successfully")})).catch((function(e){td(e)})):ZC(Object(wu.a)(Object(wu.a)({},a),{},{unit:a.unit.value})).then((function(a){e.props.setKit(a.data,2),Mm.b.success("Inventory Kit created Successfully")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Rg().then((function(a){var t={};a.data.forEach((function(e){t[e.unit_type.name]||(t[e.unit_type.name]=[]),t[e.unit_type.name].push(e)})),e.setState({UnitTypes:t})})).catch((function(e){Mm.b.error(e)}))}},{key:"componentDidUpdate",value:function(e,a,t){var n,l,c,i;this.props.kit!==e.kit&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.kit),{},{unit:{value:null===(n=this.props.kit)||void 0===n||null===(l=n.unit)||void 0===l?void 0:l.id,label:null===(c=this.props.kit)||void 0===c||null===(i=c.unit)||void 0===i?void 0:i.name}}))}},{key:"render",value:function(){var e=this.state.UnitTypes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},xI,{ref:this.formRef,onFinish:this.handleSubmit,hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input inventory kit name and choose unit of measurement."))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Inventory Kit Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter a nickname to distinguish the inventory kit"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"unit",label:l.a.createElement("div",{className:"d-flex align-items-center kit-uom"},l.a.createElement("span",null,"Unit of Measurement *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",labelInValue:!0},Object.entries(e).map((function(e,a,t){return l.a.createElement(OI,{key:e&&e[0]&&e[0],value:e&&e[0]&&e[0],label:e&&e[0]&&e[0],className:"kit-uom-optgroup"},e&&e[1]&&e[1].map((function(e){return l.a.createElement(CI,{key:e.id,value:e.id,className:"text-lowercase"},e.name)})))}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),jI=Object(r.withRouter)(kI),II=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,onOk:function(a){e.props.okAction(a)},onCancel:this.props.onClose,centered:!0,className:"confirmation-popup-modal ".concat(this.props.deleteLineItem?"warning-modal":"success-modal"," delete-item-modal"),okText:this.props.okTitle?this.props.okTitle:"Yes, I want to Continue",cancelText:this.props.cancelText},l.a.createElement("div",{className:"row mx-0 confirm-modal-row ".concat(this.props.deleteLineItem?"warning-modal-row":"")},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.warning_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),this.props.subHeading))))}}]),t}(n.Component),AI={labelCol:{span:24},wrapperCol:{span:24}},DI=ku.a.Option,TI=(ku.a.OptGroup,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={kitItems:[],inventory:[],fetching:!1,loading:!1,pagination:{current:1,pageSize:15},uom:[],removeVisible:!1,deleteID:null,last_elem:!1},e.formRef=l.a.createRef(),e.getKitItems=function(){eO({kit:e.props.kit.id}).then((function(a){e.setState({kitItems:a.data.results})})).catch((function(e){td(e)}))},e.updateKitQuantity=Object(lp.debounce)((function(a,t){tO(t,{quantity:a||1}).then((function(a){e.getKitItems()})).catch((function(e){td(e)}))}),400),e.handleSelectChange=Object(lp.debounce)((function(a,t){tO(t,{uom:a.value}).then((function(a){e.getKitItems()})).catch((function(e){td(e)}))}),400),e.getItems=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};GC(Object(wu.a)(Object(wu.a)({},a),{},{tier_type:"INVENTORY_ITEM"})).then((function(a){e.setState({inventory:a.data.results.filter((function(e){return 0===e.children.length}))})})).catch((function(e){td(e)}))},e.handleSelect=function(a){(e.formRef.current.resetFields(),e.state.kitItems.find((function(e){return e.item.id==a})))?Mm.b.error("Inventory Item added already!"):aO({item:a,kit:e.props.kit.id}).then((function(a){e.getKitItems()})).catch((function(e){td(e)}))},e.handleDeleteKitItem=function(a){e.showRemoveModal(!1),nO(a).then((function(a){e.getKitItems(),e.showRemoveModal(!1)})).catch((function(a){td(a),e.showRemoveModal(!1)}))},e.removeKitItem=function(a){e.setState({deleteID:a},e.showRemoveModal(!0))},e.getSubunits=function(){Rg().then((function(a){e.setState({uom:a.data})})).catch((function(e){Mm.b.error(e)}))},e.showRemoveModal=function(a){e.setState({removeVisible:a})},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement("a",{onClick:function(){return e.removeKitItem(a)},href:"#"},"Remove")))},e.showMsg=function(){Mm.b.success("Inventory kit updated successfully!")},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getKitItems(),this.getSubunits()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o=this,m=this.state,d=m.fetching,u=m.kitItems,p=(m.inventory,{});return this.state.uom.forEach((function(e){p[e.unit_type.name]||(p[e.unit_type.name]=[]),p[e.unit_type.name].push(e)})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},AI,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add all the inventory items belong to this kit."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"item",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Inventory Items")),className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,placeholder:"Search",className:"custom-search-select",dropdownClassName:"custom-search-select",notFoundContent:d?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return o.getItems()},onSearch:function(e){return o.getItems({search:e,tier_type:"INVENTORY_ITEM"})},onChange:this.handleSelect},this.state.inventory.map((function(e,a){return l.a.createElement(DI,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row custom-tree-row-1 mx-0"},l.a.createElement("div",{className:"common-select-option-row col-12",style:{paddingRight:"5%"}},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("img",{style:{height:"30px"},src:Rm.inventory_green_single,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block"},e.name),l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e,a){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement("a",{href:"#"},e))})),l.a.createElement(Su.a.Item,null,e.name))),l.a.createElement("div",{style:{paddingTop:"15px",display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Inventory Item"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-wage-info-main inventory-items-table"},l.a.createElement("div",{className:"col-12 custom-table-change table-change-inventoryKit"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row custom-table-header"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"TYPE")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"UOM")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"QTY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Price ",l.a.createElement("br",null),"Per Unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Price")))),l.a.createElement("div",{className:"col-12 custom-table-body p-0"},l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Inventory Kit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("span",null,null===(e=this.props)||void 0===e||null===(a=e.kit)||void 0===a?void 0:a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"px-3"},"".concat(null===(t=this.props)||void 0===t||null===(n=t.kit)||void 0===n||null===(c=n.unit)||void 0===c?void 0:c.name,"(").concat(null===(i=this.props)||void 0===i||null===(r=i.kit)||void 0===r||null===(s=r.unit)||void 0===s?void 0:s.symbol,")"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null," 1")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"px-3"}," -")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 pr-4"},l.a.createElement("div",{className:"pr-2"}," ","$ ".concat(u.reduce((function(e,a){var t,n;return e+parseFloat(Rd((null===(t=a.item)||void 0===t?void 0:t.unit_cost)*a.quantity,(null===(n=a.item)||void 0===n?void 0:n.margin)||0))}),0).toFixed(2))))),this.state.kitItems.map((function(e,a){var t,n,c,i,r,s,m,d,u,p,v,h,f,E,g=null;return(null===(t=o.state.kitItems)||void 0===t?void 0:t.length)>a+1||(g=!0),l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:g?"rectangle-icon-div position-absolute remove-tree-bottom-line":"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 bg-white"},l.a.createElement("div",{className:"editalble-form-data uom-select-fixes"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,placeholder:"Select Option",onChange:function(a){o.handleSelectChange(a,e.id)},defaultValue:(null===e||void 0===e?void 0:e.uom)?{value:null===e||void 0===e||null===(c=e.uom)||void 0===c?void 0:c.id,label:null===e||void 0===e||null===(i=e.uom)||void 0===i?void 0:i.name}:{value:null===e||void 0===e||null===(r=e.item)||void 0===r||null===(s=r.uom)||void 0===s?void 0:s.id,label:null===e||void 0===e||null===(m=e.item)||void 0===m||null===(d=m.uom)||void 0===d?void 0:d.name}},null===e||void 0===e||null===(u=e.item)||void 0===u||null===(p=u.uom_array)||void 0===p?void 0:p.map((function(e){return l.a.createElement(DI,{key:e.id,value:e.id},e.name," (",e.symbol,")")}))),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 search-btn-icon"},l.a.createElement(wO.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 background-white-div"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{onChange:function(a){return o.updateKitQuantity(a,null===e||void 0===e?void 0:e.id)},value:(null===e||void 0===e?void 0:e.quantity)||1})))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"px-3"},Rd(null===e||void 0===e||null===(v=e.item)||void 0===v?void 0:v.unit_cost,(null===e||void 0===e||null===(h=e.item)||void 0===h?void 0:h.margin)||0))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 position-relative pr-4"},l.a.createElement("div",{className:"pr-2"},(Rd(null===e||void 0===e||null===(f=e.item)||void 0===f?void 0:f.unit_cost,(null===e||void 0===e||null===(E=e.item)||void 0===E?void 0:E.margin)||0)*(null===e||void 0===e?void 0:e.quantity)).toFixed(2)),l.a.createElement(xu.a,{overlayClassName:"inventory-kit-dropdown",overlay:function(){return o.menu(e.id)},trigger:["click"]},l.a.createElement("a",{className:"ant-dropdown-link dropdown-row-a",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.eva_more_elisis,alt:"",className:"img-fluid"})))))})))))),l.a.createElement("p",{className:"sub-total-text inventory-sub-total"},"Subtotal:",l.a.createElement("span",{className:"sub-total-amount"},"$ ".concat(u.reduce((function(e,a){var t,n;return e+parseFloat(Rd((null===(t=a.item)||void 0===t?void 0:t.unit_cost)*a.quantity,(null===(n=a.item)||void 0===n?void 0:n.margin)||0))}),0).toFixed(2))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main",onClick:this.showMsg},"Save and Continue"))))))),l.a.createElement(II,{okTtile:"Yes, I want to remove",cancelText:"No, cancel this action",okAction:function(){o.handleDeleteKitItem(o.state.deleteID)},onClose:function(){o.setState({deleteID:null}),o.showRemoveModal(!1)},heading:"Are you sure you want to remove this Inventory Item?",subHeading:"If you choose to remove this Inventory Item, and you already have service variants set up, this might cause issues.",visible:this.state.removeVisible,id:this.state.deleteID}))}}]),t}(n.Component)),RI=Object(r.withRouter)(TI),MI=fu.a.Panel,FI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={kit:null,active:["1"],visible:!1,visibleWarning:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.setKit=function(a,t){var n=null;if(e.state.active.length>1&&(n=e.state.active.find((function(e){return e==t}))),n)return null;e.setState((function(e){return{kit:a,active:[].concat(Object(Ou.a)(e.active),Object(Ou.a)(_d(t-1,"2")))}})),e.state.kit.name&&e.state.kit.unit?(e.setState((function(){return{kit:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{kit:a}}))},e.handleTabChange=function(a){e.setState({active:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l,c,i,r=e.state.kit;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_kits.view,{id:(null===(l=e.props)||void 0===l||null===(c=l.match)||void 0===c||null===(i=c.params)||void 0===i?void 0:i.id)||r.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Inventory Kit",url:zm.dashboard.management.inventory.inventory_kits.create}],t=[{title:"Edit Inventory Kit",url:zm.dashboard.management.inventory.inventory_kits.edit}];this.props.match.params.id?JC(this.props.match.params.id).then((function(a){e.props.setBreadcrumb(t),e.setState({kit:a.data}),e.setState({active:e.props.location.editTab||"1"})})).catch((function(e){td(e)})):this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e=this,a=this.state.kit;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:this.state.active,onChange:this.handleTabChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(MI,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(jI,{kit:a,setKit:this.setKit})),l.a.createElement(MI,{disabled:!a,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Inventory Items"))),key:"2"},l.a.createElement(RI,{kit:a,setKit:this.setKit}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{disabled:!a,onClick:function(){var t,n,l;return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_kits.view,{id:(null===(t=e.props)||void 0===t||null===(n=t.match)||void 0===n||null===(l=n.params)||void 0===l?void 0:l.id)||a.id})):e.handleViewMainButtonCLick()},type:"primary"},"View Inventory Kit"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Inventory Kit!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_kits.view,{id:e.props.match.params.id||e.state.kit.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Inventory Kit"),"."),okTitle:"View Inventory Kit",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.inventory.inventory_kits.view,{id:e.props.match.params.id||e.state.kit.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Inventory Kit?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Inventory kit, select View Inventory kit.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View Inventory KIt ",onOK:function(){e.showRequiredSuccessModal(!1),o.push(zm.dashboard.management.inventory.inventory_kits.view,{id:e.props.match.params.id||e.state.kit.id})}}))}}]),t}(n.Component),PI=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(FI)),VI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={items:[]},e.fetchKits=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eO(Object(wu.a)(Object(wu.a)({},a),{},{kit:e.props.match.params.id})).then((function(a){e.setState({items:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchKits()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o=this,m=this.state.items;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.editBtn?"custom-summary no-data-card-row-new":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(e){return o.fetchKits({search:e.target.value})},placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item"},this.props.editBtn?null:l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:this.props.onTabChange},"VIEW ALL"," "))))),l.a.createElement("div",{className:"col-12 pb-3"},l.a.createElement("div",{className:"row mx-0 sub-total-row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("h6",{className:"mb-0"},"Subtotal")),l.a.createElement("div",{className:"col-2"},l.a.createElement("h6",{className:"mb-0"},"$",m.reduce((function(e,a){var t,n;return e+parseFloat(Rd((null===(t=a.item)||void 0===t?void 0:t.unit_cost)*a.quantity,(null===(n=a.item)||void 0===n?void 0:n.margin)||0))}),0).toFixed(2)))),m.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-wage-info-main inventory-items-table"},l.a.createElement("div",{className:"col-12 custom-table-change table-change-inventoryKit"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row custom-table-header"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"TYPE")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"UOM")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"QTY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Price ",l.a.createElement("br",null),"Per Unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Price")))),l.a.createElement("div",{className:"col-12 custom-table-body p-0"},l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Inventory Kit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("span",null,null===(e=this.props)||void 0===e||null===(a=e.kit)||void 0===a?void 0:a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3 gray-2-color"},l.a.createElement("div",{className:"px-3"},"".concat(null===(t=this.props)||void 0===t||null===(n=t.kit)||void 0===n||null===(c=n.unit)||void 0===c?void 0:c.name,"(").concat(null===(i=this.props)||void 0===i||null===(r=i.kit)||void 0===r||null===(s=r.unit)||void 0===s?void 0:s.symbol,")"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"1")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start"},l.a.createElement("div",{className:"px-3"}," -")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 justify-content-start"},l.a.createElement("div",{className:"pr-2"},m.reduce((function(e,a){var t,n;return e+parseFloat(Rd((null===(t=a.item)||void 0===t?void 0:t.unit_cost)*a.quantity,(null===(n=a.item)||void 0===n?void 0:n.margin)||0))}),0).toFixed(2)))),this.state.items.map((function(e,a){var t,n,c,i,r,s,m,d,u,p=null;return(null===(t=o.state.items)||void 0===t?void 0:t.length)>a+1||(p=!0),l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color background-white-div"},l.a.createElement("div",{className:"px-3"},"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:p?"rectangle-icon-div position-absolute remove-tree-bottom-line":"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data uom-select-fixes px-3"},l.a.createElement("span",null,((null===e||void 0===e?void 0:e.uom)?null===e||void 0===e||null===(c=e.uom)||void 0===c?void 0:c.name:null===e||void 0===e||null===(i=e.item)||void 0===i||null===(r=i.uom)||void 0===r?void 0:r.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement("span",null,(null===e||void 0===e?void 0:e.quantity)||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start"},l.a.createElement("div",{className:"px-3"},Rd(null===e||void 0===e||null===(s=e.item)||void 0===s?void 0:s.unit_cost,(null===e||void 0===e||null===(m=e.item)||void 0===m?void 0:m.margin)||0))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6 position-relative justify-content-start"},l.a.createElement("div",{className:"pr-2"},(Rd(null===e||void 0===e||null===(d=e.item)||void 0===d?void 0:d.unit_cost,(null===e||void 0===e||null===(u=e.item)||void 0===u?void 0:u.margin)||0)*((null===e||void 0===e?void 0:e.quantity)||1)).toFixed(2))))}))))))):l.a.createElement("div",{className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.inventory_item_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Inventory Items"))))))}}]),t}(n.Component),qI=Object(r.withRouter)(VI),LI=fu.a.Panel,UI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={kit:null,items:[]},e.fetchKits=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eO(Object(wu.a)(Object(wu.a)({},a),{},{kit:e.props.match.params.id})).then((function(a){e.setState({items:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;JC(this.props.match.params.id).then((function(a){var t=[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Inventory Kits",url:zm.dashboard.management.inventory.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t),e.setState({kit:a.data})})).catch((function(e){td(e)})),this.fetchKits()}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.kit;n.items;return c?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row inventory-items-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(LI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_kits.edit,{id:t.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Inventory Kit Name"),l.a.createElement("h5",{className:"mb-0"},null===c||void 0===c?void 0:c.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Unit of measurement"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},null===c||void 0===c||null===(e=c.unit)||void 0===e||null===(a=e.name)||void 0===a?void 0:a.toLowerCase())))))),l.a.createElement(LI,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Inventory Items"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.inventory.inventory_kits.edit,{id:t.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement(qI,{kit:this.state.kit,onTabChange:this.props.onTabChange})))))))):l.a.createElement("div",{className:"text-center my-4"},l.a.createElement(Wv.a,null))}}]),t}(n.Component),BI=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(UI)),WI=vf.a.TabPane,YI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={active:"1"},e.onTabChange=function(a){e.setState({active:a})},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{activeKey:this.state.active,onChange:this.onTabChange,className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(WI,{tab:"Summary",key:"1"},l.a.createElement(BI,{onTabChange:function(){return e.onTabChange("2")}})),l.a.createElement(WI,{tab:"Inventory Items",key:"2"},l.a.createElement(qI,{editBtn:!0})))))))}}]),t}(n.Component),KI=vf.a.TabPane,GI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(KI,{tab:"Summary",key:"1"},l.a.createElement(nj,null)),l.a.createElement(KI,{tab:"Inventory Items",key:"2"},l.a.createElement(cj,null)))))))}}]),t}(n.Component),zI=vf.a.TabPane,HI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={packages:[],groups:[],supplies:[],key:"1",loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},dateFilter:{start:"",end:"",start_modified:"",end_modified:""}},e.supplyGroupColumns=[{title:"Supply Group Name",sorter:!0,key:"name",render:function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.name),Xd(e)&&l.a.createElement("p",{className:"red-text-disposal"},"Please complete all required information to avoid issues"))}},{title:"Supply Family",render:function(e){return l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:e.name},l.a.createElement(qm.a,null,e.name)))}},{title:"Supplies / Small TOols",dataIndex:"supply_items"}],e.columns=[{title:"Supply Family Name",dataIndex:"name",sorter:!0,key:"name"},{title:"Supply Groups",dataIndex:"group_count"}],e.supplySmallToolsColumns=[{title:"Supply ID",dataIndex:"id",sorter:!0,key:"id"},{title:"Supply Name",dataIndex:"name",sorter:!0,key:"name"},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",null,e?e.name:"-")}},{title:"Supply Group",dataIndex:"supply_group",render:function(e){return e.name||"-"}},{title:"Total Cost / Day",dataIndex:"purchase_price",render:function(e){return l.a.createElement("div",{className:"text-center"},xd(e||"0"))},sorter:!0,key:"purchase_price"}],e.fetchAllPackages=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),XO(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({packages:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),a.tier_type=Wd,lk(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({groups:t.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e})),pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllSupplies=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),sk(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({vehicles:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.onSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllPackages()}))},e.onGroupSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllGroups()}))},e.onSupplySearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllSupplies()}))},e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllPackages(c)},e.handleTableChangeSupplyGroups=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllGroups(c)},e.handleTableChangeSupply=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllSupplies(c)},e.tabChange=function(a){e.setState({key:a,search:"",dateFilter:{start:"",end:"",start_modified:"",end_modified:""},pagination:{current:1,pageSize:15}},(function(){switch(a){case"1":var t=[{title:"Supplies/Small Tools",url:zm.dashboard.management.supply_tools.self},{title:"Supply Families",url:zm.dashboard.management.supply_tools.self}];return e.props.setBreadcrumb(t),void e.fetchAllPackages();case"2":var n=[{title:"Supplies/Small Tools",url:zm.dashboard.management.supply_tools.self},{title:"Supply Groups",url:zm.dashboard.management.supply_tools.self}];return e.props.setBreadcrumb(n),void e.fetchAllGroups();case"3":var l=[{title:"Supplies/Small Tools",url:zm.dashboard.management.supply_tools.self},{title:"Supply/Small Tools",url:zm.dashboard.management.supply_tools.self}];return e.props.setBreadcrumb(l),void e.fetchAllSupplies()}}))},e.getLocaleData=function(e){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.supply_icon_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},1==e.key?"No Supply Families":2==e.key?"No Supply Groups":"No Supplies/Small Tools"))))},e.handleFilterPackage=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllPackages()})):e.setState({dateFilter:null},(function(){e.fetchAllPackages()}))},e.handleFilterGroup=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllGroups()})):e.setState({dateFilter:null},(function(){e.fetchAllGroups()}))},e.handleFilterSupply=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllSupplies()})):e.setState({dateFilter:null},(function(){e.fetchAllSupplies()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Supplies/Small Tools",url:zm.dashboard.management.supply_tools.self},{title:"Supply Families",url:zm.dashboard.management.supply_tools.self}];this.props.setBreadcrumb(e),this.fetchAllPackages(),this.tabChange(Md())}},{key:"render",value:function(){var e=this,a=this.state,t=a.packages,n=a.loading,c=a.pagination,i=a.groups,r=a.vehicles;return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(vf.a,{onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",activeKey:this.state.key},l.a.createElement(zI,{tab:"Supply Families",key:"1"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.supply_tools.supply_packages.create,buttonName:"+ Create Supply Family",onSearch:lu(this.onSearch,1e3),fetchData:function(a){return e.handleFilterPackage(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-family-table"},l.a.createElement(UN,{data:t,loading:n,pagination:c,onTableChange:this.handleTableChange,rowLink:zm.dashboard.management.supply_tools.supply_packages.view,columns:this.columns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:1})}}))))),l.a.createElement(zI,{tab:"Supply Groups",key:"2"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.supply_tools.supply_groups.create,buttonName:"+ Create Supply Group",onSearch:lu(this.onGroupSearch,1e3),fetchData:function(a){return e.handleFilterGroup(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row vehicle-3-center"},l.a.createElement(UN,{checkSupplyRequired:!0,data:i,loading:n,pagination:c,onTableChange:this.handleTableChangeSupplyGroups,columns:this.supplyGroupColumns,rowLink:zm.dashboard.management.supply_tools.supply_groups.view,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:2})}}))))),l.a.createElement(zI,{tab:"Supplies/Small Tools",key:"3"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.supply_tools.supply_tools.create,buttonName:"+ Create Supply/Small Tools",onSearch:lu(this.onSupplySearch,1e3),fetchData:function(a){return e.handleFilterSupply(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row vehicle-3-center vehicle-table-text-center width-160-id"},l.a.createElement(UN,{data:r,loading:n,pagination:c,onTableChange:this.handleTableChangeSupply,rowLink:zm.dashboard.management.supply_tools.supply_tools.view,columns:this.supplySmallToolsColumns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData({key:3})}})))))))}}]),t}(n.Component),$I=Object(Lm.b)(null,{setBreadcrumb:Uv})(HI),QI={labelCol:{span:24},wrapperCol:{span:24}},JI=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).setFieldData=function(e){n.formRef.current.setFieldsValue({name:e.name,description:e.description})},n.onSubmit=function(e){var a,t;n.setState({buttonLoading:!0}),n.props.packageData?(a=n.props.packageData.id,t=e,md(ad("supply.family",{id:a}),t)).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Supply family updated successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})})):function(e){return od(ad("supply.family"),e)}(e).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Supply family created successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})}))},n.formRef=l.a.createRef(),n.state={buttonLoading:!1},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData&&this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"render",value:function(){return l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input supply family name and description."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef},QI,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Supply Family Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter Here"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Type something"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))}}]),t}(n.Component),ZI=(ku.a.Option,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onBlurSaveInput=function(e){ak({name:e.target.value,parent:n.props.packageData.parent.id,tier_type:n.state.tier_type}).then((function(){n.props.getPackageData(n.props.packageData.id),n.setState({visibleInput:!1})}))},n.handleKeyDown=function(e){"Enter"==e.key&&n.onBlurSaveInput(e)},n.handleVisibleInput=function(e){n.setState({visibleInput:!n.props.visibleInput,tier_type:e})},n.addTierMenu=function(){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput("SUPPLY_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput(Wd)}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.supply_group_icon,alt:"",className:"img-fluid mr-2"}),"Supply Group")))},n.state={visibleInput:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state.visibleInput;return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement("div",{className:"row mx-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},l.a.createElement("div",{className:"mb-0 d-flex children-heading-last align-items-center"},l.a.createElement(Pm.a,{onBlur:function(a){return e.onBlurSaveInput(a)},autoFocus:!0,onKeyDown:this.handleKeyDown}))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){e.setState({visibleInput:!1})}},l.a.createElement("span",null,"Cancel")))),l.a.createElement("div",{className:"row mx-0 add-sub-tier-main-row"},l.a.createElement("div",{className:""},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return e.addTierMenu()}},l.a.createElement(Vm.a,{className:"add-sub-tier-btn bg-transparent border-0 rounded-0 shadow-none text-uppercase"},"+ ADD TIER/GROUP")))))}}]),t}(n.Component)),XI={labelCol:{span:24},wrapperCol:{span:24}},eA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={loading:!1,data:null,total:0},e.formRef=l.a.createRef(),e.getResource=function(){e.setState({fetching:!0}),tk(e.props.item.id).then((function(a){e.setState({resources:a.data.results})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handleFormChange=function(){var a=e.formRef.current,t=a.getFieldValue,n=a.setFieldsValue,l=t("purchase_price")/t("estimate_life")/t("estimated_days")||0,c=t("annual_premium")/t("estimated_days")||0,i=t("annual_premium")/t("average_gallon")||0,r=t("annual_registration_fee")/t("estimated_days")||0,s=t("annual_permit_fee")/t("estimated_days")||0,o=t("maintenance_per_year")/t("estimated_days")||0,m=t("other_cost_per_year")/t("estimated_days")||0;n({per_day_dpr:l.toFixed(2),insurance_per_day:c.toFixed(2),fuel_per_day:i.toFixed(2),reg_per_day:r.toFixed(2),permit_per_day:s.toFixed(2),maintenance_per_day:o.toFixed(2),other_cost_per_day:m.toFixed(2)}),e.setState({total:parseFloat(l.toFixed(2))+parseFloat(c.toFixed(2))+parseFloat(r.toFixed(2))+parseFloat(s.toFixed(2))+parseFloat(o.toFixed(2))+parseFloat(m.toFixed(2))})},e.handleSubmit=function(a){a.measurement_unit="UNITS",nk(e.props.item.id,a).then((function(a){Mm.b.success("Supply Family updated successfully"),e.setState({data:a.data})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.item&&(this.formRef.current.setFieldsValue(Object(wu.a)({},this.props.item)),this.handleFormChange(),this.getResource())}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFieldsChange:this.handleFormChange,onFinish:this.handleSubmit},XI,{ref:this.formRef,hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h5",null,"Supply Group Calculations"),l.a.createElement("h6",null,"Per Day Depreciation")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimated_days",label:"Estimated Days of Use per Year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimate_life",label:"Estimated Life (Years) *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_hours",label:"Average Hours per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_price",label:"Purchase Price *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"per_day_dpr",label:"Per Day Depreciation",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Insurance per Day")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_premium",label:"Annual Insurance Premium",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"insurance_per_day",label:"Insurance per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Registration per Day")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_registration_fee",label:"Annual Registration Fee *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"reg_per_day",label:"Registration per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Permit per Day")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_permit_fee",label:"Annual Permit Fee *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"permit_per_day",label:"Permit per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Maintenance")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_year",label:"Maintenance per Year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_day",label:"Maintenance per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_year",label:"Other Cost per Year",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_day",label:"Other Cost per Day",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-sm-6"},l.a.createElement("ul",{className:"list-inline text-md-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Day:"),l.a.createElement("li",{className:"list-inline-item"},"$",this.state.total))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),aA=Object(r.withRouter)(eA),tA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.visible,t=e.item,n=e.onClose;return l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.supply_sub_tier_icon}),l.a.createElement("span",{className:"ml-3"},t.name)),destroyOnClose:!0,placement:"right",width:700,closable:!1,onClose:n,visible:a,style:{position:"absolute"}},l.a.createElement("div",{className:"breadcrumb-inner-details inline-item-breadcrumb"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},t.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:t.name},l.a.createElement(qm.a,null,t.name)))),l.a.createElement(aA,{item:t,onClose:n}))}}]),t}(n.Component),nA=(n.Component,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onSelect=function(e,a){},n.openDeleteModal=function(e){n.setState({warningModalVisible:!0,deleteItem:e})},n.removeItem=function(){ck(n.state.deleteItem.id).then((function(){n.props.getPackage(n.props.packageData.id)})),n.showWarningModal(!1)},n.menu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.onEditItem(e)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.openDeleteModal(e)}},"Delete")))},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"SUPPLY_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,Wd)}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.supply_group_icon,alt:"",className:"img-fluid mr-2"}),"Supply Group")))},n.handleKeyDown=function(e,a){console.log(e),"Enter"==e.key&&n.onBlurSaveInput(e,a)},n.renderItemTree=function(e){return l.a.createElement("div",{key:e.id,className:"row ml-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},"SUPPLY_TIER"===e.tier_type?l.a.createElement("div",{className:"only-text d-flex align-items-center"},l.a.createElement("span",null," ",e.name),l.a.createElement("div",{className:"add-tier-div-plus"},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return n.addTierMenu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0"},l.a.createElement("span",null,"+"))))):e.tier_type===Wd?l.a.createElement("div",{onClick:function(){return n.handleItemDrawer(e)},className:"mb-0 d-flex images-with-name children-heading-last align-items-center"},l.a.createElement("img",{src:Rm.supply_group_icon,alt:"",className:"img-fluid",style:{marginRight:"10px"}}),e.title):l.a.createElement("div",{className:"mb-0 d-flex input-with-name children-heading-last align-items-center"},e.item_type===Wd&&l.a.createElement("img",{src:Rm.supply_group_icon,alt:"",className:"img-fluid"}),l.a.createElement(Pm.a,{value:n.state.editFormValue,autoFocus:!0,disabled:n.state.inputLoader,onChange:function(e){return n.setState({editFormValue:e.target.value})},onBlur:function(a){return n.onBlurSaveInput(a,e)},onKeyDown:function(a){return n.handleKeyDown(a,e)}}),n.state.inputLoader&&l.a.createElement(U_.a,{style:{fontSize:"25px",marginLeft:"20px"}})),"SUPPLY_TIER"===e.tier_type&&l.a.createElement("span",{className:"d-flex align-items-center small-heading"},e.children.length,l.a.createElement("span",null,l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement("div",{className:"remove-dropdown"},e.tier_type!==Ud?l.a.createElement(xu.a,{trigger:"click",overlay:function(){return n.menu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0",onClick:function(e){e.preventDefault(),e.stopPropagation()}},l.a.createElement("span",{className:"mr-1"},Yd[e.tier_type].name),l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))):l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree cancel-btn-tree-1 d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){return n.onRemoveInputField(e)}},l.a.createElement("span",null,"Cancel")))))},n.onAddInputField=function(e,a){var t=n.props.packageData.parent.children;t=JSON.parse(JSON.stringify(t)),e.item_type=a;var l=n.handleTreeData(t,e),c=n.state.keys;c.push(e.key),n.setState({treeData:Object(Ou.a)(l),editFormValue:"",keys:c})},n.onEditItem=function(e){var a=n.props.packageData.parent.children;a=JSON.parse(JSON.stringify(a));var t=n.handleTreeData(a,e,!0);n.setState({treeData:Object(Ou.a)(t),editFormValue:e.name})},n.onRemoveInputField=function(e){var a=n.props.packageData.parent.children,t=n.handleTreeData(a);n.setState({treeData:Object(Ou.a)(t)})},n.handleItemDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({visibleItemDrawer:!n.state.visibleItemDrawer,itemDrawer:e})},n.handleTreeData=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((function(e){e.title=e.name,e.key=e.id?e.id:e.name;var l=e.children;return t&&a&&a.id===e.id?(e.item_type=a.tier_type,e.tier_type=Ud):!t&&a&&a.id===e.id&&l.unshift({name:"INPUT TITLE"+a.id,tier_type:Ud,children:[],item_type:a.item_type,parent:a}),n.handleTreeData(l,a,t)})),e},n.onBlurSaveInput=function(e,a){if(e.target.value){n.setState({inputLoader:!0});var t={name:e.target.value,tier_type:a.item_type};a.id?nk(a.id,t).then((function(){n.setState({inputLoader:!1}),n.props.getPackage(n.props.packageData.id)})):(t.parent=a.parent.id,ak(t).then((function(e){n.setState({inputLoader:!1}),n.props.getPackageData(n.props.packageData.id)})))}},n.setFieldData=function(e){var a=[];(null===e||void 0===e?void 0:e.parent)&&(a=n.handleTreeData(e.parent.children)),n.setState({treeData:a})},n.showWarningModal=function(e){n.setState({warningModalVisible:e})},n.onExpand=function(e){n.setState({keys:e})},n.state={treeData:[],inputLoader:!1,visibleItemDrawer:!1,visibleTierDrawer:!1,itemDrawer:null,tierDrawer:null,editFormValue:"",keys:[]},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"componentDidMount",value:function(){this.setFieldData(this.props.packageData)}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.treeData,i=n.visibleItemDrawer,r=n.itemDrawer;n.visibleTierDrawer,n.tierDrawer;return c.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(L_.a,{defaultExpandAll:!0,className:"custom-tree-structure custom-tree-structure-update",switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),onSelect:this.onSelect,titleRender:this.renderItemTree,treeData:c,autoExpandParent:!1}),i?l.a.createElement(tA,{visible:i,item:r,onClose:this.handleItemDrawer}):"",l.a.createElement(mh,{heading:"Are you sure you want to delete this ".concat("SUPPLY_TIER"==(null===(e=this.state.deleteItem)||void 0===e?void 0:e.tier_type)?"Tier":"Supply Group","?"),okAction:function(){return t.removeItem()},subHeading:l.a.createElement("p",{className:"mb-0 mx-auto",style:{width:"100%"}},"SUPPLY_TIER"==(null===(a=this.state.deleteItem)||void 0===a?void 0:a.tier_type)?"If you choose to delete this Tier, the Tier and everything that it includes (Tiers, Supply Groups) would be deleted.":"If you choose to delete this Supply Group, this Supply Group and everything that it includes (Supply / Small Tools, etc) would be deleted."),visible:this.state.warningModalVisible,onClose:function(){return t.showWarningModal(!1)},deleteLineItem:!0,cancelText:"No, cancel this action",okTitle:"Yes, I want to delete"})):l.a.createElement("div",null)}}]),t}(n.Component)),lA=(n.Component,{labelCol:{span:24},wrapperCol:{span:24}}),cA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onSubmit=function(e){n.props.packageData?Mm.b.success("Supply Group updated successfully!"):Mm.b.success("Supply Group created successfully!")},n.state={loading:!1},n}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please build your supply family using tiers and supply groups."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},lA,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"SUPPLIES")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(nA,this.props)),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(ZI,this.props)),l.a.createElement("div",{className:"col-12 p-0 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main",onClick:this.onSubmit},"Save and Continue")))))))}}]),t}(n.Component),iA=fu.a.Panel,rA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={current:0,packageData:null,visible:!1,visibleWarning:!1,activeKey:["1"],unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.prev=function(){e.setState({current:e.state.current-1})},e.onCompleteSupplyFamily=function(){var a,t;o.push(Object(Sf.a)(zm.dashboard.management.supply_tools.supply_packages.view,{id:null===(a=e.state)||void 0===a||null===(t=a.packageData)||void 0===t?void 0:t.id}))},e.setPackage=function(a,t){var n;(null===(n=e.state.packageData)||void 0===n?void 0:n.name)?e.setState((function(){return{packageData:a}})):e.setState((function(){return{packageData:a,unsavedExit:!0}}));var l=null;e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l||e.setState((function(e){return{packageData:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"2")))}}))},e.getPackageData=function(a){e.setState({loading:!0}),ek(a).then((function(a){e.setState({packageData:a.data},(function(){e.setState({loading:!1})}))}))},e.getPackage=function(){var a=Object(Qm.a)($m.a.mark((function a(t){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.setState({loading:!0}),ek(t).then((function(a){e.setState({packageData:a.data},(function(){var a,t,n,l=null===(a=e.state)||void 0===a?void 0:a.packageData;(null===l||void 0===l?void 0:l.name)&&((null===l||void 0===l||null===(t=l.parent)||void 0===t||null===(n=t.children)||void 0===n?void 0:n.length)?(e.setState({packageData:l,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.props.match.params.id||e.setState({packageData:l,unsavedExit:!0}))}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.collapseOnChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n;e.state.data;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?e.onCompleteSupplyFamily():e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Create Supply Family",url:zm.dashboard.management.supply_tools.supply_packages.create}],a=[{title:"Edit Supply Family",url:zm.dashboard.management.supply_tools.supply_packages.edit}];this.props.setBreadcrumb(this.props.match.params.id?a:e),this.props.match.params.id&&(this.getPackage(this.props.match.params.id),this.setState({activeKey:this.props.location.editTab||"1"}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.packageData,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement("div",{className:"steps-content"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},activeKey:n,onChange:this.collapseOnChange},l.a.createElement(iA,{header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*"))),key:"1"},l.a.createElement(JI,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage})),l.a.createElement(iA,{disabled:!t,header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Supply Family ",l.a.createElement("sup",null,"*"))),key:"2"},l.a.createElement(cA,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage,getPackageData:this.getPackageData})))),l.a.createElement("div",{className:"steps-action common-steps-action d-flex align-items-center justify-content-end"},l.a.createElement(Vm.a,{className:"border-0 shadow-none text-center",style:{margin:"0 8px"},onClick:function(){return e.showWarningModal(!0)}},"Cancel"),l.a.createElement(Vm.a,{type:"primary",className:"border-0 shadow-none text-center",onClick:function(){return e.state.unsavedExit?e.onCompleteSupplyFamily():e.handleViewMainButtonCLick()}},"View Supply Family"))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Supply Family!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select"," ",l.a.createElement(Vm.a,{onClick:this.onCompleteSupplyFamily,className:"p-0 bg-transparent shadow-none border-0"},"View Supply Family"),"."),okTitle:"View Supply Family",okAction:this.onCompleteSupplyFamily,visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Supply Family?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the supply family, select View supplyFamily.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View supplyFamily",onOK:function(){var a,t;e.showRequiredSuccessModal(!1),o.push(Object(Sf.a)(zm.dashboard.management.supply_tools.supply_packages.view,{id:null===(a=e.state)||void 0===a||null===(t=a.packageData)||void 0===t?void 0:t.id}))}}))}}]),t}(n.Component),sA=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(rA)),oA={labelCol:{span:24},wrapperCol:{span:24}},mA=ku.a.Option,dA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={subtiers:[],fetching:!1,supplyMargin:null},e.formRef=l.a.createRef(),e.fetchSubTiers=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),lk(Object(wu.a)(Object(wu.a)({},a),{},{not_group:!0})).then((function(a){e.setState({subtiers:a.data.results,fetching:!1}),e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.data),{},{parent:e.props.data.parent.id,margin:e.props.data.margin?"".concat(e.props.data.margin,"%"):null}))})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleSubmit=function(a){a.margin=e.state.supplyMargin,e.props.data?nk(e.props.data.id,a).then((function(a){e.props.setData(a.data,2),e.setState({data:a.data}),Mm.b.success("Supply Group Updated successfully!")})).catch((function(e){td(e)})):(a.tier_type=Wd,ak(a).then((function(a){e.props.setData(a.data,2),e.setState({data:a.data}),Mm.b.success("Supply Group created successfully!")})).catch((function(e){td(e)})))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.handleMargin=function(a){e.setState({supplyMargin:a}),e.formRef.current.setFieldsValue({margin:"".concat(a,"%")})},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(Qm.a)($m.a.mark((function e(a,t,n){return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.data!==this.props.data&&this.fetchSubTiers();case 1:case"end":return e.stop()}}),e,this)})));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.subtiers,c=this.props,i=c.name,r=c.subtier,s=(c.measurement_unit,c.onChange);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input information to complete supply group calculations."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},oA,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Supply Group Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{value:i,onChange:function(e){return s("name",e.target.value)},placeholder:"Supply Group Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"parent",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Supply Family / Tier *"),l.a.createElement("img",{src:Rm.info_small,alt:"",className:"img-fluid"})),rules:[{required:!0,message:"this field is required"}],className:"position-relative custom-select-main"},l.a.createElement(ku.a,{showSearch:!0,value:r,placeholder:"Search Supply Families and Tiers",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchSubTiers()},onSearch:this.debounceEvent((function(a){return e.fetchSubTiers({search:a})}),1e3),dropdownClassName:"custom-select-drop-main",onChange:function(e){s("subtier",e)},optionLabelProp:"label"},n.map((function(e,a){return l.a.createElement(mA,{key:a,label:e.name,value:e.id},l.a.createElement(xS,{data:e,img:e.parent?null:Rm.supply_sub_tier_icon,type:e.parent?"Supply Tier":"Supply Family"}))}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"margin",label:"Margin *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{onBlur:function(a){return e.handleMargin(a.target.value)},placeholder:"Margin"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),uA=Object(r.withRouter)(dA),pA={labelCol:{span:24},wrapperCol:{span:24}},vA=(ku.a.Option,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={loading:!1,data:null},e.formRef=l.a.createRef(),e.handleSubmit=function(a){nk(e.props.data.id,a).then((function(a){e.props.setData(a.data,2),e.setState({data:a.data}),Mm.b.success("Supply Group Updated successfully!")})).catch((function(e){td(e)}))},e.handleFormChange=function(){var a=e.formRef.current,t=a.getFieldValue,n=a.setFieldsValue,l=t("purchase_price")/t("estimate_life")/t("estimated_days")||0,c=t("annual_premium")/t("estimated_days")||0,i=t("annual_registration_fee")/t("estimated_days")||0,r=t("annual_permit_fee")/t("estimated_days")||0,s=t("maintenance_per_year")/t("estimated_days")||0,o=t("other_cost_per_year")/t("estimated_days")||0;n({per_day_dpr:l.toFixed(2),insurance_per_day:c.toFixed(2),reg_per_day:i.toFixed(2),permit_per_day:r.toFixed(2),maintenance_per_day:s.toFixed(2),other_cost_per_day:o.toFixed(2)}),e.setState({total:parseFloat(l.toFixed(2))+parseFloat(c.toFixed(2))+parseFloat(i.toFixed(2))+parseFloat(r.toFixed(2))+parseFloat(s.toFixed(2))+parseFloat(o.toFixed(2))})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&tk(this.props.match.params.id).then((function(a){e.formRef.current.setFieldsValue(Object(wu.a)({},a.data)),e.handleFormChange()})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e,a,t;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input information to complete supply group calculations."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFieldsChange:this.handleFormChange,onFinish:this.handleSubmit},pA,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Per Day Depreciation")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimated_days",label:"Estimated Days of Use per Year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimate_life",label:"Estimated Life (Years) *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_hours",label:"Average Hours per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_price",label:"Purchase Price *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-6"},l.a.createElement(Fm.a.Item,{name:"per_day_dpr",label:"Per Day Depreciation *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{style:{background:"#F2F2F2"},disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Insurance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_premium",label:"Annual Insurance Premium",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"insurance_per_day",label:"Insurance per Day",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{background:"#F2F2F2"},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Registration Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_registration_fee",label:"Annual Registration Fee",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"reg_per_day",label:"Registration per Day",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{background:"#F2F2F2"},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Permit Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_permit_fee",label:"Annual Permit Fee",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"permit_per_day",label:"Permit Per Day",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{background:"#F2F2F2"},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Maintenance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_year",label:"Maintenance per Year",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_day",label:"Maintenance per Day",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{background:"#F2F2F2"},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_year",label:"Other Cost per Year",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_day",label:"Other Cost per Day",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-sm-6"},l.a.createElement("ul",{className:"list-inline text-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Day:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===(e=this.state.total)||void 0===e?void 0:e.toFixed(2))),l.a.createElement("ul",{className:"list-inline text-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Hour:"),l.a.createElement("li",{className:"list-inline-item"},"$",((null===(a=this.state.total)||void 0===a?void 0:a.toFixed(2))/(null===(t=this.formRef.current)||void 0===t?void 0:t.getFieldValue("average_hours"))).toFixed(2)))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component)),hA=Object(r.withRouter)(vA),fA=fu.a.Panel,EA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:null,visible:!1,visibleWarning:!1,activeKey:"1",name:null,subtier:null,unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.onChange=function(a,t){e.setState(Object(zv.a)({},a,t))},e.setData=function(a,t){var n,l;(null===(n=e.state.data)||void 0===n?void 0:n.name)&&(null===(l=e.state.data)||void 0===l?void 0:l.parent)?(e.setState((function(){return{data:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{data:a,unsavedExit:!0}}));var c=null;e.state.activeKey.length>1&&(c=e.state.activeKey.find((function(e){return e==t}))),c||e.setState((function(e){return{data:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"2")))}}))},e.onCollapseChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.data;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_groups.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Create Supply Group",url:zm.dashboard.management.supply_tools.supply_groups.create}],t=[{title:"Edit Supply Group",url:zm.dashboard.management.supply_tools.supply_groups.edit}];this.props.match.params.id?(this.props.setBreadcrumb(t),tk(this.props.match.params.id).then((function(a){e.setState({data:a.data,name:a.data.name,subtier:a.data.parent.parent})})).catch((function(e){td(e)})),this.setState({activeKey:this.props.location.editTab||"1"})):this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.data,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:n,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},onChange:this.onCollapseChange},l.a.createElement(fA,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(uA,{onChange:this.onChange,setData:this.setData,data:t})),l.a.createElement(fA,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Supply Group Calculations ",l.a.createElement("sup",null,"*")))),key:"2"},l.a.createElement(hA,{data:t,setData:this.setData}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},className:"border-0 shadow-none text-center",style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_groups.view,{id:t.id})):e.handleViewMainButtonCLick()},type:"primary"},"View Supply Group"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Supply Group!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_groups.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Supply Group"),"."),okTitle:"View Supply Group",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_groups.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Supply Group?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Supply Group, select View Supply Group.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View Supply Group ",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_groups.view,{id:null===t||void 0===t?void 0:t.id})),console.log(null===t||void 0===t?void 0:t.id,"iddd")}}))}}]),t}(n.Component),gA=Object(Lm.b)(null,{setBreadcrumb:Uv})(EA),bA={labelCol:{span:24},wrapperCol:{span:24}},NA=ku.a.Option,yA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={groups:[]},e.formRef=l.a.createRef(),e.fetchGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),a.tier_type=Wd,lk(a).then((function(a){e.setState({groups:a.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e}))})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSubmit=function(a){a.supply_group=a.supply_group.key,e.props.supply?rk(e.props.supply.id,a).then((function(a){e.props.setSupply(a.data,2),Mm.b.success("Supply/Small Tools updated successfully!")})).catch((function(e){td(e)})):ik(a).then((function(a){e.props.setSupply(a.data,2),Mm.b.success("Supply/Small Tools created successfully!")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(Qm.a)($m.a.mark((function e(a,t,n){return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.supply===this.props.supply){e.next=4;break}return e.next=3,this.fetchGroups();case 3:this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.supply),{},{supply_group:{key:this.props.supply.supply_group.id,value:this.props.supply.supply_group.name}}));case 4:case"end":return e.stop()}}),e,this)})));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.groups;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input supply name and choose a supply group."," "))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},bA,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Supply Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter a nickname to distinguish the inventory item"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"supply_group",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Supply Group *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,placeholder:"Search Supply Groups",showSearch:!0,notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchGroups()},onSearch:function(a){return e.fetchGroups({search:a})},onChange:this.handleSelect},n.map((function(e,a){return l.a.createElement(NA,{key:a,label:e.name,value:e.id},l.a.createElement(xS,{data:e,img:e.parent&&Rm.supply_sub_tier_icon,type:e.parent&&"Supply Group"}))}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),wA=Object(r.withRouter)(yA),_A={labelCol:{span:24},wrapperCol:{span:24}},SA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[],loading:!1},e.docsColumns=[{title:"Name",dataIndex:"name",render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},e))},sorter:!0},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",{className:"name-id-details"},Nd(e)," ")}},{title:l.a.createElement("div",{className:"position-relative"},"FORMAT"),sorter:!0,dataIndex:"format",render:function(e){return l.a.createElement("div",{className:"name-id-details"},".",e)}}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("supply",e.props.supply.id),n.append("document",t),pk(n).then((function(a){e.fetchFiles()})).catch((function(e){td(e)}))},e.fetchFiles=function(){uk({supply:e.props.supply.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({hideRequiredMark:!0},_A,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.state.files.length>0?l.a.createElement("div",{className:"row mx-0 summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{loading:this.state.loading,className:"main-table-all carpet-cleaning-table border-0",columns:this.docsColumns,dataSource:this.state.files,size:"middle",pagination:!1}))):l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"files",label:"Document",rules:[{required:!1,message:""}]},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or"," ",l.a.createElement("span",{className:"ml-1"},"Browse"))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main",onClick:function(){return Mm.b.success("Supply/Small tools updated successfully!")}},"Save and Continue"))))))))))}}]),t}(n.Component),xA=Object(r.withRouter)(SA),CA={labelCol:{span:24},wrapperCol:{span:24}},OA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={total:0},e.handleSubmit=function(a){rk(e.props.supply.id,a).then((function(a){e.props.setSupply(a.data,4),Mm.b.success("Supply/Small Tools Updated successfully")})).catch((function(e){td(e)}))},e.handleFormChange=function(){var a=e.formRef.current,t=a.getFieldValue,n=a.setFieldsValue,l=t("purchase_price")/t("estimate_life")/t("estimate_days")||0,c=t("annual_insurance_premium")/t("estimate_days")||0,i=t("annual_registration_fee")/t("estimate_days")||0,r=t("annual_permit_fee")/t("estimate_days")||0,s=t("maintenance_per_year")/t("estimate_days")||0,o=t("other_cost_per_year")/t("estimate_days")||0;n({per_day_dpr:l.toFixed(2),insurance_per_day:c.toFixed(2),reg_per_day:i.toFixed(2),permit_per_day:r.toFixed(2),maintenance_per_day:s.toFixed(2),other_cost_per_day:o.toFixed(2)}),e.setState({total:parseFloat(l.toFixed(2))+parseFloat(c.toFixed(2))+parseFloat(i.toFixed(2))+parseFloat(r.toFixed(2))+parseFloat(s.toFixed(2))+parseFloat(o.toFixed(2))})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.formRef.current.setFieldsValue(Object(wu.a)({},this.props.supply)),this.handleFormChange()}},{key:"render",value:function(){var e,a,t;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input information to complete supply / small tool calculation."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFieldsChange:this.handleFormChange,ref:this.formRef,onFinish:this.handleSubmit},CA,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Per Day Depreciation")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimate_days",label:"Estimated Days of Use per Year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimate_life",label:"Estimated Life (Years) *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"average_hours",label:"Average Hours per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"Enter here"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"purchase_price",label:"Purchase Price *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6 offset-6"},l.a.createElement(Fm.a.Item,{name:"per_day_dpr",label:"Per Day Depriciation",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Insurance Cost")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_insurance_premium",label:"Annual Insurance Premium",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"insurance_per_day",label:"Insurance per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Permit Cost")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_permit_fee",label:"Annual Permit Fee *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"permit_per_day",label:"Permit per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Registration Cost")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"annual_registration_fee",label:"Annual Registration Fee *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"reg_per_day",label:"Registration per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,placeholder:"$0.00",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Maintenance Cost")),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_year",label:"Maintenance per Year *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-md-6 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"maintenance_per_day",label:"Maintenance per Day *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},disabled:!0,placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("h6",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_year",label:"Other Cost per Year",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"other_cost_per_day",label:"Other Cost per Day",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(ap.a,{disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6 offset-sm-6"},l.a.createElement("ul",{className:"list-inline text-md-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Day:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===(e=this.state.total)||void 0===e?void 0:e.toFixed(2))),l.a.createElement("ul",{className:"list-inline text-md-right"},l.a.createElement("li",{className:"list-inline-item"},"Total Cost per Hour:"),l.a.createElement("li",{className:"list-inline-item"},"$",((null===(a=this.state.total)||void 0===a?void 0:a.toFixed(2))/(null===(t=this.formRef.current)||void 0===t?void 0:t.getFieldValue("average_hours"))).toFixed(2)))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),kA=Object(r.withRouter)(OA),jA={labelCol:{span:24},wrapperCol:{span:24}},IA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,visibleWarning:!1,county:[],updateMainState:null},e.showWarningModal=function(a){e.setState({visible:a})},e.formRef=l.a.createRef(),e.onSubmit=function(a){if(e.props.editData){var t=Object(wu.a)(Object(wu.a)({},a),{},{type:"SUPPLY"});tv(e.props.editData.id,t).then((function(a){Mm.b.success("Internal Location Updated Successfully"),e.props.callbackContact(a.data),e.formRef.current.resetFields()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}else{nv(Object(wu.a)(Object(wu.a)({},a),{},{type:"SUPPLY"})).then((function(a){Mm.b.success("Internal Location Created Successfully"),e.props.callbackContact&&e.props.callbackContact(a.data),e.formRef.current.resetFields()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}e.props.onClose()},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e.populateData=function(){var a;e.props.editData?e.formRef.current.setFieldsValue(Object(wu.a)({},e.props.editData)):(null===(a=e.formRef)||void 0===a?void 0:a.current)&&e.formRef.current.setFieldsValue({country:"United States"})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showWarningModal2=function(a){e.setState({visibleWarning:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data}),e.setState({updateBillingState:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=(this.props.editData,this.state),t=a.county,n=a.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,destroyOnClose:!0,title:"Create Warehouse",visible:this.props.visible,onOk:this.props.onClose,closable:!0,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",onClose:this.props.onClose,placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal2(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){e.formRef.current.submit(),e.showConfirmModal(!0)},type:"primary"},"".concat(this.props.editData?"Update":"Create")))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit},jA,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:" Name",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Location Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(n,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"zip",label:"Zip/Postal Code",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Please select Country"},np.map((function(e){return l.a.createElement(ku.a.Option,{value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")},parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))))))),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal2(!1)},heading:l.a.createElement("div",null,"Are you sure you want to exit creating/editing this Warehouse?"),subHeadingUOM:"If you choose to exit, none of the progress you have made will be saved.",commonInternalLocationPopup:!0,showWarningModal2:function(){e.props.onClose(),e.showWarningModal2(!1)}})))}}]),t}(n.Component),AA=Object(r.withRouter)(IA),DA=ku.a.Option,TA={labelCol:{span:24},wrapperCol:{span:24}},RA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={contacts:[],selectedContacts:[],fetching:!1,visible:!1,warningVisible:!1,item:null},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleEdit(a)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleEdit=function(a){e.setState({editData:a,visible:!0})},e.handleRemove=function(){e.setState({selectedContacts:[]}),e.props.getSupply()},e.fetchContacts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(wu.a)({},a);dk(t).then((function(a){e.setState({contacts:a.data.results})})).catch((function(e){}))},e.handleSelect=function(a){e.formRef.current.setFieldsValue({internal_location:null});var t=e.state.contacts.filter((function(e){return e.id==a}));e.setState({selectedContacts:t}),e.props.getSupply()},e.callbackContact=function(a){e.setState({selectedContacts:[a]}),e.fetchContacts()},e.handleSubmit=function(a){var t,n,l={type:"SUPPLY",internal_location:(null===(t=e.state)||void 0===t||null===(n=t.selectedContacts[0])||void 0===n?void 0:n.id)||null};rk(e.props.supply.id,l).then((function(a){e.props.setSupply(a.data,3),e.props.getSupply(),Mm.b.success("Supply/small tools updated successfully!")})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.showContact=function(){e.setState({visible:!1,editData:null})},e.showWarningModal=function(a){e.setState({warningVisible:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){if(this.props.match.params.id){var e,a,t,n,l=[];if(null===(e=this.props)||void 0===e||null===(a=e.supply)||void 0===a?void 0:a.internal_location)l.push(null===(t=this.props)||void 0===t||null===(n=t.supply)||void 0===n?void 0:n.internal_location);this.setState({selectedContacts:l})}}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.contacts,c=a.selectedContacts;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can only choose one warehouse per supply / small tool."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,hideRequiredMark:!0,ref:this.formRef},TA,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"internal_location",label:"Warehouse *",className:"position-relative search-overlap"},l.a.createElement(ku.a,{placeholder:"Search ",showSearch:!0,notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchContacts()},onSearch:function(a){return e.fetchContacts({search:a})},onChange:this.handleSelect},n.map((function(e){return l.a.createElement(DA,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name,l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.street_address||"",", ",e.city||"",","," ",e.state||"",",",e.zip||""," ",e.country||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Warehouse")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute",onClick:function(){e.setState({visible:!0})}},"+ Create"))),l.a.createElement("div",{className:"row mx-0"},0===c.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row add-site-blank-row align-items-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"color-gray-3"},"No Internal Locations")))),c.map((function(a){return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{key:null===a||void 0===a?void 0:a.id,className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===a||void 0===a?void 0:a.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat((null===a||void 0===a?void 0:a.street_address)||""," ").concat((null===a||void 0===a?void 0:a.name)||""," ").concat((null===a||void 0===a?void 0:a.city)||""," ").concat((null===a||void 0===a?void 0:a.state)||""," ").concat((null===a||void 0===a?void 0:a.zip)||""," ").concat((null===a||void 0===a?void 0:a.country)||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===a||void 0===a?void 0:a.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(null===a||void 0===a?void 0:a.phone))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(a),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))})),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(AA,{callbackContact:this.callbackContact,fetchContacts:this.fetchContacts,editData:this.state.editData,visible:this.state.visible,onClose:function(){return e.showContact(!1)}}),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to remove this Warehouse?",subHeadingUOM:"If you choose to remove this Warehouse, this might cause issues.",common:!0,commonFunc:function(){e.handleRemove(),e.showWarningModal(!1)}}))}}]),t}(n.Component),MA=Object(r.withRouter)(RA),FA=fu.a.Panel;var PA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={supply:null,visible:!1,visibleWarning:!1,activeKey:["1"],unsavedExit:!1,requiredSuccessModalVisible:!1},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.setSupply=function(a,t){var n,l;(null===(n=e.state.supply)||void 0===n?void 0:n.name)&&(null===(l=e.state.supply)||void 0===l?void 0:l.supply_group)?(null===a||void 0===a?void 0:a.internal_location)&&a.estimate_days&&a.estimate_life&&a.average_hours&&a.purchase_price?(e.setState((function(){return{supply:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{supply:a}})):e.setState((function(){return{supply:a,unsavedExit:!0}}));var c=null;e.state.activeKey.length>1&&(c=e.state.activeKey.find((function(e){return e==t}))),c||e.setState((function(e){return{supply:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"4")))}}))},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.getSupply=function(){mk(e.props.match.params.id||e.state.supply.id).then((function(a){e.setState({supply:a.data},(function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.supply;(null===t||void 0===t?void 0:t.name)&&(null===t||void 0===t?void 0:t.supply_group)&&(e.props.match.params.id||((null===t||void 0===t?void 0:t.internal_location)&&t.estimate_days&&t.estimate_life&&t.average_hours&&t.purchase_price?e.setState((function(){return{supply:t,unsavedExit:!1}})):e.setState((function(){return{supply:t,unsavedExit:!0}}))))}))})).catch((function(e){td(e)}))},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.supply;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_tools.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[{title:"Edit Supply/Small tool",url:zm.dashboard.management.supply_tools.self}],t=[{title:"Create Supply/Small tool",url:zm.dashboard.management.supply_tools.self}];this.props.match.params.id?(this.props.setBreadcrumb(a),mk(this.props.match.params.id).then((function(a){e.setState({supply:a.data}),e.setState({activeKey:e.props.location.editTab||"1"})})).catch((function(e){td(e)}))):this.props.setBreadcrumb(t)}},{key:"render",value:function(){var e=this,a=this.state,t=a.supply,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:n,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},onChange:this.collapseOnChange},l.a.createElement(FA,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(wA,{supply:t,setSupply:this.setSupply})),l.a.createElement(FA,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Warehouse"))),key:"2"},l.a.createElement(MA,{supply:t,setSupply:this.setSupply,getSupply:this.getSupply})),l.a.createElement(FA,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Supply/Small Tools Calculations ",l.a.createElement("sup",null,"*")))),key:"3"},l.a.createElement(kA,{supply:t,setSupply:this.setSupply,getSupply:this.getSupply})),l.a.createElement(FA,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"4"},l.a.createElement(xA,{supply:t,setSupply:this.setSupply}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},className:"border-0 shadow-none text-center",style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_tools.view,{id:t.id})):e.handleViewMainButtonCLick()},type:"primary"},"View Supply/Small Tools"))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Supply/Small Tool!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_tools.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Supply/Small Tool"),"."),okTitle:"View Supply/Small Tool",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_tools.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Supply/Small Tool?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Supply Small Tool, select View Supply Small Tool.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View Supply Small Tool ",onOK:function(){e.showRequiredSuccessModal(!1),o.push(zm.dashboard.management.supply_tools.supply_tools.view,{id:t.id})}}))}}]),t}(n.Component),VA=Object(Lm.b)(null,{setBreadcrumb:Uv})(PA),qA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={lastChild:[],loading:!1,pagination:{current:1,pageSize:15}},e.supplyGroupColumns=[{title:"Name",dataIndex:"name",sorter:!0},{title:"Supplies / Small Tools",dataIndex:"supply",sorter:!0}],e.handleTableChange=function(a,t,n){e.getGroups({page:a.current})},e.getGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),ek(e.props.match.params.id,a).then((function(a){e.fetchLastChild(a.data.parent.children,[],a.data.parent.name),e.setState({loading:!1})})).catch((function(a){e.setState({loading:!1}),td(a)}))},e.fetchLastChild=function(a,t,n){a.forEach((function(a){a.parent=Object(Ou.a)(t),a.parent.push(n);var l=a.children.filter((function(e){return!e.type}));0===l.length?(delete a.children,e.setState((function(e){return{lastChild:[].concat(Object(Ou.a)(e.lastChild),[a])}}))):e.fetchLastChild(l,a.parent,a.name)}))},e.onSearch=function(a){e.getGroups({search:a.target.value})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getGroups()}},{key:"render",value:function(){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.supply_tools.supply_groups.create,buttonName:"Create Supply Group",onSearch:this.onSearch}),l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(UN,{data:this.state.lastChild,loading:this.state.loading,pagination:!1,onTableChange:this.handleTableChange,rowLink:zm.dashboard.management.supply_tools.supply_groups.view,columns:this.supplyGroupColumns}))))))}}]),t}(n.Component),LA=Object(r.withRouter)(qA),UA=fu.a.Panel,BA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={treeData:[],data:[]},e.handleKey=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a){var n=Object(Ou.a)(a);return n.forEach((function(a,n){a.type||(a.key=t?t+"parent"+n:a.id),a.children=e.handleKey(a.children)})),n}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;ek(this.props.match.params.id).then((function(a){var t=[{title:"Supply/Small Tools",url:zm.dashboard.management.supply_tools.self},{title:"Supply Families",url:zm.dashboard.management.supply_tools.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t);var n=e.handleKey(a.data.parent.children,a.data.parent.id);e.setState({treeData:n,data:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(UA,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.supply_tools.supply_packages.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Supply Family Name"),l.a.createElement("h5",{className:"mb-0"},a.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Description"),l.a.createElement("h5",{className:"mb-0"},a.description)))))),l.a.createElement(UA,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Supply Family ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.supply_tools.supply_packages.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"row mx-0 px-0 pt-0 summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"SUPPLIES")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),this.state.treeData.length>0?l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(L_.a,{className:"custom-tree-structure ",showLine:!0,filterTreeNode:function(e){return!(e.tier_type!=Wd||!Xd(e))},defaultExpandAll:!0,switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),selectable:!1,titleRender:function(e){return l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between ".concat(e.tier_type==Wd&&Xd(e)&&"is-required","\n                            "),onClick:function(){return e.tier_type===Wd?o.push(Object(Sf.a)(zm.dashboard.management.supply_tools.supply_groups.view,{id:e.id})):null}},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},e.tier_type===Wd&&l.a.createElement("img",{src:Rm.supply_group_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"}," ",e.name," ")),e.children&&0!==e.children.filter((function(e){return!e.type})).length&&l.a.createElement("div",{className:"branch-div-tg d-flex align-items-center"},l.a.createElement("span",{className:"count-span-tg"},e.children.filter((function(e){return!e.type})).length),l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"d-flex align-items-center"},e.tier_type===Wd&&Xd(e)&&l.a.createElement("div",{className:"d-flex mr-3 align-items-center"},l.a.createElement("p",{className:"mb-0 ml-1",style:{fontSize:"11px",fontStyle:"italic",color:"#EB5757"}},"Please complete all required information to avoid issues")),l.a.createElement("div",{className:"text-green-tag text-right-tree"},Yd[e.tier_type].name)))},treeData:this.state.treeData})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"50px"},className:"row mx-0 mb-0 mt-3 border-0 no-data-card-row align-items-center bg-transparent justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.Supply_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Supplies")))))))))))}}]),t}(n.Component),WA=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(BA)),YA=vf.a.TabPane,KA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(YA,{tab:"Summary",key:"1"},l.a.createElement(WA,null)),l.a.createElement(YA,{tab:"Supply Groups",key:"2"},l.a.createElement(LA,null)))))))}}]),t}(n.Component),GA=fu.a.Panel,zA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:null,loading:!0,view:!1,supply:[],total:0,requiredFields:!0},e.supplyColumns=[{title:"SUPPLY ID",dataIndex:"id",sorter:!0},{title:"SUPPLY NAME",dataIndex:"name",sorter:!0},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,null===e||void 0===e?void 0:e.name))}},{title:"SUPPLY GROUP",dataIndex:"supply_group",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e.name))}},{title:"TOTAL COST/DAY",dataIndex:"",sorter:!0,render:function(e){return Dd(e)}}],e.fetchSupplyTools=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};sk(Object(wu.a)(Object(wu.a)({},a),{},{supply_group:e.props.match.params.id})).then((function(a){e.setState({supply:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),tk(this.props.match.params.id).then((function(a){var t=[{title:"Supply/Small Tools",url:zm.dashboard.management.supply_tools.self},{title:"Supply Groups",url:zm.dashboard.management.supply_tools.self},{title:a.data.name,url:"#"}];e.props.setSupplyGroup(a.data),e.props.setBreadcrumb(t);var n={per_day_dpr:(a.data.purchase_price/a.data.estimate_life/a.data.estimated_days||0).toFixed(2),insurance_per_day:(a.data.annual_premium/a.data.estimated_days||0).toFixed(2),reg_per_day:(a.data.annual_registration_fee/a.data.estimated_days||0).toFixed(2),permit_per_day:(a.data.annual_permit_fee/a.data.estimated_days||0).toFixed(2),maintenance_per_day:(a.data.maintenance_per_year/a.data.estimated_days||0).toFixed(2),other_cost_per_day:(a.data.other_cost_per_year/a.data.estimated_days||0).toFixed(2)},l=Object.keys(n).reduce((function(e,a){return e+parseFloat(n[a]||0)}),0).toFixed(2);e.setState({data:Object(wu.a)(Object(wu.a)({},a.data),n),total:l,loading:!1},(function(){e.setState({requiredFields:Xd(e.state.data)})}))})).catch((function(a){td(a),e.setState({loading:!1})})),this.fetchSupplyTools()}},{key:"render",value:function(){var e=this,a=this.state,t=a.data;return a.loading?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement(Wv.a,null))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(GA,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.management.supply_tools.supply_groups.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Supply Group Name"),l.a.createElement("h5",{className:"mb-0"},null===t||void 0===t?void 0:t.name)),l.a.createElement("div",{className:"col-12 col-sm-4 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Supply Family / tier"),l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},t.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:t.name},l.a.createElement(qm.a,null,t.name)))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Margin"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},(null===t||void 0===t?void 0:t.margin)?"".concat(null===t||void 0===t?void 0:t.margin,"%"):"-")))))),l.a.createElement(GA,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Supply Group Calculations ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.management.supply_tools.supply_groups.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row border-left-0 border-right-0 account-tabs-min summary-header-details search-view-header-in-collapse align-items-center carpet-cleaning-mini-header "},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row pt-2 pb-1"},l.a.createElement("div",{className:"total_cost_per"},"Total Cost per Day"),l.a.createElement("div",{className:"total_cost_per_count"},xd(this.state.total)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row pt-1 pb-2"},l.a.createElement("div",{className:"total_cost_per"},"Total Cost Per Hour"),l.a.createElement("div",{className:"total_cost_per_count"},"$ ".concat(parseFloat(xd(this.state.total/(null===t||void 0===t?void 0:t.average_hours)||"0").slice(1)).toFixed(2))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Per Day Depreciation")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Per Day Depr"),l.a.createElement("h5",{className:"mb-0"},xd(t.per_day_dpr||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Days of use per Year"),l.a.createElement("h5",{className:"mb-0"},t.estimated_days||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Life (Years)"),l.a.createElement("h5",{className:"mb-0"},t.estimate_life||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Average Hours Per Day"),l.a.createElement("h5",{className:"mb-0"},t.average_hours||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Cost"),l.a.createElement("h5",{className:"mb-0"},xd(t.purchase_price||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Insurance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Insurance Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.insurance_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Auto Insurance Premium"),l.a.createElement("h5",{className:"mb-0"},xd(t.annual_premium||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Registration Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Registration Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.reg_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Registration Fee"),l.a.createElement("h5",{className:"mb-0"},xd(t.annual_registration_fee||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Permit Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Permit Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.permit_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Permit Fee"),l.a.createElement("h5",{className:"mb-0"},xd(t.annual_permit_fee||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Maintenance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Maintenance Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.maintenance_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Maintenance Per Year"),l.a.createElement("h5",{className:"mb-0"},xd(t.maintenance_per_year||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Other Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.other_cost_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Other Per Year"),l.a.createElement("h5",{className:"mb-0"},xd(t.other_cost_per_year||"0")))))))),l.a.createElement(GA,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Supplies/Small Tools")),key:"3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mb-4 new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.fetchSupplyTools({search:a.target.value})},placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",this.state.supply.length),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))),l.a.createElement(Vm.a,{onClick:function(){return e.props.handleViewAll()},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),this.state.supply.length>0?this.state.view?l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.supplyColumns,dataSource:this.state.supply,size:"middle",pagination:!0,onRow:function(e){return{onClick:function(){e&&o.push(Object(Gm.reverse)(zm.dashboard.management.supply_tools.supply_tools.view,{id:e.id}))}}}})):l.a.createElement("div",{className:"row mx-0"},this.state.supply.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row mx-0 add-vehicles-main-row align-items-center position-relative",onClick:function(){return o.push(Object(Gm.reverse)(zm.dashboard.management.supply_tools.supply_tools.view,{id:e.id}))}},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.supply_gear_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content float-left"},l.a.createElement("h6",null,e.name),l.a.createElement("p",{className:"mb-0"},t.name))))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Supplies/Small Tools"))))))))))}}]),t}(n.Component),HA=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(zA)),$A=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={supply:[],loading:!1,view:!1},e.supplyColumns=[{title:"SUPPLY ID",dataIndex:"id",sorter:!0},{title:"SUPPLY NAME",dataIndex:"name",sorter:!0},{title:"WAREHOUSE",dataIndex:"internal_location",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e.name))}},{title:"SUPPLY GROUP",dataIndex:"supply_group",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,e.name))}},{title:"TOTAL COST/DAY",dataIndex:"",sorter:!0,render:function(e){return Dd(e)}}],e.fetchSupply=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.supply_group=e.props.match.params.id,sk(a).then((function(a){e.setState({supply:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchSupply()}},{key:"render",value:function(){var e=this,a=this.state,t=a.supply,n=(a.loading,a.view);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-collapse-inner-row-main pt-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header "},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.fetchSupply({search:a.target.value})},placeholder:"Search Supplies"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"d-flex align-items-center grid-system-div"},l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item w-auto"},"Total : ",this.state.supply.length),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"active":""),onClick:function(){return e.setState({view:!0})}},l.a.createElement("img",{src:Rm.list_view_icon,className:"img-fluid img-gray",alt:"list view"}),l.a.createElement("img",{src:Rm.list_view_icon_active,className:"img-fluid img-active",alt:"list view"}))),l.a.createElement("li",{className:"list-inline-item w-auto"},l.a.createElement(Vm.a,{className:"".concat(this.state.view?"":"active"),onClick:function(){return e.setState({view:!1})}},l.a.createElement("img",{src:Rm.grid_view_icon,className:"img-fluid img-gray",alt:"grid view"}),l.a.createElement("img",{src:Rm.grid_view_icon_active,className:"img-fluid img-active",alt:"grid view"})))))))),t.length>0?n?l.a.createElement("div",{className:"row mx-0 px-5"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",columns:this.supplyColumns,dataSource:this.state.supply,size:"middle",pagination:!0,onRow:function(e){return{onClick:function(){e&&o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_tools.view,{id:e.id}))}}}}))):l.a.createElement("div",{className:"row mx-0 px-4 summary-collapse-inner-row-main"},t.map((function(e){return l.a.createElement("div",{className:"col-12 col-sm-6",onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.supply_tools.supply_tools.view,{id:e.id}))}},l.a.createElement("div",{className:"row mx-0 add-vehicles-main-row align-items-center position-relative"},l.a.createElement("div",{className:"add-vehicles-img float-left"},l.a.createElement("img",{src:Rm.supply_gear_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"add-vehicles-content float-left"},l.a.createElement("h6",null,e.name),l.a.createElement("p",{className:"mb-0"},t.name))))}))):l.a.createElement("div",{className:"row mx-0 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Supplies/Small Tools"))))))}}]),t}(n.Component),QA=Object(r.withRouter)($A),JA=vf.a.TabPane,ZA=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={key:"1",requiredFields:!0,supplyGroup:null},e.handleChange=function(a){e.setState({key:a})},e.setSupplyGroup=function(a){e.setState({requiredFields:Xd(a)})},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state.requiredFields;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},a&&l.a.createElement("div",{className:"row mx-0 info-gray-div info-red-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please complete all required information to avoid issues")),l.a.createElement(vf.a,{defa:!0,onChange:this.handleChange,className:"carpet-cleaning-main-common-tab",activeKey:this.state.key},l.a.createElement(JA,{tab:"Summary",key:"1"},l.a.createElement(HA,{handleViewAll:function(){return e.handleChange("2")},setSupplyGroup:this.setSupplyGroup})),l.a.createElement(JA,{tab:"Supplies/Small Tools ",key:"2"},l.a.createElement(QA,null)))))))}}]),t}(n.Component),XA=Object(r.withRouter)(ZA),eD=fu.a.Panel,aD=(ku.a.Option,ku.a.OptGroup,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={supply:null,group:null,loading:!0,files:[]},e.docsColumns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))},sorter:!0},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.getFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};uk(Object(wu.a)(Object(wu.a)({},a),{},{supply:e.props.match.params.id})).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("supply",e.props.match.params.id),n.append("document",t),pk(n).then((function(a){e.getFiles()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.match.params.id&&(mk(this.props.match.params.id).then((function(a){var t=[{title:"Supply/Small Tools",url:zm.dashboard.management.supply_tools.self},{title:"Supply/Small Tools",url:zm.dashboard.management.supply_tools.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t);var n={per_day_dpr:(a.data.purchase_price/a.data.estimate_life/a.data.estimate_days||0).toFixed(2),insurance_per_day:(a.data.annual_insurance_premium/a.data.estimate_days||0).toFixed(2),reg_per_day:(a.data.annual_registration_fee/a.data.estimate_days||0).toFixed(2),permit_per_day:(a.data.annual_permit_fee/a.data.estimate_days||0).toFixed(2),maintenance_per_day:(a.data.maintenance_per_year/a.data.estimate_days||0).toFixed(2),other_cost_per_day:(a.data.other_cost_per_year/a.data.estimate_days||0).toFixed(2)},l=Object.keys(n).reduce((function(e,a){return e+parseFloat(n[a]||0)}),0).toFixed(2);tk(a.data.supply_group).then((function(t){e.setState({supply:Object(wu.a)(Object(wu.a)({},a.data),n),total:l,loading:!1,group:t.data})}))})).catch((function(a){td(a),e.setState({loading:!1})})),this.getFiles())}},{key:"render",value:function(){var e=this,a=this.state,t=a.supply;return a.loading?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement(Wv.a,null))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row "},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(eD,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.supply_tools.supply_tools.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"supply ID"),l.a.createElement("h5",{className:"mb-0"},t.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"supply / small tool name"),l.a.createElement("h5",{className:"mb-0"},t.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"supply group"),l.a.createElement("h5",{className:"mb-0"},t.supply_group.name)))))),l.a.createElement(eD,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Supply/Small Tools Calculations ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.supply_tools.supply_tools.edit,{id:e.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row border-left-0 border-right-0 account-tabs-min summary-header-details search-view-header-in-collapse align-items-center carpet-cleaning-mini-header "},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row pt-2 pb-1"},l.a.createElement("div",{className:"total_cost_per"},"Total Cost per Day"),l.a.createElement("div",{className:"total_cost_per_count"},xd(this.state.total)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row pt-1 pb-2"},l.a.createElement("div",{className:"total_cost_per"},"Total Cost Per Hour"),l.a.createElement("div",{className:"total_cost_per_count"},"$ ".concat(parseFloat(xd(this.state.total/(null===t||void 0===t?void 0:t.average_hours)).slice(1)).toFixed(2),"\n  ")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Per Day Depreciation")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Per Day Depr"),l.a.createElement("h5",{className:"mb-0"},xd(t.per_day_dpr||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Days of use per Year"),l.a.createElement("h5",{className:"mb-0"},t.estimate_days||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Life (Years)"),l.a.createElement("h5",{className:"mb-0"},t.estimate_life||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Average Hours Per Day"),l.a.createElement("h5",{className:"mb-0"},t.average_hours||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 offset-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Purchase Cost"),l.a.createElement("h5",{className:"mb-0"},xd(t.purchase_price||"0")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Insurance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Insurance Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.insurance_per_day||"-"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Insurance Premium"),l.a.createElement("h5",{className:"mb-0"},xd(t.annual_insurance_premium||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Registration Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Registration Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.reg_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Registration Fee"),l.a.createElement("h5",{className:"mb-0"},xd(t.annual_registration_fee||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Permit Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Permit Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.permit_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Annual Permit Fee"),l.a.createElement("h5",{className:"mb-0"},xd(t.annual_permit_fee||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Maintenance Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Maintenance Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.maintenance_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Maintenance Per Year"),l.a.createElement("h5",{className:"mb-0"},xd(t.maintenance_per_year||"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h5",null,"Other Cost")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Other Per Day"),l.a.createElement("h5",{className:"mb-0"},xd(t.other_cost_per_day||"0"))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Other Per Year"),l.a.createElement("h5",{className:"mb-0"},xd(t.other_cost_per_year||"0")))))))),l.a.createElement(eD,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Warehouse"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.supply_tools.supply_tools.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"3"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-3"},l.a.createElement("div",{className:"col-12"},t.internal_location?l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,t.internal_location.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(t.internal_location.street_address," ").concat(t.internal_location.city," \n                                                                    ").concat(t.internal_location.state," ").concat(t.internal_location.zip," ").concat(t.internal_location.country))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},t.internal_location.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(t.internal_location.phone)))):l.a.createElement("div",{className:"row mx-0 no-data-card-row no-data-card-row-2 align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.location_gray}),l.a.createElement("h6",{className:"mb-0"},"No Internal Locations")))))))),l.a.createElement(eD,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents")),key:"5"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{onChange:function(a){return e.getFiles({search:a.target.value})},placeholder:"Search "}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse ml-2 text-capitalize"},"+ Upload"))),l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:!0,loading:this.state.loading,className:"main-table-all",columns:this.docsColumns,dataSource:this.state.files,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))))))))}}]),t}(n.Component)),tD=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(aD)),nD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:[],files:[],loading:!1,pagination:{current:1,pageSize:15}},e.columns=[{title:"NAME",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"SIZE",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.docsData=[{key:"1",docs_name:"Mike",size:32,format:"10 Downing Street"},{key:"2",name:"John",age:42,address:"10 Downing Street"}],e.getFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};uk(Object(wu.a)(Object(wu.a)({},a),{},{supply:e.props.match.params.id})).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("supply",e.props.match.params.id),n.append("document",t),pk(n).then((function(a){e.getFiles()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 summary-collapse-inner-row-main mt-30 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header "},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main pt-0 pb-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:!0,loading:this.state.loading,className:"main-table-all",columns:this.columns,dataSource:this.state.files,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_icon,alt:"cloud icon",style:{width:40}}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))))}}]),t}(n.Component),lD=Object(r.withRouter)(nD),cD=vf.a.TabPane,iD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={tab:"1"},e.tabChange=function(a){e.setState({tab:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{activeKey:this.state.tab,onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(cD,{tab:"Summary",key:"1"},l.a.createElement(tD,{tabChange:this.tabChange})),l.a.createElement(cD,{tab:"Documents",key:"2"},l.a.createElement(lD,null)))))))}}]),t}(n.Component),rD=fu.a.Panel,sD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={current:0,packageData:null,visible:!1,warningVisible:!1,activeKey:"1",unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showWarningM=function(a){e.setState({warningVisible:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.next=function(){e.setState({current:e.state.current+1})},e.prev=function(){e.setState({current:e.state.current-1})},e.setPackage=function(a,t){var n;(null===(n=e.state.packageData)||void 0===n?void 0:n.name)?e.setState((function(){return{packageData:a}})):e.setState((function(){return{packageData:a,unsavedExit:!0}}));var l=null;if(e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l)return null;e.setState((function(t){for(var n="",l=0;l<=e.state.activeKey.length;l++)l==e.state.activeKey.length&&(n=l.toString());return{packageData:a,activeKey:[].concat(Object(Ou.a)(t.activeKey),Object(Ou.a)(_d(n,"2")))}}))},e.getPackageData=function(a){e.setState({loading:!0}),sg(a).then((function(a){e.setState({packageData:a.data})}))},e.getPackage=function(a){e.setState({loading:!0}),sg(a).then((function(a){e.setState({packageData:a.data},(function(){var a,t,n=e.state.packageData;(null===n||void 0===n?void 0:n.name)&&((null===n||void 0===n||null===(a=n.parent)||void 0===a||null===(t=a.children)||void 0===t?void 0:t.length)?(e.setState({unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.props.match.params.id||e.setState({unsavedExit:!0}))}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.packageData;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.service.family.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){if(this.props.match.params.id){this.props.setBreadcrumb([{title:"Edit Service Family",url:"#"}]),this.getPackage(this.props.match.params.id),this.setState({activeKey:this.props.location.editTab||"1"})}else{this.props.setBreadcrumb([{title:"Create Service Family",url:"#"}])}}},{key:"render",value:function(){var e=this,a=this.state,t=a.packageData,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement("div",{className:"steps-content"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},activeKey:n,onChange:this.collapseOnChange},l.a.createElement(rD,{header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*"))),key:"1"},l.a.createElement(PO,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage})),l.a.createElement(rD,{disabled:!t,header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Service Family ",l.a.createElement("sup",null,"*"))),key:"2"},l.a.createElement(kk,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage,getPackageData:this.getPackageData})))),l.a.createElement("div",{className:"steps-action common-steps-action d-flex align-items-center justify-content-end"},l.a.createElement(Vm.a,{className:"border-0 shadow-none text-center",style:{margin:"0 8px"},onClick:function(){return e.showWarningM(!0)}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,type:"primary",className:"border-0 shadow-none text-center",onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.service.family.view,{id:t.id})):e.handleViewMainButtonCLick()}},"View Service Family"))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Service Family!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.service.family.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Service Family"),"."),okTitle:"View Service Family",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.service.family.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningM(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Service Family?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the service family, select View Service Family.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View Service Family",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.service.family.view,{id:t.id}))}}))}}]),t}(n.Component),oD=Object(Lm.b)(null,{setBreadcrumb:Uv})(sD),mD=(fu.a.Panel,{FLEET_GROUP:Rm.create_vehicle_group_icon,LABOR:Rm.labor_sub_tier_icon,SUPPLY_GROUP:Rm.create_supply_group_icon,INVENTORY_ITEM:Rm.create_inventory_group_icon,INVENTORY_KIT:Rm.inventory_kit_sub_tier_icon}),dD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={children:[],loading:!1,pagination:{current:1,pageSize:15,showSizeChanger:!1}},e.columns=[{title:"dry Name",key:"name",render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:mD[e.item_type]}),l.a.createElement("span",{className:"ml-2"},e.resource_name))}}],e.itemsColumns=[{title:"Service Name",dataIndex:"name",sorter:{compare:function(e,a){var t;return null===(t=e.name)||void 0===t?void 0:t.localeCompare(a.name)}}},{title:"Service Family",render:function(e){return l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:e.name},l.a.createElement(qm.a,null,e.name)))}}],e.getPackage=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),fg(Object(wu.a)(Object(wu.a)({},a),{},{parent:e.props.match.params.id})).then((function(t){e.setState({children:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count})})})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.searchServices=function(a){e.getPackage({search:a.target.value})},e.handleTableItemChange=function(a,t,n){e.getPackage({page:a.current})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return a.persist(),e.debouncedEvent(a)}},e.getLocaleData=function(){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},"No Services"))))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPackage({page:1})}},{key:"render",value:function(){var e=this,a=this.state,t=(a.openDrawer,a.setDrawerItem,a.children);return l.a.createElement(l.a.Fragment,null,l.a.createElement(cb,{buttonName:"Create Service",onSearch:this.debounceEvent(this.searchServices,1e3),fetchData:function(a){return e.getPackage(a)}}),l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table customer-account-table"},l.a.createElement(fv.a,{loading:this.state.loading,className:"main-table-all",columns:this.itemsColumns,dataSource:t,pagination:this.state.pagination,onChange:this.handleTableItemChange,size:"middle",rowKey:function(e){return e.id},locale:{emptyText:this.getLocaleData()},onRow:function(e,a){return{onClick:function(a){o.push(Object(dh.a)(zm.dashboard.management.service.line_items.view,{id:e.id}))}}}}))))))}}]),t}(n.Component),uD=Object(r.withRouter)(dD),pD=fu.a.Panel,vD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={treeData:[],package:null},e.onSelect=function(e,a){},e.handleKey=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a){var n=Object(Ou.a)(a);return n.forEach((function(a,n){a.key=t?t+"parent"+n:a.id,a.children=e.handleKey(a.children)})),n}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;sg(this.props.match.params.id).then((function(a){var t=[{title:"Services",url:zm.dashboard.management.service.self},{title:"Service Families",url:zm.dashboard.management.service.self},{title:a.data.name,url:"#"}];e.props.setBreadcrumb(t);var n=e.handleKey(a.data.parent.children,a.data.parent.id);e.setState({treeData:n,itemPackage:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.itemPackage,n=a.treeData;return t?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(pD,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.service.family.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Service Family Name*"),l.a.createElement("h5",{className:"mb-0"},t.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Description"),l.a.createElement("h5",{className:"mb-0"},t.description)))))),l.a.createElement(pD,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Service Family ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.service.family.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"row mx-0 px-0 pt-0 summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"Services")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),this.state.treeData.length>0?l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(L_.a,{className:"custom-tree-structure",showLine:!0,defaultExpandAll:!0,switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),selectable:!1,titleRender:function(e){return l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between",onClick:function(){if("SERVICE_LINE_ITEM"!==e.tier_type)return null;o.push(Object(Sf.a)(zm.dashboard.management.service.line_items.view,{id:e.id}))}},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},"SERVICE_LINE_ITEM"===e.tier_type&&l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},e.name)),e.children&&0!==e.children.filter((function(e){return!e.type})).length&&l.a.createElement("div",{className:"branch-div-tg d-flex align-items-center"},l.a.createElement("span",{className:"count-span-tg"},e.children.filter((function(e){return!e.type})).length),l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"text-green-tag text-right-tree"},Yd[e.tier_type].name))},treeData:n})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"50px"},className:"row mx-0 mb-0 mt-3 border-0 no-data-card-row align-items-center bg-transparent justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.service_family_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Service Families"))))))))))):l.a.createElement("div",null)}}]),t}(n.Component),hD=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(vD)),fD=vf.a.TabPane,ED=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(fD,{tab:"Summary",key:"1"},l.a.createElement(hD,null)),l.a.createElement(fD,{tab:"Services",key:"2"},l.a.createElement(uD,null)))))))}}]),t}(n.Component),gD=fu.a.Panel,bD={FLEET_KIT_GROUP:Rm.vehicle_group_icon_new,FLEET_GROUP:Rm.vehicle_group_icon_new,FLEET_KIT:Rm.double_truck,LABOR:Rm.labor_sub_tier_icon,SUPPLY_GROUP:Rm.supply_group_icon_new,INVENTORY_ITEM:Rm.inventory_kit_sub_tier_icon_new,INVENTORY_KIT:Rm.inventory_kit_sub_tier_icon,DISPOSAL:Rm.disposal},ND=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={child:[],loading:!1,openDrawer:!1,deleteResource:null,resource:[],regions:[],page:1,pricing:[],pricingNew:[],dataToBeUpdated:null},e.columns=[{title:"Dry Name",key:"name",sorter:!0,render:function(e){var a,t;return"FLEET_KIT"==e.item_type?l.a.createElement("div",{id:"FLEET_KIT_".concat(e.id),className:"d-flex align-items-center ".concat((null===e||void 0===e?void 0:e.resource_item.fleet_group.length)>0?"fleet-kit-parent":"")},l.a.createElement("img",{alt:" ",className:"img-fluid",src:bD[e.item_type]}),l.a.createElement("span",{className:"ml-2"},e.resource_name)):"FLEET_KIT_GROUP"==e.item_type?l.a.createElement("div",{"data-id":"FLEET_KIT_".concat(e.fleet_id),className:"d-flex align-items-center fleet-kit-child"},l.a.createElement("img",{alt:" ",className:"img-fluid",src:bD[e.item_type]}),l.a.createElement("span",{className:"ml-2"},e.name)):l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:" ",className:"img-fluid",src:bD[e.item_type]}),l.a.createElement("span",{className:"ml-2"},"DISPOSAL"===e.item_type?"".concat((null===(a=e.resource_item)||void 0===a?void 0:a.disposal_code)||""," ").concat((null===(t=e.resource_item)||void 0===t?void 0:t.disposal_code)?"-":""," ").concat(e.resource_name):"FLEET_KIT_GROUP"===(null===e||void 0===e?void 0:e.item_type)?"".concat(null===e||void 0===e?void 0:e.name):e.resource_name))}},{title:"edit remove",key:"edit_remove",render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center justify-content-end"},l.a.createElement("span",{className:"resource-type-title"},bd("FLEET_KIT_GROUP"===e.item_type?"FLEET GROUP":e.item_type)))}}],e.sortArr=function(){for(var a,t=e.state.child,n={},l=["LABOR","FLEET_GROUP","SUPPLY_GROUP","DISPOSAL","INVENTORY_ITEM","INVENTORY_KIT"],c=0;c<l.length;c++)n[l[c]]=c;var i=null===t||void 0===t||null===(a=t.resource)||void 0===a?void 0:a.sort((function(e,a){return n[e.item_type]-n[a.item_type]||e.item_type.localeCompare(a.item_type)})),r=[];i.forEach((function(e,a){r.push(e),"FLEET_KIT"==e.item_type&&e.resource_item.fleet_group.forEach((function(a,t){r.push({item_type:"FLEET_KIT_GROUP",name:a.name,id:a.id,fleet_id:e.id})}))})),e.setState({resource:r})},e.removeItem=function(){hg(e.state.deleteResource.id).then((function(a){e.getLineItem(e.props.match.params.id)})).catch((function(e){td(e)}))},e.getLineItem=function(a){e.setState({loading:!0}),mg(a).then((function(a){var t=[{title:"Services",url:zm.dashboard.management.service.self},{title:"Services",url:zm.dashboard.management.service.self},{title:"".concat(a.data.name),url:"#"}];e.props.setBreadcrumb(t),e.setState({child:a.data},(function(){e.sortArr()}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.handleDrawer=function(a){a.stopPropagation(),e.setState({openDrawer:!0})},e.onClose=function(){e.setState({openDrawer:!1}),e.getLineItem(e.props.match.params.id,!0)},e.fetchGroup=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zp(a).then((function(a){e.setState({groups:a.data.results})})).catch((function(e){td(e)}))},e.getPricing=function(){e.setState({loading:!0}),Eg({item:e.props.match.params.id,page:e.state.page}).then((function(a){setTimeout((function(){e.setState((function(e){return{pricing:[].concat(Object(Ou.a)(e.pricing),Object(Ou.a)(a.data.results)),totalCount:a.data.count}}))}),1e3)})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.totalPrice=function(e){for(var a=null===e||void 0===e?void 0:e.table_data,t=0,n=0;n<(null===a||void 0===a?void 0:a.length);n++)if("labor_child"==a[n].item_type){var l=a[n].data;t+=(a[n].hours||1)*Number(Rd(Td(l,a[n].time,a[n].name),e.margin))}else if(a[n].item_type==Bd)t+=(a[n].hours||1)*Number(Rd(Id(a[n].data),e.margin));else if(a[n].item_type==Wd)t+=(a[n].hours||1)*Number(Rd(Ad(a[n].data),e.margin));else if("INVENTORY_ITEM"==a[n].item_type){var c,i,r,s,o;if(a[n].kit_child)t+=((a[n].quantity?a[n].quantity:a[n].initQuantity)||1)*Number(Rd((null===(c=a[n])||void 0===c?void 0:c.unit_cost)||0,(null===(i=a[n])||void 0===i?void 0:i.margin)||0));else t+=(a[n].hours||1)*Number(Rd((null===(r=a[n].data)||void 0===r?void 0:r.unit_cost)||0,(null===(s=a[n])||void 0===s||null===(o=s.data)||void 0===o?void 0:o.margin)||0))}else if("DISPOSAL"==a[n].item_type){var m,d,u,p;t+=(a[n].hours||1)*Number(Rd((null===(m=a[n])||void 0===m||null===(d=m.data)||void 0===d?void 0:d.unit_cost)||0,(null===(u=a[n])||void 0===u||null===(p=u.data)||void 0===p?void 0:p.margin)||0))}return t.toFixed(2)},e.hourPrice=function(a){for(var t=null===a||void 0===a?void 0:a.table_data,n=[],l=0;l<(null===t||void 0===t?void 0:t.length);l++)("labor_child"==t[l].item_type||t[l].item_type==Bd||t[l].item_type==Wd)&&n.push(t[l].hours);var c=n.filter((function(e){return void 0!=e}));return isFinite(Math.max.apply(Math,Object(Ou.a)(c)))?(e.totalPrice(a)/Math.max.apply(Math,Object(Ou.a)(c))).toFixed(2):e.totalPrice(a)},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.getPricing()}))},e.getBackendPricing=function(a){wg({pricing:(null===a||void 0===a?void 0:a.id)?null===a||void 0===a?void 0:a.id:a}).then((function(a){e.setState({pricingNew:a.data})})).catch((function(e){td(e)}))},e.returnToolTipData=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{style:{borderBottom:"1px solid #BDBDBD",color:"#BDBDBD",marginBottom:5,fontSize:"15px"}},l.a.createElement("img",{src:Rm.teams_labor_no_data_icon,alt:""})," Labor Groups"),l.a.createElement("ul",{style:{paddingLeft:"15px",paddinTop:"5px"}},e.length>0?null===e||void 0===e?void 0:e.map((function(e){return l.a.createElement("li",null,e||"-")})):l.a.createElement("li",null,"-")))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getLineItem(this.props.match.params.id),this.fetchGroup(),this.getPricing()}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.child,i=n.resource,r=n.regions,s=n.pricing,o=n.totalCount,m=n.loading,d=n.page,u=n.activeKey;n.tooltipData;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 create-opportunity-row line-items-row-view pt-3"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement(fu.a,{className:"vehicle-group-collapse-main min-head-collapse",accordion:!0,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},defaultActiveKey:"1"},l.a.createElement(gD,{key:"1",header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0 p-0 vehicle-group-heading d-flex align-items-center"},l.a.createElement("img",{src:Rm.line_items_group_icons,alt:" ",className:"img-fluid"}),c.name),l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:this.handleDrawer},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row align-items-center justify-content-between collapse-breadcrumb-main"},l.a.createElement("div",{className:"breadcrumb-inner-details"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},null===c||void 0===c||null===(e=c.breadcrumb)||void 0===e?void 0:e.map((function(e){return l.a.createElement(Su.a.Item,null,e)})),l.a.createElement(Su.a.Item,null,c.name))))))},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row tree-heading tree-heading-custom"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"Resource")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),(null===i||void 0===i?void 0:i.length)>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 table-responsive create-dry-table line-items-details-table main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",dataSource:i,columns:this.columns,size:"middle",pagination:!1})),l.a.createElement("div",{className:"col-12 taxable-nontaxable-div"},l.a.createElement("h6",null,"TAXABLE OR NONTAXABLE?"),l.a.createElement("p",null,c.tax?"Taxable":"Non-taxable"," "))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Resources"))))),l.a.createElement("div",{className:"row common-form-card-row px-3 mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 small-heading-in-form"},l.a.createElement("div",{className:"row mx-0 w-100 align-items-center justify-content-between"},l.a.createElement("h6",null,"Service Variants"),l.a.createElement("p",null,"Total Number of Variants: ",o||0))),0==(null===s||void 0===s?void 0:s.length)?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:0===(null===i||void 0===i?void 0:i.length)?{cursor:"not-allowed",opacity:"0.6"}:{},className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{style:0===(null===i||void 0===i?void 0:i.length)?{pointerEvents:"none"}:{},className:"col-12 text-center"},m&&1===d?l.a.createElement(Wv.a,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Service Variants"))))):l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{className:"vehicle-group-collapse-main dry-group-collapse-main",accordion:!0,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},onChange:function(e){t.setState({activeKey:e},(function(){t.getBackendPricing(e)}))},activeKey:u,defaultActiveKey:(null===(a=this.props.location.state)||void 0===a?void 0:a.pricingId)?["".concat(this.props.location.state.pricingId)]:[0]},null===s||void 0===s?void 0:s.map((function(e,a){var n,c,i,r,s,o,m,d;return l.a.createElement(gD,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0 vehicle-group-heading"},"".concat(null===e||void 0===e?void 0:e.region," - ").concat(e.name),l.a.createElement(gE.a,{className:"labor-group-info",placement:"top",title:function(){return t.returnToolTipData(null===e||void 0===e?void 0:e.labor_groups)},overlayStyle:{fontSize:11},arrowPointAtCenter:!0,destroyTooltipOnHide:!0},l.a.createElement("img",{src:Rm.info_small,alt:""}))),l.a.createElement("div",{className:"show-when-collapsed d-flex align-items-center justify-content-between"},l.a.createElement("ul",{className:"list-inline mb-0 pricing-estimated-ul d-flex align-items-center"},l.a.createElement("li",{className:"list-inline-item"},"Display Name: ".concat((null===e||void 0===e?void 0:e.display_name)||"-")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"d-flex align-items-center"},"Hourly Price:")),l.a.createElement("li",{className:"list-inline-item"},"$",e.hourly_price||"-"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"d-flex align-items-center"},"Daily Price:")),l.a.createElement("li",{className:"list-inline-item"},"$",e.daily_price||"-"),l.a.createElement("li",{className:"list-inline-item pl-1"},l.a.createElement("span",{className:"d-flex align-items-center"},"Unit Price:")),l.a.createElement("li",{className:"list-inline-item"},"$",e.price||0," ",(null===e||void 0===e?void 0:e.pricing_uom)&&"/ ".concat(null===e||void 0===e||null===(n=e.pricing_uom)||void 0===n?void 0:n.symbol))))))),key:e.id},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row",style:{overflow:"auto"}},l.a.createElement(HO,{view:!0,rows:t.state.pricingNew,getBackendPricing:function(){return t.getBackendPricing(e)},margin:e.margin}))),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 show-when-collapse-show footer-data-main footer-data-main-update"},l.a.createElement("div",{className:"row table-footer--1-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0 pricing-estimated-ul"},l.a.createElement("li",{className:"list-inline-item"},"Cost:"),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},l.a.createElement("span",null,"Hourly Cost:")),l.a.createElement("li",{className:"list-inline-item"},"$",(null===e||void 0===e||null===(c=e.hourly_cost)||void 0===c?void 0:c.toLocaleString())||0),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Daily Cost:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===e||void 0===e||null===(i=e.daily_cost)||void 0===i?void 0:i.toLocaleString()),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Unit Cost:"),l.a.createElement("li",{className:"list-inline-item"},(null===e||void 0===e?void 0:e.unit_cost)?"$".concat(null===e||void 0===e||null===(r=e.unit_cost)||void 0===r?void 0:r.toLocaleString(),"/").concat(null===e||void 0===e||null===(s=e.cost_uom)||void 0===s?void 0:s.symbol):"-")))),l.a.createElement("div",{className:"row table-footer--2-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0 pricing-estimated-ul"},l.a.createElement("li",{className:"list-inline-item"},"Suggested Price:"),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Hourly Price:"),l.a.createElement("li",{className:"list-inline-item"},"$",(null===e||void 0===e||null===(o=e.suggested_hourly_price)||void 0===o?void 0:o.toLocaleString())||0),l.a.createElement("li",{className:"list-inline-item border-0 p-0"},"Daily Price:"),l.a.createElement("li",{className:"list-inline-item"},"$",null===e||void 0===e||null===(m=e.suggested_daily_price)||void 0===m?void 0:m.toLocaleString())))),l.a.createElement("div",{className:"row table-footer--3-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0 pricing-estimated-ul"},l.a.createElement("li",{className:"list-inline-item"},"Price:"),l.a.createElement("li",{className:"list-inline-item border-0 pr-0 position-relative ".concat(0==e.hourly_percentage&&"no-percentage")},"Hourly Price:",0!=e.hourly_percentage&&l.a.createElement("small",null,e.hourly_percentage>0?"".concat(e.hourly_percentage,"% markup"):"".concat(Math.abs(e.hourly_percentage),"% markdown"))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"theme-color"},"$",gd(null===e||void 0===e?void 0:e.hourly_price)||"-")),l.a.createElement("li",{className:"list-inline-item border-0 pr-0 position-relative ".concat(0==e.daily_percentage&&"no-percentage")},l.a.createElement("span",null,"Daily Price:"),0!=e.daily_percentage&&l.a.createElement("small",null,e.daily_percentage>0?"".concat(e.daily_percentage,"% markup"):"".concat(Math.abs(e.daily_percentage),"% markdown"))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"theme-color"}," $",gd(null===e||void 0===e?void 0:e.daily_price)||"-")),l.a.createElement("li",{className:"list-inline-item border-0 pr-0"},"Unit Price:"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"theme-color"},"$",e.price||0," ",(null===e||void 0===e?void 0:e.pricing_uom)&&"/ ".concat(null===e||void 0===e||null===(d=e.pricing_uom)||void 0===d?void 0:d.symbol))))))))))}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},m?l.a.createElement(Wv.a,null):(null===s||void 0===s?void 0:s.length)!==o&&l.a.createElement(Vm.a,{onClick:this.handlePagination},"Load More"))))))))))),l.a.createElement(yk,{visible:this.state.openDrawer,item:this.state.child,onClose:function(e){if(t.getBackendPricing(u),e){var a=Object(Ou.a)(t.state.pricing),n=a.findIndex((function(a){return a.id===e.id}));"-1"!=n?(a[n]=e,t.setState({pricing:a})):(a.push(e),t.setState((function(e){return{pricing:a,totalCount:e.totalCount+1}})))}t.onClose()},regions:r}))}}]),t}(n.Component),yD=Object(r.withRouter)(Object(Lm.b)(null,{setBreadcrumb:Uv})(ND)),wD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(yD,null)))))}}]),t}(n.Component),_D=vf.a.TabPane,SD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={packages:[],pricingSummary:[],items:[],loading:!1,currentKey:1,pagination:{current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},dateFilter:{start:"",end:"",start_modified:"",end_modified:""},regions:[],search:"",filterObj:null,filterApplied:!1,breadcrumb:[]},e.columns=[{title:"Service Family Name",dataIndex:"name",sorter:!0,key:"name"},{title:"Services",dataIndex:"parent",sorter:!0,render:function(e){return l.a.createElement("div",null,e.item_count)}}],e.itemsColumns=[{title:"Service Family",key:"service_family",sorter:!0,render:function(e){var a;return l.a.createElement("div",null,(null===(a=e.service_family)||void 0===a?void 0:a.name)||"-",l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid pl-1"}))},width:"300px"},{title:"Tiers",dataIndex:"breadcrumb",render:function(e){var a;return l.a.createElement("div",null,null===e||void 0===e||null===(a=e.filter((function(e,a){return 0!=a})))||void 0===a?void 0:a.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,e),l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid mx-1"}))})))},sorter:!0,width:"700px"},{title:"Service Name",dataIndex:"name",className:"font-weight-bold",sorter:!0,key:"name",width:"300px"}],e.itemsColumnsPricingSummary=[{title:"Service Family",render:function(e){var a;return l.a.createElement("div",null,(null===(a=e.family)||void 0===a?void 0:a.name)||"-",l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid pl-1"}))},sorter:!0,width:"250px"},{title:"Tiers",dataIndex:"breadcrumb",render:function(e){var a;return l.a.createElement("div",null,null===e||void 0===e||null===(a=e.filter((function(e,a){return 0!=a})))||void 0===a?void 0:a.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,e),l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid mx-1"}))})))},sorter:!0,width:"300px"},{title:"Service Variant Name",sorter:!0,key:"name",width:"270px",render:function(e){var a;return l.a.createElement("div",{className:"font-weight-bold"},l.a.createElement("span",{className:"font-weight-normal"},(null===(a=e.line_item)||void 0===a?void 0:a.name)||"-"," /")," ",null===e||void 0===e?void 0:e.region," - ",e.name||"")}},{title:"Labor Groups",key:"labor_groups",width:"300px",dataIndex:"labor_groups",render:function(a){return l.a.createElement("div",null,a[0]&&a[0]||"-"," ",a.length>1&&"".concat(a.length-1," more"),a.length>1&&l.a.createElement(gE.a,{className:"labor-group-info labor-group-info-update",placement:"top",title:function(){return e.returnToolTipData(a)},overlayStyle:{fontSize:11},arrowPointAtCenter:!0,destroyTooltipOnHide:!0},l.a.createElement("img",{src:Rm.info_small,alt:""})))}},{title:"Hourly Price",key:"hourly",sorter:!0,render:function(e){return l.a.createElement(l.a.Fragment,null,(null===e||void 0===e?void 0:e.hourly_price)&&"$",gd(null===e||void 0===e?void 0:e.hourly_price)||"-")}},{title:"Daily Price",key:"daily",sorter:!0,render:function(e){return l.a.createElement(l.a.Fragment,null,(null===e||void 0===e?void 0:e.daily_price)&&"$",gd(null===e||void 0===e?void 0:e.daily_price)||"-")}},{title:"Unit Price",dataIndex:"price",sorter:!0,key:"price",render:function(e,a){var t;return l.a.createElement(l.a.Fragment,null,(null===a||void 0===a?void 0:a.price)&&"$",e||"-",(null===a||void 0===a?void 0:a.pricing_uom)&&(null===a||void 0===a?void 0:a.price)&&" / ",null===a||void 0===a||null===(t=a.pricing_uom)||void 0===t?void 0:t.symbol)}}],e.returnToolTipData=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{style:{borderBottom:"1px solid #BDBDBD",color:"#BDBDBD",marginBottom:5,fontSize:"15px"}},l.a.createElement("img",{src:Rm.teams_labor_no_data_icon,alt:""})," Labor Groups"),l.a.createElement("ul",{style:{paddingLeft:"15px",paddinTop:"5px"}},e.length>0?null===e||void 0===e?void 0:e.map((function(e){return l.a.createElement("li",null,e||"-")})):l.a.createElement("li",null,"-")))},e.fetchRegion=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ZE(a).then((function(a){e.setState({regions:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.totalPrice=function(e){for(var a=null===e||void 0===e?void 0:e.table_data,t=0,n=0;n<(null===a||void 0===a?void 0:a.length);n++)if("labor_child"==a[n].item_type){var l=a[n].data;t+=(a[n].hours||1)*Number(Rd(Td(l,a[n].time,a[n].name),e.margin))}else if(a[n].item_type==Bd)t+=(a[n].hours||1)*Number(Rd(Id(a[n].data),e.margin));else if(a[n].item_type==Wd)t+=(a[n].hours||1)*Number(Rd(Ad(a[n].data),e.margin));else if("INVENTORY_ITEM"==a[n].item_type){var c,i,r,s,o;if(a[n].kit_child)t+=((a[n].quantity?a[n].quantity:a[n].initQuantity)||1)*Number(Rd((null===(c=a[n])||void 0===c?void 0:c.unit_cost)||0,(null===(i=a[n])||void 0===i?void 0:i.margin)||0));else t+=(a[n].hours||1)*Number(Rd((null===(r=a[n].data)||void 0===r?void 0:r.unit_cost)||0,(null===(s=a[n])||void 0===s||null===(o=s.data)||void 0===o?void 0:o.margin)||0))}else if("DISPOSAL"==a[n].item_type){var m,d,u,p;t+=(a[n].hours||1)*Number(Rd((null===(m=a[n])||void 0===m||null===(d=m.data)||void 0===d?void 0:d.unit_cost)||0,(null===(u=a[n])||void 0===u||null===(p=u.data)||void 0===p?void 0:p.margin)||0))}return t.toFixed(2)},e.hourPrice=function(a){for(var t=null===a||void 0===a?void 0:a.table_data,n=[],l=0;l<(null===t||void 0===t?void 0:t.length);l++)("labor_child"==t[l].item_type||t[l].item_type==Bd||t[l].item_type==Wd)&&n.push(t[l].hours);var c=n.filter((function(e){return void 0!=e}));return isFinite(Math.max.apply(Math,Object(Ou.a)(c)))?(e.totalPrice(a)/Math.max.apply(Math,Object(Ou.a)(c))).toFixed(2):e.totalPrice(a)},e.fetchPricingList=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state.filterObj;e.setState({loading:!0}),a.ordering||(a.ordering="name"),Eg(Object(wu.a)(Object(wu.a)(Object(wu.a)({},a),t),{},{page:a.page||1,search:e.state.search})).then((function(t){e.setState({pricingSummary:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){e.setState({loading:!1}),td(a)}))},e.fetchLinePackage=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),rg(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({packages:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchLineItem=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;e.setState({loading:!0}),a.ordering||(a.ordering="name"),a.tier_type="SERVICE_LINE_ITEM",og(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({items:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.onFamilySearch=function(a){e.setState({search:a.target.value},(function(){e.fetchLinePackage()}))},e.onItemSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchLineItem()}))},e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchLinePackage(c)},e.handleTableItemChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchLineItem(c)},e.handleTablePriceChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchPricingList(c)},e.tabChange=function(a){e.setState({currentKey:a,search:"",dateFilter:{start:"",end:"",start_modified:"",end_modified:""}},(function(){switch(a){case"1":var t=[{title:"Services",url:zm.dashboard.management.service.self},{title:"Service Families",url:zm.dashboard.management.service.self}];return e.props.setBreadcrumb(t),void e.fetchLinePackage();case"2":var n=[{title:"Services",url:zm.dashboard.management.service.self},{title:"Services",url:zm.dashboard.management.service.self}];return e.props.setBreadcrumb(n),void e.fetchLineItem();case"3":var l=[{title:"Services",url:zm.dashboard.management.service.self},{title:"Service Variants",url:zm.dashboard.management.service.self}];return e.props.setBreadcrumb(l),void e.fetchPricingList();default:e.setState({pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:1,pageSize:15})})}}))},e.onPricingSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchPricingList()}))},e.getLocaleData=function(e){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:1==e.key?Rm.service_family_gray_empty:Rm.line_items_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},1==e.key?"No Service Families":2==e.key?"No Services":"No Service Variants"))))},e.handleFilterLinePackage=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchLinePackage()})):e.setState({dateFilter:null},(function(){e.fetchLinePackage()}))},e.handleFilterLineItem=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchLineItem()})):e.setState({dateFilter:null},(function(){e.fetchLineItem()}))},e.setFilterObj=function(a,t){var n=!0;n=!(!a||!(a.daily_high||a.daily_low||a.family||a.hourly_high||a.hourly_low||a.region||a.service||a.unit||a.tier||a.unit_high||a.unit_low||a.variant)),e.setState({filterObj:a,breadcrumb:t,page:1,filterApplied:n},(function(){e.fetchPricingList()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Services",url:zm.dashboard.management.service.self},{title:"Service Families",url:zm.dashboard.management.service.self}];this.props.setBreadcrumb(e),this.fetchLinePackage(),this.fetchRegion()}},{key:"render",value:function(){var e=this,a=this.state,t=a.packages,n=a.pagination,c=a.loading,i=a.pricingSummary,r=a.filterApplied,s=a.filterObj;return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(vf.a,{onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(_D,{tab:"Service Families",key:"1"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.service.family.create,buttonName:"+ Create Service Family",onSearch:lu(this.onFamilySearch,1e3),fetchData:function(a){return e.handleFilterLinePackage(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-family-table"},l.a.createElement(UN,{data:t,loading:c,pagination:n,onTableChange:this.handleTableChange,rowLink:zm.dashboard.management.service.family.view,columns:this.columns,locale:c?{emptyText:" "}:{emptyText:this.getLocaleData({key:1})}}))))),l.a.createElement(_D,{tab:"Services",key:"2"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.service.family.create,buttonName:"Create Service",onSearch:lu(this.onItemSearch,1e3),fetchData:function(a){return e.handleFilterLineItem(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table customer-account-table"},l.a.createElement(fv.a,{scroll:{y:450},loading:c,className:"main-table-all",columns:this.itemsColumns,dataSource:this.state.items.map((function(e){return delete e.children&&e})),pagination:n,onChange:this.handleTableItemChange,size:"middle",rowKey:function(e){return e.id},locale:c?{emptyText:" "}:{emptyText:this.getLocaleData({key:2})},onRow:function(e,a){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.management.service.line_items.view,{id:e.id}))}}}})))))),l.a.createElement(_D,{tab:"Service Variants",key:"3"},l.a.createElement(cb,{setFilterObj:this.setFilterObj,filterApplied:this.state.filterApplied,buttonName:"Create Service",onSearch:lu(this.onPricingSearch,1e3),FILTER_NEW:!0}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},r&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row banner-apply-filter-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"applied-filter"},"\u2713 Filter Applied")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"clear-btn",onClick:function(){return e.setFilterObj(null)}},l.a.createElement("img",{src:Rm.close_small,alt:"",className:"img-fluid"}),"Clear")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0"},(null===s||void 0===s?void 0:s.familyName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Family:")," ",null===s||void 0===s?void 0:s.familyName),this.state.breadcrumb.length>0&&l.a.createElement("li",{className:"list-inline-item tier-filter-data"},l.a.createElement("strong",null,"Tier:"),this.state.breadcrumb.map((function(e){return l.a.createElement("span",null," ".concat(e))}))),(null===s||void 0===s?void 0:s.serviceName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Name:")," ",null===s||void 0===s?void 0:s.serviceName),(null===s||void 0===s?void 0:s.display_name)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Display Name:")," ",null===s||void 0===s?void 0:s.display_name),(null===s||void 0===s?void 0:s.variant)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Variant Name:")," ",null===s||void 0===s?void 0:s.variant),(null===s||void 0===s?void 0:s.regionName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Region:")," ",null===s||void 0===s?void 0:s.regionName),((null===s||void 0===s?void 0:s.daily_high)||(null===s||void 0===s?void 0:s.daily_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Daily Price:")," $",(null===s||void 0===s?void 0:s.daily_low)||"","-$",(null===s||void 0===s?void 0:s.daily_high)||""),((null===s||void 0===s?void 0:s.hourly_high)||(null===s||void 0===s?void 0:s.hourly_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Hourly Price:")," $",(null===s||void 0===s?void 0:s.hourly_low)||"","-$",(null===s||void 0===s?void 0:s.hourly_high)||""),((null===s||void 0===s?void 0:s.unit_high)||(null===s||void 0===s?void 0:s.unit_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Unit Price:")," $",(null===s||void 0===s?void 0:s.unit_low)||"","-$",(null===s||void 0===s?void 0:s.unit_high)||""),(null===s||void 0===s?void 0:s.unitName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Unit:")," ",null===s||void 0===s?void 0:s.unitName))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table"},l.a.createElement(fv.a,{scroll:{y:450,x:1600},loading:c,className:"main-table-all",columns:this.itemsColumnsPricingSummary,dataSource:i,pagination:n,size:"middle",onChange:this.handleTablePriceChange,locale:c?{emptyText:" "}:{emptyText:this.getLocaleData({key:3})},onRow:function(e,a){return{onClick:function(a){var t;o.push(Object(Gm.reverse)(zm.dashboard.management.service.line_items.view,{id:null===e||void 0===e||null===(t=e.line_item)||void 0===t?void 0:t.id}),{pricingId:e.id})}}}}))))))))}}]),t}(n.Component),xD=Object(Lm.b)(null,{setBreadcrumb:Uv})(SD),CD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mt-4 mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12 col-md-6"},l.a.createElement("div",{onClick:function(){return o.push(zm.dashboard.accounting.invoicing.self)},className:"shade-card-main-div row mx-0 cursor-pointer"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"shade-img-section float-left d-flex align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.Cash,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"card-content-section float-left position-relative"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-0"},"Invoicing"),l.a.createElement("h6",{className:"mb-0"},"Short description of this section"))))))))))))}}]),t}(n.Component),OD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={proposals:[],pagination:{search:"",current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},date:{start:"",end:"",start_modified:"",end_modified:""},loading:!0},e.columns=[{title:"Proposal Id",dataIndex:"id",sorter:!0,key:"id"},{title:"Proposal name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.name||"-"),zd(e)&&l.a.createElement("p",{className:"red-text-disposal"},"Please complete all required information to view and send the proposal PDF."))}},{title:"Primary Team Member",dataIndex:"point_proposal",render:function(e){return l.a.createElement("div",null,e||"-")},sorter:!0,key:"point_proposal"},{title:"Associated opportunity",dataIndex:"opportunity",render:function(e){return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.name)||"-")},sorter:!0,key:"opportunity"},{title:"Associated project",dataIndex:"project",render:function(e){return e.length>0?Object.keys(e).map((function(a,t){return l.a.createElement("span",{key:t},e[a].name)})):"-"}},{title:"Billing Account",dataIndex:"customer_contact",sorter:!0,render:function(e){return e.length>0?Object.keys(e).map((function(a,t){return l.a.createElement("span",{key:t},e[a].account&&e[a].account.name)})):"-"},key:"account"},{title:"Site Manager Account",dataIndex:"owner_contact",render:function(e){var a,t;return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.length)&&(null===(a=e[0])||void 0===a||null===(t=a.account)||void 0===t?void 0:t.name)||"-")},sorter:!0,key:"owner_contact"},{title:"Estimated Total",dataIndex:"estimated_revenue",render:function(e){return l.a.createElement("div",null,e&&"$",e||"-")},sorter:!0,key:"estimated_revenue"},{title:"Status",dataIndex:"status",sorter:!0,key:"status",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},null===e||void 0===e?void 0:e.title)}}],e.fetchProposals=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.date;Uf(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({proposals:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return a.persist(),e.debouncedEvent(a)}},e.onSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchProposals()}))},e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.setState({loading:!0}),e.fetchProposals(c)},e.getLocateData=function(){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.propsal_icon_add,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"no-data-main-tg mb-0"},"No Proposals"))))},e.handleFilterData=function(a){a?e.setState({date:Object(wu.a)(Object(wu.a)({},e.state.date),a)},(function(){e.fetchProposals()})):e.setState({date:null},(function(){e.fetchProposals()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Proposals",url:zm.dashboard.sales.proposal.self}];this.props.setBreadcrumb(e),this.fetchProposals()}},{key:"render",value:function(){var e=this,a=this.state,t=a.proposals,n=a.pagination,c=a.loading;return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(cb,{buttonLink:zm.dashboard.sales.proposal.create,buttonName:"+ Create Proposal",onSearch:this.debounceEvent(this.onSearch,1e3),fetchData:function(a){return e.handleFilterData(a)}}),l.a.createElement("div",{className:"row mx-0 width-160-id opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div proposals-main-table opportunity-db-table"},l.a.createElement(fv.a,{scroll:{y:500,x:1300},loading:c,className:"main-table-all sorter-design-fix",columns:this.columns,dataSource:t,onChange:this.handleTableChange,pagination:n,size:"middle",locale:c?{emptyText:" "}:{emptyText:this.getLocateData()},rowClassName:function(e){if(zd(e))return"is-required"},onRow:function(e){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.sales.proposal.view,{id:e.id}))}}}}))))}}]),t}(n.Component),kD=Object(Lm.b)(null,{setBreadcrumb:Uv})(OD),jD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s=null===(e=this.props.data)||void 0===e?void 0:e.customer_contact_accounts,o=null===(a=this.props.data)||void 0===a?void 0:a.owner_contact_accounts;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 custom-tree-row justify-content-between py-2"},l.a.createElement("div",{className:"common-select-option-row",style:{width:"87%"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},this.props.img&&l.a.createElement("div",{className:this.props.img?"select-option-icon":"",style:Object(wu.a)(Object(wu.a)({},null===(t=this.props)||void 0===t?void 0:t.style),{},{float:"left"})},l.a.createElement("img",{src:this.props.img,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"d-inline-block",style:{width:"calc(100% - 45px)"}},l.a.createElement("h6",{style:{display:"inline-block",width:"95%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},className:"mb-0 custom-select-option-title"},this.props.data.name),l.a.createElement("ul",{className:"list-inline mb-0 person-list-details"},l.a.createElement("li",null,l.a.createElement("img",{src:Rm.person_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("span",null,(null===s||void 0===s?void 0:s.length)?null===(n=s[0])||void 0===n||null===(c=n.account)||void 0===c?void 0:c.name:"-")),l.a.createElement("li",null,l.a.createElement("img",{src:Rm.person_round_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("span",null,(null===o||void 0===o?void 0:o.length)?null===(i=o[0])||void 0===i||null===(r=i.account)||void 0===r?void 0:r.name:"-")))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},this.props.type)))}}]),t}(n.Component),ID=Object(Lm.b)(null,{setBreadcrumb:Uv})(jD),AD=ku.a.Option,DD={labelCol:{span:24},wrapperCol:{span:24}},TD=Pm.a.TextArea,RD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={opportunities:[],fetching:!1,statusTypes:[],visibleRetrieveWarning:!1,retrieve_opp:!1,opportunityVal:null},e.formRef=l.a.createRef(),e.fetchOpportunities=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),wv(a).then((function(a){e.setState({opportunities:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.getProposalStatusOptions=function(){nE().then((function(a){e.setState({statusTypes:a.data.results})})).catch((function(e){td(e)}))},e.handleSubmit=function(a,t){var n,l,c,i,r,s,o=e.state.retrieve_opp;e.setState({buttonLoading:!0}),o&&!e.props.proposal&&(a.retrieve_opportunity=o),a.opportunity=null===(n=a.opportunity)||void 0===n?void 0:n.key,a.status=a.status.value,a.creation_date=a.creation_date?null===(l=a.creation_date)||void 0===l?void 0:l.format("YYYY-MM-DD"):hd()().format("YYYY-MM-DD"),a.project_end_date=null===(c=a.project_end_date)||void 0===c?void 0:c.format("YYYY-MM-DD"),a.project_start_date=null===(i=a.project_start_date)||void 0===i?void 0:i.format("YYYY-MM-DD"),a.response_date=null===(r=a.response_date)||void 0===r?void 0:r.format("YYYY-MM-DD"),a.due_date=null===(s=a.due_date)||void 0===s?void 0:s.format("YYYY-MM-DD"),e.props.proposal?Lf(e.props.proposal.id,a).then((function(a){e.props.setProposal(a.data,2),e.setState({buttonLoading:!1}),t||Mm.b.success("Proposal Updated Successfully")})).catch((function(a){td(a),e.setState({buttonLoading:!1})})):qf(a).then((function(a){e.props.setProposal(a.data,2),e.setState({buttonLoading:!1,retrieve_opp:!1}),Mm.b.success("Proposal Created Successfully")})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e.handleRetrieveOpp=function(){var a=e.props.opportunity;e.setState({retrieve_opp:!0,visibleRetrieveWarning:!1},(function(){var t={project_start_date:(null===a||void 0===a?void 0:a.project_start_date)?hd()(null===a||void 0===a?void 0:a.project_start_date):null,project_end_date:(null===a||void 0===a?void 0:a.project_end_date)?hd()(null===a||void 0===a?void 0:a.project_end_date):null,description:null===a||void 0===a?void 0:a.description,name:null===a||void 0===a?void 0:a.name,estimated_revenue:null===a||void 0===a?void 0:a.estimated_revenue};e.formRef.current.setFieldsValue(Object(wu.a)({},t))}))},e.handleWarningModal=function(a){e.setState({visibleRetrieveWarning:a})},e.handleSelectOpp=function(a){e.setState({opportunityVal:a},(function(){e.props.opportunityDetailAction(null===a||void 0===a?void 0:a.value)}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getProposalStatusOptions()}},{key:"componentDidUpdate",value:function(e,a,t){var n,l,c,i;e.proposal!==this.props.proposal&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.proposal),{},{status:{label:null===(n=this.props.proposal.status)||void 0===n?void 0:n.title,value:null===(l=this.props.proposal.status)||void 0===l?void 0:l.id},opportunity:{key:null===(c=this.props.proposal.opportunity)||void 0===c?void 0:c.id,value:null===(i=this.props.proposal.opportunity)||void 0===i?void 0:i.name},creation_date:this.props.proposal.creation_date?hd()(this.props.proposal.creation_date):hd()(),due_date:this.props.proposal.due_date?hd()(this.props.proposal.due_date):null,response_date:this.props.proposal.response_date?hd()(this.props.proposal.response_date):null,project_start_date:this.props.proposal.project_start_date?hd()(this.props.proposal.project_start_date):null,project_end_date:this.props.proposal.project_end_date?hd()(this.props.proposal.project_end_date):null}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.opportunities,c=a.buttonLoading,i=a.statusTypes,r=a.opportunityVal,s=this.props.proposal;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input Proposal information on all of the required widgets, and then click Complete Creation at the bottom of this form to create this proposal."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},DD,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.props.match.params.id&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"id",label:"Proposal ID",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Proposal ID",disabled:!0}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"opportunity",label:"Associated Opportunity",className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,disabled:null===s||void 0===s?void 0:s.opportunity,showSearch:!0,dropdownClassName:"custom-select-drop-main",placeholder:"Search Opportunities and Projects",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onSelect:function(a){return e.handleSelectOpp(a)},onFocus:function(){return e.fetchOpportunities()},onSearch:this.debounceEvent((function(a){return e.fetchOpportunities({search:a})}),1e3),optionLabelProp:"label"},n.map((function(e){return l.a.createElement(AD,{key:e.id,label:e.name,value:e.id},l.a.createElement(ID,{data:e,type:"opportunity",img:Rm.opportunity_name_header}))})))),window.location.href.includes("create")&&r&&l.a.createElement("span",{className:"retrieve-oppo ".concat(s&&"cursor"),onClick:function(){s||e.handleWarningModal(!0)}},"Retrieve information")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Proposal Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Proposal Name"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"status",label:"Proposal Status *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Status",onFocus:this.getProposalStatusOptions},i.map((function(e,a){return l.a.createElement(AD,{value:e.id,key:e.id},e.title)}))))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"estimated_revenue",label:"Estimated Revenue",rules:[{required:!1,message:""}]},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"creation_date",label:"Proposal Creation Date *",className:"position-relative"},l.a.createElement(Hv.a,{defaultValue:hd()(),format:"MM/DD/YYYY"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"due_date",label:"Due Date",className:"position-relative"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"response_date",label:"Response by Date",className:"position-relative"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"project_start_date",label:"Project Start Date",className:"position-relative"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"project_end_date",label:"Project End Date",className:"position-relative"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Proposal Description",className:"position-relative"},l.a.createElement(TD,{className:"text-area-main text-area-task",placeholder:"Type Here"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:c,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(iv,{heading:"Are you sure you want to retrieve information from this opportunity?",subHeadingUOM:"If you click Continue, information would be retrieved from the selected opportunity. Once you click Save & Continue on this widget, you cannot change the associated opportunity anymore.",uomWarning:!0,retrieveWarning:!0,okAction:this.handleRetrieveOpp,visible:this.state.visibleRetrieveWarning,onClose:function(){return e.handleWarningModal(!1)}}))}}]),t}(n.Component),MD=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{opportunityDetailAction:hf})(Object(r.withRouter)(RD)),FD={labelCol:{span:24},wrapperCol:{span:24}},PD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,proposal:{},contactAccount:null,showContactModel:!1,contactModalItem:null,contacts:[],removeVisible:!1,contactDrwrVisible:!1,deletableAccountId:null,createAccountType:null},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({customer_accounts:null}),$f({proposal:e.props.proposal.id,account:a.value,contact_id:[]}).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.handleDeleteContactAccount=function(){Jf(e.state.deletableAccountId).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.handleContactSelect=function(a){var t=e.state.contactModalItem,n=e.props.proposal.customer_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.contact.id})),i={contact_id:[].concat(Object(Ou.a)(c),[a]),contact:[]};Qf(t.id,i).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.showRemoveContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrwrVisible:a,selectedItem:t,deletableContactId:n})},e.handleDeleteContact=function(){var a=e.props.proposal.customer_contact,t=a.findIndex((function(a){return a.id===e.state.selectedItem.id})),n={contact:[],contact_id:a[t].contact.filter((function(a){return a.id!==e.state.deletableContactId})).map((function(e){return e.contact.id}))};Qf(e.state.selectedItem.id,n).then((function(a){e.props.fetchProposal(e.props.proposal.id)}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.onAccountsSearch=function(a){e.getAllAccounts({search:a})},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Du(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllContacts=function(a){var t,n=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({},a),{},{account:null===n||void 0===n||null===(t=n.account)||void 0===t?void 0:t.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.handleSubmit=function(){Mm.b.success("Billing Account Updated Successfully!"),e.props.setProposal(e.props.proposal,4)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.handleDefaultRecipient=function(e,a){lE(e,{default_contact_id:a}).then().catch((function(e){td(e)}))},e.callbackCustomerAccount=function(a){$f({proposal:e.props.proposal.id,account:a.id,contact:[]}).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.showCustomerAccount=function(){e.setState({customerModalVisible:!1})},e.showContactAccount=function(){e.setState({customerContactVisible:!1})},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.proposal.customer_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.contact.id})),i={contact_id:[].concat(Object(Ou.a)(c),[a.id]),contact:[]};Qf(t.id,i).then((function(a){e.props.fetchProposal(e.props.proposal.id),a.data.contact.map((function(e){var t,n;xh({account:null===(t=a.data)||void 0===t||null===(n=t.account)||void 0===n?void 0:n.id},e.contact.id).then((function(){})).catch((function(e){td(e)}))}))}))},e.showAccountTypeModal=function(a){e.setState({visibleAcTypeModal:a})},e.setAccountTypeOrVisible=function(a,t){e.setState({createAccountType:a,customerModalVisible:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.getAllAccounts(),this.props.fetchProposal())}},{key:"render",value:function(){var e,a,t,n=this,c=this.state,i=c.loading,r=c.accounts,s=(this.props.defaultRecepientId,(null===(e=this.props.proposal)||void 0===e?void 0:e.customer_contact)||[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add Billing Accounts. A proposal will be generated for each Billing Account that you add."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},FD,{className:"main-inner-form"}),l.a.createElement("div",{className:"row",style:{padding:"0px 25px"}},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"customer_accounts",label:"Billing Accounts *",rules:[{required:0==s.length,message:"Please select at least one billing account."}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,removeIcon:"",className:"search-and-select-tag",showSearch:!0,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:this.debounceEvent(this.onAccountsSearch,1e3),notFoundContent:i?l.a.createElement(Wv.a,{size:"small"}):null,disabled:!(null===(a=this.props.location.pathname)||void 0===a?void 0:a.includes("create"))&&0!==s.length,onFocus:function(){return n.getAllAccounts()}},r.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Billing Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{disabled:!(null===(t=this.props.location.pathname)||void 0===t?void 0:t.includes("create"))&&0!==s.length,style:{right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){return n.showAccountTypeModal(!0)}},"+ Create")),s.map((function(e,a){var t,c,i,r;return l.a.createElement("div",{className:"col-12 col-sm-12",key:a},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===e||void 0===e||null===(t=e.account)||void 0===t?void 0:t.name," "),l.a.createElement("h6",{className:"mb-0"},"Billing Account")))),(null===(c=n.props.location.pathname)||void 0===c?void 0:c.includes("create"))&&l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return n.handleContactModel(e,!0)}},"+ Add Contact *")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(vh.a.Group,{className:"w-100",defaultValue:null===(i=e.contact.find((function(e){return!0===e.default_customer_recipient})))||void 0===i||null===(r=i.contact)||void 0===r?void 0:r.id},l.a.createElement("div",{className:"row w-100"},e.contact.map((function(a,t){var c,i,r;return l.a.createElement("div",{className:"col-6 col-sm-6",key:t},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},a.contact.first_name," ",a.contact.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500"}},a.contact.role)),l.a.createElement("p",{className:"mb-0"},a.contact.default_email&&"".concat(null===(c=a.contact.default_email)||void 0===c?void 0:c.email,","),"\xa0",null===(i=a.contact.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.showRemoveContact(!0,e,null===a||void 0===a?void 0:a.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===a||void 0===a||null===(r=a.contact)||void 0===r?void 0:r.id,onChange:function(){var t;return n.handleDefaultRecipient(e.id,null===a||void 0===a||null===(t=a.contact)||void 0===t?void 0:t.id)}},"Proposal Recipient"," ",l.a.createElement("small",{style:{color:"#b4b4b4",fontSize:"8px"}},"This contact will be addressed in the proposal.")))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))))))})),0===s.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Billing Accounts"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add contact",onOk:function(){return n.handleContactModel(null,!1)},onCancel:function(){return n.handleContactModel(null,!1)},destroyOnClose:!0,closable:!0,footer:!1,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},FD,{ref:this.contactRef}),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,placeholder:"Search",filterOption:!1,removeIcon:"",onChange:this.handleContactSelect,notFoundContent:i?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onFocus:function(){return n.getAllContacts()},onSearch:lu((function(e){return n.getAllContacts({search:e})}),300)},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){n.setState({customerContactVisible:!0},(function(){return n.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(iv,{common:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account? ",subHeadingUOM:"If you choose to remove this Billing Account, this might cause issues.",visible:this.state.removeVisible,commonFunc:function(){n.setState({deletableAccountId:null,removeVisible:!1}),n.handleDeleteContactAccount()},onClose:function(){n.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){n.setState({selectedItem:null,deletableContactId:null,contactDrwrVisible:!1}),n.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrwrVisible,onClose:function(){return n.showRemoveContact(!1)}}),l.a.createElement(Up,{PARTIAL_BILLING:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.visibleAcTypeModal,onClose:function(){return n.showAccountTypeModal(!1)}}),l.a.createElement(kp,{createAccountType:this.state.createAccountType,callbackCustomerAccount:this.callbackCustomerAccount,selectedContactAccounts:s,visible:this.state.customerModalVisible,onClose:function(){return n.showCustomerAccount(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.customerContactVisible,selectedContactAccounts:s,onClose:function(){return n.showContactAccount(!1)}}))}}]),t}(n.Component),VD=Object(r.withRouter)(PD),qD=t(64),LD=t(102),UD=t.n(LD),BD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,centered:!0,className:"confirmation-popup-modal warning-modal",footer:l.a.createElement("div",null,l.a.createElement(Vm.a,{className:"ant-btn ant-btn-primary w-100",onClick:this.props.onClose},this.props.footerText||"Close"))},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row service-modal"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.service_warning,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),l.a.createElement("p",null,this.props.subHeading)))))}}]),t}(n.Component),WD=Object(r.withRouter)(BD),YD=(t(799),ku.a.Option),KD=ku.a.OptGroup,GD=fu.a.Panel,zD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={rows:[],groups:[],loading:!0,qty:1,warningVisible:!1,pricingUom:[],serviceModalVisible:!1,priceVal:""},e.handleChangeTime=function(a,t){if("delete_row"===a){var n=Object(Ou.a)(e.state.rows).filter((function(e){return e.id!==t.id}));e.setState({rows:n})}else{var l=Object(Ou.a)(e.state.rows).map((function(e){return e.id===t.id&&"labor_child"===t.item_type?Object(wu.a)(Object(wu.a)({},e),{},{time:a}):Object(wu.a)({},e)}));e.setState({rows:l})}},e.handleHoursChange=function(a,t){var n=Object(Ou.a)(e.state.rows).map((function(e){return e.id===t.id?Object(wu.a)(Object(wu.a)({},e),{},{hours:a||1}):e.kit_child&&e.kit_id=="kit".concat(t.id+t.kitIndex)?(console.log(a,e.initQuantity,a*e.initQuantity,"---"),Object(wu.a)(Object(wu.a)({},e),{},{quantity:a*e.initQuantity})):Object(wu.a)({},e)}));e.setState({rows:n})},e.handleChange=function(a,t){var n=Object(Ou.a)(e.state.rows).map((function(n){if(n.id===t.id&&"labor_child"===t.item_type){var l=e.state.groups.find((function(e){return e.id===a}));return Object(wu.a)(Object(wu.a)({},n),{},{type_id:a,data:l})}return Object(wu.a)({},n)}));e.setState({rows:n})},e.handlePricingUom=function(){var a=[],t=e.props.newPricing.variant_data;if((null===t||void 0===t?void 0:t.daily_price)||(null===t||void 0===t?void 0:t.hourly_price)||(null===t||void 0===t?void 0:t.pricing_uom)){if(null===t||void 0===t?void 0:t.daily_price){a.push({label:"Day (d)",value:"DAY"})}if(null===t||void 0===t?void 0:t.hourly_price){a.push({label:"Hours (hrs)",value:"HOURS"})}if((null===t||void 0===t?void 0:t.pricing_uom)&&(null===t||void 0===t?void 0:t.price)){var n,l,c={label:null===(n=t.pricing_uom)||void 0===n?void 0:n.name,value:"UOM",symbol:"(".concat(null===t||void 0===t||null===(l=t.pricing_uom)||void 0===l?void 0:l.symbol,")")};a.push(c)}}else{a.push({label:"Day (d)",value:"DAY"})}e.setState({pricingUom:a})},e.handleData=Object(Qm.a)($m.a.mark((function a(){var t,n,l,c,i,r,s;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=Object(Ou.a)(e.props.child),n=[],!e.props.view&&!e.props.priceChild){l=Object(qD.a)(t);try{for(i=function(){var e=c.value;if("INVENTORY_KIT"==e.item_type?(e.kitIndex=t.findIndex((function(a){return a.id===e.id})),n.push(e)):n.push(e),"LABOR"==e.item_type){var a={item_type:"add",id:"add",name:e.resource_name};n.push(a)}},l.s();!(c=l.n()).done;)i()}catch(o){l.e(o)}finally{l.f()}}r=n.length>0?n:t,s=r.map((function(a,t){switch(a.item_type){case Bd:return e.setState({loading:!0}),LE(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case Wd:return e.setState({loading:!0}),tk(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case"labor_child":return e.setState({loading:!0}),Hp(a.item_id).then((function(t){e.setState({loading:!1}),a.data=t.data})).catch((function(a){e.setState({loading:!1}),td(a),e.setState({loading:!1})})),a;case"INVENTORY_ITEM":return e.setState({loading:!0}),$C(a.item_id?a.item_id:a.id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case"INVENTORY_KIT":return a;case"DISPOSAL":return Og(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;default:return a.data=null,e.setState({loading:!1}),a}})),e.setState({rows:s,loading:!1});case 6:case"end":return a.stop()}}),a)}))),e.handleAddMore=function(a,t){var n=e.state.rows,l={item_type:"labor_child",id:"child"+t,name:a.name};n.splice(t,0,l),e.setState({rows:n})},e.updateTable=function(){return e.state.rows.map((function(e){return delete e.data,delete e.pricing,Object(wu.a)({},e)})).filter((function(e){return"add"!==e.type}))},e.handleChangeDocument=function(a){var t;oE({document_type:a.value},null===(t=e.props.newPricing)||void 0===t?void 0:t.id).then((function(a){e.props.getSelectedServiceVariants()})).catch((function(e){td(e)}))},e.handleFacility=function(a){var t,n,l;oE({facility:null===a||void 0===a||null===(t=a.value)||void 0===t?void 0:t.split("_")[0],facility_type:null===a||void 0===a||null===(n=a.value)||void 0===n?void 0:n.split("_")[1],disposal_unit_id:null,disposal_unit_type:null},null===(l=e.props.newPricing)||void 0===l?void 0:l.id).then((function(a){e.props.getSelectedServiceVariants()})).catch((function(e){td(e)}))},e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0",onClick:function(){var a;return e.props.handleRemoveWarning(!0,null===(a=e.props.newPricing)||void 0===a?void 0:a.id)}},"Remove")),e.handleFleetKit=function(e,a,t){var n,c,i;return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(t?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},a&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:a&&{paddingLeft:"30px"}},(null===e||void 0===e?void 0:e.kit_child)?null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name:e.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},e.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"},(null===e||void 0===e?void 0:e.kit_child)?l.a.createElement("span",{className:"text-capitalize"},(null===e||void 0===e||null===(c=e.kit_uom)||void 0===c?void 0:c.name)||"-"):l.a.createElement("span",{className:"text-capitalize"},(null===e||void 0===e||null===(i=e.uom)||void 0===i?void 0:i.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},e.price_unit?"$".concat(e.price_unit):"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},e.total_price?"$".concat(e.total_price):"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,"-")))},e.renderRow=function(a,t,n){var c,i,r,s,o,m,d,u,p,v,h,f;switch(a.type){case Bd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 custom-table-proposal row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.FLEET_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start px-3"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case Wd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.SUPPLY_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start px-3"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case"INVENTORY_ITEM":return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(c=a.item)||void 0===c?void 0:c.name:a.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"},(null===a||void 0===a?void 0:a.kit_child)?l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(i=a.kit_uom)||void 0===i?void 0:i.name)||"-"):l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(r=a.uom)||void 0===r?void 0:r.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,"-")));case"INVENTORY_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",null,"Unit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),(null===(s=a.children)||void 0===s?void 0:s.length)>0&&(null===(o=a.children)||void 0===o?void 0:o.map((function(t,n){var l=a.children.length>n+1;return e.renderRow(t,!0,l)}))),null===(m=a.data)||void 0===m||null===(d=m.inventory_package_items)||void 0===d?void 0:d.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Amount")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",e.item.unit_cost*e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,e.item.margin||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(e.item.unit_cost*e.quantity,e.item.margin)||0)))})));case"FLEET_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,qd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",null,(null===a||void 0===a?void 0:a.uom)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},a.price_unit?"$".concat(a.price_unit):"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},a.total_price?"$".concat(a.total_price):"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),(null===(u=a.children)||void 0===u?void 0:u.length)>0&&(null===a||void 0===a?void 0:a.children.map((function(t,n){var l,c=(null===(l=a.children)||void 0===l?void 0:l.length)>n+1;return e.handleFleetKit(t,!0,c)}))));case"DISPOSAL":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Disposal")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"VENDOR"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(p=a.facility_id)||void 0===p||null===(v=p.vendor)||void 0===v?void 0:v.name:"WAREHOUSE"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(h=a.facility_id)||void 0===h?void 0:h.internal_location.name:"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex justify-content-center align-items-center"},l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(f=a.uom)||void 0===f?void 0:f.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 d-flex justify-content-start"},l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a?void 0:a.doc_type)?"BILL_OF_LADING"===(null===a||void 0===a?void 0:a.doc_type)?"Bill of Lading":"MANIFEST"===(null===a||void 0===a?void 0:a.doc_type)?"Manifest":"Neither":"-"))));case Ld:return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 gray-2-color"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start"},l.a.createElement("div",{className:"px-3"},"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"})),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))));default:return l.a.createElement(l.a.Fragment,null)}},e.stopEvtBubbling=function(e){e.stopPropagation()},e.handlePriceChange=function(){var a=e.props.newPricing;e.props.handlePriceUnit(!0,a.id)},e.handleInputsBlur=function(a,t){var n=e.props.newPricing,l=a.target.value;""===l||n.edited?""!==l&&e.formatVal(l,!0):("Enter"==a.key||t)&&e.handleValuechanged(a,n)},e.handleEnterChange=function(a){var t=e.props.newPricing,n=a.target.value;""===n||(null===t||void 0===t?void 0:t.edited)||"Enter"!==a.key?""!==n&&"Enter"===a.key&&e.formatVal(n,!0):e.handleValuechanged(a,t)},e.handleValuechanged=function(a,t){var n=a.target.value,l=null===n||void 0===n?void 0:n.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2});e.state.priceUnit!=n&&e.props.handleServiceModal(!0,l,null===t||void 0===t?void 0:t.id)},e.formatVal=function(a,t){var n=e.props.newPricing,l=Number(null===n||void 0===n?void 0:n.price_per_unit).toFixed(2),c=(null===a||void 0===a?void 0:a.toString())||"0",i=null===c||void 0===c?void 0:c.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),r=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});e.setState({priceUnit:r.format(i)},(function(){if(t){var a,c=null===(a=e.state.priceUnit)||void 0===a?void 0:a.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2});if(console.log(c,l),!(null===n||void 0===n?void 0:n.edited)&&c!=l)return void e.props.handlePricePerUnitChange(c,null===n||void 0===n?void 0:n.id);(null===n||void 0===n?void 0:n.edited)&&c!=l&&e.props.handlePricePerUnitChange(c,null===n||void 0===n?void 0:n.id)}}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.newPricing;this.formatVal(e.price_per_unit),this.handleData(),this.setState({qty:e.proposal_qty||1}),this.handlePricingUom()}},{key:"componentDidUpdate",value:function(e,a,t){var n=this.props.newPricing;e.newPricing.price_per_unit!==n.price_per_unit&&this.formatVal(n.price_per_unit),e.margin!==this.props.margin&&this.handleData(),e.newPricing!==this.props.newPricing&&this.handleData()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N=this,y=this.props,w=y.newPricing,_=(y.viewProposalTable,y.view),S=y.allOptions,x=y.foundRegion,C=y.removeThreeDots,O=null===S||void 0===S?void 0:S.find((function(e){var a,t;return e.id===(null===(a=w.variant_data)||void 0===a||null===(t=a.pricing_uom)||void 0===t?void 0:t.id)}));return this.state.loading?l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body p-0"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"custom-table-collapse-main"},l.a.createElement(GD,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td wage-info-collapse-td gray-2-color d-flex align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",src:"INVENTORY_KIT"===(null===w||void 0===w?void 0:w.resource_type)?Rm.inventory_kit_variant:"INVENTORY_ITEM"===(null===w||void 0===w?void 0:w.resource_type)?Rm.inventory_item_variant:"DISPOSAL"===(null===w||void 0===w?void 0:w.resource_type)?Rm.no_disposal_black:"SUPPLY_GROUP"===(null===w||void 0===w?void 0:w.resource_type)?null===Rm||void 0===Rm?void 0:Rm.supply_icon_black:Rm.line_item_black,className:"img-fluid mr-2"}),"INVENTORY_KIT"===(null===w||void 0===w?void 0:w.resource_type)||"INVENTORY_ITEM"===(null===w||void 0===w?void 0:w.resource_type)||"DISPOSAL"===(null===w||void 0===w?void 0:w.resource_type)||"SUPPLY_GROUP"===(null===w||void 0===w?void 0:w.resource_type)?null===w||void 0===w||null===(e=w.resource_id)||void 0===e?void 0:e.name:(null===w||void 0===w||null===(a=w.variant_data)||void 0===a?void 0:a.display_name)?null===w||void 0===w||null===(t=w.variant_data)||void 0===t?void 0:t.display_name:"".concat(null===w||void 0===w||null===(n=w.variant_data)||void 0===n||null===(c=n.line_item)||void 0===c?void 0:c.name," ").concat(x&&"/"," ").concat((null===x||void 0===x?void 0:x.title)||""," - ").concat(null===(i=w.variant_data)||void 0===i?void 0:i.name)),!C&&l.a.createElement(xu.a,{overlay:this.menu,trigger:["click"],onClick:function(e){return e.stopPropagation()}},l.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{alt:"remove-icon",src:Rm.black_dots_elipsis,className:"img-fluid"})))),!_&&("DISPOSAL"===(null===w||void 0===w?void 0:w.resource_type)?l.a.createElement("div",{className:"custom-table-cell-td facility-column background-white-div px-0 blank-red"},l.a.createElement(ku.a,{className:"facility-dropdown",dropdownStyle:{width:"100px"},labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),onChange:function(e){return N.handleFacility(e)},value:(null===w||void 0===w?void 0:w.facility)?{value:null===w||void 0===w?void 0:w.facility,label:null===w||void 0===w?void 0:w.facility}:void 0,placeholder:"Select"},l.a.createElement(KD,{label:"Warehouses"},null===w||void 0===w||null===(r=w.resource_id)||void 0===r||null===(s=r.internal_location)||void 0===s?void 0:s.map((function(e){return l.a.createElement(YD,{value:"".concat(e.id,"_WAREHOUSE")},e.internal_location.name)}))),l.a.createElement(KD,{label:"Vendors"},null===w||void 0===w||null===(o=w.resource_id)||void 0===o||null===(m=o.vendor)||void 0===m?void 0:m.map((function(e){return l.a.createElement(YD,{value:"".concat(e.id,"_VENDOR")},e.vendor.name)}))))):l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"}," -")),l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0",onClick:this.stopEvtBubbling},_?l.a.createElement("span",null,parseInt(null===w||void 0===w?void 0:w.proposal_qty)||"1"):l.a.createElement(ap.a,{value:(null===w||void 0===w?void 0:w.proposal_qty)||1,onBlur:function(e){N.props.handleQuantitySelectChange(e.target.value,null===w||void 0===w?void 0:w.id)}})),l.a.createElement("div",{className:"custom-table-cell-td p-0 gray-2-color d-flex justify-content-center",onClick:this.stopEvtBubbling},(null===w||void 0===w?void 0:w.manually_added)?"INVENTORY_ITEM"===(null===w||void 0===w?void 0:w.type)?l.a.createElement("span",null,null===(d=w.uom)||void 0===d?void 0:d.name," (",null===(u=w.uom)||void 0===u?void 0:u.symbol,")"):l.a.createElement("span",null,null===(p=w.unit)||void 0===p?void 0:p.name," (",null===(v=w.unit)||void 0===v?void 0:v.symbol,")"):_?l.a.createElement("span",null,"UOM"==w.selected_unit?"".concat(null===O||void 0===O?void 0:O.name," (").concat(null===O||void 0===O?void 0:O.symbol,")"):"HOURS"==w.selected_unit?"Hours (hrs)":"Day (d)"):l.a.createElement(l.a.Fragment,null,"DISPOSAL"==w.resource_type?((null===w||void 0===w?void 0:w.disposal_uom)||(null===w||void 0===w?void 0:w.disposal_com))&&l.a.createElement(ku.a,{dropdownClassName:"border-green",className:"edit-select-box bg-white edit-box-custom w-100",suffixIcon:l.a.createElement(wO.a,null),onChange:function(e){return N.props.handleUnitSelectChange(e,null===w||void 0===w?void 0:w.id,null===w||void 0===w?void 0:w.resource_type)},placeholder:"select",value:(null===w||void 0===w?void 0:w.disposal_unit_id)||void 0},l.a.createElement(KD,{label:"UOM"},null===w||void 0===w||null===(h=w.disposal_uom)||void 0===h?void 0:h.map((function(e){return l.a.createElement(YD,{value:"".concat(e.id,"_UOM")},null===e||void 0===e?void 0:e.name)}))),l.a.createElement(KD,{label:"COM"},null===w||void 0===w||null===(f=w.disposal_com)||void 0===f?void 0:f.map((function(e){return l.a.createElement(YD,{value:"".concat(e.id,"_COM")},null===e||void 0===e?void 0:e.name)})))):(null===(E=this.state.pricingUom)||void 0===E?void 0:E.length)<=1?null===(g=this.state.pricingUom)||void 0===g?void 0:g.map((function(e){return l.a.createElement("span",{value:e.value},e.label,null===e||void 0===e?void 0:e.symbol)})):l.a.createElement(ku.a,{dropdownClassName:"border-green",className:"edit-select-box bg-white edit-box-custom w-100",suffixIcon:l.a.createElement(wO.a,null),onChange:function(e){return N.props.handleUnitSelectChange(e,null===w||void 0===w?void 0:w.id)},placeholder:"select",value:w.selected_unit||void 0},null===(b=this.state.pricingUom)||void 0===b?void 0:b.map((function(e){return l.a.createElement(YD,{value:e.value},e.label,null===e||void 0===e?void 0:e.symbol)}))))),l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0 ".concat(this.props.view?"background-f2":""),onClick:function(e){N.stopEvtBubbling(e)}},l.a.createElement("span",{className:"d-inline-block w-100"},l.a.createElement(ap.a,{disabled:_,value:this.state.priceUnit||0,onBlur:function(e){return N.handleInputsBlur(e,!0)},onKeyDown:this.handleEnterChange}))),l.a.createElement("div",{className:this.props.view?"custom-table-cell-td background-white-div p-0 text-center d-flex justify-content-center":"custom-table-cell-td background-white-div p-0 checkbox-new text-center d-flex justify-content-center",onClick:this.stopEvtBubbling},l.a.createElement(UD.a,{defaultChecked:!1,checked:null===w||void 0===w?void 0:w.taxable,disabled:_,onChange:function(e){return N.props.handleCheckBox(e.target.checked,null===w||void 0===w?void 0:w.id,"TAX")}})),l.a.createElement("div",{className:this.props.view?"custom-table-cell-td background-white-div p-0 text-center d-flex justify-content-center":"custom-table-cell-td background-white-div p-0 checkbox-new text-center d-flex justify-content-center",onClick:this.stopEvtBubbling},l.a.createElement(UD.a,{checked:null===w||void 0===w?void 0:w.include_subtotal,defaultChecked:!0,disabled:_,onChange:function(e){return N.props.handleCheckBox(e.target.checked,null===w||void 0===w?void 0:w.id,"INCLUDE_SUBTOTAL")}})),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3",onClick:this.stopEvtBubbling},l.a.createElement("div",{className:"d-inline-block w-100"},"$ ",gd(null===w||void 0===w?void 0:w.total_price))),_||"DISPOSAL"!==(null===w||void 0===w?void 0:w.resource_type)?l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"},(null===w||void 0===w?void 0:w.document_type)?"BILL_OF_LADING"===w.document_type?"Bill of Lading":"NEITHER"===w.document_type?"Neither":"Manifest":"-"):l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center blank-red",onClick:this.stopEvtBubbling},l.a.createElement(ku.a,{labelInValue:!0,className:"img-fluid editable-form-image",suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:""}),disabled:_,onChange:function(e){return N.handleChangeDocument(e)},value:w.document_type?{value:w.document_type,label:"".concat("BILL_OF_LADING"===w.document_type?"Bill of Lading":"NEITHER"===w.document_type?"Neither":"Manifest")}:null,placeholder:"Select"},l.a.createElement(YD,{value:"MANIFEST"},"Manifest"),l.a.createElement(YD,{value:"BILL_OF_LADING"},"Bill of Lading"),l.a.createElement(YD,{value:"NEITHER"},"Neither")))))),key:"1"},this.state.rows.map((function(e,a){var t={};if(e.kit){var n,l=N.state.rows.length>a+1;return t={id:e.id,item:e.item,qty:e.quantity,kit_uom:null===(n=e.kit)||void 0===n?void 0:n.unit,type:"INVENTORY_ITEM",kit_child:!0},N.renderRow(t,!0,l)}return N.renderRow(e)}))))))}}]),t}(n.Component),HD=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).ulRef=l.a.createRef(),e.handleListChange=function(a){var t,n=document.getElementById(e.props.id);0===(null===n||void 0===n||null===(t=n.childNodes)||void 0===t?void 0:t.length)&&(n.innerHTML="<li></li>")},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){if(this.props.value)if(0===this.props.value.length)this.ulRef.current.innerHTML="<li></li>";else{var e=this.ulRef.current,a="";this.props.value.forEach((function(e){a=a+"<li>"+e+"</li>"})),e.innerHTML=a}}},{key:"componentDidUpdate",value:function(e,a,t){if(this.props.value||(this.ulRef.current.innerHTML="<li></li>"),this.props.value)if(0===this.props.value.length)this.ulRef.current.innerHTML="<li></li>";else{var n=this.ulRef.current,l="";this.props.value.forEach((function(e){l=l+"<li>"+e+"</li>"})),n.innerHTML=l}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"editable-list"},l.a.createElement("ul",{id:this.props.id,ref:this.ulRef,onInput:this.handleListChange,contentEditable:"true"},l.a.createElement("li",null))))}}]),t}(n.Component),$D=[{name:"Standard",value:"STANDARD"},{name:"Lump Sum",value:"LUMP_SUM"},{name:"Lump Sum with UOM and QTY",value:"LUMP_SUM_WITH_UOM_AND_QTY"},{name:"Price Rate Only",value:"PRICE_RATE_ONLY"},{name:"Total Price Per Unit",value:"TOTAL_PRICE_PER_UNIT"}],QD=[{name:"Due on Receipt",value:"DUE_ON_RECEIPT"},{name:"30 days",value:"30_DAYS"},{name:"45 days",value:"45_DAYS"},{name:"60 days",value:"60_DAYS"},{name:"90 days",value:"90_DAYS"},{name:"Pay when paid",value:"PAY_WHEN_PAID"}],JD=(t(951),ku.a.Option),ZD={labelCol:{span:24},wrapperCol:{span:24}},XD=(Pm.a.Search,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={showResourceModel:!1,lineItems:[],otherItems:[],fetching:!1,value:1,pricing:[],data:[],selectedType:null,searchValue:null,loading:!0,newPricing:[],kit_items:[],allOptions:[],costSetting:null,pricePreTax:0,selectedUom:null,id:null,units:1,taxBasisOptions:[],warningVisible:!1,removableId:null,modalVisible:!1,totalCount:0,page:1,search:"",filterObj:null,autoOpen:!1,filterApplied:!1,serviceModalVisible:!1,unitModalVisible:!1,breadcrumb:[],disposal:[],supply:[]},e.formRef=l.a.createRef(),e.fetchLineItems=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.page,l=t.search,c=t.filterObj;e.setState({fetching:!0}),yg(Object(wu.a)(Object(wu.a)(Object(wu.a)({},a),c),{},{page:n,search:l})).then((function(t){a.isSearched?e.setState({lineItems:t.data.results,fetching:!1,totalCount:t.data.count}):e.setState((function(e){return{lineItems:[].concat(Object(Ou.a)(e.lineItems),Object(Ou.a)(t.data.results)),fetching:!1,totalCount:t.data.count}}))})).catch((function(a){e.setState({fetching:!1}),td(a)}))},e.fetchPricing=function(a){Eg({item:a}).then((function(a){e.setState({pricing:[].concat(Object(Ou.a)(e.state.pricing),Object(Ou.a)(a.data.results))})})).catch((function(e){td(e)}))},e.getTaxBasisOptions=function(){mE({search:e.state.searchValue,page:e.state.page}).then((function(a){1===e.state.page?e.setState({taxBasisOptions:a.data.results}):e.setState((function(e){return{taxBasisOptions:[].concat(Object(Ou.a)(e.taxBasisOptions),Object(Ou.a)(a.data.results)),totalCount:a.data.count}}))})).catch((function(e){td(e)}))},e.handleSelect=function(a){var t;if(null===(t=e.state.newPricing)||void 0===t?void 0:t.find((function(e){return e.id==a})))Mm.b.error("You can not add same item again");else{var n=e.props.proposal;rE({variant:a,proposal:null===n||void 0===n?void 0:n.id}).then((function(){e.setState({search:"",page:1},(function(){e.formRef.current.setFieldsValue({line_item:null}),e.fetchLineItems({isSearched:!0}),e.getSelectedServiceVariants(!0)}))})).catch((function(e){td(e)}))}},e.getSelectedServiceVariants=function(a){var t,n,l=e.props,c=l.proposal,i=l.fetchProposal,r=(null===(t=e.props.match.params)||void 0===t?void 0:t.id)?null===(n=e.props.match.params)||void 0===n?void 0:n.id:null===c||void 0===c?void 0:c.id;sE({proposal:r}).then((function(t){e.setState({newPricing:t.data},(function(){a&&i(r)}))})).catch((function(e){td(e)}))},e.handleSubmit=function(a,t){var n,l=[],c=[],i=document.getElementById("qualifiers"),r=document.getElementById("comments");(i.childNodes.length>0&&i.childNodes.forEach((function(e){l.push(e.innerHTML)})),r.childNodes.length>0&&r.childNodes.forEach((function(e){c.push(e.innerHTML)})),t)||(a.qualifiers=null===l||void 0===l?void 0:l.join("^"),a.comments=null===c||void 0===c?void 0:c.join("^"),a.tax_basis=null===(n=a.tax_basis)||void 0===n?void 0:n.value,a.proposal_uom=e.state.proposalUom,a.total_units=e.state.units,a.estimated_total_price_pre_tax=e.state.pricePreTax||0);Lf(e.props.proposal.id,a).then((function(a){e.props.setProposal(a.data,6),t||Mm.b.success("Proposal Updated ")})).catch((function(e){td(e)}))},e.handleResourceModel=function(a,t){e.setState({resourceModelItem:a,showResourceModel:t})},e.handleChange=function(a){e.setState({proposalUom:a})},e.handleUnitSelectChange=function(a,t,n){var l;(e.state.newPricing.find((function(e){return e.id===t})).edited||e.setState({unitModalVisible:!0}),n)?"DISPOSAL"===n&&(l={disposal_unit_id:null===a||void 0===a?void 0:a.split("_")[0],disposal_unit_type:null===a||void 0===a?void 0:a.split("_")[1]}):l={selected_unit:a};e.handleUpdateVariantRow(l,t)},e.handleQuantitySelectChange=function(a,t){var n={proposal_qty:a};e.handleUpdateVariantRow(n,t)},e.handlePricePerUnitChange=Object(lp.debounce)((function(a,t){var n={price_per_unit:a,edited:!0};e.handleUpdateVariantRow(n,t)})),e.handlePriceOnChange=function(){e.handlePricePerUnitChange(e.state.value,e.state.priceValue)},e.handleUpdateVariantRow=function(a,t){oE(a,t).then((function(){var a;e.getSelectedServiceVariants(),e.props.fetchProposal(null===(a=e.props.proposal)||void 0===a?void 0:a.id)})).catch((function(e){td(e)}))},e.handleCheckBox=function(a,t,n){var l={};"TAX"===n?(e.setState({taxVisible:a,modalVisible:!0,taxCheckBox:!0}),l.taxable=a):(e.setState({subtotalVisible:a,modalVisible:!0,taxCheckBox:!1}),l.include_subtotal=a),e.handleUpdateVariantRow(l,t)},e.closeViewModal=function(){e.setState({modalVisible:!1})},e.renderRow=function(a){var t,n,c,i,r,s,o,m,d,u,p,v,h,f;switch(a.type){case Fd.name:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Fd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{value:a.hours||0,disabled:!0,onChange:function(t){return e.handleHoursChange(t,a)},placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",Ad(a.data))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(Ad(a.data),0))));case Pd.name:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Sub-tier")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"text-capitalize"},null===(t=a.data)||void 0===t||null===(n=t.unit)||void 0===n?void 0:n.toLowerCase())),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement("span",{className:"px-3 w-100 d-inline-block"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",(null===(c=a.data)||void 0===c?void 0:c.unit_cost)||0)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,(null===(i=a.data)||void 0===i?void 0:i.margin)||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(null===(r=a.data)||void 0===r?void 0:r.unit_cost,null===(s=a.data)||void 0===s?void 0:s.margin))));case Vd.name:return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Amount")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement("span",{className:"px-3 d-inline-block w-100"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,null===(o=a.data)||void 0===o||null===(m=o.inventory_package_items)||void 0===m?void 0:m.reduce((function(e,a){return e+a.item.unit_cost*a.quantity}),0))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,null===(d=a.data)||void 0===d||null===(u=d.inventory_package_items)||void 0===u?void 0:u.reduce((function(e,a){var t;return e+parseFloat((null===(t=a.item)||void 0===t?void 0:t.margin)||0)}),0).toFixed(2),"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",null===(p=a.data)||void 0===p||null===(v=p.inventory_package_items)||void 0===v?void 0:v.reduce((function(e,a){return e+parseFloat(Rd(a.item.unit_cost*a.quantity,a.item.margin))}),0).toFixed(2)))),null===(h=a.data)||void 0===h||null===(f=h.inventory_package_items)||void 0===f?void 0:f.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Amount")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},"-",l.a.createElement("span",{className:"px-3 w-100 d-inline-block"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",e.item.unit_cost*e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,e.item.margin||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(e.item.unit_cost*e.quantity,e.item.margin))))})));default:return l.a.createElement(l.a.Fragment,null)}},e.fetchAllInventories=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.tier_type="INVENTORY_ITEM",iO(a).then((function(a){e.setState({inventoryItem:a.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e})),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllInventoryKits=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),QC(a).then((function(a){e.setState({kits:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchDisposal=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.tier_type="DISPOSAL",Cg(a).then((function(a){e.setState({disposal:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchSupply=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.tier_type="SUPPLY_GROUP",lk(a).then((function(a){e.setState({supply:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchDisposalItem=function(a){var t;Object(Ou.a)(e.state.newPricing).find((function(e){return e.id==a}))?Mm.b.error("you can not add same item again"):rE({resource_id:a,resource_type:"DISPOSAL",proposal:null===(t=e.props.proposal)||void 0===t?void 0:t.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.fetchSupplyItem=function(a){var t;Object(Ou.a)(e.state.newPricing).find((function(e){return e.id==a}))?Mm.b.error("you can not add same item again"):rE({resource_id:a,resource_type:"SUPPLY_GROUP",proposal:null===(t=e.props.proposal)||void 0===t?void 0:t.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.fetchKitItems=function(a){var t;Object(Ou.a)(e.state.newPricing).find((function(e){return e.id==a}))?Mm.b.error("you can not add same item again"):rE({resource_id:a,resource_type:"INVENTORY_KIT",proposal:null===(t=e.props.proposal)||void 0===t?void 0:t.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.fetchInventoryItem=function(a){var t;Object(Ou.a)(e.state.newPricing).find((function(e){return e.id==a}))?Mm.b.error("you can not add same item again"):rE({resource_id:a,resource_type:"INVENTORY_ITEM",proposal:null===(t=e.props.proposal)||void 0===t?void 0:t.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.getUnitName=function(){e.setState({fetching:!0}),Rg().then((function(a){e.setState({allOptions:a.data})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.addDefaultCheckedKey=function(a){var t=a.map((function(e){return Object(wu.a)(Object(wu.a)({},e),{},{include_subtotal:e.include_subtotal||!0})}));e.setState({newPricing:t})},e.getTotalCost=function(a){var t=e.state,n=(t.costSetting,t.newPricing),l=0;return n.forEach((function(e){if(null===e||void 0===e?void 0:e.manually_added){var t=(parseInt(e.proposal_qty)||1)*parseFloat(e.kit_pricing_value||e.item_pricing_value||0);l+=a?(null===e||void 0===e?void 0:e.include_subtotal)?t:0:(null===e||void 0===e?void 0:e.include_subtotal)&&(null===e||void 0===e?void 0:e.taxable)?t:0}else{var n="c"==e.selectedUnit?e.hourly_price:"a"==e.selectedUnit?e.price:e.daily_price,c=(parseInt(e.proposal_qty)||1)*parseFloat(n||0);l+=a?(null===e||void 0===e?void 0:e.include_subtotal)?c:0:(null===e||void 0===e?void 0:e.include_subtotal)&&(null===e||void 0===e?void 0:e.taxable)?c:0}})),l},e.getResourcePricingCost=function(){var a=Object(Ou.a)(e.state.newPricing),t=0;return a.forEach((function(e){var a=parseInt(e.proposal_qty)||1;if(e.table_data){var n,l=0,c=0,i=Object(qD.a)(e.table_data.entries());try{for(i.s();!(n=i.n()).done;){var r=Object(yp.a)(n.value,2),s=r[0],o=r[1];if("FLEET_GROUP"==o.item_type)t+=Id(o.data)*a;else if("labor_child"==o.item_type){var m=o.hours||1;l+=parseInt(o.hours)||1,c+=Td(o.data,o.time,o.name)*m||0,"labor_child"!=e.table_data[s+1].item_type&&(t+=c/l)}else if("SUPPLY_GROUP"==o.item_type)t+=Ad(o.data)*a||0;else if("INVENTORY_ITEM"==o.item_type){var d;t+=((null===o||void 0===o?void 0:o.kit_child)?parseInt(o.unit_cost):parseInt(null===(d=o.data)||void 0===d?void 0:d.unit_cost))*a||0}else if("DISPOSAL"==o.item_type){var u;t+=parseInt(null===(u=o.data)||void 0===u?void 0:u.unit_cost)*a||0}}}catch(p){i.e(p)}finally{i.f()}}else t+=parseInt(e.unit_cost)*a})),t},e.calculatedEstimatedTotal=function(){var a=e.state,t=a.pricePreTax,n=a.costSetting,l=e.calculatedEstimatedTaxes();return("LUMP_SUM"!==n&&"LUMP_SUM_WITH_UOM_AND_QTY"!==n?Number(l)+Number(e.getTotalCost(!0)):Number(l)+Number(t)).toFixed(2)},e.calculatedEstimatedTaxes=function(){var a=e.state,t=a.pricePreTax,n=a.costSetting;return("LUMP_SUM"!==n&&"LUMP_SUM_WITH_UOM_AND_QTY"!==n?8.875*e.getTotalCost()/100:8.875*t/100).toFixed(2)},e.calculatedProfitMargin=function(){var a=e.getTotalCost(!0),t=e.getResourcePricingCost();return((a-t)/t*100).toFixed()},e.handleCostSettingChange=function(a){e.setState({warningVisible:!0,costSettingSelected:a})},e.handleTaxBasisChange=function(a){var t=a.value;e.handleSubmit({tax_basis:t},!0)},e.handleDepositChange=function(a){e.handleSubmit({deposit:a},!0)},e.showWarning=function(a){e.setState({warningVisible:a})},e.deleteServiceVariant=function(){dE(e.state.removableId).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.handleRemoveWarning=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeWarningVisible:a,removableId:t})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.onSearchServiceVariant=function(a){e.setState({search:a,page:1},(function(){e.fetchLineItems({isSearched:!0})}))},e.handleServiceModal=function(a,t,n){e.setState({serviceModalVisible:a,value:t,priceValue:n})},e.handleUnitModal=function(a){e.setState({unitModalVisible:!1})},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchLineItems()}))},e.handleFilterDrawer=function(a){e.setState({visibleFilter:a})},e.setFilterObj=function(a,t){var n=!0;n=!(!a||!(a.daily_high||a.daily_low||a.family||a.hourly_high||a.hourly_low||a.region||a.service||a.unit||a.tier||a.unit_high||a.unit_low||a.variant)),e.setState({filterObj:a,breadcrumb:t,page:1,autoOpen:!0,filterApplied:n},(function(){e.fetchLineItems({isSearched:!0})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Qm.a)($m.a.mark((function e(){var a,t,n,l,c;return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.props.proposal,e.next=3,this.formRef.current.setFieldsValue({qualifiers:(null===c||void 0===c?void 0:c.qualifiers)?c.qualifiers.split("^"):null,comments:(null===c||void 0===c?void 0:c.comments)?c.comments.split("^"):null,cost_setting:(null===c||void 0===c?void 0:c.cost_setting)||"STANDARD",payment_terms:(null===c||void 0===c?void 0:c.payment_terms)||"30_DAYS",deposit:(null===c||void 0===c?void 0:c.deposit)||void 0,tax_basis:(null===c||void 0===c?void 0:c.tax_basis)?{label:null===c||void 0===c||null===(a=c.tax_basis)||void 0===a?void 0:a.name,value:null===c||void 0===c||null===(t=c.tax_basis)||void 0===t?void 0:t.id,key:null===c||void 0===c||null===(n=c.tax_basis)||void 0===n?void 0:n.id}:void 0});case 3:this.setState({loading:!1,costSetting:null===c||void 0===c?void 0:c.cost_setting,units:null===c||void 0===c?void 0:c.total_units,proposalUom:null===c||void 0===c||null===(l=c.proposal_uom)||void 0===l?void 0:l.id,pricePreTax:(null===c||void 0===c?void 0:c.estimated_total_price_pre_tax)?c.estimated_total_price_pre_tax:null===c||void 0===c?void 0:c.estimated_total_price_pre}),this.getSelectedServiceVariants(),this.getUnitName(),this.getTaxBasisOptions();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c=this.props.proposal;e.proposal!=c&&this.formRef.current.setFieldsValue({qualifiers:(null===c||void 0===c?void 0:c.qualifiers)?c.qualifiers.split("^"):null,comments:(null===c||void 0===c?void 0:c.comments)?c.comments.split("^"):null,cost_setting:(null===c||void 0===c?void 0:c.cost_setting)||"STANDARD",payment_terms:(null===c||void 0===c?void 0:c.payment_terms)||"30_DAYS",deposit:(null===c||void 0===c?void 0:c.deposit)||void 0,tax_basis:(null===c||void 0===c?void 0:c.tax_basis)?{label:null===c||void 0===c||null===(t=c.tax_basis)||void 0===t?void 0:t.name,value:null===c||void 0===c||null===(n=c.tax_basis)||void 0===n?void 0:n.id,key:null===c||void 0===c||null===(l=c.tax_basis)||void 0===l?void 0:l.id}:void 0})}},{key:"render",value:function(){var e,a,t,n,c,i,r,s=this,o=this.state,m=o.fetching,d=(o.pricing,o.selectedType,o.data,o.costSetting),u=o.allOptions,p=o.proposalUom,v=o.taxBasisOptions,h=o.totalCount,f=o.lineItems,E=o.filterApplied,g=o.filterObj,b=u.find((function(e){return e.id===p})),N=this.props,y=N.proposal,w=(N.regions,l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return s.handleResourceModel("Inventory Item",!0)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.inventory_sub_tier_icon}),"Inventory Item")),l.a.createElement(_u.a.Item,{key:"2"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return s.handleResourceModel("Inventory Kit",!0)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.inventory_kit_sub_tier_icon}),"Inventory Kit")),l.a.createElement(_u.a.Item,{key:"3"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return s.handleResourceModel("Disposal",!0)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.disposal}),"Disposal")),l.a.createElement(_u.a.Item,{key:"4"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return s.handleResourceModel("Supply",!0)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.supply_group_icon_new}),"Supply"))));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row common-form-card-row-line-items mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},ZD,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row line-items-inner-row-pd"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add Service Variants to this Proposal by searching and selecting through the searchbar. After adding a Service Variant, you can also add resources on the fly by clicking Add Resources (which will show up once you have added a Service Variant)."))),E&&l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row banner-apply-filter-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"applied-filter"},"\u2713 Filter Applied")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"clear-btn",onClick:function(){return s.setFilterObj(null)}},l.a.createElement("img",{src:Rm.close_small,alt:"",className:"img-fluid"}),"Clear")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0"},(null===g||void 0===g?void 0:g.familyName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Family:")," ",null===g||void 0===g?void 0:g.familyName),this.state.breadcrumb.length>0&&l.a.createElement("li",{className:"list-inline-item tier-filter-data"},l.a.createElement("strong",null,"Tier:"),this.state.breadcrumb.map((function(e){return l.a.createElement("span",null," ".concat(e))}))),(null===g||void 0===g?void 0:g.serviceName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Name:")," ",null===g||void 0===g?void 0:g.serviceName),(null===g||void 0===g?void 0:g.display_name)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Display Name:")," ",null===g||void 0===g?void 0:g.display_name),(null===g||void 0===g?void 0:g.variant)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Variant Name:")," ",null===g||void 0===g?void 0:g.variant),(null===g||void 0===g?void 0:g.regionName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Region:")," ",null===g||void 0===g?void 0:g.regionName),((null===g||void 0===g?void 0:g.daily_high)||(null===g||void 0===g?void 0:g.daily_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Daily Price:")," $",(null===g||void 0===g?void 0:g.daily_low)||"","-$",(null===g||void 0===g?void 0:g.daily_high)||""),((null===g||void 0===g?void 0:g.hourly_high)||(null===g||void 0===g?void 0:g.hourly_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Hourly Price:")," $",(null===g||void 0===g?void 0:g.hourly_low)||"","-$",(null===g||void 0===g?void 0:g.hourly_high)||""),((null===g||void 0===g?void 0:g.unit_high)||(null===g||void 0===g?void 0:g.unit_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Unit Price:")," $",(null===g||void 0===g?void 0:g.unit_low)||"","-$",(null===g||void 0===g?void 0:g.unit_high)||""),(null===g||void 0===g?void 0:g.unitName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Unit:")," ",null===g||void 0===g?void 0:g.unitName)))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"line_item",label:l.a.createElement("div",{className:"d-flex align-items-center"},"Service Variants *"),rules:[{required:!1,message:"this field is required"}],className:"position-relative ant-select-single-placeholder"},l.a.createElement(ku.a,{multiple:!0,style:{zIndex:99},dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed select-paddingLFT-0",placeholder:"Search Service Variants",notFoundContent:m?l.a.createElement(Wv.a,{size:"small"}):"No Result",open:this.state.autoOpen,filterOption:!1,showSearch:!0,onDropdownVisibleChange:function(e){return s.setState({autoOpen:e})},onFocus:function(){0==s.state.lineItems.length&&s.fetchLineItems({isSearched:!0})},onSearch:this.debounceEvent(this.onSearchServiceVariant,1e3),onChange:this.handleSelect,optionLabelProp:"label",dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},m?l.a.createElement(Wv.a,null):f.length!==h&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(e){s.handlePagination(),e.stopPropagation()}},"Load More"),l.a.createElement("span",{className:"remaining-tag"},"(".concat(h-f.length,")")||!1))))))}},f.map((function(e,a){var t,n;return l.a.createElement(JD,{label:e.name,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},"".concat(null===(t=e.line_item)||void 0===t?void 0:t.name," ").concat(e.region&&"/"," ").concat((null===(n=e.region)||void 0===n?void 0:n.title)||""," - ").concat(null===e||void 0===e?void 0:e.name))),e.breadcrumb&&l.a.createElement("div",{className:"col-12"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_right_search_select_small,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,null,e)})),l.a.createElement(Su.a.Item,null,e.line_item.name,"/",e.region.title,"-",e.name))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"col-12 vc-select-display-name"},l.a.createElement("span",{className:"display-data"},"Display Name:".concat(e.display_name))))),e.labor_groups.length>0&&l.a.createElement("div",{className:"col-12 proposal-labor"},l.a.createElement("img",{src:Rm.labor_gray_icon,alt:"",className:"labor-grp-icon"}),l.a.createElement("span",{className:"ml-1 labor-groups"},e.labor_groups.join(", ")))))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{onClick:function(){return s.handleFilterDrawer(!0)},className:"filter-btn ps-filter d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter")),l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"row mx-0 mt-0 mb-3 add-sub-tier-input-form"},l.a.createElement(xu.a,{placement:"bottomCenter",overlayClassName:"add-adding-dropdown add-resource-dropdown",overlay:w,trigger:["click"]},l.a.createElement(Vm.a,{style:{position:"unset",top:"unset"},className:"ant-dropdown-link ant-dropdown-link-resource border-0",onClick:function(e){return e.preventDefault()}},"+ Add Resource")))),l.a.createElement("div",{className:"col-12"},this.state.newPricing.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table proposal-update-table-edit "},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Taxable")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Include",l.a.createElement("br",null),"In Subtotal")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Total Price")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Document"))),l.a.createElement("div",{className:"row"},null===(e=this.state.newPricing)||void 0===e?void 0:e.map((function(e){var a,t;return l.a.createElement(zD,{key:e.id,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],modalOk:s.state.allow||null,foundRegion:null===e||void 0===e||null===(t=e.variant_data)||void 0===t?void 0:t.region,handlePriceUnit:s.handlePriceUnit,getSelectedServiceVariants:s.getSelectedServiceVariants,handleServiceModal:s.handleServiceModal,handlePriceOnChange:s.handlePriceOnChange,serviceModalVisible:s.state.serviceModalVisible,manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),margin:null===e||void 0===e?void 0:e.margin,allOptions:u,handleUnitSelectChange:function(e,a,t){return s.handleUnitSelectChange(e,a,t)},handleQuantitySelectChange:function(e,a){return s.handleQuantitySelectChange(e,a)},handlePricePerUnitChange:function(e,a){s.handlePricePerUnitChange(e,a)},handleCheckBox:function(e,a,t){return s.handleCheckBox(e,a,t)},handleRemoveWarning:s.handleRemoveWarning,newPricing:e,view:!1})})))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Service Variants")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-row-main service-line-item"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"cost_setting",label:"Cost Setting Options *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),defaultValue:"STANDARD",placeholder:"Select",onChange:this.handleCostSettingChange},$D.map((function(e){return l.a.createElement(JD,{value:e.value},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"tax_basis",className:"search-small-icon-position",label:"Tax Basis *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,placeholder:"Select",onSearch:function(e){s.setState({page:1,searchValue:e},(function(){s.getTaxBasisOptions()}))},filterOption:!1,onPopupScroll:function(e){e.persist();var a=e.target;v.length!==s.state.totalCount&&a.scrollTop+a.offsetHeight===a.scrollHeight&&s.setState({page:s.state.page+1},(function(){return s.getTaxBasisOptions()}))},onChange:this.handleTaxBasisChange},v.map((function(e){return l.a.createElement(JD,{key:e.id,value:e.id},e.name," - ",e.percentage)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"payment_terms",label:"Payment Terms *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},QD.map((function(e){return l.a.createElement(JD,{value:e.value},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"deposit",label:"Deposit *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onChange:this.handleDepositChange},l.a.createElement(JD,{value:"YES"},"Yes"),l.a.createElement(JD,{value:"NO"},"No")))))),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1 pt-4"},l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("span",{className:"sub-total-text"},"Estimated Total Price Pre-tax:")),l.a.createElement("div",{className:"col-4 text-md-right"},"LUMP_SUM"==d||"LUMP_SUM_WITH_UOM_AND_QTY"==d?l.a.createElement(ap.a,{value:this.state.pricePreTax||0,onChange:function(e){return s.setState({pricePreTax:e})},onBlur:function(e){return s.handleSubmit({estimated_total_price_pre_tax:e.target.value},!0)}}):l.a.createElement("span",{className:"sub-total-text gray-1"},"$",gd(null===y||void 0===y?void 0:y.estimated_total_price_pre)||0))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text"},"Estimated Taxes:")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("small",null,0!=(null===y||void 0===y||null===(a=y.tax_basis)||void 0===a?void 0:a.percentage)?null===y||void 0===y||null===(t=y.tax_basis)||void 0===t?void 0:t.percentage:"-","%")),l.a.createElement("li",{className:"list-inline-item"},"|"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"sub-total-text gray-1"},"$",gd(null===y||void 0===y?void 0:y.estimated_taxes)||0))))),l.a.createElement("div",{className:"".concat("TOTAL_PRICE_PER_UNIT"==this.state.costSetting&&"normal-text"," row estimated-total-row-3 estimated-total-row")},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text-main"},"Estimated Total:")),l.a.createElement("div",{className:"col-5 text-md-right"},("LUMP_SUM"==d||"LUMP_SUM_WITH_UOM_AND_QTY"==d)&&l.a.createElement("span",{className:"sub-total-text cut-text mr-2"},"$",null===y||void 0===y?void 0:y.standard_estimated_total),l.a.createElement("span",{className:"sub-total-text-main"},"$",gd(null===y||void 0===y?void 0:y.estimated_total)))),"TOTAL_PRICE_PER_UNIT"===d&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row estimated-total-row-2 pt-1 pb-0 estimated-total-row align-items-center"},l.a.createElement("div",{className:"col-5"},l.a.createElement("span",{className:"sub-total-text"},"Total Unit:")),l.a.createElement("div",{className:"col-7 text-md-right value-div-inner"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),value:p,placeholder:"Select",onChange:function(e){s.handleChange(e)}},u.map((function(e){return l.a.createElement(ku.a.Option,{value:e.id},e.name," (",e.symbol,")")})))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(ap.a,{value:this.state.units,onChange:function(e){return s.setState({units:e},(function(){s.handleSubmit({total_units:e},!0)}))}}))))),l.a.createElement("div",{className:"row estimated-total-row-2 pt-3 pb-0 estimated-total-row"},l.a.createElement("div",{className:"col-5"},l.a.createElement("span",{className:"sub-total-text-main"},"Price Per Unit:")),l.a.createElement("div",{className:"col-7 text-md-right"},l.a.createElement("span",{className:"sub-total-text-main"},"$ ",gd(null===y||void 0===y?void 0:y.price_per_unit),b&&" / ".concat(null===b||void 0===b?void 0:b.symbol," "))))),l.a.createElement("div",{className:"row estimated-total-row-4 estimated-total-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("small",{className:"small-text-main position-relative small-text-main-2"},"Taxes are calculated by customer\u2019s billing address")))))),!this.state.loading&&l.a.createElement("div",{className:"col-12 px-md-4 px-sm-3"},l.a.createElement("div",{className:"row mx-0 px-md-2 px-sm-2 py-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"qualifiers",label:"Qualifiers",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(HD,{id:"qualifiers"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"comments",label:"Comments",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(HD,{id:"comments"}))))),l.a.createElement("div",{className:"col-12 validate-div-col validate-div-col-line-items text-md-right"},l.a.createElement(Vm.a,{onClick:function(){return s.formRef.current.submit()},className:"validate-btn-main"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:this.state.resourceModelItem,onOk:function(){return s.handleResourceModel(null,!1)},onCancel:function(){return s.handleResourceModel(null,!1)},destroyOnClose:!0,closable:!0,footer:!1,visible:this.state.showResourceModel},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},ZD,{ref:this.contactRef}),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"inventory_item",label:this.state.resourceModelItem,rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,placeholder:"Search",filterOption:!1,removeIcon:"",onChange:function(e){return"Inventory Item"===s.state.resourceModelItem?s.fetchInventoryItem(e):"Disposal"===s.state.resourceModelItem?s.fetchDisposalItem(e):"Supply"===s.state.resourceModelItem?s.fetchSupplyItem(e):s.fetchKitItems(e)},onSearch:function(e){return"Inventory Item"===s.state.resourceModelItem?s.fetchAllInventories({search:e}):"Disposal"===s.state.resourceModelItem?s.fetchDisposal({search:e}):"Supply"===s.state.resourceModelItem?s.fetchSupply({search:e}):s.fetchAllInventoryKits({search:e})},onFocus:function(){return"Inventory Item"===s.state.resourceModelItem?s.fetchAllInventories():"Disposal"===s.state.resourceModelItem?s.fetchDisposal():"Supply"===s.state.resourceModelItem?s.fetchSupply():s.fetchAllInventoryKits()}},"Inventory Item"===this.state.resourceModelItem?l.a.createElement(l.a.Fragment,null,null===(n=this.state.inventoryItem)||void 0===n?void 0:n.map((function(e,a){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.inventory_sub_tier_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name)),l.a.createElement("div",{className:"col-12"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_right_search_select_small,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,null,e)})),l.a.createElement(Su.a.Item,null,e.name)))))),l.a.createElement("div",{style:{width:"13%"},className:"text-green-tag select-text-tier"},"Inventory Item")))}))):"Disposal"===this.state.resourceModelItem?l.a.createElement(l.a.Fragment,null,null===(c=this.state.disposal)||void 0===c?void 0:c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.disposal,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Disposal")))}))):"Supply"===this.state.resourceModelItem?l.a.createElement(l.a.Fragment,null,null===(i=this.state.supply)||void 0===i?void 0:i.map((function(e,a){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.supply_group_icon_new,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Supply")))}))):l.a.createElement(l.a.Fragment,null,null===(r=this.state.kits)||void 0===r?void 0:r.map((function(e,a){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.inventory_kit_sub_tier_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Inventory kit")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})))))),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){s.setState({costSettingSelected:null}),s.formRef.current.setFieldsValue({cost_setting:null===y||void 0===y?void 0:y.cost_setting}),s.showWarning(!1)},costSettingWarning:!0,confirmCloseCost:function(){var e=s.props.proposal;s.setState({costSetting:s.state.costSettingSelected},Object(Qm.a)($m.a.mark((function a(){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.handleSubmit({cost_setting:s.state.costSettingSelected},!0);case 2:"LUMP_SUM"!=s.state.costSetting&&"LUMP_SUM_WITH_UOM_AND_QTY"!=s.state.costSetting||s.setState({pricePreTax:(null===e||void 0===e?void 0:e.estimated_total_price_pre_tax)?null===e||void 0===e?void 0:e.estimated_total_price_pre_tax:null===e||void 0===e?void 0:e.estimated_total_price_pre});case 3:case"end":return a.stop()}}),a)})))),s.showWarning(!1)},heading:"Are you sure you want to update the cost setting?",subHeadingUOM:"Updating the cost setting would affect how the breakdown is presented on your proposal PDF."}),l.a.createElement(iv,{visible:this.state.serviceModalVisible,onClose:function(){return s.handleServiceModal(!1)},cancelText:"No, cancel this action",editedCheckWarning:!0,priceUnitType:!0,onOk:function(){return s.setState({serviceModalVisible:!1},(function(){s.handlePriceOnChange()}))},heading:"Are you sure you want to change this Service Variant\u2019s Price per Unit?",subHeadingUOM:"If you change the price per unit, you cannot go back to the original price per unit (unless you input it or re-add this service variant)."}),l.a.createElement(WD,{footerText:"Okay, I understand.",visible:this.state.unitModalVisible,onClose:this.handleUnitModal,heading:"You are about to change the UOM.",subHeading:"If you change the UOM, the price per unit will change to the selected UOM\u2019s price per unit (unless you have already overriden it)."}),l.a.createElement(UO,{footerText:"ok",visible:this.state.modalVisible,onClose:this.closeViewModal,heading:this.state.taxCheckBox?this.state.taxVisible?l.a.createElement("div",null,"This is now taxable."):l.a.createElement("div",null,"This is now nontaxable."):this.state.subtotalVisible?l.a.createElement("div",null,"This is now included in the subtotal"):l.a.createElement("div",null,"This is now excluded from the subtotal."),subHeading:this.state.taxCheckBox?this.state.taxVisible?l.a.createElement("div",null,"To make it nontaxable, please uncheck the checkbox."):l.a.createElement("div",null,"To make it taxable, please check the checkbox."):this.state.subtotalVisible?l.a.createElement("div",null,"To make it excluded, uncheck the check box."):l.a.createElement("div",null,"To include it again, please check the checkbox."),footer:"ok"}),l.a.createElement(iv,{common:!0,visible:this.state.removeWarningVisible,onClose:function(){s.setState({removableId:null,removeWarningVisible:!1})},serviceVariantWarning:!0,commonFunc:function(){s.deleteServiceVariant(),s.handleRemoveWarning(!1)},heading:"Are you sure you want to remove this?",subHeadingUOM:" "}),l.a.createElement(lb,{visible:this.state.visibleFilter,onClose:function(){return s.handleFilterDrawer(!1)},setFilterObj:this.setFilterObj,filterApplied:this.state.filterApplied}))}}]),t}(n.Component)),eT=Object(r.withRouter)(XD),aT={labelCol:{span:24},wrapperCol:{span:24}},tT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))},sorter:!0},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){Yf({proposal:e.props.proposal.id}).then((function(a){var t=Object(wu.a)(Object(wu.a)({},e.props.proposal),{},{documents:a.data.results});e.props.setProposal(t),e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("proposal",e.props.proposal.id),n.append("document",t),Wf(n).then((function(a){e.props.fetchProposal(a.data.proposal),e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?this.fetchFiles(this.props.match.params.id):this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please attach any documents for this disposal."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},aT,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.state.files.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.columns,dataSource:this.state.files,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),nT=Object(r.withRouter)(tT),lT={labelCol:{span:24},wrapperCol:{span:24}},cT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.siteRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,proposal:{},contactAccount:null,showContactModel:!1,contactModalItem:null,showSiteModel:!1,siteModalItem:null,contacts:[],sites:[],removeVisible:!1,deletableAccountId:null,contactDrawerVisible:!1,siteDrawerVisible:!1,createAccountType:null},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.handleDefaultSelectAccount=function(a){var t=e.state.selectedContactAccounts;return a.map((function(e){var a=t.find((function(a){return a.account.id===e.id}));return a&&(e.contacts=a.contact,e.sites=a.site),e}))},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({owner_accounts:null}),Zf({proposal:e.props.proposal.id,account:a.value}).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.handleOnDeselect=function(a){var t=e.props.proposal.owner_contact.find((function(e){return e.account.id===a.value}));e.handleDeleteOwnerAccount(t.id)},e.handleDeleteOwnerAccount=function(){eE(e.state.deletableAccountId).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.handleContactSelect=function(a){e.contactRef.current.setFieldsValue({contact:null});var t=e.state.contactModalItem,n=e.props.proposal.owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a])};Xf(t.id,i).then((function(a){e.props.fetchProposal(e.props.proposal.id)}))},e.handleContactDeselect=function(a){e.handleDeleteContact(e.state.contactModalItem,a)},e.handleDeleteContact=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedItem,n=e.state.deletableContactId,l=e.props.proposal.owner_contact,c=l.findIndex((function(e){return e.id===t.id})),i={contact:l[c].contact.filter((function(e){return e.id!==n})).map((function(e){return e.id}))};Xf(t.id,i).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.handleSiteSelect=function(a){e.siteRef.current.setFieldsValue({site:null});var t=e.state.siteModalItem,n=e.props.proposal.owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l],i=c.site.map((function(e){return e.site.id})),r={site_id:[].concat(Object(Ou.a)(i),[a]),site:[]};Xf(t.id,r).then((function(){0===c.site.length&&e.handlePrimarySite(c.id,a),e.props.fetchProposal(e.props.proposal.id)}))},e.handleSiteDeselect=function(a){e.handleDeleteSite(e.state.siteModalItem,a)},e.handleDeleteSite=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedSite,n=e.state.deletableSiteId,l=e.props.proposal.owner_contact,c=l.findIndex((function(e){return e.id===t.id})),i=l[c],r={site_id:null===i||void 0===i?void 0:i.site.filter((function(e){return e.site.id!==n})).map((function(e){return e.site.id}))};Xf(t.id,r).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),mp(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllSites=function(a){var t=e.state.siteModalItem;e.setState({loading:!0}),hp(Object(wu.a)(Object(wu.a)({},a),{},{account:t.account.id})).then((function(a){e.setState({sites:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllContacts=function(){var a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({},t),{},{account:null===n||void 0===n||null===(a=n.account)||void 0===a?void 0:a.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.handleSubmit=function(){Mm.b.success("Site Manager Updated Successfully!"),e.props.setProposal(e.props.proposal,5)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.handleSiteModel=function(a,t){a?e.setState({siteModalItem:a,showSiteModel:t}):e.setState({showSiteModel:t})},e.handlePrimarySite=function(e,a){cE(e,{primary_site_id:a}).then().catch((function(e){td(e)}))},e.removeContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrawerVisible:a,selectedItem:t,deletableContactId:n})},e.handleRemoveSite=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({siteDrawerVisible:a,selectedSite:t,deletableSiteId:n})},e.showOwnerAccount=function(){e.setState({ownerModalVisible:!1})},e.showContactAccount=function(){e.setState({ownerContactVisible:!1})},e.showSites=function(){e.setState({onwerSiteVisible:!1})},e.callbackOwnerAccount=function(a){Zf({proposal:e.props.proposal.id,account:a.id}).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.proposal.owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a.id])};Xf(t.id,i).then((function(a){e.props.fetchProposal(e.props.proposal.id),a.data.contact.map((function(e){var t;xh({account:null===(t=a.data)||void 0===t?void 0:t.account.id},e.id).then((function(){})).catch((function(e){td(e)}))}))}))},e.callbackSite=function(a){var t=e.state.siteModalItem,n=e.props.proposal.owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].site.map((function(e){return e.site.id})),i={site_id:[].concat(Object(Ou.a)(c),[a.id]),site:[]};Xf(t.id,i).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.showAccountTypeModal=function(a){e.setState({visibleAcTypeModal:a})},e.setAccountTypeOrVisible=function(a,t){e.setState({createAccountType:a,ownerModalVisible:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.getAllAccounts(),this.props.fetchProposal())}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.loading,c=t.accounts,i=(null===(e=this.props.proposal)||void 0===e?void 0:e.owner_contact)||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add a Site Manager account and its contacts. You can only have one Site Manager for each proposal."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},lT,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{dropdownClassName:"option-design-fix",name:"owner_accounts",label:"Site Manager Account *",rules:[{required:(null===i||void 0===i?void 0:i.length)<1,message:"Please select at least one site manager account."}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,className:"search-and-select-tag",showSearch:!0,disabled:(null===i||void 0===i?void 0:i.length)>=1,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:function(e){return a.getAllAccounts({search:e})},removeIcon:"",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,onFocus:function(){return a.getAllAccounts()}},c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site Manager Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:25}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{disabled:(null===i||void 0===i?void 0:i.length)>=1,className:"create-btn-main position-absolute text-capitalize",onClick:function(){return a.showAccountTypeModal(!0)}},"+ Create")),null===i||void 0===i?void 0:i.map((function(e,t){var n,c,i;return l.a.createElement("div",{className:"col-12 col-sm-12",key:t},l.a.createElement("div",{className:"row mx-0 opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},Lp[null===(c=e.account)||void 0===c?void 0:c.account_type]," ","Account")))),l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleContactModel(e,!0)}},"+ Add Contact")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},e.contact.map((function(t,n){var c,i;return l.a.createElement("div",{className:"col-6 col-sm-6",key:n},l.a.createElement("div",{style:{minHeight:"100px"},className:"row mx-0 mb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},t.first_name," ",t.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},t.role)),l.a.createElement("p",{className:"mb-0"},t.default_email&&"".concat(null===(c=t.default_email)||void 0===c?void 0:c.email,","),"\xa0"," ",null===(i=t.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.removeContact(!0,e,t.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"}))))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts")))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleSiteModel(e,!0)}},"+ Add Site")),e.site&&0!==e.site.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(vh.a.Group,{defaultValue:null===(i=e.site.find((function(e){return!0===e.primary})))||void 0===i?void 0:i.id},e.site.map((function(t,n){return l.a.createElement("div",{className:"col-12",key:n},l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("h6",{style:{fontSize:"15px",color:"#4f4f4f",fontWeight:"500"},className:"text-capitalize mb-0"},t.site.name)))),l.a.createElement("div",{className:"col-12 col-sm-9 px-3 pt-2 pb-4"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},t.site.street_address||""," ",t.site.apartment||""," ",t.site.city||"",","," ",t.site.state||""," ",t.site.zip_code||""," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},t.site.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},t.site.phone)),l.a.createElement("div",{className:"col-12 col-sm-1 position-relative"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.handleRemoveSite(!0,e,t.site.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{style:{width:"20px"},className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===t||void 0===t?void 0:t.id,onChange:function(){return a.handlePrimarySite(e.id,null===t||void 0===t?void 0:t.site.id)}},"Primary Site"))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))})),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Site Manager Account"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",closable:!0,footer:!1,title:"Add contact",onOk:function(){return a.handleContactModel(null,!1)},onCancel:function(){return a.handleContactModel(null,!1)},destroyOnClose:!0,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},lT,{ref:this.contactRef}),l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleContactSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onSearch:lu((function(e){return a.getAllContacts({search:e})}),300),onFocus:function(){return a.getAllContacts()}},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({ownerContactVisible:!0},(function(){return a.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add Sites",closable:!0,footer:!1,onOk:function(){return a.handleSiteModel(null,!1)},onCancel:function(){return a.handleSiteModel(null,!1)},destroyOnClose:!0,visible:this.state.showSiteModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},lT,{ref:this.siteRef}),l.a.createElement(Fm.a.Item,{name:"site",label:"Site ",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{className:"search-and-select-tag dropdown-fixed",dropdownClassName:"option-design-fix",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleSiteSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Site",onFocus:function(){return a.getAllSites()},onSearch:lu((function(e){return a.getAllSites({search:e})}),300)},this.state.sites.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name,l.a.createElement("br",null),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e?"".concat(null===e||void 0===e?void 0:e.street_address," ").concat(null===e||void 0===e?void 0:e.city,", ").concat(null===e||void 0===e?void 0:e.state," ").concat(null===e||void 0===e?void 0:e.zip_code):" ")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({onwerSiteVisible:!0},(function(){return a.handleSiteModel(!1)}))}},"+ Create"))))),l.a.createElement(iv,{commonInternalLocationPopup:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account?",subHeadingUOM:"If you choose to remove this Site Manager Account, this might cause issues.",visible:this.state.removeVisible,showWarningModal2:function(){a.setState({deletableAccountId:null,removeVisible:!1}),a.handleDeleteOwnerAccount()},onClose:function(){return a.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedItem:null,deletableContactId:null,contactDrawerVisible:!1}),a.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrawerVisible,onClose:function(){return a.removeContact(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedSite:null,deletableSiteId:null,siteDrawerVisible:!1}),a.handleDeleteSite()},heading:"Are you sure you want to remove this site?",subHeadingUOM:" ",visible:this.state.siteDrawerVisible,onClose:function(){return a.handleRemoveSite(!1)}}),l.a.createElement(Vp,{createAccountType:this.state.createAccountType,callbackOwnerAccount:this.callbackOwnerAccount,selectedAccounts:i,visible:this.state.ownerModalVisible,onClose:function(){return a.showOwnerAccount(!1)}}),l.a.createElement(Up,{PARTIAL_MANAGER:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.visibleAcTypeModal,onClose:function(){return a.showAccountTypeModal(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.ownerContactVisible,selectedAccounts:i,onClose:function(){return a.showContactAccount(!1)}}),l.a.createElement(lf,{callbackSite:this.callbackSite,visible:this.state.onwerSiteVisible,selectedAccounts:i,onClose:function(){return a.showSites(!1)}}))}}]),t}(n.Component),iT=Object(r.withRouter)(cT),rT=ku.a.Option,sT={labelCol:{span:24},wrapperCol:{span:24}},oT={salesPerson:"salesperson",salesAssistant:"salesassistant",salesManager:"salesmanager"},mT={salesPerson:"sales_person",salesAssistant:"sales_assistant",salesManager:"sales_manager"},dT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={salesPerson:[],salesAssistant:[],salesManager:[],salesPersonSelected:[],salesAssistantSelected:[],salesManagerSelected:[],fetching:!1,buttonLoading:!1},e.formRef=l.a.createRef(),e.showWarningModal=function(a,t,n){a&&e.setState({item:t,type:n}),e.setState({visible:a})},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){e.showWarningModal(!0,a,t)},className:"border-0 bg-transparent text-center p-0 w-100"},"Remove")))},e.removeUsers=function(){var a=e.state,t=a.item,n=a.type;e.setState(Object(zv.a)({},"".concat(n,"Selected"),e.state["".concat(n,"Selected")].filter((function(e){return e.id!==t.id}))))},e.fetchUser=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.setState({fetching:!0}),ud(oT[a],t).then((function(t){var n;e.setState((n={},Object(zv.a)(n,a,t.data.results),Object(zv.a)(n,"fetching",!1),n))})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSelect=function(a,t){var n,l=e.state,c=l.salesAssistantSelected,i=l.salesManagerSelected,r=l.salesPersonSelected;0==i.length&&0==r.length&&0==c.length&&e.handleUpdatePoc(a),e.formRef.current.setFieldsValue(Object(zv.a)({},mT[t],null));var s=e.state[t].filter((function(e){return a===e.id}));if(null===(n=e.state["".concat(t,"Selected")])||void 0===n?void 0:n.find((function(e){return a===e.id})))return null;e.setState((function(e){return Object(zv.a)({},"".concat(t,"Selected"),[].concat(Object(Ou.a)(e["".concat(t,"Selected")]),Object(Ou.a)(s)))}))},e.handleSubmit=function(){var a=e.state,t=a.salesManagerSelected,n=a.salesAssistantSelected,l=a.salesPersonSelected;if(t.length>0||n.length>0||l.length>0){e.setState({buttonLoading:!0});var c,i={sales_manager:e.state.salesManagerSelected.map((function(e){return e.id})),sales_assistant:e.state.salesAssistantSelected.map((function(e){return e.id})),sales_person:e.state.salesPersonSelected.map((function(e){return e.id}))};if(e.props.match.params.id)Lf(e.props.match.params.id,i).then((function(a){Mm.b.success("Team Updated Successfully!"),e.props.setProposal(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}));else Lf(null===(c=e.props.proposal)||void 0===c?void 0:c.id,i).then((function(a){Mm.b.success("Team added Successfully!"),e.props.setProposal(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))}},e.handleUpdatePoc=function(a){Lf(e.props.proposal.id,{point_proposal:a}).then((function(a){e.props.setProposal(a.data)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n=this,l=this.props.match.params.id;l?Bf(l).then((function(e){var a,t,l;n.setState({salesPersonSelected:(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.sales_person)||[],salesAssistantSelected:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.sales_assistant)||[],salesManagerSelected:(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.sales_manager)||[]}),n.fetchUser("salesManager"),n.fetchUser("salesAssistant"),n.fetchUser("salesPerson")})).catch((function(e){td(e)})):(this.setState({salesPersonSelected:(null===(e=this.props.proposal)||void 0===e?void 0:e.sales_person)||[],salesAssistantSelected:(null===(a=this.props.proposal)||void 0===a?void 0:a.sales_assistant)||[],salesManagerSelected:(null===(t=this.props.proposal)||void 0===t?void 0:t.sales_manager)||[]}),this.fetchUser("salesManager"),this.fetchUser("salesAssistant"),this.fetchUser("salesPerson"))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row general-info"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"A minimum of one team member must be assigned in order to Save & Continue."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,requiredMark:!1,ref:this.formRef},sT,{className:"main-inner-form"}),l.a.createElement(vh.a.Group,{value:null===(e=this.props.proposal)||void 0===e?void 0:e.point_proposal},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_manager",label:"Sales Managers",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onChange:function(e){return o.handleSelect(e,"salesManager")},showSearch:!0,onFocus:function(){return o.fetchUser("salesManager")},onSearch:function(e){return o.fetchUser("salesManager",{search:e})},className:"custom-search-select"},this.state.salesManager.map((function(e){return l.a.createElement(rT,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Manager")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(a=this.state.salesManagerSelected)||void 0===a?void 0:a.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))),null===(t=this.state.salesManagerSelected)||void 0===t?void 0:t.map((function(e){var a;return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat((null===(a=o.props.proposal)||void 0===a?void 0:a.point_proposal)===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Manager")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesManager")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(Fm.a.Item,{name:"sales_person",label:"Salespeople",rules:[{required:!1,message:""}],className:"search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onChange:function(e){return o.handleSelect(e,"salesPerson")},onFocus:function(){return o.fetchUser("salesPerson")},onSearch:function(e){return o.fetchUser("salesPerson",{search:e})},className:"custom-search-select"},this.state.salesPerson.map((function(e){return l.a.createElement(rT,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Salesperson")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(n=this.state.salesPersonSelected)||void 0===n?void 0:n.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople")))),null===(c=this.state.salesPersonSelected)||void 0===c?void 0:c.map((function(e){return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat(o.props.proposal.point_proposal===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Salesperson")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesPerson")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_assistant",label:"Sales Assistants",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onChange:function(e){return o.handleSelect(e,"salesAssistant")},onFocus:function(){return o.fetchUser("salesAssistant")},onSearch:function(e){return o.fetchUser("salesAssistant",{search:e})},className:"custom-search-select"},null===(i=this.state.salesAssistant)||void 0===i?void 0:i.map((function(e){return l.a.createElement(rT,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Assistant")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(r=this.state.salesAssistantSelected)||void 0===r?void 0:r.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))),null===(s=this.state.salesAssistantSelected)||void 0===s?void 0:s.map((function(e){return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat(o.props.proposal.point_proposal===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Assistant")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesAssistant")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(iv,{visible:this.state.visible,onClose:function(){return o.showWarningModal(!1)},heading:"Are you sure you want to remove this Team Member?",subHeadingUOM:"If you choose to remove this Team Member, this might cause issues.",common:!0,commonFunc:function(){o.removeUsers(),o.showWarningModal(!1)}}))}}]),t}(n.Component),uT=Object(r.withRouter)(dT),pT=fu.a.Panel,vT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={proposal:null,visibleConfirm:!1,warningModalVisible:!1,activeKey:["1"],unsavedExit:!1,requiredSuccessModalVisible:!1,regions:[],multiple_created:!1,required:!1},e.showWarningModal=function(a){e.setState({warningModalVisible:a}),a&&e.callMultiple()},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.setProposal=function(a,t){var n;(null===(n=e.state.proposal)||void 0===n?void 0:n.name)?(null===a||void 0===a?void 0:a.sales_manager.length)&&(null===a||void 0===a?void 0:a.sales_assistant.length)&&(null===a||void 0===a?void 0:a.sales_person.length)&&(null===a||void 0===a?void 0:a.customer_contact.length)&&(null===a||void 0===a?void 0:a.owner_contact.length)&&(null===a||void 0===a?void 0:a.cost_setting)&&(null===a||void 0===a?void 0:a.tax_basis)&&(null===a||void 0===a?void 0:a.payment_terms)&&(null===a||void 0===a?void 0:a.deposit)&&(null===a||void 0===a?void 0:a.service_variant_count)>0?e.setState((function(){return{proposal:a,unsavedExit:!1}})):e.setState((function(){return{proposal:a}})):e.setState((function(){return{proposal:a,unsavedExit:!0}}));var l=null;e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l||e.setState((function(e){return{proposal:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.fetchProposal=function(a){Bf(e.props.match.params.id?e.props.match.params.id:a).then((function(a){e.setState({proposal:a.data},(function(){var a;(null===(a=e.state.proposal)||void 0===a?void 0:a.name)&&!e.props.match.params.id?e.setState({unsavedExit:!1}):e.setState({unsavedExit:!0})}))})).catch((function(e){td(e)}))},e.fetchRegion=function(){ZE().then((function(a){e.setState({regions:a.data.results})})).catch((function(e){td(e)}))},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.proposal;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:l.id})):e.showConfirmModal(!0)},e.createMultipleProposals=function(){uE({proposal:e.state.proposal.id?e.state.proposal.id:e.props.match.params.id}).then((function(){e.setState({multiple_created:!0})})).catch((function(e){td(e)}))},e.handleCreatepdf=function(){var a;pE({proposal:null===(a=e.state.proposal)||void 0===a?void 0:a.id}).then((function(e){console.log(e)})).catch((function(e){td(e)}))},e.callMultiple=function(){var a=e.state.proposal;e.props.location.pathname.includes("create")&&!e.state.multiple_created&&(e.handleCreatepdf(),e.createMultipleProposals(),o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:a.id})))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.match.params.id?(this.fetchProposal(),this.fetchRegion(),this.setState({activeKey:this.props.location.editTab||"1"}),e=[{title:"Edit Proposal",url:""}]):e=[{title:"Create Proposal",url:""}],this.props.setBreadcrumb(e)}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.state,r=i.proposal,s=i.activeKey,m=i.regions,d=this.props.location.pathname.includes("create");return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit&&!this.props.match.params.id,title:"Are you sure you want to exit creating this proposal?",cancelText:"Continue with proposal",unsavedText:"Exiting proposal creation without adding all of the required information may cause issues. To avoid issues, please continue and finish this proposal. If you would like to exit anyway, select Exit.",okText:"Exit",onOK:function(){return c.callMultiple(),!0},onCancel:function(){return!1},setCancel:function(){c.setState({required:!0})}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{onChange:this.collapseOnChange,defaultActiveKey:["1"],activeKey:s,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(pT,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(MD,{proposal:r,setProposal:this.setProposal})),l.a.createElement(pT,{disabled:!r,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Team *"),(this.state.required||(null===(e=this.props.match.params)||void 0===e?void 0:e.id))&&ru(r,"TEAMS")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"2"},l.a.createElement(uT,{proposal:r,setProposal:this.setProposal,fetchProposal:this.fetchProposal})),l.a.createElement(pT,{disabled:!r,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},d?"Billing Accounts":"Billing Account"," *"),(this.state.required||(null===(a=this.props.match.params)||void 0===a?void 0:a.id))&&ru(r,"CUSTOMER")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"3"},l.a.createElement(VD,{fetchProposal:this.fetchProposal,proposal:r,setProposal:this.setProposal})),l.a.createElement(pT,{disabled:!r,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Site Manager Account *"),(this.state.required||(null===(t=this.props.match.params)||void 0===t?void 0:t.id))&&ru(r,"OWNER")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"4"},l.a.createElement(iT,{fetchProposal:this.fetchProposal,proposal:r,setProposal:this.setProposal})),l.a.createElement(pT,{disabled:!r,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Service Variants ",l.a.createElement("sup",null,"*")),(this.state.required||(null===(n=this.props.match.params)||void 0===n?void 0:n.id))&&ru(r,"SERVICE_VARIENT")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"5"},l.a.createElement(eT,{proposal:r,setProposal:this.setProposal,fetchProposal:this.fetchProposal,regions:m})),l.a.createElement(pT,{disabled:!r,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"6"},l.a.createElement(nT,{proposal:r,setProposal:this.setProposal,fetchProposal:this.fetchProposal}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return c.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{style:d?{width:"37%"}:{},onClick:function(){c.callMultiple(),c.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:r.id})):c.handleViewMainButtonCLick()},disabled:!r,type:"primary"},d?"Complete Creation (for all Billing Accounts)":"View Proposal"))))))),l.a.createElement(mh,{heading:this.props.match.params.id?"You\u2019ve successfully updated this Proposal!":"Proposal Created Successfully!",subHeading:this.props.match.params.id?l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){window.location.href.includes("create")?o.push(Object(dh.a)(zm.dashboard.sales.proposal.self)):o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:r.id}))},className:"border-0 bg-transparent shadow-none p-0"},"View Proposal."),"."):l.a.createElement("p",{className:"mb-0"},"If there were multiple billing accounts on this proposal, a proposal was created for each one."),visible:this.state.visibleConfirm,okAction:function(){window.location.href.includes("create")?o.push(Object(dh.a)(zm.dashboard.sales.proposal.self)):o.push(Object(dh.a)(zm.dashboard.sales.proposal.view,{id:r.id}))},okTitle:"View Proposal",onClose:function(){return c.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Proposal?"),visible:this.state.warningModalVisible,onClose:function(){return c.showWarningModal(!1)}}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"Proposal(s) created successfully.",subHeading:"If there were multiple billing accounts on this proposal, a proposal was created for each one.",onClose:function(){c.showRequiredSuccessModal(!1)},okText:"View Proposal",onOK:function(){c.callMultiple(),c.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.sales.proposal.view,{id:r.id}))}}))}}]),t}(n.Component),hT=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(h_.withRouter)(vT)),fT=ku.a.Option,ET=ku.a.OptGroup,gT={labelCol:{span:24},wrapperCol:{span:24}},bT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).getAllContacts=function(e){var a=n.state.proposalContacts;n.setState({loading:!0}),yh(e).then((function(e){var t=e.data.results.filter((function(e){return null!=e.default_email}));t=t.filter((function(e){return 0==a.filter((function(a){return a.default_email.email==e.default_email.email})).length})),n.setState({contacts:t})})).catch((function(e){td(e)})).finally((function(){n.setState({loading:!1})}))},n.handleSubmit=function(e){var a=n.state,t=a.selectedCCEmails,l=a.selectedBCCEmails,c=a.selectedEmails;n.setState({btnLoader:!0});var i,r,s=Object(wu.a)(Object(wu.a)({},e),{},{to:c,cc:t,bcc:l});(i=n.props.match.params.id,r=s,od(ad("proposal.sales_pdf_email",{id:i}),r)).then((function(){n.setState({btnLoader:!1}),Mm.b.success("Proposal sent successfully!"),n.props.onClose()})).catch((function(e){td(e)}))},n.handleSelect=function(e,a){var t=e.map((function(e){return e.label}));n.setState({selectedContacts:e,selectedEmails:t})},n.showCCSelect=function(){n.setState({showCCSelect:!0})},n.showBCCSelect=function(){n.setState({showBCCSelect:!0})},n.handleCCSelect=function(e,a){var t=e.map((function(e){return e.label}));n.setState({selectedCC:e,selectedCCEmails:t})},n.handleBCCSelect=function(e,a){var t=e.map((function(e){return e.label}));n.setState({selectedBCC:e,selectedBCCEmails:t})},n.populateData=function(){n.formRef.current.setFieldsValue({subject:"".concat(n.props.proposal.name," - a Quote Attached"),message:"Attached is our quote for the above-mentioned project. \n\nWe will look forward to working with you on this important project.\n\nFor your future reference please keep McVac in mind for the other services we offer. McVac specializes in services centered around our fleet of powerful and versatile vacuum trucks and services related to our fleet of equipment and trained personnel. Some of these services include Emergency Spill Response, Transportation and Disposal of hazardous and non-hazardous liquid & solid waste, Vacuum Excavation (Hydro and/or Pneumatic Excavation), Ground Water Treatment, Pipe Cleaning & CCTV Inspection, Environmental Site Cleanup and Remediation, hazardous and non-hazardous waste management, and finally Tank & Facility cleaning.\n\nPlease visit us at www.mcvacenvironmental.com."})},n.fetchPdf=function(){n.setState({pdfLoading:!0});iE(n.props.proposal.id,{preview:"1"}).then((function(e){var a=new Blob([e.data],{type:"application/pdf"}),t=URL.createObjectURL(a);n.setState({fileURL:t,pdfLoading:!1},(function(){window.open(n.state.fileURL,"_blank")}))})).catch((function(e){td(e)}))},n.state={contacts:[],selectedContacts:[],selectedEmails:[],selectedBCCEmails:[],selectedBCC:[],selectedCC:[],selectedCCEmails:[],proposalContacts:[],loading:!1,showCCSelect:!1,showBCCSelect:!1,btnLoader:!1,fileURL:null,pdfLoading:!1},n.formRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l,c=this.props.proposal,i=[],r=[],s=[],o=Object(qD.a)(null===c||void 0===c?void 0:c.customer_contact);try{for(o.s();!(l=o.n()).done;){var m,d=l.value,u=Object(qD.a)(d.contact);try{for(u.s();!(m=u.n()).done;){var p=m.value;i.push(p.contact)}}catch(N){u.e(N)}finally{u.f()}}}catch(N){o.e(N)}finally{o.f()}var v,h=Object(qD.a)(null===c||void 0===c?void 0:c.owner_contact);try{for(h.s();!(v=h.n()).done;){var f,E=v.value,g=Object(qD.a)(E.contact);try{for(g.s();!(f=g.n()).done;){var b=f.value;r.push(b.contact)}}catch(N){g.e(N)}finally{g.f()}}}catch(N){h.e(N)}finally{h.f()}s.push(null===(e=this.props.proposal)||void 0===e||null===(a=e.proposal_recipient)||void 0===a||null===(t=a.default_email)||void 0===t?void 0:t.email),this.setState({selectedEmails:s,proposalContacts:null===(n=[].concat(i,r))||void 0===n?void 0:n.filter((function(e){return null!=(null===e||void 0===e?void 0:e.default_email)}))})}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d=this,u=this.state,p=u.contacts,v=u.selectedContacts,h=u.showCCSelect,f=u.showBCCSelect,E=u.selectedBCC,g=u.selectedCC,b=u.proposalContacts,N=u.btnLoader,y=this.props.proposal,w=this.props.userdata;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,afterVisibleChange:this.populateData,title:"Send Proposal",visible:this.props.visible,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div drawer-update",width:"575px",placement:"right",closeIcon:!1,footer:l.a.createElement("div",{className:"preview",style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},l.a.createElement("span",{className:"preview-pdf-proposal"},l.a.createElement(Vm.a,{onClick:this.fetchPdf},"Preview PDF ")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:this.props.onClose,style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){d.formRef.current.submit()},type:"primary",loading:N},"Send Proposal")))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select who you would like to send this proposal to. You can choose among Contacts associated to this Proposal\u2019s Site Manager and Billing Accounts, and you can also add other email addresses as well. The selected Customer Account is the address to at the proposal."))),l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",null,"Proposal Recipient")),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row customer-account-send"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main position-relative"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,(null===y||void 0===y||null===(e=y.proposal_recipient)||void 0===e?void 0:e.full_name)||"-",l.a.createElement("span",{className:"role-name-tg"},(null===y||void 0===y||null===(a=y.proposal_recipient)||void 0===a?void 0:a.role)||"-")),l.a.createElement("p",{className:"mb-0"},(null===y||void 0===y||null===(t=y.proposal_recipient)||void 0===t||null===(n=t.default_email)||void 0===n?void 0:n.email)||"-",", ",(null===y||void 0===y||null===(c=y.proposal_recipient)||void 0===c||null===(i=c.default_phone)||void 0===i?void 0:i.phone_number)||"-"))),l.a.createElement("span",{className:"position-absolute home-labor-group main-content-div"},"Proposal Recipient"))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},gT,{onFinish:this.handleSubmit,className:"main-inner-form proposal-send-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"date",label:"Date ",rules:[{required:!1,message:""}]},l.a.createElement(Hv.a,{disabled:!0,defaultValue:hd()(),format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"from",label:"From ",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{disabled:!0,placeholder:"Enter Email",defaultValue:null===w||void 0===w?void 0:w.google_authorised_email}))),l.a.createElement("div",{className:"col-12 custom-select-multi"},l.a.createElement(Fm.a.Item,{name:"to",label:"To *",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{labelInValue:!0,dropdownClassName:"opt-group-multi",mode:"tags",placeholder:"Select",showArrow:!1,className:"search-and-select-tag",filterOption:!1,onChange:function(e,a){return d.handleSelect(e,a)},value:v,optionLabelProp:"label",showSearch:!0,onSearch:function(e){return d.getAllContacts({search:e})},onFocus:function(){return d.getAllContacts()},defaultValue:{value:null===y||void 0===y||null===(r=y.proposal_recipient)||void 0===r?void 0:r.id,key:null===y||void 0===y||null===(s=y.proposal_recipient)||void 0===s?void 0:s.id,label:null===y||void 0===y||null===(o=y.proposal_recipient)||void 0===o||null===(m=o.default_email)||void 0===m?void 0:m.email}},l.a.createElement(ET,{label:"Contacts associated to accounts within this proposal"},null===b||void 0===b?void 0:b.map((function(e){var a;return l.a.createElement(fT,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(ET,{label:"Others"},p.map((function(e){var a;return l.a.createElement(fT,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement("ul",{className:"mb-0 list-inline to-associate-details position-absolute"},l.a.createElement("li",{className:"list-inline-item",onClick:this.showCCSelect},"Cc"),l.a.createElement("li",{className:"list-inline-item",onClick:this.showBCCSelect},"Bcc"))),h&&l.a.createElement("div",{className:"col-12 custom-select-multi"},l.a.createElement(Fm.a.Item,{name:"cc",label:"Cc",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{labelInValue:!0,dropdownClassName:"opt-group-multi",mode:"tags",placeholder:"Select",showArrow:!1,className:"search-and-select-tag",filterOption:!1,onChange:function(e,a){return d.handleCCSelect(e,a)},value:g,optionLabelProp:"label",showSearch:!0,onSearch:function(e){return d.getAllContacts({search:e})},onFocus:function(){return d.getAllContacts()}},l.a.createElement(ET,{label:"Contacts associated to accounts within this proposal"},null===b||void 0===b?void 0:b.map((function(e){var a;return l.a.createElement(fT,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(ET,{label:"Others"},p.map((function(e){var a;return l.a.createElement(fT,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),f&&l.a.createElement("div",{className:"col-12 custom-select-multi"},l.a.createElement(Fm.a.Item,{name:"bcc",label:"Bcc",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{labelInValue:!0,dropdownClassName:"opt-group-multi",mode:"tags",placeholder:"Select",showArrow:!1,className:"search-and-select-tag",filterOption:!1,onChange:function(e,a){return d.handleBCCSelect(e,a)},value:E,optionLabelProp:"label",showSearch:!0,onSearch:function(e){return d.getAllContacts({search:e})},onFocus:function(){return d.getAllContacts()}},l.a.createElement(ET,{label:"Contacts associated to accounts within this proposal"},null===b||void 0===b?void 0:b.map((function(e){var a;return l.a.createElement(fT,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(ET,{label:"Others"},p.map((function(e){var a;return l.a.createElement(fT,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"subject",label:"Subject * ",rules:[{required:!0,message:"Please Enter Subject"}]},l.a.createElement(Pm.a,{placeholder:"Subject"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"message",label:"Message * ",rules:[{required:!0,message:"Please Enter Message"}]},l.a.createElement(Pm.a.TextArea,{className:"text-editor-field mt-0",placeholder:"Message"})))))))))}}]),t}(n.Component),NT=Object(Lm.b)((function(e){return Object(wu.a)(Object(wu.a)({},e),{},{userdata:null===e||void 0===e?void 0:e.userdata})}))(Object(r.withRouter)(bT)),yT=ku.a.Option,wT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).getSalesPdf=function(){n.setState({pdfLoading:!0}),iE(n.props.proposal.id).then((function(e){var a=new Blob([e.data],{type:"application/pdf"}),t=URL.createObjectURL(a);n.setState({fileURL:t,pdfLoading:!1},(function(){n.props.fetchProposal(),window.open(n.state.fileURL,"_blank")}))})).catch((function(e){td(e)}))},n.handleGoogleBtnClick=function(){pd({redirect_url:window.location.href}).then((function(e){window.location.href=e.data.url}))},n.handleChange=function(e){var a=n.props.userdata;"send_pdf"===e?(null===a||void 0===a?void 0:a.google_authorised_email)?n.props.callbackSendProposal():n.setState({googleModalVisible:!0}):n.props.onTabChange("5"),n.setState({pdfValue:"select"})},n.state={fileURL:null,pdfValue:"select",pdfLoading:!1,googleModalVisible:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i=this,r=this.props,s=r.proposal,o=r.statusTypes,m=(r.user,r.proposal_filled),d=this.state.googleModalVisible;return l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Associated Opportunity / project"),l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.leads_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,null===(e=s.opportunity)||void 0===e?void 0:e.name),l.a.createElement("p",{className:"mb-0"},null===(a=s.opportunity)||void 0===a||null===(t=a.status)||void 0===t?void 0:t.title))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Actions"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(ku.a,{dropdownClassName:"pdf-select-view",suffixIcon:l.a.createElement(wO.a,null),className:"select-pdf-options",placeholder:"Select",defaultValue:"select",onChange:this.handleChange,disabled:m,value:this.state.pdfValue},l.a.createElement(yT,{value:"send_pdf"},"Generate and Send Proposal PDF",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD"}},"Generate and send an up to date proposal pdf")),l.a.createElement(yT,{value:"view_pdf"},"View Proposal PDF",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD"}},"View all proposal PDFs and other documents uploaded"))),l.a.createElement("span",{className:"pdf-icon-tg position-absolute"},l.a.createElement("img",{alt:"",src:Rm.pdf_icon_light_green,className:"img-fluid"})))),this.state.pdfLoading&&l.a.createElement("p",null,"Loading..."))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Proposal Id"),l.a.createElement("h5",{className:"mb-0"},s.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Proposal Name"),l.a.createElement("h5",{className:"mb-0",style:{fontWeight:700}},s.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"PROPOSAL DATES"),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Create"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(s.creation_date))),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Due"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(s.due_date))),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Response"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(s.response_date)))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"START AND END DATES"),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Start"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(s.project_start_date))),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"End"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(s.project_end_date)))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"STATUS"),l.a.createElement(ku.a,{labelInValue:!0,className:"status-small-select",placeholder:"Select",defaultValue:{value:null===(n=s.status)||void 0===n?void 0:n.id,label:null===(c=s.status)||void 0===c?void 0:c.title},style:{width:"100%",textAlign:"center"},onChange:this.props.handleChange,suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},null===o||void 0===o?void 0:o.map((function(e){return l.a.createElement("option",{value:e.id},l.a.createElement("div",{className:"text-capitalise"},e.title))})))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated Revenue"),l.a.createElement("h5",{className:"mb-0"},"".concat(s.estimated_revenue?"$".concat(s.estimated_revenue):"-")))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"text-uppercase"},"PROPOSAL DESCRIPTION"),l.a.createElement("h5",{className:"mb-0"},s.description)))),l.a.createElement(iv,{heading:"You need to sign in with Google to move forward. Would you like to sign in?",subHeadingUOM:"If you would like to sign in with Google, you would be redirected to Google's sign in page. After signing in, you would be brought back to the dashboard.",handleGoogleBtnClick:function(){i.handleGoogleBtnClick()},visible:d,onClose:function(){i.setState({googleModalVisible:!1})},googleSigninModal:!0}))}}]),t}(n.Component),_T=Object(Lm.b)((function(e){return e}),null)(wT),ST=fu.a.Panel,xT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[]},e.fetchSiteOwnerContact=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.proposal=e.props.match.params.id,aE(a).then((function(a){e.setState({data:a.data.results})})).catch((function(e){console.log(e)}))},e.handleChangeTab=function(){e.props.onChange("2")},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchSiteOwnerContact()}},{key:"render",value:function(){var e=this,a=this.state.data,t=this.props.viewAll;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.viewAll?"":"sales-site-design-fix")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"mt-30 border-1 d-none")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"}),t&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),(null===a||void 0===a?void 0:a.length)>0?l.a.createElement(l.a.Fragment,null,a.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],className:"site-owner-collapse-main"},l.a.createElement(ST,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-8 col-sm-8 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Account")))),l.a.createElement("div",{className:"col-4 col-sm-4 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.contact.length," Contacts")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.site.length," Sites"))))),key:"1",forceRender:!0},l.a.createElement(jf,{data:e}))))}))):l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Site Manager Accounts"))))))}}]),t}(n.Component),CT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.contacts;return l.a.createElement(l.a.Fragment,null,e.length>0?l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"small-heading-contact mb-0"},"Contacts")),e.map((function(e,a){var t,n,c,i,r,s,o;return l.a.createElement("div",{key:a,className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2 ".concat(e.default_customer_recipient?"active":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat((null===(t=e.contact)||void 0===t?void 0:t.first_name)||""," ").concat((null===(n=e.contact)||void 0===n?void 0:n.last_name)||""),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},(null===(c=e.contact)||void 0===c?void 0:c.role)||"")),l.a.createElement("p",{className:"mb-0"},(null===(i=e.contact)||void 0===i?void 0:i.default_email)&&"".concat(null===(r=e.contact.default_email)||void 0===r?void 0:r.email,",")," ",null===(s=e.contact)||void 0===s||null===(o=s.default_phone)||void 0===o?void 0:o.phone_number),e.default_customer_recipient&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Proposal Recipient")))))}))):l.a.createElement("div",{className:"col-12 pt-3"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Contacts")))))}}]),t}(n.Component),OT=fu.a.Panel,kT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[]},e.fetchCustomerAccount=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.proposal=e.props.match.params.id,Hf(a).then((function(a){e.setState({data:a.data.results})})).catch((function(e){console.log(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchCustomerAccount()}},{key:"render",value:function(){var e=this,a=this.state.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"sales-site-design-fix no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"mt-30 border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(a){return e.fetchSiteOwnerContact({search:a.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("3")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement(l.a.Fragment,null,a.length>0?l.a.createElement(l.a.Fragment,null,a.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{defaultActiveKey:["1"],className:"site-owner-collapse-main"},l.a.createElement(OT,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative h-auto"},l.a.createElement("div",{className:"col-9 col-sm-9 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Account")))),l.a.createElement("div",{className:"col-3 col-sm-3 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{style:{color:"#4F4F4F"}},e.contact.length," Contacts"))))),key:"1",forceRender:!0},l.a.createElement(CT,{contacts:e.contact}))))}))):l.a.createElement("div",{className:"col-12 ".concat(this.props.hideTitle?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Billing Accounts"))))))))}}]),t}(n.Component),jT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.docsColumns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.proposal=e.props.match.params.id,Yf(a).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("proposal",e.props.match.params.id),n.append("document",t),Wf(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c;(null===(t=e.proposal)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)!=(null===(l=this.props.proposal)||void 0===l||null===(c=l.documents)||void 0===c?void 0:c.length)&&this.fetchFiles()}},{key:"render",value:function(){var e=this,a=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.hideTitle?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse ml-2 text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("5")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},a.length>0?l.a.createElement(fv.a,{pagination:!1,onRow:function(e,a){return{onClick:function(a){window.open(e.document,"_blank")}}},className:"main-table-all carpet-cleaning-table border-0",columns:this.docsColumns,dataSource:a,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),IT=Object(r.withRouter)(jT),AT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).getSelectedServiceVariants=function(){var e=n.props.proposal;sE({proposal:null===e||void 0===e?void 0:e.id}).then((function(e){console.log(e.data,"getting"),n.setState({newPricing:e.data})})).catch((function(e){td(e)}))},n.getUnitName=function(){n.setState({fetching:!0}),Rg().then((function(e){n.setState({allOptions:e.data})})).catch((function(e){td(e)})).finally((function(){n.setState({fetching:!1})}))},n.getTotalCost=function(e){var a=n.state.newPricing||[],t=0;return a.forEach((function(a){if(null===a||void 0===a?void 0:a.manually_added){var n=(parseInt(a.proposal_qty)||1)*parseFloat(a.kit_pricing_value||a.item_pricing_value||0);t+=e?(null===a||void 0===a?void 0:a.include_subtotal)?n:0:(null===a||void 0===a?void 0:a.include_subtotal)&&(null===a||void 0===a?void 0:a.taxable)?n:0}else{var l="c"==a.selectedUnit?a.hourly_price:"a"==a.selectedUnit?a.price:a.daily_price,c=(parseInt(a.proposal_qty)||1)*parseFloat(l||0);t+=e?(null===a||void 0===a?void 0:a.include_subtotal)?c:0:(null===a||void 0===a?void 0:a.include_subtotal)&&(null===a||void 0===a?void 0:a.taxable)?c:0}})),t},n.getResourcePricingCost=function(){var e=n.props.proposal.line_item,a=0;return e.forEach((function(e){var t=parseInt(e.proposal_qty)||1;if(e.table_data){var n,l=0,c=0,i=Object(qD.a)(e.table_data.entries());try{for(i.s();!(n=i.n()).done;){var r=Object(yp.a)(n.value,2),s=r[0],o=r[1];if(console.log(o,"item"),"FLEET_GROUP"==o.item_type)a+=Id(o.data)*t;else if("labor_child"==o.item_type){var m=o.hours||1;l+=parseInt(o.hours)||1,c+=Td(o.data,o.time,o.name)*m||0,"labor_child"!=e.table_data[s+1].item_type&&(a+=c/l)}else if("SUPPLY_GROUP"==o.item_type)a+=Ad(o.data)*t||0;else if("INVENTORY_ITEM"==o.item_type){var d,u;console.log("inventory",(null===o||void 0===o?void 0:o.kit_child)?parseInt(o.unit_cost):parseInt(null===(d=o.data)||void 0===d?void 0:d.unit_cost)),a+=((null===o||void 0===o?void 0:o.kit_child)?parseInt(o.unit_cost):parseInt(null===(u=o.data)||void 0===u?void 0:u.unit_cost))*t||0}else if("DISPOSAL"==o.item_type){var p;a+=parseInt(null===(p=o.data)||void 0===p?void 0:p.unit_cost)*t||0}}}catch(v){i.e(v)}finally{i.f()}}else a+=parseInt(e.unit_cost)*t})),a},n.calculatedEstimatedTotal=function(){var e=n.calculatedEstimatedTaxes();return(Number(e)+Number(n.getTotalCost(!0))).toFixed(2)},n.calculatedEstimatedTaxes=function(){return(8.875*n.getTotalCost()/100).toFixed(2)},n.calculatedProfitMargin=function(){var e=n.getTotalCost(!0),a=n.getResourcePricingCost();return((e-a)/a*100).toFixed()},n.fetchRegion=function(){ZE().then((function(e){n.setState({regions:e.data.results})})).catch((function(e){td(e)}))},n.state={allOptions:[],newPricing:[],regions:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getUnitName(),this.fetchRegion(),this.getSelectedServiceVariants()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d,u,p,v=this,h=this.props,f=h.viewAll,E=h.proposal,g=this.state,b=g.newPricing;g.regions;return l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"mt-30")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"border-1 d-none")},f&&l.a.createElement(Vm.a,{onClick:function(){return v.props.onTabChange("4")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),b.length>0?l.a.createElement("div",{className:"col-12 mt-3 table-responsive main-table-div position-relative wage-table view-proposal-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Taxable")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Include",l.a.createElement("br",null),"In Subtotal")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Total Price")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Document"))),l.a.createElement("div",{className:"row"},null===b||void 0===b?void 0:b.map((function(e){var a,t;return l.a.createElement(zD,{allOptions:v.state.allOptions,margin:null===e||void 0===e?void 0:e.margin,newPricing:e,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),view:!0,removeThreeDots:!0,foundRegion:null===(t=e.variant_data)||void 0===t?void 0:t.region})})))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row mx-0 border-0 bg-white no-data-card-row align-items-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1"},"No Service Variants")))),l.a.createElement("div",{className:"row ".concat(f?"":"custom-row-space")},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row line-items-row-main"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Cost Setting")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},(null===(e=$D.find((function(e){return(null===E||void 0===E?void 0:E.cost_setting)===e.value})))||void 0===e?void 0:e.name)||"Standard"))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Tax Basis")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},(null===E||void 0===E||null===(a=E.tax_basis)||void 0===a?void 0:a.name)||"-"))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Payment Terms")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},(null===(t=QD.find((function(e){return e.value===(null===E||void 0===E?void 0:E.payment_terms)})))||void 0===t?void 0:t.name)||"30 Days"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Deposit")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"YES"===(null===E||void 0===E?void 0:E.deposit)?"Yes":"NO"===(null===E||void 0===E?void 0:E.deposit)?"No":"-")))),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1"},l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("span",{className:"sub-total-text"},"Estimated Total Price Pre-tax:")),l.a.createElement("div",{className:"col-4 text-md-right"},l.a.createElement("span",{className:"sub-total-text gray-1"},"LUMP_SUM"==(null===E||void 0===E?void 0:E.cost_setting)||"LUMP_SUM_WITH_UOM_AND_QTY"==(null===E||void 0===E?void 0:E.cost_setting)?l.a.createElement(l.a.Fragment,null,"$",gd(null===E||void 0===E?void 0:E.estimated_total_price_pre_tax)):l.a.createElement(l.a.Fragment,null,"$",gd(null===E||void 0===E?void 0:E.estimated_total_price_pre))))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text"},"Estimated Taxes:")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("small",null,0!=(null===E||void 0===E||null===(n=E.tax_basis)||void 0===n?void 0:n.percentage)?null===E||void 0===E||null===(c=E.tax_basis)||void 0===c?void 0:c.percentage:"-","%")),l.a.createElement("li",{className:"list-inline-item"},"|"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"sub-total-text gray-1"},"$",gd(null===E||void 0===E?void 0:E.estimated_taxes)||0))))),l.a.createElement("div",{className:"".concat("TOTAL_PRICE_PER_UNIT"==(null===E||void 0===E?void 0:E.cost_setting)&&"normal-text"," row estimated-total-row-3 estimated-total-row")},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text-main"},"Estimated Total:")),l.a.createElement("div",{className:"col-5 text-md-right"},("LUMP_SUM"==(null===E||void 0===E?void 0:E.cost_setting)||"LUMP_SUM_WITH_UOM_AND_QTY"==(null===E||void 0===E?void 0:E.cost_setting))&&l.a.createElement("span",{className:"sub-total-text cut-text mr-2"},"$",null===E||void 0===E?void 0:E.standard_estimated_total),l.a.createElement("span",{className:"sub-total-text-main"},"$",null===(i=gd(null===E||void 0===E?void 0:E.estimated_total))||void 0===i?void 0:i.toLocaleString()))),l.a.createElement("div",{className:"row estimated-total-row-2 pt-1 pb-0 estimated-total-row"}),"TOTAL_PRICE_PER_UNIT"===(null===E||void 0===E?void 0:E.cost_setting)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row estimated-total-row-2 pt-1 pb-0 estimated-total-row align-items-center"},l.a.createElement("div",{className:"col-5"},l.a.createElement("span",{className:"sub-total-text"},"Total Unit:")),l.a.createElement("div",{className:"col-7 text-md-right value-div-inner"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Pm.a,{disabled:!0,placeholder:(null===E||void 0===E?void 0:E.proposal_uom)?"".concat(null===E||void 0===E||null===(r=E.proposal_uom)||void 0===r?void 0:r.name," (").concat(null===E||void 0===E||null===(s=E.proposal_uom)||void 0===s?void 0:s.symbol,")"):"Select"})),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(ap.a,{disabled:!0,value:(null===E||void 0===E?void 0:E.total_units)||0}))))),l.a.createElement("div",{className:"row estimated-total-row-2 pt-3 pb-0 estimated-total-row"},l.a.createElement("div",{className:"col-5"},l.a.createElement("span",{className:"sub-total-text-main"},"Price Per Unit:")),l.a.createElement("div",{className:"col-7 text-md-right"},l.a.createElement("span",{className:"sub-total-text-main"},"$ ",gd(null===E||void 0===E?void 0:E.price_per_unit),(null===E||void 0===E?void 0:E.proposal_uom)&&" / ".concat(null===E||void 0===E||null===(o=E.proposal_uom)||void 0===o?void 0:o.symbol," "))))),l.a.createElement("div",{className:"row estimated-total-row-4 estimated-total-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("small",{className:"small-text-main position-relative small-text-main-2"},"Taxes are calculated by customer\u2019s billing address"))))))),l.a.createElement("div",{className:"row bullet-point-row ".concat(f?"":"custom-row-space")},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-1"},l.a.createElement("span",{className:"sub-total-text"},"Qualifiers")),null===E||void 0===E||null===(m=E.qualifiers)||void 0===m||null===(d=m.split("^"))||void 0===d?void 0:d.map((function(e){return l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"<br>"!=e?("\u2022 "+e).replace(/\&nbsp;/g,""):""))})))),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-1"},l.a.createElement("span",{className:"sub-total-text"},"Comments")),null===E||void 0===E||null===(u=E.comments)||void 0===u||null===(p=u.split("^"))||void 0===p?void 0:p.map((function(e){return l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"<br>"!=e?("\u2022 "+e).replace(/\&nbsp;/g,""):""))}))))))}}]),t}(n.Component),DT={labelCol:{span:24},wrapperCol:{span:24}},TT=Pm.a.TextArea,RT=ku.a.Option,MT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={assignees:[],fetching:!1,selectedData:null,warningVisible:!1},e.formRef=l.a.createRef(),e.handleChange=function(a){e.setState({selectedData:e.state.assignees.find((function(e){return e.id===a}))})},e.showWarningM=function(a){e.setState({warningVisible:a})},e.fetchUser=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ud("salesperson",a).then((function(a){e.setState({assignees:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSubmit=function(a){a.proposal=e.props.match.params.id,a.due_date&&(a.due_date=hd()(a.due_date).format("YYYY-MM-DD")),e.props.data?Gf(e.props.data.id,a).then((function(a){Mm.b.success("Post Updated Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Kf(a).then((function(a){Mm.b.success("Post Created Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.populateData=Object(Qm.a)($m.a.mark((function a(){var t,n;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.props.data){a.next=5;break}return a.next=3,e.fetchUser();case 3:e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.data),{},{assignee:null===(t=e.props.data)||void 0===t||null===(n=t.assignee)||void 0===n?void 0:n.id,due_date:e.props.data.due_date?hd()(e.props.data.due_date):null})),e.setState({selectedData:e.props.data.assignee});case 5:case"end":return a.stop()}}),a)}))),e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.assignees,c=a.selectedData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,destroyOnClose:!0,title:"Post",maskClosable:!1,visible:this.props.visible,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",onClose:function(){e.showWarningM(!0)},placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningM(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.formRef.current.submit()},type:"primary"},this.props.data?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},DT,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Post Name*")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Post Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"post_type",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Type"))},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Type"},l.a.createElement(RT,{value:"NOTE"},"Note"),l.a.createElement(RT,{value:"TASK"},"Task")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"assignee",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Assignee")),className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Search Assignee",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchUser()},onSearch:function(a){return e.fetchUser({search:a})},onChange:this.handleChange,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},n.map((function(e){return l.a.createElement(RT,{key:e.id,value:e.id},"".concat(e.first_name," ").concat(e.last_name))}))))),c&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(null===c||void 0===c?void 0:c.first_name,null===c||void 0===c?void 0:c.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(c.first_name," ").concat(c.last_name)),l.a.createElement("p",{className:"mb-0"},c.role.split("_").join(" ")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"due_date",label:"Due Date"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"priority",label:"Priority"},l.a.createElement(ku.a,{placeholder:"Select Priority"},l.a.createElement(RT,{value:"NORMAL"},l.a.createElement("span",{style:{backgroundColor:"#fcd966"},className:"status-tag"}),"Normal"),l.a.createElement(RT,{value:"HIGH"},l.a.createElement("span",{style:{backgroundColor:"#eb8357"},className:"status-tag"}),"High"),l.a.createElement(RT,{value:"LOW"},l.a.createElement("span",{style:{backgroundColor:"#7fd4ba"},className:"status-tag"}),"Low")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Description"))},l.a.createElement(TT,{className:"text-area-main text-area-task",placeholder:"Enter Description"})))))))),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningM(!1)},heading:"Are you sure you want to exit editing this Post?",handlePostDrawer:!0,closePostDrawer:this.props.onClose}))}}]),t}(n.Component),FT=Object(r.withRouter)(MT),PT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={posts:[],drawerData:null,loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.getPostDateColor=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?"gray":n.isSame(a,"day")?"#F2994A":n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0:"gray"},e.getPostDateText=function(e){var a=e.due_date,t=e.completed;console.log(t);var n=new hd.a;return a?t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MMMM D, YYYY"):"No Due Date"},e.fetchPosts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.proposal=e.props.match.params.id,zf(Object(wu.a)({},a)).then((function(t){e.setState({posts:e.props.viewAll?t.data.results.slice(0,10):t.data.results,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.viewAll?10:t.data.count})})})).catch((function(e){td(e)}))},e.showPostDrawer=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visibleDrawer:a,drawerData:t})},e.onSearch=function(a){e.fetchPosts({search:a.target.value})},e.changePostStatus=function(a,t){var n=e.state.posts;Gf(a.id,{completed:t}).then((function(l){var c=n.findIndex((function(e){return e.id===a.id}));n[c].completed=t,e.setState({posts:n}),Mm.b.success("Updated post status")}))},e.handleChange=function(a){e.fetchPosts({page:a.current})},e.postColumns=[{title:"NAME",sorter:!0,render:function(a){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{checked:a.completed,onChange:function(){return e.changePostStatus(a,!a.completed)},onClick:function(e){return e.stopPropagation()},className:"post-checkbox-opacity"},a.name))}},{title:"TYPE",dataIndex:"post_type",sorter:!0,render:function(e){return l.a.createElement("div",{className:"text-capitalize"},(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"PRIORITY",dataIndex:"priority",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"Assignee",dataIndex:"assignee",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},(null===e||void 0===e?void 0:e.first_name)?l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name)):" ","".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"-"))}},{title:"Post Source",dataIndex:"post_source",sorter:!0,render:function(){return l.a.createElement("div",{className:"d-flex align-items-center"},"Proposal")}},{title:l.a.createElement("div",{className:"position-relative"},"Due Date"),sorter:!0,render:function(a){return l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:e.getPostDateColor(a)}},e.getPostDateText(a))}}],e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){var e=this,a=this.state,t=a.posts,n=a.drawerData,c=this.props.viewAll;return l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header border-1 ".concat(this.props.viewAll?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement(Vm.a,{onClick:function(){return e.showPostDrawer(!0)},className:"add-btn-collapse ml-2 text-capitalize"},"+ Create")),c&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("6")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row"},t.length>0?l.a.createElement("div",{className:"col-12 p-0 table-responsive main-table-div mb-3 post-table"},l.a.createElement(fv.a,{onRow:function(a,t){return{onClick:function(t){e.showPostDrawer(!0,a)}}},className:"main-table-all",columns:this.postColumns,pagination:!this.props.viewAll&&this.state.pagination,onChange:this.handleChange,dataSource:this.state.posts,size:"middle",rowClassName:function(e){if(e.completed)return"post-opacity"}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-3 no-data-card-row border-0 bg-transparent align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer",onClick:function(){return e.showPostDrawer(!0)}},l.a.createElement("img",{src:Rm.note_add_new_create_icon,className:"img-fluid",alt:"search icon"}),l.a.createElement("h6",{className:"mb-0 text-green-tag"},"Create Post"))))),l.a.createElement(FT,{data:n,visible:this.state.visibleDrawer,onSuccess:Object(Qm.a)($m.a.mark((function a(){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.showPostDrawer(!1);case 2:return a.next=4,e.fetchPosts();case 4:case"end":return a.stop()}}),a)}))),onClose:function(){return e.showPostDrawer(!1)}}))}}]),t}(n.Component),VT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i=this,r=this.props.proposal;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row summary-info-cr"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES MANAGERS")),(null===r||void 0===r||null===(e=r.sales_manager)||void 0===e?void 0:e.length)>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},null===r||void 0===r?void 0:r.sales_manager.map((function(e){return l.a.createElement("div",{key:e.id,style:{minHeight:"76px",height:"76px"},className:"".concat(e.id===i.props.proposal.point_proposal&&"active"," row mx-0 teams-view align-items-center user-info-div-main opportunity-info-div-main")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},"Sales Manager"),e.id===i.props.proposal.point_proposal&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact"))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES ASSISTANTS")),(null===r||void 0===r||null===(a=r.sales_assistant)||void 0===a?void 0:a.length)>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},null===r||void 0===r||null===(t=r.sales_assistant)||void 0===t?void 0:t.map((function(e){return l.a.createElement("div",{key:e.id,style:{minHeight:"76px",height:"76px"},className:"".concat(e.id===i.props.proposal.point_proposal&&"active"," row mx-0 teams-view align-items-center user-info-div-main opportunity-info-div-main")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},"Sales Assistant"),e.id===i.props.proposal.point_proposal&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact"))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES PEOPLE")),(null===r||void 0===r||null===(n=r.sales_person)||void 0===n?void 0:n.length)>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},null===r||void 0===r||null===(c=r.sales_person)||void 0===c?void 0:c.map((function(e){return l.a.createElement("div",{key:e.id,style:{minHeight:"76px",height:"76px"},className:"".concat(e.id===i.props.proposal.point_proposal&&"active"," row mx-0 teams-view align-items-center user-info-div-main opportunity-info-div-main")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},"Salesperson"),e.id===i.props.proposal.point_proposal&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact"))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople"))))))))))}}]),t}(n.Component),qT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={dataActivity:[],loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.activityColumns=[{title:"Date",dataIndex:"date",sorter:!0,render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD, YYYY hh:mm A"))}},{title:"Action",dataIndex:"action",sorter:!0},{title:"EMPLOYEE",dataIndex:"user",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},e.split(" ")[0].split("")[0],e.split(" ")[1].split("")[0]),e)}}],e.activityData=[{key:"1",activity_date:"a",action:"b",employee:"c"}],e.fetchActivity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),tE(e.props.match.params.id).then((function(t){e.setState({dataActivity:e.props.viewAll?t.data.data.slice(0,10):t.data.data,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.viewAll?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).forEach((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){e.setState({loading:!1})}))},e.handleChange=function(a){e.fetchActivity({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchActivity()}},{key:"render",value:function(){var e=this,a=this.state,t=a.dataActivity,n=a.loading,c=this.props.viewAll;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 ".concat(c?"":"mt-30")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header border-1 ".concat(c?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),c&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("7")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},t.length>0?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",scroll:{y:240},columns:this.activityColumns,dataSource:t,size:"middle",pagination:!this.props.viewAll&&this.state.pagination,onChange:this.handleChange,loading:n}))):l.a.createElement("div",{className:"row mx-0 mt-3 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.Time_empty_state_icon,className:"img-fluid",alt:"search icon"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Activity"))))))))}}]),t}(n.Component),LT=Object(r.withRouter)(qT),UT=fu.a.Panel;function BT(e,a){return e===a?"active":e>a?"finish":void 0}var WT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[],loading:!1,pagination:{current:1,pageSize:15},visible:!1,visibleDrawer:!1},e.handleChange=function(a){Lf(e.props.match.params.id,{status:a.value}).then((function(a){e.props.fetchProposal()})).catch((function(e){td(e)}))},e.showSendProposal=function(a){e.setState({visible:a})},e.getProposalStatusOptions=function(){nE().then((function(a){e.setState({statusTypes:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getProposalStatusOptions()}},{key:"render",value:function(){var e=this,a=this.props,t=(a.sites,a.proposal),n=a.onTabChange,c=a.proposal_filled,i=this.state.statusTypes;if(!t)return l.a.createElement("div",{className:"text-center my-2"},l.a.createElement(Wv.a,null));var r=null===i||void 0===i?void 0:i.findIndex((function(e){var a;return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t||null===(a=t.status)||void 0===a?void 0:a.id)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-row-main",style:{marginBottom:"80px"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-status-green-line-main"},null===i||void 0===i?void 0:i.map((function(e,a){return l.a.createElement(gE.a,{placement:"top",title:null===e||void 0===e?void 0:e.title,overlayStyle:{fontSize:11},arrowPointAtCenter:!0},l.a.createElement("div",{key:a,className:"summary-line-main text-uppercase position-relative p-0 d-flex align-items-center justify-content-center "+BT(r,a)},"finish"===BT(r,a)?l.a.createElement(EE.a,null):null===e||void 0===e?void 0:e.title))}))))),l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(UT,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.sales.proposal.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"1"},l.a.createElement(_T,{proposal:t,handleChange:this.handleChange,onTabChange:this.props.onTabChange,fetchProposal:this.props.fetchProposal,proposal_filled:c,statusTypes:i,callbackSendProposal:function(){return e.showSendProposal(!0)}})),l.a.createElement(UT,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Posts")),key:"7"},l.a.createElement(PT,Object.assign({onTabChange:n,viewAll:!0},this.props))),l.a.createElement(UT,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Activity")),key:"8"},l.a.createElement(LT,{onTabChange:n,viewAll:!0})),l.a.createElement(UT,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Team *"),l.a.createElement("div",{className:"d-flex align-items-center"},ru(t,"TEAMS")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.sales.proposal.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"2",forceRender:!0},l.a.createElement(VT,Object.assign({proposal:t},this.props))),l.a.createElement(UT,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Billing Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},ru(t,"CUSTOMER")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.sales.proposal.edit,{id:e.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"3"},l.a.createElement(kT,Object.assign({onTabChange:n,hideTitle:!0},this.props))),l.a.createElement(UT,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Site Manager Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},ru(t,"OWNER")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.sales.proposal.edit,{id:e.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"4"},l.a.createElement(xT,Object.assign({onTabChange:n,viewAll:!0},this.props))),l.a.createElement(UT,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Service Variants",l.a.createElement("sup",null,"*")),l.a.createElement("div",{className:"d-flex align-items-center"},ru(t,"SERVICE_VARIENT")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.sales.proposal.edit,{id:e.props.match.params.id}),editTab:"5"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"5"},l.a.createElement(AT,{onTabChange:n,proposal:t,viewAll:!0})),l.a.createElement(UT,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents")),key:"6"},l.a.createElement(IT,{proposal:t,onTabChange:n,hideTitle:!0})))))),l.a.createElement(NT,{proposal:t,visible:this.state.visible,onClose:function(){return e.showSendProposal(!1)}}))}}]),t}(n.Component),YT={setBreadcrumb:Uv},KT=Object(Lm.b)(null,YT)(Object(r.withRouter)(WT)),GT=vf.a.TabPane,zT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={proposal:null,sites:[],active:"1",proposalContacts:[],proposal_filled:!0},e.fetchProposal=function(){Bf(e.props.match.params.id).then((function(a){var t=[{title:"Proposals",url:zm.dashboard.sales.proposal.self},{title:a.data.name,url:""}];e.props.setBreadcrumb(t),e.setState({proposal:a.data,proposal_filled:zd(a.data)}),a.data.site&&hp({account:a.data.site.id}).then((function(a){e.setState({sites:a.data.results})}))})).catch((function(e){td(e)}))},e.onTabChange=function(a){e.setState({active:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchProposal()}},{key:"render",value:function(){var e=this,a=this.state,t=a.proposal,n=a.sites,c=a.proposal_filled;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},c&&l.a.createElement("div",{className:"row mx-0 info-gray-div info-red-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please complete all required information to view and send the proposal PDF.")),l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",onChange:this.onTabChange,activeKey:this.state.active},l.a.createElement(GT,{tab:"Summary",key:"1"},l.a.createElement(KT,{proposal_filled:c,onTabChange:this.onTabChange,onChange:function(a){return e.onChange(a)},sites:n,proposal:t,fetchProposal:this.fetchProposal})),l.a.createElement(GT,{tab:"Posts",key:"6"},l.a.createElement(PT,this.props)),l.a.createElement(GT,{tab:"Activity",key:"7"},l.a.createElement(LT,null)),l.a.createElement(GT,{tab:"Site Manager Account",key:"2"},l.a.createElement(xT,this.props)),l.a.createElement(GT,{tab:"Billing Accounts",key:"3"},l.a.createElement(kT,Object.assign({},this.props,{proposal:t}))),l.a.createElement(GT,{className:"custom-tab-pane",tab:"Service Variants",key:"4"},l.a.createElement(AT,{proposal:t})),l.a.createElement(GT,{tab:"Documents",key:"5"},l.a.createElement(IT,null))))))}}]),t}(n.Component),HT={setBreadcrumb:Uv},$T=Object(Lm.b)(null,HT)(Object(r.withRouter)(zT)),QT=vf.a.TabPane;var JT=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={packages:[],disposals:[],key:"1",loading:!1,pagination:{current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},dateFilter:{start:"",end:"",start_modified:"",end_modified:""}},e.columns=[{title:"Disposal Family Name",dataIndex:"name",sorter:!0,key:"name"},{title:"Disposal Items",dataIndex:"parent",render:function(e){return l.a.createElement("div",null,e&&e.children.length||"0")},sorter:!0}],e.disposalColumns=[{title:"Disposal ID",dataIndex:"id",sorter:!0,key:"id"},{title:"Disposal Code",dataIndex:"disposal_code",sorter:!0,key:"disposal_code",render:function(e){return l.a.createElement("div",null,e||"-")}},{title:"Disposal Name",sorter:!0,key:"name",render:function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.name),Gd(e)&&l.a.createElement("p",{className:"red-text-disposal"},"Please complete all required information to avoid issues"))}},{title:"Disposal Family / Tier",render:function(e){return l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:e.name},l.a.createElement(qm.a,null,e.name)))}},{title:"Cost",sorter:!0,key:"cost",render:function(e){var a,t;return l.a.createElement("div",null,"$",(null===e||void 0===e?void 0:e.unit_cost)||0,(null===e||void 0===e||null===(a=e.uom)||void 0===a?void 0:a.symbol)&&"/",null===e||void 0===e||null===(t=e.uom)||void 0===t?void 0:t.symbol)}},{title:"Quantity per Warehouse",sorter:!1,render:function(e){var a,t,n,c,i,r,s,o,m,d,u,p,v,h,f;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"mb-0 list-inline qty-location-ul"},l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(a=e.internal_location[0])||void 0===a||null===(t=a.internal_location)||void 0===t?void 0:t.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(n=e.internal_location[0])||void 0===n?void 0:n.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location[0])&&(null===e||void 0===e||null===(c=e.internal_location[0])||void 0===c?void 0:c.qty)&&(null===e||void 0===e||null===(i=e.disposal_uom)||void 0===i?void 0:i.symbol))),l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(r=e.internal_location[1])||void 0===r||null===(s=r.internal_location)||void 0===s?void 0:s.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(o=e.internal_location[1])||void 0===o?void 0:o.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location[1])&&(null===e||void 0===e||null===(m=e.internal_location[1])||void 0===m?void 0:m.qty)&&(null===e||void 0===e||null===(d=e.disposal_uom)||void 0===d?void 0:d.symbol))),l.a.createElement("li",null,l.a.createElement("strong",null,(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(u=e.internal_location[2])||void 0===u||null===(p=u.internal_location)||void 0===p?void 0:p.name)||"-"),l.a.createElement("span",{className:"font-weight-normal"},(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(v=e.internal_location[2])||void 0===v?void 0:v.qty)||"-"," ",(null===e||void 0===e?void 0:e.internal_location[2])&&(null===e||void 0===e||null===(h=e.internal_location[2])||void 0===h?void 0:h.qty)&&(null===e||void 0===e||null===(f=e.disposal_uom)||void 0===f?void 0:f.symbol))))))}}],e.fetchAllFamily=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;a.ordering||(a.ordering="name"),e.setState({loading:!0}),_g(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({packages:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllDisposals=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.dateFilter;e.setState({loading:!0}),a.ordering||(a.ordering="name"),a.tier_type="DISPOSAL",Cg(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({disposals:t.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e})),pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.onSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllFamily()}))},e.onGroupSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchAllDisposals()}))},e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllFamily(c)},e.handleTableChangeDisposal=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.fetchAllDisposals(c)},e.tabChange=function(a){e.setState({key:a,search:"",dateFilter:{start:"",end:"",start_modified:"",end_modified:""},pagination:{current:1,pageSize:15}},(function(){switch(a){case"1":var t=[{title:"Disposal",url:zm.dashboard.management.disposal.self},{title:"Disposal Families",url:zm.dashboard.management.disposal.self}];return e.props.setBreadcrumb(t),void e.fetchAllFamily();case"2":var n=[{title:"Disposal",url:zm.dashboard.management.disposal.self},{title:"Disposal",url:zm.dashboard.management.disposal.self}];return e.props.setBreadcrumb(n),void e.fetchAllDisposals()}}))},e.getLocaleData=function(e){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.no_disposal_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 no-data-main-tg"},e?"No Disposal":"No Disposal Families"))))},e.handleFilterFamily=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllFamily()})):e.setState({dateFilter:null},(function(){e.fetchAllFamily()}))},e.handleFilterDisposal=function(a){a?e.setState({dateFilter:Object(wu.a)(Object(wu.a)({},e.state.dateFilter),a)},(function(){e.fetchAllDisposals()})):e.setState({dateFilter:null},(function(){e.fetchAllDisposals()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[{title:"Disposal",url:zm.dashboard.management.disposal.self},{title:"Disposal Families",url:zm.dashboard.management.disposal.self}];this.props.setBreadcrumb(e),this.fetchAllFamily(),this.tabChange(Md())}},{key:"render",value:function(){var e=this,a=this.state,t=a.packages,n=a.loading,c=a.pagination,i=a.disposals;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement(vf.a,{onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",activeKey:this.state.key},l.a.createElement(QT,{tab:"Disposal Families",key:"1"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.disposal.family.create,buttonName:"+ Create Disposal Family",onSearch:lu(this.onSearch,1e3),fetchData:function(a){return e.handleFilterFamily(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-family-table"},l.a.createElement(UN,{data:t,loading:n,pagination:c,onTableChange:this.handleTableChange,rowLink:zm.dashboard.management.disposal.family.view,columns:this.columns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData()}}))))),l.a.createElement(QT,{tab:"Disposal",key:"2"},l.a.createElement(cb,{buttonLink:zm.dashboard.management.disposal.items.create,buttonName:"+ Create Disposal",onSearch:lu(this.onGroupSearch,1e3),fetchData:function(a){return e.handleFilterDisposal(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row vehicle-table-text-center width-160-id"},l.a.createElement(UN,{checkDisposalRequired:!0,data:i,loading:n,pagination:c,onTableChange:this.handleTableChangeDisposal,rowLink:zm.dashboard.management.disposal.items.view,columns:this.disposalColumns,locale:n?{emptyText:" "}:{emptyText:this.getLocaleData(!0)}}))))))))}}]),t}(n.Component),ZT=Object(Lm.b)(null,{setBreadcrumb:Uv})(JT),XT={labelCol:{span:24},wrapperCol:{span:24}},eR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).setFieldData=function(e){n.formRef.current.setFieldsValue({name:e.name,description:e.description})},n.handleSubmit=function(e){var a;n.setState({buttonLoading:!0}),n.props.packageData?xg(n.props.packageData.id,e).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Disposal Family updated successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})})):(a=e,od(ad("disposal.family"),a)).then((function(e){n.props.setPackage(e.data,2),Mm.b.success("Disposal Family created successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({buttonLoading:!1})}))},n.formRef=l.a.createRef(),n.state={buttonLoading:!1},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData&&this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},XT,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input disposal family name and description here."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Disposal Family Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Disposal Family Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",rules:[{required:!1}],className:"position-relative"},l.a.createElement(Pm.a.TextArea,{className:"text-area-main",rows:4,placeholder:"Type something"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),aR=(t(952),function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this.props,t=a.visible,n=a.item,c=a.onClose;return l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"ml-3"},n.name)),placement:"right",width:"880px",closable:!1,onClose:c,visible:t},l.a.createElement("div",{className:"breadcrumb-inner-details inline-item-breadcrumb"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},null===n||void 0===n||null===(e=n.breadcrumb)||void 0===e?void 0:e.map((function(e){return l.a.createElement(Su.a.Item,{key:e},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,{key:null===n||void 0===n?void 0:n.name},l.a.createElement(qm.a,null,null===n||void 0===n?void 0:n.name)))),l.a.createElement(iR,{item:[n],drawerItem:!0,packageData:this.props.packageData,getPackage:this.props.getPackage}))}}]),t}(n.Component)),tR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onSelect=function(e,a){},n.openDeleteModal=function(e){n.setState({warningModalVisible:!0,deleteItem:e})},n.removeItem=function(){Ig(n.state.deleteItem.id).then((function(){n.props.getPackage(n.props.packageData.id)})),n.showWarningModal(!1)},n.menu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.onEditItem(e)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.openDeleteModal(e)}},"Delete")))},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"DISPOSAL_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Disposal Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"DISPOSAL")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.disposal,alt:"",className:"img-fluid mr-2"}),"Disposal")))},n.handleTierDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({visibleTierDrawer:!n.state.visibleTierDrawer,tierDrawer:e})},n.handleKeyDown=function(e,a){"Enter"==e.key&&n.onBlurSaveInput(e,a)},n.renderItemTree=function(e){return l.a.createElement("div",{key:e.id,className:"row ml-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},"DISPOSAL_TIER"===e.tier_type?l.a.createElement("div",{className:"only-text d-flex align-items-center"},l.a.createElement("span",{onClick:function(){return n.handleTierDrawer(e)}}," ",e.name),l.a.createElement("div",{className:"add-tier-div-plus"},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return n.addTierMenu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0"},l.a.createElement("span",null,"+"))))):"DISPOSAL"===e.tier_type?l.a.createElement("div",{onClick:function(){return n.handleItemDrawer(e)},className:"mb-0 d-flex images-with-name children-heading-last align-items-center"},l.a.createElement("img",{src:Rm.disposal,alt:"",className:"img-fluid",style:{marginRight:"10px"}}),e.title):l.a.createElement("div",{className:"mb-0 d-flex input-with-name children-heading-last align-items-center"},"DISPOSAL"===e.item_type&&l.a.createElement("img",{src:Rm.disposal,alt:"",className:"img-fluid"}),l.a.createElement(Pm.a,{value:n.state.editFormValue,autoFocus:!0,disabled:n.state.inputLoader,onChange:function(e){return n.setState({editFormValue:e.target.value})},onBlur:function(a){return n.onBlurSaveInput(a,e)},onKeyDown:function(a){return n.handleKeyDown(a,e)}}),n.state.inputLoader&&l.a.createElement(U_.a,{style:{fontSize:"25px",marginLeft:"20px"}})),"DISPOSAL_TIER"===e.tier_type&&l.a.createElement("span",{className:"d-flex align-items-center small-heading"},e.children.length,l.a.createElement("span",null,l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement("div",{className:"remove-dropdown"},e.tier_type!==Ud?l.a.createElement(xu.a,{trigger:"click",overlay:function(){return n.menu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0",onClick:function(e){e.preventDefault(),e.stopPropagation()}},l.a.createElement("span",{className:"mr-1"},Yd[e.tier_type].name),l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))):l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree cancel-btn-tree-1 d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){return n.onRemoveInputField(e)}},l.a.createElement("span",null,"Cancel")))))},n.onAddInputField=function(e,a){var t=n.props.packageData.parent.children;t=JSON.parse(JSON.stringify(t)),e.item_type=a;var l=n.handleTreeData(t,e),c=n.state.keys;c.push(e.key),n.setState({treeData:Object(Ou.a)(l),editFormValue:"",keys:c})},n.onEditItem=function(e){var a=n.props.packageData.parent.children;a=JSON.parse(JSON.stringify(a));var t=n.handleTreeData(a,e,!0);n.setState({treeData:Object(Ou.a)(t),editFormValue:e.name})},n.onRemoveInputField=function(e){var a=n.props.packageData.parent.children,t=n.handleTreeData(a);n.setState({treeData:Object(Ou.a)(t)})},n.handleItemDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({visibleItemDrawer:!n.state.visibleItemDrawer,itemDrawer:e})},n.handleTreeData=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((function(e){e.title=e.name,e.key=e.id?e.id:e.name;var l=e.children;return t&&a&&a.id===e.id?(e.item_type=a.tier_type,e.tier_type=Ud):!t&&a&&a.id===e.id&&l.unshift({name:"INPUT TITLE"+a.id,tier_type:Ud,children:[],item_type:a.item_type,parent:a}),n.handleTreeData(l,a,t)})),e},n.onBlurSaveInput=function(e,a){if(e.target.value){n.setState({inputLoader:!0});var t={name:e.target.value,tier_type:a.item_type};a.id?jg(a.id,t).then((function(){n.setState({inputLoader:!1}),n.props.getPackage(n.props.packageData.id)})):(t.parent=a.parent.id,kg(t).then((function(e){n.setState({inputLoader:!1}),n.props.getPackage(n.props.packageData.id)})))}},n.setFieldData=function(e){var a=[];(null===e||void 0===e?void 0:e.parent)&&(a=n.handleTreeData(e.parent.children)),n.setState({treeData:a})},n.showWarningModal=function(e){n.setState({warningModalVisible:e})},n.onExpand=function(e){n.setState({keys:e})},n.state={treeData:[],inputLoader:!1,visibleItemDrawer:!1,visibleTierDrawer:!1,itemDrawer:null,tierDrawer:null,editFormValue:"",keys:[]},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"componentDidMount",value:function(){this.setFieldData(this.props.packageData)}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.treeData,i=n.visibleItemDrawer,r=n.itemDrawer,s=n.visibleTierDrawer,m=n.tierDrawer;return c.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(L_.a,{defaultExpandAll:!0,className:"custom-tree-structure custom-tree-structure-update",switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),onSelect:this.onSelect,titleRender:this.renderItemTree,treeData:c,autoExpandParent:!1}),i?o.push(Object(Sf.a)(zm.dashboard.management.disposal.items.view,{id:r.id})):"",s?l.a.createElement(aR,{visible:s,item:m,packageData:this.props.packageData,getPackage:this.props.getPackage,onClose:this.handleTierDrawer}):"",l.a.createElement(mh,{heading:"Are you sure you want to delete this ".concat("DISPOSAL_TIER"==(null===(e=this.state.deleteItem)||void 0===e?void 0:e.tier_type)?"Tier":"Disposal","?"),okAction:function(){return t.removeItem()},subHeading:l.a.createElement("p",{className:"mb-0 mx-auto",style:{width:"91%"}},l.a.createElement("span",null,"DISPOSAL_TIER"==(null===(a=this.state.deleteItem)||void 0===a?void 0:a.tier_type)?"If you choose to delete this Tier, the Tier and everything that it includes (Tiers, Disposal) would be deleted.":"If you choose to delete this Disposal, this Disposal and everything that it includes would be deleted.")),visible:this.state.warningModalVisible,onClose:function(){return t.showWarningModal(!1)},deleteLineItem:!0,cancelText:"No, I want to go back"})):l.a.createElement("div",null)}}]),t}(n.Component),nR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onBlurSaveInput=function(e){kg({name:e.target.value,parent:n.props.packageData.parent.id,tier_type:n.state.tier_type}).then((function(){n.props.getPackage(n.props.packageData.id),n.setState({visibleInput:!1})}))},n.handleVisibleInput=function(e){n.setState({visibleInput:!n.props.visibleInput,tier_type:e})},n.handleKeyDown=function(e){"Enter"===e.key&&n.onBlurSaveInput(e)},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput("DISPOSAL_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Disposal Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.handleVisibleInput("DISPOSAL")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.disposal,alt:"",className:"img-fluid mr-2"}),"Disposal")))},n.state={visibleInput:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state.visibleInput;return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement("div",{className:"row mx-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},l.a.createElement("div",{className:"mb-0 d-flex children-heading-last align-items-center"},l.a.createElement(Pm.a,{onBlur:function(a){return e.onBlurSaveInput(a)},autoFocus:!0,onKeyDown:this.handleKeyDown}))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){e.setState({visibleInput:!1})}},l.a.createElement("span",null,"Cancel")))),l.a.createElement("div",{className:"row mx-0 add-sub-tier-main-row"},l.a.createElement("div",{className:""},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return e.addTierMenu()}},l.a.createElement(Vm.a,{className:"add-sub-tier-btn bg-transparent border-0 rounded-0 shadow-none text-uppercase"},"+ ADD TIER/DISPOSAL")))))}}]),t}(n.Component),lR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onSelect=function(e,a){},n.openDeleteModal=function(e){n.setState({warningModalVisible:!0,deleteItem:e})},n.removeItem=function(){Ig(n.state.deleteItem.id).then((function(){n.props.getPackage(n.props.packageData.id)})),n.showWarningModal(!1)},n.menu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.onEditItem(e)}},"Edit")),l.a.createElement(_u.a.Item,null,l.a.createElement("div",{onClick:function(){return n.openDeleteModal(e)}},"Delete")))},n.addTierMenu=function(e){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"DISPOSAL_TIER")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.new_sub_tier_icon,alt:"",className:"img-fluid mr-2"}),"Disposal Tier")),l.a.createElement(_u.a.Item,{onClick:function(){return n.onAddInputField(e,"DISPOSAL")}},l.a.createElement("div",null,l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid mr-2"}),"Disposal")))},n.handleKeyDown=function(e,a){"Enter"==e.key&&n.onBlurSaveInput(e,a)},n.renderItemTree=function(e){return l.a.createElement("div",{key:e.id,className:"row mx-0 tree-row-main custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},l.a.createElement("h6",{className:"mb-0 d-flex align-items-center"},"DISPOSAL_TIER"===e.tier_type?l.a.createElement(l.a.Fragment,null,e.name,l.a.createElement("div",{className:"add-tier-div-plus"},l.a.createElement(xu.a,{trigger:"click",overlayClassName:"add-tier-dropdown-custom",overlay:function(){return n.addTierMenu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0"},l.a.createElement("span",null,"+"))))):"DISPOSAL"===e.tier_type?l.a.createElement("div",{onClick:function(){if(n.props.drawerItem)return null;n.handleItemDrawer(e)},className:"mb-0 d-flex children-heading-last align-items-center"},l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid",style:{marginRight:"10px"}}),e.title):l.a.createElement("div",{className:"mb-0 d-flex children-heading-last align-items-center"},"DISPOSAL"===e.item_type&&l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid"}),l.a.createElement(Pm.a,{value:n.state.editFormValue,autoFocus:!0,disabled:n.state.inputLoader,onChange:function(e){return n.setState({editFormValue:e.target.value})},onBlur:function(a){return n.onBlurSaveInput(a,e)},onKeyDown:function(a){return n.handleKeyDown(a,e)}}),n.state.inputLoader&&l.a.createElement(U_.a,{style:{fontSize:"25px",marginLeft:"20px"}})),"DISPOSAL_TIER"===e.tier_type&&l.a.createElement("span",{className:"d-flex align-items-center small-heading"},e.children.length,l.a.createElement("span",null,l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"text-green-tag text-right-tree d-flex align-items-center"},l.a.createElement("div",{className:"remove-dropdown"},e.tier_type!==Ud?l.a.createElement(xu.a,{trigger:"click",overlay:function(){return n.menu(e)}},l.a.createElement(Vm.a,{className:"ant-dropdown-link d-flex align-items-center border-0 bg-transparent shadow-none p-0",onClick:function(e){e.preventDefault(),e.stopPropagation()}},l.a.createElement("span",{className:"mr-1"},Yd[e.tier_type].name),l.a.createElement("img",{src:Rm.eva_more_elisis,className:"img-fluid",alt:""}))):l.a.createElement(Vm.a,{className:"ant-dropdown-link cancel-btn-tree cancel-btn-tree-1 d-flex align-items-center border-0 bg-transparent shadow-none p-0",onMouseDown:function(a){return n.onRemoveInputField(e)}},l.a.createElement("span",null,"Cancel")))))},n.onAddInputField=function(e,a){var t=n.props.packageData.parent.children;t=JSON.parse(JSON.stringify(t)),e.item_type=a;var l=n.handleTreeData(t,e);n.setState({newTreeData:Object(Ou.a)(l),editFormValue:""})},n.onEditItem=function(e){var a=n.props.packageData.parent.children;a=JSON.parse(JSON.stringify(a));var t=n.handleTreeData(a,e,!0);n.setState({newTreeData:Object(Ou.a)(t),editFormValue:e.name})},n.onRemoveInputField=function(e){var a=n.props.packageData.parent.children,t=n.handleTreeData(a);n.setState({newTreeData:Object(Ou.a)(t)})},n.handleItemDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({visibleItemDrawer:!n.state.visibleItemDrawer,itemDrawer:e})},n.handleTreeData=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((function(e){e.title=e.name,e.key=e.id?e.id:e.name;var l=e.children;return t&&a&&a.id===e.id?(e.item_type=a.tier_type,e.tier_type=Ud):!t&&a&&a.id===e.id&&l.unshift({name:"INPUT TITLE"+a.id,tier_type:Ud,children:[],item_type:a.item_type,parent:a}),n.handleTreeData(l,a,t)})),e},n.onBlurSaveInput=function(e,a){if(e.target.value){n.setState({inputLoader:!0});var t={name:e.target.value,tier_type:a.item_type};a.id?jg(a.id,t).then((function(){n.setState({inputLoader:!1}),n.props.getPackage(n.props.packageData.id)})):(t.parent=a.parent.id,kg(t).then((function(e){n.setState({inputLoader:!1}),n.props.getPackage(n.props.packageData.id)})))}},n.setFieldData=function(e){var a=[];(null===e||void 0===e?void 0:e.parent)&&(a=n.handleTreeData(e.parent.children)),n.setState({newTreeData:a})},n.showWarningModal=function(e){n.setState({warningModalVisible:e})},n.state={newTreeData:n.props.item,inputLoader:!1,visibleItemDrawer:!1,visibleTierDrawer:!1,itemDrawer:null,tierDrawer:null,editFormValue:""},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){this.props.packageData!==e.packageData&&this.setFieldData(this.props.packageData)}},{key:"componentDidMount",value:function(){this.props.drawerItem||this.setFieldData(this.props.packageData)}},{key:"render",value:function(){var e,a,t=this,n=this.state;n.newTreeData,n.visibleItemDrawer,n.itemDrawer,n.visibleTierDrawer,n.tierDrawer;return this.props.item.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(L_.a,{defaultExpandAll:!0,className:"custom-tree-structure custom-tree-structure-update",switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),onSelect:this.onSelect,titleRender:this.renderItemTree,treeData:this.state.newTreeData,autoExpandParent:!1}),l.a.createElement(mh,{heading:"Are you sure you want to delete this ".concat("DISPOSAL_TIER"==(null===(e=this.state.deleteItem)||void 0===e?void 0:e.tier_type)?"disposal tier":"disposal","?"),okAction:function(){return t.removeItem()},subHeading:l.a.createElement("p",{className:"mb-0 mx-auto",style:{width:"91%"}},l.a.createElement("span",null,"To permanently delete"," ","DISPOSAL_TIER"==(null===(a=this.state.deleteItem)||void 0===a?void 0:a.tier_type)?"Disposal Tier":"Disposal",", Select \u201dYes, I want to Continue\u201d")," ",l.a.createElement("br",null),l.a.createElement("span",null,"To cancel, Select \u201dNo, I want to go back\u201d")),visible:this.state.warningModalVisible,onClose:function(){return t.showWarningModal(!1)},deleteDisposal:!0,cancelText:"No, I want to go back"})):l.a.createElement("div",null)}}]),t}(n.Component),cR={labelCol:{span:24},wrapperCol:{span:24}},iR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please build your disposal family using tiers and disposal."))),l.a.createElement("div",{className:"col-12 tree-heading-second tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"DISPOSAL")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},cR,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},this.props.drawerItem?l.a.createElement(lR,this.props):l.a.createElement(tR,this.props)),l.a.createElement("div",{className:"col-12 service-div"},l.a.createElement(nR,this.props)),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main",onClick:function(){return Mm.b.success("Disposal Family updated successfully!")}},"Save and Continue"))))))))}}]),t}(n.Component),rR=fu.a.Panel,sR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={current:0,packageData:null,visible:!1,warningVisible:!1,activeKey:["1"],unsavedExit:!1,requiredSuccessModalVisible:!1},e.showConfirmModal=function(a){e.setState({visible:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.showWarningM=function(a){e.setState({warningVisible:a})},e.next=function(){e.setState({current:e.state.current+1})},e.prev=function(){e.setState({current:e.state.current-1})},e.setPackage=function(a,t){var n;(null===(n=e.state.packageData)||void 0===n?void 0:n.name)?e.setState((function(){return{packageData:a}})):e.setState((function(){return{packageData:a,unsavedExit:!0}}));var l=null;e.state.activeKey.length>1&&(l=e.state.activeKey.find((function(e){return e==t}))),l||e.setState((function(e){return{packageData:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"2")))}}))},e.getPackage=function(a){e.setState({loading:!0}),Sg(a).then((function(a){e.setState({packageData:a.data},(function(){var a,t,n,l=null===(a=e.state)||void 0===a?void 0:a.packageData;(null===l||void 0===l?void 0:l.name)&&((null===l||void 0===l||null===(t=l.parent)||void 0===t||null===(n=t.children)||void 0===n?void 0:n.length)?(e.setState({packageData:l,unsavedExit:!1}),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.props.match.params.id||e.setState({packageData:l,unsavedExit:!0}))}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.packageData;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.disposal.family.view,{id:l.id})):e.showConfirmModal(!0)},e.handleDisposalInventoryFamilyUpdate=function(){xg(e.state.packageData.id,{is_inventory:!0}).then((function(a){e.setState({packageData:a.data})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.getPackage(this.props.match.params.id),this.setState({activeKey:this.props.location.editTab||"1"}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.packageData,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement("div",{className:"steps-content"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},defaultActiveKey:["1"],activeKey:n,onChange:this.collapseOnChange},l.a.createElement(rR,{header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*"))),key:"1"},l.a.createElement(eR,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage})),l.a.createElement(rR,{disabled:!t,header:l.a.createElement("div",{className:"w-100 d-flex info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Disposal Family ",l.a.createElement("sup",null,"*"))),key:"2"},l.a.createElement(iR,{packageData:this.state.packageData,setPackage:this.setPackage,getPackage:this.getPackage})))),l.a.createElement("div",{className:"steps-action common-steps-action d-flex align-items-center justify-content-end"},l.a.createElement(Vm.a,{className:"border-0 shadow-none text-center",style:{margin:"0 8px"},onClick:function(){return e.showWarningM(!0)}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,type:"primary",className:"border-0 shadow-none text-center",onClick:function(){e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.disposal.family.view,{id:t.id})):e.handleViewMainButtonCLick(),e.state.packageData.is_inventory||e.handleDisposalInventoryFamilyUpdate()}},"View Disposal Family"))))),l.a.createElement(mh,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Disposal Family!"),subHeading:l.a.createElement("p",{className:"mb-0"},"To view, select \xa0",l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.disposal.family.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Disposal Family"),"."),okTitle:"View Disposal Family",okAction:function(){return o.push(Object(dh.a)(zm.dashboard.management.disposal.family.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningM(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Disposal Family?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the disposal family, select View disposalFamily.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View disposalFamily",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.disposal.family.view,{id:t.id}))}}))}}]),t}(n.Component),oR=fu.a.Panel,mR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={treeData:[],package:null},e.onSelect=function(e,a){},e.handleKey=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a){var n=Object(Ou.a)(a);return n.forEach((function(a,n){a.key=t?t+"parent"+n:a.id,a.children=e.handleKey(a.children)})),n}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Sg(this.props.match.params.id).then((function(a){var t=[];t=e.props.match.url.includes("inventory")?[{title:"Inventory",url:zm.dashboard.management.disposal.self},{title:"Disposal Inventory Families",url:zm.dashboard.management.disposal.self},{title:a.data.name,url:"#"}]:[{title:"Disposal",url:zm.dashboard.management.disposal.self},{title:"Disposal Families",url:zm.dashboard.management.disposal.self},{title:a.data.name,url:"#"}],e.props.setBreadcrumb(t);var n=e.handleKey(a.data.parent.children,a.data.parent.id);e.setState({treeData:n,itemPackage:a.data})})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.itemPackage,n=a.treeData;a.activeKeys;return t?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1","2"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(oR,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),!this.props.match.url.includes("inventory")&&l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.disposal.family.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Disposal Family Name"),l.a.createElement("h5",{className:"mb-0"},t.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Description"),l.a.createElement("h5",{className:"mb-0"},t.description)))))),l.a.createElement(oR,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Disposal Family ",l.a.createElement("sup",null,"*")),!this.props.match.url.includes("inventory")&&l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.disposal.family.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement("div",{className:"row mx-0 px-0 pt-0 summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 tree-heading"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-6"},l.a.createElement("span",null,"DISPOSAL")),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement("span",null,"TYPE")))),this.state.treeData.length>0?l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(L_.a,{className:"custom-tree-structure",showLine:!0,filterTreeNode:function(e){return!("DISPOSAL"!==e.tier_type||!Gd(e))},defaultExpandAll:!0,switcherIcon:l.a.createElement("img",{src:Rm.treeArrow,alt:"arrow"}),selectable:!1,titleRender:function(a){return l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between ".concat("DISPOSAL"===a.tier_type&&Gd(a)&&"is-required"),onClick:function(){return"DISPOSAL"===a.tier_type?o.push(Object(Sf.a)(e.props.match.url.includes("inventory")?zm.dashboard.management.disposal_inventory.view:zm.dashboard.management.disposal.items.view,{id:a.id})):null}},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"branch-icon-text d-flex align-items-center"},"DISPOSAL"===a.tier_type&&l.a.createElement("img",{src:Rm.disposal,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},a.name)),a.children&&0!==a.children.filter((function(e){return!e.type})).length&&l.a.createElement("div",{className:"branch-div-tg d-flex align-items-center"},l.a.createElement("span",{className:"count-span-tg"},a.children.filter((function(e){return!e.type})).length),l.a.createElement("img",{src:Rm.branch_icon_gray,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"d-flex align-items-center"},"DISPOSAL"===a.tier_type&&Gd(a)&&l.a.createElement("div",{className:"d-flex mr-5 align-items-center"},l.a.createElement("p",{className:"mb-0 ml-1",style:{fontSize:"11px",fontStyle:"italic",color:"#EB5757"}},"Please complete all required information to avoid issues")),l.a.createElement("div",{className:"text-green-tag text-right-tree"},Yd[a.tier_type].name)))},treeData:n})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"50px"},className:"row mx-0 mb-0 mt-3 border-0 no-data-card-row align-items-center bg-transparent justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.Disposal_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Disposal"))))))))))):l.a.createElement("div",null)}}]),t}(n.Component),dR=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(mR)),uR=vf.a.TabPane,pR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(uR,{tab:"Summary",key:"1"},l.a.createElement(dR,null)))))))}}]),t}(n.Component),vR={labelCol:{span:24},wrapperCol:{span:24}},hR=ku.a.Option,fR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={disposal_tier:[],fetching:!1},e.formRef=l.a.createRef(),e.handleSubmit=function(a){e.props.disposal?("string"===typeof a.parent&&(a.parent=e.props.disposal.parent),jg(e.props.disposal.id,a).then((function(a){e.props.setdisposal(a.data,2),Mm.b.success("Disposal Updated successfully!")})).catch((function(e){td(e)}))):(a.tier_type="DISPOSAL",kg(a).then((function(a){e.props.setdisposal(a.data,2),Mm.b.success("Disposal Created successfully!")})).catch((function(e){td(e)})))},e.fetchDisposalTiers=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Cg(Object(wu.a)(Object(wu.a)({},a),{},{not_group:!0})).then((function(a){e.setState({disposal_tier:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.onFetchDisposalTiers=function(a){e.fetchDisposalTiers({search:a})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a,t){var n,l,c;e.disposal!==this.props.disposal&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.disposal),{},{parent:null===(n=this.props)||void 0===n||null===(l=n.disposal)||void 0===l||null===(c=l.disposal_family)||void 0===c?void 0:c.name}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.disposal_tier,c=this.props.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input the name and Disposal Family / Tier of this disposal."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},vR,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"disposal_code",label:"Disposal Code",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"00000000"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Disposal Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Enter a nickname to distinguish the Disposal"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"parent",label:"Disposal Family / Tier *",rules:[{required:!0,message:"this field is required"}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{showSearch:!0,value:n,placeholder:"Search Disposal Family / Tier",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchDisposalTiers()},onSearch:this.debounceEvent(this.onFetchDisposalTiers,300),dropdownClassName:"custom-select-drop-main",onChange:function(e){c("disposal_tier",e)},optionLabelProp:"label"},this.state.disposal_tier.map((function(e,a){return l.a.createElement(hR,{key:a,label:e.name,value:e.id},l.a.createElement(xS,{data:e,img:e.tier_type?null:Rm.disposal,type:e.tier_type?"Disposal Tier":"Disposal Family"}))}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),ER=(fu.a.Panel,{labelCol:{span:24},wrapperCol:{span:24}}),gR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).formRef=l.a.createRef(),n.onChange=function(e){n.state.value?(n.showConfirmModal(!0),n.setState({newValue:e})):n.setState({value:e},(function(){return n.getSubUnitName()}))},n.onCheckChange=function(e,a){var t=n.state.subUnitNames;t.forEach((function(t){t.id===a&&(t.isChecked=e.target.checked)}));var l=null===t||void 0===t?void 0:t.filter((function(e){return 1==e.isChecked})).map((function(e){return e.id}));n.setState({selectedCheckboxes:l})},n.showConfirmModal=function(e){n.setState({visibleConfirm:e,data:null})},n.getUnitTypes=function(){Tg().then((function(e){n.setState({unit_types:e.data.results})})).catch((function(e){td(e)}))},n.getSubUnitName=function(){var e,a,t,l,c,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(null===(e=n.props.disposal)||void 0===e?void 0:e.uom_array)&&(null===(a=n.props.disposal)||void 0===a?void 0:a.uom_array[0])&&(null===(t=n.props.disposal)||void 0===t||null===(l=t.uom_array[0])||void 0===l||null===(c=l.unit_type)||void 0===c?void 0:c.id),o=null===(i=n.props.disposal)||void 0===i?void 0:i.uom_array;r.unit=n.state.value?n.state.value:s,Rg(r).then((function(e){n.setState({subUnitNames:e.data},(function(){var e;o&&o.forEach((function(e){e.isChecked=!0}));var a=null===(e=n.state.subUnitNames)||void 0===e?void 0:e.map((function(e){return(null===o||void 0===o?void 0:o.find((function(a){return a.id===e.id})))||e}));n.setState({subUnitNames:a})}))})).catch((function(e){td(e)}))},n.handleSubmit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.uom_array=n.state.selectedCheckboxes;var a=n.props.match.params.id?n.props.match.params.id:n.props.disposal.id;jg(a,e).then((function(e){n.props.setDisposal(e.data,3),Mm.b.success("Disposal updated successfully"),n.props.onClose()})).catch((function(e){td(e)}))},n.state={value:null,data:null,buttonLoading:!1,visibleConfirm:!1,unit_types:[],subUnitNames:[],selectedCheckboxes:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l;this.getUnitTypes(),this.getSubUnitName(),this.setState({value:(null===(e=this.props.disposal)||void 0===e?void 0:e.uom_array)&&(null===(a=this.props.disposal)||void 0===a?void 0:a.uom_array[0])&&(null===(t=this.props.disposal)||void 0===t||null===(n=t.uom_array[0])||void 0===n||null===(l=n.unit_type)||void 0===l?void 0:l.id)})}},{key:"render",value:function(){var e,a,t,n,c=this,i=null===(e=this.state)||void 0===e||null===(a=e.unit_types)||void 0===a?void 0:a.find((function(e){return e.id===c.state.value})),r=(this.state.value,{display:"block",height:"40px",lineHeight:"25px"});return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer drawer-update",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Universal Units of Measurement")),centered:!0,width:1e3,closable:!0,onClose:function(){var e,a,t,n,l;c.props.onClose(),c.setState({value:(null===(e=c.props.disposal)||void 0===e?void 0:e.uom_array)&&(null===(a=c.props.disposal)||void 0===a?void 0:a.uom_array[0])&&(null===(t=c.props.disposal)||void 0===t||null===(n=t.uom_array[0])||void 0===n||null===(l=n.unit_type)||void 0===l?void 0:l.id)},(function(){return c.getSubUnitName()}))},placement:"right",visible:this.props.visible,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return c.props.onClose}},"Cancel"),l.a.createElement(Vm.a,{type:"primary",onClick:function(){return c.handleSubmit()}},"Create"))},l.a.createElement("div",{className:"row mx-0 unit-measurement-row-drawer pt-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 border-right-1"},l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select a type of unit of measurement to select unit(s) of measurements."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},ER,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"types",label:"",rules:[{required:!1,message:""}],className:"position-relative"},this.state.unit_types.map((function(e){return l.a.createElement(vh.a,{style:r,onChange:function(){return c.onChange(e.id)},checked:c.state.value===e.id,key:e.id},e.name,l.a.createElement("small",null,1==e.id?" (e.g. pieces)":2==e.id?" (e.g. gram, kilogram, pound, etc.)":3==e.id?" (e.g. inch, foot, milimeter, etc.)":" (e.g. pint, quart, gallon, etc.)"))}))))))))),this.state.value&&l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"col-12 mt-4"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row unit-measurement-table"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row custom-table-header"},l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Selected")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Unit Name")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Unit",l.a.createElement("bt",null),"Symbol")))),l.a.createElement("div",{className:"col-12 custom-table-body p-0 bg-white"},l.a.createElement("div",{className:"custom-table-row custom-row-heading row mx-0"},null===i||void 0===i?void 0:i.name),null===(t=this.state)||void 0===t||null===(n=t.subUnitNames)||void 0===n?void 0:n.map((function(e){return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-2 bg-white row mx-0",key:e.id},l.a.createElement("div",{className:"custom-table-cell-td justify-content-center bg-white"},l.a.createElement(tp.a,{checked:e.isChecked,onChange:function(a){return c.onCheckChange(a,e.id)}})),l.a.createElement("div",{className:"custom-table-cell-td justify-content-center bg-white text-center"},e.name),l.a.createElement("div",{className:"custom-table-cell-td justify-content-center bg-white text-center"},e.symbol))})))))))))))),l.a.createElement(iv,{heading:"Are you sure you want to change universal unit of measurements?",subHeadingUOM:l.a.createElement("p",{className:"mb-0",style:{width:"98%"}},"If you continue, this will affect all unit of measurements in this inventory item."),uomWarning:!0,okAction:function(){c.showConfirmModal(!1),c.setState({value:c.state.newValue},(function(){return c.getSubUnitName()}))},visible:this.state.visibleConfirm,onClose:function(){c.showConfirmModal(!1)}}))}}]),t}(n.Component),bR=Object(r.withRouter)(gR),NR={labelCol:{span:24},wrapperCol:{span:24}},yR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={visible:!1},e.showUniversalType=function(a){e.setState({visible:a})},e.handleSubmit=function(){e.props.setDisposal(e.props.disposal,3),Mm.b.success("Disposal updated successfully!")},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this,t=((null===(e=this.props)||void 0===e?void 0:e.disposal)||[]).uom_array;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select the universal unit(s) of measurement for this disposal."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},NR,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},(null===t||void 0===t?void 0:t.length)>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row measurement-row-details"},l.a.createElement("div",{className:"col-12 margin-tb-30"},l.a.createElement(Vm.a,{onClick:function(){return a.showUniversalType(!0)},className:"edit-create-btn text-uppercase"},"Edit")),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 custom-uom-table"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Unit Name"),l.a.createElement("th",null,"Abbreviation"))),l.a.createElement("tbody",null,l.a.createElement("tr",{className:"uom-table-small-header"},l.a.createElement("td",{colSpan:"2"},t&&t[0]&&t[0].unit_type.name)),null===t||void 0===t?void 0:t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.symbol))}))))))))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{onClick:function(){return a.showUniversalType(!0)},className:"row mx-0 common-card-upload cursor-pointer"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.universalm,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-green-tag"},"Add Units of Measurement")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(bR,{visible:this.state.visible,onClose:function(){return a.showUniversalType(!1)},setDisposal:this.props.setDisposal,disposal:this.props.disposal}))}}]),t}(n.Component),wR=Object(r.withRouter)(yR),_R={labelCol:{span:24},wrapperCol:{span:24}},SR=Pm.a.Group,xR=ku.a.Option,CR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onChangeCheck=function(e){},n.updateData=function(){var e,a=null===(e=n.props)||void 0===e?void 0:e.com,t={com:[].concat(Object(Ou.a)(a),Object(Ou.a)(n.state.newComId))};jg(n.props.disposal.id,t).then((function(e){n.props.setDisposal(e.data),Mm.b.success("Disposal updated successfully"),n.props.onClose(),n.setState({subUnitNames:[],comName:"",factor:null,abbr:"",newComId:[]})})).catch((function(e){td(e)}))},n.sendComData=function(){var e={name:n.state.comName,factor:n.state.factor,uom:n.state.uomSelect||n.props.baseUnitValue,abbreviation:n.state.abbr};n.props.editData?Pg(n.props.editData.id,e).then((function(e){n.setState({newComId:[]},(function(){return n.updateData()})),Mm.b.success("successfully added!")})).catch((function(e){td(e)})):Mg(e).then((function(e){n.setState({newComId:[e.data.id]},(function(){return n.updateData()})),Mm.b.success("successfully added!")})).catch((function(e){td(e)}))},n.handleNameChange=function(e){n.setState({comName:e.target.value})},n.handleAbbrChange=function(e){n.setState({abbr:e.target.value})},n.state={subUnitNames:[],comName:"",uomSelect:null,factor:null,newComId:[],abbr:""},n}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var a,t=this.props.editData;e.editData!=this.props.editData&&this.setState({comName:null===t||void 0===t?void 0:t.name,factor:null===t||void 0===t?void 0:t.factor,uomSelect:null===t||void 0===t||null===(a=t.uom)||void 0===a?void 0:a.id,abbr:null===t||void 0===t?void 0:t.abbreviation})}},{key:"render",value:function(){var e,a,t,n=this,c=this.props.disposal;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{className:"main-drawer-div main-all-form-modal inline-item-drawer drawer-update",title:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Custom Unit of Measurement")),centered:!0,width:500,closable:!0,destroyOnClose:0===(null===(e=this.props.disposal)||void 0===e?void 0:e.com.length),onClose:function(){n.props.onClose(),n.setState({subUnitNames:[],comName:"",factor:null,abbr:"",newComId:[]})},placement:"right",visible:this.props.visible,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:this.props.onClose},"Cancel"),l.a.createElement(Vm.a,{onClick:this.sendComData,type:"primary"},(null===(a=this.props.editData)||void 0===a?void 0:a.id)?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 unit-measurement-row-drawer pt-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-4"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input custom units of measurement name, abbreviation and conversion to finish creating custom unit of measurement."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},_R,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Custom Unit of Measurement Name *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{type:"text",placeholder:"Name",value:this.state.comName,onChange:function(e){return n.handleNameChange(e)}}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Abbreviation *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{type:"text",placeholder:"Symbol",value:this.state.abbr,onChange:function(e){return n.handleAbbrChange(e)}}))),l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",null,"Conversion")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"types",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Custom UOM *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(SR,{compact:!0},l.a.createElement(Pm.a,{disabled:!0,style:{width:"40%",borderRight:"0",borderRadius:"6px 0 0 6px"},defaultValue:"1"}),l.a.createElement(Pm.a,{disabled:!0,style:{width:"50%",borderLeft:"0",borderRadius:"0 6px 6px 0"},value:this.state.abbr})),l.a.createElement("span",{className:"equal-sign position-absolute"},"=")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"types",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",null,"Universal UOM *")),rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(SR,{compact:!0},l.a.createElement(ap.a,{style:{width:"30%",borderRight:"0",borderRadius:"6px 0 0 6px"},onChange:function(e){return n.setState({factor:e})},value:this.state.factor||null}),l.a.createElement(ku.a,{className:"custom-pound-select bg-gray",style:{width:"70%"},suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),value:this.state.uomSelect||this.props.baseUnitValue,disabled:!0},null===c||void 0===c||null===(t=c.uom_array)||void 0===t?void 0:t.map((function(e){return l.a.createElement(xR,{value:e.id},"".concat(e.symbol))})))))))))))))))))))}}]),t}(n.Component),OR=(Pm.a.Group,ku.a.Option,{labelCol:{span:24},wrapperCol:{span:24}}),kR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,com:[],editData:null},e.showCustomUnitCreate=function(a,t){e.setState({visible:a,editData:t})},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"w-100 p-0 text-left bg-transparent border-0 shadow-none",onClick:function(){return e.showCustomUnitCreate(!0,a)}},"Edit")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"w-100 p-0 text-left bg-transparent border-0 shadow-none",onClick:function(){return e.handleDelete(a.id)}},"Remove")))},e.handleDelete=function(a){Fg(a).then((function(a){Mm.b.success("Successfully deleted"),e.props.getDisposalItem()})).catch((function(e){td(e)}))},e.handleSubmit=function(){e.props.setDisposal(e.props.disposal,4),Mm.b.success("Disposal updated successfully!")},e.handleSelectChange=function(a){e.setState({baseUnitValue:a})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i=this,r=this.state,s=r.visible,o=r.baseUnitValue,m=this.props.disposal;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select Universal Units of Measurement to add Custom Units of Measurement."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},OR,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"base",label:"Base Unit of Measurement *"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",disabled:!(null===m||void 0===m?void 0:m.uom_array),value:o,onChange:this.handleSelectChange},null===m||void 0===m||null===(e=m.uom_array)||void 0===e?void 0:e.map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},"".concat(e.name," (").concat(e.symbol,")"))})))),l.a.createElement("small",{className:"small-text-tag"},"You are choosing a unit of measurement from your pre-selected universal units of measurement.")),0==(null===(a=this.state.com)||void 0===a?void 0:a.length)?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{onClick:function(){o&&i.showCustomUnitCreate(!0)},className:"row mx-0 mt-3 cursor-pointer common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.measurement_tape,alt:"",className:"img-fluid"}),l.a.createElement("h6",{style:{color:o?"#38BC94":"#4F4F4F"},className:"mb-0"},"Create Custom Units of Measurement")))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row measurement-row-details"},l.a.createElement("div",{className:"col-12 margin-tb-30"},l.a.createElement(Vm.a,{onClick:function(){return i.showCustomUnitCreate(!0)},className:"edit-create-btn text-uppercase",disabled:!o},"Add")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 custom-uom-table custom-uom-table-2"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"custom uom name"),l.a.createElement("th",null,"abbreviation"),l.a.createElement("th",null,"conversion"))),l.a.createElement("tbody",null,null===(t=this.state.com)||void 0===t?void 0:t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name||"-"),l.a.createElement("td",null,e.abbreviation||"-"),l.a.createElement("td",null,l.a.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"1",e.abbreviation," = ",e.factor||1,e.uom.symbol||"-"),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return i.menu(e)},trigger:["click"]},l.a.createElement("a",{className:"ant-dropdown-link more-btn-tag position-absolute",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"}))))))}))))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(CR,{callbackFacility:this.callbackFacility,visible:s,com:null===(n=this.state.com)||void 0===n?void 0:n.map((function(e){return e.id})),disposal:this.props.disposal,editData:this.state.editData,selectedUom:this.state.com.length>0?null===(c=this.state.com[0])||void 0===c?void 0:c.uom:null,baseUnitValue:o,setDisposal:this.props.setDisposal,onClose:function(e){i.showCustomUnitCreate(!1),e&&i.props.getDisposalItem()}}))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t;return{com:(null===e||void 0===e||null===(t=e.disposal)||void 0===t?void 0:t.com)||[]}}}]),t}(n.Component),jR=Object(r.withRouter)(kR),IR={labelCol:{span:24},wrapperCol:{span:24}},AR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={loading:!1,data:null,selectValue:null},e.handleSubmit=function(a){if(e.state.selectValue){var t=Object(wu.a)(Object(wu.a)({},a),{},{uom:e.state.selectValue});jg(e.props.disposal.id,t).then((function(a){e.props.setdisposal(a.data,5),Mm.b.success("Disposal Updated successfully!")})).catch((function(e){td(e)}))}},e.handleFormChange=function(){var a=e.formRef.current,t=a.getFieldValue,n=a.setFieldsValue,l=(t("unit_cost")/100*t("margin")||0)+parseFloat(t("unit_cost"));n({price:parseFloat(l.toFixed(2))})},e.handleSelectChange=function(){e.setState({selectValue:e.formRef.current.getFieldValue("uom").value})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&Og(this.props.match.params.id).then((function(a){var t,n,l,c,i;e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},a.data),{},{uom:{value:null===(t=a.data)||void 0===t||null===(n=t.uom)||void 0===n?void 0:n.id,label:null===(l=a.data.uom)||void 0===l?void 0:l.name}})),e.setState({selectValue:null===(c=a.data)||void 0===c||null===(i=c.uom)||void 0===i?void 0:i.id}),e.handleFormChange()})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s=this,o=this.props.disposal,m=this.state.selectValue?null===(e=this.props.disposal)||void 0===e||null===(a=e.uom_array)||void 0===a||null===(t=a.find((function(e){return e.id===s.state.selectValue})))||void 0===t?void 0:t.symbol:null===(n=this.props.disposal)||void 0===n||null===(c=n.uom_array)||void 0===c||null===(i=c.find((function(e){var a,t;return e.id===(null===(a=s.props.disposal)||void 0===a||null===(t=a.uom)||void 0===t?void 0:t.id)})))||void 0===i?void 0:i.symbol;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit,onFieldsChange:this.handleFormChange},IR,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row  mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"This information is purely informational. It does not affect any pricing."))),l.a.createElement("div",{className:"col-12 col-sm-6 position-relative pb-3"},l.a.createElement(Fm.a.Item,{name:"uom",label:"Unit of Measurement *",rules:[{required:!0}]},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Option",onChange:this.handleSelectChange},null===o||void 0===o||null===(r=o.uom_array)||void 0===r?void 0:r.map((function(e){return l.a.createElement(ku.a.Option,{value:e.id},e.name," (",e.symbol,")")})))),l.a.createElement("small",{className:"small-text-tag",style:this.state.selectValue?null:{color:"red"}},"You're choosing Unit of Measurements from your pre-selected Custom and Universal Unit of Measurements")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"unit_cost",label:"Unit Cost *",className:"position-relative",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"})),this.state.selectValue?l.a.createElement("small",{className:"cost-symbol"},m):l.a.createElement("small",{className:"cost-symbol",style:{color:"red"}},"UOM")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"margin",label:"Margin *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{min:0,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},placeholder:"%"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"price",label:"Price",className:"position-relative",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{disabled:!0,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},placeholder:"$0.00"})),this.state.selectValue?l.a.createElement("small",{className:"cost-symbol"},m):l.a.createElement("small",{className:"cost-symbol",style:{color:"red"}},"UOM")),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),DR=Object(r.withRouter)(AR),TR={labelCol:{span:24},wrapperCol:{span:24}},RR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[],loading:!1},e.docsColumns=[{title:"Name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},Nd(e)," ")}},{title:l.a.createElement("div",{className:"position-relative"},"FORMAT"),dataIndex:"format",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},".",e)}}],e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("disposal",e.props.disposal.id),n.append("document",t),Ag(n).then((function(a){e.fetchFiles()})).catch((function(e){td(e)}))},e.fetchFiles=function(){Dg({disposal:e.props.disposal.id}).then((function(a){e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},TR,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.state.files.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.docsColumns,dataSource:this.state.files,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.loading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),MR=Object(r.withRouter)(RR),FR=ku.a.Option,PR={labelCol:{span:24},wrapperCol:{span:24}},VR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:null,buttonLoading:!1,visibleConfirm:!1,county:[],updateMainState:null},e.formRef=l.a.createRef(),e.showConfirmModal=function(a){e.setState({visibleConfirm:a}),e.setState({data:null})},e.onSubmit=function(a){if(e.props.editData){var t=Object(wu.a)(Object(wu.a)({},a),{},{type:"DISPOSAL",disposal_id:e.props.match.params.id});tv(e.props.editData.id,t).then((function(a){Mm.b.success("Internal Location Updated Successfully"),e.props.editData&&e.props.callbackContact(a.data)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}else{nv(Object(wu.a)(Object(wu.a)({},a),{},{type:"DISPOSAL"})).then((function(a){Mm.b.success("Internal Location Created Successfully"),e.props.callbackContact(a.data,!0)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}},e.populateData=function(){e.props.editData?e.formRef.current.setFieldsValue(Object(wu.a)({},e.props.editData)):e.formRef.current&&e.formRef.current.setFieldsValue({country:"United States"})},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(a){td(a),e.setState({load:!1})}))}},{key:"render",value:function(){var e=this,a=this.props.editData,t=this.state,n=t.county,c=t.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,closable:!0,destroyOnClose:!0,title:a?"Edit Warehouse":"Create Warehouse",visible:this.props.visible,onClose:this.props.onClose,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){e.formRef.current.submit()},type:"primary"},"".concat(this.props.editData?"Update":"Create")))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef},PR,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Location Name *")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Location Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"epa_id",label:"EPA ID",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"ABC123456789"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(n,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(c,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"ZIP/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Select Country",suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},np.map((function(e){return l.a.createElement(FR,{value:e.name},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{placeholder:"123-456-7890"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{type:"email",placeholder:"Email Address"})))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this Warehouses!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view this Warehouses, select View Facility"),okTitle:"View Warehouses",okAction:function(){e.showConfirmModal(!1),e.props.onClose()},visible:this.state.visibleConfirm,onClose:function(){e.showConfirmModal(!1),e.props.onClose()}}))}}]),t}(n.Component),qR=Object(r.withRouter)(VR),LR=ku.a.Option,UR={labelCol:{span:24},wrapperCol:{span:24}},BR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{width:"548px",title:"Add Warehouse",visible:this.props.visible,onOk:this.props.visible,onCancel:this.props.onClose,centered:!0,className:"main-all-form-modal modal-disposal",footer:!1},l.a.createElement("div",{className:"row mx-0 confirm-modal-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},UR,{ref:this.formRef,className:"common-form warehouse-select-modal"}),l.a.createElement(Fm.a.Item,{name:"internal_locations",label:"Warehouses *",className:"position-relative remove-cross-icon search-overlap"},l.a.createElement(ku.a,{showSearch:!0,placeholder:"Search",notFoundContent:null,filterOption:!1,onFocus:function(){return a.props.fetchContacts()},onSearch:function(e){return a.props.fetchContacts({search:e})},onChange:function(e){a.props.handleSelect(e),a.formRef.current.resetFields(),a.props.showFacility(!1)}},null===(e=this.props.contacts)||void 0===e?void 0:e.map((function(e){return l.a.createElement(LR,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row"},l.a.createElement("div",{className:"common-select-option-row col-12"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block"},e.name),l.a.createElement("p",{style:{color:"#BDBDBD",fontWeight:"500",fontSize:"11px",lineHeight:"13px"},className:"mb-0 d-inline-block"},e.street_address||"",", ",e.city||"",","," ",e.state||"",",",e.zip||""," ",e.country||"")),l.a.createElement("div",{style:{paddingTop:"15px",display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Warehouse"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute text-capitalize",onClick:function(){return a.props.showFacility(!0)}},"+ Create"))))),l.a.createElement(qR,{callbackContact:this.props.callbackContact,fetchContacts:this.props.fetchContacts,editData:this.props.editData,visible:this.props.visibleInternal,onClose:function(e){return a.props.showContact(!1,e)}}))}}]),t}(n.Component),WR=fu.a.Panel,YR=ku.a.Option,KR={labelCol:{span:24},wrapperCol:{span:24}};var GR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).formRef=l.a.createRef(),n.mainRef=l.a.createRef(),n.populateVendorData=function(){var e,a,t,l,c,i,r,s,o,m,d,u,p;n.props.editVendorData&&(null===(e=n.formRef)||void 0===e?void 0:e.current)?(n.formRef.current.setFieldsValue({name:n.props.editVendorData.name,ein:null===(a=n.props.editVendorData)||void 0===a?void 0:a.ein,account_1099:null===(t=n.props.editVendorData)||void 0===t?void 0:t.account_1099}),n.mainRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},n.props.editVendorData.main_address),{},{phone_number:null===(l=n.props.editVendorData)||void 0===l||null===(c=l.main_address)||void 0===c?void 0:c.phone,apartment_1:null===(i=n.props.editVendorData.billing_address)||void 0===i?void 0:i.apartment,street_address_1:null===(r=n.props.editVendorData.billing_address)||void 0===r?void 0:r.street_address,country_1:null===(s=n.props.editVendorData.billing_address)||void 0===s?void 0:s.country,city_1:null===(o=n.props.editVendorData.billing_address)||void 0===o?void 0:o.city,state_1:null===(m=n.props.editVendorData.billing_address)||void 0===m?void 0:m.state,zip_code_1:null===(d=n.props.editVendorData.billing_address)||void 0===d?void 0:d.zip_code,county_1:null===(u=n.props.editVendorData.billing_address)||void 0===u?void 0:u.county}))):(null===(p=n.formRef)||void 0===p?void 0:p.current)&&n.formRef.current.setFieldsValue({country:"US",country_1:"US"})},n.populateData=function(e){var a;"2"==e&&((null===(a=n.mainRef)||void 0===a?void 0:a.current)&&n.mainRef.current.setFieldsValue({country:"US",country_1:"US"}))},n.showRequiredSuccessModal=function(e){n.setState({requiredSuccessModalVisible:e})},n.handleCreateVendor=function(e){var a=Object(wu.a)(Object(wu.a)({},e),{},{account_type:"VENDOR"});n.props.editVendorData?Mj(a,n.props.editVendorData.id).then((function(e){n.setState({vendor:e.data}),Mm.b.success("Vendor Account Updated Successfully"),n.props.editVendorData&&n.props.handleVendorInfo(e.data)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Rj(a).then((function(e){Mm.b.success("Vendor Account Created Successfully"),n.setState((function(a){return{vendor:e.data,unSavedExit:!0,activeKey:[].concat(Object(Ou.a)(a.activeKey),["2"])}})),n.props.handleVendorInfo(e.data,!0)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},n.handleSubmit=function(e){var a,t,l,c,i,r={street_address:e.street_address,apartment:e.apartment,county:e.county,city:e.city,state:e.state,zip_code:e.zip_code,country:e.country||"US",phone:e.phone_number,email:e.email,account:(null===(a=n.state.vendor)||void 0===a?void 0:a.id)||n.props.editVendorData.id},s={street_address:e.street_address_1,apartment:e.apartment_1,county:e.county_1,city:e.city_1,state:e.state_1,zip_code:e.zip_code_1,country:e.country_1||"US",is_same_main_address:n.state.checked,account:(null===(t=n.state.vendor)||void 0===t?void 0:t.id)||n.props.editVendorData.id};(null===(l=n.props.editVendorData)||void 0===l?void 0:l.main_address)&&(null===(c=n.props.editVendorData)||void 0===c?void 0:c.billing_address)?n.props.editVendorData&&Vj(r,null===(i=n.props.editVendorData)||void 0===i?void 0:i.main_address.id).then((function(e){var a;qj(s,null===(a=n.props.editVendorData)||void 0===a?void 0:a.billing_address.id).then((function(a){n.setState({main:e.data,billing:a.data},(function(){n.setState({unSavedExit:!1})})),Mm.b.success("Address updated Successfully"),n.props.handleVendorAddress(e.data,a.data)}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):Fj(r).then((function(e){Pj(s).then((function(a){n.setState({main:e.data,billing:a.data},(function(){n.setState({requiredSuccessModalVisible:!0},(function(){n.setState({unSavedExit:!1})}))})),Mm.b.success("Address created Successfully"),n.props.handleVendorAddress(e.data,a.data,!0)}))})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}));n.checkDisable()},n.handleCheckbox=function(e){n.setState({checked:e.target.checked},(function(){if(n.state.checked){var e=n.mainRef.current,a=e.setFieldsValue,t=e.getFieldValue;a({street_address_1:t("street_address"),apartment_1:t("apartment"),country_1:t("country"),city_1:t("city"),state_1:t("state"),zip_code_1:t("zip_code"),county_1:t("county")})}}))},n.phoneNumberValidate=function(e,a,t){(null===a||void 0===a?void 0:a.toString().length)<10?t("minimum digits should be 10"):t()},n.checkDisable=function(){return!(n.state.vendor&&n.state.main&&n.state.billing)},n.onCollapseChange=function(e){console.log(e,"active"),n.setState((function(a){return{activeKey:e}}))},n.handleClose=function(){n.setState({activeKey:["1"]}),n.props.onClose()},n.onNumberOnlyChange=function(e){var a=e.keyCode||e.which,t=String.fromCharCode(a);new RegExp("[0-9]").test(t)||e.preventDefault()},n.handleEinChange=function(e){var a=wd(e.target.value);n.setState({ein:a},(function(){n.formRef.current.setFieldsValue({ein:n.state.ein})}))},n.handleCountyChange=function(e){n.mainRef.current.setFieldsValue({state:null});var a=n.state.county.filter((function(a){return a.county===e}));n.setState({updateMainState:a}),1===(null===a||void 0===a?void 0:a.length)&&n.mainRef.current.setFieldsValue({state:a[0].state})},n.handleBillingCountyChange=function(e){n.mainRef.current.setFieldsValue({state_1:null});var a=n.state.county.filter((function(a){return a.county===e}));n.setState({updateBillingState:a}),1===(null===a||void 0===a?void 0:a.length)&&n.mainRef.current.setFieldsValue({state_1:a[0].state})},n.state={checked:!1,requiredSuccessModalVisible:!1,unSavedExit:!1,activeKey:["1"],county:[],updateMainState:null,updateBillingState:null},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data}),e.setState({updateBillingState:a.data})})).catch((function(a){td(a),e.setState({load:!1})}))}},{key:"render",value:function(){var e=this,a=this.props.editVendor,t=this.state,n=t.county,c=t.updateMainState,i=t.updateBillingState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:a?"Edit Vendor":"Create Vendor",visible:this.props.visible,onOk:this.props.onClose,afterVisibleChange:this.populateVendorData,closable:!0,onClose:function(){e.state.unSavedExit?e.setState({drawerVisible:!0}):e.handleClose()},onCancel:function(){e.state.unSavedExit?e.setState({drawerVisible:!0}):e.handleClose()},className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){e.state.unSavedExit?e.setState({drawerVisible:!0}):e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{type:"primary",disabled:this.checkDisable(),onClick:this.props.onClose},"Create Vendor"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:this.onCollapseChange,activeKey:this.state.activeKey,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(WR,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleCreateVendor},KR,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Account Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_type",label:"Account Type *"},l.a.createElement(Pm.a,{disabled:!0,placeholder:"Vendor"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"ein",label:"EIN",rules:[]},l.a.createElement(Pm.a,{placeholder:"00-0000000",onKeyPress:this.onNumberOnlyChange,maxLength:"10",onChange:this.handleEinChange}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"epa_id",label:"EPA ID",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"ABC123456789"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"account_1099",label:"1099",rules:[]},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(ku.a.Option,{value:"YES"},"Yes"),l.a.createElement(ku.a.Option,{value:"NO"},"No")))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(WR,{disabled:!this.state.vendor&&!this.props.editVendorData,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information *"))),key:"2",forceRender:!0},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",Object.assign({},KR,{className:"main-inner-form"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement(Fm.a,Object.assign({},KR,{ref:this.mainRef,onFinish:this.handleSubmit,className:"main-inner-form w-100"}),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mt-3"},"Main Address")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},n.map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"please input your city"}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(c,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"please input your zip"}]},l.a.createElement(Pm.a,{placeholder:"ZIP/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",initialValue:"US",rules:[{required:!0,message:"please select your Country"}]},l.a.createElement(ku.a,null,np.map((function(e){return l.a.createElement(YR,{value:e.code,key:e.code},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone_number",label:"Phone Number *",rules:[{required:!0,message:"please input your phone number"},{validator:this.phoneNumberValidate}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")},maxLength:12,parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"Phone Number"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"please input your Email"}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))),l.a.createElement("div",{className:"hr-line col-12"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 my-3 align-items-center justify-content-between"},l.a.createElement("h5",{className:"m-0"},"Billing Address"),l.a.createElement(Fm.a.Item,{name:"is_same_main_address"},l.a.createElement(tp.a,{checked:this.state.checked,onChange:function(a){return e.handleCheckbox(a)}},"Same as Main Address")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address_1",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"apartment_1",label:"Apartment, Suite, etc",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-6"},l.a.createElement(Fm.a.Item,{name:"county_1",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleBillingCountyChange,placeholder:"Select"},Object(lp.uniqBy)(n,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city_1",label:"City *",rules:[{required:!0,message:"please input your city"}]},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state_1",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(i,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code_1",label:"ZIP/Postal Code *",rules:[{required:!0,message:"please input your zip"}]},l.a.createElement(Pm.a,{placeholder:"ZIP/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country_1",label:"Country *",initialValue:"US",rules:[{required:!0,message:"please select your Country"}]},l.a.createElement(ku.a,null,np.map((function(e){return l.a.createElement(YR,{value:e.code,key:e.code},e.name)}))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and continue")))))))))))))))),l.a.createElement(Hh,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",onOK:function(){e.showRequiredSuccessModal(!1)},okText:"Continue"}),l.a.createElement(wp,{visible:this.state.drawerVisible,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){e.props.onClose(),e.setState({drawerVisible:!1,activeKey:["1"],vendor:null})},onCancel:function(){e.setState({drawerVisible:!1})}}))}}]),t}(n.Component),zR=ku.a.Option,HR={labelCol:{span:24},wrapperCol:{span:24}},$R=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleCreate=function(){e.props.showVendorDrawer(!0),e.props.modalClose()},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{width:"548px",title:"Add Vendor",visible:this.props.visible,onOk:this.props.onClose,onClose:this.props.onClose,onCancel:this.props.onClose,centered:!0,className:"main-all-form-modal modal-disposal",footer:!1},l.a.createElement("div",{className:"row mx-0 confirm-modal-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},HR,{ref:this.formRef,className:"common-form warehouse-select-modal"}),l.a.createElement(Fm.a.Item,{name:"internal_locations",label:"Vendors *",className:"position-relative remove-cross-icon search-overlap"},l.a.createElement(ku.a,{showSearch:!0,placeholder:"Search",filterOption:!1,onFocus:function(){return e.props.getAllAccounts()},onSearch:function(a){return e.props.getAllAccounts({search:a,type:"DISPOSAL"})},onChange:function(a){e.props.handleSelectVendor(a),e.formRef.current.resetFields()}},this.props.location.map((function(e){var a,t,n,c,i;return l.a.createElement(zR,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row"},l.a.createElement("div",{className:"common-select-option-row col-12"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("img",{src:Rm.vendor_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block"},e.name),l.a.createElement("p",{style:{color:"#BDBDBD",fontWeight:"500",fontSize:"11px",lineHeight:"13px"},className:"mb-0 d-inline-block"},(null===(a=e.main_address)||void 0===a?void 0:a.street_address)||"",","," ",(null===(t=e.main_address)||void 0===t?void 0:t.city)||"",","," ",(null===(n=e.main_address)||void 0===n?void 0:n.state)||"",",",(null===(c=e.main_address)||void 0===c?void 0:c.zip_code)||""," ",(null===(i=e.main_address)||void 0===i?void 0:i.country)||"")),l.a.createElement("div",{style:{paddingTop:"15px",display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Vendor"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute",onClick:function(){return e.handleCreate()}},"+ Create"))))),l.a.createElement(GR,{visible:this.props.visibleVendor,onClose:function(){return e.props.showVendorDrawer(!1)},handleVendorInfo:this.props.handleVendorInfo,handleVendorAddress:this.props.handleVendorAddress,editVendorData:this.props.editVendorData,editVendor:this.props.editVendor}))}}]),t}(n.Component),QR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={unitValue:"",unitCost:"",edited:!1,unitType:"",tableData:"",uomData:""},e.priceMenu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"w-100 p-0 text-left bg-transparent border-0 shadow-none",onClick:function(){return e.handleEditPrice(a)}},"Edit")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"w-100 p-0 text-left bg-transparent border-0 shadow-none",onClick:function(){return e.handleDeletePrice(a.id)}},"Remove")))},e.handleDeletePrice=function(a){Lg(a).then((function(a){e.props.getDisposalLocation()}))},e.handleEditPrice=function(a){var t,n,l,c;e.setState({edited:!0,tableData:a,uomData:(null===(t=a.uom)||void 0===t?void 0:t.symbol)||(null===(n=a.com)||void 0===n?void 0:n.abbreviation)}),e.formRef.current.setFieldsValue({margin:"".concat(parseInt(a.margin).toFixed(2),"%"),max_qty:a.max_qty,min_qty:a.min_qty,qty:a.qty,unit_cost:a.unit_cost,unit_type:"UOM"===a.unit_type?null===(l=a.uom)||void 0===l?void 0:l.id:"COM_".concat(null===(c=a.com)||void 0===c?void 0:c.id)});var i=Rd(a.unit_cost,a.margin);e.formRef.current.setFieldsValue({unit_price:i})},e.handleAddData=function(a){if(console.log(a,"value on add"),e.setState({uomData:""}),e.state.edited){var t=Object(wu.a)(Object(wu.a)({},a),{},{margin:a.margin.split(".")[0]});isNaN(parseInt(a.unit_type))?(t.unit_type="COM",t.com=a.unit_type.split("_")[1]):(t.unit_type="UOM",t.uom=a.unit_type),Bg(e.state.tableData.id,t).then((function(a){e.props.getDisposalLocation(),e.formRef.current.setFieldsValue({margin:"",min_qty:"",max_qty:"",qty:"",unit_cost:"",unit_type:null,unit_price:""})})).catch((function(e){td(e)})),e.setState({edited:!1})}else{var n,l={disposal:e.props.disposal.id,single_location_id:e.props.warehouseData.id,price_data:{min_qty:a.min_qty,max_qty:a.max_qty,qty:a.qty,unit_cost:a.unit_cost,margin:null===(n=a.margin)||void 0===n?void 0:n.split("%")[0]}};isNaN(parseInt(a.unit_type))?(l.price_data.unit_type="COM",l.price_data.com=a.unit_type.split("_")[1]):(l.price_data.unit_type="UOM",l.price_data.uom=a.unit_type),qg(l).then((function(a){e.props.getDisposalLocation(),e.setState({unitCost:0}),e.formRef.current.setFieldsValue({margin:"",min_qty:"",max_qty:"",qty:"",unit_cost:"",unit_type:null,unit_price:""})})).catch((function(e){td(e)}))}},e.onValuesChange=function(a,t){var n=Rd(t.unit_cost,t.margin);e.formRef.current.setFieldsValue({unit_price:n})},e.handleUomValue=function(a){if("number"===typeof a){var t=e.props.disposal.uom_array.find((function(e){return e.id==a}));e.setState({uomData:t.symbol})}else{var n=a.split("_"),l=e.props.disposal.com.find((function(e){return e.id==n[1]}));e.setState({uomData:l.abbreviation})}},e.onBlurMarginValue=function(a){a.target.value&&e.formRef.current.setFieldsValue({margin:"".concat(parseInt(a.target.value).toFixed(2),"%")})},e.onFocusMarginValue=function(a){console.log(a.target.value,"values"),e.formRef.current.setFieldsValue({margin:a.target.value.replace("%","")})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i=this,r=this.props,s=r.warehouseData,o=r.index;return l.a.createElement(Fm.a,{ref:this.formRef,layout:"vertical",onFinish:this.handleAddData,hideRequiredMark:!0,onValuesChange:this.onValuesChange,className:"main-inner-form"},l.a.createElement("div",{className:"col-12 location-row-main border-0 mb-0"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card site-details-row-card-2 radius-bottom-0  position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,s.internal_location.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(s.internal_location.street_address," ").concat(s.internal_location.name," ").concat(s.internal_location.city," ").concat(s.internal_location.state," ").concat(s.internal_location.country))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},s.internal_location.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(s.internal_location.phone))),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return i.props.menu(s,o)},trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"row rounded-0 border-bottom-0 vendor-details-with-warehouse-div"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{className:"position-relative",name:"item_reference_number",label:"Reference Number"},l.a.createElement(Pm.a,{placeholder:"00000",type:"number",onWheel:function(e){return e.currentTarget.blur()},defaultValue:s.reference_number}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{className:"position-relative",name:"note",label:"Note"},l.a.createElement(Pm.a,{placeholder:"Note",onWheel:function(e){return e.currentTarget.blur()},defaultValue:s.note}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{label:"Margin*",name:"margin",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"0.00%",style:{paddingLeft:0},onBlur:this.onBlurMarginValue,onFocus:this.onFocusMarginValue}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{className:"position-relative",name:"unit_price",label:"Unit Price"},l.a.createElement(ap.a,{placeholder:"0.00",disabled:!0,style:{paddingLeft:12},formatter:function(e){return"$".concat(e)}})),l.a.createElement("small",{className:"position-absolute unit-cost-name unit-uom"},this.state.uomData)),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{label:"Unit of Measurement *",name:"unit_type",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Option",onChange:this.handleUomValue,value:this.state.unitType},null===(e=this.props.disposal)||void 0===e||null===(a=e.uom_array)||void 0===a?void 0:a.map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},e.name," (",e.symbol,")")})),null===(t=this.props.disposal)||void 0===t||null===(n=t.com)||void 0===n?void 0:n.map((function(e){var a="COM_".concat(e.id);return l.a.createElement(ku.a.Option,{key:a,value:a},e.name," (",e.abbreviation,")")})))),l.a.createElement("small",{className:"small-text-input"},"You're choosing Unit of Measurement's from your pre-",l.a.createElement("br",null),"selected custom and universal Unit of Measurement.")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{className:"position-relative",name:"unit_cost",label:"Unit Cost *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{placeholder:"0.00",style:{paddingLeft:12},value:this.state.unitCost||s.unit_cost,formatter:function(e){return"$".concat(e)},parser:function(e){return e.replace("$","")}})),l.a.createElement("small",{className:"position-absolute unit-cost-name unit-uom"},this.state.uomData))),l.a.createElement("div",{className:"row custom-design-update"},l.a.createElement("div",{className:"col-12 table-responsive custom-internal-location"},l.a.createElement("div",{className:"row mx-0 custom-table-thead"},l.a.createElement("div",{className:"custom-th-main"},l.a.createElement("div",null,"Min QTY")),l.a.createElement("div",{className:"custom-th-main"},l.a.createElement("div",null,"Max QTY",l.a.createElement("br",null),l.a.createElement("span",{className:"font-weight-light"},"(CAPACITY)"))),l.a.createElement("div",{className:"custom-th-main"},l.a.createElement("div",null,"QTY"))),l.a.createElement("div",{className:"row mx-0 custom-table-tbody"},l.a.createElement("div",{className:"custom-td position-relative"},l.a.createElement(Fm.a.Item,{name:"min_qty"},l.a.createElement(ap.a,null)),l.a.createElement("small",{style:{top:"22px"},className:"position-absolute unit-cost-name"},this.state.uomData)),l.a.createElement("div",{className:"custom-td position-relative"},l.a.createElement(Fm.a.Item,{name:"max_qty"},l.a.createElement(ap.a,null)),l.a.createElement("small",{style:{top:"22px"},className:"position-absolute unit-cost-name"},this.state.uomData)),l.a.createElement("div",{className:"custom-td position-relative"},l.a.createElement(Fm.a.Item,{name:"qty"},l.a.createElement(ap.a,null)),l.a.createElement("small",{style:{top:"22px"},className:"position-absolute unit-cost-name"},this.state.uomData)))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right my-3"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},this.state.edited?"EDIT":"ADD"))),l.a.createElement("div",{className:"col-12 pb-3"},l.a.createElement("div",{className:"row"},(null===(c=s.price_data)||void 0===c?void 0:c.length)?l.a.createElement("div",{className:"col-12 fleet-kit-table disposal-priceunit-table table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"UOM"),l.a.createElement("th",null,"Unit Cost"),l.a.createElement("th",null,"Min QTY"),l.a.createElement("th",null,"Max QTY"),l.a.createElement("th",null,"Current QTY"),l.a.createElement("th",null,"Margin"),l.a.createElement("th",null,"PRICE PER UNIT"))),l.a.createElement("tbody",null,s.price_data.map((function(e){var a,t;return l.a.createElement("tr",null,l.a.createElement("td",null,(null===(a=e.uom)||void 0===a?void 0:a.symbol)||(null===(t=e.com)||void 0===t?void 0:t.abbreviation)||"-"),l.a.createElement("td",null,e.unit_cost||"-"),l.a.createElement("td",null,e.min_qty||"-"),l.a.createElement("td",null,e.max_qty||"-"),l.a.createElement("td",null,e.qty||"-"),l.a.createElement("td",null,e.margin?"".concat(parseInt(e.margin).toFixed(2),"%"):"-"),l.a.createElement("td",{className:"position-relative"},Rd(e.unit_cost,e.margin),l.a.createElement(xu.a,{placement:"bottomCenter",overlayClassName:"add-remove-dropdown-main",overlay:function(){return i.priceMenu(e)},trigger:["click"]},l.a.createElement("a",{style:{top:0,bottom:0,margin:"auto",height:"45%"},className:"ant-dropdown-link more-btn-tag position-absolute",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Unit Price"))))))))))}}]),t}(n.Component),JR=Object(r.withRouter)(QR),ZR=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={edited:!1,tableData:""},e.priceMenu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"w-100 p-0 text-left bg-transparent border-0 shadow-none",onClick:function(){return e.handleEditPrice(a)}},"Edit")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"w-100 p-0 text-left bg-transparent border-0 shadow-none",onClick:function(){return e.handleDeletePrice(a.id)}},"Remove")))},e.handleDeletePrice=function(a){Ug(a).then((function(a){e.props.getDisposalVendor()}))},e.handleEditPrice=function(a){var t,n;e.setState({edited:!0,tableData:a}),e.formRef.current.setFieldsValue({margin:"".concat(parseInt(a.margin).toFixed(2),"%"),unit_cost:a.unit_cost,unit_type:"UOM"===a.unit_type?null===(t=a.vendor_uom)||void 0===t?void 0:t.id:"COM_".concat(null===(n=a.vendor_com)||void 0===n?void 0:n.id)});var l=Rd(a.unit_cost,a.margin);e.formRef.current.setFieldsValue({unit_price:l})},e.handleAddVendor=function(a){if(e.state.edited){var t=Object(wu.a)(Object(wu.a)({},a),{},{margin:a.margin.split(".")[0]});isNaN(parseInt(a.unit_type))?(t.unit_type="COM",t.vendor_com=a.unit_type.split("_")[1]):(t.unit_type="UOM",t.vendor_uom=a.unit_type),Wg(e.state.tableData.id,t).then((function(a){e.props.getDisposalVendor(),e.formRef.current.setFieldsValue({margin:"",unit_cost:"",unit_type:null,unit_price:""})})).catch((function(e){td(e)})),e.setState({edited:!1})}else{var n,l={disposal:e.props.disposal.id,single_vendor_id:e.props.vendorData.id,price_data:{unit_cost:a.unit_cost,margin:null===(n=a.margin)||void 0===n?void 0:n.split("%")[0]}};isNaN(parseInt(a.unit_type))?(l.price_data.unit_type="COM",l.price_data.com=a.unit_type.split("_")[1]):(l.price_data.unit_type="UOM",l.price_data.uom=a.unit_type),zg(l).then((function(a){e.props.getDisposalVendor(),e.formRef.current.setFieldsValue({margin:"",unit_cost:"",unit_type:null,unit_price:""})})).catch((function(e){td(e)}))}},e.onBlurMarginValue=function(a){a.target.value&&e.formRef.current.setFieldsValue({margin:"".concat(parseInt(a.target.value).toFixed(2),"%")})},e.onFocusMarginValue=function(a){e.formRef.current.setFieldsValue({margin:a.target.value.replace("%","")})},e.onValuesChange=function(a,t){var n=Rd(t.unit_cost,t.margin);e.formRef.current.setFieldsValue({unit_price:n})},e.formRef=l.a.createRef(),e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N=this,y=this.props,w=y.vendorData,_=y.index;return l.a.createElement(Fm.a,{ref:this.formRef,layout:"vertical",onFinish:this.handleAddVendor,onValuesChange:this.onValuesChange,hideRequiredMark:!0,className:"main-inner-form"},l.a.createElement("div",{className:"col-12 location-row-main border-0 mb-0",key:null===(e=w.vendor)||void 0===e?void 0:e.id},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card site-details-row-card-2 radius-bottom-0  position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.vendor_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===(a=w.vendor)||void 0===a?void 0:a.name))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat((null===(t=w.vendor)||void 0===t||null===(n=t.main_address)||void 0===n?void 0:n.street_address)||""," ").concat((null===(c=w.vendor)||void 0===c||null===(i=c.main_address)||void 0===i?void 0:i.city)||""," ").concat((null===(r=w.vendor)||void 0===r||null===(s=r.main_address)||void 0===s?void 0:s.state)||""," ").concat((null===(o=w.vendor)||void 0===o||null===(m=o.main_address)||void 0===m?void 0:m.country)||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},(null===(d=w.vendor)||void 0===d||null===(u=d.main_address)||void 0===u?void 0:u.email)||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(null===(p=w.vendor)||void 0===p||null===(v=p.main_address)||void 0===v?void 0:v.phone)||"-")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return N.props.vendor_menu(w,_)},trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"row vendor-details-with-warehouse-div"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{className:"position-relative",name:"item_reference_number",label:"Reference Number"},l.a.createElement(Pm.a,{placeholder:"00000",type:"number",onWheel:function(e){return e.currentTarget.blur()},defaultValue:w.reference_number}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{className:"position-relative",name:"note",label:"Note"},l.a.createElement(Pm.a,{placeholder:"Note",onWheel:function(e){return e.currentTarget.blur()},defaultValue:w.note}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{label:"Margin",name:"margin",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"0.00%",style:{paddingLeft:0},onBlur:this.onBlurMarginValue,onFocus:this.onFocusMarginValue}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{className:"position-relative",name:"unit_price",label:"Unit Price"},l.a.createElement(ap.a,{placeholder:"0.00",disabled:!0,style:{paddingLeft:12},formatter:function(e){return"$".concat(e)}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{label:"Unit of Measurement *",name:"unit_type",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Option"},null===(h=this.props.disposal)||void 0===h||null===(f=h.uom_array)||void 0===f?void 0:f.map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},e.name," (",e.symbol,")")})),null===(E=this.props.disposal)||void 0===E||null===(g=E.com)||void 0===g?void 0:g.map((function(e){var a="COM_".concat(e.id);return l.a.createElement(ku.a.Option,{key:a,value:a},e.name," (",e.abbreviation,")")})))),l.a.createElement("small",{className:"small-text-input"},"You're choosing Unit of Measurement's from your pre-",l.a.createElement("br",null),"selected custom and universal Unit of Measurement.")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{className:"position-relative",name:"unit_cost",label:"Unit Cost *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{placeholder:"0.00",style:{paddingLeft:12},value:w.unit_cost,formatter:function(e){return"$".concat(e)},parser:function(e){return e.replace("$","")}}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right my-3"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},this.state.edited?"EDIT":"ADD"))),l.a.createElement("div",{className:"col-12 pb-3"},l.a.createElement("div",{className:"row"},(null===(b=w.price_data)||void 0===b?void 0:b.length)?l.a.createElement("div",{className:"col-12 fleet-kit-table disposal-priceunit-table table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"UOM"),l.a.createElement("th",null,"Unit Cost"),l.a.createElement("th",null,"Margin"),l.a.createElement("th",null,"Price Per Unit"))),l.a.createElement("tbody",null,w.price_data.map((function(e){var a,t;return l.a.createElement("tr",null,l.a.createElement("td",null,(null===(a=e.vendor_uom)||void 0===a?void 0:a.symbol)||(null===(t=e.vendor_com)||void 0===t?void 0:t.abbreviation)||"-"),l.a.createElement("td",null,e.unit_cost||"-"),l.a.createElement("td",null,e.margin?"".concat(parseInt(e.margin).toFixed(2),"%"):"-"),l.a.createElement("td",{className:"position-relative"},Rd(e.unit_cost,e.margin),l.a.createElement(xu.a,{placement:"bottomCenter",overlayClassName:"add-remove-dropdown-main",overlay:function(){return N.priceMenu(e)},trigger:["click"]},l.a.createElement("a",{style:{top:0,bottom:0,margin:"auto",height:"45%"},className:"ant-dropdown-link more-btn-tag position-absolute",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Unit Price"))))))))))}}]),t}(n.Component),XR=Object(r.withRouter)(ZR),eM=(ku.a.Option,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={visible:!1,location:[],selectValue:null,sites:[],newSites:[],visibleWarehouse:!1,visibleVendor:!1,visibleVendorDrawer:!1,newLoc:[],unitPrice:[],unitData:"",unitCost:""},e.showWareHouse=function(a){e.setState({visibleWarehouse:a})},e.showVendor=function(a){e.setState({visibleVendor:a,editVendor:!1,editVendorData:null})},e.showFacility=function(a){e.setState({visible:a})},e.handleRemovePopup=function(a,t){e.setState({warningVisible:t,item:a})},e.showWarningModal=function(a){e.setState({warningVisible:a})},e.showWarningVendorModal=function(a){e.setState({warningVendorVisible:a})},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent",onClick:function(){return e.handleRemovePopup(a.id,!0)}},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent",onClick:function(){return e.handleEdit(a.internal_location)}},"Edit")))},e.getDisposalLocation=function(){var a;Vg({disposal:e.props.match.params.id||(null===(a=e.props.disposal)||void 0===a?void 0:a.id)}).then((function(a){e.setState({newSites:a.data.results[0].location})})).catch((function(e){td(e)}))},e.getDisposalVendor=function(){var a;Gg({disposal:e.props.match.params.id||(null===(a=e.props.disposal)||void 0===a?void 0:a.id)}).then((function(a){e.setState({newLoc:a.data.results[0].vendor})})).catch((function(e){td(e)}))},e.fetchContacts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(wu.a)({},a);av(t).then((function(a){e.setState({contacts:a.data.results})})).catch((function(e){}))},e.handleEdit=function(a){e.setState({editData:a,visible:!0})},e.handleEditVendor=function(a){e.setState({editVendorData:a,editVendor:!0,visibleVendorDrawer:!0})},e.handleRemove=function(){var a=e.state.item;Kg(a).then((function(t){var n=Object(Ou.a)(e.state.newSites).filter((function(e){return a!==e.id}));e.setState({newSites:n},(function(){e.props.getDisposalItem()})),Mm.b.success("deleted successfully!")})).catch((function(e){td(e)}))},e.handleSubmit=function(){e.props.setDisposal(e.props.disposal,6),e.props.getDisposalItem(),Mm.b.success("Disposal updated successfully!")},e.showContact=function(){e.setState({visible:!1,editData:null})},e.showVendorContact=function(){e.setState({visibleVendor:!1,editVendorData:null})},e.modalClose=function(){e.setState({visibleVendor:!1})},e.handleSelect=function(a){var t=e.props.match.params.id?e.props.match.params.id:e.props.disposal.id,n=e.state.newSites.map((function(e){return e.internal_location.id})),l=e.state.contacts.find((function(e){return a==e.id}));n.push(l.id),e.setState({sites:n}),qg({disposal:t,uom:e.state.selectValue,internal_location_id:n.map((function(e){return e})),location:[]}).then((function(a){e.props.getDisposalItem(),e.setState({newSites:a.data.location}),e.showWareHouse(!1)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleVendorInfo=function(a,t){if(t){var n=e.state.newLoc.map((function(e){return e.vendor}));n.push(a),zg({disposal:e.props.match.params.id||e.props.disposal.id,uom:e.state.selectValue,vendor_id:n.map((function(e){return e.id})),vendor:[]}).then((function(a){var t;e.setState({newLoc:null===(t=a.data)||void 0===t?void 0:t.vendor}),e.showVendorContact()})).catch((function(e){e.response.data&&500!==e.response.status&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){}))}else{var l=e.state.newLoc.findIndex((function(e){return e.vendor.id==a.id})),c=e.state.newLoc.slice();c[l].vendor=a,e.setState({newLoc:c})}},e.handleVendorAddress=function(a,t,n){var l=e.state.newLoc.slice();if(n){var c=e.state.newLoc.findIndex((function(e){var t;return(null===(t=e.vendor)||void 0===t?void 0:t.id)==a.account}));l[c].vendor.main_address=a,l[c].vendor.billing_address=t}else{if(a)l[e.state.newLoc.findIndex((function(e){var t,n;return(null===(t=e.vendor)||void 0===t||null===(n=t.main_address)||void 0===n?void 0:n.id)==a.id}))].vendor.main_address=a;if(t)l[e.state.newLoc.findIndex((function(e){var a,n;return(null===(a=e.vendor)||void 0===a||null===(n=a.billing_address)||void 0===n?void 0:n.id)==t.id}))].vendor.billing_address=t}e.setState({newLoc:l})},e.callbackContact=function(a,t){if(t){var n=e.state.newSites.map((function(e){return e.internal_location}));n.push(a),qg({disposal:e.props.match.params.id||e.props.disposal.id,uom:e.state.selectValue,internal_location_id:n.map((function(e){return e.id})),location:[]}).then((function(a){e.setState({newSites:a.data.location}),e.showContact(),e.showWareHouse(!1)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))}else{var l=e.state.newSites.findIndex((function(e){return e.internal_location.id==a.id})),c=e.state.newSites.slice();c[l].internal_location=a,e.setState({newSites:c})}},e.handleQtyChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].qty=l,e.setState({newSites:c});var i={qty:l,type:"DISPOSAL",id:t.id,disposal_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleMinQtyChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].min_qty=l,e.setState({newSites:c});var i={min_qty:l,type:"DISPOSAL",id:t.id,disposal_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleMaxQtyChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].max_qty=l,e.setState({newSites:c});var i={max_qty:l,type:"DISPOSAL",id:t.id,disposal_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleRefNumChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].reference_number=l,e.setState({newSites:c});var i={reference_number:l,type:"DISPOSAL",id:t.id,disposal_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleNoteChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].note=l,e.setState({newSites:c});var i={note:l,type:"DISPOSAL",id:t.id,disposal_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleMarginChange=function(a,t,n){var l=a.target.value.replace("%","");if(l){var c=e.state.newSites.slice();c[n].margin=l,e.setState({newSites:c});var i={margin:l,type:"DISPOSAL",id:t.id,disposal_id:e.props.match.params.id};e.updateLocation(i,t)}},e.handleVendorMarginChange=function(a,t,n){var l=a.target.value.replace("%","");if(l){var c=e.state.newLoc.slice();c[n].margin=l,e.setState({newLoc:c});var i={margin:l,type:"DISPOSAL",id:t.id,disposal_id:e.props.match.params.id};e.updateVendorMeasurement(i,t)}},e.handleUnitCostChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newSites.slice();c[n].unit_cost=l,e.setState({newSites:c});var i={unit_cost:l,type:"DISPOSAL",id:t.id,disposal_id:e.props.match.params.id};e.setState({unitCost:i.unit_cost})}},e.handleItemSelectChange=function(a,t,n){if(a){var l,c="string"===typeof a&&a.includes("COM")?"COM":"UOM",i={},r=e.state.newSites.slice();if("COM"===c){var s=null===a||void 0===a?void 0:a.split("_");l=s[s.length-1],r[n].com=l,r[n].unit_type=c,i.com=l}else l=a,r[n].uom=l,r[n].unit_type=c,i.uom=l;e.setState({newSites:r}),i=Object(wu.a)(Object(wu.a)({},i),{},{id:t.id,type:"DISPOSAL",unit_type:c,disposal_id:e.props.match.params.id}),e.setState({unitData:i})}},e.updateLocation=function(a,t){e.setState({unitData:a}),Yg(t.id,a).then((function(e){})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleSelectChange=function(){e.setState({selectValue:e.formRef.current.getFieldValue("uom").value})},e.getAllAccounts=function(a){Dj(a).then((function(a){e.setState({location:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.updateVendorMeasurement=function(e,a){Hg(a.id,e).then((function(e){})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.handleVendorRefNumChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newLoc.slice();c[n].reference_number=l,e.setState({newLoc:c});var i={reference_number:l,id:t.id,disposal_id:e.props.match.params.id};e.updateVendorMeasurement(i,t)}},e.handleVendorNoteChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newLoc.slice();c[n].note=l,e.setState({newLoc:c});var i={note:l,id:t.id,disposal_id:e.props.match.params.id};e.updateVendorMeasurement(i,t)}},e.handleVendorUnitCostChange=function(a,t,n){var l=a.target.value;if(l){var c=e.state.newLoc.slice();c[n].unit_cost=l,e.setState({newLoc:c});var i={unit_cost:l,id:t.id,disposal_id:e.props.match.params.id};e.updateVendorMeasurement(i,t)}},e.handleVendorItemSelectChange=function(a,t,n){if(a){var l,c="string"===typeof a&&a.includes("COM")?"COM":"UOM",i={},r=e.state.newLoc.slice();if("COM"===c){var s=null===a||void 0===a?void 0:a.split("_");l=s[s.length-1],r[n].vendor_com=l,r[n].unit_type=c,i.vendor_com=l}else l=a,r[n].vendor_uom=l,r[n].unit_type=c,i.vendor_uom=l;e.setState({newLoc:r}),i=Object(wu.a)(Object(wu.a)({},i),{},{id:t.id,type:"DISPOSAL",unit_type:c,disposal_id:e.props.match.params.id}),e.updateVendorMeasurement(i,t)}},e.handleSelectVendor=function(a){var t=e.props.match.params.id?e.props.match.params.id:e.props.disposal.id,n=e.state.newLoc.map((function(e){return e.vendor.id})),l=e.state.location.find((function(e){return a==e.id}));n.push(l.id),zg({disposal:Number(t),uom:e.state.selectValue,vendor_id:n.map((function(e){return e})),vendor:[]}).then((function(a){e.setState({newLoc:a.data.vendor}),e.showVendor(!1)})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.showVendorDrawer=function(a){e.setState({visibleVendorDrawer:a})},e.handleVendorRemove=function(a,t){e.setState({vendorItem:a,warningVendorVisible:t})},e.vendor_menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent",onClick:function(){return e.handleVendorRemove(a.id,!0)}},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent",onClick:function(){e.handleEditVendor(a.vendor)}},"Edit")))},e.handleRemoveVendor=function(){var a=e.state.vendorItem;$g(a).then((function(t){var n=Object(Ou.a)(e.state.newLoc).filter((function(e){return a!==e.id}));e.setState({newLoc:n}),Mm.b.success("deleted successfully!")})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.getDisposalLocation(),this.getDisposalVendor())}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 px-0"},l.a.createElement("div",{className:"row col-12-12"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mb-0 mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add warehouses and vendors to this disposal."))),l.a.createElement("div",{className:"col-12 margin-tb-30"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Vm.a,{onClick:function(){return e.showWareHouse(!0)},className:"edit-create-btn w-100 text-uppercase"},"Add warehouse")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Vm.a,{onClick:function(){return e.showVendor(!0)},className:"edit-create-btn w-100 text-uppercase"},"Add vendor")))),this.state.newSites.length>0?this.state.newSites.map((function(a,t){var n,c,i,r=null===(n=e.props.disposal)||void 0===n||null===(c=n.uom_array)||void 0===c||null===(i=c.find((function(e){return e.id===a.uom})))||void 0===i?void 0:i.symbol;return l.a.createElement(JR,{warehouseData:a,menu:e.menu,index:t,handleRefNumChange:e.handleRefNumChange,handleNoteChange:e.handleNoteChange,handleItemSelectChange:e.handleItemSelectChange,getDisposalLocation:e.getDisposalLocation,handleUnitCostChange:e.handleUnitCostChange,unitData:e.state.unitData,disposal:e.props.disposal,unitCost:e.state.unitCost,selectName:r})})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Warehouses")))),l.a.createElement("div",{className:"col-12 divider-line mt-4"}),this.state.newLoc.length>0?this.state.newLoc.map((function(a,t){var n,c,i;null===(n=e.props.disposal)||void 0===n||null===(c=n.uom_array)||void 0===c||null===(i=c.find((function(e){return e.id===a.vendor_uom})))||void 0===i||i.symbol;return l.a.createElement(XR,{vendorData:a,index:t,disposal:e.props.disposal,getDisposalVendor:e.getDisposalVendor,vendor_menu:e.vendor_menu})})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.vendor_gray_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Vendor"))))),l.a.createElement("div",{className:"col-12 p-0 validate-div-col text-md-right mt-0"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))),l.a.createElement(BR,{visible:this.state.visibleWarehouse,onClose:function(){return e.showWareHouse(!1)},handleSelect:this.handleSelect,contacts:this.state.contacts,selectValue:this.state.selectValue,showFacility:function(a){return e.showFacility(a)},visibleInternal:this.state.visible,editData:this.state.editData,showContact:this.showContact,callbackContact:this.callbackContact,fetchContacts:this.fetchContacts}),l.a.createElement($R,{visible:this.state.visibleVendor,editVendor:this.state.editVendor,onClose:function(){return e.showVendor(!1)},visibleVendor:this.state.visibleVendorDrawer,showVendorDrawer:function(a){return e.showVendorDrawer(a)},getAllAccounts:this.getAllAccounts,location:this.state.location,modalClose:this.modalClose,handleSelectVendor:this.handleSelectVendor,editVendorData:this.state.editVendorData,handleVendorInfo:this.handleVendorInfo,handleVendorAddress:this.handleVendorAddress}),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to remove this Warehouse?",subHeadingUOM:"If you choose to remove this Warehouse, and you already have service variants set up, this might cause issues",common:!0,commonFunc:function(){e.handleRemove(),e.showWarningModal(!1)}}),l.a.createElement(iv,{visible:this.state.warningVendorVisible,onClose:function(){return e.showWarningVendorModal(!1)},heading:"Are you sure you want to remove this Vendor?",subHeadingUOM:"If you choose to remove this Vendor, and you already have service variants set up, this might cause issues",common:!0,commonFunc:function(){e.handleRemoveVendor(),e.showWarningVendorModal(!1)}}))}}]),t}(n.Component)),aM=Object(r.withRouter)(eM),tM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,centered:!0,className:"confirmation-popup-modal customer-owner-confirm",footer:l.a.createElement("div",null,l.a.createElement(Vm.a,{onClick:this.props.viewDisposalInventory},"Go to Disposal Inventory"),l.a.createElement(Vm.a,{onClick:this.props.viewDisposal,type:"primary"},"View Disposal"))},l.a.createElement("div",{className:"row mx-0 confirm-modal-row ".concat(this.props.deleteLineItem?"warning-modal-row":"")},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:this.props.deleteLineItem?Rm.warning_icon:Rm.check_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),this.props.subHeading))))}}]),t}(n.Component),nM=fu.a.Panel,lM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={activeKey:["1"],visible:!1,visibleWarning:!1,disposal:null,unsavedExit:!1,requiredSuccessModalVisible:!1},e.getDisposalItem=function(){Og(e.props.match.params.id||e.state.disposal.id).then((function(a){e.setState({disposal:a.data},(function(){var a,t,n,l,c,i=null===(a=e.state)||void 0===a?void 0:a.disposal;(null===i||void 0===i?void 0:i.name)&&(null===i||void 0===i?void 0:i.parent)&&((null===(t=e.props.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)||((null===i||void 0===i||null===(l=i.uom_array)||void 0===l?void 0:l.length)&&(null===i||void 0===i||null===(c=i.internal_location)||void 0===c?void 0:c.length)?e.setState((function(){return{disposal:i,unsavedExit:!1}})):e.setState((function(){return{disposal:i,unsavedExit:!0}}))))}))})).catch((function(e){td(e)}))},e.onChange=function(a,t){e.setState(Object(zv.a)({},a,t))},e.setDisposal=function(a,t){var n,l,c,i,r,s;(null===(n=e.state)||void 0===n||null===(l=n.disposal)||void 0===l?void 0:l.name)&&(null===(c=e.state)||void 0===c||null===(i=c.disposal)||void 0===i?void 0:i.parent)?(null===a||void 0===a||null===(r=a.uom_array)||void 0===r?void 0:r.length)&&(null===a||void 0===a||null===(s=a.internal_location)||void 0===s?void 0:s.length)?(e.setState((function(){return{disposal:a,unsavedExit:!1}})),e.props.match.params.id||e.setState({requiredSuccessModalVisible:!0})):e.setState((function(){return{disposal:a}})):e.setState((function(){return{disposal:a,unsavedExit:!0}}));var o=null;e.state.activeKey.length>1&&(o=e.state.activeKey.find((function(e){return e==t}))),o||e.setState((function(e){return{disposal:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"7")))}}))},e.showConfirmModal=function(a){a&&!e.state.disposal.is_inventory&&jg(e.state.disposal.id,{is_inventory:!0}).then().catch((function(e){td(e)})),e.setState({visible:a})},e.showWarningModal=function(a){e.setState({visibleWarning:a})},e.onCollapseChange=function(a){e.setState({activeKey:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.disposal;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.management.disposal.items.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?(this.props.setBreadcrumb([{title:"Edit Disposal",url:"#"}]),this.getDisposalItem(),this.setState({activeKey:this.props.location.editTab||"1"})):this.props.setBreadcrumb([{title:"Create Disposal",url:"#"}])}},{key:"render",value:function(){var e=this,a=this.state,t=a.disposal,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{activeKey:n,onChange:this.onCollapseChange,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(nM,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(fR,{disposal:t,onChange:this.onChange,setdisposal:this.setDisposal})),l.a.createElement(nM,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0 text-capitalize"},"Universal Units of Measurement ",l.a.createElement("sup",null,"*")))),key:"2"},l.a.createElement(wR,{disposal:t,setDisposal:this.setDisposal})),l.a.createElement(nM,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0 text-capitalize"},"Custom Units of Measurement"))),key:"3"},l.a.createElement(jR,{getDisposalItem:this.getDisposalItem,disposal:t,setDisposal:this.setDisposal})),l.a.createElement(nM,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0 text-capitalize"},"Warehouse & Vendor Disposal Facilities ",l.a.createElement("sup",null,"*")))),key:"4"},l.a.createElement(aM,{disposal:t,getDisposalItem:this.getDisposalItem,setDisposal:this.setDisposal})),l.a.createElement(nM,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0 text-capitalize"},"Reference Price"))),key:"5"},l.a.createElement(DR,{disposal:t,onChange:this.onChange,setdisposal:this.setDisposal})),l.a.createElement(nM,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0 text-capitalize"},"Documents"))),key:"7"},l.a.createElement(MR,{disposal:t,onChange:this.onChange,setdisposal:this.setDisposal}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{className:"w-auto",disabled:!t,onClick:function(){return e.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.management.disposal.items.view,{id:t.id})):e.handleViewMainButtonCLick()},type:"primary"}," ","Complete View (Disposal & Disposal Inventory)"))))))),l.a.createElement(tM,{heading:"You\u2019ve successfully ".concat(this.props.match.params.id?"updated":"created"," this Disposal and Disposal Inventory."),subHeading:l.a.createElement("p",{className:"mb-0"},'If you want to view the disposal Inventory you just created, please click \xa0 "',l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Go to Disposal Inventory"),'"',l.a.createElement("br",null),'If you want to view the disposal please click \xa0 "',l.a.createElement(Vm.a,{onClick:function(){return o.push(Object(dh.a)(zm.dashboard.management.disposal.items.view,{id:t.id}))},className:"bg-transparent border-0 shadow-none p-0"},"View Disposal"),'"'),viewDisposalInventory:function(){return o.push(Object(dh.a)(zm.dashboard.management.disposal_inventory.view,{id:t.id}))},viewDisposal:function(){return o.push(Object(dh.a)(zm.dashboard.management.disposal.items.view,{id:t.id}))},visible:this.state.visible,onClose:function(){return e.showConfirmModal(!1)}}),l.a.createElement(iv,{visible:this.state.visibleWarning,onClose:function(){return e.showWarningModal(!1)},heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Disposal?")}),l.a.createElement(ph,{visible:this.state.requiredSuccessModalVisible,heading:"You've successfully added all of the required information.",subHeading:"Thank you for adding all the required information! To continue adding optional information, select Continue. To view the Disposal, select View Disposal.",onClose:function(){e.showRequiredSuccessModal(!1)},okText:"View Disposal",onOK:function(){e.showRequiredSuccessModal(!1),o.push(Object(dh.a)(zm.dashboard.management.disposal.items.view,{id:t.id}))}}))}}]),t}(n.Component),cM=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(lM)),iM=(ku.a.Option,ku.a.OptGroup,fu.a.Panel,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={newSites:[],newLoc:[]},e.getDisposalVendor=function(){Gg({disposal:e.props.match.params.id}).then((function(a){e.setState({newLoc:a.data.results[0].vendor||[]})})).catch((function(e){td(e)}))},e.menu=function(){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},"Remove")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},"Edit")))},e.handleChange=function(a,t){e.setState({selectValue:a,selectOption:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Vg({disposal:this.props.match.params.id}).then((function(a){var t;e.setState({newSites:(null===(t=a.data.results[0])||void 0===t?void 0:t.location)||[]})})).catch((function(e){td(e)})),this.getDisposalVendor()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m=this,d=this.props,u=d.disposal,p=d.gridChange;null===u||void 0===u||null===(e=u.uom_array)||void 0===e||e.find((function(e){return e.id===m.state.selectValue}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 ".concat(this.props.viewTab?"px-0":"")},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewTab?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 d-flex align-items-center list-inline"},l.a.createElement("li",{className:"list-inline-item"},!this.props.viewTab&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:function(){return m.props.tabChange("3")}},"VIEW ALL"," "))))),l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(l.a.Fragment,null,p?l.a.createElement("div",{className:"row design-update-warehouse-vendor-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},(null===(a=this.state.newSites)||void 0===a?void 0:a.length)>0&&(null===(t=this.state.newSites)||void 0===t?void 0:t.map((function(e){var a,t,n,c,i,r,s,o,d,u,p,v,h,f,E;"COM"===(null===e||void 0===e?void 0:e.unit_type)?null===(a=m.props.disposal)||void 0===a||null===(t=a.com)||void 0===t||null===(n=t.find((function(a){return a.id===e.com})))||void 0===n||n.abbreviation:null===(c=m.props.disposal)||void 0===c||null===(i=c.uom_array)||void 0===i||null===(r=i.find((function(a){return a.id===e.uom})))||void 0===r||r.symbol;return l.a.createElement("div",{className:"col-12 margin-btn-30"},l.a.createElement("div",{className:"row m-0 site-details-row-card site-card-grid-change site-details-row-card-2 details-div-update  position-relative"},l.a.createElement("div",{className:"col-12 py-0 bg-transparent border-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-3 h-auto site-details-heading"},l.a.createElement("div",{className:"site-name-location h-auto"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===e||void 0===e||null===(s=e.internal_location)||void 0===s?void 0:s.name))),l.a.createElement("div",{className:"col-12 col-sm-9 h-auto site-common-details",style:{borderBottom:"1px solid #e0e0e0"}},l.a.createElement("div",{className:"row site-common-details-row h-auto"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(null===(o=e.internal_location)||void 0===o?void 0:o.street_address," ").concat(null===(d=e.internal_location)||void 0===d?void 0:d.name," ").concat(null===(u=e.internal_location)||void 0===u?void 0:u.city," ").concat(null===(p=e.internal_location)||void 0===p?void 0:p.state," ").concat(null===(v=e.internal_location)||void 0===v?void 0:v.country))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e||null===(h=e.internal_location)||void 0===h?void 0:h.email)),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e||null===(f=e.internal_location)||void 0===f?void 0:f.phone))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 py-3"},l.a.createElement("div",{className:"row"},(null===(E=e.price_data)||void 0===E?void 0:E.length)?l.a.createElement("div",{className:"col-12 fleet-kit-table disposal-priceunit-table table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"UOM"),l.a.createElement("th",null,"Unit Cost"),l.a.createElement("th",null,"Min QTY"),l.a.createElement("th",null,"Max QTY"),l.a.createElement("th",null,"Current QTY"),l.a.createElement("th",null,"Margin"),l.a.createElement("th",null,"PRICE PER UNIT"))),l.a.createElement("tbody",null,e.price_data.map((function(e){var a,t;return l.a.createElement("tr",null,l.a.createElement("td",null,(null===(a=e.uom)||void 0===a?void 0:a.symbol)||(null===(t=e.com)||void 0===t?void 0:t.abbreviation)||"-"),l.a.createElement("td",null,"$".concat(e.unit_cost)||!1),l.a.createElement("td",null,e.min_qty||"-"),l.a.createElement("td",null,e.max_qty||"-"),l.a.createElement("td",null,e.qty||"-"),l.a.createElement("td",null,e.margin?"".concat(parseInt(e.margin).toFixed(2),"%"):"-"),l.a.createElement("td",{className:"position-relative"},"$".concat(Rd(e.unit_cost,e.margin))))}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Unit Price")))))))))}))),0==this.state.newSites.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 bg-white common-card-upload mb-3"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Warehouses")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},(null===(n=this.state.newLoc)||void 0===n?void 0:n.length)>0&&(null===(c=this.state.newLoc)||void 0===c?void 0:c.map((function(e){var a,t,n,c,i,r,s,o,d,u;"COM"===(null===e||void 0===e?void 0:e.unit_type)?null===(a=m.props.disposal)||void 0===a||null===(t=a.com)||void 0===t||null===(n=t.find((function(a){return a.id===e.vendor_com})))||void 0===n||n.abbreviation:null===(c=m.props.disposal)||void 0===c||null===(i=c.uom_array)||void 0===i||null===(r=i.find((function(a){return a.id===e.vendor_uom})))||void 0===r||r.symbol;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 margin-btn-30"},l.a.createElement("div",{className:"row m-0 site-details-row-card site-card-grid-change site-details-row-card-2 details-div-update  position-relative"},l.a.createElement("div",{className:"col-12 py-0 bg-transparent border-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-3 h-auto site-details-heading"},l.a.createElement("div",{className:"site-name-location h-auto"},l.a.createElement("img",{src:Rm.vendor_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===e||void 0===e||null===(s=e.vendor)||void 0===s?void 0:s.name))),l.a.createElement("div",{className:"col-12 col-sm-9 h-auto site-common-details",style:{borderBottom:"1px solid #e0e0e0"}},l.a.createElement("div",{className:"row site-common-details-row h-auto"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(e.vendor.street_address||""," ").concat(e.vendor.name," ").concat(e.vendor.city||""," ").concat(e.vendor.state||""," ").concat(e.vendor.country||""))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},(null===e||void 0===e||null===(o=e.vendor)||void 0===o?void 0:o.email)||"-")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},(null===e||void 0===e||null===(d=e.internal_location)||void 0===d?void 0:d.phone)||"-"))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 py-3"},l.a.createElement("div",{className:"row"},(null===(u=e.price_data)||void 0===u?void 0:u.length)?l.a.createElement("div",{className:"col-12 fleet-kit-table disposal-priceunit-table table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"UOM"),l.a.createElement("th",null,"Unit Cost"),l.a.createElement("th",null,"Margin"),l.a.createElement("th",null,"Price Per Unit"))),l.a.createElement("tbody",null,e.price_data.map((function(e){var a,t;return l.a.createElement("tr",null,l.a.createElement("td",null,(null===(a=e.vendor_uom)||void 0===a?void 0:a.symbol)||(null===(t=e.vendor_com)||void 0===t?void 0:t.abbreviation)||"-"),l.a.createElement("td",null,"$".concat(e.unit_cost)||!1),l.a.createElement("td",null,e.margin?"".concat(parseInt(e.margin).toFixed(2),"%"):"-"),l.a.createElement("td",{className:"position-relative"},"$".concat(Rd(e.unit_cost,e.margin))))}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Unit Price"))))))))))}))),0==this.state.newLoc.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 bg-transparent common-card-upload mb-3"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.vendor_gray_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Vendors"))))))):l.a.createElement("div",{className:"row design-update-warehouse-vendor-row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement("h6",{className:"text-uppercase"},"WareHouse")),(null===(i=this.state.newSites)||void 0===i?void 0:i.length)>0&&(null===(r=this.state.newSites)||void 0===r?void 0:r.map((function(e){var a,t,n,c,i,r,s,o,d,u,p,v,h,f,E;"COM"===(null===e||void 0===e?void 0:e.unit_type)?null===(a=m.props.disposal)||void 0===a||null===(t=a.com)||void 0===t||null===(n=t.find((function(a){return a.id===e.com})))||void 0===n||n.abbreviation:null===(c=m.props.disposal)||void 0===c||null===(i=c.uom_array)||void 0===i||null===(r=i.find((function(a){return a.id===e.uom})))||void 0===r||r.symbol;return l.a.createElement("div",{className:"col-12 margin-btn-30"},l.a.createElement("div",{className:"row m-0 site-details-row-card site-details-row-card-2 details-div-update  position-relative"},l.a.createElement("div",{className:"col-12 py-0 bg-transparent border-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 site-details-heading"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===e||void 0===e||null===(s=e.internal_location)||void 0===s?void 0:s.name))),l.a.createElement("div",{className:"col-12 pb-0"},l.a.createElement("div",{className:"row site-common-details-row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(null===(o=e.internal_location)||void 0===o?void 0:o.street_address," ").concat(null===(d=e.internal_location)||void 0===d?void 0:d.name," ").concat(null===(u=e.internal_location)||void 0===u?void 0:u.city," ").concat(null===(p=e.internal_location)||void 0===p?void 0:p.state," ").concat(null===(v=e.internal_location)||void 0===v?void 0:v.country))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e||null===(h=e.internal_location)||void 0===h?void 0:h.email)),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},null===e||void 0===e||null===(f=e.internal_location)||void 0===f?void 0:f.phone))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 py-3"},l.a.createElement("div",{className:"row"},(null===(E=e.price_data)||void 0===E?void 0:E.length)?l.a.createElement("div",{className:"col-12 fleet-kit-table disposal-priceunit-table table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"UOM"),l.a.createElement("th",null,"Unit Cost"),l.a.createElement("th",null,"Min QTY"),l.a.createElement("th",null,"Max QTY"),l.a.createElement("th",null,"Current QTY"),l.a.createElement("th",null,"Margin"),l.a.createElement("th",null,"PRICE PER UNIT"))),l.a.createElement("tbody",null,e.price_data.map((function(e){var a,t;return l.a.createElement("tr",null,l.a.createElement("td",null,(null===(a=e.uom)||void 0===a?void 0:a.symbol)||(null===(t=e.com)||void 0===t?void 0:t.abbreviation)||"-"),l.a.createElement("td",null,e.unit_cost||"-"),l.a.createElement("td",null,e.min_qty||"-"),l.a.createElement("td",null,e.max_qty||"-"),l.a.createElement("td",null,e.qty||"-"),l.a.createElement("td",null,e.margin?"".concat(parseInt(e.margin).toFixed(2),"%"):"-"),l.a.createElement("td",{className:"position-relative"},Rd(e.unit_cost,e.margin)))}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Unit Price")))))))))}))),0==this.state.newSites.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 bg-white common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Warehouses")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement("h6",{className:"text-uppercase"},"Vendor")),(null===(s=this.state.newLoc)||void 0===s?void 0:s.length)>0&&(null===(o=this.state.newLoc)||void 0===o?void 0:o.map((function(e){var a,t,n,c,i,r,s,o,d,u;"COM"===(null===e||void 0===e?void 0:e.unit_type)?null===(a=m.props.disposal)||void 0===a||null===(t=a.com)||void 0===t||null===(n=t.find((function(a){return a.id===e.vendor_com})))||void 0===n||n.abbreviation:null===(c=m.props.disposal)||void 0===c||null===(i=c.uom_array)||void 0===i||null===(r=i.find((function(a){return a.id===e.vendor_uom})))||void 0===r||r.symbol;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 margin-btn-30"},l.a.createElement("div",{className:"row m-0 site-details-row-card site-details-row-card-2 details-div-update  position-relative"},l.a.createElement("div",{className:"col-12 py-0 bg-transparent border-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 site-details-heading"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.vendor_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===e||void 0===e||null===(s=e.vendor)||void 0===s?void 0:s.name))),l.a.createElement("div",{className:"col-12 pb-0"},l.a.createElement("div",{className:"row site-common-details-row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(e.vendor.street_address||""," ").concat(e.vendor.name," ").concat(e.vendor.city||""," ").concat(e.vendor.state||""," ").concat(e.vendor.country||""))),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},(null===e||void 0===e||null===(o=e.vendor)||void 0===o?void 0:o.email)||"-")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},(null===e||void 0===e||null===(d=e.internal_location)||void 0===d?void 0:d.phone)||"-"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 pb-3"},l.a.createElement("div",{className:"row"},(null===(u=e.price_data)||void 0===u?void 0:u.length)?l.a.createElement("div",{className:"col-12 fleet-kit-table disposal-priceunit-table table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"UOM"),l.a.createElement("th",null,"Unit Cost"),l.a.createElement("th",null,"Margin"),l.a.createElement("th",null,"Price Per Unit"))),l.a.createElement("tbody",null,e.price_data.map((function(e){var a,t;return l.a.createElement("tr",null,l.a.createElement("td",null,(null===(a=e.vendor_uom)||void 0===a?void 0:a.symbol)||(null===(t=e.vendor_com)||void 0===t?void 0:t.abbreviation)||"-"),l.a.createElement("td",null,e.unit_cost||"-"),l.a.createElement("td",null,e.margin?"".concat(parseInt(e.margin).toFixed(2),"%"):"-"),l.a.createElement("td",{className:"position-relative"},Rd(e.unit_cost,e.margin)))}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Unit Price"))))))))))))}))),0==this.state.newLoc.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 bg-transparent common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.vendor_gray_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Vendors"))))))))))}}]),t}(n.Component)),rM=Object(r.withRouter)(iM),sM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:[],loading:!1,pagination:{current:1,pageSize:15},files:[]},e.docsColumns=[{title:"Name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"name-id-img-div"},l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"name-id-details"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},Nd(e)," ")}},{title:l.a.createElement("div",{className:"position-relative"},"FORMAT"),dataIndex:"format",sorter:!0,render:function(e){return l.a.createElement("div",{className:"name-id-details"},".",e)}}],e.getFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Dg(Object(wu.a)(Object(wu.a)({},a),{},{disposal:e.props.match.params.id})).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("disposal",e.props.match.params.id),n.append("document",t),Ag(n).then((function(a){e.getFiles()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getFiles()}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 ".concat(this.props.editBtn?"no-data-card-row-new px-0":"")},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse text-uppercase"},"Upload"))),!this.props.editBtn&&l.a.createElement(Vm.a,{onClick:function(){return e.props.tabChange("4")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},this.state.files.length>0?l.a.createElement(fv.a,{pagination:this.state.pagination,loading:this.state.loading,className:"main-table-all carpet-cleaning-table border-0",columns:this.docsColumns,dataSource:this.state.files,size:"middle",onRow:function(e,a){return{onClick:function(a){window.open(e.document,"_blank")}}}}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," "))))))))}}]),t}(n.Component),oM=Object(r.withRouter)(sM),mM=(Pm.a.Group,ku.a.Option,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={uom:!1},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this,n=this.props.disposal;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 ".concat(this.props.editBtn?"px-0":"")},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 d-flex align-items-center list-inline"},l.a.createElement("li",{className:"list-inline-item"},this.props.editBtn?!this.props.match.url.includes("inventory")&&l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.management.disposal.items.edit,{id:t.props.match.params.id}),editTab:"3"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"):l.a.createElement(Vm.a,{onClick:function(){return t.props.tabChange("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")))),(null===n||void 0===n||null===(e=n.com)||void 0===e?void 0:e.length)>0?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 custom-uom-table custom-uom-table-2"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"custom uom name"),l.a.createElement("th",null,"abbreviation"),l.a.createElement("th",null,"conversion"))),l.a.createElement("tbody",null,null===n||void 0===n||null===(a=n.com)||void 0===a?void 0:a.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,null===e||void 0===e?void 0:e.abbreviation),l.a.createElement("td",null,l.a.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"1",e.abbreviation," = ",e.factor,e.uom.symbol))))}))))))))))):l.a.createElement("div",{className:"row mx-0 mt-3 no-data-card-row bg-transparent align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.universalm,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Custom Units of Measurement")))))}}]),t}(n.Component)),dM=Object(r.withRouter)(mM),uM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={uom:!0},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this.props.disposal;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),(null===t||void 0===t||null===(e=t.uom_array)||void 0===e?void 0:e.length)>0?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 custom-uom-table"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Unit Name"),l.a.createElement("th",null,"Abbreviation"))),l.a.createElement("tbody",null,l.a.createElement("tr",{className:"uom-table-small-header"},l.a.createElement("td",{colSpan:"2"},(null===t||void 0===t?void 0:t.uom_array)&&(null===t||void 0===t?void 0:t.uom_array[0])&&(null===t||void 0===t?void 0:t.uom_array[0].unit_type.name))),null===t||void 0===t||null===(a=t.uom_array)||void 0===a?void 0:a.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.symbol))})))))))):l.a.createElement("div",{className:"row mx-0 mt-3 no-data-card-row bg-transparent align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.universalm,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Universal Units of Measurement")))))}}]),t}(n.Component),pM=ku.a.Option,vM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={uom:!1,uomValue:null,comValue:null,calc:1,comInputVal:1},e.handleUomChange=function(a){var t,n=e.state,l=n.uomValue,c=n.comValue,i=n.comInputVal,r=(null===(t=e.props)||void 0===t?void 0:t.disposal).com.find((function(e){return e.id===c}));if(r&&r.uom.id===a)e.setState({uomValue:a,calc:i*(null===r||void 0===r?void 0:r.factor)});else{var s=vI[l],o=e.state.calc*(s||1)/vI[a];e.setState({uomValue:a,calc:o})}},e.handleComChange=function(a){var t,n=(null===(t=e.props)||void 0===t?void 0:t.disposal).com,l=e.state,c=l.comInputVal,i=l.uomValue,r=n.find((function(e){return e.id===a}));if(r&&r.uom.id===e.state.uomValue)e.setState({calc:c*(null===r||void 0===r?void 0:r.factor)});else if(r.uom){var s=(c*(null===r||void 0===r?void 0:r.factor)||1)/vI[i];e.setState({calc:s})}else e.setState({calc:c*vI[i]});e.setState({comValue:a})},e.handleComInputChange=function(a){e.setState((function(e){return{comInputVal:a||1,calc:e.calc*(a||1)/e.comInputVal}}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t=this,n=this.props.disposal;(null===n||void 0===n?void 0:n.com[0])&&this.setState({comValue:null===n||void 0===n||null===(e=n.com[0])||void 0===e?void 0:e.id},(function(){t.handleComChange(t.state.comValue)}));(null===n||void 0===n?void 0:n.uom_array)&&(null===n||void 0===n?void 0:n.uom_array[0])&&this.setState({uomValue:null===n||void 0===n||null===(a=n.uom_array[0])||void 0===a?void 0:a.id})}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.state,r=i.comValue,s=i.uomValue,o=i.calc,m=i.comInputVal,d=this.props.disposal;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))))),l.a.createElement("div",{className:"row mx-0"},(null===d||void 0===d||null===(e=d.uom_array)||void 0===e?void 0:e.length)>0&&(null===d||void 0===d||null===(a=d.com)||void 0===a?void 0:a.length)>0?l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(Fm.a,{className:"main-inner-form"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-3 position-relative"},l.a.createElement("div",{className:"row custom-unit-converter-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(ku.a,{className:"custom-pound-select",style:{width:"100%"},suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),onChange:this.handleComChange,value:r},null===d||void 0===d||null===(t=d.com)||void 0===t?void 0:t.map((function(e){return l.a.createElement(pM,{value:e.id},e.name)})))),l.a.createElement("div",{className:"col-12"},l.a.createElement(ap.a,{value:m||1,onChange:this.handleComInputChange,type:"number",placeholder:"1"}))),l.a.createElement("span",{className:"equal-sign position-absolute"},"=")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"row custom-unit-converter-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(ku.a,{className:"custom-pound-select",style:{width:"100%"},onChange:this.handleUomChange,value:s,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"})},null===d||void 0===d||null===(n=d.uom_array)||void 0===n?void 0:n.map((function(e){return l.a.createElement(pM,{value:e.id},e.name)})))),l.a.createElement("div",{className:"col-12"},l.a.createElement(ap.a,{type:"number",onChange:function(e){return c.setState({calc:e})},value:o,placeholder:"1"}))))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row mx-0 no-data-card-row bg-transparent align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.universalm,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Unit Converter"))))))))}}]),t}(n.Component),hM=fu.a.Panel,fM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:null,loading:!0,supply:[],total_price:null},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Og(this.props.match.params.id).then((function(a){var t=[];t=e.props.match.url.includes("inventory")?[{title:"Inventory",url:zm.dashboard.management.inventory.self},{title:"Disposal Inventory",url:zm.dashboard.management.inventory.self},{title:a.data.name,url:"#"}]:[{title:"Disposal",url:zm.dashboard.management.disposal.self},{title:"Disposal",url:zm.dashboard.management.disposal.self},{title:a.data.name,url:"#"}];var n=a.data.unit_cost/100*a.data.margin,l=a.data.unit_cost,c={price:parseFloat(n)+parseFloat(l)};e.props.setBreadcrumb(t),e.setState({data:Object(wu.a)(Object(wu.a)({},a.data),c),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s=this,m=this.state,d=m.data,u=m.loading,p=this.props.disposal;return u?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement(Wv.a,null))):l.a.createElement(l.a.Fragment,null,l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-info-inner-row mt-30"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(hM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),!this.props.match.url.includes("inventory")&&l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.disposal.items.edit,{id:s.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3"},l.a.createElement("h6",{className:"text-uppercase"},"Disposal Code"),l.a.createElement("h5",{className:"mb-0"},null===d||void 0===d?void 0:d.disposal_code)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3"},l.a.createElement("h6",{className:"text-uppercase"},"Disposal ID"),l.a.createElement("h5",{className:"mb-0"},null===d||void 0===d?void 0:d.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3"},l.a.createElement("h6",{className:"text-uppercase"},"Disposal name"),l.a.createElement("h5",{className:"mb-0"},null===d||void 0===d?void 0:d.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-6 mt-3"},l.a.createElement("h6",{className:"text-uppercase"},"Disposal FAMILY / TIER"),l.a.createElement("h5",{className:"mb-0"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:null===Rm||void 0===Rm?void 0:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid"})},null===d||void 0===d||null===(e=d.breadcrumb)||void 0===e?void 0:e.map((function(e,a){return l.a.createElement(Su.a.Item,{key:a},l.a.createElement(qm.a,null,e))})),l.a.createElement(Su.a.Item,null,null===d||void 0===d?void 0:d.name)))))))),l.a.createElement(hM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Unit Converter")),key:"2"},l.a.createElement(vM,{disposal:p})),l.a.createElement(hM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Universal Units of Measurement ",l.a.createElement("sup",null,"*")),!this.props.match.url.includes("inventory")&&l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.disposal.items.edit,{id:s.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"3"},l.a.createElement(uM,{disposal:p})),l.a.createElement(hM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Custom Units of Measurement"),!this.props.match.url.includes("inventory")&&l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.disposal.items.edit,{id:s.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"4"},l.a.createElement(dM,Object.assign({disposal:p},this.props))),l.a.createElement(hM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Warehouse & Vendor Disposal Facilities ",l.a.createElement("sup",null,"*")),!this.props.match.url.includes("inventory")&&l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.disposal.items.edit,{id:s.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"5"},l.a.createElement(rM,this.props)),l.a.createElement(hM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Reference Price"),!this.props.match.url.includes("inventory")&&l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.disposal.items.edit,{id:s.props.match.params.id}),editTab:"5"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"6"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},d?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Unit of measurement"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},(null===(a=d.uom)||void 0===a?void 0:a.name.toLowerCase())||"-"," ",l.a.createElement("span",{className:"text-lowercase"},(null===d||void 0===d?void 0:d.uom)?"(".concat(null===d||void 0===d||null===(t=d.uom)||void 0===t?void 0:t.symbol,")"):""))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Unit cost"),l.a.createElement("h5",{className:"mb-0"},xd(d.unit_cost||"-"),(null===d||void 0===d?void 0:d.uom)&&"/",null===(n=d.uom)||void 0===n||null===(c=n.symbol)||void 0===c?void 0:c.toLowerCase())),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Margin"),l.a.createElement("h5",{className:"mb-0"},(null===d||void 0===d?void 0:d.margin)?"".concat(parseInt(null===d||void 0===d?void 0:d.margin).toFixed(2),"%"):"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Price"),l.a.createElement("h5",{className:"mb-0"},xd(d.price||"-"),(null===d||void 0===d?void 0:d.uom)&&"/",null===(i=d.uom)||void 0===i||null===(r=i.symbol)||void 0===r?void 0:r.toLowerCase()))):l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 bg-transparent common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.billing_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 color-gray-3"},"No Reference Price"))))))))),l.a.createElement(hM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents")),key:"7"},l.a.createElement(oM,this.props)))))))}}]),t}(n.Component),EM=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(fM)),gM=ku.a.Option,bM=ku.a.OptGroup,NM=fu.a.Panel,yM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={newLoc:[]},e.handleChange=function(a,t){e.setState({selectValue:a,selectOption:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l=this;Gg({disposal:this.props.match.params.id}).then((function(e){var a;l.setState({newLoc:e.data.results&&(null===(a=e.data.results[0])||void 0===a?void 0:a.vendor)})})).catch((function(e){td(e)})),this.setState({selectValue:(null===(e=this.props.disposal)||void 0===e?void 0:e.uom_array)&&(null===(a=this.props.disposal)||void 0===a?void 0:a.uom_array[0])&&(null===(t=this.props.disposal)||void 0===t||null===(n=t.uom_array[0])||void 0===n?void 0:n.id)})}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.props.disposal,r=null===i||void 0===i||null===(e=i.uom_array)||void 0===e?void 0:e.find((function(e){return e.id===c.state.selectValue}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 d-flex align-items-center list-inline"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(ku.a,{dropdownClassName:"custom-uom-dropdown",placeholder:"Unit of Measurement: pieces (pc)",suffixIcon:l.a.createElement("img",{src:Rm.arrow_small_gray_icon,alt:"",className:"img-fluid"}),className:"unit-measurement-select",onChange:this.handleChange,value:null===(a=this.state)||void 0===a?void 0:a.selectValue},l.a.createElement(bM,{label:"Universal UOM"},null===i||void 0===i||null===(t=i.uom_array)||void 0===t?void 0:t.map((function(e){return l.a.createElement(gM,{value:e.id,key:e.id},l.a.createElement("span",{className:"check-icon-mark"},l.a.createElement("img",{src:Rm.check_icon_green,alt:"",className:"img-fluid"}))," ",e.name," (",e.symbol,")")}))))),l.a.createElement("li",{className:"list-inline-item"},this.props.editBtn?l.a.createElement(Vm.a,{className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"):l.a.createElement(Vm.a,{onClick:function(){return c.props.tabChange("4")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))))),l.a.createElement("div",{className:"col-12 my-3 ".concat(this.props.editBtn?"design-update-collapse":"")},l.a.createElement(fu.a,{className:"inner-collapse-section",accordion:!0,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},(null===(n=this.state.newLoc)||void 0===n?void 0:n.length)>0?this.state.newLoc.map((function(e){var a,t,n,c,i,s,o,m,d,u,p,v,h,f,E,g;return l.a.createElement(NM,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{minHeight:"50px"},className:"row m-0 site-details-row-card site-details-row-card-2"},l.a.createElement("div",{className:"col-12 border-0"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.waste_management_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===e||void 0===e||null===(a=e.vendor)||void 0===a?void 0:a.name))))),key:e.id},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0 pb-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-green-small-heading position-relative"},l.a.createElement("h5",{className:"mb-0"},"Address Information")),l.a.createElement("div",{className:"row site-details-row-card site-details-row-card-2  position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,null===(t=e.vendor.main_address)||void 0===t?void 0:t.city))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat((null===(n=e.vendor)||void 0===n||null===(c=n.main_address)||void 0===c?void 0:c.street_address)||""," ").concat((null===(i=e.vendor)||void 0===i||null===(s=i.main_address)||void 0===s?void 0:s.name)||""," ").concat((null===(o=e.vendor)||void 0===o||null===(m=o.main_address)||void 0===m?void 0:m.city)||""," ").concat((null===(d=e.vendor)||void 0===d||null===(u=d.main_address)||void 0===u?void 0:u.state)||""," ").concat((null===(p=e.vendor)||void 0===p||null===(v=p.main_address)||void 0===v?void 0:v.country)||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},(null===(h=e.vendor)||void 0===h||null===(f=h.main_address)||void 0===f?void 0:f.email)||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},(null===(E=e.vendor)||void 0===E||null===(g=E.main_address)||void 0===g?void 0:g.phone)||"-"))),l.a.createElement("div",{className:"row contact-green-small-heading position-relative mt-3"},l.a.createElement("h5",{className:"mb-0"},"Unit Cost")),l.a.createElement("div",{className:"row mt-3 position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement("h6",{className:"text-uppercase"},"item reference number *"),l.a.createElement("p",{className:"mb-0"},Math.round(e.reference_number)||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"unit cost"),l.a.createElement("p",{className:"mb-0"},"$".concat(e.unit_cost,"/").concat(null===r||void 0===r?void 0:r.symbol)||!1))))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 common-card-upload"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No External Locations")))))))}}]),t}(n.Component),wM=(Object(r.withRouter)(yM),vf.a.TabPane),_M=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={tab:"1",disposal:null,requiredFields:!0},e.tabChange=function(a){e.setState({tab:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&Og(this.props.match.params.id).then((function(a){e.setState({disposal:a.data},(function(){e.setState({requiredFields:Gd(e.state.disposal)})}))})).catch((function(e){td(e)}))}},{key:"render",value:function(){var e=this.state,a=e.disposal,t=e.requiredFields;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},t&&l.a.createElement("div",{className:"row mx-0 info-gray-div info-red-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please complete all required information to avoid issues")),l.a.createElement(vf.a,{activeKey:this.state.tab,onChange:this.tabChange,className:"carpet-cleaning-main-common-tab",defaultActiveKey:"1"},l.a.createElement(wM,{tab:"Summary",key:"1"},l.a.createElement(EM,{tabChange:this.tabChange,disposal:a,gridChange:!0})),l.a.createElement(wM,{tab:"Custom Units of Measurement",key:"2"},l.a.createElement(dM,{editBtn:!0,disposal:a})),l.a.createElement(wM,{tab:"warehouse & vendor disposal facilities",key:"3"},l.a.createElement(rM,{viewTab:!0,disposal:a})),l.a.createElement(wM,{tab:"Documents",key:"4"},l.a.createElement(oM,{editBtn:!0}))))))}}]),t}(n.Component),SM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).itemsColumnsPricingSummary=[{title:"Service Family",sorter:!0,render:function(e){var a;return l.a.createElement("div",null,(null===(a=e.family)||void 0===a?void 0:a.name)||"-",l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid pl-1"}))},width:"200px"},{title:"Tiers",dataIndex:"breadcrumb",render:function(e){var a;return l.a.createElement("div",null,null===e||void 0===e||null===(a=e.filter((function(e,a){return 0!=a})))||void 0===a?void 0:a.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,e),l.a.createElement("img",{src:Rm.arrow_small_breadcrumb,alt:"",className:"img-fluid px-1"}))})))},sorter:!0,width:"400px"},{title:"Service Variant Name",sorter:!0,key:"name",width:"270px",render:function(e){var a;return l.a.createElement("div",{className:"font-weight-bold"},l.a.createElement("span",{className:"font-weight-normal"},(null===(a=e.line_item)||void 0===a?void 0:a.name)||"-"," /")," ",null===e||void 0===e?void 0:e.region.title," - ",e.name||"")}},{title:"Labor Groups",key:"labor_groups",width:"300px",dataIndex:"labor_groups",render:function(e){return l.a.createElement("div",null,e[0]&&e[0]||"-"," ",e.length>1&&"".concat(e.length-1," more"),e.length>1&&l.a.createElement(gE.a,{className:"labor-group-info labor-group-info-update",placement:"top",title:function(){return n.returnToolTipData(e)},overlayStyle:{fontSize:11},arrowPointAtCenter:!0,destroyTooltipOnHide:!0},l.a.createElement("img",{src:Rm.info_small,alt:""})))}},{title:"Hourly Price",sorter:!0,key:"hourly",render:function(e){return l.a.createElement(l.a.Fragment,null,(null===e||void 0===e?void 0:e.hourly_price)&&"$","".concat(gd(null===e||void 0===e?void 0:e.hourly_price)||"-"))}},{title:"Daily Price",sorter:!0,key:"daily",render:function(e){return l.a.createElement(l.a.Fragment,null,(null===e||void 0===e?void 0:e.daily_price)&&"$","".concat(gd(null===e||void 0===e?void 0:e.daily_price)||"-"))}},{title:"Unit Price",dataIndex:"price",sorter:!0,key:"price",render:function(e,a){var t;return l.a.createElement(l.a.Fragment,null,(null===a||void 0===a?void 0:a.price)&&"$",e||"-",(null===a||void 0===a?void 0:a.pricing_uom)&&(null===a||void 0===a?void 0:a.price)&&" / ",null===a||void 0===a||null===(t=a.pricing_uom)||void 0===t?void 0:t.symbol)}}],n.returnToolTipData=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{style:{borderBottom:"1px solid #BDBDBD",color:"#BDBDBD",marginBottom:5,fontSize:"15px"}},l.a.createElement("img",{src:Rm.teams_labor_no_data_icon,alt:""})," Labor Groups"),l.a.createElement("ul",{style:{paddingLeft:"15px",paddinTop:"5px"}},e.length>0?null===e||void 0===e?void 0:e.map((function(e){return l.a.createElement("li",null,e||"-")})):l.a.createElement("li",null,"-")))},n.fetchPricingList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.state.filterObj;n.setState({loading:!0}),e.ordering||(e.ordering="name");var t=[{title:"Price Lookup",url:""}];yg(Object(wu.a)(Object(wu.a)(Object(wu.a)({},e),a),{},{page:e.page||1,search:n.state.search})).then((function(a){n.setState({pricingSummary:a.data.results,pagination:Object(wu.a)(Object(wu.a)({},n.state.pagination),{},{current:e.page||1,total:a.data.count}),loading:!1}),n.props.setBreadcrumb(t)})).catch((function(e){n.setState({loading:!1}),td(e)}))},n.handleTablePriceChange=function(e,a,t){var l="";"descend"===t.order&&(l="-");var c={page:e.current};t.columnKey?c.ordering="".concat(l).concat(t.columnKey):c.ordering="name",n.fetchPricingList(c)},n.onPricingSearch=function(e){n.setState({search:e.target.value},(function(){n.fetchPricingList()}))},n.debounceEvent=function(){return n.debouncedEvent=lp.debounce.apply(void 0,arguments),function(e){return e.persist(),n.debouncedEvent(e)}},n.setFilterObj=function(e,a){var t=!0;t=!(!e||!(e.daily_high||e.daily_low||e.family||e.hourly_high||e.hourly_low||e.region||e.service||e.unit||e.tier||e.unit_high||e.unit_low||e.variant)),n.setState({filterObj:e,breadcrumb:a,page:1,filterApplied:t},(function(){n.fetchPricingList()}))},n.state={pricingSummary:[],pagination:{current:1,pageSize:20,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},regions:[],search:"",filterObj:null,filterApplied:!1,breadcrumb:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchPricingList()}},{key:"render",value:function(){var e=this,a=this.state,t=a.filterApplied,n=a.filterObj;return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(cb,{FILTER_NEW:!0,setFilterObj:this.setFilterObj,filterApplied:this.state.filterApplied,buttonName:"Create Service",onSearch:this.debounceEvent(this.onPricingSearch,1e3)}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},t&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row banner-apply-filter-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"applied-filter"},"\u2713 Filter Applied")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"clear-btn",onClick:function(){return e.setFilterObj(null)}},l.a.createElement("img",{src:Rm.close_small,alt:"",className:"img-fluid"}),"Clear")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0"},(null===n||void 0===n?void 0:n.familyName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Family:")," ",null===n||void 0===n?void 0:n.familyName),this.state.breadcrumb.length>0&&l.a.createElement("li",{className:"list-inline-item tier-filter-data"},l.a.createElement("strong",null,"Tier:"),this.state.breadcrumb.map((function(e){return l.a.createElement("span",null," ".concat(e))}))),(null===n||void 0===n?void 0:n.serviceName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Name:")," ",null===n||void 0===n?void 0:n.serviceName),(null===n||void 0===n?void 0:n.display_name)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Display Name:")," ",null===n||void 0===n?void 0:n.display_name),(null===n||void 0===n?void 0:n.variant)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Variant Name:")," ",null===n||void 0===n?void 0:n.variant),(null===n||void 0===n?void 0:n.regionName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Region:")," ",null===n||void 0===n?void 0:n.regionName),((null===n||void 0===n?void 0:n.daily_high)||(null===n||void 0===n?void 0:n.daily_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Daily Price:")," $",(null===n||void 0===n?void 0:n.daily_low)||"","-$",(null===n||void 0===n?void 0:n.daily_high)||""),((null===n||void 0===n?void 0:n.hourly_high)||(null===n||void 0===n?void 0:n.hourly_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Hourly Price:")," $",(null===n||void 0===n?void 0:n.hourly_low)||"","-$",(null===n||void 0===n?void 0:n.hourly_high)||""),((null===n||void 0===n?void 0:n.unit_high)||(null===n||void 0===n?void 0:n.unit_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Unit Price:")," $",(null===n||void 0===n?void 0:n.unit_low)||"","-$",(null===n||void 0===n?void 0:n.unit_high)||""),(null===n||void 0===n?void 0:n.unitName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Unit:")," ",null===n||void 0===n?void 0:n.unitName))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{scroll:{y:500,x:1600},loading:this.state.loading,className:"main-table-all",columns:this.itemsColumnsPricingSummary,dataSource:this.state.pricingSummary,locale:this.state.loading?{emptyText:" "}:{emptyText:""},pagination:this.state.pagination,size:"middle",onChange:this.handleTablePriceChange}))))))}}]),t}(l.a.Component),xM=Object(Lm.b)(null,{setBreadcrumb:Uv})(SM),CM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1},e.filterDataPop=function(){return l.a.createElement(TE,{fetchData:e.props.fetchData})},e.handleVisibleChange=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 align-items-center mini-header-filter-list-grid-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-opportunities-div"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.props.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(IE.a,{overlayClassName:"popover-main-all filter-popover",content:this.filterDataPop,title:!1,trigger:"click",visible:this.state.visible,placement:"bottom",onVisibleChange:this.handleVisibleChange},l.a.createElement(Vm.a,{className:"filter-btn d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter"))),l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(qm.a,{to:zm.dashboard.vendor_account.create,className:"new-opportunity-btn d-flex align-items-center justify-content-center text-capitalize"},"+ Create Vendor Account"))))))}}]),t}(n.Component),OM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).columns=[{title:"Account Name",dataIndex:"name",render:function(e){return l.a.createElement("div",{className:"name-id-details"},e)},defaultSortOrder:"ascend",sorter:!0,key:"name"},{title:"Last Activity Date",dataIndex:"modified",render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD,YYYY hh:mm A"))},sorter:!0,key:"modified"}],n.fetchTableData=function(e){var a=n.state,t=a.search,l=a.date;n.setState({loading:!0}),Dj(Object(wu.a)(Object(wu.a)({},e),{},{page:(null===e||void 0===e?void 0:e.page)||1,search:t},l)).then((function(a){n.setState((function(t){return{vendorAccounts:a.data.results,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},t.pagination),{},{current:(null===e||void 0===e?void 0:e.page)||1,total:a.data.count})}}))})).catch((function(e){n.setState({loading:!1}),td(e)}))},n.handleTableChange=function(e,a,t){var l="";"descend"===t.order&&(l="-");var c={page:e.current};t.columnKey?c.ordering="".concat(l).concat(t.columnKey):c.ordering="-modified",n.fetchTableData(c)},n.onSearch=function(e){n.setState({search:e.target.value},(function(){n.fetchTableData()}))},n.handleDateFilter=function(e){n.setState({date:Object(wu.a)({},e)},(function(){n.fetchTableData()}))},n.state={vendorAccounts:[],loading:!1,search:"",pagination:{current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},date:{start:"",end:"",start_modified:"",end_modified:""}},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{title:"Vendor Accounts",url:""}]),this.fetchTableData()}},{key:"render",value:function(){var e=this,a=this.state,t=a.vendorAccounts,n=a.pagination,c=a.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement(CM,{onSearch:lu(this.onSearch,1e3),fetchData:function(a){return e.handleDateFilter(a)}}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table"},l.a.createElement(fv.a,{scroll:{y:450},className:"main-table-all",columns:this.columns,dataSource:t,pagination:n,onChange:this.handleTableChange,size:"middle",loading:c,rowKey:function(e){return e.id},onRow:function(e,a){return{onClick:function(a){o.push(Object(dh.a)(zm.dashboard.vendor_account.view,{id:e.id}))}}}})))))}}]),t}(n.Component),kM=Object(Lm.b)(null,{setBreadcrumb:Uv})(OM),jM=ku.a.Option,IM={labelCol:{span:24},wrapperCol:{span:24}},AM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleCreateVendor=function(e){var a=Object(wu.a)(Object(wu.a)({},e),{},{account_type:"VENDOR"});n.props.vendor?Mj(a,n.props.vendor.id).then((function(e){n.setState({vendor:e.data}),Mm.b.success("Vendor Account Updated Successfully"),n.props.setVendor(e.data,2)})).catch((function(e){td(e)})):Rj(a).then((function(e){Mm.b.success("Vendor Account Created Successfully"),n.setState({vendor:e.data}),n.props.setVendor(e.data,2)})).catch((function(e){td(e)}))},n.handleEinChange=function(e){var a=wd(e.target.value);n.setState({ein:a},(function(){n.formRef.current.setFieldsValue({ein:n.state.ein})}))},n.onNumberOnlyChange=function(e){var a=e.keyCode||e.which,t=String.fromCharCode(a);new RegExp("[0-9]").test(t)||e.preventDefault()},n.formRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.formRef.current.setFieldsValue({account_type:"VENDOR"})}},{key:"componentDidUpdate",value:function(e){var a,t;this.props.vendor!=e.vendor&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.vendor),{},{ein:(null===(a=this.props.vendor)||void 0===a?void 0:a.ein)?wd(null===(t=this.props.vendor)||void 0===t?void 0:t.ein):null,account_type:"VENDOR"}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleCreateVendor},IM,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information here."))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"name",label:"Account Name *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Account Name"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"account_type",label:"Account Type *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{disabled:!0,showArrow:!1,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Vendor"},l.a.createElement(jM,{value:"VENDOR"},"Vendor")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"ein",label:"EIN",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"00-0000000",onKeyPress:this.onNumberOnlyChange,maxLength:"10",onChange:this.handleEinChange}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"account_1099",label:"1099",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{showArrow:!1,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},l.a.createElement(jM,{value:"YES"},"Yes"),l.a.createElement(jM,{value:"NO"},"No")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"epa_id",label:"EPA ID",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"ABC123456789"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),DM={labelCol:{span:24},wrapperCol:{span:24}},TM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleSubmit=function(e){var a,t,l,c,i={street_address:e.street_address,apartment:e.apartment,county:e.county,city:e.city,state:e.state,zip_code:e.zip_code,country:e.country||"US",phone:e.phone_number,email:e.email,account:n.props.vendor.id},r={street_address:e.street_address_1,apartment:e.apartment_1,county:e.county_1,city:e.city_1,state:e.state_1,zip_code:e.zip_code_1,country:e.country_1||"US",is_same_main_address:n.state.checked,account:null===(a=n.props.vendor)||void 0===a?void 0:a.id};(null===(t=n.props.vendor)||void 0===t?void 0:t.main_address)&&(null===(l=n.props.vendor)||void 0===l?void 0:l.billing_address)?Vj(i,null===(c=n.props.vendor)||void 0===c?void 0:c.main_address.id).then((function(e){var a;qj(r,null===(a=n.props.vendor)||void 0===a?void 0:a.billing_address.id).then((function(a){n.setState({main:e.data,billing:a.data},(function(){n.setState({unSavedExit:!1})})),Mm.b.success("Address updated Successfully"),n.props.setAddressInVendor(e.data,a.data)}))})).catch((function(e){td(e)})):Fj(i).then((function(e){Pj(r).then((function(a){n.setState({main:e.data,billing:a.data},(function(){n.setState({requiredSuccessModalVisible:!0},(function(){n.setState({unSavedExit:!1})}))})),Mm.b.success("Address created Successfully"),n.props.setAddressInVendor(e.data,a.data)}))})).catch((function(e){td(e)}))},n.handleCheckbox=function(e){n.setState({checked:e.target.checked},(function(){if(n.state.checked){var e=n.mainRef.current,a=e.setFieldsValue,t=e.getFieldValue;a({street_address_1:t("street_address"),apartment_1:t("apartment"),country_1:t("country"),city_1:t("city"),state_1:t("state"),zip_code_1:t("zip_code"),county_1:t("county")})}}))},n.phoneNumberValidate=function(e,a,t){a||t(),a.toString().length<10?t("minimum digits should be 10"):t()},n.handleCountyChange=function(e){n.mainRef.current.setFieldsValue({state:null});var a=n.state.county.filter((function(a){return a.county===e}));n.setState({updateMainState:a}),1===(null===a||void 0===a?void 0:a.length)&&n.mainRef.current.setFieldsValue({state:a[0].state})},n.handleBillingCountyChange=function(e){n.mainRef.current.setFieldsValue({state_1:null});var a=n.state.county.filter((function(a){return a.county===e}));n.setState({updateBillingState:a}),1===(null===a||void 0===a?void 0:a.length)&&n.mainRef.current.setFieldsValue({state_1:a[0].state})},n.state={checked:!1,county:[],updateMainState:null,updateBillingState:null},n.mainRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(e){var a,t,n,l,c,i,r,s,o,m=this;this.mainRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.vendor.main_address),{},{phone_number:null===(a=this.props.vendor)||void 0===a||null===(t=a.main_address)||void 0===t?void 0:t.phone,apartment_1:null===(n=this.props.vendor.billing_address)||void 0===n?void 0:n.apartment,street_address_1:null===(l=this.props.vendor.billing_address)||void 0===l?void 0:l.street_address,country_1:null===(c=this.props.vendor.billing_address)||void 0===c?void 0:c.country,city_1:null===(i=this.props.vendor.billing_address)||void 0===i?void 0:i.city,state_1:null===(r=this.props.vendor.billing_address)||void 0===r?void 0:r.state,zip_code_1:null===(s=this.props.vendor.billing_address)||void 0===s?void 0:s.zip_code,county_1:null===(o=this.props.vendor.billing_address)||void 0===o?void 0:o.county})),Qu({ordering:"county"}).then((function(e){m.setState({county:e.data}),m.setState({updateMainState:e.data}),m.setState({updateBillingState:e.data})})).catch((function(e){td(e),m.setState({load:!1})}))}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.county,i=n.updateMainState,r=n.updateBillingState,s=null===(e=this.props.vendor)||void 0===e?void 0:e.main_address,o=null===(a=this.props.vendor)||void 0===a?void 0:a.billing_address;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input main address and billing address."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.mainRef,onFinish:this.handleSubmit,hideRequiredMark:!0},DM,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 border-rit-div"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h4",null,"Main Address")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"apartment",label:"Apartment, Suite, etc"},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(c,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(i,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{initialValue:"United States",name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Country",defaultValue:(null===s||void 0===s?void 0:s.country)?null===s||void 0===s?void 0:s.country:np.find((function(e){return"US"===e.code})).name},np.map((function(e){return l.a.createElement(ku.a.Option,{key:e.code,value:e.name},e.name)}))))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone_number",label:"Phone Number",rules:[{required:!1,message:""},function(){return{validator:function(e,a){return a?a.toString().length>=10?Promise.resolve():Promise.reject(new Error("minimum digits should be 10")):Promise.resolve()}}}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,14})/).slice(1).join("-").replace(/-*$/g,"")},parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"123-456-7890",maxLength:"22"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"Email Address"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement("h4",null,"Billing Address"),l.a.createElement("div",{className:"same-address-label position-absolute"},l.a.createElement(Fm.a.Item,{name:"is_same_main_address"},l.a.createElement(tp.a,{checked:this.state.checked,onChange:function(e){return t.handleCheckbox(e)}},"Same as Main Address")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address_1",label:"Street Address",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"apartment_1",label:"Apartment, Suite, etc"},l.a.createElement(Pm.a,{placeholder:"Apartment, Suite, etc"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county_1",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleBillingCountyChange,placeholder:"Select"},Object(lp.uniqBy)(c,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.county,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"city_1",label:"City",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"state_1",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(r,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.state,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip_code_1",label:"ZIP/Postal Code",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Zip/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country_1",label:"Country",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Country",defaultValue:(null===o||void 0===o?void 0:o.country)?null===o||void 0===o?void 0:o.country:"United States"},np.map((function(e){return l.a.createElement(ku.a.Option,{key:e.code,value:e.name},e.name)}))))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),RM=fu.a.Panel,MM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).setVendor=function(e,a){var t;null===(t=n.state.vendor)||void 0===t||t.name,n.setState((function(){return{vendor:e}})),console.log(e,"vendor");var l=null;if(n.state.activeKey.length>1&&(l=n.state.activeKey.find((function(e){return e==a}))),l)return null;n.setState((function(a){for(var t="",l=0;l<=n.state.activeKey.length;l++)l==n.state.activeKey.length&&(t=l.toString());return{vendor:e,activeKey:[].concat(Object(Ou.a)(a.activeKey),Object(Ou.a)(_d(t,"2")))}}))},n.collapseOnChange=function(e){n.setState({activeKey:e})},n.setAddressInVendor=function(e,a){var t=Object(wu.a)(Object(wu.a)({},n.state.vendor),{},{main_address:e,billing_address:a});n.setState({vendor:t,unsavedExit:!1})},n.fetchVendorData=function(){var e=n.state.vendor?n.state.vendor.id:n.props.match.params.id;n.setState({loading:!0}),Tj(e).then((function(e){n.setState({vendor:e.data,loading:!1,activeKey:n.props.location.editTab||"1"})})).catch((function(e){n.setState({loading:!1}),td(e)}))},n.state={vendor:null,activeKey:"1",unsavedExit:!1,required:!1},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a=[{title:"Create Vendor Account"}];(this.state.vendor?null===(e=this.state.vendor)||void 0===e?void 0:e.id:this.props.match.params.id)&&(a=[{title:"Edit Vendor Account"}],this.fetchVendorData()),this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.vendor,n=a.activeKey;return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit,title:"You haven't added all of the required information.",cancelText:"Continue",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1},setCancel:function(){e.setState({required:!0})}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},defaultActiveKey:["1"],activeKey:n,onChange:this.collapseOnChange},l.a.createElement(RM,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(AM,{vendor:t,setVendor:this.setVendor})),l.a.createElement(RM,{disabled:!t,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Address Information"))),key:"2"},l.a.createElement(TM,{vendor:t,fetchVendorData:this.fetchVendorData,setAddressInVendor:this.setAddressInVendor}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{style:{marginRight:10}},"Cancel"),l.a.createElement(Vm.a,{disabled:!t,onClick:function(){o.push(Object(dh.a)(zm.dashboard.vendor_account.view,{id:t.id}))},type:"primary"},"View Account"))))))))}}]),t}(n.Component),FM=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(h_.withRouter)(MM)),PM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).handleBillingAddress=function(){var a,t=null===(a=e.props.vendor)||void 0===a?void 0:a.billing_address;return!!(t&&(null===t||void 0===t?void 0:t.street_address)||(null===t||void 0===t?void 0:t.apartment)||(null===t||void 0===t?void 0:t.county)||(null===t||void 0===t?void 0:t.city)||(null===t||void 0===t?void 0:t.state)||(null===t||void 0===t?void 0:t.zip_code))},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this,n=null===(e=this.props.vendor)||void 0===e?void 0:e.main_address,c=null===(a=this.props.vendor)||void 0===a?void 0:a.billing_address;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},!this.props.hideTitle&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},!this.props.hideTitle&&l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return o.push({pathname:Object(dh.a)(zm.dashboard.vendor_account.edit,{id:t.props.match.params.id}),editTab:"2"})}},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main px-0"},l.a.createElement("div",{className:"col-12"},n?l.a.createElement("div",{className:"row mx-0 site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Main Address"))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat(n.street_address||""," ").concat(n.apartment||""," ").concat(n.county||""," ").concat(n.city||""," ").concat(n.state||""," ").concat(n.zip_code||""," ").concat(n.country||""))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0"},(null===n||void 0===n?void 0:n.email)||"-")),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},yd(null===n||void 0===n?void 0:n.phone)||"-"))):l.a.createElement("div",{className:"row mx-0 no-data-card-row  bg-transparent no-data-card-row-2 align-items-center mb-0 justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.location_gray}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Address Information"))),this.handleBillingAddress()&&l.a.createElement("div",{className:"row mx-0 site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 title"},l.a.createElement("div",{className:"site-name-location"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"Billing Address"))),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},"".concat((null===c||void 0===c?void 0:c.street_address)||""," ").concat((null===c||void 0===c?void 0:c.apartment)||""," ").concat((null===c||void 0===c?void 0:c.county)||""," ").concat((null===c||void 0===c?void 0:c.city)||""," ").concat((null===c||void 0===c?void 0:c.state)||""," ").concat((null===c||void 0===c?void 0:c.zip_code)||""," ").concat((null===c||void 0===c?void 0:c.country)||"")))))))))}}]),t}(n.Component),VM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.vendor;return e.loading?l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement(Wv.a,null))):l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"ACCOUNT NAME"),l.a.createElement("h5",{className:"text-capitalize font-weight-bold"},null===a||void 0===a?void 0:a.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"ACCOUNT TYPE"),l.a.createElement("h5",{className:"mb-0 text-capitalize"},"Vendor")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"EIN"),l.a.createElement("h5",{className:"text-capitalize"},(null===a||void 0===a?void 0:a.ein)?wd(null===a||void 0===a?void 0:a.ein):"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"1099"),l.a.createElement("h5",{className:"text-capitalize"},"YES"===(null===a||void 0===a?void 0:a.account_1099)?"Yes":"NO"===(null===a||void 0===a?void 0:a.account_1099)?"No":"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Epa Id"),l.a.createElement("h5",{className:"text-capitalize"},(null===a||void 0===a?void 0:a.epa_id)||"-")))}}]),t}(n.Component),qM=Object(r.withRouter)(VM),LM=fu.a.Panel,UM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).fetchVendorData=function(){n.setState({loading:!0}),Tj(n.props.match.params.id).then((function(e){n.setState({vendor:e.data,loading:!1})})).catch((function(e){n.setState({loading:!1}),td(e)}))},n.state={loading:!1,vendor:null},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchVendorData()}},{key:"render",value:function(){var e=this,a=this.state,t=a.vendor,n=a.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-info-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row mx-0 steps-main-div-inn mt-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(LM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(dh.a)(zm.dashboard.vendor_account.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement(qM,{vendor:t,loading:n})),l.a.createElement(LM,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Address Information"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(dh.a)(zm.dashboard.vendor_account.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"2"},l.a.createElement(PM,{hideTitle:!0,vendor:t}))))))))))}}]),t}(n.Component),BM=Object(r.withRouter)(UM);var WM=vf.a.TabPane,YM=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.vendorAccountDetailAction(this.props.match.params.id).then((function(){var a=e.props.vendor,t=[{title:"Vendor Accounts",url:zm.dashboard.owner_account.self},{title:a.name,url:"#"}];e.props.setBreadcrumb(t)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},l.a.createElement(vf.a,{defaultActiveKey:"1",className:"carpet-cleaning-main-common-tab"},l.a.createElement(WM,{tab:"Summary",key:"1"},l.a.createElement(BM,null))))))}}]),t}(n.Component),KM=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{vendorAccountDetailAction:function(e){return function(a){return Tj(e).then((function(e){a({type:"VENDOR_ACCOUNT_DETAIL_SUCCESS",payload:e.data})}))}},setBreadcrumb:Uv})(Object(r.withRouter)(YM));function GM(e){return od(ad("project.project"),e)}function zM(e,a){return md(ad("project.project",{id:e}),a)}function HM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("project.project");return id(a,e)}function $M(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("project.project",{id:e});return id(t,a)}function QM(e){return od(ad("project.project_document"),e)}function JM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("project.project_document");return id(a,e)}function ZM(e){return od(ad("project.post"),e)}function XM(e,a){return md(ad("project.post",{id:e}),a)}function eF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("project.post");return id(a,e)}function aF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("project.customer_contacts");return id(a,e)}function tF(e){return od(ad("project.customer_contacts"),e)}function nF(e,a){return md(ad("project.customer_contacts",{id:e}),a)}function lF(e){return dd(ad("project.customer_contacts",{id:e}))}function cF(e){return od(ad("project.owner_contacts"),e)}function iF(e,a){return md(ad("project.owner_contacts",{id:e}),a)}function rF(e){return dd(ad("project.owner_contacts",{id:e}))}function sF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("project.owner_contacts");return id(a,e)}function oF(e){return id(ad("project.project_activity",{id:e}))}function mF(){return id(ad("project.project_status"))}function dF(e,a){return md(ad("project.default_customer_recipient",{id:e}),a)}function uF(e,a){return md(ad("project.primary_site",{id:e}),a)}function pF(e){return od(ad("project.service_variant"),e)}function vF(e){return id(ad("project.service_variant"),e)}function hF(e,a){return md(ad("project.service_variant",{id:a}),e)}function fF(e){return dd(ad("project.service_variant",{id:e}))}function EF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("project.associated_proposal");return id(a,e)}var gF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={projects:[],pagination:{search:"",current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},date:{start:"",end:"",start_modified:"",end_modified:""},loading:!0},e.columns=[{title:"Project Id",dataIndex:"id",sorter:!0,key:"id"},{title:"Project name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("p",null,e.name||"-"))}},{title:"Primary Team Member",dataIndex:"point_project",render:function(e){return l.a.createElement("div",null,e||"-")},sorter:!0,key:"point_project"},{title:"Associated proposal",dataIndex:"proposal",render:function(e){return l.a.createElement("div",{className:""}," ",(null===e||void 0===e?void 0:e.name)||"-")}},{title:"Billing Account",dataIndex:"project_customer_contact",render:function(e){var a,t;return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.length)&&(null===(a=e[0])||void 0===a||null===(t=a.account)||void 0===t?void 0:t.name)||"-")},sorter:!0,key:"project_customer_contact"},{title:"Site Manager Account",dataIndex:"project_owner_contact",render:function(e){var a,t;return l.a.createElement("div",null,(null===e||void 0===e?void 0:e.length)&&(null===(a=e[0])||void 0===a||null===(t=a.account)||void 0===t?void 0:t.name)||"-")},sorter:!0,key:"project_owner_contact"},{title:"Status",dataIndex:"status",sorter:!0,key:"status",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},null===e||void 0===e?void 0:e.title)}},{title:"LAST ACTIVITY DATE",dataIndex:"modified",sorter:!0,key:"modified",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},Sd(e))}}],e.fetchProjects=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.search,l=t.date;HM(Object(wu.a)(Object(wu.a)({},a),{},{page:a.page||1,search:n},l)).then((function(t){e.setState({projects:t.data.results,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:t.data.count}),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return a.persist(),e.debouncedEvent(a)}},e.onSearch=function(a){e.setState({search:a.target.value},(function(){e.fetchProjects()}))},e.handleTableChange=function(a,t,n){var l="";"descend"===n.order&&(l="-");var c={page:a.current};n.columnKey?c.ordering="".concat(l).concat(n.columnKey):c.ordering="name",e.setState({loading:!0}),e.fetchProjects(c)},e.getLocateData=function(){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.propsal_icon_add,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"no-data-main-tg mb-0"},"No Projects"))))},e.handleFilterData=function(a){a?e.setState({date:Object(wu.a)(Object(wu.a)({},e.state.date),a)},(function(){e.fetchProjects()})):e.setState({date:null},(function(){e.fetchProjects()}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{title:"Projects"}]),this.fetchProjects()}},{key:"render",value:function(){var e=this,a=this.state,t=a.projects,n=a.pagination,c=a.loading;return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(cb,{buttonLink:zm.dashboard.operations.projects.create,buttonName:"+ Create Project",onSearch:this.debounceEvent(this.onSearch,1e3),fetchData:function(a){return e.handleFilterData(a)}}),l.a.createElement("div",{className:"row mx-0 width-160-id opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div proposals-main-table opportunity-db-table"},l.a.createElement(fv.a,{scroll:{y:500,x:1300},loading:c,className:"main-table-all sorter-design-fix",columns:this.columns,dataSource:t,onChange:this.handleTableChange,pagination:n,size:"middle",locale:c?{emptyText:" "}:{emptyText:this.getLocateData()},rowClassName:function(e){},onRow:function(e){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.operations.projects.view,{id:e.id}))}}}}))))}}]),t}(n.Component),bF=Object(Lm.b)(null,{setBreadcrumb:Uv})(gF),NF=ku.a.Option,yF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleGoogleBtnClick=function(){pd({redirect_url:window.location.href}).then((function(e){window.location.href=e.data.url}))},n.state={},n}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d=this.props,u=d.project,p=d.statusTypes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Associated Opportunity"),l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.leads_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,null===(e=u.opportunity)||void 0===e?void 0:e.name),l.a.createElement("p",{className:"mb-0"},null===(a=u.opportunity)||void 0===a||null===(t=a.status)||void 0===t?void 0:t.title))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Associated proposal"),l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.folder_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,null===u||void 0===u||null===(n=u.proposal)||void 0===n?void 0:n.name),l.a.createElement("p",{className:"mb-0"},null===u||void 0===u||null===(c=u.proposal)||void 0===c?void 0:c.status.title)))))),l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Project ID"),l.a.createElement("h5",{className:"mb-0"},u.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Project NAME"),l.a.createElement("h5",{className:"mb-0"},u.name)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"STATUS"),l.a.createElement(ku.a,{labelInValue:!0,className:"status-small-select",placeholder:"Select",defaultValue:{value:null===(i=u.status)||void 0===i?void 0:i.id,label:null===(r=u.status)||void 0===r?void 0:r.title},value:{value:null===(s=u.status)||void 0===s?void 0:s.id,label:null===(o=u.status)||void 0===o?void 0:o.title},style:{width:"100%",textAlign:"center"},onChange:this.props.handleChange,suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},null===p||void 0===p?void 0:p.map((function(e){return l.a.createElement(NF,{value:e.id,key:e.id},l.a.createElement("div",{className:"text-capitalise"},e.title))})))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Project SOURCE"),l.a.createElement("h5",{className:"mb-0"},(null===u||void 0===u||null===(m=u.source)||void 0===m?void 0:m.name)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Project Created"),l.a.createElement("h5",{className:"mb-0"},Sd(u.created)))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"PROJECT START AND END DATES"),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Start"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(u.project_start_date))),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"End"),l.a.createElement("li",{className:"list-inline-item gray-color-li"},Sd(u.project_end_date)))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-9 col-lg-9"},l.a.createElement("h6",{className:"text-uppercase"},"DESCRIPTION"),l.a.createElement("h5",{className:"mb-0"},u.description))))))}}]),t}(n.Component),wF=Object(r.withRouter)(yF),_F=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,selectedData:null,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},loading:!1},e.getPostDateColor=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?"gray":n.isSame(a,"day")?"#F2994A":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0:"gray":"gray"},e.getPostDateText=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MM/DD/YYYY"):"No Due Date":"No Due Date"},e.postColumns=[{title:"POST NAME",sorter:!0,render:function(a){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{className:"post-checkbox-opacity",checked:a.completed,onChange:function(){return e.props.changePostStatus(a,!a.completed)},onClick:function(e){return e.stopPropagation()}},a.name))}},{title:"TYPE",dataIndex:"post_type",sorter:!0,render:function(e){return l.a.createElement("div",null,bd(e)||"-")}},{title:"PRIORITY",dataIndex:"priority",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"ASSIGNEE",dataIndex:"assignee",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},(null===e||void 0===e?void 0:e.first_name)?l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name)):" ","".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"-"))}},{title:l.a.createElement("div",{className:"position-relative"},"DUE DATE"),sorter:!0,render:function(a){return l.a.createElement(l.a.Fragment,null,a?l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:e.getPostDateColor(a)}},e.getPostDateText(a)):"-")}}],e.handleChange=function(a){e.fetchPosts({page:a.current})},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.posts,t=e.showPostDrawer;return l.a.createElement(l.a.Fragment,null,(null===a||void 0===a?void 0:a.length)>0?l.a.createElement("div",{className:"col-12 px-0 pt-2 table-responsive main-table-div mb-3 post-table"},l.a.createElement(fv.a,{onRow:function(e,a){return{onClick:function(a){t(!0,e)}}},className:"main-table-all",columns:this.postColumns,pagination:!this.props.viewAll&&this.state.pagination,onChange:this.handleChange,dataSource:a,size:"middle",rowClassName:function(e){if(e.completed)return"post-opacity"}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-3 no-data-card-row border-0 bg-transparent align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer",onClick:function(){return t(!0)}},l.a.createElement("img",{src:Rm.note_add_new_create_icon,className:"img-fluid",alt:"search icon"}),l.a.createElement("h6",{className:"mb-0 text-green-tag"},"Create Post")))))}}]),t}(n.Component),SF={labelCol:{span:24},wrapperCol:{span:24}},xF=Pm.a.TextArea,CF=ku.a.Option,OF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={assignees:[],fetching:!1,selectedData:null,warningVisible:!1},e.formRef=l.a.createRef(),e.handleChange=function(a){e.setState({selectedData:e.state.assignees.find((function(e){return e.id===a}))})},e.showWarningM=function(a){e.setState({warningVisible:a})},e.fetchUser=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ud("salesperson",a).then((function(a){e.setState({assignees:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSubmit=function(a){a.project=e.props.match.params.id,a.due_date&&(a.due_date=hd()(a.due_date).format("YYYY-MM-DD")),e.props.data?XM(e.props.data.id,a).then((function(a){Mm.b.success("Post Updated Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):ZM(a).then((function(a){Mm.b.success("Post Created Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.populateData=Object(Qm.a)($m.a.mark((function a(){var t,n;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.props.data){a.next=5;break}return a.next=3,e.fetchUser();case 3:e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.data),{},{assignee:null===(t=e.props.data)||void 0===t||null===(n=t.assignee)||void 0===n?void 0:n.id,due_date:e.props.data.due_date?hd()(e.props.data.due_date):null})),e.setState({selectedData:e.props.data.assignee});case 5:case"end":return a.stop()}}),a)}))),e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.assignees,c=a.selectedData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,destroyOnClose:!0,title:"Post",maskClosable:!1,visible:this.props.visible,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",onClose:function(){e.showWarningM(!0)},placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningM(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.formRef.current.submit()},type:"primary"},this.props.data?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},SF,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Post Name*")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Post Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"post_type",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Type"))},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Type"},l.a.createElement(CF,{value:"NOTE"},"Note"),l.a.createElement(CF,{value:"TASK"},"Task")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"assignee",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Assignee")),className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Search Assignee",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchUser()},onSearch:function(a){return e.fetchUser({search:a})},onChange:this.handleChange,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},n.map((function(e){return l.a.createElement(CF,{key:e.id,value:e.id},"".concat(e.first_name," ").concat(e.last_name))}))))),c&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(null===c||void 0===c?void 0:c.first_name,null===c||void 0===c?void 0:c.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(c.first_name," ").concat(c.last_name)),l.a.createElement("p",{className:"mb-0"},c.role.split("_").join(" ")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"due_date",label:"Due Date"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"priority",label:"Priority"},l.a.createElement(ku.a,{placeholder:"Select Priority"},l.a.createElement(CF,{value:"NORMAL"},l.a.createElement("span",{style:{backgroundColor:"#fcd966"},className:"status-tag"}),"Normal"),l.a.createElement(CF,{value:"HIGH"},l.a.createElement("span",{style:{backgroundColor:"#eb8357"},className:"status-tag"}),"High"),l.a.createElement(CF,{value:"LOW"},l.a.createElement("span",{style:{backgroundColor:"#7fd4ba"},className:"status-tag"}),"Low")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Description"))},l.a.createElement(xF,{className:"text-area-main text-area-task",placeholder:"Enter Description"})))))))),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningM(!1)},heading:"Are you sure you want to exit editing this Post?",handlePostDrawer:!0,closePostDrawer:this.props.onClose}))}}]),t}(n.Component),kF=Object(r.withRouter)(OF),jF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={posts:[],drawerData:null,loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.handleActiveKey=function(){var a=e.state.activeKey;"1"===a?e.getPosts():"2"===a?e.getPosts({type:"NOTE"}):"3"===a?e.getPosts({type:"TASK"}):"4"===a?e.getPosts({type:"CALL_LOG"}):"5"===a?e.getPosts({type:"EMAIL"}):e.getPosts({type:"EVENT"})},e.changePostStatus=function(a,t){var n=e.state.posts;XM(a.id,{completed:t}).then((function(l){var c=n.findIndex((function(e){return e.id===a.id}));n[c].completed=t,e.setState({posts:n}),Mm.b.success("Updated post status")})).catch((function(e){td(e)}))},e.onTabChange=function(a){e.setState({activeKey:a})},e.getPosts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.project=e.props.match.params.id,eF(Object(wu.a)({},a)).then((function(t){e.setState({posts:t.data.results,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.viewAll?10:t.data.count})})})).catch((function(e){td(e)}))},e.showPostDrawer=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visibleDrawer:a,drawerData:t})},e.onSearch=function(a){e.getPosts({search:a.target.value})},e.handleChange=function(a){e.getPosts({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,a){this.state.activeKey;a.activeKey!==this.state.activeKey&&this.handleActiveKey()}},{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var e,a=this,t=this.props.viewAll,n=this.state,c=n.posts,i=n.drawerData;return console.log(c,"posts"),l.a.createElement("div",{className:"col-12 ".concat(t?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"row new-opportunity-header-row position-relative summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header border-1 ".concat(this.props.viewAll?"":"border-1")},l.a.createElement("div",{style:{zIndex:"2"},className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement(Vm.a,{onClick:function(){return a.showPostDrawer(!0)},className:"add-btn-collapse ml-2 text-capitalize"},"+ Create")),t&&l.a.createElement(Vm.a,{onClick:function(){return a.props.onTabChange("7")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"post-custom-tab"},l.a.createElement(_F,{showPostDrawer:this.showPostDrawer,getPosts:this.getPosts,posts:null===(e=this.state)||void 0===e?void 0:e.posts,activeKey:this.state.activeKey,changePostStatus:this.changePostStatus}))),l.a.createElement(kF,{data:i,visible:this.state.visibleDrawer,onSuccess:Object(Qm.a)($m.a.mark((function e(){return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.showPostDrawer(!1);case 2:return e.next=4,a.getPosts();case 4:case"end":return e.stop()}}),e)}))),onClose:function(){return a.showPostDrawer(!1)}}))}}]),t}(n.Component),IF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={dataActivity:[],loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.activityColumns=[{title:"Date",dataIndex:"date",sorter:!0,render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD, YYYY hh:mm A"))}},{title:"Action",dataIndex:"action",sorter:!0},{title:"EMPLOYEE",dataIndex:"user",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},e.split(" ")[0].split("")[0],e.split(" ")[1].split("")[0]),e)}}],e.activityData=[{key:"1",activity_date:"a",action:"b",employee:"c"}],e.fetchActivity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),oF(e.props.match.params.id).then((function(t){e.setState({dataActivity:e.props.viewAll?t.data.data.slice(0,10):t.data.data,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.viewAll?10:t.data.count})})})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.handleChange=function(a){e.fetchActivity({page:a.current})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchActivity()}},{key:"render",value:function(){var e=this,a=this.state,t=a.dataActivity,n=a.loading,c=this.props.viewAll;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 ".concat(c?"":"mt-30")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header border-1 ".concat(c?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.viewAll&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("8")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},t.length>0?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",scroll:{y:240},columns:this.activityColumns,dataSource:t,size:"middle",pagination:!this.props.viewAll&&this.state.pagination,onChange:this.handleChange,loading:n}))):l.a.createElement("div",{className:"row mx-0 mt-3 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.Time_empty_state_icon,className:"img-fluid",alt:"search icon"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Activity"))))))))}}]),t}(n.Component),AF=Object(r.withRouter)(IF),DF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i=this,r=this.props.project;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row summary-info-cr"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES MANAGERS")),(null===r||void 0===r||null===(e=r.sales_manager)||void 0===e?void 0:e.length)>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},null===r||void 0===r?void 0:r.sales_manager.map((function(e){return l.a.createElement("div",{key:e.id,style:{minHeight:"76px",height:"76px"},className:"".concat(e.id===i.props.project.point_project&&"active"," row mx-0 teams-view align-items-center user-info-div-main opportunity-info-div-main")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},"Sales Manager"),e.id===i.props.project.point_project&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact"))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES ASSISTANTS")),(null===r||void 0===r||null===(a=r.sales_assistant)||void 0===a?void 0:a.length)>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},null===r||void 0===r||null===(t=r.sales_assistant)||void 0===t?void 0:t.map((function(e){return l.a.createElement("div",{key:e.id,style:{minHeight:"76px",height:"76px"},className:"".concat(e.id===i.props.project.point_project&&"active"," row mx-0 teams-view align-items-center user-info-div-main opportunity-info-div-main")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},"Sales Assistant"),e.id===i.props.project.point_project&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact"))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"text-uppercase"},"SALES PEOPLE")),(null===r||void 0===r||null===(n=r.sales_person)||void 0===n?void 0:n.length)>0?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},null===r||void 0===r||null===(c=r.sales_person)||void 0===c?void 0:c.map((function(e){return l.a.createElement("div",{key:e.id,style:{minHeight:"76px",height:"76px"},className:"".concat(e.id===i.props.project.point_project&&"active"," row mx-0 teams-view align-items-center user-info-div-main opportunity-info-div-main")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,e.first_name," ",e.last_name),l.a.createElement("p",{className:"mb-0"},"Salesperson"),e.id===i.props.project.point_project&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Point of Contact"))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row teams-update-no-teams-card align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople"))))))))))}}]),t}(n.Component),TF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.contacts;return l.a.createElement(l.a.Fragment,null,e.length>0?l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"small-heading-contact mb-0"},"Contacts")),e.map((function(e,a){var t,n,c,i,r,s,o;return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2 ".concat(e.default_customer_recipient?"active":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat((null===(t=e.contact)||void 0===t?void 0:t.first_name)||""," ").concat((null===(n=e.contact)||void 0===n?void 0:n.last_name)||""),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},(null===(c=e.contact)||void 0===c?void 0:c.role)||"")),l.a.createElement("p",{className:"mb-0"},(null===(i=e.contact)||void 0===i?void 0:i.default_email)&&"".concat(null===(r=e.contact.default_email)||void 0===r?void 0:r.email,",")," ",null===(s=e.contact)||void 0===s||null===(o=s.default_phone)||void 0===o?void 0:o.phone_number),e.default_customer_recipient&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Proposal Recipient")))))}))):l.a.createElement("div",{className:"col-12 pt-3"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Contacts")))))}}]),t}(n.Component),RF=fu.a.Panel,MF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[]},e.fetchCustomerAccount=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.project=e.props.match.params.id,aF(a).then((function(a){e.setState({data:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchCustomerAccount()}},{key:"render",value:function(){var e=this,a=this.state.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"sales-site-design-fix no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"mt-30 border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(a){return e.fetchSiteOwnerContact({search:a.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("3")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement(l.a.Fragment,null,a.length>0?l.a.createElement(l.a.Fragment,null,a.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{defaultActiveKey:["1"],className:"site-owner-collapse-main",expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(RF,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative h-auto"},l.a.createElement("div",{className:"col-9 col-sm-9 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Account")))),l.a.createElement("div",{className:"col-3 col-sm-3 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{style:{color:"#4F4F4F"}},e.contact.length))))),key:"1",forceRender:!0},l.a.createElement(TF,{contacts:e.contact}))))}))):l.a.createElement("div",{className:"col-12 ".concat(this.props.hideTitle?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Billing Accounts"))))))))}}]),t}(n.Component),FF=function(e){var a=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},a.contact.length>0?a.contact.map((function(e,a){var t,n;return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div position-relative"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},e.role?e.role:"-")),l.a.createElement("p",{className:"mb-0"},e.default_email&&"".concat(null===(t=e.default_email)||void 0===t?void 0:t.email,","),"\xa0 ",null===(n=e.default_phone)||void 0===n?void 0:n.phone_number)))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.contacts_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))),l.a.createElement("div",{className:"row",style:{padding:"16px 0",borderTop:"1px solid #e0e0e0"}},a.site.length>0?a.site.map((function(e,a){var t,n,c,i,r,s,o;return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{minHeight:"100px"},className:"row site-details-row-card site-details-row-card-update position-relative ".concat(e.primary?"active":"")},l.a.createElement("div",{className:"col-12 col-sm-2 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("span",{className:"text-uppercase font-weight-500"},null===(t=e.site)||void 0===t?void 0:t.name)))),l.a.createElement("div",{className:"col-12 col-sm-10 px-3 py-0 position-relative"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===(n=e.site)||void 0===n?void 0:n.apartment," ",null===(c=e.site)||void 0===c?void 0:c.city,","," ",null===(i=e.site)||void 0===i?void 0:i.state," ",null===(r=e.site)||void 0===r?void 0:r.zip_code," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},null===(s=e.site)||void 0===s?void 0:s.email)),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},null===(o=e.site)||void 0===o?void 0:o.phone))),e.primary&&l.a.createElement("small",{style:{right:"15px"},className:"primary-text-right text-capitalize position-absolute"}," primary site"))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid mb-2"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))},PF=fu.a.Panel,VF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[]},e.fetchSiteOwnerContact=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.project=e.props.match.params.id,sF(a).then((function(a){e.setState({data:a.data.results})})).catch((function(e){td(e)}))},e.handleChangeTab=function(){e.props.onChange("2")},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchSiteOwnerContact()}},{key:"render",value:function(){var e=this,a=this.state.data,t=this.props.viewAll;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.viewAll?"":"sales-site-design-fix")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"mt-30 border-1 d-none")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"}),t&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("4")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),(null===a||void 0===a?void 0:a.length)>0?l.a.createElement(l.a.Fragment,null,a.map((function(e,a){return l.a.createElement("div",{key:a,className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],className:"site-owner-collapse-main"},l.a.createElement(PF,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-8 col-sm-8 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ")))),l.a.createElement("div",{className:"col-4 col-sm-4 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.contact.length)),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.site.length))))),key:"1",forceRender:!0},l.a.createElement(FF,{data:e}))))}))):l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Site Manager Accounts"))))))}}]),t}(n.Component),qF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={workOrder:[]},e.workOrdersColumns=[{title:"Work order id",dataIndex:"id",sorter:!0,render:function(e){return l.a.createElement("div",{className:"font-weight-bold"},e)}},{title:"Associated Project",dataIndex:"project",sorter:!0,render:function(){var a,t;return l.a.createElement("div",null,null===(a=e.props)||void 0===a||null===(t=a.project)||void 0===t?void 0:t.name)}},{title:"Status",dataIndex:"status",sorter:!0,render:function(e){var a;return l.a.createElement("div",null,l.a.createElement("span",{style:{color:"#F2994A"}},(null===e||void 0===e||null===(a=e.split("_"))||void 0===a?void 0:a.join(" "))||"-"))}},{title:"Site",dataIndex:"site",sorter:!0,render:function(e){var a,t,n,c,i;return l.a.createElement("div",{className:"text-uppercase"},(null===e||void 0===e?void 0:e.length)?"".concat(null===(a=e[0])||void 0===a?void 0:a.street_address," ").concat(null===(t=e[0])||void 0===t?void 0:t.city," ").concat(null===(n=e[0])||void 0===n?void 0:n.country," ").concat(null===(c=e[0])||void 0===c?void 0:c.state," ").concat(null===(i=e[0])||void 0===i?void 0:i.zip_code):"-")}},{title:l.a.createElement("div",null,"Service date"),dataIndex:"service_date",sorter:!0,render:function(e){return l.a.createElement("div",null,e?hd()(e).format("MMM DD, YYYY hh:mm A"):"-")}}],e.getLocateData=function(){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.empty_work_order_keys_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"no-data-main-tg mb-0"},"No Work Orders"))))},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a=(null===(e=this.props)||void 0===e?void 0:e.project).work_order;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 no-data-card-row-new"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row account-tabs-min summary-header-details search-view-header-in-collapse align-items-center  carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{pagination:!1,className:"main-table-all work-order-table-inner border-0 pt-3",columns:this.workOrdersColumns,dataSource:a,size:"middle",locale:{emptyText:this.getLocateData()}}))))}}]),t}(n.Component),LF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.docsColumns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.project=e.props.match.params.id,JM(a).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("project",e.props.match.params.id),n.append("document",t),QM(n).then((function(a){e.fetchFiles()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c;(null===(t=e.project)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)!==(null===(l=this.props.project)||void 0===l||null===(c=l.documents)||void 0===c?void 0:c.length)&&this.fetchFiles()}},{key:"render",value:function(){var e=this,a=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.hideTitle?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse ml-2 text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("6")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},a.length>0?l.a.createElement(fv.a,{pagination:!1,onRow:function(e,a){return{onClick:function(a){window.open(e.document,"_blank")}}},className:"main-table-all carpet-cleaning-table border-0",columns:this.docsColumns,dataSource:a,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),UF=Object(r.withRouter)(LF),BF=ku.a.Option,WF=fu.a.Panel,YF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={rows:[],groups:[],loading:!0,qty:1,warningVisible:!1,pricingUom:[]},e.handleChangeTime=function(a,t){if("delete_row"===a){var n=Object(Ou.a)(e.state.rows).filter((function(e){return e.id!==t.id}));e.setState({rows:n})}else{var l=Object(Ou.a)(e.state.rows).map((function(e){return e.id===t.id&&"labor_child"===t.item_type?Object(wu.a)(Object(wu.a)({},e),{},{time:a}):Object(wu.a)({},e)}));e.setState({rows:l})}},e.handleHoursChange=function(a,t){var n=Object(Ou.a)(e.state.rows).map((function(e){return e.id===t.id?Object(wu.a)(Object(wu.a)({},e),{},{hours:a||1}):e.kit_child&&e.kit_id=="kit".concat(t.id+t.kitIndex)?(console.log(a,e.initQuantity,a*e.initQuantity,"---"),Object(wu.a)(Object(wu.a)({},e),{},{quantity:a*e.initQuantity})):Object(wu.a)({},e)}));e.setState({rows:n})},e.handleChange=function(a,t){var n=Object(Ou.a)(e.state.rows).map((function(n){if(n.id===t.id&&"labor_child"===t.item_type){var l=e.state.groups.find((function(e){return e.id===a}));return Object(wu.a)(Object(wu.a)({},n),{},{type_id:a,data:l})}return Object(wu.a)({},n)}));e.setState({rows:n})},e.handlePricingUom=function(){var a,t=[],n=Object(wu.a)({},null===(a=e.props.newPricing)||void 0===a?void 0:a.variant_data);if((null===n||void 0===n?void 0:n.daily_price)||(null===n||void 0===n?void 0:n.hourly_price)||(null===n||void 0===n?void 0:n.pricing_uom)){if(null===n||void 0===n?void 0:n.daily_price){t.push({label:"Day (d)",value:"DAY"})}if(null===n||void 0===n?void 0:n.hourly_price){t.push({label:"Hours (hrs)",value:"HOURS"})}if((null===n||void 0===n?void 0:n.pricing_uom)&&(null===n||void 0===n?void 0:n.price)){var l,c,i={label:null===(l=n.pricing_uom)||void 0===l?void 0:l.name,value:"UOM",symbol:"(".concat(null===n||void 0===n||null===(c=n.pricing_uom)||void 0===c?void 0:c.symbol,")")};t.push(i)}}else{t.push({label:"Day (d)",value:"DAY"})}e.setState({pricingUom:t})},e.handleData=Object(Qm.a)($m.a.mark((function a(){var t,n,l,c,i,r,s;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=[],e.props.child&&(t=Object(Ou.a)(e.props.child)),n=[],!e.props.view&&!e.props.priceChild){l=Object(qD.a)(t);try{for(i=function(){var e=c.value;if("INVENTORY_KIT"==e.item_type?(e.kitIndex=t.findIndex((function(a){return a.id===e.id})),n.push(e)):n.push(e),"LABOR"==e.item_type){var a={item_type:"add",id:"add",name:e.resource_name};n.push(a)}},l.s();!(c=l.n()).done;)i()}catch(o){l.e(o)}finally{l.f()}}r=n.length>0?n:t,s=r.map((function(a,t){switch(a.item_type){case Bd:return e.setState({loading:!0}),LE(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case Wd:return e.setState({loading:!0}),tk(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case"labor_child":return e.setState({loading:!0}),Hp(a.item_id).then((function(t){e.setState({loading:!1}),a.data=t.data})).catch((function(a){e.setState({loading:!1}),td(a),e.setState({loading:!1})})),a;case"INVENTORY_ITEM":return e.setState({loading:!0}),$C(a.item_id?a.item_id:a.id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case"INVENTORY_KIT":return a;case"DISPOSAL":return Og(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;default:return a.data=null,e.setState({loading:!1}),a}})),console.log(s,"fjsdjgfj"),e.setState({rows:s,loading:!1});case 8:case"end":return a.stop()}}),a)}))),e.handleAddMore=function(a,t){var n=e.state.rows,l={item_type:"labor_child",id:"child"+t,name:a.name};n.splice(t,0,l),e.setState({rows:n})},e.updateTable=function(){return e.state.rows.map((function(e){return delete e.data,delete e.pricing,Object(wu.a)({},e)})).drawer((function(e){return"add"!==e.type}))},e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0",onClick:function(){var a;return e.props.handleRemoveWarning(!0,null===(a=e.props.newPricing)||void 0===a?void 0:a.id)}},"Remove")),e.handleFleetKit=function(e,a,t){var n,c,i;return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(t?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},a&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:a&&{paddingLeft:"30px"}},(null===e||void 0===e?void 0:e.kit_child)?null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name:e.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},e.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"},(null===e||void 0===e?void 0:e.kit_child)?l.a.createElement("span",{className:"text-capitalize"},(null===e||void 0===e||null===(c=e.kit_uom)||void 0===c?void 0:c.name)||"-"):l.a.createElement("span",{className:"text-capitalize"},(null===e||void 0===e||null===(i=e.uom)||void 0===i?void 0:i.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,e.price_unit?"$".concat(e.price_unit):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,e.total_price?"$".concat(e.total_price):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,"-")))},e.renderRow=function(a,t,n){var c,i,r,s,o,m,d,u,p,v;switch(a.type){case Bd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 custom-table-proposal row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.FLEET_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start px-3"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case Wd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.SUPPLY_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start px-3"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case"INVENTORY_ITEM":return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(c=a.item)||void 0===c?void 0:c.name:a.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"},(null===a||void 0===a?void 0:a.kit_child)?l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(i=a.kit_uom)||void 0===i?void 0:i.name)||"-"):l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(r=a.uom)||void 0===r?void 0:r.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case"INVENTORY_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",null,"Unit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),a.children.length>0&&a.children.map((function(t,n){var l=a.children.length>n+1;return e.renderRow(t,!0,l)})),null===(s=a.data)||void 0===s||null===(o=s.inventory_package_items)||void 0===o?void 0:o.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Amount")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",e.item.unit_cost*e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,e.item.margin||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(e.item.unit_cost*e.quantity,e.item.margin)||0)))})));case"FLEET_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,qd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",null,"Unit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},a.price_unit?"$".concat(a.price_unit):"-"),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,a.total_price?"$".concat(a.total_price):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),(null===(m=a.children)||void 0===m?void 0:m.length)>0&&(null===a||void 0===a?void 0:a.children.map((function(t,n){var l,c=(null===(l=a.children)||void 0===l?void 0:l.length)>n+1;return e.handleFleetKit(t,!0,c)}))));case"DISPOSAL":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Disposal")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"VENDOR"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(d=a.facility_id)||void 0===d||null===(u=d.vendor)||void 0===u?void 0:u.name:"WAREHOUSE"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(p=a.facility_id)||void 0===p?void 0:p.internal_location.name:"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select"},l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(v=a.uom)||void 0===v?void 0:v.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 d-flex justify-content-start"},l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a?void 0:a.doc_type)?"BILL_OF_LADING"===(null===a||void 0===a?void 0:a.doc_type)?"Bill of Lading":"NEITHER"===(null===a||void 0===a?void 0:a.doc_type)?"Neither":"Manifest":"-"))));case Ld:return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 gray-2-color"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start"},l.a.createElement("div",{className:"px-3"},"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"})),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))));default:return l.a.createElement(l.a.Fragment,null)}},e.stopEvtBubbling=function(e){e.stopPropagation()},e.handlePriceChange=function(){var a=e.props.newPricing;e.props.handlePriceUnit(!0,a.id)},e.handleInputsBlur=function(a){console.log(a,a.target.value,"value");var t=a.target.value;t&&e.formatVal(t)},e.formatVal=function(a){var t=(null===a||void 0===a?void 0:a.toString())||"0";console.log(t,"))");var n=null===t||void 0===t?void 0:t.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});e.setState({priceUnit:l.format(n)})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a=this.props.newPricing;this.formatVal(null===a||void 0===a?void 0:a.price_per_unit),this.handleData(),this.setState({qty:(null===(e=this.props.newPricing)||void 0===e?void 0:e.project_qty)||1}),this.handlePricingUom()}},{key:"componentDidUpdate",value:function(e,a,t){var n,l=this.props.newPricing;console.log("service check"),(null===(n=e.newPricing)||void 0===n?void 0:n.price_per_unit)!==(null===l||void 0===l?void 0:l.price_per_unit)&&this.formatVal(l.price_per_unit),e.margin!==this.props.margin&&this.handleData()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d=this,u=this.props,p=u.newPricing,v=(u.viewProposalTable,u.view),h=u.allOptions,f=(u.foundRegion,u.removeThreeDots),E=null===h||void 0===h?void 0:h.find((function(e){var a,t;return e.id===(null===p||void 0===p||null===(a=p.variant_data)||void 0===a||null===(t=a.pricing_uom)||void 0===t?void 0:t.id)}));return this.state.loading?l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body p-0"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"custom-table-collapse-main"},l.a.createElement(WF,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td wage-info-collapse-td gray-2-color d-flex align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",src:"INVENTORY_KIT"===(null===p||void 0===p?void 0:p.resource_type)?Rm.inventory_kit_variant:"INVENTORY_ITEM"===(null===p||void 0===p?void 0:p.resource_type)?Rm.inventory_item_variant:"DISPOSAL"===(null===p||void 0===p?void 0:p.resource_type)?Rm.no_disposal_black:"SUPPLY_GROUP"===(null===p||void 0===p?void 0:p.resource_type)?null===Rm||void 0===Rm?void 0:Rm.supply_icon_black:Rm.line_item_black,className:"img-fluid mr-2"}),"INVENTORY_KIT"===(null===p||void 0===p?void 0:p.resource_type)||"INVENTORY_ITEM"===(null===p||void 0===p?void 0:p.resource_type)||"DISPOSAL"===(null===p||void 0===p?void 0:p.resource_type)||"SUPPLY_GROUP"===(null===p||void 0===p?void 0:p.resource_type)?null===p||void 0===p||null===(e=p.resource_id)||void 0===e?void 0:e.name:(null===p||void 0===p||null===(a=p.variant_data)||void 0===a?void 0:a.display_name)?"".concat(null===p||void 0===p||null===(t=p.variant_data)||void 0===t?void 0:t.display_name):"-"),!f&&l.a.createElement(xu.a,{overlay:this.menu,trigger:["click"]},l.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{alt:"remove-icon",src:Rm.black_dots_elipsis,className:"img-fluid"})))),l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0",onClick:this.stopEvtBubbling},v?l.a.createElement("span",null,parseInt(null===p||void 0===p?void 0:p.project_qty)||"1"):l.a.createElement(ap.a,{value:(null===p||void 0===p?void 0:p.project_qty)||1,onBlur:function(e){console.log(null===p||void 0===p?void 0:p.id,""),d.props.handleQuantitySelectChange(e.target.value,null===p||void 0===p?void 0:p.id)}})),l.a.createElement("div",{className:"custom-table-cell-td p-0 gray-2-color d-flex justify-content-center",onClick:this.stopEvtBubbling},(null===p||void 0===p?void 0:p.manually_added)?"INVENTORY_ITEM"===(null===p||void 0===p?void 0:p.type)?l.a.createElement("span",null,null===(n=p.uom)||void 0===n?void 0:n.name," (",null===(c=p.uom)||void 0===c?void 0:c.symbol,")"):l.a.createElement("span",null,null===(i=p.unit)||void 0===i?void 0:i.name," (",null===(r=p.unit)||void 0===r?void 0:r.symbol,")"):v?l.a.createElement("span",null,"DISPOSAL"===(null===p||void 0===p?void 0:p.resource_type)?null===p||void 0===p?void 0:p.disposal_unit_id:"UOM"==p.selected_unit?"".concat(null===E||void 0===E?void 0:E.name," (").concat(null===E||void 0===E?void 0:E.symbol,")"):"HOURS"==p.selected_unit?"Hours (hrs)":"Day (d)"):l.a.createElement(l.a.Fragment,null,(null===(s=this.state.pricingUom)||void 0===s?void 0:s.length)<=1?null===(o=this.state.pricingUom)||void 0===o?void 0:o.map((function(e){return l.a.createElement("span",{value:e.value},e.label,null===e||void 0===e?void 0:e.symbol)})):l.a.createElement(ku.a,{dropdownClassName:"border-green",className:"edit-select-box bg-white edit-box-custom w-100",suffixIcon:l.a.createElement(wO.a,null),onChange:function(e){return d.props.handleUnitSelectChange(e,null===p||void 0===p?void 0:p.id)},placeholder:"select",value:p.selected_unit||void 0},null===(m=this.state.pricingUom)||void 0===m?void 0:m.map((function(e){return l.a.createElement(BF,{value:e.value},e.label,null===e||void 0===e?void 0:e.symbol)}))))),l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0 ".concat(this.props.view?"background-f2":""),onClick:function(e){d.handlePriceChange(),d.stopEvtBubbling(e)}},l.a.createElement("span",{className:"d-inline-block w-100"},l.a.createElement(ap.a,{disabled:v,value:this.state.priceUnit||0,onChange:this.debounceEvent((function(e){return d.props.handlePricePerUnitChange(e,null===p||void 0===p?void 0:p.id)}),1e3),onBlur:this.handleInputsBlur}))),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color pl-0 text-center",onClick:this.stopEvtBubbling},l.a.createElement(UD.a,{defaultChecked:!1,checked:null===p||void 0===p?void 0:p.taxable,disabled:v,onChange:function(e){return d.props.handleCheckBox(e.target.checked,null===p||void 0===p?void 0:p.id,"TAX")}})),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color pl-0 text-center",onClick:this.stopEvtBubbling},l.a.createElement(UD.a,{checked:null===p||void 0===p?void 0:p.include_subtotal,defaultChecked:!0,disabled:v,onChange:function(e){return d.props.handleCheckBox(e.target.checked,null===p||void 0===p?void 0:p.id,"INCLUDE_SUBTOTAL")}})),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3",onClick:this.stopEvtBubbling},l.a.createElement("div",{className:"d-inline-block w-100"},"$ ",gd(null===p||void 0===p?void 0:p.total_price))),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"}," ",l.a.createElement("span",{className:"text-capitalize"},(null===p||void 0===p?void 0:p.document_type)?"BILL_OF_LADING"===(null===p||void 0===p?void 0:p.document_type)?"Bill of Lading":"NEITHER"===(null===p||void 0===p?void 0:p.document_type)?"Neither":"Manifest":"-")))),key:"1"},this.state.rows.map((function(e,a){var t={};if(e.kit){var n,l=d.state.rows.length>a+1;return t={id:e.id,item:e.item,qty:e.quantity,kit_uom:null===(n=e.kit)||void 0===n?void 0:n.unit,type:"INVENTORY_ITEM",kit_child:!0},d.renderRow(t,!0,l)}return console.log("hk"),d.renderRow(e)}))))),l.a.createElement(UO,{footerText:"ok",visible:this.props.modalVisible,onClose:this.props.closeViewModal,heading:this.props.taxCheckBox?this.props.taxVisible?l.a.createElement("div",null,"This is now taxable."):l.a.createElement("div",null,"This is now nontaxable."):this.props.subtotalVisible?l.a.createElement("div",null,"This is now included in the subtotal"):l.a.createElement("div",null,"This is now excluded from the subtotal."),subHeading:this.props.taxCheckBox?this.props.taxVisible?l.a.createElement("div",null,"To make it nontaxable, please uncheck the checkbox."):l.a.createElement("div",null,"To make it taxable, please check the checkbox."):this.props.subtotalVisible?l.a.createElement("div",null,"To make it excluded, uncheck the check box."):l.a.createElement("div",null,"To include it again, please check the checkbox."),footer:"ok"}))}}]),t}(n.Component),KF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).getSelectedServiceVariants=function(){var e=n.props.project;vF({project:null===e||void 0===e?void 0:e.id}).then((function(e){n.setState({newPricing:e.data})})).catch((function(e){td(e)}))},n.getUnitName=function(){n.setState({fetching:!0}),Rg().then((function(e){n.setState({allOptions:e.data})})).catch((function(e){td(e)})).finally((function(){n.setState({fetching:!1})}))},n.getTotalCost=function(e){var a=n.state.newPricing||[],t=0;return a.forEach((function(a){if(null===a||void 0===a?void 0:a.manually_added){var n=(parseInt(a.project_qty)||1)*parseFloat(a.kit_pricing_value||a.item_pricing_value||0);t+=e?(null===a||void 0===a?void 0:a.include_subtotal)?n:0:(null===a||void 0===a?void 0:a.include_subtotal)&&(null===a||void 0===a?void 0:a.taxable)?n:0}else{var l="c"==a.selectedUnit?a.hourly_price:"a"==a.selectedUnit?a.price:a.daily_price,c=(parseInt(a.project_qty)||1)*parseFloat(l||0);t+=e?(null===a||void 0===a?void 0:a.include_subtotal)?c:0:(null===a||void 0===a?void 0:a.include_subtotal)&&(null===a||void 0===a?void 0:a.taxable)?c:0}})),t},n.getResourcePricingCost=function(){var e=n.props.project.line_item,a=0;return e.forEach((function(e){var t=parseInt(e.project_qty)||1;if(e.table_data){var n,l=0,c=0,i=Object(qD.a)(e.table_data.entries());try{for(i.s();!(n=i.n()).done;){var r=Object(yp.a)(n.value,2),s=r[0],o=r[1];if(console.log(o,"item"),"FLEET_GROUP"==o.item_type)a+=Id(o.data)*t;else if("labor_child"==o.item_type){var m=o.hours||1;l+=parseInt(o.hours)||1,c+=Td(o.data,o.time,o.name)*m||0,"labor_child"!=e.table_data[s+1].item_type&&(a+=c/l)}else if("SUPPLY_GROUP"==o.item_type)a+=Ad(o.data)*t||0;else if("INVENTORY_ITEM"==o.item_type){var d,u;console.log("inventory",(null===o||void 0===o?void 0:o.kit_child)?parseInt(o.unit_cost):parseInt(null===(d=o.data)||void 0===d?void 0:d.unit_cost)),a+=((null===o||void 0===o?void 0:o.kit_child)?parseInt(o.unit_cost):parseInt(null===(u=o.data)||void 0===u?void 0:u.unit_cost))*t||0}else if("DISPOSAL"==o.item_type){var p;a+=parseInt(null===(p=o.data)||void 0===p?void 0:p.unit_cost)*t||0}}}catch(v){i.e(v)}finally{i.f()}}else a+=parseInt(e.unit_cost)*t})),a},n.calculatedEstimatedTotal=function(){var e=n.calculatedEstimatedTaxes();return(Number(e)+Number(n.getTotalCost(!0))).toFixed(2)},n.calculatedEstimatedTaxes=function(){return(8.875*n.getTotalCost()/100).toFixed(2)},n.calculatedProfitMargin=function(){var e=n.getTotalCost(!0),a=n.getResourcePricingCost();return((e-a)/a*100).toFixed()},n.fetchRegion=function(){ZE().then((function(e){n.setState({regions:e.data.results})})).catch((function(e){td(e)}))},n.state={allOptions:[],newPricing:[],regions:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getUnitName(),this.fetchRegion(),this.getSelectedServiceVariants()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d,u,p,v=this,h=this.props,f=h.viewAll,E=h.project,g=this.state,b=g.newPricing;g.regions;return l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"mt-30")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"border-1 d-none")},this.props.viewAll&&l.a.createElement(Vm.a,{onClick:function(){return v.props.onTabChange("5")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),b.length>0?l.a.createElement("div",{className:"col-12 mt-3 table-responsive main-table-div position-relative wage-table view-proposal-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Taxable")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Include",l.a.createElement("br",null),"In Subtotal")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Total Price")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Document"))),l.a.createElement("div",{className:"row"},null===b||void 0===b?void 0:b.map((function(e){var a,t;return l.a.createElement(YF,{allOptions:v.state.allOptions,margin:null===e||void 0===e?void 0:e.margin,newPricing:e,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),view:!0,removeThreeDots:!0,foundRegion:null===(t=e.variant_data)||void 0===t?void 0:t.region})})))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row mx-0 border-0 bg-white no-data-card-row align-items-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1"},"No Service Variants")))),l.a.createElement("div",{className:"row ".concat(f?"":"custom-row-space")},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row line-items-row-main"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Cost Setting")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},(null===(e=$D.find((function(e){return(null===E||void 0===E?void 0:E.cost_setting)===e.value})))||void 0===e?void 0:e.name)||"Standard"))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Tax Basis")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},(null===E||void 0===E||null===(a=E.tax_basis)||void 0===a?void 0:a.name)||"-"))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Payment Terms")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},(null===(t=QD.find((function(e){return e.value===(null===E||void 0===E?void 0:E.payment_terms)})))||void 0===t?void 0:t.name)||"30 Days"))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Deposit")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"YES"===(null===E||void 0===E?void 0:E.deposit)?"Yes":"NO"===(null===E||void 0===E?void 0:E.deposit)?"No":"-"))),(null===E||void 0===E?void 0:E.deposit_amount)&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text"},"Deposit Amount")),l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"$".concat(null===E||void 0===E?void 0:E.deposit_amount))))),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1"},l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("span",{className:"sub-total-text"},"Estimated Total Price Pre-tax:")),l.a.createElement("div",{className:"col-4 text-md-right"},l.a.createElement("span",{className:"sub-total-text gray-1"},"LUMP_SUM"==(null===E||void 0===E?void 0:E.cost_setting)||"LUMP_SUM_WITH_UOM_AND_QTY"==(null===E||void 0===E?void 0:E.cost_setting)?l.a.createElement(l.a.Fragment,null,"$",gd(null===E||void 0===E?void 0:E.estimated_total_price_pre_tax)):l.a.createElement(l.a.Fragment,null,"$",gd(null===E||void 0===E?void 0:E.estimated_total_price_pre))))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text"},"Estimated Taxes:")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("small",null,0!=(null===E||void 0===E||null===(n=E.tax_basis)||void 0===n?void 0:n.percentage)?null===E||void 0===E||null===(c=E.tax_basis)||void 0===c?void 0:c.percentage:"-")),l.a.createElement("li",{className:"list-inline-item"},"|"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"sub-total-text gray-1"},"$",gd(null===E||void 0===E?void 0:E.estimated_taxes)||0))))),l.a.createElement("div",{className:"".concat("TOTAL_PRICE_PER_UNIT"==(null===E||void 0===E?void 0:E.cost_setting)&&"normal-text"," row estimated-total-row-3 estimated-total-row")},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text-main"},"Estimated Total:")),l.a.createElement("div",{className:"col-5 text-md-right"},("LUMP_SUM"==(null===E||void 0===E?void 0:E.cost_setting)||"LUMP_SUM_WITH_UOM_AND_QTY"==(null===E||void 0===E?void 0:E.cost_setting))&&l.a.createElement("span",{className:"sub-total-text cut-text mr-2"},"$",null===E||void 0===E?void 0:E.standard_estimated_total),l.a.createElement("span",{className:"sub-total-text-main"},"$",null===(i=gd(null===E||void 0===E?void 0:E.estimated_total))||void 0===i?void 0:i.toLocaleString()))),l.a.createElement("div",{className:"row estimated-total-row-2 pt-1 pb-0 estimated-total-row"}),"TOTAL_PRICE_PER_UNIT"===(null===E||void 0===E?void 0:E.cost_setting)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row estimated-total-row-2 pt-1 pb-0 estimated-total-row align-items-center"},l.a.createElement("div",{className:"col-5"},l.a.createElement("span",{className:"sub-total-text"},"Total Unit:")),l.a.createElement("div",{className:"col-7 text-md-right value-div-inner"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Pm.a,{disabled:!0,placeholder:(null===E||void 0===E?void 0:E.project_uom)?"".concat(null===E||void 0===E||null===(r=E.project_uom)||void 0===r?void 0:r.name," (").concat(null===E||void 0===E||null===(s=E.project_uom)||void 0===s?void 0:s.symbol,")"):"Select"})),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(ap.a,{disabled:!0,value:(null===E||void 0===E?void 0:E.total_units)||0}))))),l.a.createElement("div",{className:"row estimated-total-row-2 pt-3 pb-0 estimated-total-row"},l.a.createElement("div",{className:"col-5"},l.a.createElement("span",{className:"sub-total-text-main"},"Price Per Unit:")),l.a.createElement("div",{className:"col-7 text-md-right"},l.a.createElement("span",{className:"sub-total-text-main"},"$ ",gd(null===E||void 0===E?void 0:E.price_per_unit),(null===E||void 0===E?void 0:E.project_uom)&&" / ".concat(null===E||void 0===E||null===(o=E.project_uom)||void 0===o?void 0:o.symbol," "))))),l.a.createElement("div",{className:"row estimated-total-row-4 estimated-total-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("small",{className:"small-text-main position-relative small-text-main-2"},"Taxes are calculated by customer\u2019s billing address"))))))),l.a.createElement("div",{className:"row bullet-point-row ".concat(f?"":"custom-row-space")},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-1"},l.a.createElement("span",{className:"sub-total-text"},"Qualifiers")),null===E||void 0===E||null===(m=E.qualifiers)||void 0===m||null===(d=m.split("^"))||void 0===d?void 0:d.map((function(e){return l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"<br>"!=e?("\u2022 "+e).replace(/\&nbsp;/g,""):""))})))),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-1"},l.a.createElement("span",{className:"sub-total-text"},"Comments")),null===E||void 0===E||null===(u=E.comments)||void 0===u||null===(p=u.split("^"))||void 0===p?void 0:p.map((function(e){return l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"<br>"!=e?("\u2022 "+e).replace(/\&nbsp;/g,""):""))}))))))}}]),t}(n.Component),GF=fu.a.Panel;function zF(e,a){return e===a?"active":e>a?"finish":void 0}var HF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[],loading:!1,pagination:{current:1,pageSize:15},visible:!1,visibleDrawer:!1},e.handleChange=function(a){zM(e.props.match.params.id,{status:a.value}).then((function(a){e.props.fetchProject()})).catch((function(e){td(e)}))},e.showSendProject=function(a){e.setState({visible:a})},e.getProjectStatusOptions=function(){mF().then((function(a){e.setState({statusTypes:a.data.results.reverse()})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getProjectStatusOptions()}},{key:"render",value:function(){var e=this,a=this.props,t=(a.sites,a.project),n=a.onTabChange,c=a.project_filled,i=this.state.statusTypes;if(!t)return l.a.createElement("div",{className:"text-center my-2"},l.a.createElement(Wv.a,null));var r=null===i||void 0===i?void 0:i.findIndex((function(e){var a;return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t||null===(a=t.status)||void 0===a?void 0:a.id)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-row-main",style:{marginBottom:"80px"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-status-green-line-main"},null===i||void 0===i?void 0:i.map((function(e,a){return l.a.createElement(gE.a,{placement:"top",title:null===e||void 0===e?void 0:e.title,overlayStyle:{fontSize:11},arrowPointAtCenter:!0},l.a.createElement("div",{key:a,className:"summary-line-main text-uppercase position-relative p-0 d-flex align-items-center justify-content-center "+zF(r,a)},"finish"===zF(r,a)?l.a.createElement(EE.a,null):null===e||void 0===e?void 0:e.title))}))))),l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.projects.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"1"},l.a.createElement(wF,{project:t,handleChange:this.handleChange,onTabChange:this.props.onTabChange,fetchProject:this.props.fetchProject,project_filled:c,statusTypes:i,callbackSendProject:function(){return e.showSendProject(!0)}})),l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Posts")),key:"2"},l.a.createElement(jF,Object.assign({onTabChange:n,viewAll:!0},this.props))),l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Activity")),key:"3"},l.a.createElement(AF,{onTabChange:n,viewAll:!0})),l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Team *"),l.a.createElement("div",{className:"d-flex align-items-center"},su(t,"TEAMS")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.projects.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"4",forceRender:!0},l.a.createElement(DF,Object.assign({project:t,fetchProject:this.props.fetchProject},this.props,{onTabChange:n}))),l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Billing Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},su(t,"CUSTOMER")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.projects.edit,{id:e.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"5"},l.a.createElement(MF,Object.assign({onTabChange:n,hideTitle:!0},this.props))),l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Site Manager Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},su(t,"OWNER")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.projects.edit,{id:e.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"6"},l.a.createElement(VF,Object.assign({onTabChange:n,viewAll:!0},this.props))),l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Service Variants",l.a.createElement("sup",null,"*")),l.a.createElement("div",{className:"d-flex align-items-center"},su(t,"SERVICE_VARIENT")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.projects.edit,{id:e.props.match.params.id}),editTab:"5",view:!0})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"7"},l.a.createElement(KF,{onTabChange:n,project:t,viewAll:!0})),l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Work Order")),key:"8"},l.a.createElement(qF,{project:t})),l.a.createElement(GF,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents")),key:"9"},l.a.createElement(UF,{project:t,onTabChange:n,hideTitle:!0})))))))}}]),t}(n.Component),$F=Object(r.withRouter)(HF),QF=vf.a.TabPane,JF=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={project:null,sites:[],active:"1",projectContacts:[],project_filled:!0},e.fetchProject=function(){$M(e.props.match.params.id).then((function(a){var t=[{title:"Projects",url:zm.dashboard.operations.projects.self},{title:a.data.name,url:""}];e.props.setBreadcrumb(t),e.setState({project:a.data,project_filled:Hd(a.data)}),a.data.site&&hp({account:a.data.site.id}).then((function(a){e.setState({sites:a.data.results})}))})).catch((function(e){td(e)}))},e.onTabChange=function(a){e.setState({active:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchProject()}},{key:"render",value:function(){var e=this,a=this.state,t=a.project,n=a.sites,c=a.project_filled;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",onChange:this.onTabChange,activeKey:this.state.active},l.a.createElement(QF,{tab:"Summary",key:"1"},l.a.createElement($F,{project_filled:c,onTabChange:this.onTabChange,onChange:function(a){return e.onChange(a)},sites:n,project:t,fetchProject:this.fetchProject})),l.a.createElement(QF,{tab:"Posts",key:"7"},l.a.createElement(jF,Object.assign({},this.props,{project:t}))),l.a.createElement(QF,{tab:"Activity",key:"8"},l.a.createElement(AF,Object.assign({},this.props,{project:t}))),l.a.createElement(QF,{tab:"Billing Account",key:"3"},l.a.createElement(MF,Object.assign({},this.props,{project:t}))),l.a.createElement(QF,{tab:"Site Manager Account",key:"4"},l.a.createElement(VF,this.props)),l.a.createElement(QF,{className:"custom-tab-pane",tab:"Service Variants",key:"5"},l.a.createElement(KF,{project:t})),l.a.createElement(QF,{tab:"Documents",key:"6"},l.a.createElement(UF,null))))))}}]),t}(n.Component),ZF={setBreadcrumb:Uv},XF=Object(Lm.b)(null,ZF)(Object(r.withRouter)(JF));var eP=ku.a.Option,aP={labelCol:{span:24},wrapperCol:{span:24}},tP=Pm.a.TextArea,nP=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={opportunities:[],proposals:[],fetching:!1,buttonLoading:!1,statusTypes:[],visibleRetrieveWarning:!1,retrieve_pro:!1,proposalVal:null,source:[]},e.formRef=l.a.createRef(),e.fetchProposals=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),EF(a).then((function(a){e.setState({proposals:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.getProjectStatusOptions=function(a,t){mF().then((function(t){if(e.setState({statusTypes:t.data.results}),a){var n,l=t.data.results.find((function(e){return"Under Review"===e.title}));(null===(n=e.props.location.pathname)||void 0===n?void 0:n.includes("create"))&&e.formRef.current.setFieldsValue({status:{label:null===l||void 0===l?void 0:l.title,value:null===l||void 0===l?void 0:l.id}})}})).catch((function(e){td(e)}))},e.handleSubmit=function(a,t){var n,l,c;console.log(a,"values");var i=e.state.retrieve_pro,r=e.props.proposal_data;e.setState({buttonLoading:!0}),i&&!e.props.proposal&&(a.retrieve_proposal=i),a.opportunity&&(a.opportunity=(null===r||void 0===r?void 0:r.opportunity)?null===r||void 0===r?void 0:r.opportunity.id:null),a.status=a.status.value,a.project_end_date=null===(n=a.project_end_date)||void 0===n?void 0:n.format("YYYY-MM-DD"),a.project_start_date=(null===(l=a.project_start_date)||void 0===l?void 0:l.format("YYYY-MM-DD"))||hd()().format("YYYY-MM-DD"),a.source=a.source?a.source.value:null,a.proposal=null===(c=a.proposal)||void 0===c?void 0:c.value,console.log(a,"values"),e.props.project?zM(e.props.project.id,a).then((function(a){e.props.setProject(a.data,2),e.setState({buttonLoading:!1}),t||Mm.b.success("Project Updated Successfully")})).catch((function(a){td(a),e.setState({buttonLoading:!1})})):GM(a).then((function(a){e.props.setProject(a.data,2),e.setState({buttonLoading:!1,retrieve_pro:!1}),Mm.b.success("Project Created Successfully")})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e.handleRetrieveProposal=function(){var a=e.props.proposal_data;e.setState({retrieve_pro:!0,visibleRetrieveWarning:!1},(function(){var t,n={project_start_date:(null===a||void 0===a?void 0:a.project_start_date)?hd()(null===a||void 0===a?void 0:a.project_start_date):null,project_end_date:(null===a||void 0===a?void 0:a.project_end_date)?hd()(null===a||void 0===a?void 0:a.project_end_date):null,description:null===a||void 0===a?void 0:a.description,name:null===a||void 0===a?void 0:a.name,opportunity:null===a||void 0===a||null===(t=a.opportunity)||void 0===t?void 0:t.name};e.formRef.current.setFieldsValue(Object(wu.a)({},n))}))},e.handleWarningModal=function(a){e.setState({visibleRetrieveWarning:a})},e.handleSelectProposal=function(a){e.setState({proposalVal:a},(function(){e.props.ProposalDetailAction(null===a||void 0===a?void 0:a.value)}))},e.fetchSource=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),bv(a).then((function(a){e.setState({source:a.data.results})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getProjectStatusOptions(!0)}},{key:"componentDidUpdate",value:function(e,a,t){var n,l,c,i,r,s,o;e.project!==this.props.project&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.project),{},{status:{label:null===(n=this.props.project.status)||void 0===n?void 0:n.title,value:null===(l=this.props.project.status)||void 0===l?void 0:l.id},proposal:{value:null===(c=this.props.project.proposal)||void 0===c?void 0:c.id,label:null===(i=this.props.project.proposal)||void 0===i?void 0:i.name},opportunity:null===(r=this.props.project.opportunity)||void 0===r?void 0:r.name,source:{value:null===(s=this.props.project.source)||void 0===s?void 0:s.id,label:null===(o=this.props.project.source)||void 0===o?void 0:o.name},project_start_date:this.props.project.project_start_date?hd()(this.props.project.project_start_date):hd()(),due_date:this.props.project.due_date?hd()(this.props.project.due_date):null,response_date:this.props.project.response_date?hd()(this.props.project.response_date):null,project_end_date:this.props.project.project_end_date?hd()(this.props.project.project_end_date):null}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.buttonLoading,c=a.statusTypes,i=a.proposalVal,r=a.proposals,s=a.source,o=this.props.project;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information for project."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},aP,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"proposal",label:"Associated Proposal",className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,disabled:null===o||void 0===o?void 0:o.proposal,showSearch:!0,placeholder:"Associated Proposal",dropdownClassName:"custom-select-drop-main",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onSelect:function(a){return e.handleSelectProposal(a)},onFocus:function(){return e.fetchProposals()},onSearch:function(a){return e.fetchProposals({search:a})},optionLabelProp:"label"},r.map((function(e){return l.a.createElement(eP,{key:e.id,label:e.name,value:e.id},l.a.createElement(xS,{img:Rm.proposal_dropdown,data:e,type:"Proposal"}))})))),window.location.href.includes("create")&&i&&l.a.createElement("span",{className:"retrieve-oppo ".concat(o&&"cursor"),onClick:function(){o||e.handleWarningModal(!0)}},"Retrieve information")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"opportunity",label:"Associated Opportunity",rules:[{required:!1,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Associated opportunity",disabled:!0}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:"Project Name *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Project Name"}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"status",label:"Project Status *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,labelInValue:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Status",onFocus:function(){return e.getProjectStatusOptions(!1)},onSearch:function(a){return e.getProjectStatusOptions(!1,{search:a})}},c.map((function(e,a){return l.a.createElement(eP,{value:e.id,key:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"source",label:"Project Source"},l.a.createElement(ku.a,{showSearch:!0,labelInValue:!0,filterOption:!1,onSearch:function(a){return e.fetchSource({search:a})},onFocus:function(){return e.fetchSource()},notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):"Not Found",suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Source"},s.map((function(e){return l.a.createElement(eP,{value:e.id,key:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"project_start_date",label:"Project Start Date",className:"position-relative"},l.a.createElement(Hv.a,{defaultValue:hd()(),format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"project_end_date",label:"Project End Date",className:"position-relative"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",className:"position-relative"},l.a.createElement(tP,{className:"text-area-main text-area-task",placeholder:"Type Here"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:n,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(iv,{heading:"Are you sure you want to retrieve information from this proposal?",subHeadingUOM:"If you click Continue, information would be retrieved from the selected proposal. Once you click Save & Continue on this widget, you cannot change the associated proposal anymore.",uomWarning:!0,retrieveWarning:!0,okAction:this.handleRetrieveProposal,visible:this.state.visibleRetrieveWarning,onClose:function(){return e.handleWarningModal(!1)}}))}}]),t}(n.Component),lP=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{ProposalDetailAction:function(e){return function(a){return Bf(e).then((function(e){a({type:"PROPOSAL_DETAIL_SUCCESS",payload:e.data})}))}}})(Object(r.withRouter)(nP)),cP=ku.a.Option,iP={labelCol:{span:24},wrapperCol:{span:24}},rP={salesPerson:"salesperson",salesAssistant:"salesassistant",salesManager:"salesmanager"},sP={salesPerson:"sales_person",salesAssistant:"sales_assistant",salesManager:"sales_manager"},oP=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={salesPerson:[],salesAssistant:[],salesManager:[],salesPersonSelected:[],salesAssistantSelected:[],salesManagerSelected:[],fetching:!1,buttonLoading:!1},e.formRef=l.a.createRef(),e.showWarningModal=function(a,t,n){a&&e.setState({item:t,type:n}),e.setState({visible:a})},e.menu=function(a,t){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){e.showWarningModal(!0,a,t)},className:"border-0 bg-transparent text-center p-0 w-100"},"Remove")))},e.removeUsers=function(){var a=e.state,t=a.item,n=a.type;e.setState(Object(zv.a)({},"".concat(n,"Selected"),e.state["".concat(n,"Selected")].filter((function(e){return e.id!==t.id}))))},e.fetchUser=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.setState({fetching:!0}),ud(rP[a],t).then((function(t){var n;e.setState((n={},Object(zv.a)(n,a,t.data.results),Object(zv.a)(n,"fetching",!1),n))})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSelect=function(a,t){var n,l=e.state,c=l.salesAssistantSelected,i=l.salesManagerSelected,r=l.salesPersonSelected;0==i.length&&0==r.length&&0==c.length&&e.handleUpdatePoc(a),e.formRef.current.setFieldsValue(Object(zv.a)({},sP[t],null));var s=e.state[t].filter((function(e){return a===e.id}));if(null===(n=e.state["".concat(t,"Selected")])||void 0===n?void 0:n.find((function(e){return a===e.id})))return null;e.setState((function(e){return Object(zv.a)({},"".concat(t,"Selected"),[].concat(Object(Ou.a)(e["".concat(t,"Selected")]),Object(Ou.a)(s)))}))},e.handleSubmit=function(){var a=e.state,t=a.salesManagerSelected,n=a.salesAssistantSelected,l=a.salesPersonSelected;if(t.length>0||n.length>0||l.length>0){e.setState({buttonLoading:!0});var c,i={sales_manager:e.state.salesManagerSelected.map((function(e){return e.id})),sales_assistant:e.state.salesAssistantSelected.map((function(e){return e.id})),sales_person:e.state.salesPersonSelected.map((function(e){return e.id}))};if(e.props.match.params.id)zM(e.props.match.params.id,i).then((function(a){Mm.b.success("Team Updated Successfully!"),e.props.setProject(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}));else zM(null===(c=e.props.project)||void 0===c?void 0:c.id,i).then((function(a){Mm.b.success("Team added Successfully!"),e.props.setProject(a.data,3),e.setState({buttonLoading:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({buttonLoading:!1})}))}},e.handleUpdatePoc=function(a){zM(e.props.project.id,{point_project:a}).then((function(a){e.props.setProject(a.data)})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n=this;this.props.match.params.id?$M(this.props.match.params.id).then((function(e){var a,t,l;n.setState({salesPersonSelected:(null===(a=e.data)||void 0===a?void 0:a.sales_person)||[],salesAssistantSelected:(null===(t=e.data)||void 0===t?void 0:t.sales_assistant)||[],salesManagerSelected:(null===(l=e.data)||void 0===l?void 0:l.sales_manager)||[]}),n.fetchUser("salesManager"),n.fetchUser("salesAssistant"),n.fetchUser("salesPerson")})).catch((function(e){td(e)})):(this.setState({salesPersonSelected:(null===(e=this.props.project)||void 0===e?void 0:e.sales_person)||[],salesAssistantSelected:(null===(a=this.props.project)||void 0===a?void 0:a.sales_assistant)||[],salesManagerSelected:(null===(t=this.props.project)||void 0===t?void 0:t.sales_manager)||[]}),this.fetchUser("salesManager"),this.fetchUser("salesAssistant"),this.fetchUser("salesPerson"))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row general-info"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can only choose one point of contact."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,requiredMark:!1,ref:this.formRef},iP,{className:"main-inner-form"}),l.a.createElement(vh.a.Group,{value:null===(e=this.props.project)||void 0===e?void 0:e.point_project},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_manager",label:"Sales Managers",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onChange:function(e){return o.handleSelect(e,"salesManager")},showSearch:!0,onFocus:function(){return o.fetchUser("salesManager")},onSearch:function(e){return o.fetchUser("salesManager",{search:e})},className:"custom-search-select"},this.state.salesManager.map((function(e){return l.a.createElement(cP,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Manager")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(a=this.state.salesManagerSelected)||void 0===a?void 0:a.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Managers")))),null===(t=this.state.salesManagerSelected)||void 0===t?void 0:t.map((function(e){return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat(o.props.project.point_project===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Manager")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesManager")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(Fm.a.Item,{name:"sales_person",label:"Salespeople",rules:[{required:!1,message:""}],className:"search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onChange:function(e){return o.handleSelect(e,"salesPerson")},onFocus:function(){return o.fetchUser("salesPerson")},onSearch:function(e){return o.fetchUser("salesPerson",{search:e})},className:"custom-search-select"},this.state.salesPerson.map((function(e){return l.a.createElement(cP,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Salesperson")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(n=this.state.salesPersonSelected)||void 0===n?void 0:n.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Salespeople")))),null===(c=this.state.salesPersonSelected)||void 0===c?void 0:c.map((function(e){return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat(o.props.project.point_project===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Salesperson")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesPerson")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"sales_assistant",label:"Sales Assistants",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",placeholder:"Search",notFoundContent:this.state.fetching?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onChange:function(e){return o.handleSelect(e,"salesAssistant")},onFocus:function(){return o.fetchUser("salesAssistant")},onSearch:function(e){return o.fetchUser("salesAssistant",{search:e})},className:"custom-search-select"},null===(i=this.state.salesAssistant)||void 0===i?void 0:i.map((function(e){return l.a.createElement(cP,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},Ed(e.first_name,e.last_name))),l.a.createElement("h6",{className:"mb-0"},"".concat(e.first_name," ").concat(e.last_name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Sales Assistant")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),0===(null===(r=this.state.salesAssistantSelected)||void 0===r?void 0:r.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.teams_labor_no_data_icon}),l.a.createElement("h6",{className:"mb-0"},"No Sales Assistants")))),null===(s=this.state.salesAssistantSelected)||void 0===s?void 0:s.map((function(e){return l.a.createElement("div",{key:e.id,className:"col-6"},l.a.createElement("div",{className:"row mx-0 mb-3 pb-0 opportunity-info-div-main align-items-center user-info-div-main position-relative ".concat(o.props.project.point_project===e.id&&"active")},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(e.first_name,e.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name)),l.a.createElement("p",{className:"mb-0"},"Sales Assistant")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:function(){return o.menu(e,"salesAssistant")},placement:"bottomCenter",trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{className:"active",onChange:function(){return o.handleUpdatePoc(e.id)},value:e.id},"Point of Contact"))))})))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))),l.a.createElement(iv,{visible:this.state.visible,onClose:function(){return o.showWarningModal(!1)},heading:"Are you sure you want to remove this Team Member?",subHeadingUOM:"If you choose to remove this Team Member, this might cause issues.",common:!0,commonFunc:function(){o.removeUsers(),o.showWarningModal(!1)}}))}}]),t}(n.Component),mP=Object(r.withRouter)(oP),dP={labelCol:{span:24},wrapperCol:{span:24}},uP=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,project:{},contactAccount:null,showContactModel:!1,contactModalItem:null,contacts:[],removeVisible:!1,contactDrwrVisible:!1,deletableAccountId:null,createAccountType:null},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({customer_accounts:null}),tF({project:e.props.project.id,account:a.value,contact_id:[]}).then((function(){e.props.fetchProject(e.props.project.id)}))},e.handleDeleteContactAccount=function(){lF(e.state.deletableAccountId).then((function(){e.props.fetchProject(e.props.project.id)}))},e.handleContactSelect=function(a){var t=e.state.contactModalItem,n=e.props.project.project_customer_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.contact.id})),i={contact_id:[].concat(Object(Ou.a)(c),[a]),contact:[]};nF(t.id,i).then((function(){e.props.fetchProject(e.props.project.id)}))},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.showRemoveContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrwrVisible:a,selectedItem:t,deletableContactId:n})},e.handleDeleteContact=function(){var a=e.props.project.project_customer_contact,t=a.findIndex((function(a){return a.id===e.state.selectedItem.id})),n={contact:[],contact_id:a[t].contact.filter((function(a){return a.id!==e.state.deletableContactId})).map((function(e){return e.contact.id}))};nF(e.state.selectedItem.id,n).then((function(a){e.props.fetchProject(e.props.project.id)}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.onAccountsSearch=function(a){e.getAllAccounts({search:a})},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Du(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllContacts=function(a){var t,n=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({},a),{},{account:null===n||void 0===n||null===(t=n.account)||void 0===t?void 0:t.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.handleSubmit=function(){Mm.b.success("Billing Account Updated Successfully!"),e.props.setProject(e.props.project,4)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.handleDefaultRecipient=function(e,a){dF(e,{default_contact_id:a}).then().catch((function(e){td(e)}))},e.callbackCustomerAccount=function(a){tF({project:e.props.project.id,account:a.id,contact_id:[]}).then((function(){e.props.fetchProject(e.props.project.id)}))},e.showCustomerAccount=function(){e.setState({customerModalVisible:!1})},e.showContactAccount=function(){e.setState({customerContactVisible:!1})},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.project.project_customer_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.contact.id})),i={contact_id:[].concat(Object(Ou.a)(c),[a.id]),contact:[]};nF(t.id,i).then((function(a){e.props.fetchProject(e.props.project.id),a.data.contact.map((function(e){var t;xh({account:null===(t=a.data)||void 0===t?void 0:t.account.id},e.contact.id).then((function(){})).catch((function(e){td(e)}))}))}))},e.showAccountTypeModal=function(a){e.setState({visibleAcTypeModal:a})},e.setAccountTypeOrVisible=function(a,t){e.setState({createAccountType:a,customerModalVisible:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllAccounts()}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.loading,c=t.accounts,i=(this.props.defaultRecepientId,(null===(e=this.props.project)||void 0===e?void 0:e.project_customer_contact)||[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can choose one billing account per project."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},dP,{className:"main-inner-form"}),l.a.createElement("div",{className:"row",style:{padding:"0px 25px"}},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"customer_accounts",label:"Billing Account *",rules:[{required:0==i.length,message:"Please select at least one billing account."}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,removeIcon:"",className:"search-and-select-tag",showSearch:!0,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:this.debounceEvent(this.onAccountsSearch,1e3),notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,disabled:i.length>=1,onFocus:function(){return a.getAllAccounts()}},c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Billing Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{right:"5px"},disabled:i.length>=1,className:"create-btn-main position-absolute text-capitalize",onClick:function(){return a.showAccountTypeModal(!0)}},"+ Create")),i.map((function(e,t){var n,c,i,r;return l.a.createElement("div",{className:"col-12 col-sm-12",key:t},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===e||void 0===e||null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},"Billing Account")))),(null===(c=a.props.location.pathname)||void 0===c?void 0:c.includes("create"))&&l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleContactModel(e,!0)}},"+ Add Contact *")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(vh.a.Group,{className:"w-100",defaultValue:null===(i=e.contact.find((function(e){return!0===e.default_customer_recipient})))||void 0===i||null===(r=i.contact)||void 0===r?void 0:r.id},l.a.createElement("div",{className:"row w-100"},e.contact.map((function(t,n){var c,i,r;return l.a.createElement("div",{className:"col-6 col-sm-6",key:n},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},t.contact.first_name," ",t.contact.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500"}},t.contact.role)),l.a.createElement("p",{className:"mb-0"},t.contact.default_email&&"".concat(null===(c=t.contact.default_email)||void 0===c?void 0:c.email,","),"\xa0",null===(i=t.contact.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveContact(!0,e,null===t||void 0===t?void 0:t.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===t||void 0===t||null===(r=t.contact)||void 0===r?void 0:r.id,onChange:function(){var n;return a.handleDefaultRecipient(e.id,null===t||void 0===t||null===(n=t.contact)||void 0===n?void 0:n.id)}},"Proposal Recipient"," ",l.a.createElement("small",{style:{color:"#b4b4b4",fontSize:"8px"}},"This contact will be addressed in the proposal.")))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))))))})),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Billing Accounts"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add contact",onOk:function(){return a.handleContactModel(null,!1)},onCancel:function(){return a.handleContactModel(null,!1)},destroyOnClose:!0,closable:!0,footer:!1,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},dP,{ref:this.contactRef}),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,placeholder:"Search",filterOption:!1,removeIcon:"",onChange:this.handleContactSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onFocus:function(){return a.getAllContacts()},onSearch:lu((function(e){return a.getAllContacts({search:e})}),300)},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({customerContactVisible:!0},(function(){return a.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(iv,{common:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account? ",subHeadingUOM:"If you choose to remove this Billing Account, this might cause issues.",visible:this.state.removeVisible,commonFunc:function(){a.setState({deletableAccountId:null,removeVisible:!1}),a.handleDeleteContactAccount()},onClose:function(){a.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedItem:null,deletableContactId:null,contactDrwrVisible:!1}),a.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrwrVisible,onClose:function(){return a.showRemoveContact(!1)}}),l.a.createElement(Up,{PARTIAL_BILLING:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.visibleAcTypeModal,onClose:function(){return a.showAccountTypeModal(!1)}}),l.a.createElement(kp,{createAccountType:this.state.createAccountType,callbackCustomerAccount:this.callbackCustomerAccount,visible:this.state.customerModalVisible,onClose:function(){return a.showCustomerAccount(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.customerContactVisible,onClose:function(){return a.showContactAccount(!1)}}))}}]),t}(n.Component),pP=Object(r.withRouter)(uP),vP={labelCol:{span:24},wrapperCol:{span:24}},hP=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.siteRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,project:{},contactAccount:null,showContactModel:!1,contactModalItem:null,showSiteModel:!1,siteModalItem:null,contacts:[],sites:[],removeVisible:!1,deletableAccountId:null,contactDrawerVisible:!1,siteDrawerVisible:!1,createAccountType:null},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.handleDefaultSelectAccount=function(a){var t=e.state.selectedContactAccounts;return a.map((function(e){var a=t.find((function(a){return a.account.id===e.id}));return a&&(e.contacts=a.contact,e.sites=a.site),e}))},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({owner_accounts:null}),cF({project:e.props.project.id,account:a.value}).then((function(){e.props.fetchProject(e.props.project.id)}))},e.handleOnDeselect=function(a){var t=e.props.project.project_owner_contact.find((function(e){return e.account.id===a.value}));e.handleDeleteOwnerAccount(t.id)},e.handleDeleteOwnerAccount=function(){rF(e.state.deletableAccountId).then((function(){e.props.fetchProject(e.props.project.id)}))},e.handleContactSelect=function(a){e.contactRef.current.setFieldsValue({contact:null});var t=e.state.contactModalItem,n=e.props.project.project_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a])};iF(t.id,i).then((function(a){e.props.fetchProject(e.props.project.id)}))},e.handleContactDeselect=function(a){e.handleDeleteContact(e.state.contactModalItem,a)},e.handleDeleteContact=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedItem,n=e.state.deletableContactId,l=e.props.project.project_owner_contact,c=l.findIndex((function(e){return e.id===t.id})),i={contact:l[c].contact.filter((function(e){return e.id!==n})).map((function(e){return e.id}))};iF(t.id,i).then((function(){e.props.fetchProject(e.props.project.id)}))},e.handleSiteSelect=function(a){e.siteRef.current.setFieldsValue({site:null});var t=e.state.siteModalItem,n=e.props.project.project_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l],i=c.site.map((function(e){return e.site.id})),r={site_id:[].concat(Object(Ou.a)(i),[a]),site:[]};iF(t.id,r).then((function(){0===c.site.length&&e.handlePrimarySite(c.id,a),e.props.fetchProject(e.props.project.id)}))},e.handleSiteDeselect=function(a){e.handleDeleteSite(e.state.siteModalItem,a)},e.handleDeleteSite=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedSite,n=e.state.deletableSiteId,l=e.props.project.project_owner_contact,c=l.findIndex((function(e){return e.id===t.id})),i=l[c],r={site_id:null===i||void 0===i?void 0:i.site.filter((function(e){return e.site.id!==n})).map((function(e){return e.site.id}))};iF(t.id,r).then((function(){e.props.fetchProject(e.props.project.id)}))},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),mp(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllSites=function(a){var t=e.state.siteModalItem;e.setState({loading:!0}),hp(Object(wu.a)(Object(wu.a)({},a),{},{account:t.account.id})).then((function(a){e.setState({sites:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllContacts=function(){var a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({},t),{},{account:null===n||void 0===n||null===(a=n.account)||void 0===a?void 0:a.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.handleSubmit=function(){Mm.b.success("Site Manager Updated Successfully!"),e.props.setProject(e.props.project,5)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.handleSiteModel=function(a,t){a?e.setState({siteModalItem:a,showSiteModel:t}):e.setState({showSiteModel:t})},e.handlePrimarySite=function(e,a){uF(e,{primary_site_id:a}).catch((function(e){td(e)}))},e.removeContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrawerVisible:a,selectedItem:t,deletableContactId:n})},e.handleRemoveSite=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({siteDrawerVisible:a,selectedSite:t,deletableSiteId:n})},e.showOwnerAccount=function(){e.setState({ownerModalVisible:!1})},e.showContactAccount=function(){e.setState({ownerContactVisible:!1})},e.showSites=function(){e.setState({onwerSiteVisible:!1})},e.callbackOwnerAccount=function(a){cF({project:e.props.project.id,account:a.id}).then((function(){e.props.fetchProject(e.props.project.id)}))},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.project.project_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a.id])};iF(t.id,i).then((function(a){e.props.fetchProject(e.props.project.id),a.data.contact.map((function(e){var t;xh({account:null===(t=a.data)||void 0===t?void 0:t.account.id},e.id).then((function(){})).catch((function(e){td(e)}))}))}))},e.callbackSite=function(a){var t=e.state.siteModalItem,n=e.props.project.project_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].site.map((function(e){return e.site.id})),i={site_id:[].concat(Object(Ou.a)(c),[a.id]),site:[]};iF(t.id,i).then((function(){e.props.fetchProject(e.props.project.id)}))},e.showAccountTypeModal=function(a){e.setState({visibleAcTypeModal:a})},e.setAccountTypeOrVisible=function(a,t){e.setState({createAccountType:a,ownerModalVisible:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.getAllAccounts(),this.props.fetchProject())}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.loading,c=t.accounts,i=(t.selectedAccount,(null===(e=this.props.project)||void 0===e?void 0:e.project_owner_contact)||[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can choose one site manager account per project."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},vP,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{dropdownClassName:"option-design-fix",name:"owner_accounts",label:"Site Manager Account *",rules:[{required:(null===i||void 0===i?void 0:i.length)<1,message:"Please select at least one site manager account."}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,className:"search-and-select-tag",showSearch:!0,disabled:(null===i||void 0===i?void 0:i.length)>=1,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:function(e){return a.getAllAccounts({search:e})},removeIcon:"",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,onFocus:function(){return a.getAllAccounts()}},c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site Manager Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:25}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{disabled:(null===i||void 0===i?void 0:i.length)>=1,className:"create-btn-main position-absolute text-capitalize",onClick:function(){return a.showAccountTypeModal(!0)}},"+ Create")),null===i||void 0===i?void 0:i.map((function(e,t){var n,c,i;return l.a.createElement("div",{className:"col-12 col-sm-12",key:t},l.a.createElement("div",{className:"row mx-0 opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},Lp[null===(c=e.account)||void 0===c?void 0:c.account_type]," ","Account")))),l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleContactModel(e,!0)}},"+ Add Contact")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},e.contact.map((function(t,n){var c,i;return l.a.createElement("div",{className:"col-6 col-sm-6",key:n},l.a.createElement("div",{style:{minHeight:"100px"},className:"row mx-0 mb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},t.first_name," ",t.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},t.role)),l.a.createElement("p",{className:"mb-0"},t.default_email&&"".concat(null===(c=t.default_email)||void 0===c?void 0:c.email,","),"\xa0"," ",null===(i=t.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.removeContact(!0,e,t.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"}))))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts")))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleSiteModel(e,!0)}},"+ Add Site")),e.site&&0!==e.site.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(vh.a.Group,{defaultValue:null===(i=e.site.find((function(e){return!0===e.primary})))||void 0===i?void 0:i.id},e.site.map((function(t,n){return l.a.createElement("div",{className:"col-12",key:n},l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("h6",{style:{fontSize:"15px",color:"#4f4f4f",fontWeight:"500"},className:"text-capitalize mb-0"},t.site.name)))),l.a.createElement("div",{className:"col-12 col-sm-9 px-3 pt-2 pb-4"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},t.site.street_address||""," ",t.site.apartment||""," ",t.site.city||"",","," ",t.site.state||""," ",t.site.zip_code||""," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},t.site.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},t.site.phone)),l.a.createElement("div",{className:"col-12 col-sm-1 position-relative"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.handleRemoveSite(!0,e,t.site.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{style:{width:"20px"},className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===t||void 0===t?void 0:t.id,onChange:function(){return a.handlePrimarySite(e.id,null===t||void 0===t?void 0:t.site.id)}},"Primary Site"))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))})),0===(null===i||void 0===i?void 0:i.length)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Site Manager Account"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",closable:!0,footer:!1,title:"Add contact",onOk:function(){return a.handleContactModel(null,!1)},onCancel:function(){return a.handleContactModel(null,!1)},destroyOnClose:!0,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},vP,{ref:this.contactRef}),l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleContactSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onSearch:lu((function(e){return a.getAllContacts({search:e})}),300),onFocus:function(){return a.getAllContacts()}},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({ownerContactVisible:!0},(function(){return a.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add Sites",closable:!0,footer:!1,onOk:function(){return a.handleSiteModel(null,!1)},onCancel:function(){return a.handleSiteModel(null,!1)},destroyOnClose:!0,visible:this.state.showSiteModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},vP,{ref:this.siteRef}),l.a.createElement(Fm.a.Item,{name:"site",label:"Site *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{className:"search-and-select-tag dropdown-fixed",dropdownClassName:"option-design-fix",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleSiteSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Site",onFocus:function(){return a.getAllSites()},onSearch:lu((function(e){return a.getAllSites({search:e})}),300)},this.state.sites.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name,l.a.createElement("br",null),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e?"".concat(null===e||void 0===e?void 0:e.street_address," ").concat(null===e||void 0===e?void 0:e.city,", ").concat(null===e||void 0===e?void 0:e.state," ").concat(null===e||void 0===e?void 0:e.zip_code):" ")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({onwerSiteVisible:!0},(function(){return a.handleSiteModel(!1)}))}},"+ Create"))))),l.a.createElement(iv,{commonInternalLocationPopup:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account?",subHeadingUOM:"If you choose to remove this Site Manager Account, this might cause issues.",visible:this.state.removeVisible,showWarningModal2:function(){a.setState({deletableAccountId:null,removeVisible:!1}),a.handleDeleteOwnerAccount()},onClose:function(){return a.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedItem:null,deletableContactId:null,contactDrawerVisible:!1}),a.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrawerVisible,onClose:function(){return a.removeContact(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedSite:null,deletableSiteId:null,siteDrawerVisible:!1}),a.handleDeleteSite()},heading:"Are you sure you want to remove this site?",subHeadingUOM:" ",visible:this.state.siteDrawerVisible,onClose:function(){return a.handleRemoveSite(!1)}}),l.a.createElement(Up,{PARTIAL_MANAGER:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.visibleAcTypeModal,onClose:function(){return a.showAccountTypeModal(!1)}}),l.a.createElement(Vp,{createAccountType:this.state.createAccountType,callbackOwnerAccount:this.callbackOwnerAccount,visible:this.state.ownerModalVisible,onClose:function(){return a.showOwnerAccount(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.ownerContactVisible,onClose:function(){return a.showContactAccount(!1)}}),l.a.createElement(lf,{callbackSite:this.callbackSite,visible:this.state.onwerSiteVisible,selectedAccounts:i,onClose:function(){return a.showSites(!1)}}))}}]),t}(n.Component),fP=Object(r.withRouter)(hP),EP=ku.a.Option,gP=ku.a.OptGroup,bP=fu.a.Panel,NP=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={rows:[],groups:[],loading:!0,qty:1,warningVisible:!1,pricingUom:[]},e.handleChangeTime=function(a,t){if("delete_row"===a){var n=Object(Ou.a)(e.state.rows).filter((function(e){return e.id!==t.id}));e.setState({rows:n})}else{var l=Object(Ou.a)(e.state.rows).map((function(e){return e.id===t.id&&"labor_child"===t.item_type?Object(wu.a)(Object(wu.a)({},e),{},{time:a}):Object(wu.a)({},e)}));e.setState({rows:l})}},e.handleHoursChange=function(a,t){var n=Object(Ou.a)(e.state.rows).map((function(e){return e.id===t.id?Object(wu.a)(Object(wu.a)({},e),{},{hours:a||1}):e.kit_child&&e.kit_id=="kit".concat(t.id+t.kitIndex)?Object(wu.a)(Object(wu.a)({},e),{},{quantity:a*e.initQuantity}):Object(wu.a)({},e)}));e.setState({rows:n})},e.handleChange=function(a,t){var n=Object(Ou.a)(e.state.rows).map((function(n){if(n.id===t.id&&"labor_child"===t.item_type){var l=e.state.groups.find((function(e){return e.id===a}));return Object(wu.a)(Object(wu.a)({},n),{},{type_id:a,data:l})}return Object(wu.a)({},n)}));e.setState({rows:n})},e.handlePricingUom=function(){var a=[],t=e.props.newPricing.variant_data;if((null===t||void 0===t?void 0:t.daily_price)||(null===t||void 0===t?void 0:t.hourly_price)||(null===t||void 0===t?void 0:t.pricing_uom)){if(null===t||void 0===t?void 0:t.daily_price){a.push({label:"Day (d)",value:"DAY"})}if(null===t||void 0===t?void 0:t.hourly_price){a.push({label:"Hours (hrs)",value:"HOURS"})}if((null===t||void 0===t?void 0:t.pricing_uom)&&(null===t||void 0===t?void 0:t.price)){var n,l,c={label:null===(n=t.pricing_uom)||void 0===n?void 0:n.name,value:"UOM",symbol:"(".concat(null===t||void 0===t||null===(l=t.pricing_uom)||void 0===l?void 0:l.symbol,")")};a.push(c)}}else{a.push({label:"Day (d)",value:"DAY"})}e.setState({pricingUom:a})},e.handleData=Object(Qm.a)($m.a.mark((function a(){var t,n,l,c,i,r,s;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=Object(Ou.a)(e.props.child),n=[],!e.props.view&&!e.props.priceChild){l=Object(qD.a)(t);try{for(i=function(){var e=c.value;if("INVENTORY_KIT"==e.item_type?(e.kitIndex=t.findIndex((function(a){return a.id===e.id})),n.push(e)):n.push(e),"LABOR"==e.item_type){var a={item_type:"add",id:"add",name:e.resource_name};n.push(a)}},l.s();!(c=l.n()).done;)i()}catch(o){l.e(o)}finally{l.f()}}r=n.length>0?n:t,s=r.map((function(a,t){switch(a.item_type){case Bd:return e.setState({loading:!0}),LE(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case Wd:return e.setState({loading:!0}),tk(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case"labor_child":return e.setState({loading:!0}),Hp(a.item_id).then((function(t){e.setState({loading:!1}),a.data=t.data})).catch((function(a){e.setState({loading:!1}),td(a),e.setState({loading:!1})})),a;case"INVENTORY_ITEM":return e.setState({loading:!0}),$C(a.item_id?a.item_id:a.id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;case"INVENTORY_KIT":return a;case"DISPOSAL":return Og(a.item_id).then((function(t){a.data=t.data,e.setState({loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})})),a;default:return a.data=null,e.setState({loading:!1}),a}})),e.setState({rows:s,loading:!1});case 6:case"end":return a.stop()}}),a)}))),e.handleAddMore=function(a,t){var n=e.state.rows,l={item_type:"labor_child",id:"child"+t,name:a.name};n.splice(t,0,l),e.setState({rows:n})},e.updateTable=function(){return e.state.rows.map((function(e){return delete e.data,delete e.pricing,Object(wu.a)({},e)})).drawer((function(e){return"add"!==e.type}))},e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0",onClick:function(){var a;return e.props.handleRemoveWarning(!0,null===(a=e.props.newPricing)||void 0===a?void 0:a.id)}},"Remove")),e.handleFleetKit=function(e,a,t){var n,c,i;return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(t?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},a&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:a&&{paddingLeft:"30px"}},(null===e||void 0===e?void 0:e.kit_child)?null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name:e.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},e.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"},(null===e||void 0===e?void 0:e.kit_child)?l.a.createElement("span",{className:"text-capitalize"},(null===e||void 0===e||null===(c=e.kit_uom)||void 0===c?void 0:c.name)||"-"):l.a.createElement("span",{className:"text-capitalize"},(null===e||void 0===e||null===(i=e.uom)||void 0===i?void 0:i.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,e.price_unit?"$".concat(e.price_unit):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,e.total_price?"$".concat(e.total_price):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,"-")))},e.renderRow=function(a,t,n){var c,i,r,s,o,m,d,u,p,v,h,f;switch(a.type){case Bd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 custom-table-proposal row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.FLEET_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start px-3"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case Wd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.SUPPLY_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start px-3"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case"INVENTORY_ITEM":return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(c=a.item)||void 0===c?void 0:c.name:a.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"},(null===a||void 0===a?void 0:a.kit_child)?l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(i=a.kit_uom)||void 0===i?void 0:i.name)||"-"):l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(r=a.uom)||void 0===r?void 0:r.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case"INVENTORY_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",null,"Unit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),(null===(s=a.children)||void 0===s?void 0:s.length)>0&&(null===(o=a.children)||void 0===o?void 0:o.map((function(t,n){var l,c=(null===(l=a.children)||void 0===l?void 0:l.length)>n+1;return e.renderRow(t,!0,c)}))),null===(m=a.data)||void 0===m||null===(d=m.inventory_package_items)||void 0===d?void 0:d.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Amount")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",e.item.unit_cost*e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,e.item.margin||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(e.item.unit_cost*e.quantity,e.item.margin)||0)))})));case"FLEET_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,qd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",null,(null===a||void 0===a?void 0:a.uom)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},a.price_unit?"$".concat(a.price_unit):"-"),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,a.total_price?"$".concat(a.total_price):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),(null===(u=a.children)||void 0===u?void 0:u.length)>0&&(null===a||void 0===a?void 0:a.children.map((function(t,n){var l,c=(null===(l=a.children)||void 0===l?void 0:l.length)>n+1;return e.handleFleetKit(t,!0,c)}))));case"DISPOSAL":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Disposal")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"VENDOR"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(p=a.facility_id)||void 0===p||null===(v=p.vendor)||void 0===v?void 0:v.name:"WAREHOUSE"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(h=a.facility_id)||void 0===h?void 0:h.internal_location.name:"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select"},l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(f=a.uom)||void 0===f?void 0:f.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 d-flex justify-content-start"},l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a?void 0:a.doc_type)?"BILL_OF_LADING"===(null===a||void 0===a?void 0:a.doc_type)?"Bill of Lading":"NEITHER"===(null===a||void 0===a?void 0:a.doc_type)?"Neither":"Manifest":"-"))));case Ld:return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 gray-2-color"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start"},l.a.createElement("div",{className:"px-3"},"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"})),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))));default:return l.a.createElement(l.a.Fragment,null)}},e.stopEvtBubbling=function(e){e.stopPropagation()},e.handlePriceChange=function(){var a=e.props.newPricing;e.props.handlePriceUnit(!0,a.id)},e.handleInputsBlur=function(a,t){var n=e.props.newPricing,l=a.target.value;""===l||n.edited?""!==l&&e.formatVal(l,!0):("Enter"==a.key||t)&&e.handleValuechanged(a,n)},e.handleEnterChange=function(a){var t=e.props.newPricing,n=a.target.value;""===n||(null===t||void 0===t?void 0:t.edited)||"Enter"!==a.key?""!==n&&"Enter"===a.key&&e.formatVal(n,!0):e.handleValuechanged(a,t)},e.handleValuechanged=function(a,t){var n=a.target.value,l=null===n||void 0===n?void 0:n.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2});e.state.priceUnit!=n&&e.props.handleServiceModal(!0,l,null===t||void 0===t?void 0:t.id)},e.handleChangeDocument=function(a){var t;hF({document_type:a.value},null===(t=e.props.newPricing)||void 0===t?void 0:t.id).then((function(a){e.props.getSelectedServiceVariants()})).catch((function(e){td(e)}))},e.handleFacility=function(a){var t,n,l;hF({facility:null===a||void 0===a||null===(t=a.value)||void 0===t?void 0:t.split("_")[0],facility_type:null===a||void 0===a||null===(n=a.value)||void 0===n?void 0:n.split("_")[1],disposal_unit_id:null,disposal_unit_type:null},null===(l=e.props.newPricing)||void 0===l?void 0:l.id).then((function(a){e.props.getSelectedServiceVariants()})).catch((function(e){td(e)}))},e.formatVal=function(a,t){var n=e.props.newPricing,l=Number(null===n||void 0===n?void 0:n.price_per_unit).toFixed(2),c=(null===a||void 0===a?void 0:a.toString())||"0",i=null===c||void 0===c?void 0:c.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),r=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});e.setState({priceUnit:r.format(i)},(function(){if(t){var a,c=null===(a=e.state.priceUnit)||void 0===a?void 0:a.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2});if(!(null===n||void 0===n?void 0:n.edited)&&c!=l)return void e.props.handlePricePerUnitChange(c,null===n||void 0===n?void 0:n.id);(null===n||void 0===n?void 0:n.edited)&&c!=l&&e.props.handlePricePerUnitChange(c,null===n||void 0===n?void 0:n.id)}}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.newPricing;this.formatVal(e.price_per_unit),this.handleData(),this.setState({qty:this.props.newPricing.project_qty||1}),this.handlePricingUom()}},{key:"componentDidUpdate",value:function(e,a,t){var n=this.props.newPricing;e.newPricing.price_per_unit!==n.price_per_unit&&this.formatVal(n.price_per_unit),e.margin!==this.props.margin&&this.handleData()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N=this,y=this.props,w=y.newPricing,_=(y.viewProposalTable,y.view),S=y.allOptions,x=y.foundRegion,C=y.removeThreeDots,O=null===S||void 0===S?void 0:S.find((function(e){var a,t;return e.id===(null===w||void 0===w||null===(a=w.variant_data)||void 0===a||null===(t=a.pricing_uom)||void 0===t?void 0:t.id)}));return this.state.loading?l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body p-0"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"custom-table-collapse-main"},l.a.createElement(bP,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td wage-info-collapse-td gray-2-color d-flex align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",src:"INVENTORY_KIT"===(null===w||void 0===w?void 0:w.resource_type)?Rm.inventory_kit_variant:"INVENTORY_ITEM"===(null===w||void 0===w?void 0:w.resource_type)?Rm.inventory_item_variant:"DISPOSAL"===(null===w||void 0===w?void 0:w.resource_type)?Rm.no_disposal_black:"SUPPLY_GROUP"===(null===w||void 0===w?void 0:w.resource_type)?null===Rm||void 0===Rm?void 0:Rm.supply_icon_black:Rm.line_item_black,className:"img-fluid mr-2"}),"INVENTORY_KIT"===(null===w||void 0===w?void 0:w.resource_type)||"INVENTORY_ITEM"===(null===w||void 0===w?void 0:w.resource_type)||"DISPOSAL"===(null===w||void 0===w?void 0:w.resource_type)||"SUPPLY_GROUP"===(null===w||void 0===w?void 0:w.resource_type)?null===w||void 0===w||null===(e=w.resource_id)||void 0===e?void 0:e.name:(null===w||void 0===w||null===(a=w.variant_data)||void 0===a?void 0:a.display_name)?null===w||void 0===w||null===(t=w.variant_data)||void 0===t?void 0:t.display_name:"".concat(null===w||void 0===w||null===(n=w.variant_data)||void 0===n||null===(c=n.line_item)||void 0===c?void 0:c.name," ").concat(x&&"/"," ").concat((null===x||void 0===x?void 0:x.title)||""," - ").concat(null===(i=w.variant_data)||void 0===i?void 0:i.name)),!C&&l.a.createElement(xu.a,{overlay:this.menu,trigger:["click"]},l.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{alt:"remove-icon",src:Rm.black_dots_elipsis,className:"img-fluid"})))),!_&&("DISPOSAL"===(null===w||void 0===w?void 0:w.resource_type)?l.a.createElement("div",{className:"custom-table-cell-td facility-column background-white-div px-0 blank-red"},l.a.createElement(ku.a,{className:"facility-dropdown",dropdownStyle:{width:"100px"},labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:"",className:"img-fluid"}),onChange:function(e){return N.handleFacility(e)},value:(null===w||void 0===w?void 0:w.facility)?{value:null===w||void 0===w?void 0:w.facility,label:null===w||void 0===w?void 0:w.facility}:void 0,placeholder:"Select"},l.a.createElement(gP,{label:"Warehouses"},null===w||void 0===w||null===(r=w.resource_id)||void 0===r||null===(s=r.internal_location)||void 0===s?void 0:s.map((function(e){return l.a.createElement(EP,{value:"".concat(e.id,"_WAREHOUSE")},e.internal_location.name)}))),l.a.createElement(gP,{label:"Vendors"},null===w||void 0===w||null===(o=w.resource_id)||void 0===o||null===(m=o.vendor)||void 0===m?void 0:m.map((function(e){return l.a.createElement(EP,{value:"".concat(e.id,"_VENDOR")},e.vendor.name)}))))):l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"}," ","-")),l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0",onClick:this.stopEvtBubbling},_?l.a.createElement("span",null,parseInt(null===w||void 0===w?void 0:w.project_qty)||"1"):l.a.createElement(ap.a,{value:(null===w||void 0===w?void 0:w.project_qty)||1,onBlur:function(e){N.props.handleQuantitySelectChange(e.target.value,null===w||void 0===w?void 0:w.id)}})),l.a.createElement("div",{className:"custom-table-cell-td p-0 gray-2-color d-flex justify-content-center",onClick:this.stopEvtBubbling},(null===w||void 0===w?void 0:w.manually_added)?"INVENTORY_ITEM"===(null===w||void 0===w?void 0:w.type)?l.a.createElement("span",null,null===(d=w.uom)||void 0===d?void 0:d.name," (",null===(u=w.uom)||void 0===u?void 0:u.symbol,")"):l.a.createElement("span",null,null===(p=w.unit)||void 0===p?void 0:p.name," (",null===(v=w.unit)||void 0===v?void 0:v.symbol,")"):_?l.a.createElement("span",null,"UOM"==w.selected_unit?"".concat(null===O||void 0===O?void 0:O.name," (").concat(null===O||void 0===O?void 0:O.symbol,")"):"HOURS"==w.selected_unit?"Hours (hrs)":"Day (d)"):l.a.createElement(l.a.Fragment,null,"DISPOSAL"==w.resource_type?((null===w||void 0===w?void 0:w.disposal_uom)||(null===w||void 0===w?void 0:w.disposal_com))&&l.a.createElement(ku.a,{dropdownClassName:"border-green",className:"edit-select-box bg-white edit-box-custom w-100",suffixIcon:l.a.createElement(wO.a,null),onChange:function(e){return N.props.handleUnitSelectChange(e,null===w||void 0===w?void 0:w.id,null===w||void 0===w?void 0:w.resource_type)},placeholder:"select",value:(null===w||void 0===w?void 0:w.disposal_unit_id)||void 0},l.a.createElement(gP,{label:"UOM"},null===w||void 0===w||null===(h=w.disposal_uom)||void 0===h?void 0:h.map((function(e){return l.a.createElement(EP,{value:"".concat(e.id,"_UOM")},null===e||void 0===e?void 0:e.name)}))),l.a.createElement(gP,{label:"COM"},null===w||void 0===w||null===(f=w.disposal_com)||void 0===f?void 0:f.map((function(e){return l.a.createElement(EP,{value:"".concat(e.id,"_COM")},null===e||void 0===e?void 0:e.name)})))):(null===(E=this.state.pricingUom)||void 0===E?void 0:E.length)<=1?null===(g=this.state.pricingUom)||void 0===g?void 0:g.map((function(e){return l.a.createElement("span",{value:e.value},e.label,null===e||void 0===e?void 0:e.symbol)})):l.a.createElement(ku.a,{dropdownClassName:"border-green",className:"edit-select-box bg-white edit-box-custom w-100",suffixIcon:l.a.createElement(wO.a,null),onChange:function(e){return N.props.handleUnitSelectChange(e,null===w||void 0===w?void 0:w.id)},placeholder:"select",value:w.selected_unit||void 0},null===(b=this.state.pricingUom)||void 0===b?void 0:b.map((function(e){return l.a.createElement(EP,{value:e.value},e.label,null===e||void 0===e?void 0:e.symbol)}))))),l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0 ".concat(this.props.view?"background-f2":""),onClick:function(e){N.stopEvtBubbling(e)}},l.a.createElement("span",{className:"d-inline-block w-100"},l.a.createElement(ap.a,{disabled:_,value:this.state.priceUnit||0,onBlur:function(e){return N.handleInputsBlur(e,!0)},onKeyDown:this.handleEnterChange}))),l.a.createElement("div",{className:this.props.view?"custom-table-cell-td background-white-div p-0 text-center d-flex justify-content-center":"custom-table-cell-td background-white-div p-0 checkbox-new text-center d-flex justify-content-center",onClick:this.stopEvtBubbling},l.a.createElement(UD.a,{defaultChecked:!1,checked:null===w||void 0===w?void 0:w.taxable,disabled:_,onChange:function(e){return N.props.handleCheckBox(e.target.checked,null===w||void 0===w?void 0:w.id,"TAX")}})),l.a.createElement("div",{className:this.props.view?"custom-table-cell-td background-white-div p-0 text-center d-flex justify-content-center":"custom-table-cell-td background-white-div p-0 checkbox-new text-center d-flex justify-content-center",onClick:this.stopEvtBubbling},l.a.createElement(UD.a,{checked:null===w||void 0===w?void 0:w.include_subtotal,defaultChecked:!0,disabled:_,onChange:function(e){return N.props.handleCheckBox(e.target.checked,null===w||void 0===w?void 0:w.id,"INCLUDE_SUBTOTAL")}})),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3",onClick:this.stopEvtBubbling},l.a.createElement("div",{className:"d-inline-block w-100"},"$ ",gd(null===w||void 0===w?void 0:w.total_price))),"DISPOSAL"===(null===w||void 0===w?void 0:w.resource_type)?l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center blank-red",onClick:this.stopEvtBubbling},l.a.createElement(ku.a,{labelInValue:!0,className:"img-fluid editable-form-image",suffixIcon:l.a.createElement("img",{src:Rm.caret_down_small_select,alt:""}),disabled:_,onChange:function(e){return N.handleChangeDocument(e)},value:w.document_type?{value:w.document_type,label:"".concat("BILL_OF_LADING"===w.document_type?"Bill of Lading":"NEITHER"===w.document_type?"Neither":"Manifest")}:null,placeholder:"Select"},l.a.createElement(EP,{value:"MANIFEST"},"Manifest"),l.a.createElement(EP,{value:"BILL_OF_LADING"},"Bill of Lading"),l.a.createElement(EP,{value:"NEITHER"},"Neither")))):l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"},"-"))),key:"1"},this.state.rows.map((function(e,a){var t={};if(e.kit){var n,l=N.state.rows.length>a+1;return t={id:e.id,item:e.item,qty:e.quantity,kit_uom:null===(n=e.kit)||void 0===n?void 0:n.unit,type:"INVENTORY_ITEM",kit_child:!0},N.renderRow(t,!0,l)}return N.renderRow(e)}))))))}}]),t}(n.Component),yP=ku.a.Option,wP={labelCol:{span:24},wrapperCol:{span:24}},_P=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={showResourceModel:!1,lineItems:[],otherItems:[],fetching:!1,disposal:[],value:1,pricing:[],data:[],selectedType:null,searchValue:null,loading:!0,newPricing:[],kit_items:[],allOptions:[],costSetting:null,pricePreTax:0,selectedUom:null,id:null,units:1,taxBasisOptions:[],warningVisible:!1,removableId:null,modalVisible:!1,totalCount:0,autoOpen:!1,page:1,search:"",filterObj:null,filterApplied:!1,breadcrumb:[],depositExist:!1,parsedValue:null,supply:[],depositAmountKey:null},e.formRef=l.a.createRef(),e.fetchLineItems=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=t.page,l=t.search,c=t.filterObj;e.setState({fetching:!0}),yg(Object(wu.a)(Object(wu.a)(Object(wu.a)({},a),c),{},{page:n,search:l})).then((function(t){a.isSearched?e.setState({lineItems:t.data.results,fetching:!1,totalCount:t.data.count}):e.setState((function(e){return{lineItems:[].concat(Object(Ou.a)(e.lineItems),Object(Ou.a)(t.data.results)),fetching:!1,totalCount:t.data.count}}))})).catch((function(a){e.setState({fetching:!1}),td(a)}))},e.fetchPricing=function(a){Eg({item:a}).then((function(a){e.setState({pricing:[].concat(Object(Ou.a)(e.state.pricing),Object(Ou.a)(a.data.results))})})).catch((function(e){td(e)}))},e.getTaxBasisOptions=function(){mE({search:e.state.searchValue,page:e.state.page}).then((function(a){1===e.state.page?e.setState({taxBasisOptions:a.data.results}):e.setState((function(e){return{taxBasisOptions:[].concat(Object(Ou.a)(e.taxBasisOptions),Object(Ou.a)(a.data.results)),totalCount:a.data.count}}))})).catch((function(e){td(e)}))},e.handleSelect=function(a){var t;if(null===(t=e.state.newPricing)||void 0===t?void 0:t.find((function(e){return e.id==a})))Mm.b.error("You can not add same item again");else{var n=e.props.project;pF({variant:a,project:null===n||void 0===n?void 0:n.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))}},e.getSelectedServiceVariants=function(a){var t=e.props,n=t.project,l=t.fetchProject;vF({project:(null===n||void 0===n?void 0:n.id)||e.props.match.params.id}).then(function(){var t=Object(Qm.a)($m.a.mark((function t(c){return $m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({newPricing:c.data},(function(){a&&l(null===n||void 0===n?void 0:n.id)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){td(e)}))},e.handleSubmit=function(a,t){var n,l=[],c=[],i=document.getElementById("qualifiers"),r=document.getElementById("comments");(i.childNodes.length>0&&i.childNodes.forEach((function(e){l.push(e.innerHTML)})),r.childNodes.length>0&&r.childNodes.forEach((function(e){c.push(e.innerHTML)})),t)||(a.qualifiers=null===l||void 0===l?void 0:l.join("^"),a.comments=null===c||void 0===c?void 0:c.join("^"),a.tax_basis=null===(n=a.tax_basis)||void 0===n?void 0:n.value,a.deposit_amount=e.state.parsedValue,a.project_uom=e.state.projectUom,a.total_units=e.state.units,a.estimated_total_price_pre_tax=e.state.pricePreTax||0);zM(e.props.project.id,a).then((function(a){e.props.setProject(a.data,6),t||Mm.b.success("Project Updated ")})).catch((function(e){td(e)}))},e.handleResourceModel=function(a,t){e.setState({resourceModelItem:a,showResourceModel:t})},e.handleChange=function(a){e.setState({projectUom:a})},e.handleUnitSelectChange=function(a,t,n){var l;(e.state.newPricing.find((function(e){return e.id===t})).edited||e.setState({unitModalVisible:!0}),n)?"DISPOSAL"===n&&(l={disposal_unit_id:null===a||void 0===a?void 0:a.split("_")[0],disposal_unit_type:null===a||void 0===a?void 0:a.split("_")[1]}):l={selected_unit:a};e.handleUpdateVariantRow(l,t)},e.handleQuantitySelectChange=function(a,t){var n={project_qty:a};e.handleUpdateVariantRow(n,t)},e.handleUpdateVariantRow=function(a,t){hF(a,t).then((function(){var a;e.getSelectedServiceVariants(),e.props.fetchProject(null===(a=e.props.project)||void 0===a?void 0:a.id)})).catch((function(e){td(e)}))},e.handleCheckBox=function(a,t,n){var l={};"TAX"===n?(e.setState({taxVisible:a,modalVisible:!0,taxCheckBox:!0}),l.taxable=a):(e.setState({subtotalVisible:a,modalVisible:!0,taxCheckBox:!1}),l.include_subtotal=a),e.handleUpdateVariantRow(l,t)},e.closeViewModal=function(){e.setState({modalVisible:!1})},e.handleCostSettingChange=function(a){e.setState({warningVisible:!0,costSettingSelected:a})},e.renderRow=function(a){var t,n,c,i,r,s,o,m,d,u,p,v,h,f;switch(a.type){case Fd.name:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Fd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(ap.a,{value:a.hours||0,disabled:!0,onChange:function(t){return e.handleHoursChange(t,a)},placeholder:0}),l.a.createElement(Vm.a,{className:"bg-transparent position-absolute border-0 shadow-none p-0 pencil-btn-edit"},l.a.createElement(Tx.a,null))))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",Ad(a.data))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(Ad(a.data),0))));case Pd.name:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Sub-tier")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"text-capitalize"},null===(t=a.data)||void 0===t||null===(n=t.unit)||void 0===n?void 0:n.toLowerCase())),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement("span",{className:"px-3 w-100 d-inline-block"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",(null===(c=a.data)||void 0===c?void 0:c.unit_cost)||0)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,(null===(i=a.data)||void 0===i?void 0:i.margin)||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(null===(r=a.data)||void 0===r?void 0:r.unit_cost,null===(s=a.data)||void 0===s?void 0:s.margin))));case Vd.name:return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Amount")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement("span",{className:"px-3 d-inline-block w-100"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,null===(o=a.data)||void 0===o||null===(m=o.inventory_package_items)||void 0===m?void 0:m.reduce((function(e,a){return e+a.item.unit_cost*a.quantity}),0))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,null===(d=a.data)||void 0===d||null===(u=d.inventory_package_items)||void 0===u?void 0:u.reduce((function(e,a){var t;return e+parseFloat((null===(t=a.item)||void 0===t?void 0:t.margin)||0)}),0).toFixed(2),"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",null===(p=a.data)||void 0===p||null===(v=p.inventory_package_items)||void 0===v?void 0:v.reduce((function(e,a){return e+parseFloat(Rd(a.item.unit_cost*a.quantity,a.item.margin))}),0).toFixed(2)))),null===(h=a.data)||void 0===h||null===(f=h.inventory_package_items)||void 0===f?void 0:f.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Amount")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data"},l.a.createElement("span",{className:"px-3 w-100 d-inline-block"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",e.item.unit_cost*e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,e.item.margin||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",Rd(e.item.unit_cost*e.quantity,e.item.margin))))})));default:return l.a.createElement(l.a.Fragment,null)}},e.fetchAllInventories=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.tier_type="INVENTORY_ITEM",iO(a).then((function(a){e.setState({inventoryItem:a.data.results.filter((function(e){return 0===e.children.length})).map((function(e){return delete e.children&&e})),loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchAllInventoryKits=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),QC(a).then((function(a){e.setState({kits:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchDisposal=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.tier_type="DISPOSAL",Cg(a).then((function(a){e.setState({disposal:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchSupplyGroup=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),a.tier_type="SUPPLY_GROUP",lk(a).then((function(a){e.setState({supply:a.data.results,loading:!1})})).catch((function(a){td(a),e.setState({loading:!1})}))},e.fetchKitItems=function(a){var t;Object(Ou.a)(e.state.newPricing).find((function(e){return e.id==a}))?Mm.b.error("you can not add same item again"):pF({resource_id:a,resource_type:"INVENTORY_KIT",project:null===(t=e.props.project)||void 0===t?void 0:t.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.fetchInventoryItem=function(a){var t;Object(Ou.a)(e.state.newPricing).find((function(e){return e.id==a}))?Mm.b.error("you can not add same item again"):pF({resource_id:a,resource_type:"INVENTORY_ITEM",project:null===(t=e.props.project)||void 0===t?void 0:t.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.fetchDisposalItem=function(a){var t;Object(Ou.a)(e.state.newPricing).find((function(e){return e.id==a}))?Mm.b.error("you can not add same item again"):pF({resource_id:a,resource_type:"DISPOSAL",project:null===(t=e.props.project)||void 0===t?void 0:t.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.fetchSupplyItem=function(a){var t;Object(Ou.a)(e.state.newPricing).find((function(e){return e.id==a}))?Mm.b.error("you can not add same item again"):pF({resource_id:a,resource_type:"SUPPLY_GROUP",project:null===(t=e.props.project)||void 0===t?void 0:t.id}).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.getUnitName=function(){e.setState({fetching:!0}),Rg().then((function(a){e.setState({allOptions:a.data})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handleTaxBasisChange=function(a){var t=a.value;e.handleSubmit({tax_basis:t},!0)},e.showWarning=function(a){e.setState({warningVisible:a})},e.handleServiceModal=function(a,t,n){e.setState({serviceModalVisible:a,value:t,priceId:n})},e.handleUnitModal=function(a){e.setState({unitModalVisible:!1})},e.handlePricePerUnitChange=Object(lp.debounce)((function(a,t){var n={price_per_unit:a,edited:!0};e.handleUpdateVariantRow(n,t)})),e.deleteServiceVariant=function(){fF(e.state.removableId).then((function(){e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.handleRemoveWarning=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeWarningVisible:a,removableId:t})},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.onSearchServiceVariant=function(a){e.setState({search:a,page:1},(function(){e.fetchLineItems({isSearched:!0})}))},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchLineItems()}))},e.handlePriceOnChange=function(){e.handlePricePerUnitChange(e.state.value,e.state.priceId)},e.handleFilterDrawer=function(a){e.setState({visibleFilter:a})},e.setFilterObj=function(a,t){var n=!0;n=!(!a||!(a.daily_high||a.daily_low||a.family||a.hourly_high||a.hourly_low||a.region||a.service||a.unit||a.tier||a.unit_high||a.unit_low||a.variant)),e.setState({filterObj:a,breadcrumb:t,page:1,autoOpen:!0,filterApplied:n},(function(){e.fetchLineItems({isSearched:!0})}))},e.handleDepositField=function(){var a;"YES"==(null===(a=e.formRef.current)||void 0===a?void 0:a.getFieldValue("deposit"))?e.setState({depositExist:!0}):e.setState({depositExist:!1})},e.handleDepositAmount=function(a){e.setState({depositAmountKey:a.target.value})},e.handleDepositInput=function(a){var t=(null===a||void 0===a?void 0:a.toString())||"0",n=null===t||void 0===t?void 0:t.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);e.formRef.current.setFieldsValue({deposit_amount:l}),e.setState({depositValue:l},(function(){var a=null===l||void 0===l?void 0:l.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2});e.setState({parsedValue:a})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Qm.a)($m.a.mark((function e(){var a,t,n,l,c,i,r,s,o;return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.project,e.next=3,this.formRef.current.setFieldsValue({qualifiers:(null===r||void 0===r?void 0:r.qualifiers)?null===r||void 0===r?void 0:r.qualifiers.split("^"):null,comments:(null===r||void 0===r?void 0:r.comments)?r.comments.split("^"):null,cost_setting:(null===r||void 0===r?void 0:r.cost_setting)||"STANDARD",payment_terms:(null===r||void 0===r?void 0:r.payment_terms)||"30_DAYS",deposit:(null===r||void 0===r?void 0:r.deposit)||null,tax_basis:(null===r||void 0===r?void 0:r.tax_basis)?{label:null===r||void 0===r||null===(a=r.tax_basis)||void 0===a?void 0:a.name,value:null===r||void 0===r||null===(t=r.tax_basis)||void 0===t?void 0:t.id,key:null===r||void 0===r||null===(n=r.tax_basis)||void 0===n?void 0:n.id}:void 0});case 3:this.setState({loading:!1,costSetting:null===r||void 0===r?void 0:r.cost_setting,units:null===r||void 0===r?void 0:r.total_units,projectUom:null===r||void 0===r||null===(l=r.project_uom)||void 0===l?void 0:l.id,pricePreTax:(null===r||void 0===r?void 0:r.estimated_total_price_pre_tax)?null===r||void 0===r?void 0:r.estimated_total_price_pre_tax:null===r||void 0===r?void 0:r.estimated_total_price_pre}),this.getSelectedServiceVariants(),this.getUnitName(),this.getTaxBasisOptions(),this.handleDepositField(),(null===(c=this.props)||void 0===c||null===(i=c.project)||void 0===i?void 0:i.deposit_amount)?this.formRef.current.setFieldsValue({deposit_amount:"$".concat(null===(s=this.props)||void 0===s||null===(o=s.project)||void 0===o?void 0:o.deposit_amount)}):this.formRef.current.setFieldsValue({deposit_amount:this.state.depositAmountKey||"$0.00"});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c,i,r,s,o=this.props.project;e.project!=o&&(this.formRef.current.setFieldsValue({qualifiers:(null===o||void 0===o?void 0:o.qualifiers)?null===o||void 0===o?void 0:o.qualifiers.split("^"):null,comments:(null===o||void 0===o?void 0:o.comments)?o.comments.split("^"):null,cost_setting:(null===o||void 0===o?void 0:o.cost_setting)||"STANDARD",deposit:(null===o||void 0===o?void 0:o.deposit)||null,deposit_amount:(null===o||void 0===o?void 0:o.deposit_amount)||null,tax_basis:(null===o||void 0===o?void 0:o.tax_basis)?{label:null===o||void 0===o||null===(t=o.tax_basis)||void 0===t?void 0:t.name,value:null===o||void 0===o||null===(n=o.tax_basis)||void 0===n?void 0:n.id,key:null===o||void 0===o||null===(l=o.tax_basis)||void 0===l?void 0:l.id}:void 0}),this.props.location.view&&this.handleDepositField(),(null===(c=this.props)||void 0===c||null===(i=c.project)||void 0===i?void 0:i.deposit_amount)?this.formRef.current.setFieldsValue({deposit_amount:"$".concat(null===(r=this.props)||void 0===r||null===(s=r.project)||void 0===s?void 0:s.deposit_amount)}):this.formRef.current.setFieldsValue({deposit_amount:this.state.depositAmountKey||"$0.00"}))}},{key:"render",value:function(){var e,a,t,n,c,i,r,s=this,o=this.state,m=o.fetching,d=(o.pricing,o.selectedType,o.data,o.costSetting),u=o.allOptions,p=o.projectUom,v=o.taxBasisOptions,h=o.totalCount,f=o.lineItems,E=o.filterApplied,g=o.filterObj,b=u.find((function(e){return e.id===p})),N=this.props,y=N.project,w=(N.regions,l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return s.handleResourceModel("Inventory Item",!0)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.inventory_sub_tier_icon}),"Inventory Item")),l.a.createElement(_u.a.Item,{key:"2"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return s.handleResourceModel("Inventory Kit",!0)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.inventory_kit_sub_tier_icon}),"Inventory Kit")),l.a.createElement(_u.a.Item,{key:"3"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return s.handleResourceModel("Disposal",!0)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.disposal}),"Disposal")),l.a.createElement(_u.a.Item,{key:"4"},l.a.createElement(Vm.a,{className:"w-100 text-left border-0 shadow-none",onClick:function(){return s.handleResourceModel("Supply Group",!0)}},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.supply_group_icon_new}),"Supply"))));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row common-form-card-row-line-items mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},wP,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row line-items-inner-row-pd"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add Service Variants to this Project by searching and selecting through the searchbar. After adding a Service Variant, you can also add resources on the fly by clicking Add Resources (which will show up once you have added a Service Variant)."))),E&&l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row banner-apply-filter-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"applied-filter"},"\u2713 Filter Applied")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"clear-btn",onClick:function(){return s.setFilterObj(null)}},l.a.createElement("img",{src:Rm.close_small,alt:"",className:"img-fluid"}),"Clear")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline mb-0"},(null===g||void 0===g?void 0:g.familyName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Family:")," ",null===g||void 0===g?void 0:g.familyName),this.state.breadcrumb.length>0&&l.a.createElement("li",{className:"list-inline-item tier-filter-data"},l.a.createElement("strong",null,"Tier:"),this.state.breadcrumb.map((function(e){return l.a.createElement("span",null," ".concat(e))}))),(null===g||void 0===g?void 0:g.serviceName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Name:")," ",null===g||void 0===g?void 0:g.serviceName),(null===g||void 0===g?void 0:g.display_name)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Display Name:")," ",null===g||void 0===g?void 0:g.display_name),(null===g||void 0===g?void 0:g.variant)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Service Variant Name:")," ",null===g||void 0===g?void 0:g.variant),(null===g||void 0===g?void 0:g.regionName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Region:")," ",null===g||void 0===g?void 0:g.regionName),((null===g||void 0===g?void 0:g.daily_high)||(null===g||void 0===g?void 0:g.daily_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Daily Price:")," $",(null===g||void 0===g?void 0:g.daily_low)||"","-$",(null===g||void 0===g?void 0:g.daily_high)||""),((null===g||void 0===g?void 0:g.hourly_high)||(null===g||void 0===g?void 0:g.hourly_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Hourly Price:")," $",(null===g||void 0===g?void 0:g.hourly_low)||"","-$",(null===g||void 0===g?void 0:g.hourly_high)||""),((null===g||void 0===g?void 0:g.unit_high)||(null===g||void 0===g?void 0:g.unit_low))&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Unit Price:")," $",(null===g||void 0===g?void 0:g.unit_low)||"","-$",(null===g||void 0===g?void 0:g.unit_high)||""),(null===g||void 0===g?void 0:g.unitName)&&l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("strong",null,"Unit:")," ",null===g||void 0===g?void 0:g.unitName)))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"line_item",label:"Service Variants *",rules:[{required:!1,message:"this field is required"}],className:"position-relative ant-select-single-placeholder"},l.a.createElement(ku.a,{multiple:!0,dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed select-paddingLFT-0",placeholder:"Search Service Variants",notFoundContent:m?l.a.createElement(Wv.a,{size:"small"}):"No Result",filterOption:!1,open:this.state.autoOpen,onDropdownVisibleChange:function(e){return s.setState({autoOpen:e})},showSearch:!0,onFocus:function(){0==s.state.lineItems.length&&s.fetchLineItems({isSearched:!0})},onSearch:this.debounceEvent(this.onSearchServiceVariant,1e3),onChange:this.handleSelect,optionLabelProp:"label",dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},m?l.a.createElement(Wv.a,null):f.length!==h&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(e){s.handlePagination(),e.stopPropagation()}},"Load More"),l.a.createElement("span",{className:"remaining-tag"},"(".concat(h-f.length,")")||!1))))))}},f.map((function(e,a){var t,n;return l.a.createElement(yP,{label:e.name,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0 justify-content-between"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},"".concat(null===(t=e.line_item)||void 0===t?void 0:t.name," ").concat(e.region&&"/"," ").concat((null===(n=e.region)||void 0===n?void 0:n.title)||""," - ").concat(null===e||void 0===e?void 0:e.name))),e.breadcrumb&&l.a.createElement("div",{className:"col-12"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_right_search_select_small,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,null,e)})),l.a.createElement(Su.a.Item,null,e.line_item.name,"/",e.region.title,"-",e.name))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"col-12 vc-select-display-name"},l.a.createElement("span",{className:"display-data"},"Display Name:".concat(e.display_name))))),e.labor_groups.length>0&&l.a.createElement("div",{className:"col-12 proposal-labor"},l.a.createElement("img",{src:Rm.labor_gray_icon,alt:"",className:"labor-grp-icon"}),l.a.createElement("span",{className:"ml-1 labor-groups"},e.labor_groups.join(", ")))))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{onClick:function(){return s.handleFilterDrawer(!0)},className:"filter-btn ps-filter d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter")),l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"row mx-0 mt-0 mb-3 add-sub-tier-input-form"},l.a.createElement(xu.a,{placement:"bottomCenter",overlayClassName:"add-adding-dropdown add-resource-dropdown",overlay:w,trigger:["click"]},l.a.createElement(Vm.a,{style:{position:"unset",top:"unset"},className:"ant-dropdown-link ant-dropdown-link-resource border-0",onClick:function(e){return e.preventDefault()}},"+ Add Resource")))),this.state.newPricing.length>0?l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table px-3"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table proposal-update-table-edit"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Taxable")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Include",l.a.createElement("br",null),"In Subtotal")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Total Price")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Document"))),l.a.createElement("div",{className:"row"},null===(e=this.state.newPricing)||void 0===e?void 0:e.map((function(e){var a,t;return l.a.createElement(NP,{key:e.id,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===e||void 0===e||null===(t=e.variant_data)||void 0===t?void 0:t.region,modalVisible:s.state.modalVisible,taxVisible:s.state.taxVisible,subtotalVisible:s.state.subtotalVisible,taxCheckBox:s.state.taxCheckBox,handlePriceUnit:s.handlePriceUnit,handleServiceModal:s.handleServiceModal,handlePriceOnChange:s.handlePriceOnChange,serviceModalVisible:s.state.serviceModalVisible,getSelectedServiceVariants:s.getSelectedServiceVariants,closeViewModal:s.closeViewModal,manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),margin:null===e||void 0===e?void 0:e.margin,allOptions:u,handleUnitSelectChange:function(e,a,t){return s.handleUnitSelectChange(e,a,t)},handleQuantitySelectChange:function(e,a){return s.handleQuantitySelectChange(e,a)},handlePricePerUnitChange:function(e,a){s.handlePricePerUnitChange(e,a)},handleCheckBox:function(e,a,t){return s.handleCheckBox(e,a,t)},handleRemoveWarning:s.handleRemoveWarning,newPricing:e,view:!1})})))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Service Variants")))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row service-row-main service-line-item"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"cost_setting",label:"Cost Setting Options *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),defaultValue:"STANDARD",placeholder:"Select",onChange:this.handleCostSettingChange},$D.map((function(e){return l.a.createElement(yP,{value:e.value},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"tax_basis",className:"search-small-icon-position",label:"Tax Basis *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,onSearch:function(e){s.setState({page:1,searchValue:e},(function(){s.getTaxBasisOptions()}))},placeholder:"Select",filterOption:!1,onPopupScroll:function(e){e.persist();var a=e.target;v.length!==s.state.totalCount&&a.scrollTop+a.offsetHeight===a.scrollHeight&&s.setState({page:s.state.page+1},(function(){return s.getTaxBasisOptions()}))},onChange:this.handleTaxBasisChange},v.map((function(e){return l.a.createElement(yP,{key:e.id,value:e.id},e.name," - ",e.percentage)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"payment_terms",label:"Payment Terms *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},QD.map((function(e){return l.a.createElement(yP,{value:e.value},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"deposit",label:"Deposit *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onChange:this.handleDepositField},l.a.createElement(yP,{value:"YES"},"Yes"),l.a.createElement(yP,{value:"NO"},"No")))),this.state.depositExist?l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"deposit_amount",label:"Deposit Amount*",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{value:this.state.depositValue||0,onChange:this.handleDepositAmount,onBlur:function(e){return s.handleDepositInput(e.target.value)}}))):"")),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1 pt-4"},l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("span",{className:"sub-total-text"},"Estimated Total Price Pre-tax:")),l.a.createElement("div",{className:"col-4 text-md-right"},"LUMP_SUM"==d||"LUMP_SUM_WITH_UOM_AND_QTY"==d?l.a.createElement(ap.a,{value:this.state.pricePreTax||0,onChange:function(e){return s.setState({pricePreTax:e})},onBlur:function(e){return s.handleSubmit({estimated_total_price_pre_tax:e.target.value},!0)}}):l.a.createElement("span",{className:"sub-total-text gray-1"},"$",gd(null===y||void 0===y?void 0:y.estimated_total_price_pre)||0))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text"},"Estimated Taxes:")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("small",null,0!=(null===y||void 0===y||null===(a=y.tax_basis)||void 0===a?void 0:a.percentage)?null===y||void 0===y||null===(t=y.tax_basis)||void 0===t?void 0:t.percentage:"-","%")),l.a.createElement("li",{className:"list-inline-item"},"|"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"sub-total-text gray-1"},"$",gd(null===y||void 0===y?void 0:y.estimated_taxes)||0))))),l.a.createElement("div",{className:"".concat("TOTAL_PRICE_PER_UNIT"==this.state.costSetting&&"normal-text"," row estimated-total-row-3 estimated-total-row")},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text-main"},"Estimated Total:")),l.a.createElement("div",{className:"col-5 text-md-right"},("LUMP_SUM"==d||"LUMP_SUM_WITH_UOM_AND_QTY"==d)&&l.a.createElement("span",{className:"sub-total-text cut-text mr-2"},"$",null===y||void 0===y?void 0:y.standard_estimated_total),l.a.createElement("span",{className:"sub-total-text-main"},"$",gd(null===y||void 0===y?void 0:y.estimated_total)))),"TOTAL_PRICE_PER_UNIT"===d&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row estimated-total-row-2 pt-1 pb-0 estimated-total-row align-items-center"},l.a.createElement("div",{className:"col-5"},l.a.createElement("span",{className:"sub-total-text"},"Total Unit:")),l.a.createElement("div",{className:"col-7 text-md-right value-div-inner"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),value:p,placeholder:"Select",onChange:function(e){s.handleChange(e)}},u.map((function(e){return l.a.createElement(ku.a.Option,{value:e.id},e.name," (",e.symbol,")")})))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(ap.a,{value:this.state.units,onChange:function(e){return s.setState({units:e},(function(){s.handleSubmit({total_units:e},!0)}))}}))))),l.a.createElement("div",{className:"row estimated-total-row-2 pt-3 pb-0 estimated-total-row"},l.a.createElement("div",{className:"col-5"},l.a.createElement("span",{className:"sub-total-text-main"},"Price Per Unit:")),l.a.createElement("div",{className:"col-7 text-md-right"},l.a.createElement("span",{className:"sub-total-text-main"},"$ ",gd(null===y||void 0===y?void 0:y.price_per_unit),b&&" / ".concat(null===b||void 0===b?void 0:b.symbol," "))))),l.a.createElement("div",{className:"row estimated-total-row-4 estimated-total-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("small",{className:"small-text-main position-relative small-text-main-2"},"Taxes are calculated by customer\u2019s billing address"))))),!this.state.loading&&l.a.createElement("div",{className:"col-12 px-md-4 px-sm-3"},l.a.createElement("div",{className:"row mx-0 px-md-2 px-sm-2 py-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"qualifiers",label:"Qualifiers",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(HD,{id:"qualifiers"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"comments",label:"Comments",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(HD,{id:"comments"}))))),l.a.createElement("div",{className:"col-12 validate-div-col validate-div-col-line-items text-md-right"},l.a.createElement(Vm.a,{onClick:function(){return s.formRef.current.submit()},className:"validate-btn-main"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:this.state.resourceModelItem,onOk:function(){return s.handleResourceModel(null,!1)},onCancel:function(){return s.handleResourceModel(null,!1)},destroyOnClose:!0,closable:!0,footer:!1,visible:this.state.showResourceModel},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},wP,{ref:this.contactRef}),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"inventory_item",label:this.state.resourceModelItem,rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,placeholder:"Search",filterOption:!1,removeIcon:"",onChange:function(e){return"Inventory Item"===s.state.resourceModelItem?s.fetchInventoryItem(e):"Disposal"===s.state.resourceModelItem?s.fetchDisposalItem(e):"Supply Group"===s.state.resourceModelItem?s.fetchSupplyItem(e):s.fetchKitItems(e)},onSearch:function(e){return"Inventory Item"===s.state.resourceModelItem?s.fetchAllInventories({search:e}):"Disposal"===s.state.resourceModelItem?s.fetchDisposal({search:e}):"Supply Group"===s.state.resourceModelItem?s.fetchSupplyGroup({search:e}):s.fetchAllInventoryKits({search:e})},onFocus:function(){return"Inventory Item"===s.state.resourceModelItem?s.fetchAllInventories():"Disposal"===s.state.resourceModelItem?s.fetchDisposal():"Supply Group"===s.state.resourceModelItem?s.fetchSupplyGroup():s.fetchAllInventoryKits()}},"Inventory Item"===this.state.resourceModelItem?l.a.createElement(l.a.Fragment,null,null===(n=this.state.inventoryItem)||void 0===n?void 0:n.map((function(e,a){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0 justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.inventory_sub_tier_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name)),e.breadcrumb&&l.a.createElement("div",{className:"col-12"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_right_search_select_small,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,null,e)})),l.a.createElement(Su.a.Item,null,e.name)))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Inventory Item")))}))):"Disposal"===this.state.resourceModelItem?l.a.createElement(l.a.Fragment,null,null===(c=this.state.disposal)||void 0===c?void 0:c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.disposal,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Disposal")))}))):"Supply Group"===this.state.resourceModelItem?l.a.createElement(l.a.Fragment,null,null===(i=this.state.supply)||void 0===i?void 0:i.map((function(e,a){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.supply_group_icon_new,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Supply")))}))):l.a.createElement(l.a.Fragment,null,null===(r=this.state.kits)||void 0===r?void 0:r.map((function(e,a){return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0 justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.inventory_kit_sub_tier_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Inventory kit")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})))))),l.a.createElement(iv,{visible:this.state.serviceModalVisible,onClose:function(){return s.handleServiceModal(!1)},cancelText:"No, cancel this action",editedCheckWarning:!0,priceUnitType:!0,onOk:function(){return s.setState({serviceModalVisible:!1},(function(){s.handlePriceOnChange()}))},heading:"Are you sure you want to change this Service Variant\u2019s Price per Unit?",subHeadingUOM:"If you change the price per unit, you cannot go back to the original price per unit (unless you input it or re-add this service variant)."}),l.a.createElement(WD,{footerText:"Okay, I understand.",visible:this.state.unitModalVisible,onClose:this.handleUnitModal,heading:"You are about to change the UOM.",subHeading:"If you change the UOM, the price per unit will change to the selected UOM\u2019s price per unit (unless you have already overriden it)."}),l.a.createElement(UO,{footerText:"ok",visible:this.state.modalVisible,onClose:this.closeViewModal,heading:this.state.taxCheckBox?this.state.taxVisible?l.a.createElement("div",null,"This is now taxable."):l.a.createElement("div",null,"This is now nontaxable."):this.state.subtotalVisible?l.a.createElement("div",null,"This is now included in the subtotal"):l.a.createElement("div",null,"This is now excluded from the subtotal."),subHeading:this.state.taxCheckBox?this.state.taxVisible?l.a.createElement("div",null,"To make it nontaxable, please uncheck the checkbox."):l.a.createElement("div",null,"To make it taxable, please check the checkbox."):this.state.subtotalVisible?l.a.createElement("div",null,"To make it excluded, uncheck the check box."):l.a.createElement("div",null,"To include it again, please check the checkbox."),footer:"ok"}),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){s.setState({costSettingSelected:null}),s.formRef.current.setFieldsValue({cost_setting:null===y||void 0===y?void 0:y.cost_setting}),s.showWarning(!1)},costSettingWarning:!0,confirmCloseCost:function(){var e=s.props.project;s.setState({costSetting:s.state.costSettingSelected},Object(Qm.a)($m.a.mark((function a(){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.handleSubmit({cost_setting:s.state.costSettingSelected},!0);case 2:"LUMP_SUM"!=s.state.costSetting&&"LUMP_SUM_WITH_UOM_AND_QTY"!=s.state.costSetting||s.setState({pricePreTax:(null===e||void 0===e?void 0:e.estimated_total_price_pre_tax)?null===e||void 0===e?void 0:e.estimated_total_price_pre_tax:null===e||void 0===e?void 0:e.estimated_total_price_pre});case 3:case"end":return a.stop()}}),a)})))),s.showWarning(!1)},heading:"Are you sure you want to update the cost setting?",subHeadingUOM:"Updating the cost setting would affect how the breakdown is presented on your proposal PDF."}),l.a.createElement(iv,{common:!0,visible:this.state.removeWarningVisible,onClose:function(){s.setState({removableId:null,removeWarningVisible:!1})},serviceVariantWarning:!0,commonFunc:function(){s.deleteServiceVariant(),s.handleRemoveWarning(!1)},heading:"Are you sure you want to remove this?",subHeadingUOM:" "}),l.a.createElement(lb,{visible:this.state.visibleFilter,onClose:function(){return s.handleFilterDrawer(!1)},setFilterObj:this.setFilterObj,filterApplied:E}))}}]),t}(n.Component),SP=Object(r.withRouter)(_P),xP={labelCol:{span:24},wrapperCol:{span:24}},CP=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))},sorter:!0},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){JM({project:e.props.project.id}).then((function(a){var t=Object(wu.a)(Object(wu.a)({},e.props.project),{},{documents:a.data.results});e.setState({files:a.data.results}),e.props.setProject(t)})).catch((function(e){td(e)}))},e.uploadFile=function(a){e.setState({buttonLoading:!0});var t=a.file,n=new FormData;n.append("project",e.props.project.id),n.append("document",t),QM(n).then((function(a){e.setState({buttonLoading:!1}),e.props.fetchProject(a.data.project),e.fetchFiles(),Mm.b.success("Documents Upload Successfully")})).catch((function(a){td(a),e.setState({buttonLoading:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id?this.fetchFiles(this.props.match.params.id):this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please upload all related documents here."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},xP,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.state.files.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.columns,dataSource:this.state.files,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),OP=Object(r.withRouter)(CP),kP=fu.a.Panel,jP=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={project:null,visibleConfirm:!1,warningModalVisible:!1,activeKey:["1"],unsavedExit:!1,requiredSuccessModalVisible:!1,regions:[],multiple_created:!1,required:!1},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.setProject=function(a,t){(a.sales_manager.length||a.sales_person.length||a.sales_assistant.length)&&a.project_owner_contact.length&&a.project_customer_contact.length&&0!==a.service_variant_count?e.setState({projectComplete:!0,unsavedExit:!1}):e.setState({unsavedExit:!0});var n=null;e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n?e.setState({project:a}):e.setState((function(e){return{project:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.fetchProject=function(a){$M(e.props.match.params.id?e.props.match.params.id:a).then((function(a){e.setState({project:a.data},(function(){var a;(null===(a=e.state.project)||void 0===a?void 0:a.name)&&!e.props.match.params.id?e.setState({unsavedExit:!1}):e.setState({unsavedExit:!0})}))})).catch((function(e){td(e)}))},e.fetchRegion=function(){ZE().then((function(a){e.setState({regions:a.data.results})})).catch((function(e){td(e)}))},e.handleViewMainButtonCLick=function(){var a,t,n,l=e.state.project;(null===(a=e.props)||void 0===a||null===(t=a.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?o.push(Object(dh.a)(zm.dashboard.operations.projects.view,{id:l.id})):e.showConfirmModal(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.match.params.id?(this.fetchProject(),this.fetchRegion(),e=[{title:"Edit Project",url:""}],this.setState({activeKey:this.props.location.editTab||"1"})):e=[{title:"Create Project",url:""}],this.props.setBreadcrumb(e)}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.state,r=i.activeKey,s=(i.regions,i.project),m=this.props.location.pathname.includes("create");return l.a.createElement(l.a.Fragment,null,l.a.createElement(of,{when:this.state.unsavedExit&&!this.props.match.params.id,title:"Are you sure you want to exit creating this project?",cancelText:"Continue with project",unsavedText:"Exiting project creation without adding all of the required information may cause issues. To avoid issues, please continue and finish this proposal. If you would like to exit anyway, select Exit.",okText:"Exit",onOK:function(){return!0},onCancel:function(){return!1},setCancel:function(){c.setState({required:!0})}}),l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{onChange:this.collapseOnChange,activeKey:r,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(kP,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(lP,{project:s,setProject:this.setProject})),l.a.createElement(kP,{disabled:!s,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Team *"),(this.state.required||(null===(e=this.props.match.params)||void 0===e?void 0:e.id))&&su(s,"TEAMS")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"2"},l.a.createElement(mP,{fetchProject:this.fetchProject,project:s,setProject:this.setProject})),l.a.createElement(kP,{disabled:!s,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Billing Account *"),(this.state.required||(null===(a=this.props.match.params)||void 0===a?void 0:a.id))&&su(s,"CUSTOMER")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"3"},l.a.createElement(pP,{fetchProject:this.fetchProject,project:s,setProject:this.setProject})),l.a.createElement(kP,{disabled:!s,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Site Manager Account *"),(this.state.required||(null===(t=this.props.match.params)||void 0===t?void 0:t.id))&&su(s,"OWNER")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"4"},l.a.createElement(fP,{fetchProject:this.fetchProject,project:s,setProject:this.setProject})),l.a.createElement(kP,{disabled:!s,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Service Variants ",l.a.createElement("sup",null,"*")),(this.state.required||(null===(n=this.props.match.params)||void 0===n?void 0:n.id))&&su(s,"SERVICE_VARIENT")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"5"},l.a.createElement(SP,{project:s,fetchProject:this.fetchProject,setProject:this.setProject})),l.a.createElement(kP,{disabled:!s,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"6"},l.a.createElement(OP,{fetchProject:this.fetchProject,project:s,setProject:this.setProject}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return c.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{style:m?{width:"37%"}:{},onClick:function(){c.state.unsavedExit?o.push(Object(dh.a)(zm.dashboard.operations.projects.view,{id:s.id})):c.handleViewMainButtonCLick()},disabled:!s,type:"primary"},"View Project"))))))),l.a.createElement(mh,{heading:this.props.match.params.id?"You\u2019ve successfully updated this Project!":"Project Created Successfully!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view this billing account, select \xa0",l.a.createElement(Vm.a,{onClick:function(){o.push(Object(dh.a)(zm.dashboard.operations.projects.view,{id:s.id}))},className:"border-0 bg-transparent shadow-none p-0"},"View Project."),"."),visible:this.state.visibleConfirm,okAction:function(){o.push(Object(dh.a)(zm.dashboard.operations.projects.view,{id:s.id}))},okTitle:"View Project",onClose:function(){return c.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Project?"),visible:this.state.warningModalVisible,onClose:function(){return c.showWarningModal(!1)}}))}}]),t}(n.Component),IP=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(jP));n.Component;function AP(e){return od(ad("work_order.work_order"),e)}function DP(e,a){return md(ad("work_order.work_order",{id:e}),a)}function TP(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("work_order.work_order",{id:e});return id(t,a)}function RP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("labor.internal_location");return id(a,e)}function MP(e){return od(ad("work_order.work_order_document"),e)}function FP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("work_order.work_order_document");return id(a,e)}function PP(e){return od(ad("work_order.post"),e)}function VP(e,a){return md(ad("work_order.post",{id:e}),a)}function qP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("work_order.post");return id(a,e)}function LP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("work_order.customer_contacts");return id(a,e)}function UP(e){return od(ad("work_order.customer_contacts"),e)}function BP(e,a){return md(ad("work_order.customer_contacts",{id:e}),a)}function WP(e){return dd(ad("work_order.customer_contacts",{id:e}))}function YP(e){return od(ad("work_order.owner_contacts"),e)}function KP(e,a){return md(ad("work_order.owner_contacts",{id:e}),a)}function GP(e){return dd(ad("work_order.owner_contacts",{id:e}))}function zP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("work_order.owner_contacts");return id(a,e)}function HP(e){return id(ad("work_order.work_order_activity",{id:e}))}function $P(){return id(ad("work_order.work_order_status"))}function QP(e,a){return md(ad("work_order.default_customer_recipient",{id:e}),a)}function JP(e,a){return md(ad("work_order.primary_site",{id:e}),a)}function ZP(e){return od(ad("work_order.work_order_warehouse"),e)}function XP(e){return id(ad("work_order.work_order_warehouse",{id:e}))}function eV(e){return dd(ad("work_order.work_order_warehouse",{id:e}))}function aV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("work_order.work_order_project_variant");return id(a,e)}function tV(e){return id(ad("work_order.work_order_service_variant"),e)}function nV(e){return od(ad("work_order.work_order_service_variant"),e)}function lV(e){return od(ad("work_order.work_order_container_data"),e)}function cV(e,a){return md(ad("work_order.work_order_service_variant",{id:a}),e)}function iV(e){return dd(ad("work_order.work_order_service_variant",{id:e}))}function rV(e){return sd(ad("work_order.work_order_pdf"),e)}function sV(e,a){return md(ad("work_order.work_order",{id:a}),e)}function oV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("work_order.work_order_group");return id(a,e)}function mV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("dispatch.dispatch_vehicle");return id(a,e)}var dV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).columns=[{title:"Associated Project",dataIndex:"project",sorter:!0,key:"project",render:function(e){return l.a.createElement("div",null,null===e||void 0===e?void 0:e.name)}},{title:"Work Order id",dataIndex:"id",sorter:!0,key:"id",render:function(e){return l.a.createElement("div",{className:"font-weight-bold"},e," ")}},{title:"Site",dataIndex:"work_owner_contact",sorter:!0,key:"site",render:function(e){return l.a.createElement("div",null,e.map((function(e){return e.site.length?e.site.map((function(e){var a,t,n,c,i;return l.a.createElement(l.a.Fragment,null,"".concat(null===(a=e.site)||void 0===a?void 0:a.street_address).concat(null===(t=e.site)||void 0===t?void 0:t.city).concat(null===(n=e.site)||void 0===n?void 0:n.country).concat(null===(c=e.site)||void 0===c?void 0:c.state).concat(null===(i=e.site)||void 0===i?void 0:i.zip_code))})):"-"})))}},{title:"Billing Account",dataIndex:"work_customer_contact",sorter:!0,key:"billing_account",render:function(e){return l.a.createElement("div",null,e.map((function(e){var a;return null===(a=e.account)||void 0===a?void 0:a.name})))}},{title:"Dispatch/Warehouse",dataIndex:"workorder_warehouse",width:"210px",sorter:!0,key:"dispatch_warehouse",render:function(e){return l.a.createElement("div",null,e.map((function(e){return e.warehouse.name})))}},{title:"Status",dataIndex:"status",sorter:!0,key:"status",render:function(e){var a,t;return l.a.createElement("div",{className:"text-capitalize text-primary"},(null===e||void 0===e||null===(a=e.split("_"))||void 0===a||null===(t=a.join(" "))||void 0===t?void 0:t.toLowerCase())||"-")}},{title:"SERVICE DATE",dataIndex:"service_date",sorter:!0,key:"service_date",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},e?hd()(e).format("MMM DD,YYYY"):"-")}},{title:"SERVICE TIME",dataIndex:"",sorter:!0,key:"service_time",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},"".concat((null===e||void 0===e?void 0:e.start_time)?hd()(null===e||void 0===e?void 0:e.start_time,"H:mm").format("H:mm A"):""," - ").concat((null===e||void 0===e?void 0:e.end_time)?hd()(null===e||void 0===e?void 0:e.end_time,"H:mm").format("H:mm A"):""))}}],n.getLocateData=function(){return l.a.createElement("div",{className:"col-12 no-data-card-row-new-table"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.empty_work_order_keys_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"no-data-main-tg mb-0"},"No Work Orders"))))},n.fetchWorkOrders=function(e){var a=n.state,t=a.date,l=a.search;n.setState({fetching:!0}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("work_order.work_order");return id(a,e)}(Object(wu.a)(Object(wu.a)({},e),{},{page:(null===e||void 0===e?void 0:e.page)||1,search:l},t)).then((function(a){n.setState((function(t){return{workOrders:a.data.results,pagination:Object(wu.a)(Object(wu.a)({},t.pagination),{},{current:(null===e||void 0===e?void 0:e.page)||1,total:a.data.count})}}))})).catch((function(e){td(e)})).finally((function(){n.setState({fetching:!1})}))},n.handleFilterData=function(e){e?n.setState({date:Object(wu.a)(Object(wu.a)({},n.state.date),e)},(function(){n.fetchWorkOrders()})):n.setState({date:null},(function(){n.fetchWorkOrders()}))},n.onSearch=function(e){n.setState({search:e.target.value},(function(){n.fetchWorkOrders()}))},n.handleTableChange=function(e,a,t){var l="";"descend"===t.order&&(l="-");var c={page:e.current};t.columnKey?c.ordering="".concat(l).concat(t.columnKey):c.ordering="name",n.setState({loading:!0}),n.fetchWorkOrders(c)},n.state={workOrders:[],fetching:!1,pagination:{current:1,pageSize:15,showSizeChanger:!1,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},search:"",date:{start:"",end:"",start_modified:"",end_modified:""}},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{title:"Work Orders"}]),this.fetchWorkOrders()}},{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.workOrders,c=a.pagination;return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(cb,{buttonLink:zm.dashboard.operations.work_order.create,buttonName:"+ Create Work Order",onSearch:lu(this.onSearch,1e3),fetchData:function(a){return e.handleFilterData(a)}}),l.a.createElement("div",{className:"row mx-0 width-160-id opportunities-table-main-dashboard"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div proposals-main-table opportunity-db-table"},l.a.createElement(fv.a,{scroll:{y:500},loading:t,className:"main-table-all sorter-design-fix",columns:this.columns,dataSource:n,onChange:this.handleTableChange,pagination:c,size:"middle",locale:t?{emptyText:" "}:{emptyText:this.getLocateData()},onRow:function(e){return{onClick:function(a){o.push(Object(Gm.reverse)(zm.dashboard.operations.work_order.view,{id:e.id}))}}}}))))}}]),t}(n.Component),uV=Object(Lm.b)(null,{setBreadcrumb:Uv})(dV);function pV(e){return function(a){return $M(e).then((function(e){a({type:"PROJECT_DETAIL_SUCCESS",payload:e.data})}))}}var vV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s=null===(e=this.props.data)||void 0===e?void 0:e.project_customer_contact,o=null===(a=this.props.data)||void 0===a?void 0:a.project_owner_contact;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 custom-tree-row justify-content-between py-2"},l.a.createElement("div",{className:"common-select-option-row",style:{width:"87%"}},l.a.createElement("div",{className:"select-option-details align-items-center"},this.props.img&&l.a.createElement("div",{className:this.props.img?"select-option-icon d-inline-block":"",style:Object(wu.a)(Object(wu.a)({},null===(t=this.props)||void 0===t?void 0:t.style),{},{float:"left"})},l.a.createElement("img",{src:this.props.img,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"d-inline-block",style:{width:"calc(100% - 45px)"}},l.a.createElement("h6",{style:{display:"inline-block",maxWidth:"95%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},className:"mb-0 custom-select-option-title"},this.props.data.name),l.a.createElement("ul",{className:"list-inline mb-0 person-list-details"},l.a.createElement("li",null,l.a.createElement("img",{src:Rm.person_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("span",null,(null===s||void 0===s?void 0:s.length)?null===(n=s[0])||void 0===n||null===(c=n.account)||void 0===c?void 0:c.name:"-")),l.a.createElement("li",null,l.a.createElement("img",{src:Rm.person_round_gray_small,alt:"",className:"img-fluid"}),l.a.createElement("span",null,(null===o||void 0===o?void 0:o.length)?null===(i=o[0])||void 0===i||null===(r=i.account)||void 0===r?void 0:r.name:"-")))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},this.props.type)))}}]),t}(n.Component),hV=Object(Lm.b)(null,{setBreadcrumb:Uv})(vV),fV=ku.a.Option,EV={labelCol:{span:24},wrapperCol:{span:24}},gV=Pm.a.TextArea,bV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).fetchProjects=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({fetching:!0}),HM(e).then((function(e){n.setState({projects:e.data.results,fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}))},n.handleSubmit=function(e){var a=n.state.retrieve_proj,t=Object(wu.a)(Object(wu.a)({},e),{},{status:e.status.value,project:e.project.value,retrieve_project:!(!a||n.props.workOrder)&&a});n.setState({btnLoader:!0}),n.props.workOrder?DP(n.props.workOrder.id,t).then((function(e){n.props.setWorkOrder(e.data,2),Mm.b.success("Work Order updated successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({btnLoader:!1})})):AP(t).then((function(e){n.props.setWorkOrder(e.data,2),Mm.b.success("Work Order created successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({btnLoader:!1})}))},n.handleSelectProject=function(e){n.setState({projectVal:e},(function(){n.props.ProjectDetailAction(null===e||void 0===e?void 0:e.value)}))},n.handleWarningModal=function(e){n.setState({visibleRetrieveWarning:e})},n.handleRetrieveproject=function(){var e=n.props.project_data;n.setState({retrieve_proj:!0,visibleRetrieveWarning:!1},(function(){var a={description:null===e||void 0===e?void 0:e.description};n.formRef.current.setFieldsValue(Object(wu.a)({},a))}))},n.state={projects:[],fetching:!1,statusTypes:[],projectVal:null,visibleRetrieveWarning:!1,retrieve_proj:!1},n.formRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e;(null===(e=this.props.location.pathname)||void 0===e?void 0:e.includes("create"))&&this.formRef.current.setFieldsValue({status:{value:"SERVICE_REQUEST"}})}},{key:"componentDidUpdate",value:function(e,a){if(e.workOrder!=this.props.workOrder){var t,n;console.log("enter");var l=this.props.workOrder;this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},l),{},{project:{label:null===l||void 0===l||null===(t=l.project)||void 0===t?void 0:t.name,value:null===l||void 0===l||null===(n=l.project)||void 0===n?void 0:n.id},status:{value:null===l||void 0===l?void 0:l.status}}))}}},{key:"render",value:function(){var e=this,a=this.state,t=a.projects,n=a.fetching,c=(a.statusTypes,a.btnLoader),i=a.projectVal,r=this.props.workOrder;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please input general information for workorder."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},EV,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"status",label:"Status *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:" ",className:"img-fluid"}),notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,placeholder:"Select Status"},l.a.createElement(fV,{value:"SERVICE_REQUEST"},"Service Request"),l.a.createElement(fV,{value:"IN_QUEUE"},"In Queue"),l.a.createElement(fV,{value:"EN_ROUTE"},"En Route"),l.a.createElement(fV,{value:"ON_SITE"},"On Site"),l.a.createElement(fV,{value:"COMPLETED"},"Completed"),l.a.createElement(fV,{value:"VOID"},"Void")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"project",label:"Associated Project *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,disabled:null===r||void 0===r?void 0:r.project,showSearch:!0,dropdownClassName:"custom-select-drop-main",placeholder:"Associated Project",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onSelect:function(a){return e.handleSelectProject(a)},onFocus:function(){return e.fetchProjects()},onSearch:function(a){return e.fetchProjects({search:a})},optionLabelProp:"label"},t.map((function(e){return l.a.createElement(fV,{key:e.id,label:e.name,value:e.id},l.a.createElement(hV,{data:e,img:Rm.folder_icon_black,type:"Project"}))})))),window.location.href.includes("create")&&i&&l.a.createElement("span",{className:"retrieve-oppo ".concat(r&&"cursor"),onClick:function(){r||e.handleWarningModal(!0)}},"Retrieve information")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",className:"position-relative"},l.a.createElement(gV,{className:"text-area-main text-area-task",placeholder:"Enter Description"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:c,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(iv,{heading:"Are you sure you want to retrieve information from this project?",subHeadingUOM:"If you click Continue, general information, team, billing accounts, site manager accounts & sites, documents, and service variants would be retrieved from the selected project.",uomWarning:!0,retrieveWarning:!0,okAction:this.handleRetrieveproject,visible:this.state.visibleRetrieveWarning,onClose:function(){return e.handleWarningModal(!1)}}))}}]),t}(n.Component),NV=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{ProjectDetailAction:pV})(Object(r.withRouter)(bV)),yV=t(1051),wV=ku.a.Option,_V={labelCol:{span:24},wrapperCol:{span:24}},SV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={btnLoader:!1},e.formRef=l.a.createRef(),e.handleSubmit=function(a){console.log(a,"call");var t={service_date:a.service_date.format("YYYY-MM-DD"),start_time:a.start_time.format("HH:mm:ss.sss"),end_time:a.end_time?a.end_time.format("HH:mm:ss.sss"):null,billing_account_po:a.billing_account_po||null};e.setState({btnLoader:!0}),e.props.workOrder?DP(e.props.workOrder.id,t).then((function(a){e.props.setWorkOrder(a.data,3),Mm.b.success("Service information updated successfully!")})).catch((function(e){td(e)})).finally((function(){e.setState({btnLoader:!1})})):AP(t).then((function(a){e.props.setWorkOrder(a.data,3),Mm.b.success("Service information created successfully!")})).catch((function(e){td(e)})).finally((function(){e.setState({btnLoader:!1})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.workOrder||this.props.location.workOrder;e&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e),{},{service_date:(null===e||void 0===e?void 0:e.service_date)?hd()(null===e||void 0===e?void 0:e.service_date):null,start_time:(null===e||void 0===e?void 0:e.start_time)?hd()(null===e||void 0===e?void 0:e.start_time,"HH:mm:ss"):null,end_time:(null===e||void 0===e?void 0:e.end_time)?hd()(null===e||void 0===e?void 0:e.end_time,"HH:mm:ss"):null,billing_account_po:(null===e||void 0===e?void 0:e.billing_account_po)||null}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose service date and time."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},_V,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"service_date",label:"Service Date *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"billing_account_po",label:"Billing Account PO#/Job#"},l.a.createElement(Pm.a,{placeholder:"Type something"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"start_time",label:"Estimated Start Time *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(yV.a,{placeholder:"Select Estimated Start Time"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"end_time",label:"Estimated End Time",className:"position-relative"},l.a.createElement(yV.a,{placeholder:"Select Estimated End Time"}))),l.a.createElement("div",{className:"hr-line"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row set-to-repeat-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",null,"Set to Repeat")),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row position-relative"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"set_to-repeat",label:"Set ot Repeat"},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(wV,{key:1,value:1},"Does not repeat"),l.a.createElement(wV,{key:2,value:2},"Repeat")))),l.a.createElement("div",{className:"coming-soon-div coming-soon-div-update"},"Coming Soon"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.btnLoader,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),xV=Object(r.withRouter)(SV),CV={labelCol:{span:24},wrapperCol:{span:24}},OV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,contactAccount:null,showContactModel:!1,contactModalItem:null,contacts:[],removeVisible:!1,contactDrwrVisible:!1,deletableAccountId:null},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({customer_accounts:null}),UP({work_order:e.props.workOrder.id,account:a.value,contact_id:[]}).then((function(){e.props.fetchWorkOrder(e.props.workOrder.id)})).catch((function(e){td(e)}))},e.handleDeleteContactAccount=function(){WP(e.state.deletableAccountId).then((function(){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.handleContactSelect=function(a){var t=e.state.contactModalItem,n=e.props.workOrder.work_customer_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.contact.id})),i={contact_id:[].concat(Object(Ou.a)(c),[a]),contact:[]};BP(t.id,i).then((function(){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.showRemoveContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrwrVisible:a,selectedItem:t,deletableContactId:n})},e.handleDeleteContact=function(){var a=e.props.workOrder.work_customer_contact,t=a.findIndex((function(a){return a.id===e.state.selectedItem.id})),n={contact:[],contact_id:a[t].contact.filter((function(a){return a.id!==e.state.deletableContactId})).map((function(e){return e.contact.id}))};BP(e.state.selectedItem.id,n).then((function(a){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.onAccountsSearch=function(a){e.getAllAccounts({search:a})},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Du(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllContacts=function(a){var t,n=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({},a),{},{account:null===n||void 0===n||null===(t=n.account)||void 0===t?void 0:t.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.handleSubmit=function(){Mm.b.success("Billing Account Updated Successfully!"),e.props.setWorkOrder(e.props.workOrder,5)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.handleDefaultRecipient=function(e,a){QP(e,{default_contact_id:a}).catch((function(e){td(e)}))},e.showContactAccount=function(){e.setState({customerContactVisible:!1})},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.workOrder.work_customer_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.contact.id})),i={contact_id:[].concat(Object(Ou.a)(c),[a.id]),contact:[]};BP(t.id,i).then((function(a){e.props.fetchWorkOrder(e.props.workOrder.id),a.data.contact.map((function(e){var t;xh({account:null===(t=a.data)||void 0===t?void 0:t.account.id},e.contact.id).then((function(){})).catch((function(e){td(e)}))}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllAccounts()}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.loading,c=t.accounts,i=(this.props.defaultRecepientId,(null===(e=this.props.workOrder)||void 0===e?void 0:e.work_customer_contact)||[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Note: The information from opportunity including description, employees, customer accounts & contacts, site owner account & sites, and documents have been converted to this form."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},CV,{className:"main-inner-form"}),l.a.createElement("div",{className:"row",style:{padding:"0px 25px"}},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"customer_accounts",label:"Billing Accounts *",rules:[{required:0==i.length,message:"Please select at least one billing account."}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,removeIcon:"",className:"search-and-select-tag",showSearch:!0,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:this.debounceEvent(this.onAccountsSearch,1e3),notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,disabled:i.length>=1,onFocus:function(){return a.getAllAccounts()}},c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Billing Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),i.map((function(e,t){var n,c,i,r;return l.a.createElement("div",{className:"col-12 col-sm-12",key:t},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===e||void 0===e||null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},"Billing Account")))),(null===(c=a.props.location.pathname)||void 0===c?void 0:c.includes("create"))&&l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleContactModel(e,!0)}},"+ Add Contact *")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(vh.a.Group,{className:"w-100",defaultValue:null===(i=e.contact.find((function(e){return!0===e.default_customer_recipient})))||void 0===i||null===(r=i.contact)||void 0===r?void 0:r.id},l.a.createElement("div",{className:"row w-100"},e.contact.map((function(t,n){var c,i,r;return l.a.createElement("div",{className:"col-6 col-sm-6",key:n},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},t.contact.first_name," ",t.contact.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500"}},t.contact.role)),l.a.createElement("p",{className:"mb-0"},t.contact.default_email&&"".concat(null===(c=t.contact.default_email)||void 0===c?void 0:c.email,","),"\xa0",null===(i=t.contact.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveContact(!0,e,null===t||void 0===t?void 0:t.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===t||void 0===t||null===(r=t.contact)||void 0===r?void 0:r.id,onChange:function(){var n;return a.handleDefaultRecipient(e.id,null===t||void 0===t||null===(n=t.contact)||void 0===n?void 0:n.id)}},"Work Order Recipient"," ",l.a.createElement("small",{style:{color:"#b4b4b4",fontSize:"8px"}},"This contact will be addressed in the Work Order.")))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))))))})),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Billing Accounts"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add contact",onOk:function(){return a.handleContactModel(null,!1)},onCancel:function(){return a.handleContactModel(null,!1)},destroyOnClose:!0,closable:!0,footer:!1,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},CV,{ref:this.contactRef}),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,placeholder:"Search",filterOption:!1,removeIcon:"",onChange:this.handleContactSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onFocus:function(){return a.getAllContacts()},onSearch:lu((function(e){return a.getAllContacts({search:e})}),300)},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({customerContactVisible:!0},(function(){return a.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(iv,{common:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account? ",subHeadingUOM:"If you choose to remove this Billing Account, this might cause issues.",visible:this.state.removeVisible,commonFunc:function(){a.setState({deletableAccountId:null,removeVisible:!1}),a.handleDeleteContactAccount()},onClose:function(){a.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedItem:null,deletableContactId:null,contactDrwrVisible:!1}),a.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrwrVisible,onClose:function(){return a.showRemoveContact(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.customerContactVisible,onClose:function(){return a.showContactAccount(!1)}}))}}]),t}(n.Component),kV=Object(r.withRouter)(OV),jV={labelCol:{span:24},wrapperCol:{span:24}},IV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.siteRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,contactAccount:null,showContactModel:!1,contactModalItem:null,showSiteModel:!1,siteModalItem:null,contacts:[],sites:[],removeVisible:!1,deletableAccountId:null,contactDrawerVisible:!1,siteDrawerVisible:!1,page:1,sitepage:1,search:"",totalCount:0,totalsiteCount:0},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.handleDefaultSelectAccount=function(a){var t=e.state.selectedContactAccounts;return a.map((function(e){var a=t.find((function(a){return a.account.id===e.id}));return a&&(e.contacts=a.contact,e.sites=a.site),e}))},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({owner_accounts:null}),YP({work_order:e.props.workOrder.id,account:a.value}).then((function(){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.handleOnDeselect=function(a){var t=e.props.work_order.work_owner_contact.find((function(e){return e.account.id===a.value}));e.handleDeleteOwnerAccount(t.id)},e.handleDeleteOwnerAccount=function(){GP(e.state.deletableAccountId).then((function(){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.handleContactSelect=function(a){e.contactRef.current.setFieldsValue({contact:null});var t=e.state.contactModalItem,n=e.props.workOrder.work_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a])};KP(t.id,i).then((function(a){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.handleContactDeselect=function(a){e.handleDeleteContact(e.state.contactModalItem,a)},e.handleDeleteContact=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedItem,n=e.state.deletableContactId,l=e.props.workOrder.work_owner_contact,c=l.findIndex((function(e){return e.id===t.id})),i={contact:l[c].contact.filter((function(e){return e.id!==n})).map((function(e){return e.id}))};KP(t.id,i).then((function(){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.handleSiteSelect=function(a){e.siteRef.current.setFieldsValue({site:null});var t=e.state.siteModalItem,n=e.props.workOrder.work_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l],i=c.site.map((function(e){return e.site.id})),r={site_id:[].concat(Object(Ou.a)(i),[a]),site:[]};KP(t.id,r).then((function(){0===c.site.length&&e.handlePrimarySite(c.id,a),e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.handleSiteDeselect=function(a){e.handleDeleteSite(e.state.siteModalItem,a)},e.handleDeleteSite=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedSite,n=e.state.deletableSiteId,l=e.props.workOrder.work_owner_contact,c=l.findIndex((function(e){return e.id===t.id})),i=l[c],r={site_id:null===i||void 0===i?void 0:i.site.filter((function(e){return e.site.id!==n})).map((function(e){return e.site.id}))};KP(t.id,r).then((function(){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),mp(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllSites=function(a){e.setState({loading:!0});var t=e.state.siteModalItem;hp(Object(wu.a)(Object(wu.a)({},a),{},{account:t.account.id})).then((function(a){e.setState({sites:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllContacts=function(a){e.setState({loading:!0});var t=e.state.contactModalItem;yh(Object(wu.a)(Object(wu.a)({},a),{},{account:t.account.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.handleSubmit=function(){Mm.b.success("Site Manager Updated Successfully!"),e.props.setWorkOrder(e.props.workOrder,6)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.handleSiteModel=function(a,t){a?e.setState({siteModalItem:a,showSiteModel:t}):e.setState({showSiteModel:t})},e.handlePrimarySite=function(e,a){JP(e,{primary_site_id:a}).catch((function(e){td(e)}))},e.removeContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrawerVisible:a,selectedItem:t,deletableContactId:n})},e.handleRemoveSite=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({siteDrawerVisible:a,selectedSite:t,deletableSiteId:n})},e.showContactAccount=function(){e.setState({ownerContactVisible:!1})},e.showSites=function(){e.setState({onwerSiteVisible:!1})},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.workOrder.work_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a.id])};KP(t.id,i).then((function(a){e.props.fetchWorkOrder(e.props.workOrder.id),a.data.contact.map((function(e){var t;xh({account:null===(t=a.data)||void 0===t?void 0:t.account.id},e.id).then((function(){})).catch((function(e){td(e)}))}))}))},e.callbackSite=function(a){var t=e.state.siteModalItem,n=e.props.workOrder.work_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l],i=c.site.map((function(e){return e.site.id})),r={site_id:[].concat(Object(Ou.a)(i),[a.id]),site:[]};KP(t.id,r).then((function(){0===c.site.length&&e.handlePrimarySite(c.id,a.id),e.props.fetchWorkOrder(e.props.workOrder.id)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&(this.getAllAccounts(),this.props.fetchWorkOrder())}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.loading,c=t.accounts,i=(t.totalCount,(null===(e=this.props.workOrder)||void 0===e?void 0:e.work_owner_contact)||[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Note: The information from opportunity including description, employees, customer accounts & contacts, site owner account & sites, and documents have been converted to this form."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},jV,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{dropdownClassName:"option-design-fix",name:"owner_accounts",label:"Site Manager Account ",rules:[{required:i.length<1,message:"Please select at least one site manager account."}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,className:"search-and-select-tag",showSearch:!0,disabled:i.length>=1,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:function(e){return a.getAllAccounts({search:e})},removeIcon:"",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,onFocus:function(){return a.getAllAccounts()}},c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site Manager Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:25}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),i.map((function(e,t){var n,c,i,r,s;return l.a.createElement("div",{className:"col-12 col-sm-12",key:t},l.a.createElement("div",{className:"row mx-0 opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},Lp[null===(c=e.account)||void 0===c?void 0:c.account_type]," ","Account")))),l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"}))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{disabled:(null===e||void 0===e||null===(i=e.contact)||void 0===i?void 0:i.length)>=1,className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleContactModel(e,!0)}},"+ Add Contact")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},e.contact.map((function(t,n){var c,i;return l.a.createElement("div",{className:"col-6 col-sm-6",key:n},l.a.createElement("div",{style:{minHeight:"100px"},className:"row mx-0 mb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},t.first_name," ",t.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},t.role)),l.a.createElement("p",{className:"mb-0"},t.default_email&&"".concat(null===(c=t.default_email)||void 0===c?void 0:c.email,","),"\xa0"," ",null===(i=t.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.removeContact(!0,e,t.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"}))))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts")))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{disabled:(null===e||void 0===e||null===(r=e.site)||void 0===r?void 0:r.length)>=1,className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleSiteModel(e,!0)}},"+ Add Site",l.a.createElement("sup",null,"*"))),e.site&&0!==e.site.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(vh.a.Group,{defaultValue:null===(s=e.site.find((function(e){return!0===e.primary})))||void 0===s?void 0:s.id},e.site.map((function(t,n){return l.a.createElement("div",{className:"col-12",key:n},l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("h6",{style:{fontSize:"15px",color:"#4f4f4f",fontWeight:"500"},className:"text-capitalize mb-0"},t.site.name)))),l.a.createElement("div",{className:"col-12 col-sm-9 px-3 pt-2 pb-4"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},t.site.street_address||""," ",t.site.apartment||""," ",t.site.city||"",","," ",t.site.state||""," ",t.site.zip_code||""," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},t.site.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},t.site.phone)),l.a.createElement("div",{className:"col-12 col-sm-1 position-relative"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.handleRemoveSite(!0,e,t.site.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{style:{width:"20px"},className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===t||void 0===t?void 0:t.id,onChange:function(){return a.handlePrimarySite(e.id,null===t||void 0===t?void 0:t.site.id)}},"Primary Site"))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))})),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Site Manager Account"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",closable:!0,footer:!1,title:"Add contact",onOk:function(){return a.handleContactModel(null,!1)},onCancel:function(){return a.handleContactModel(null,!1)},destroyOnClose:!0,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},jV,{ref:this.contactRef}),l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleContactSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onSearch:lu((function(e){return a.getAllContacts({search:e})}),300),onFocus:function(){return a.getAllContacts()}},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({ownerContactVisible:!0},(function(){return a.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add Sites",closable:!0,footer:!1,onOk:function(){return a.handleSiteModel(null,!1)},onCancel:function(){return a.handleSiteModel(null,!1)},destroyOnClose:!0,visible:this.state.showSiteModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},jV,{ref:this.siteRef}),l.a.createElement(Fm.a.Item,{name:"site",label:"Site *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{className:"search-and-select-tag dropdown-fixed",dropdownClassName:"option-design-fix",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleSiteSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Site",onFocus:function(){return a.getAllSites()},onSearch:lu((function(e){return a.getAllSites({search:e})}),300)},this.state.sites.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name,l.a.createElement("br",null),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e?"".concat(null===e||void 0===e?void 0:e.street_address," ").concat(null===e||void 0===e?void 0:e.city,", ").concat(null===e||void 0===e?void 0:e.state," ").concat(null===e||void 0===e?void 0:e.zip_code):" ")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({onwerSiteVisible:!0},(function(){return a.handleSiteModel(!1)}))}},"+ Create"))))),l.a.createElement(iv,{commonInternalLocationPopup:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account?",subHeadingUOM:"If you choose to remove this Site Manager Account, this might cause issues.",visible:this.state.removeVisible,showWarningModal2:function(){a.setState({deletableAccountId:null,removeVisible:!1}),a.handleDeleteOwnerAccount()},onClose:function(){return a.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedItem:null,deletableContactId:null,contactDrawerVisible:!1}),a.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrawerVisible,onClose:function(){return a.removeContact(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedSite:null,deletableSiteId:null,siteDrawerVisible:!1}),a.handleDeleteSite()},heading:"Are you sure you want to remove this site?",subHeadingUOM:" ",visible:this.state.siteDrawerVisible,onClose:function(){return a.handleRemoveSite(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.ownerContactVisible,onClose:function(){return a.showContactAccount(!1)}}),l.a.createElement(lf,{callbackSite:this.callbackSite,visible:this.state.onwerSiteVisible,selectedAccounts:i,onClose:function(){return a.showSites(!1)}}))}}]),t}(n.Component),AV=Object(r.withRouter)(IV),DV=ku.a.Option,TV=fu.a.Panel,RV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={rows:[],groups:[],loading:!0,qty:1,warningVisible:!1,pricingUom:[]},e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0",onClick:function(){var a;return e.props.handleRemoveWarning(!0,null===(a=e.props.newPricing)||void 0===a?void 0:a.id)}},"Remove")),e.formatVal=function(a,t){var n=e.props.newPricing,l=Number(null===n||void 0===n?void 0:n.price_per_unit).toFixed(2),c=(null===a||void 0===a?void 0:a.toString())||"0",i=null===c||void 0===c?void 0:c.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),r=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});e.setState({priceUnit:r.format(i)},(function(){if(t){var a,c=null===(a=e.state.priceUnit)||void 0===a?void 0:a.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2});if(console.log(c,l),!(null===n||void 0===n?void 0:n.edited)&&c!=l)return void e.props.handlePricePerUnitChange(c,null===n||void 0===n?void 0:n.id);(null===n||void 0===n?void 0:n.edited)&&c!=l&&e.props.handlePricePerUnitChange(c,null===n||void 0===n?void 0:n.id)}}))},e.handleChangeContainer=function(a,t,n){lV(a.container?{container_type:a.container,disposal_id:t,variant_id:n}:{container_quantity:a.cont_qty,disposal_id:t,variant_id:n}).then((function(a){e.props.fetchworkorder(e.props.workorder.id),e.props.getSelectedServiceVariants(),e.handleData()})).catch((function(e){td(e)}))},e.handleFleetKit=function(e,a,t){var n,c,i;return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(t?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},a&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:a&&{paddingLeft:"30px"}},(null===e||void 0===e?void 0:e.kit_child)?null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name:e.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},e.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"},(null===e||void 0===e?void 0:e.kit_child)?l.a.createElement("span",{className:"text-capitalize"},(null===e||void 0===e||null===(c=e.kit_uom)||void 0===c?void 0:c.name)||"-"):l.a.createElement("span",{className:"text-capitalize"},(null===e||void 0===e||null===(i=e.uom)||void 0===i?void 0:i.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,e.price_unit?"$".concat(e.price_unit):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,e.total_price?"$".concat(e.total_price):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,"-")))},e.handleData=Object(Qm.a)($m.a.mark((function a(){var t;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=Object(Ou.a)(e.props.child),e.setState({rows:t,loading:!1});case 2:case"end":return a.stop()}}),a)}))),e.handleAddMore=function(a,t){var n=e.state.rows,l={item_type:"labor_child",id:"child"+t,name:a.name};n.splice(t,0,l),e.setState({rows:n})},e.updateTable=function(){return e.state.rows.map((function(e){return delete e.data,delete e.pricing,Object(wu.a)({},e)})).drawer((function(e){return"add"!==e.type}))},e.renderRow=function(a,t,n){var c,i,r,s,o,m,d,u,p,v;switch(a.type){case Bd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 custom-table-proposal row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.FLEET_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start px-3"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case Wd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.SUPPLY_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start px-3"},l.a.createElement("div",null,"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case"INVENTORY_ITEM":return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(c=a.item)||void 0===c?void 0:c.name:a.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"},(null===a||void 0===a?void 0:a.kit_child)?l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(i=a.kit_uom)||void 0===i?void 0:i.name)||"-"):l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(r=a.uom)||void 0===r?void 0:r.name)||"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")));case"INVENTORY_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",null,"Unit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),a.children.length>0&&a.children.map((function(t,n){var l=a.children.length>n+1;return e.renderRow(t,!0,l)})),null===(s=a.data)||void 0===s||null===(o=s.inventory_package_items)||void 0===o?void 0:o.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",null,"Amount")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null,"$",e.item.unit_cost*e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,e.item.margin||0,"%")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"}))})));case"FLEET_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,qd.title)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5"},l.a.createElement("div",null,"Unit")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},a.price_unit?"$".concat(a.price_unit):"-"),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null,a.total_price?"$".concat(a.total_price):"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))),(null===(m=a.children)||void 0===m?void 0:m.length)>0&&(null===a||void 0===a?void 0:a.children.map((function(t,n){var l,c=(null===(l=a.children)||void 0===l?void 0:l.length)>n+1;return e.handleFleetKit(t,!0,c)}))));case"DISPOSAL":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Disposal")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"VENDOR"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(d=a.facility_id)||void 0===d||null===(u=d.vendor)||void 0===u?void 0:u.name:"WAREHOUSE"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(p=a.facility_id)||void 0===p?void 0:p.internal_location.name:"-")),e.props.view?l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},a.container_quantity?a.container_quantity:"-"):l.a.createElement("div",{className:"custom-table-cell-td background-white-div custom-table-cell-td-4"},l.a.createElement(ap.a,{value:a.container_quantity,onBlur:function(t){var n;return e.handleChangeContainer({cont_qty:t.target.value},a.id,null===(n=e.props.newPricing)||void 0===n?void 0:n.id)}})),e.props.view?l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},a.container_type?a.container_type:"-"):l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4 p-0 bg-white"},l.a.createElement(ku.a,{className:"edit-select-box",suffixIcon:l.a.createElement(wO.a,null),value:a.container_type,onChange:function(t){var n;return e.handleChangeContainer({container:t},a.id,null===(n=e.props.newPricing)||void 0===n?void 0:n.id)}},l.a.createElement(DV,{value:"BA"},"BA"),l.a.createElement(DV,{value:"CF"},"CF"),l.a.createElement(DV,{value:"CM"},"CM"),l.a.createElement(DV,{value:"CW"},"CW"),l.a.createElement(DV,{value:"CY"},"CY"),l.a.createElement(DV,{value:"DF"},"DF"),l.a.createElement(DV,{value:"DM"},"DM"),l.a.createElement(DV,{value:"DT"},"DT"),l.a.createElement(DV,{value:"DW"},"DW"),l.a.createElement(DV,{value:"HG"},"HG"),l.a.createElement(DV,{value:"TC"},"TC"),l.a.createElement(DV,{value:"TP"},"TP"),l.a.createElement(DV,{value:"TT"},"TT"))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty||1))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 px-3 justify-content-start"},l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a||null===(v=a.uom)||void 0===v?void 0:v.name)||"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8 d-flex p-0 justify-content-start"},l.a.createElement("span",{className:"text-capitalize"},(null===a||void 0===a?void 0:a.doc_type)?"BILL_OF_LADING"===(null===a||void 0===a?void 0:a.doc_type)?"Bill of Lading":"NEITHER"===(null===a||void 0===a?void 0:a.doc_type)?"Neither":"Manifest":"-"))));case Ld:return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-2 gray-2-color"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-3"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("span",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-4"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},a.qty))),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-5 justify-content-start"},l.a.createElement("div",{className:"px-3"},"Hours")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-6"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"})),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-7"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-9"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-"))));default:return l.a.createElement(l.a.Fragment,null)}},e.stopEvtBubbling=function(e){e.stopPropagation()},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.newPricing;this.handleData(),this.setState({qty:this.props.newPricing.workorder_qty||1})}},{key:"componentDidUpdate",value:function(e,a,t){var n=this.props.newPricing;e.newPricing.price_per_unit!==n.price_per_unit&&this.formatVal(n.price_per_unit),e.margin!==this.props.margin&&this.handleData(),e.child!==this.props.child&&this.handleData()}},{key:"render",value:function(){var e,a,t,n=this,c=this.props,i=c.newPricing,r=(c.viewProposalTable,c.view),s=c.allOptions,o=(c.foundRegion,c.removeThreeDots),m=null===s||void 0===s?void 0:s.find((function(e){var a,t;return e.id===(null===i||void 0===i||null===(a=i.variant_data)||void 0===a||null===(t=a.pricing_uom)||void 0===t?void 0:t.id)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body p-0"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"custom-table-collapse-main"},l.a.createElement(TV,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"DISPOSAL"===(null===i||void 0===i?void 0:i.resource_type)?"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0 disposal-added":"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td wage-info-collapse-td gray-2-color d-flex align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",src:"INVENTORY_KIT"===(null===i||void 0===i?void 0:i.resource_type)?Rm.inventory_kit_variant:"INVENTORY_ITEM"===(null===i||void 0===i?void 0:i.resource_type)?Rm.inventory_item_variant:"DISPOSAL"===(null===i||void 0===i?void 0:i.resource_type)?Rm.no_disposal_black:"SUPPLY_GROUP"===(null===i||void 0===i?void 0:i.resource_type)?Rm.supply_icon_black:Rm.line_item_black,className:"img-fluid mr-2"}),"INVENTORY_KIT"===(null===i||void 0===i?void 0:i.resource_type)||"INVENTORY_ITEM"===(null===i||void 0===i?void 0:i.resource_type)||"DISPOSAL"==(null===i||void 0===i?void 0:i.resource_type)||"SUPPLY_GROUP"===(null===i||void 0===i?void 0:i.resource_type)?null===i||void 0===i||null===(e=i.resource_id)||void 0===e?void 0:e.name:(null===i||void 0===i||null===(a=i.variant_data)||void 0===a?void 0:a.display_name)?null===i||void 0===i||null===(t=i.variant_data)||void 0===t?void 0:t.display_name:"-"),!o&&l.a.createElement(xu.a,{overlay:this.menu,trigger:["click"]},l.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{alt:"remove-icon",src:Rm.black_dots_elipsis,className:"img-fluid"})))),"DISPOSAL"===(null===i||void 0===i?void 0:i.resource_type)&&l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0",onClick:this.stopEvtBubbling},r?l.a.createElement("span",null,parseInt(null===i||void 0===i?void 0:i.container_quantity)):l.a.createElement(ap.a,{value:null===i||void 0===i?void 0:i.container_quantity,onBlur:function(e){n.props.handleChangeContainer({container_quantity:e.target.value},i.id)}})),"DISPOSAL"===(null===i||void 0===i?void 0:i.resource_type)&&l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0",onClick:this.stopEvtBubbling},r?l.a.createElement("span",null,null===i||void 0===i?void 0:i.container_type):l.a.createElement(ku.a,{className:"edit-select-box w-100 bg-white",suffixIcon:l.a.createElement(wO.a,null),value:i.container_type,onChange:function(e){var a;return n.props.handleChangeContainer({container_type:e},null===(a=n.props.newPricing)||void 0===a?void 0:a.id)}},l.a.createElement(DV,{value:"BA"},"BA"),l.a.createElement(DV,{value:"CF"},"CF"),l.a.createElement(DV,{value:"CM"},"CM"),l.a.createElement(DV,{value:"CW"},"CW"),l.a.createElement(DV,{value:"CY"},"CY"),l.a.createElement(DV,{value:"DF"},"DF"),l.a.createElement(DV,{value:"DM"},"DM"),l.a.createElement(DV,{value:"DT"},"DT"),l.a.createElement(DV,{value:"DW"},"DW"),l.a.createElement(DV,{value:"HG"},"HG"),l.a.createElement(DV,{value:"TC"},"TC"),l.a.createElement(DV,{value:"TP"},"TP"),l.a.createElement(DV,{value:"TT"},"TT"))),l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0",onClick:this.stopEvtBubbling},r?l.a.createElement("span",null,parseInt(null===i||void 0===i?void 0:i.workorder_qty)||"1"):l.a.createElement(ap.a,{value:(null===i||void 0===i?void 0:i.workorder_qty)||1,onBlur:function(e){n.props.handleQuantitySelectChange(e.target.value,i.id)}})),l.a.createElement("div",{className:"custom-table-cell-td p-0 gray-2-color d-flex justify-content-center",onClick:this.stopEvtBubbling},l.a.createElement("span",{className:"d-inline-block w-100 px-3"},"DISPOSAL"===(null===i||void 0===i?void 0:i.resource_type)?null===i||void 0===i?void 0:i.disposal_unit_id:"UOM"==i.selected_unit?"".concat(null===m||void 0===m?void 0:m.name," (").concat(null===m||void 0===m?void 0:m.symbol,")"):"HOURS"==i.selected_unit?"Hours (hrs)":"Day (d)"),l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"custom-table-cell-td p-0 gray-2-color d-flex justify-content-center"},l.a.createElement("span",{className:"d-inline-block w-100 px-3"},"$ ".concat(gd(i.price_per_unit)))),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color pl-0 text-center",onClick:this.stopEvtBubbling},l.a.createElement(UD.a,{defaultChecked:!1,checked:null===i||void 0===i?void 0:i.taxable})),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color pl-0 text-center",onClick:this.stopEvtBubbling},l.a.createElement(UD.a,{checked:null===i||void 0===i?void 0:i.include_subtotal,defaultChecked:!0})),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3",onClick:this.stopEvtBubbling},l.a.createElement("div",{className:"d-inline-block w-100"},"$ ".concat(gd(null===i||void 0===i?void 0:i.total_price)))),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"},(null===i||void 0===i?void 0:i.document_type)?"BILL_OF_LADING"===(null===i||void 0===i?void 0:i.document_type)?"Bill of Lading":"NEITHER"===(null===i||void 0===i?void 0:i.document_type)?"Neither":"Manifest":"-"))),key:"1"},this.state.rows.map((function(e,a){var t={};if(e.kit){var l,c=n.state.rows.length>a+1;return t={id:e.id,item:e.item,qty:e.quantity,kit_uom:null===(l=e.kit)||void 0===l?void 0:l.unit,type:"INVENTORY_ITEM",kit_child:!0},n.renderRow(t,!0,c)}return n.renderRow(e)}))))))}}]),t}(n.Component),MV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cu.a,{title:!1,visible:this.props.visible,centered:!0,className:"confirmation-popup-modal warning-modal",footer:l.a.createElement("div",null,l.a.createElement(Vm.a,{className:"ant-btn ant-btn-primary w-100",onClick:this.props.onClose},this.props.footerText||"Close"))},l.a.createElement("div",{className:"row mx-0 confirm-modal-row warning-modal-row service-modal"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.warning_icon,alt:"",className:"img-fluid"}),l.a.createElement("h5",null,this.props.heading),l.a.createElement("p",null,this.props.subHeading)))))}}]),t}(n.Component),FV=Object(r.withRouter)(MV),PV=ku.a.Option,VV={labelCol:{span:24},wrapperCol:{span:24}},qV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={showResourceModel:!1,lineItems:[],otherItems:[],fetching:!1,value:1,pricing:[],data:[],selectedType:null,searchValue:null,loading:!0,newPricing:[],kit_items:[],allOptions:[],costSetting:null,pricePreTax:0,selectedUom:null,id:null,units:1,taxBasisOptions:[],warningVisible:!1,removableId:null,modalVisible:!1,totalCount:0,page:1,search:"",filterObj:null,varientModalVisible:!1,itemModalVisible:!1,kitModalVisible:!1},e.formRef=l.a.createRef(),e.fetchLineItems=function(){e.setState({fetching:!0}),aV({workorder:e.props.workOrder.id}).then((function(a){e.setState({lineItems:a.data,fetching:!1})})).catch((function(e){td(e)}))},e.handleSelect=function(a){var t,n=null===(t=e.state.newPricing)||void 0===t?void 0:t.find((function(e){return e.id==a})),l=e.state.lineItems.find((function(e){return e.id===a}));if(n)Mm.b.error("You can not add same item again");else{var c=e.props.workOrder,i={variant:a,workorder:null===c||void 0===c?void 0:c.id};l.type&&("variant"===l.type?e.handleVarientModal(!0,i):"item"===l.type?e.handleItemModal(!0,i):e.handleKitModal(!0,i))}e.formRef.current.setFieldsValue({line_item:null})},e.handleWorkOrderServiceVarient=function(a){nV(a).then((function(a){e.getSelectedServiceVariants(!0),e.fetchLineItems()})).catch((function(e){td(e)}))},e.getSelectedServiceVariants=function(a,t){var n=e.props,l=n.workOrder,c=n.fetchWorkOrder;tV({workorder:(null===l||void 0===l?void 0:l.id)||e.props.match.params.id}).then(function(){var t=Object(Qm.a)($m.a.mark((function t(n){return $m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({newPricing:n.data},(function(){a&&c(null===l||void 0===l?void 0:l.id)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){td(e)}))},e.handleSubmit=function(a,t){var n,l=[],c=[],i=document.getElementById("descriptionAdd"),r=document.getElementById("instruction");(console.log(i,r,"description"),i.childNodes.length>0&&i.childNodes.forEach((function(e){l.push(e.innerHTML)})),r.childNodes.length>0&&r.childNodes.forEach((function(e){c.push(e.innerHTML)})),t)||(a.special_instruction=null===c||void 0===c?void 0:c.join("^"),a.additional_description=null===l||void 0===l?void 0:l.join("^"),a.tax_basis=null===(n=a.tax_basis)||void 0===n?void 0:n.value,a.project_uom=e.state.projectUom,a.total_units=e.state.units,a.estimated_total_price_pre_tax=e.state.pricePreTax||0);DP(e.props.workOrder.id,a).then((function(a){e.props.setWorkOrder(a.data,6),t||Mm.b.success("Work Order Updated ")})).catch((function(e){td(e)}))},e.handleResourceModel=function(a,t){e.setState({resourceModelItem:a,showResourceModel:t})},e.handleChange=function(a){e.setState({projectUom:a})},e.handleUnitSelectChange=function(a,t){e.state.newPricing.find((function(e){return e.id===t})).edited||e.setState({unitModalVisible:!0});var n={selected_unit:a};e.handleUpdateVariantRow(n,t)},e.handleVarientModal=function(a,t){e.setState({varientModalVisible:a,varientData:t})},e.handleItemModal=function(a,t){e.setState({itemModalVisible:a,itemData:t})},e.handleKitModal=function(a,t){e.setState({kitModalVisible:a,kitData:t})},e.handleQuantitySelectChange=function(a,t){var n;n={workorder_qty:a},e.handleUpdateVariantRow(n,t)},e.handleChangeContainer=function(a,t){var n={};n=a.container_type?{container_type:a.container_type}:{container_quantity:a.container_quantity},e.handleUpdateVariantRow(n,t)},e.handleUpdateVariantRow=function(a,t){cV(a,t).then((function(){var a;e.getSelectedServiceVariants(),e.props.fetchWorkOrder(null===(a=e.props.workOrder)||void 0===a?void 0:a.id)})).catch((function(e){td(e)}))},e.handleCheckBox=function(a,t,n){var l={};"TAX"===n?(e.setState({taxVisible:a,modalVisible:!0,taxCheckBox:!0}),l.taxable=a):(e.setState({subtotalVisible:a,modalVisible:!0,taxCheckBox:!1}),l.include_subtotal=a),e.handleUpdateVariantRow(l,t)},e.closeViewModal=function(){e.setState({modalVisible:!1})},e.deleteServiceVariant=function(){iV(e.state.removableId).then((function(){e.fetchLineItems(),e.getSelectedServiceVariants(!0)})).catch((function(e){td(e)}))},e.handleRemoveWarning=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeWarningVisible:a,removableId:t})},e.handleFilterDrawer=function(a){e.setState({visibleFilter:a})},e.setFilterObj=function(a){var t=!0;t=!!(a.daily_high||a.daily_low||a.family||a.hourly_high||a.hourly_low||a.region||a.service||a.unit||a.tier||a.unit_high||a.unit_low||a.variant),e.setState({filterObj:a,page:1,autoOpen:!0,filterApplied:t},(function(){e.fetchLineItems({isSearched:!0})}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Qm.a)($m.a.mark((function e(){var a,t,n,l,c;return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.props.workOrder,e.next=3,this.formRef.current.setFieldsValue({cost_setting:(null===c||void 0===c?void 0:c.cost_setting)||"STANDARD",payment_terms:(null===c||void 0===c?void 0:c.payment_terms)||"30_DAYS",deposit:(null===c||void 0===c?void 0:c.deposit)||null,tax_basis:{label:null===c||void 0===c||null===(a=c.tax_basis)||void 0===a?void 0:a.name,value:null===c||void 0===c||null===(t=c.tax_basis)||void 0===t?void 0:t.id,key:null===c||void 0===c||null===(n=c.tax_basis)||void 0===n?void 0:n.id},additional_description:(null===c||void 0===c?void 0:c.additional_description)?c.additional_description.split("^"):null,special_instruction:(null===c||void 0===c?void 0:c.special_instruction)?c.special_instruction.split("^"):null});case 3:this.setState({loading:!1,costSetting:null===c||void 0===c?void 0:c.cost_setting,units:null===c||void 0===c?void 0:c.total_units,projectUom:null===c||void 0===c||null===(l=c.project_uom)||void 0===l?void 0:l.id,pricePreTax:(null===c||void 0===c?void 0:c.estimated_total_price_pre_tax)?null===c||void 0===c?void 0:c.estimated_total_price_pre_tax:null===c||void 0===c?void 0:c.estimated_total_price_pre}),this.getSelectedServiceVariants();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c=this.props.workOrder;e.workOrder!=c&&this.formRef.current.setFieldsValue({additional_description:(null===c||void 0===c?void 0:c.additional_description)?c.additional_description.split("^"):null,special_instruction:(null===c||void 0===c?void 0:c.special_instruction)?c.special_instruction.split("^"):null,cost_setting:(null===c||void 0===c?void 0:c.cost_setting)||"STANDARD",payment_terms:(null===c||void 0===c?void 0:c.payment_terms)||"30_DAYS",deposit:(null===c||void 0===c?void 0:c.deposit)||void 0,tax_basis:{label:null===c||void 0===c||null===(t=c.tax_basis)||void 0===t?void 0:t.name,value:null===c||void 0===c||null===(n=c.tax_basis)||void 0===n?void 0:n.id,key:null===c||void 0===c||null===(l=c.tax_basis)||void 0===l?void 0:l.id}})}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.fetching,c=t.allOptions,i=t.projectUom,r=t.lineItems,s=(c.find((function(e){return e.id===i})),this.props);s.workOrder,s.regions;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row common-form-card-row-line-items mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},VV,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row line-items-inner-row-pd"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please notice that a work order cannot last for more than 1 day."))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"line_item",label:"Service Variants *",rules:[{required:!1,message:"this field is required"}],className:"position-relative ant-select-single-placeholder"},l.a.createElement(ku.a,{multiple:!0,dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed select-paddingLFT-0",placeholder:"Search Service Variants",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No service variant",filterOption:!1,showSearch:!0,onFocus:function(){return a.fetchLineItems()},onChange:this.handleSelect,optionLabelProp:"label"},r.map((function(e,a){return l.a.createElement(l.a.Fragment,null,"variant"===e.type&&l.a.createElement(PV,{label:e.name,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(87% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},"".concat(null===e||void 0===e?void 0:e.service_name," ").concat(e.region_name&&"/"," ").concat(e.region_name||""," - ").concat(null===e||void 0===e?void 0:e.variant_name))),e.breadcrumb&&l.a.createElement("div",{className:"col-12"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_right_search_select_small,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,null,e)})),l.a.createElement(Su.a.Item,null,e.service_name,"/",e.region_name,"-",null===e||void 0===e?void 0:e.variant_name))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"col-12 vc-select-display-name"},l.a.createElement("span",{className:"display-data"},"Display Name:".concat(e.display_name))))),e.labor_groups.length>0&&l.a.createElement("div",{className:"col-12 proposal-labor"},l.a.createElement("img",{src:Rm.labor_gray_icon,alt:"",className:"labor-grp-icon"}),l.a.createElement("span",{className:"ml-1 labor-groups"},e.labor_groups.join(", "))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Service Varient"))),"item"===e.type&&l.a.createElement(PV,{label:e.name,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0 align-items-center"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.inventory_sub_tier_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.item_name)),e.breadcrumb&&l.a.createElement("div",{className:"col-12"},l.a.createElement(Su.a,{separator:l.a.createElement("img",{src:Rm.arrow_right_search_select_small,alt:"",className:"img-fluid"})},e.breadcrumb.map((function(e){return l.a.createElement(Su.a.Item,null,e)})),l.a.createElement(Su.a.Item,null,e.item_name)))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Inventory Item"))),"kit"===e.type&&l.a.createElement(PV,{label:e.name,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.inventory_kit_sub_tier_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.kit_name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Inventory kit"))),"disposal"===e.type&&l.a.createElement(PV,{label:e.name,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.disposal,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"disposal"))),"supply"===e.type&&l.a.createElement(PV,{label:e.name,value:e.id},l.a.createElement("div",{className:"row mx-0 vc-tr-select-option-row align-items-start border-0"},l.a.createElement("div",{style:{width:"87%"},className:"d-flex align-items-center"},l.a.createElement("div",{style:{width:"38px"},className:"vc-select-option-img float-left"},l.a.createElement("img",{src:Rm.supply_group_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{style:{width:"calc(100% - 38px)"},className:"vc-select-option-data float-left"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},e.supply_name))))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"supply"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"col-6"})),l.a.createElement("div",{className:"col-12"},this.state.newPricing.length>0?l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table service-v-update"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Cont Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Container")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Taxable")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Include",l.a.createElement("br",null),"In Subtotal")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Total Price")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Document"))),l.a.createElement("div",{className:"row"},null===(e=this.state.newPricing)||void 0===e?void 0:e.map((function(e){var t,n;return l.a.createElement(RV,{key:e.id,child:(null===e||void 0===e||null===(t=e.variant_data)||void 0===t?void 0:t.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===e||void 0===e||null===(n=e.variant_data)||void 0===n?void 0:n.region,modalVisible:a.state.modalVisible,taxVisible:a.state.taxVisible,subtotalVisible:a.state.subtotalVisible,taxCheckBox:a.state.taxCheckBox,handlePriceUnit:a.handlePriceUnit,handleServiceModal:a.handleServiceModal,serviceModalVisible:a.state.serviceModalVisible,handleChangeContainer:a.handleChangeContainer,closeViewModal:a.closeViewModal,fetchworkorder:a.props.fetchWorkOrder,getSelectedServiceVariants:a.getSelectedServiceVariants,workorder:a.props.workOrder,manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),margin:null===e||void 0===e?void 0:e.margin,allOptions:c,handleUnitSelectChange:function(e,t){return a.handleUnitSelectChange(e,t)},handleQuantitySelectChange:function(e,t){return a.handleQuantitySelectChange(e,t)},handlePricePerUnitChange:function(e,t){a.handlePricePerUnitChange(e,t)},handleCheckBox:function(e,t,n){return a.handleCheckBox(e,t,n)},handleRemoveWarning:a.handleRemoveWarning,newPricing:e,view:!1})}))))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Service Variants")))))),!this.state.loading&&l.a.createElement("div",{className:"col-12 px-md-4 px-sm-3"},l.a.createElement("div",{className:"row mx-0 px-md-2 px-sm-2 py-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"additional_description",label:"Additional Description of Materials Listed Above",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(HD,{id:"descriptionAdd"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"special_instruction",label:"Special Handling Instructions and Additional Information",rules:[{required:!1,message:""}],className:"position-relative"},l.a.createElement(HD,{id:"instruction"}))))),l.a.createElement("div",{className:"col-12 validate-div-col validate-div-col-line-items text-md-right"},l.a.createElement(Vm.a,{onClick:function(){return a.formRef.current.submit()},className:"validate-btn-main"},"Save and Continue"))))),l.a.createElement(iv,{common:!0,visible:this.state.removeWarningVisible,onClose:function(){a.setState({removableId:null,removeWarningVisible:!1})},serviceVariantWarning:!0,commonFunc:function(){a.deleteServiceVariant(),a.handleRemoveWarning(!1)},heading:"Are you sure you want to remove this?",subHeadingUOM:" "}),l.a.createElement(FV,{footerText:"Okay",visible:this.state.varientModalVisible,onClose:function(){a.handleWorkOrderServiceVarient(a.state.varientData),a.handleVarientModal(!1)},heading:"Please review the quantity for this service variant.",subHeading:"The quantity defaults to this service variant\u2019s quantity within the project. To avoid issues, please make sure that if your service variant has a UOM of Day, the quantity is not more than 1."}),l.a.createElement(FV,{footerText:"Okay",visible:this.state.itemModalVisible,onClose:function(){a.handleWorkOrderServiceVarient(a.state.itemData),a.handleItemModal(!1)},heading:"Please review the quantity for this inventory item.",subHeading:"The quantity defaults to this inventory item\u2019s quantity within the project."}),l.a.createElement(FV,{footerText:"Okay",visible:this.state.kitModalVisible,onClose:function(){a.handleWorkOrderServiceVarient(a.state.kitData),a.handleKitModal(!1)},heading:"Please review the quantity for this inventory kit.",subHeading:"The quantity defaults to this inventory kit\u2019s quantity within the project."}),l.a.createElement(lb,{visible:this.state.visibleFilter,onClose:function(){return a.handleFilterDrawer(!1)},setFilterObj:this.setFilterObj}))}}]),t}(n.Component),LV=Object(r.withRouter)(qV),UV={labelCol:{span:24},wrapperCol:{span:24}},BV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))},sorter:!0},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){FP({workorder:e.props.workOrder.id}).then((function(a){var t=Object(wu.a)(Object(wu.a)({},e.props.workOrder),{},{documents:a.data.results});e.props.setWorkOrder(t),e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("work_order",e.props.workOrder.id),n.append("document",t),MP(n).then((function(a){e.props.fetchWorkOrder(a.data.work_order),e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id,this.fetchFiles()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please attach any documents for this disposal."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},UV,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.state.files.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.columns,dataSource:this.state.files,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),WV=Object(r.withRouter)(BV),YV=ku.a.Option,KV={labelCol:{span:24},wrapperCol:{span:24}},GV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:null,buttonLoading:!1,visibleConfirm:!1,county:[],updateMainState:null},e.formRef=l.a.createRef(),e.showConfirmModal=function(a){e.setState({visibleConfirm:a}),e.setState({data:null})},e.onSubmit=function(a){nv(Object(wu.a)(Object(wu.a)({},a),{},{type:"INVENTORY"})).then((function(a){Mm.b.success("Warehouse Created Successfully"),e.props.callbackContact(a.data,!0),e.props.showFacility(!1)})).catch((function(e){td(e)}))},e.populateData=function(){var a;e.props.editData?e.formRef.current.setFieldsValue(Object(wu.a)({},e.props.editData)):(null===(a=e.formRef)||void 0===a?void 0:a.current)&&e.formRef.current.setFieldsValue({country:"United States"})},e.handleCountyChange=function(a){e.formRef.current.setFieldsValue({state:null});var t=e.state.county.filter((function(e){return e.county===a}));e.setState({updateMainState:t}),1===(null===t||void 0===t?void 0:t.length)&&e.formRef.current.setFieldsValue({state:t[0].state})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qu({ordering:"county"}).then((function(a){e.setState({county:a.data}),e.setState({updateMainState:a.data})})).catch((function(a){td(a),e.setState({load:!1})}))}},{key:"render",value:function(){var e=this,a=(this.props.editData,this.state),t=a.county,n=a.updateMainState;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,closable:!0,destroyOnClose:!0,title:"Create Warehouse / Dispatch Origin",visible:this.props.visible,onClose:this.props.onClose,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){e.formRef.current.submit()},type:"primary"},"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.onSubmit,ref:this.formRef},KV,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Location Name *")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Location Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"epa_id",label:"EPA ID",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{placeholder:"ABC123456789"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"street_address",label:"Street Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Street Address"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"county",label:"County",rules:[{required:!1,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),onChange:this.handleCountyChange,placeholder:"Select"},Object(lp.uniqBy)(t,"county").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.county},e.county)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"city",label:"City *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"City"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"state",label:"State/Province *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{showSearch:!0,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select"},Object(lp.uniqBy)(Object(lp.orderBy)(n,"state"),"state").map((function(e){return l.a.createElement(ku.a.Option,{key:e.id,value:e.state},e.state)}))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"zip",label:"ZIP/Postal Code *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"ZIP/Postal Code"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"country",label:"Country *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Select Country",suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},np.map((function(e){return l.a.createElement(YV,{value:e.name},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"phone",label:"Phone Number *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ap.a,{formatter:function(e){return"".concat(e).match(/\d*/g).join("").match(/(\d{0,3})(\d{0,3})(\d{0,4})/).slice(1).join("-").replace(/-*$/g,"")},maxLength:12,parser:function(e){return e.replace(/\$\s?|(-*)/g,"")},placeholder:"123-456-7890"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"email",label:"Email Address *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{type:"email",placeholder:"Email Address"})))))))),l.a.createElement(mh,{heading:"You\u2019ve successfully created this Warehouses!",subHeading:l.a.createElement("p",{className:"mb-0"},"To view this Warehouses, select View Facility"),okTitle:"View Warehouses",okAction:function(){e.showConfirmModal(!1),e.props.onClose()},visible:this.state.visibleConfirm,onClose:function(){e.showConfirmModal(!1),e.props.onClose()}}))}}]),t}(n.Component),zV=Object(r.withRouter)(GV),HV={labelCol:{span:24},wrapperCol:{span:24}},$V=ku.a.Option,QV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={warehouse:[],fetching:!0,visible:!1},e.formRef=l.a.createRef(),e.fetchWarehouse=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tg(a).then((function(a){e.setState({warehouse:a.data.results,fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.getWorkOrderLocation=function(){var a,t,n;XP({work_order:(null===(a=e.props.match)||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id)||(null===(n=e.props.workOrder)||void 0===n?void 0:n.id)}).then((function(a){e.setState({fetching:!1})})).catch((function(a){td(a),e.setState({fetching:!1})}))},e.handleDeleteWarehouse=function(a){eV(a).then((function(){e.getWorkOrderLocation(),e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.callbackContact=function(a){ZP({warehouse:a.id,work_order:e.props.workOrder.id}).then((function(a){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.handleSubmit=function(){e.props.setWorkOrder(e.props.workOrder,4),Mm.b.success("Warehouse updated successfully!")},e.handleSelect=function(a){e.formRef.current.setFieldsValue({warehouse:null}),ZP({work_order:e.props.workOrder.id,warehouse:a.value}).then((function(a){e.props.fetchWorkOrder(e.props.workOrder.id)}))},e.showFacility=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t;((null===(e=this.props.match)||void 0===e||null===(a=e.params)||void 0===a?void 0:a.id)||(null===(t=this.props.workOrder)||void 0===t?void 0:t.id))&&this.getWorkOrderLocation()}},{key:"componentDidUpdate",value:function(e,a){e.workOrder!=this.props.workOrder&&this.getWorkOrderLocation()}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.state,r=(i.newWarehouse,i.fetching),s=(null===(e=this.props.workOrder)||void 0===e||null===(a=e.workorder_warehouse[0])||void 0===a?void 0:a.warehouse)||[],o=(null===(t=this.props.workOrder)||void 0===t?void 0:t.workorder_warehouse)||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose warehouse/ Dispatch Origin"))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},HV,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{dropdownClassName:"option-design-fix",name:"warehouse",label:"Warehouse *",rules:[{required:0==o.length,message:"Please select at Warehouse"}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,notFoundContent:r?l.a.createElement(Wv.a,{size:"small"}):null,className:"search-and-select-tag",showSearch:!0,disabled:o.length>0,onFocus:function(){return c.fetchWarehouse()},onSearch:function(e){return c.fetchWarehouse({search:e})},onChange:this.handleSelect,placeholder:"Search",filterOption:!1,removeIcon:""},null===(n=this.state.warehouse)||void 0===n?void 0:n.map((function(e){return l.a.createElement($V,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row custom-tree-row-1"},l.a.createElement("div",{className:"common-select-option-row col-12 d-flex align-items-center"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block ml-1"},e.name),l.a.createElement("p",{style:{color:"#BDBDBD",fontSize:"11px"},className:"mb-0"},e.street_address||"",", ",e.city||"",","," ",e.state||"",",",e.zip||""," ",e.country||"")),l.a.createElement("div",{style:{display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Warehouse"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:25}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{disabled:o.length>0,className:"create-btn-main position-absolute text-capitalize",onClick:function(){return c.showFacility(!0)}},"+ Create")),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row mx-0"},o.length?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card mb-2 position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("h6",{style:{fontSize:"15px",color:"#4f4f4f",fontWeight:"500"},className:"text-capitalize mb-0"},s.name)))),l.a.createElement("div",{className:"col-12 col-sm-9 px-3 pt-2 pb-4"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},(null===s||void 0===s?void 0:s.street_address)||""," ",(null===s||void 0===s?void 0:s.apartment)||""," ",(null===s||void 0===s?void 0:s.city)||"",","," ",(null===s||void 0===s?void 0:s.state)||""," ",(null===s||void 0===s?void 0:s.zip_code)||""," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},s.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},s.phone)),l.a.createElement("div",{className:"col-12 col-sm-1 position-relative"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){o.length&&c.handleDeleteWarehouse(o[0].id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{style:{width:"20px"},className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"location-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No warehouses"))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(zV,{callbackContact:this.callbackContact,fetchContacts:this.fetchContacts,visible:this.state.visible,showFacility:this.showFacility,onClose:function(e){return c.showFacility(!1,e)}}))}}]),t}(n.Component),JV=fu.a.Panel,ZV=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={workOrder:null,activeKey:["1"],requiredSuccessModalVisible:!1,visibleConfirm:!1,warningModalVisible:!1,workorderComplete:!1,unsavedExit:!1},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.setWorkOrder=function(a,t){a.workorder_warehouse.length&&a.work_owner_contact.length&&a.work_customer_contact.length&&a.service_date&&a.start_time&&a.status&&a.workorder_variant.length?e.setState({workorderComplete:!0,unsavedExit:!1}):e.setState({unsavedExit:!0});var n=null;e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n?e.setState({workOrder:a}):e.setState((function(e){return{workOrder:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.fetchWorkOrder=function(a){TP(e.props.match.params.id?e.props.match.params.id:a).then((function(a){e.setState({workOrder:a.data},(function(){console.log(e.state.workOrder,"workorder response")}))})).catch((function(e){td(e)}))},e.handleViewMainButtonCLick=function(){e.state.workOrder;e.showConfirmModal(!0)},e.handleDocumentPdf=function(){rV({workorder:e.state.workOrder.id}).then((function(e){console.log(e,"response")}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.match.params.id?(this.fetchWorkOrder(),e=[{title:"Edit Work Order",url:""}],this.setState({activeKey:this.props.location.editTab||"1"})):e=[{title:"Create Work Order",url:""}],this.props.setBreadcrumb(e)}},{key:"render",value:function(){var e,a,t,n,c,i,r=this,s=this.state,m=s.workOrder,d=s.activeKey,u=(s.regions,s.workorderComplete),p=this.props.location.pathname.includes("create");return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{onChange:this.collapseOnChange,defaultActiveKey:["1"],activeKey:d,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(JV,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(NV,{workOrder:m,setWorkOrder:this.setWorkOrder})),l.a.createElement(JV,{disabled:!m,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Service Information ",l.a.createElement("sup",null,"*")),(this.state.required||(null===(e=this.props.match.params)||void 0===e?void 0:e.id))&&ou(m,"SERVICE_INFO")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"2"},l.a.createElement(xV,{workOrder:m,setWorkOrder:this.setWorkOrder})),l.a.createElement(JV,{disabled:!m,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Warehouse / Dispatch Origin ",l.a.createElement("sup",null,"*")),(this.state.required||(null===(a=this.props.match.params)||void 0===a?void 0:a.id))&&ou(m,"WAREHOUSE")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"3"},l.a.createElement(QV,{workOrder:m,fetchWorkOrder:this.fetchWorkOrder,setWorkOrder:this.setWorkOrder})),l.a.createElement(JV,{disabled:!m,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Billing Account *"),(this.state.required||(null===(t=this.props.match.params)||void 0===t?void 0:t.id))&&ou(m,"CUSTOMER")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"4"},l.a.createElement(kV,{workOrder:m,fetchWorkOrder:this.fetchWorkOrder,setWorkOrder:this.setWorkOrder})),l.a.createElement(JV,{disabled:!m,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Site Manager Account *"),(this.state.required||(null===(n=this.props.match.params)||void 0===n?void 0:n.id))&&ou(m,"OWNER")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"5"},l.a.createElement(AV,{workOrder:m,fetchWorkOrder:this.fetchWorkOrder,setWorkOrder:this.setWorkOrder})),l.a.createElement(JV,{disabled:!m,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Service Variants ",l.a.createElement("sup",null,"*")),(this.state.required||(null===(c=this.props.match.params)||void 0===c?void 0:c.id))&&ou(m,"SERVICE_VARIENT")&&l.a.createElement("p",{className:"mb-0 info-signifire"},"Please complete required information to avoid issues"))),key:"6"},l.a.createElement(LV,{workOrder:m,fetchWorkOrder:this.fetchWorkOrder,setWorkOrder:this.setWorkOrder})),l.a.createElement(JV,{disabled:!m,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"7"},l.a.createElement(WV,{workOrder:m,fetchWorkOrder:this.fetchWorkOrder,setWorkOrder:this.setWorkOrder}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return r.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{style:p?{width:"37%"}:{width:"39%"},onClick:function(){r.state.unsavedExit?r.showConfirmModal(!0):r.handleViewMainButtonCLick()},disabled:!u&&!this.props.match.params.id,type:"primary"},(null===(i=this.props.location.pathname)||void 0===i?void 0:i.includes("create"))?"Create Work Order":"View Work Order and Generate PDF"))))))),l.a.createElement(mh,{heading:this.props.match.params.id?"You\u2019ve successfully updated this Work Order!":"Work Order Created Successfully!",subHeading:l.a.createElement("p",{className:"mb-0"},"Work Order PDF and Manifest/Bill of Lading (if any) have been generated To view this Work Order, select \xa0",l.a.createElement(Vm.a,{onClick:function(){o.push(Object(Gm.reverse)(zm.dashboard.operations.work_order.view,{id:m.id}))},className:"border-0 bg-transparent shadow-none p-0"},"View Work Order.")),visible:this.state.visibleConfirm,okAction:function(){r.handleDocumentPdf(),o.push(Object(Gm.reverse)(zm.dashboard.operations.work_order.view,{id:m.id}))},okTitle:"View  Work Order",onClose:function(){return r.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:"Are you sure you want to exit ".concat(this.props.match.params.id?"editing":"creating"," this Work Order?"),visible:this.state.warningModalVisible,onClose:function(){return r.showWarningModal(!1)}}))}}]),t}(n.Component),XV=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(ZV)),eq=ku.a.Option,aq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).handlePdf=function(){e.props.onTabChange("7")},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this.props,n=t.workOrder;t.statusTypes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle border-top-1 border-bottom-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Associated project"),l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.folder_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,null===n||void 0===n?void 0:n.project.name),l.a.createElement("p",{className:"mb-0"},null===n||void 0===n||null===(e=n.project)||void 0===e||null===(a=e.status)||void 0===a?void 0:a.title))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Actions"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(ku.a,{dropdownClassName:"pdf-select-view",suffixIcon:l.a.createElement(wO.a,null),className:"select-pdf-options",placeholder:"Select",defaultValue:"select",onChange:this.handlePdf},l.a.createElement(eq,{value:"view_pdf"},"View Work Order PDFs",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD"}},"View work order,manifest,or BOL PDFs and other ",l.a.createElement("br",null),"documents uploaded to this workorder"))),l.a.createElement("span",{className:"pdf-icon-tg position-absolute"},l.a.createElement("img",{alt:"",src:Rm.pdf_icon_light_green,className:"img-fluid"})))))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-bottom-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Work order ID"),l.a.createElement("h5",{className:"mb-0"},null===n||void 0===n?void 0:n.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"STATUS"),l.a.createElement(ku.a,{labelInValue:!0,className:"status-small-select",placeholder:"SERVICE_REQUEST"===(null===n||void 0===n?void 0:n.status)?"Service Request":"IN_QUEUE"===(null===n||void 0===n?void 0:n.status)?"Scheduled/In Queue":"COMPLETED_WORK_ORDER"===(null===n||void 0===n?void 0:n.status)?"Completed Work Order":null===n||void 0===n?void 0:n.status,style:{width:"100%",textAlign:"center"},onChange:this.props.handleChange,suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:"SERVICE_REQUEST"},"Service Request"),l.a.createElement("option",{value:"IN_QUEUE"},"Scheduled/In Queue"),l.a.createElement("option",{value:"RESCHEDULED"},"Need to be Rescheduled"),l.a.createElement("option",{value:"CANCELED"},"Permanently Canceled"),l.a.createElement("option",{value:"COMPLETED"},"Completed")))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Project Created"),l.a.createElement("h5",{className:"mb-0"},Sd(null===n||void 0===n?void 0:n.created)))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"text-uppercase"},"DESCRIPTION"),l.a.createElement("h5",{className:"mb-0"},null===n||void 0===n?void 0:n.description))))))}}]),t}(n.Component),tq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.workOrder;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle border-bottom-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"SERVICE DATE"),l.a.createElement("h5",{className:"mb-0"},(null===e||void 0===e?void 0:e.service_date)?hd()(null===e||void 0===e?void 0:e.service_date).format("MMM DD,YYYY"):"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated start Time"),l.a.createElement("h5",{className:"mb-0"},(null===e||void 0===e?void 0:e.start_time)?hd()(null===e||void 0===e?void 0:e.start_time,"HH:mm").format("HH:mm A"):"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Estimated End Time"),l.a.createElement("h5",{className:"mb-0"},(null===e||void 0===e?void 0:e.end_time)?hd()(null===e||void 0===e?void 0:e.end_time,"HH:mm").format("HH:mm A"):"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Billing Account PO#/Job#"),l.a.createElement("h5",{className:"mb-0"},(null===e||void 0===e?void 0:e.billing_account_po)||"-"))))))}}]),t}(n.Component),nq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,selectedData:null,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}},loading:!1},e.getPostDateColor=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?"gray":n.isSame(a,"day")?"#F2994A":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0:"gray":"gray"},e.getPostDateText=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MM/DD/YYYY"):"No Due Date":"No Due Date"},e.postColumns=[{title:"POST NAME",sorter:!0,render:function(a){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{className:"post-checkbox-opacity",checked:a.completed,onChange:function(){return e.props.changePostStatus(a,!a.completed)},onClick:function(e){return e.stopPropagation()}},a.name))}},{title:"TYPE",dataIndex:"post_type",sorter:!0,render:function(e){return l.a.createElement("div",null,bd(e)||"-")}},{title:"PRIORITY",dataIndex:"priority",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"ASSIGNEE",dataIndex:"assignee",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},(null===e||void 0===e?void 0:e.first_name)?l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name)):" ","".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"-"))}},{title:l.a.createElement("div",{className:"position-relative"},"DUE DATE"),sorter:!0,render:function(a){return l.a.createElement(l.a.Fragment,null,a?l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:e.getPostDateColor(a)}},e.getPostDateText(a)):"-")}}],e}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.posts,t=e.showPost;return l.a.createElement(l.a.Fragment,null,(null===a||void 0===a?void 0:a.length)>0?l.a.createElement("div",{className:"col-12 p-0 table-responsive main-table-div mb-3 post-table"},l.a.createElement(fv.a,{onRow:function(e,a){return{onClick:function(a){t(!0,e)}}},className:"main-table-all",columns:this.postColumns,dataSource:a,size:"middle",rowClassName:function(e){if(e.completed)return"post-opacity"}})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-3 no-data-card-row border-0 bg-transparent align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer",onClick:function(){return t(!0)}},l.a.createElement("img",{src:Rm.note_add_new_create_icon,className:"img-fluid",alt:"search icon"}),l.a.createElement("h6",{className:"mb-0 text-green-tag"},"Create Post")))))}}]),t}(n.Component),lq={labelCol:{span:24},wrapperCol:{span:24}};var cq=Pm.a.TextArea,iq=ku.a.Option,rq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={assignees:[],fetching:!1,selectedData:null,warningVisible:!1},e.formRef=l.a.createRef(),e.handleChange=function(a){e.setState({selectedData:e.state.assignees.find((function(e){return e.id===a}))})},e.showWarningM=function(a){e.setState({warningVisible:a})},e.fetchUser=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ud("salesperson",a).then((function(a){e.setState({assignees:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSubmit=function(a){a.workorder=e.props.match.params.id,a.due_date&&(a.due_date=hd()(a.due_date).format("YYYY-MM-DD")),e.props.data?VP(e.props.data.id,a).then((function(a){Mm.b.success("Post Updated Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):PP(a).then((function(a){Mm.b.success("Post Created Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.populateData=Object(Qm.a)($m.a.mark((function a(){var t;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.props.data){a.next=5;break}return a.next=3,e.fetchUser();case 3:e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.data),{},{assignee:null===(t=e.props.data.assignee)||void 0===t?void 0:t.id,due_date:e.props.data.due_date?hd()(e.props.data.due_date):null})),e.setState({selectedData:e.props.data.assignee});case 5:case"end":return a.stop()}}),a)}))),e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.assignees,c=a.selectedData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,title:"Post",maskClosable:!1,visible:this.props.visible,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",onClose:function(){e.showWarningM(!0)},placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){e.showWarningM(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.formRef.current.submit()},type:"primary"},this.props.data?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},lq,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Post Name*")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Post Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"post_type",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Type"))},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Type"},l.a.createElement(iq,{value:"NOTE"},"Note"),l.a.createElement(iq,{value:"TASK"},"Task")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"assignee",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Assignee")),className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Search Assignee",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchUser()},onSearch:function(a){return e.fetchUser({search:a})},onChange:this.handleChange,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},n.map((function(e){return l.a.createElement(iq,{key:e.id,value:e.id},"".concat(e.first_name," ").concat(e.last_name))}))))),c&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(null===c||void 0===c?void 0:c.first_name,null===c||void 0===c?void 0:c.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(c.first_name," ").concat(c.last_name)),l.a.createElement("p",{className:"mb-0"},c.role.split("_").join(" ")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"due_date",label:"Due Date"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"priority",label:"Priority"},l.a.createElement(ku.a,{placeholder:"Select Priority"},l.a.createElement(iq,{value:"NORMAL"},l.a.createElement("span",{style:{backgroundColor:"#fcd966"},className:"status-tag"}),"Normal"),l.a.createElement(iq,{value:"HIGH"},l.a.createElement("span",{style:{backgroundColor:"#eb8357"},className:"status-tag"}),"High"),l.a.createElement(iq,{value:"LOW"},l.a.createElement("span",{style:{backgroundColor:"#7fd4ba"},className:"status-tag"}),"Low")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Description"))},l.a.createElement(cq,{className:"text-area-main text-area-task",placeholder:"Enter Description"})))))))),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningM(!1)},heading:"Are you sure you want to exit editing this Post?",handlePostDrawer:!0,closePostDrawer:function(){e.props.onClose(),e.formRef.current.resetFields()}}))}}]),t}(n.Component),sq=Object(r.withRouter)(rq),oq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={posts:null,visible:!1,activeKey:"1"},e.showPost=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visible:a,selectedData:t})},e.handleActiveKey=function(){var a=e.state.activeKey;"1"===a?e.getPosts():"2"===a?e.getPosts({type:"NOTE"}):"3"===a?e.getPosts({type:"TASK"}):"4"===a?e.getPosts({type:"CALL_LOG"}):"5"===a?e.getPosts({type:"EMAIL"}):e.getPosts({type:"EVENT"})},e.getPosts=function(){var a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),qP(Object(wu.a)({workorder:null===(a=e.props.workOrder)||void 0===a?void 0:a.id},t)).then((function(a){e.setState({posts:a.data.results,loading:!1})})).catch((function(e){td(e)}))},e.changePostStatus=function(a,t){var n=e.state.posts;VP(a.id,{completed:t}).then((function(l){var c=n.findIndex((function(e){return e.id===a.id}));n[c].completed=t,e.setState({posts:n}),Mm.b.success("Updated post status")})).catch((function(e){td(e)}))},e.onTabChange=function(a){e.setState({activeKey:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"componentDidUpdate",value:function(e,a){this.state.activeKey;a.activeKey!==this.state.activeKey&&this.handleActiveKey()}},{key:"render",value:function(){var e,a=this,t=this.props.viewAll;return l.a.createElement("div",{className:"col-12 ".concat(t?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"row new-opportunity-header-row position-relative summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header border-1 ".concat(this.props.viewAll?"":"border-1")},l.a.createElement("div",{style:{zIndex:"2"},className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:this.onSearch}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement(Vm.a,{onClick:function(){return a.showPost(!0)},className:"add-btn-collapse ml-2 text-capitalize"},"+ Create")),t&&l.a.createElement(Vm.a,{onClick:function(){return a.props.onTabChange("2")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"post-custom-tab"},l.a.createElement(nq,{showPost:this.showPost,getPosts:this.getPosts,posts:null===(e=this.state)||void 0===e?void 0:e.posts,activeKey:this.state.activeKey,changePostStatus:this.changePostStatus}))),l.a.createElement(sq,{data:this.state.selectedData,onSuccess:Object(Qm.a)($m.a.mark((function e(){return $m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.showPost(!1);case 2:return e.next=4,a.getPosts();case 4:case"end":return e.stop()}}),e)}))),visible:this.state.visible,onClose:function(){return a.showPost(!1)}}))}}]),t}(n.Component),mq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={dataActivity:null},e.fetchActivity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),HP(e.props.workOrder.id).then((function(t){e.setState({dataActivity:t.data.data,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.viewAll?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).forEach((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){e.setState({loading:!1})}))},e.activityColumns=[{title:"Date",dataIndex:"date",sorter:!0,render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD, YYYY hh:mm A"))}},{title:"Action",dataIndex:"action",sorter:!0},{title:"EMPLOYEE",dataIndex:"user",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},e.split(" ")[0].split("")[0],e.split(" ")[1].split("")[0]),e)}}],e.activityData=[{key:"1",activity_date:"a",action:"b",employee:"c"}],e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchActivity()}},{key:"render",value:function(){var e=this,a=this.state.dataActivity;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header border-1"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.viewAll&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("3")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",scroll:{y:240},columns:this.activityColumns,dataSource:a,size:"middle"}))))))))}}]),t}(n.Component),dq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.workOrder,a=null===e||void 0===e?void 0:e.workorder_warehouse[0];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row-0 mx-0 summary-collapse-inner-row-main"},a?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card mb-2 position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("h6",{style:{fontSize:"15px",color:"#4f4f4f",fontWeight:"500"},className:"text-capitalize mb-0"},a.warehouse.name)))),l.a.createElement("div",{className:"col-12 col-sm-9 px-3 pt-2 pb-4"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},a.warehouse.street_address||""," ",a.warehouse.apartment||""," ",a.warehouse.city||"",","," ",a.warehouse.state||""," ",a.warehouse.zip_code||""," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},a.warehouse.email)),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},a.warehouse.phone)))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"location-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No warehouses"))))))}}]),t}(n.Component),uq=t(121),pq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.contacts;return l.a.createElement(l.a.Fragment,null,e.length>0?l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"small-heading-contact mb-0"},"Contacts")),e.map((function(e,a){var t,n,c,i,r,s,o;return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2 ".concat(e.default_customer_recipient?"active":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat((null===(t=e.contact)||void 0===t?void 0:t.first_name)||""," ").concat((null===(n=e.contact)||void 0===n?void 0:n.last_name)||""),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},"Role",(null===(c=e.contact)||void 0===c?void 0:c.role)||"")),l.a.createElement("p",{className:"mb-0"},(null===(i=e.contact)||void 0===i?void 0:i.default_email)&&"".concat(null===(r=e.contact.default_email)||void 0===r?void 0:r.email,",")," ",null===(s=e.contact)||void 0===s||null===(o=s.default_phone)||void 0===o?void 0:o.phone_number),e.default_customer_recipient&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Proposal Recipient")))))}))):l.a.createElement("div",{className:"col-12 pt-3"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Contacts")))))}}]),t}(n.Component),vq=fu.a.Panel,hq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:null},e.fetchCustomerAccount=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.workorder=e.props.workOrder.id,LP(a).then((function(a){e.setState({data:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchCustomerAccount()}},{key:"render",value:function(){var e=this,a=this.state.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"sales-site-design-fix no-data-card-row-new billing-account-data")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"mt-30 border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:function(a){return e.fetchSiteOwnerContact({search:a.target.value})}}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("5")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement(l.a.Fragment,null,(null===a||void 0===a?void 0:a.length)>0?l.a.createElement(l.a.Fragment,null,a.map((function(e,a){return l.a.createElement("div",{className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{defaultActiveKey:["1"],className:"site-owner-collapse-main",expandIcon:function(e){var a=e.isActive;return l.a.createElement(uq.a,{rotate:a?90:0})}},l.a.createElement(vq,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative h-auto"},l.a.createElement("div",{className:"col-9 col-sm-9 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Account")))),l.a.createElement("div",{className:"col-3 col-sm-3 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{style:{color:"#4F4F4F"}},e.contact.length,"Contacts"))))),key:"1",forceRender:!0},l.a.createElement(pq,{contacts:e.contact}))))}))):l.a.createElement("div",{className:"col-12 ".concat(this.props.hideTitle?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Billing Accounts"))))))))}}]),t}(n.Component),fq=function(e){var a=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},a.contact.length>0?a.contact.map((function(e,a){var t,n;return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div position-relative"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},"Role",e.role?e.role:"-")),l.a.createElement("p",{className:"mb-0"},e.default_email&&"".concat(null===(t=e.default_email)||void 0===t?void 0:t.email,","),"\xa0 ",null===(n=e.default_phone)||void 0===n?void 0:n.phone_number)))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.contacts_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))),l.a.createElement("div",{className:"row",style:{padding:"16px 0",borderTop:"1px solid #e0e0e0"}},a.site.length>0?a.site.map((function(e,a){var t,n,c,i,r,s,o;return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{minHeight:"100px"},className:"row site-details-row-card site-details-row-card-update position-relative ".concat(e.primary?"active":"")},l.a.createElement("div",{className:"col-12 col-sm-2 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("span",{className:"text-uppercase font-weight-500"},null===(t=e.site)||void 0===t?void 0:t.name)))),l.a.createElement("div",{className:"col-12 col-sm-10 px-3 py-0 position-relative"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===(n=e.site)||void 0===n?void 0:n.apartment," ",null===(c=e.site)||void 0===c?void 0:c.city,","," ",null===(i=e.site)||void 0===i?void 0:i.state," ",null===(r=e.site)||void 0===r?void 0:r.zip_code," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},null===(s=e.site)||void 0===s?void 0:s.email)),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},null===(o=e.site)||void 0===o?void 0:o.phone))),e.primary&&l.a.createElement("small",{style:{right:"15px"},className:"primary-text-right text-capitalize position-absolute"}," primary site"))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid mb-2"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))},Eq=fu.a.Panel,gq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[]},e.fetchSiteOwnerContact=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.workorder=e.props.workOrder.id,zP(a).then((function(a){e.setState({data:a.data.results})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchSiteOwnerContact()}},{key:"render",value:function(){var e=this,a=this.state.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"}),this.props.viewAll&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("4")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),(null===a||void 0===a?void 0:a.length)>0?l.a.createElement(l.a.Fragment,null,a.map((function(e,a){return l.a.createElement("div",{className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],className:"site-owner-collapse-main"},l.a.createElement(Eq,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-8 col-sm-8 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Billing Account")))),l.a.createElement("div",{className:"col-4 col-sm-4 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.contact.length,"Contacts")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.site.length,"Sites"))))),key:"1",forceRender:!0},l.a.createElement(fq,{data:e}))))}))):l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Site Manager Accounts"))))))}}]),t}(n.Component),bq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).getSelectedServiceVariants=function(){var e=n.props.workOrder;tV({workorder:null===e||void 0===e?void 0:e.id}).then((function(e){n.setState({newPricing:e.data})})).catch((function(e){td(e)}))},n.state={allOptions:[],newPricing:[],regions:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getSelectedServiceVariants()}},{key:"render",value:function(){var e,a,t=this,n=this.props,c=n.viewAll,i=n.workOrder,r=this.state,s=r.newPricing;r.regions;return l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"mt-30")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"border-1 d-none")},this.props.viewAll&&l.a.createElement(Vm.a,{onClick:function(){return t.props.onTabChange("6")},className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),s.length>0?l.a.createElement("div",{className:"col-12 mt-3 table-responsive main-table-div position-relative wage-table view-proposal-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table service-v-update"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Cont Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Container")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Taxable")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Include",l.a.createElement("br",null),"In Subtotal")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Total Price")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Document"))),l.a.createElement("div",{className:"row"},null===s||void 0===s?void 0:s.map((function(e){var a,t;return l.a.createElement(RV,{margin:null===e||void 0===e?void 0:e.margin,newPricing:e,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),view:!0,removeThreeDots:!0,foundRegion:null===e||void 0===e||null===(t=e.variant_data)||void 0===t?void 0:t.region})})))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row mx-0 border-0 bg-white no-data-card-row align-items-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-1"},"No Service Variants")))),l.a.createElement("div",{className:"row bullet-point-row ".concat(c?"":"custom-row-space")},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-1"},l.a.createElement("span",{style:{fontSize:"11px"},className:"sub-total-text"},"ADDITIONAL DESCRIPTION OF MATERIALS LISTED ABOVE")),null===i||void 0===i||null===(e=i.additional_description)||void 0===e?void 0:e.split("^").map((function(e){return l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"<br>"!=e?("\u2022 "+e).replace(/\&nbsp;/g,""):""))})))),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-1"},l.a.createElement("span",{className:"sub-total-text",style:{fontSize:"11px"}},"SPECIAL HANDLING INSTRUCTIONS AND ADDITIONAL INFORMATION")),null===i||void 0===i||null===(a=i.special_instruction)||void 0===a?void 0:a.split("^").map((function(e){return l.a.createElement("div",{className:"col-12"},l.a.createElement("span",{className:"sub-total-text gray-1"},"<br>"!=e?"\u2022 "+e.replace(/\&nbsp;/g,""):""))}))))))}}]),t}(n.Component),Nq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.docsColumns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.workorder=(null===(a=e.props.workOrder)||void 0===a?void 0:a.id)||e.props.match.params.id,FP(t).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("work_order",e.props.workOrder.id),n.append("document",t),MP(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c;(null===(t=e.workOrder)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)!=(null===(l=this.props.workOrder)||void 0===l||null===(c=l.documents)||void 0===c?void 0:c.length)&&this.fetchFiles()}},{key:"render",value:function(){var e=this,a=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header"},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse ml-2 text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{onClick:function(){return e.props.onTabChange("7")},className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},a.length>0?l.a.createElement(fv.a,{pagination:!1,onRow:function(e,a){return{onClick:function(a){window.open(e.document,"_blank")}}},className:"main-table-all carpet-cleaning-table border-0",columns:this.docsColumns,dataSource:a,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component);function yq(e,a){return md(ad("dispatch.dispatchChief",{id:a}),e)}function wq(e){return id(ad("dispatch.dispatchChief",{id:e}))}function _q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("dispatch.dispatched");return id(a,e)}function Sq(e,a){return od(ad("dispatch.dispatch_one",{id:a}),e)}function xq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("dispatch.dispatch");return id(a,e)}function Cq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("dispatch.dispatch_assign");return id(a,e)}function Oq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("dispatch.dispatch_now");return id(a,e)}function kq(e,a){return od(ad("dispatch.dispatch_update_fleet_group",{id:a}),e)}var jq=t(47),Iq=fu.a.Panel,Aq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={rows:[],qty:1,fetching:!1,employees:[],supplyData:[],fleetData:[],totalCount:0,totalFleetCount:0,totalSupplyCount:0,page:1},e.handleSupplySelect=function(a,t){var n={supply_assignee:[{id:t,value:"Assign"===a.value?null:a.value}]};e.handleUpdateDispatch(n)},e.handleFleetSelect=function(a,t,n,l){if("FLEET_KIT"===l){var c={fleet_kit_assignee:[{id:n,value:"Assign"===a.value?null:a.value,child:t}]};e.handleUpdateDispatch(c)}else{var i={fleet_assignee:[{id:t,value:"Assign"===a.value?null:a.value}]};e.handleUpdateDispatch(i)}},e.fetchSupplyGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0});var t=Object(wu.a)({},a);ok(t).then((function(a){1==e.state.page?e.setState({supplyData:a.data.results,totalSupplyCount:a.data.count}):e.setState((function(e){return{supplyData:[].concat(Object(Ou.a)(e.supplyData),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.fetchFleetGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0});var t=Object(wu.a)({},a);QE(t).then((function(a){1==e.state.page?e.setState({fleetData:a.data.results,totalFleetCount:a.data.count}):e.setState((function(e){return{fleetData:[].concat(Object(Ou.a)(e.fleetData),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handleUpdateDispatch=function(a){var t;yq(a,null===(t=e.props.workorderData)||void 0===t?void 0:t.id).then((function(a){e.props.getDispatchInqueue()})).catch((function(e){td(e)}))},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0});var t=Object(wu.a)({},a);Gp(t).then((function(a){1==e.state.page?e.setState({employees:a.data.results,totalCount:a.data.count}):e.setState((function(e){return{employees:[].concat(Object(Ou.a)(e.employees),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handleSelect=function(a,t){var n={labor_assignee:[{id:t,value:"Assign"===a.value?null:a.value}]};e.handleUpdateDispatch(n)},e.handlePagination=function(a){"LABOR"===a?e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchEmployees({page:e.state.page})})):"SUPPLY"===a?e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchSupplyGroups({page:e.state.page})})):"FLEET"===a&&e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchFleetGroups({page:e.state.page})}))},e.handleFleetKit=function(a,t,n,c){var i,r,s,o,m,d,u,p,v,h;e.props.workorderAssignee?d=null===(u=e.props.Assignees)||void 0===u||null===(p=u.fleet_kit_assignee)||void 0===p?void 0:p.find((function(e){return e.child===a.id})):d=null===(v=e.props.workorderData)||void 0===v||null===(h=v.fleet_kit_assignee)||void 0===h?void 0:h.find((function(e){return e.id===a.id}));var f={label:null===(i=d)||void 0===i?void 0:i.name,value:null===(r=d)||void 0===r?void 0:r.value,key:null===(s=d)||void 0===s?void 0:s.value};return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Group")),l.a.createElement("div",{className:"custom-table-cell-td"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(o=a.item)||void 0===o?void 0:o.name:a.name||"-"))),e.props.assignPending?l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},f.label?f.label:"+ Assign")):l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement(ku.a,{labelInValue:!0,className:"custom-search-select custom-search-update",placeholder:"+ Assign",filterOption:!1,value:f.value?f:void 0,showSearch:!0,onFocus:function(){e.setState({page:1},(function(){e.fetchFleetGroups({page:e.state.page})}))},onSearch:function(a){e.setState({page:1},(function(){e.fetchFleetGroups({search:a})}))},onChange:function(t){return e.handleFleetSelect(t,a.id,c,"FLEET_KIT")},dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},e.state.fetching?l.a.createElement(Wv.a,null):e.state.fleetData.length!==e.state.totalFleetCount&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination("FLEET"),a.stopPropagation()}},"Load More"))))))}},l.a.createElement(jq.Option,{value:"Assign"},"Assign"),0==e.state.fleetData.length?l.a.createElement("div",{className:"text-center"},"No Data"):l.a.createElement(l.a.Fragment,null,e.state.fleetData.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(jq.Option,{value:e.id},e.name))})))))),l.a.createElement("div",{className:"custom-table-cell-td px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"})),l.a.createElement("div",{className:"custom-table-cell-td"},"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",{className:"px-3"},(null===a||void 0===a||null===(m=a.uom)||void 0===m?void 0:m.name)||"-")))},e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0",onClick:function(){var a;return e.props.handleRemoveWarning(!0,null===(a=e.props.newPricing)||void 0===a?void 0:a.id)}},"Remove")),e.renderRow=function(a,t,n){var c,i,r,s,o,m,d,u,p,v,h,f,E,g,b;switch(a.type){case Bd:var N,y,w,_,S,x;if(e.props.workorderAssignee)y=null===(w=e.props.Assignees)||void 0===w||null===(_=w.fleet_assignee)||void 0===_?void 0:_.find((function(e){return e.id===a.id}));else y=null===(S=e.props.workorderData)||void 0===S||null===(x=S.fleet_assignee)||void 0===x?void 0:x.find((function(e){return e.id===a.id}));N={label:null===(c=y)||void 0===c?void 0:c.name,value:null===(i=y)||void 0===i?void 0:i.value,key:null===(r=y)||void 0===r?void 0:r.value};var C=e.state;C.fleetData,C.totalFleetCount,C.fetching;return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 custom-table-proposal row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.FLEET_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),e.props.assignPending?l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},N.label?N.label:"+ Assign")):l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement(ku.a,{labelInValue:!0,className:"custom-search-select custom-search-update",placeholder:"+ Assign",filterOption:!1,value:N.value?N:void 0,showSearch:!0,onFocus:function(){e.setState({page:1},(function(){e.fetchFleetGroups({page:e.state.page})}))},onSearch:function(a){e.setState({page:1},(function(){e.fetchFleetGroups({search:a})}))},onChange:function(t){return e.handleFleetSelect(t,a.id)},dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},e.state.fetching?l.a.createElement(Wv.a,null):e.state.fleetData.length!==e.state.totalFleetCount&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination("FLEET"),a.stopPropagation()}},"Load More"))))))}},l.a.createElement(jq.Option,{value:"Assign"},"Assign"),0==e.state.fleetData.length?l.a.createElement("div",{className:"text-center"},"No Data"):l.a.createElement(l.a.Fragment,null,e.state.fleetData.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(jq.Option,{value:e.id},e.name))})))))),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},"-"),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"px-3"},"Hours")));case Wd:var O,k,j,I,A,D;if(e.props.workorderAssignee)k=null===(j=e.props.Assignees)||void 0===j||null===(I=j.supply_assignee)||void 0===I?void 0:I.find((function(e){return e.id===a.id}));else k=null===(A=e.props.workorderData)||void 0===A||null===(D=A.supply_assignee)||void 0===D?void 0:D.find((function(e){return e.id===a.id}));return O={label:null===(s=k)||void 0===s?void 0:s.name,value:null===(o=k)||void 0===o?void 0:o.value,key:null===(m=k)||void 0===m?void 0:m.value},l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.SUPPLY_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),e.props.assignPending?l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},O.label?O.label:"+ Assign")):l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement(ku.a,{labelInValue:!0,className:"custom-search-select custom-search-update",placeholder:"+ Assign",filterOption:!1,value:O.value?O:void 0,showSearch:!0,onFocus:function(){e.setState({page:1},(function(){e.fetchSupplyGroups({page:e.state.page})}))},onSearch:function(a){e.setState({page:1},(function(){e.fetchSupplyGroups({search:a})}))},onChange:function(t){return e.handleSupplySelect(t,a.id)},dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},e.state.fetching?l.a.createElement(Wv.a,null):e.state.supplyData.length!==e.state.totalSupplyCount&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination("SUPPLY"),a.stopPropagation()}},"Load More"))))))}},l.a.createElement(jq.Option,{value:"Assign"},"Assign"),0==e.state.supplyData.length?l.a.createElement("div",{className:"text-center"},"No Data"):e.state.supplyData.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(jq.Option,{value:e.id},e.name))}))))),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"px-3"}," Hours/Day")));case"INVENTORY_ITEM":return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(d=a.item)||void 0===d?void 0:d.name:a.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"})),l.a.createElement("div",{className:"custom-table-cell-td"},"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",{className:"px-3"},(null===a||void 0===a||null===(u=a.uom)||void 0===u?void 0:u.name)||"-")));case"INVENTORY_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",{className:"px-3"}," pieces (pc)"))),a.children.length>0&&a.children.map((function(t,n){var l=a.children.length>n+1;return e.renderRow(t,!0,l)})),null===(p=a.data)||void 0===p||null===(v=p.inventory_package_items)||void 0===v?void 0:v.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",{className:"px-3"},"pieces (pc)")))})));case"DISPOSAL":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Disposal")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select"},l.a.createElement("span",{className:"text-capitalize"}))),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.container_quantity?a.container_quantity:"-")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.container_type?a.container_type:"-")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1,l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",{className:"px-3"}," ",(null===a||void 0===a||null===(h=a.uom)||void 0===h?void 0:h.name)||"-"),l.a.createElement("div",null))));case Ld:var T,R,M,F,P,V;if(e.props.workorderAssignee)R=null===(M=e.props.Assignees)||void 0===M||null===(F=M.labor_assignee)||void 0===F?void 0:F.find((function(e){return e.id===a.id}));else R=null===(P=e.props.workorderData)||void 0===P||null===(V=P.labor_assignee)||void 0===V?void 0:V.find((function(e){return e.id===a.id}));T={label:null===(f=R)||void 0===f?void 0:f.name,value:null===(E=R)||void 0===E?void 0:E.value,key:null===(g=R)||void 0===g?void 0:g.value};var q=e.state,L=q.totalCount,U=q.employees;q.page;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"},l.a.createElement("div",null,a.name)),e.props.assignPending?l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},T.label?T.label:"+ Assign")):l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement(ku.a,{labelInValue:!0,className:"custom-search-select custom-search-update",placeholder:"+ Assign",filterOption:!1,value:T.value?T:void 0,showSearch:!0,onFocus:function(){e.setState({page:1},(function(){e.fetchEmployees({page:e.state.page})}))},onSearch:function(a){e.setState({page:1},(function(){e.fetchEmployees({search:a})}))},dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},e.state.fetching?l.a.createElement(Wv.a,null):U.length!==L&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination("LABOR"),a.stopPropagation()}},"Load More"))))))},onChange:function(t){return e.handleSelect(t,a.id)}},l.a.createElement(jq.Option,{value:"Assign"},"Assign"),l.a.createElement(l.a.Fragment,null,e.state.employees.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(jq.Option,{key:e.id,value:e.id},"".concat(e.first_name,"  ").concat(e.last_name)))})))))),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"})),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1,l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",{className:"px-3"},"Hours"),l.a.createElement("div",null))));case"FLEET_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,qd.title)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",{className:"px-3"}," pieces (pc)"))),(null===a||void 0===a||null===(b=a.children)||void 0===b?void 0:b.length)>0&&a.children.map((function(t,n){var l,c=(null===a||void 0===a||null===(l=a.children)||void 0===l?void 0:l.length)>n+1;return e.handleFleetKit(t,!0,c,a.id)})));default:return l.a.createElement(l.a.Fragment,null)}},e.stopEvtBubbling=function(e){e.stopPropagation()},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c=this,i=this.props,r=i.newPricing,s=(i.viewProposalTable,i.view,i.allOptions),o=i.foundRegion,m=(i.removeThreeDots,null===s||void 0===s?void 0:s.find((function(e){var a,t;return e.id===(null===r||void 0===r||null===(a=r.variant_data)||void 0===a||null===(t=a.pricing_uom)||void 0===t?void 0:t.id)})));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body custom-table-body-update p-0"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"custom-table-collapse-main"},l.a.createElement(Iq,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td wage-info-collapse-td gray-2-color d-flex align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",src:"INVENTORY_KIT"===(null===r||void 0===r?void 0:r.resource_type)?Rm.inventory_kit_variant:"INVENTORY_ITEM"===(null===r||void 0===r?void 0:r.resource_type)?Rm.inventory_item_variant:"DISPOSAL"===(null===r||void 0===r?void 0:r.resource_type)?Rm.no_disposal_black:"SUPPLY_GROUP"===(null===r||void 0===r?void 0:r.resource_type)?Rm.supply_icon_black:Rm.line_item_black,className:"img-fluid mr-2"}),"INVENTORY_KIT"===(null===r||void 0===r?void 0:r.resource_type)||"INVENTORY_ITEM"===(null===r||void 0===r?void 0:r.resource_type)||"DISPOSAL"===(null===r||void 0===r?void 0:r.resource_type)||"SUPPLY_GROUP"===(null===r||void 0===r?void 0:r.resource_type)?null===r||void 0===r||null===(e=r.resource_id)||void 0===e?void 0:e.name:"".concat(null===r||void 0===r||null===(a=r.variant_data)||void 0===a||null===(t=a.line_item)||void 0===t?void 0:t.name," ").concat(o&&"/"," ").concat((null===o||void 0===o?void 0:o.title)||""," - ").concat(null===r||void 0===r||null===(n=r.variant_data)||void 0===n?void 0:n.name))),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color pl-0 text-center",onClick:this.stopEvtBubbling},r.workorder_qty||1),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3",onClick:this.stopEvtBubbling},l.a.createElement("div",{className:"d-inline-block w-100"},"DISPOSAL"===(null===r||void 0===r?void 0:r.resource_type)?null===r||void 0===r?void 0:r.disposal_unit_id:"UOM"==r.selected_unit?"".concat(null===m||void 0===m?void 0:m.name," (").concat(null===m||void 0===m?void 0:m.symbol,")"):"HOURS"==r.selected_unit?"Hours (hrs)":"Day (d)")))),key:"1"},this.state.rows.map((function(e,a){var t={};if(e.kit){var n,l=c.state.rows.length>a+1;return t={id:e.id,item:e.item,qty:e.quantity,kit_uom:null===(n=e.kit)||void 0===n?void 0:n.unit,type:"INVENTORY_ITEM",kit_child:!0},c.renderRow(t,!0,l)}return c.renderRow(e)}))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{rows:Object(Ou.a)(e.child)}}}]),t}(n.Component),Dq=(n.Component,fu.a.Panel),Tq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={rows:[],qty:1,fetching:!1,employees:[],supplyData:[],fleetData:[],totalCount:0,totalSupplyCount:0,totalFleetCount:0,page:1},e.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0",onClick:function(){var a;return e.props.handleRemoveWarning(!0,null===(a=e.props.newPricing)||void 0===a?void 0:a.id)}},"Remove")),e.handleSupplySelect=function(a,t){var n={supply_assignee:[{id:t,value:"Assign"===a.value?null:a.value}]};e.handleUpdateDispatch(n)},e.handleFleetSelect=function(a,t,n,l){if("FLEET_KIT"===l){var c={fleet_kit_assignee:[{id:n,value:"Assign"===a.value?null:a.value,child:t}]};e.handleUpdateDispatch(c)}else{var i={fleet_assignee:[{id:t,value:"Assign"===a.value?null:a.value}]};e.handleUpdateDispatch(i)}},e.fetchSupplyGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0});var t=Object(wu.a)({},a);ok(t).then((function(a){1==e.state.page?e.setState({supplyData:a.data.results,totalSupplyCount:a.data.count}):e.setState((function(e){return{supplyData:[].concat(Object(Ou.a)(e.supplyData),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.fetchFleetGroups=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0});var t=Object(wu.a)({},a);QE(t).then((function(a){1==e.state.page?e.setState({fleetData:a.data.results,totalFleetCount:a.data.count}):e.setState((function(e){return{fleetData:[].concat(Object(Ou.a)(e.fleetData),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handleUpdateDispatch=function(a){var t;yq(a,null===(t=e.props.workorderData)||void 0===t?void 0:t.id).then((function(a){e.props.fetchWorkOrder()})).catch((function(e){td(e)}))},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0});var t=Object(wu.a)({},a);Gp(t).then((function(a){1==e.state.page?e.setState({employees:a.data.results,totalCount:a.data.count}):e.setState((function(e){return{employees:[].concat(Object(Ou.a)(e.employees),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handleSelect=function(a,t){var n={labor_assignee:[{id:t,value:"Assign"===a.value?null:a.value}]};e.handleUpdateDispatch(n)},e.handlePagination=function(a){"LABOR"===a?e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchEmployees({page:e.state.page})})):"SUPPLY"===a?e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchSupplyGroups({page:e.state.page})})):"FLEET"===a&&e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchFleetGroups({page:e.state.page})}))},e.handleFleetKit=function(a,t,n,c){var i,r,s,o=null===(i=e.props.workorderData)||void 0===i||null===(r=i.fleet_kit_assignee)||void 0===r?void 0:r.find((function(e){return e.child===a.id})),m={label:null===o||void 0===o?void 0:o.name,value:null===o||void 0===o?void 0:o.value,key:null===o||void 0===o?void 0:o.value};return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Fleet Group")),l.a.createElement("div",{className:"custom-table-cell-td"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(s=a.item)||void 0===s?void 0:s.name:a.name||"-"))),e.props.workorderDispatchView?l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},m.label?m.label:"+ Assign")):l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement(ku.a,{labelInValue:!0,className:"custom-search-select custom-search-update",placeholder:"+ Assign",filterOption:!1,value:m.value?m:void 0,showSearch:!0,onFocus:function(){e.setState({page:1},(function(){e.fetchFleetGroups({page:e.state.page})}))},onSearch:function(a){return e.fetchFleetGroups({search:a})},onChange:function(t){return e.handleFleetSelect(t,a.id,c,"FLEET_KIT")},dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},e.state.fetching?l.a.createElement(Wv.a,null):e.state.fleetData.length!==e.state.totalFleetCount&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination("FLEET"),a.stopPropagation()}},"Load More"))))))}},l.a.createElement(jq.Option,{value:"Assign"},"Assign"),0==e.state.fleetData.length?l.a.createElement("div",{className:"text-center"},"No Data"):l.a.createElement(l.a.Fragment,null,e.state.fleetData.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(jq.Option,{value:e.id},e.name))})))))),l.a.createElement("div",{className:"custom-table-cell-td px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"})),l.a.createElement("div",{className:"custom-table-cell-td"},"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("span",null,"foot (ft)")))},e.renderRow=function(a,t,n){var c,i,r,s,o,m,d,u,p,v,h,f,E=e.state,g=E.fleetData,b=E.totalFleetCount,N=E.fetching,y=E.supplyData,w=E.totalSupplyCount;switch(a.type){case Bd:var _=null===(c=e.props.workorderData)||void 0===c||null===(i=c.fleet_assignee)||void 0===i?void 0:i.find((function(e){return e.id===a.id})),S={label:null===_||void 0===_?void 0:_.name,value:null===_||void 0===_?void 0:_.value,key:null===_||void 0===_?void 0:_.value};return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 custom-table-proposal row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.FLEET_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),e.props.workorderDispatchView?l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},l.a.createElement("div",null,S?S.label:"+ Assign")):l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement(ku.a,{labelInValue:!0,className:"custom-search-select custom-search-update",placeholder:"+ Assign",filterOption:!1,value:S.value?S:void 0,showSearch:!0,onFocus:function(){e.setState({page:1},(function(){e.fetchFleetGroups({page:e.state.page})}))},onSearch:function(a){e.setState({page:1},(function(){e.fetchFleetGroups({search:a})}))},onChange:function(t){return e.handleFleetSelect(t,a.id)},dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},N?l.a.createElement(Wv.a,null):g.length!==b&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination("FLEET"),a.stopPropagation()}},"Load More"))))))}},l.a.createElement(jq.Option,{value:"Assign"},"Assign"),0==g.length?l.a.createElement("div",{className:"text-center"},"No Data"):l.a.createElement(l.a.Fragment,null,g.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(jq.Option,{value:e.id},e.name))})))))),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},"-"),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"px-3"},"Hours")));case Wd:var x=null===(r=e.props.workorderData)||void 0===r||null===(s=r.supply_assignee)||void 0===s?void 0:s.find((function(e){return e.id===a.id})),C={label:null===x||void 0===x?void 0:x.name,value:null===x||void 0===x?void 0:x.value,key:null===x||void 0===x?void 0:x.value};return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.SUPPLY_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),e.props.workorderDispatchView?l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},l.a.createElement("div",null,C?C.label:"+ Assign")):l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement(ku.a,{labelInValue:!0,className:"custom-search-select custom-search-update",placeholder:"+ Assign",filterOption:!1,value:C.value?C:void 0,showSearch:!0,onFocus:function(){e.setState({page:1},(function(){e.fetchSupplyGroups({page:e.state.page})}))},onSearch:function(a){e.setState({page:1},(function(){e.fetchSupplyGroups({search:a})}))},onChange:function(t){return e.handleSupplySelect(t,a.id)},dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},N?l.a.createElement(Wv.a,null):y.length!==w&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination("SUPPLY"),a.stopPropagation()}},"Load More"))))))}},l.a.createElement(jq.Option,{value:"Assign"},"Assign"),0==e.state.supplyData.length?l.a.createElement("div",{className:"text-center"},"No Data"):y.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(jq.Option,{value:e.id},e.name))}))))),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",{className:""},"Hours/Day")));case"INVENTORY_ITEM":return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(o=a.item)||void 0===o?void 0:o.name:a.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"})),l.a.createElement("div",{className:"custom-table-cell-td"},"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("span",null,(null===(m=a.uom)||void 0===m?void 0:m.name)||"-")));case"INVENTORY_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null," pieces (pc)"))),a.children.length>0&&a.children.map((function(t,n){var l=a.children.length>n+1;return e.renderRow(t,!0,l)})),null===(d=a.data)||void 0===d||null===(u=d.inventory_package_items)||void 0===u?void 0:u.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null,"pieces (pc)")))})));case"FLEET_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,qd.title)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null," pieces (pc)"))),(null===a||void 0===a||null===(p=a.children)||void 0===p?void 0:p.length)>0&&a.children.map((function(t,n){var l,c=(null===a||void 0===a||null===(l=a.children)||void 0===l?void 0:l.length)>n+1;return e.handleFleetKit(t,!0,c,a.id)})));case"DISPOSAL":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Disposal")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select"},l.a.createElement("span",{className:"text-capitalize"}))),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.container_quantity)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.container_type)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1,l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null,(null===(v=a.uom)||void 0===v?void 0:v.name)||"-"),l.a.createElement("div",null))));case Ld:var O=null===(h=e.props.workorderData)||void 0===h||null===(f=h.labor_assignee)||void 0===f?void 0:f.find((function(e){return e.id===a.id})),k={label:null===O||void 0===O?void 0:O.name,value:null===O||void 0===O?void 0:O.value,key:null===O||void 0===O?void 0:O.value},j=e.state,I=j.totalCount,A=j.employees,D=j.page;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"},l.a.createElement("div",null,a.name)),e.props.workorderDispatchView?l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},k?k.label:"+ Assign")):l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center"},l.a.createElement(ku.a,{labelInValue:!0,className:"custom-search-select custom-search-update",placeholder:"+ Assign",filterOption:!1,value:k.value?k:void 0,showSearch:!0,onFocus:function(){e.setState({page:1},(function(){e.fetchEmployees({page:D})}))},onSearch:function(a){e.setState({page:1},(function(){e.fetchEmployees({search:a})}))},onChange:function(t){return e.handleSelect(t,a.id)},dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},e.state.fetching?l.a.createElement(Wv.a,null):A.length!==I&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handlePagination("LABOR"),a.stopPropagation()}},"Load More"))))))}},l.a.createElement(jq.Option,{value:"Assign"},"Assign"),l.a.createElement(l.a.Fragment,null,A.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(jq.Option,{key:e.id,value:e.id},e.first_name," ",e.last_name))})))))),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"})),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1,l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null,"Hours"),l.a.createElement("div",null))));default:return l.a.createElement(l.a.Fragment,null)}},e.stopEvtBubbling=function(e){e.stopPropagation()},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c=this,i=this.props,r=i.newPricing,s=i.foundRegion,o=i.allOptions,m=null===o||void 0===o?void 0:o.find((function(e){var a,t;return e.id===(null===r||void 0===r||null===(a=r.variant_data)||void 0===a||null===(t=a.pricing_uom)||void 0===t?void 0:t.id)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body custom-table-body-update p-0"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"custom-table-collapse-main"},l.a.createElement(Dq,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"DISPOSAL"===(null===r||void 0===r?void 0:r.resource_type)?"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0 disposal-added":"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0 work-order-dispatch-thead"},l.a.createElement("div",{className:"custom-table-cell-td wage-info-collapse-td gray-2-color d-flex align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",src:"INVENTORY_KIT"===(null===r||void 0===r?void 0:r.resource_type)?Rm.inventory_kit_variant:"INVENTORY_ITEM"===(null===r||void 0===r?void 0:r.resource_type)?Rm.inventory_item_variant:"DISPOSAL"===(null===r||void 0===r?void 0:r.resource_type)?Rm.no_disposal_black:"SUPPLY_GROUP"===(null===r||void 0===r?void 0:r.resource_type)?Rm.supply_icon_black:Rm.line_item_black,className:"img-fluid mr-2"}),"INVENTORY_KIT"===(null===r||void 0===r?void 0:r.resource_type)||"INVENTORY_ITEM"===(null===r||void 0===r?void 0:r.resource_type)||"DISPOSAL"==(null===r||void 0===r?void 0:r.resource_type)||"SUPPLY_GROUP"===(null===r||void 0===r?void 0:r.resource_type)?null===r||void 0===r||null===(e=r.resource_id)||void 0===e?void 0:e.name:"".concat(null===r||void 0===r||null===(a=r.variant_data)||void 0===a||null===(t=a.line_item)||void 0===t?void 0:t.name," ").concat(s&&"/"," ").concat((null===s||void 0===s?void 0:s.title)||""," - ").concat(null===r||void 0===r||null===(n=r.variant_data)||void 0===n?void 0:n.name))),"DISPOSAL"===(null===r||void 0===r?void 0:r.resource_type)&&l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0",onClick:this.stopEvtBubbling},l.a.createElement("span",null,(null===r||void 0===r?void 0:r.container_quantity)?parseInt(null===r||void 0===r?void 0:r.container_quantity):"-")),"DISPOSAL"===(null===r||void 0===r?void 0:r.resource_type)&&l.a.createElement("div",{className:"custom-table-cell-td background-white-div p-0",onClick:this.stopEvtBubbling},l.a.createElement("span",null,(null===r||void 0===r?void 0:r.container_type)||"-")),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color pl-0 text-center",onClick:this.stopEvtBubbling},r.workorder_qty||"1"),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3",onClick:this.stopEvtBubbling},l.a.createElement("div",{className:"d-inline-block w-100"},"DISPOSAL"===(null===r||void 0===r?void 0:r.resource_type)?null===r||void 0===r?void 0:r.disposal_unit_id:"UOM"==r.selected_unit?"".concat(null===m||void 0===m?void 0:m.name," (").concat(null===m||void 0===m?void 0:m.symbol,")"):"HOURS"==r.selected_unit?"Hours (hrs)":"Day (d)")))),key:"1"},this.state.rows.map((function(e,a){var t={};if(e.kit){var n,l=c.state.rows.length>a+1;return t={id:e.id,item:e.item,qty:e.quantity,kit_uom:null===(n=e.kit)||void 0===n?void 0:n.unit,type:"INVENTORY_ITEM",kit_child:!0},c.renderRow(t,!0,l)}return c.renderRow(e)}))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{rows:Object(Ou.a)(e.child)}}}]),t}(n.Component),Rq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={no_data:""},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"sales-site-design-fix no-data-card-row-new billing-account-data")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"mt-30 border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 update-table-dispatch"},(null===(e=this.props.workOrder)||void 0===e||null===(a=e.workorder_variant)||void 0===a?void 0:a.length)?l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table dispatch-service-varient"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"ASSIGNEE")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONT Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONTAINER")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"UOM")))),l.a.createElement("div",{className:"row mx-0 w-100"},null===(t=this.props.workOrder)||void 0===t||null===(n=t.workorder_variant)||void 0===n?void 0:n.map((function(e){var a,t;return l.a.createElement(Tq,{workorderDispatchView:!0,key:null===e||void 0===e?void 0:e.id,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===(t=e.variant_data)||void 0===t?void 0:t.region,workorderData:c.props.workOrder.dispatch,handleActiveRadio:c.props.handleActiveRadio,closeViewModal:c.closeViewModal,manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),margin:null===e||void 0===e?void 0:e.margin,newPricing:e,view:!1})}))))):l.a.createElement("div",{className:"row mx-0 mt-3"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"75px"},className:"row mx-0 align-items-center no-data-card-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.empty_dispatch_icon}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Dispatch"))))))))}}]),t}(n.Component),Mq=ku.a.Option,Fq={labelCol:{span:24},wrapperCol:{span:24}},Pq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={crewChief:"",employees:[],page:1,fetching:!1,totalCount:0},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove(a.id)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(a){e.handleSelect({crew_chief:null})},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Gp(a).then((function(a){e.setState({totalCount:a.data.count}),1==e.state.page?e.setState({employees:a.data.results}):e.setState((function(e){return{employees:[].concat(Object(Ou.a)(e.employees),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchEmployees({page:e.state.page})}))},e.handleSelect=function(a){var t,n;e.formRef.current.setFieldsValue({crew_chief:null}),yq(a,null===(t=e.props.workOrder)||void 0===t||null===(n=t.dispatch)||void 0===n?void 0:n.id).then((function(a){e.setState({crewChief:a.data}),e.props.fetchWorkOrder()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this,t=this.props.workOrder,n=this.state,c=n.crewChief,i=n.fetching,r=n.employees,s=n.totalCount;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{className:"main-all-form-modal main-drawer-div drawer-update",title:"Assign Resources",placement:"right",width:"75%",maskClosable:!1,closable:!0,onClose:this.props.handleClose,visible:this.props.visible},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 dispatch-word-card position-relative pb-0"},l.a.createElement("div",{className:"status-btn"},null===t||void 0===t?void 0:t.status),l.a.createElement("div",{className:"col-12 position-relative dispatch-card-heading"},l.a.createElement("h6",null,l.a.createElement("div",{className:"work-id"},null===t||void 0===t?void 0:t.id),l.a.createElement("div",{className:"project-name"},null===t||void 0===t||null===(e=t.project)||void 0===e?void 0:e.name))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline  "},l.a.createElement("li",{className:"pl-0 text-left"},l.a.createElement("img",{src:Rm.calendar_gary,alt:"",className:"img-fluid"}),(null===t||void 0===t?void 0:t.service_date)?hd()(null===t||void 0===t?void 0:t.service_date).format("MMM D ,YYYY"):"-"," ","|"," ",(null===t||void 0===t?void 0:t.start_time)?hd()(null===t||void 0===t?void 0:t.start_time,"HH:mm").format("HH:mm A"):"-"," ","-"," ",(null===t||void 0===t?void 0:t.end_time)?hd()(null===t||void 0===t?void 0:t.end_time,"HH:mm").format("HH:mm A"):""))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("hr",{className:"hr-line"})),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},Fq,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"crew_chief",label:"Crew Chief",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{placeholder:"Search",filterOption:!1,onFocus:function(){a.setState({page:1},(function(){a.fetchEmployees({page:a.state.page})}))},onSearch:function(e){a.setState({page:1},(function(){a.fetchEmployees({search:e})}))},onSelect:function(e){return a.handleSelect({crew_chief:e})},showSearch:!0,className:"custom-search-select",dropdownClassName:"custom-search-select option-design-fix",dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},i?l.a.createElement(Wv.a,null):r.length!==s&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(e){a.handlePagination(),e.stopPropagation()}},"Load More"))))))}},r.map((function(e){return l.a.createElement(Mq,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},e.first_name.split("")[0],e.last_name.split("")[0])),l.a.createElement("h6",{className:"mb-0"},e.first_name," ",e.last_name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Employee")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})))))),!(null===c||void 0===c?void 0:c.crew_chief)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.creq_chef_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{style:{color:"#bdbdbd"},className:"mb-0"},"No Crew Chief")))),(null===c||void 0===c?void 0:c.crew_chief)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{style:{width:"80%"},className:"d-flex align-items-center float-left"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},c.crew_chief.split(" ")[0].split("")[0],c.crew_chief.split(" ")[1].split("")[0])),l.a.createElement("div",{className:"user-info-div pt-0"},l.a.createElement("h6",null,c.crew_chief))),l.a.createElement("div",{style:{width:"20%"},className:"resource-name float-left text-right"},"Crew Chief")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:this.menu(c),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))))),l.a.createElement("div",{className:"col-12 update-table-dispatch"},t?l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table dispatch-service-varient"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"ASSIGNEE")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONT Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONTAINER")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"UOM")))),l.a.createElement("div",{className:"row mx-0 w-100"},null===t||void 0===t?void 0:t.workorder_variant.map((function(e){var n,c;return l.a.createElement(Tq,{key:null===e||void 0===e?void 0:e.id,child:(null===e||void 0===e||null===(n=e.variant_data)||void 0===n?void 0:n.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===(c=e.variant_data)||void 0===c?void 0:c.region,workorderData:t.dispatch,fetchWorkOrder:a.props.fetchWorkOrder,handleActiveRadio:a.props.handleActiveRadio,closeViewModal:a.closeViewModal,manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),margin:null===e||void 0===e?void 0:e.margin,newPricing:e,view:!1})}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Service Variants"))))))))}}],[{key:"getDerivedStateFromProps",value:function(e){var a;return{crewChief:Object(wu.a)({},null===(a=e.workOrder)||void 0===a?void 0:a.dispatch)}}}]),t}(n.Component),Vq=(ku.a.Option,{labelCol:{span:24},wrapperCol:{span:24}}),qq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={data:null,buttonLoading:!1,visibleConfirm:!1,county:[],updateMainState:null},e.formRef=l.a.createRef(),e.onSubmit=function(a){var t=Object(wu.a)(Object(wu.a)({},a),{},{new_en_route_time:a.new_en_route_time||null,new_leave_site_time:a.new_leave_site_time||null,new_on_site_time:a.new_on_site_time||null,new_completed_order_time:a.new_completed_order_time||null});DP(e.props.workOrder.id,t).then((function(a){Mm.b.success("Time Updated successfully"),e.props.fetchWorkOrder(),e.props.onClose()})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.workOrder&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.workOrder),{},{new_en_route_time:this.props.workOrder.new_en_route_time?hd()(this.props.workOrder.new_en_route_time):"",new_leave_site_time:this.props.workOrder.new_leave_site_time?hd()(this.props.workOrder.new_leave_site_time):"",new_on_site_time:this.props.workOrder.new_on_site_time?hd()(this.props.workOrder.new_on_site_time):"",new_completed_order_time:this.props.workOrder.new_completed_order_time?hd()(this.props.workOrder.new_completed_order_time):""}))}},{key:"componentDidUpdate",value:function(){this.props.visible&&this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},this.props.workOrder),{},{new_en_route_time:this.props.workOrder.new_en_route_time?hd()(this.props.workOrder.new_en_route_time):"",new_leave_site_time:this.props.workOrder.new_leave_site_time?hd()(this.props.workOrder.new_leave_site_time):"",new_on_site_time:this.props.workOrder.new_on_site_time?hd()(this.props.workOrder.new_on_site_time):"",new_completed_order_time:this.props.workOrder.new_completed_order_time?hd()(this.props.workOrder.new_completed_order_time):""}))}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Update Time",visible:this.props.visible,onClose:this.props.onClose,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.props.onClose()},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){e.formRef.current.submit()},type:"primary"},"Update Time"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.onSubmit},Vq,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"new_en_route_time",label:"Start Time"},l.a.createElement(yV.a,{format:"HH:mm:ss",placeholder:"Start Time"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"new_on_site_time",label:"On Site Time"},l.a.createElement(yV.a,{placeholder:"On Site Time"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"new_leave_site_time",label:"Leave Site Time"},l.a.createElement(yV.a,{placeholder:"Leave Site Time"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"new_completed_order_time",label:"End Time"},l.a.createElement(yV.a,{placeholder:"End Time"})))))))))}}]),t}(n.Component),Lq=Object(r.withRouter)(qq),Uq=t(18),Bq=fu.a.Panel;function Wq(e,a){return e===a?"active":e>a?"finish":void 0}var Yq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={statusTypes:null,dispatchInfo:!1,visibleDrawer:!1,visible:!1,updatedWorkorder:null},e.child=l.a.createRef(),e.handleDispatchInfo=function(a){e.setState({dispatchInfo:a})},e.handleChange=function(a){Sq({status:a.value},e.props.workOrder.dispatch.id).then((function(a){e.props.fetchWorkOrder()})).catch((function(e){td(e)}))},e.getProjectStatusOptions=function(){$P().then((function(a){e.setState({statusTypes:a.data.results})})).catch((function(e){td(e)}))},e.handleDispatch=function(a){a.filter((function(e){return"9"===e})).length?e.handleDispatchInfo(!0):e.handleDispatchInfo(!1)},e.handleAssignButton=function(a){e.setState({visibleDrawer:a})},e.handleClose=function(){e.setState({visibleDrawer:!1})},e.handleRemove=function(a){e.handleSelect({crew_chief:null},a)},e.handleSelect=function(a,t){yq(a,t).then((function(a){e.props.fetchWorkOrder()})).catch((function(e){td(e)}))},e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove(a.id)},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleTitle=function(e){switch(e){case"In Queue":return"SCHEDULED/IN QUEUE";case"Rescheduled":return"NEED TO BE RESCHEDULED";case"Canceled":return"PERMANENTLY CANCELED";case"Not Accepted":return"NOT ACCEPTED";case"Pending":return"Pending";case"Accepted":return"ACCEPTED";case"En Route":return"EN ROUTE";case"On Site":return"ON SITE";case"Completed On Site":return"COMPLETED: ON SITE";case"Completed Work Order":return"COMPLETED: WORKORDER";case"Service Request":return"SERVICE REQUESTED";case"Completed":return"Completed"}},e.updateTimeDrawer=function(a){1==a&&e.setState({updatedWorkorder:e.props.workOrder}),e.setState({visible:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getProjectStatusOptions()}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,m,d,u,p,v,h=this,f=this.props,E=f.workOrder,g=f.onTabChange,b=this.state.statusTypes,N=null===b||void 0===b?void 0:b.findIndex((function(e){return(null===e||void 0===e?void 0:e.title).split(" ").join("_").toUpperCase()===(null===E||void 0===E?void 0:E.status)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-row-main",style:{marginBottom:"80px"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-status-green-line-main bar-scroll"},null===b||void 0===b?void 0:b.map((function(e,a){return l.a.createElement(gE.a,{placement:"top",title:null===e||void 0===e?void 0:e.title,overlayStyle:{fontSize:11},arrowPointAtCenter:!0},l.a.createElement("div",{style:{width:"15.9%"},key:a,className:"summary-line-main text-uppercase position-relative p-0 d-flex align-items-center justify-content-center "+Wq(N,a)},"finish"===Wq(N,a)?l.a.createElement(EE.a,null):h.handleTitle(null===e||void 0===e?void 0:e.title)))}))))),l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:this.handleDispatch,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.work_order.edit,{id:h.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"1"},l.a.createElement(aq,{workOrder:E,statusTypes:b,handleChange:this.handleChange,onTabChange:g})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Service Information *"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"d-flex align-items-center"},ou(E,"SERVICE_INFO")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.work_order.edit,{id:h.props.match.params.id}),editTab:"2",workOrder:E})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")))),key:"2"},l.a.createElement(tq,{workOrder:E})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Posts")),key:"3"},l.a.createElement(oq,{workOrder:E,onTabChange:g,viewAll:!0})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Activity")),key:"4"},l.a.createElement(mq,{workOrder:this.props.workOrder,onTabChange:g,viewAll:!0})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Warehouse / Dispatch *"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"d-flex align-items-center"},ou(E,"WAREHOUSE")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.work_order.edit,{id:h.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")))),key:"5"},l.a.createElement(dq,{workOrder:this.props.workOrder})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Billing Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},ou(E,"CUSTOMER")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.work_order.edit,{id:h.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"6"},l.a.createElement(hq,{workOrder:E,onTabChange:g,hideTitle:!0})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Site Manager Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},ou(E,"OWNER")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.work_order.edit,{id:h.props.match.params.id}),editTab:"5"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"7"},l.a.createElement(gq,{workOrder:E,onTabChange:g,viewAll:!0})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Service Variants",l.a.createElement("sup",null,"*")),l.a.createElement("div",{className:"d-flex align-items-center"},ou(E,"SERVICE_VARIENT")&&l.a.createElement("p",{className:"mb-0 info-signifire mr-3"},"Please complete required information to avoid issues"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.operations.work_order.edit,{id:h.props.match.params.id}),editTab:"6"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"8"},l.a.createElement(bq,{onTabChange:g,viewAll:!0,workOrder:E})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse"},l.a.createElement("div",{className:"row mx-0 align-items-center justify-content-between"},l.a.createElement("span",null,"Dispatch"),l.a.createElement("div",{className:"d-flex align-items-center"},(null===(e=this.props.workOrder)||void 0===e||null===(a=e.workorder_variant)||void 0===a?void 0:a.length)?l.a.createElement(Vm.a,{className:"edit-btn-summary",onClick:function(){return h.handleAssignButton(!0)}},l.a.createElement("img",{src:Rm.plus_green_icon,alt:"",className:"img-fluid"}),"Assign"):l.a.createElement(Vm.a,{className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),this.state.dispatchInfo&&(null===(t=this.props.workOrder)||void 0===t||null===(n=t.workorder_variant)||void 0===n?void 0:n.length)?l.a.createElement("div",{className:"row dispatch-info-header"},l.a.createElement("div",{className:"col-12",style:{borderBottom:"1px solid #f2f2f2",paddingBottom:"15px",marginBottom:"15px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("h6",{className:"text-uppercase"},"Service Information")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"update_time_button",onClick:function(e){h.updateTimeDrawer(!0),e.stopPropagation()}},"Update Time"))),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Start Time"),l.a.createElement("li",{className:"list-inline-item"},(null===E||void 0===E?void 0:E.new_en_route_time)?hd()(E.new_en_route_time).format("hh:mm a"):"-")),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"On Site Time"),l.a.createElement("li",{className:"list-inline-item"},(null===E||void 0===E?void 0:E.new_on_site_time)?hd()(null===E||void 0===E?void 0:E.new_on_site_time).format("hh:mm a"):"-")),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Leave Site Time"),l.a.createElement("li",{className:"list-inline-item"},(null===E||void 0===E?void 0:E.new_leave_site_time)?hd()(null===E||void 0===E?void 0:E.new_leave_site_time).format("hh:mm a"):"-")),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"End Time"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("li",{className:"list-inline-item"},(null===E||void 0===E?void 0:E.new_completed_order_time)?hd()(null===E||void 0===E?void 0:E.new_completed_order_time).format("hh:mm a"):"-")))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("h6",{className:"text-uppercase"},"Disposal Information"))),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Disposal time(if any)"),l.a.createElement("li",{className:"list-inline-item"},Uq.get(E,"dispatch.dispatch_disposal.0.created")?hd()(Uq.get(E,"dispatch.dispatch_disposal.0.created")).format("hh:mm a"):"-")),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Disposal ticket number"),l.a.createElement("li",{className:"list-inline-item"},Uq.get(E,"dispatch.dispatch_disposal.0.ticket")||"-")),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Loaded weight"),l.a.createElement("li",{className:"list-inline-item"},Uq.get(E,"dispatch.dispatch_disposal.0.loaded_weight")?parseInt(Uq.get(E,"dispatch.dispatch_disposal[0].loaded_weight")).toFixed(2):"-"," ",Uq.get(null===E||void 0===E?void 0:E.dispatch,"dispatch_disposal[0].loaded_uom.name"))),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Unloaded weight"),l.a.createElement("li",{className:"list-inline-item"},Uq.get(E,"dispatch.dispatch_disposal.0.unloaded_weight")?parseInt(Uq.get(null===E||void 0===E?void 0:E.dispatch,"dispatch_disposal[0].unloaded_weight")).toFixed(2):"-"," ",Uq.get(null===E||void 0===E?void 0:E.dispatch,"dispatch_disposal[0].unloaded_uom.name"))),l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},"Net Weight load"),l.a.createElement("li",{className:"list-inline-item"},Uq.get(E,"dispatch.dispatch_disposal.0.net_weight")?parseInt(Uq.get(null===E||void 0===E?void 0:E.dispatch,"dispatch_disposal[0].net_weight")).toFixed(2):"-"," ",Uq.get(null===E||void 0===E?void 0:E.dispatch,"dispatch_disposal[0].net_uom.name")))))),(null===(c=this.props.workOrder)||void 0===c||null===(i=c.dispatch)||void 0===i?void 0:i.crew_chief)?l.a.createElement("div",{className:"col-12 col-sm-7"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{style:{width:"80%"},className:"d-flex align-items-center float-left"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},null===(r=this.props.workOrder)||void 0===r||null===(s=r.dispatch)||void 0===s?void 0:s.crew_chief.split(" ")[0].split("")[0],null===(m=this.props.workOrder)||void 0===m||null===(d=m.dispatch)||void 0===d?void 0:d.crew_chief.split(" ")[1].split("")[0])),l.a.createElement("div",{className:"user-info-div pt-0"},l.a.createElement("h6",null,null===(u=this.props.workOrder)||void 0===u||null===(p=u.dispatch)||void 0===p?void 0:p.crew_chief))),l.a.createElement("div",{style:{width:"20%"},className:"resource-name float-left text-right"},"Crew Chief")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:this.menu(null===(v=this.props.workOrder)||void 0===v?void 0:v.dispatch),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.stopPropagation()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))))):l.a.createElement("div",{className:"col-12 col-sm-7"},l.a.createElement("div",{style:{height:"75px",marginBottom:"0"},className:"row mx-0 align-items-center no-data-card-row"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.creq_chef_small}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Crew Chief"))))):""),key:"9"},l.a.createElement(Rq,{hideTitle:!0,workOrder:E,handleDispatchInfo:this.handleDispatchInfo})),l.a.createElement(Bq,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents")),key:"10"},l.a.createElement(Nq,{workOrder:E,onTabChange:g,hideTitle:!0}))),l.a.createElement(Pq,{visible:this.state.visibleDrawer,handleClose:this.handleClose,workOrder:this.props.workOrder,fetchWorkOrder:this.props.fetchWorkOrder}),this.state.updatedWorkorder&&l.a.createElement(Lq,{visible:this.state.visible,ref:this.child,fetchWorkOrder:this.props.fetchWorkOrder,workOrder:this.state.updatedWorkorder,onClose:function(){h.updateTimeDrawer(!1)}})))))}}]),t}(n.Component),Kq=Object(r.withRouter)(Yq),Gq=vf.a.TabPane,zq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={workOrder:null,active:"1"},e.fetchWorkOrder=function(){TP(e.props.match.params.id).then((function(a){var t=[{title:"Work Order",url:zm.dashboard.operations.work_order.self},{title:a.data.project.name,url:""}];e.props.setBreadcrumb(t),e.setState({workOrder:a.data},(function(){}))})).catch((function(e){td(e)}))},e.onTabChange=function(a){e.setState({active:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchWorkOrder()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",onChange:this.onTabChange,activeKey:this.state.active},l.a.createElement(Gq,{tab:"Summary",key:"1"},l.a.createElement(Kq,{workOrder:this.state.workOrder,fetchWorkOrder:this.fetchWorkOrder,onTabChange:this.onTabChange})),l.a.createElement(Gq,{tab:"POSTS",key:"2"},l.a.createElement(oq,Object.assign({workOrder:this.state.workOrder},this.props))),l.a.createElement(Gq,{tab:"ACTIVITY",key:"3"},l.a.createElement(mq,Object.assign({workOrder:this.state.workOrder},this.props))),l.a.createElement(Gq,{tab:"SITE MANAGER ACCOUNT",key:"4"},l.a.createElement(gq,Object.assign({workOrder:this.state.workOrder},this.props))),l.a.createElement(Gq,{tab:"BILLING ACCOUNT",key:"5"},l.a.createElement(hq,Object.assign({workOrder:this.state.workOrder},this.props))),l.a.createElement(Gq,{tab:"SERVICE VARIANTS",key:"6"},l.a.createElement(bq,Object.assign({workOrder:this.state.workOrder},this.props))),l.a.createElement(Gq,{tab:"DOCUMENTS",key:"7"},l.a.createElement(Nq,Object.assign({workOrder:this.state.workOrder},this.props)))))))}}]),t}(n.Component),Hq=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(zq)),$q=t(192),Qq={labelCol:{span:24},wrapperCol:{span:24}},Jq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.handleApplyFilter=function(){var a,t,n,l,c,i,r,s,o;console.log(e.formRef.current.getFieldValue("project"),"owner");var m={project:null===(a=e.formRef.current.getFieldValue("project"))||void 0===a?void 0:a.value,id:e.formRef.current.getFieldValue("workorder_Id"),service_start:(null===(t=e.formRef.current.getFieldValue("service_start"))||void 0===t?void 0:t.format("YYYY-MM-DD"))||null,service_end:(null===(n=e.formRef.current.getFieldValue("service_end"))||void 0===n?void 0:n.format("YYYY-MM-DD"))||null,start_time:(null===(l=e.formRef.current.getFieldValue("start_time"))||void 0===l?void 0:l.format("HH:mm:ss.sss"))||null,end_time:(null===(c=e.formRef.current.getFieldValue("end_time"))||void 0===c?void 0:c.format("HH:mm:ss.sss"))||null,owner_account:null===(i=e.formRef.current.getFieldValue("owner_account"))||void 0===i?void 0:i.value,customer_account:null===(r=e.formRef.current.getFieldValue("customer_account"))||void 0===r?void 0:r.value,warehouse:null===(s=e.formRef.current.getFieldValue("warehouse"))||void 0===s?void 0:s.value,site:null===(o=e.formRef.current.getFieldValue("site"))||void 0===o?void 0:o.value};e.props.setFilterObj(m),e.props.onClose()},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.project,n=a.fetching;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,closable:!0,title:"Work Order Filter",visible:this.props.visible,onClose:this.props.onClose,onCancel:function(){return e.props.onClose},className:"main-all-form-modal main-drawer-div drawer-update",width:"721px",placement:"right",maskClosable:!1,footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:this.clearValues,style:{marginRight:10}},"Cancel"),l.a.createElement(Vm.a,{onClick:this.handleApplyFilter,type:"primary"},"Apply Filter"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({},Qq,{className:"main-inner-form",ref:this.formRef}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"project",label:"Associated Project",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onSearch:function(a){return e.props.getProject({search:a})},onFocus:function(){return e.props.getProject()},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},t.map((function(e){return l.a.createElement(jq.Option,{key:e.id,value:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"workorder_Id",label:"Work Order ID",rules:[{required:!1}],className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Work Order ID",name:"workorder_Id"}))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"service_date",label:"Service Date",rules:[{required:!1}],className:""},l.a.createElement("div",{className:"row position-relative"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"service_start"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("span",{className:"dashed-line position-absolute"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"service_end"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"})))))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Fm.a.Item,{name:"Service_time",label:"Service Time",rules:[{required:!1}],className:"position-relative"},l.a.createElement("div",{className:"row position-relative"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"start_time"},l.a.createElement(yV.a,{placeholder:"Select Estimated Start Time"}))),l.a.createElement("span",{className:"dashed-line position-absolute"}),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"end_time"},l.a.createElement(yV.a,{placeholder:"Select Estimated End Time"})))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"warehouse",label:"Warehouse / Dispatch Origin",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onSearch:function(a){return e.props.getWarehouse({search:a})},onFocus:function(){return e.props.getWarehouse()},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},this.props.warehouse.map((function(e){return l.a.createElement(jq.Option,{key:e.id,value:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"customer_account",label:"Billing Account",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onSearch:function(a){return e.props.getBillingAccount({search:a})},onFocus:function(){return e.props.getBillingAccount()},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},this.props.customer_acc.map((function(e){return l.a.createElement(jq.Option,{key:e.id,value:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"owner_account",label:"Site Manager Account",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onSearch:function(a){return e.props.getSitemanagerAcoount({search:a})},onFocus:function(){return e.props.getSitemanagerAcoount()},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},this.props.owner_acc.map((function(e){return l.a.createElement(jq.Option,{key:e.id,value:e.id},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"site",label:"Site",rules:[{required:!1}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,showSearch:!0,filterOption:!1,onSearch:function(a){return e.props.getSites({search:a})},onFocus:function(){return e.props.getSites()},placeholder:"Select",suffixIcon:l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.caret_small_icon_select})},this.props.sites.map((function(e){return l.a.createElement(jq.Option,{key:e.id,value:e.id},e.name)})))))))))))}}]),t}(n.Component),Zq=Object(r.withRouter)(Jq),Xq=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={visible:!1,project:[],fetching:!1,warehouse:[],customer_acc:[],owner_acc:[],sites:[]},e.showWorkOrder=function(a){e.setState({visible:a})},e.getProject=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),HM(a).then((function(a){e.setState({project:a.data.results,fetching:!1})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.getWarehouse=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),tg(a).then((function(a){e.setState({warehouse:a.data.results,fetching:!1})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.getBillingAccount=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Du(a).then((function(a){e.setState({customer_acc:a.data.results,fetching:!1})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.getSitemanagerAcoount=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),mp(a).then((function(a){e.setState({owner_acc:a.data.results,fetching:!1})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.getSites=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),hp(a).then((function(a){e.setState({sites:a.data.results,fetching:!1})})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.warehouse,n=a.customer_acc,c=a.owner_acc,i=a.sites;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row dispatch-left-min-header-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search",onChange:lu((function(a){return e.props.fetchWorkorder({search:a.target.value})}),1e3)}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("div",{className:"new-opportunity-btn-div"},l.a.createElement(Vm.a,{onClick:function(){return e.showWorkOrder(!0)},className:"filter-btn pd-filter d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",className:"img-fluid",src:Rm.filter_icon}),"filter"))))),l.a.createElement(Zq,{visible:this.state.visible,onClose:function(){return e.showWorkOrder(!1)},fetching:this.state.fetching,project:this.state.project,getProject:this.getProject,getBillingAccount:this.getBillingAccount,getWarehouse:this.getWarehouse,getSitemanagerAcoount:this.getSitemanagerAcoount,getSites:this.getSites,warehouse:t,customer_acc:n,owner_acc:c,sites:i,setFilterObj:this.props.setFilterObj}))}}]),t}(n.Component),eL=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(qm.a,{to:""},"Remove"))),aL=fu.a.Panel,tL=ku.a.Option,nL=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,closable:!0,title:"Work Order",visible:this.props.visible,onClose:this.props.onClose,onCancel:function(){return e.props.onClose},className:"main-all-form-modal main-drawer-div drawer-update",width:"600px",placement:"right",maskClosable:!1,footer:!1},l.a.createElement("div",{className:"row inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row dispatch-word-card mx-0 mt-0"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement("h6",null,l.a.createElement("div",{className:"work-id"},"302654"),l.a.createElement("div",{className:"project-name"},"Project Name")),l.a.createElement("small",null,"Site Owner Account"),l.a.createElement("div",{style:{color:"#3391FF"},className:"tag-common rescheduled-div"},"In QUEUE"),l.a.createElement(xu.a,{overlay:eL,trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-custom",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.menu_dispatch_elipsis,alt:" ",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 col-sm-7"},l.a.createElement("p",null,l.a.createElement("img",{src:Rm.location_gray_dispatch_14,alt:"",className:"img-fluid"}),"123 W 112TH ST New York")),l.a.createElement("div",{className:"col-12 col-sm-5 time-schedule-div position-relative"},l.a.createElement("ul",{className:"list-inline mb-0 text-right"},l.a.createElement("li",{className:"list-inline-item"},"Apr 14, 2021"),l.a.createElement("li",{className:"list-inline-item"},"|"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"repeats-btn"},"~ 2hr",l.a.createElement("img",{src:Rm.recurrence,alt:" ",className:"img-fluid"})))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{className:"custom-collapse-work-order",defaultActiveKey:["1"]},l.a.createElement(aL,{header:l.a.createElement("div",{className:"custom-collapse-row"},l.a.createElement("div",{className:"custom-collapse-details d-flex align-items-center"},l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid m-1"}),"Pneumatic Vac Excavation / NYC"),l.a.createElement("div",{className:"dropdown-details"},l.a.createElement(xu.a,{overlay:eL,trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link bg-transparent ant-dropdown-link-custom",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.menu_dispatch_elipsis,alt:" ",className:"img-fluid"}))))),key:"1"},l.a.createElement("div",{className:"row work-info-inner-collapse-content"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Operator 1")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"John Doe"),l.a.createElement(tL,{value:"b"},"John Doe 1"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Operator 1")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"John Doe"),l.a.createElement(tL,{value:"b"},"John Doe 1"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Operator 1")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"John Doe"),l.a.createElement(tL,{value:"b"},"John Doe 1"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 px-0 border-TB-1"},l.a.createElement("div",{className:"row content-row-details disabled"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Crew Chief")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"John Doe"),l.a.createElement(tL,{value:"b"},"John Doe 1"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Vehicle 1")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("h6",{style:{fontWeight:"400"}},"Box Truck")),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Vehicle"},l.a.createElement(tL,{value:"a"},"Box Truck 101"),l.a.createElement(tL,{value:"b"},"Box Truck 102"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details disabled"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Driver 1")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"Select Employee"),l.a.createElement(tL,{value:"b"},"Select Employee"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 px-0 border-TB-1"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Vehicle 2")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("h6",{style:{fontWeight:"400"}},"Pickup Truck")),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Vehicle"},l.a.createElement(tL,{value:"a"},"Box Truck 101"),l.a.createElement(tL,{value:"b"},"Box Truck 102"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details disabled"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Driver 2")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"Select Employee"),l.a.createElement(tL,{value:"b"},"Select Employee"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 px-0 border-TB-1"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Supply 1")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{style:{fontWeight:"400"}},"QTY: 1")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("h6",{style:{fontWeight:"400"}},"Power Washer")))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Supply"},l.a.createElement(tL,{value:"a"},"Select Supply"),l.a.createElement(tL,{value:"b"},"Select Supply"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Supply 2")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{style:{fontWeight:"400"}},"QTY: 1")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("h6",{style:{fontWeight:"400"}},"Power Drill")))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Supply"},l.a.createElement(tL,{value:"a"},"Select Supply"),l.a.createElement(tL,{value:"b"},"Select Supply"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Inventory Kit 1")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-4 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("h6",{style:{fontWeight:"400"},className:"mb-0"},"Bucket of Nails")))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"}),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-0"},l.a.createElement("h6",{className:"mb-0"},l.a.createElement(vh.a,{value:1},"Inventory Kit 1"))),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-4 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-8 pr-0"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement("h6",{style:{fontWeight:"400"},className:"mb-0"},"9 Inch Nails")))))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"}),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-0"},l.a.createElement("h6",{className:"mb-0"},l.a.createElement(vh.a,{value:1},"Inventory Kit 2"))),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-8 pr-0"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement("h6",{style:{fontWeight:"400"},className:"mb-0"},"9 Inch Nails")))))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"}),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-11"},l.a.createElement("h6",{style:{fontWeight:"400"},className:"mb-0"},l.a.createElement("span",{style:{color:"#E39999"}},"Inventory 1 has been deactivated"),", Click X to Activate ")),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,{checked:!0,className:"in_active"})))))),l.a.createElement(aL,{header:l.a.createElement("div",{className:"custom-collapse-row"},l.a.createElement("div",{className:"custom-collapse-details d-flex align-items-center"},l.a.createElement("img",{src:Rm.line_item_icon_green,alt:"",className:"img-fluid m-1"}),"Pneumatic Vac Excavation / NYC"),l.a.createElement("div",{className:"dropdown-details"},l.a.createElement(xu.a,{overlay:eL,trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link bg-transparent ant-dropdown-link-custom",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.menu_dispatch_elipsis,alt:" ",className:"img-fluid"}))))),key:"2"},l.a.createElement("div",{className:"row work-info-inner-collapse-content"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Operator 1")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"John Doe"),l.a.createElement(tL,{value:"b"},"John Doe 1"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Operator 1")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"John Doe"),l.a.createElement(tL,{value:"b"},"John Doe 1"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Operator 1")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"John Doe"),l.a.createElement(tL,{value:"b"},"John Doe 1"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 px-0 border-TB-1"},l.a.createElement("div",{className:"row content-row-details disabled"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Crew Chief")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"John Doe"),l.a.createElement(tL,{value:"b"},"John Doe 1"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Vehicle 1")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("h6",{style:{fontWeight:"400"}},"Box Truck")),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Vehicle"},l.a.createElement(tL,{value:"a"},"Box Truck 101"),l.a.createElement(tL,{value:"b"},"Box Truck 102"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details disabled"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Driver 1")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"Select Employee"),l.a.createElement(tL,{value:"b"},"Select Employee"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 px-0 border-TB-1"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Vehicle 2")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("h6",{style:{fontWeight:"400"}},"Pickup Truck")),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Vehicle"},l.a.createElement(tL,{value:"a"},"Box Truck 101"),l.a.createElement(tL,{value:"b"},"Box Truck 102"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details disabled"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Driver 2")),l.a.createElement("div",{className:"col-12 col-sm-5"}),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Employee"},l.a.createElement(tL,{value:"a"},"Select Employee"),l.a.createElement(tL,{value:"b"},"Select Employee"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 px-0 border-TB-1"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Supply 1")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{style:{fontWeight:"400"}},"QTY: 1")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("h6",{style:{fontWeight:"400"}},"Power Washer")))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Supply"},l.a.createElement(tL,{value:"a"},"Select Supply"),l.a.createElement(tL,{value:"b"},"Select Supply"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Supply 2")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{style:{fontWeight:"400"}},"QTY: 1")),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("h6",{style:{fontWeight:"400"}},"Power Drill")))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),placeholder:"Select Supply"},l.a.createElement(tL,{value:"a"},"Select Supply"),l.a.createElement(tL,{value:"b"},"Select Supply"))),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null)))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"mb-0"},"Inventory Kit 1")),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-4 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-8"},l.a.createElement("h6",{style:{fontWeight:"400"},className:"mb-0"},"Bucket of Nails")))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"}),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-0"},l.a.createElement("h6",{className:"mb-0"},l.a.createElement(vh.a,{value:1},"Inventory Kit 1"))),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-4 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-8 pr-0"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement("h6",{style:{fontWeight:"400"},className:"mb-0"},"9 Inch Nails")))))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"}),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-0"},l.a.createElement("h6",{className:"mb-0"},l.a.createElement(vh.a,{value:1},"Inventory Kit 2"))),l.a.createElement("div",{className:"col-12 col-sm-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-8 pr-0"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement(ku.a,{suffixIcon:l.a.createElement(wO.a,null),className:"qty-select-box",defaultValue:"a",placeholder:"Select Qty"},l.a.createElement(tL,{value:"a"},"QTY: 1"),l.a.createElement(tL,{value:"b"},"QTY: 2"))),l.a.createElement("div",{className:"col-12 col-sm-6 pr-0"},l.a.createElement("h6",{style:{fontWeight:"400"},className:"mb-0"},"9 Inch Nails")))))),l.a.createElement("div",{className:"col-12 col-sm-3 p-0"}),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,null))),l.a.createElement("div",{className:"row content-row-details"},l.a.createElement("div",{className:"col-12 col-sm-11"},l.a.createElement("h6",{style:{fontWeight:"400"},className:"mb-0"},l.a.createElement("span",{style:{color:"#E39999"}},"Inventory 1 has been deactivated"),", Click X to Activate ")),l.a.createElement("div",{className:"col-12 col-sm-1 text-right"},l.a.createElement(tp.a,{checked:!0,className:"in_active"})))))))))))))}}]),t}(n.Component),lL=(_u.a,_u.a.Item,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={visible:!1},e.showWorkOrderDetails=function(a){e.setState({visible:a})},e.handleClick=function(a){Sq({status:"IN_QUEUE"},a).then((function(a){e.props.statusUpdate(!0)})).catch((function(e){td(e)}))},e.handleStatusChange=function(a,t){Sq({status:a},t).then((function(a){e.props.statusUpdate(!0)})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props.workOrder;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row dispatch-work-details-row-main"},l.a.createElement("div",{className:"col-12"},a.map((function(a){var t,n,c,i,r,s,o,m,d,u,p,v,h,f,E,g,b,N,y,w,_,S=(null===a||void 0===a||null===(t=a.workorder)||void 0===t||null===(n=t.work_owner_contact)||void 0===n?void 0:n.length)&&(null===a||void 0===a||null===(c=a.workorder)||void 0===c||null===(i=c.work_owner_contact[0])||void 0===i||null===(r=i.site)||void 0===r?void 0:r.length)&&(null===a||void 0===a||null===(s=a.workorder)||void 0===s||null===(o=s.work_owner_contact[0])||void 0===o||null===(m=o.site[0])||void 0===m?void 0:m.site);return l.a.createElement("div",{className:"row mx-0 dispatch-word-card"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement("h6",null,l.a.createElement("div",{className:"work-id"},null===a||void 0===a||null===(d=a.workorder)||void 0===d?void 0:d.id),l.a.createElement("div",{className:"project-name"},(null===a||void 0===a||null===(u=a.workorder)||void 0===u||null===(p=u.project)||void 0===p?void 0:p.name)||"-")),l.a.createElement("small",null,(null===a||void 0===a||null===(v=a.workorder)||void 0===v?void 0:v.work_owner_contact)&&(null===a||void 0===a||null===(h=a.workorder)||void 0===h||null===(f=h.work_owner_contact[0])||void 0===f||null===(E=f.account)||void 0===E?void 0:E.name))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",null,l.a.createElement("img",{src:Rm.calendar_gary,alt:"",className:"img-fluid"}),(null===a||void 0===a||null===(g=a.workorder)||void 0===g?void 0:g.service_date)?hd()(null===a||void 0===a||null===(b=a.workorder)||void 0===b?void 0:b.service_date).format("MMM D, YYYY"):"-"," ","|"," ",(null===a||void 0===a||null===(N=a.workorder)||void 0===N?void 0:N.start_time)?hd()(null===a||void 0===a||null===(y=a.workorder)||void 0===y?void 0:y.start_time,"HH:mm").format("HH:mm A"):"-"," ","-"," ",(null===a||void 0===a||null===(w=a.workorder)||void 0===w?void 0:w.end_time)?hd()(null===a||void 0===a||null===(_=a.workorder)||void 0===_?void 0:_.end_time,"HH:mm").format("HH:mm A"):""),l.a.createElement("li",null,l.a.createElement("img",{src:Rm.location_gray_dispatch_14,alt:"",className:"img-fluid"}),(null===S||void 0===S?void 0:S.apartment)||""," ",(null===S||void 0===S?void 0:S.street_address)||""," ",(null===S||void 0===S?void 0:S.city)||""," ",null===S||void 0===S?void 0:S.state)),l.a.createElement("div",{style:{marginBottom:"25px"},className:"rescheduled-div p-0 shadow-none bg-transprent"},l.a.createElement(ku.a,{className:"status-small-select",value:nu(null===a||void 0===a?void 0:a.status),style:{width:"100%",textAlign:"center",fontSize:"13px"},onChange:function(t){return e.handleStatusChange(t,a.id)},suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(jq.Option,{value:"IN_QUEUE"},"Scheduled/In Queue"),l.a.createElement(jq.Option,{value:"RESCHEDULED"},"Need to be Rescheduled"),l.a.createElement(jq.Option,{value:"CANCELED"},"Permanently Canceled")))),l.a.createElement(Vm.a,{onClick:function(){return e.handleClick(a.id)},style:{color:"#38BC94",backgroundColor:"#FFFFFF"},className:"common-project-btn assign-btn"},"Add to calendar"))}))),l.a.createElement("div",{className:"col-12 text-center create-div"},this.props.loading?l.a.createElement(Wv.a,null):this.props.workOrder.length!==this.props.totalCount&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.props.handlePagination(),a.stopPropagation()}},"Load More"))),l.a.createElement(nL,{visible:this.state.visible,onClose:function(){return e.showWorkOrderDetails(!1)}})))}}]),t}(n.Component)),cL=t(691),iL=t.n(cL),rL=t(236),sL=t.n(rL),oL=ku.a.Option,mL={labelCol:{span:24},wrapperCol:{span:24}},dL=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={crewChief:"",employees:[],search:"",page:1,fetching:!1,totalCount:0,dispatchNow:!1,dispatchData:""},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove()},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(){e.handleSelect({crew_chief:null})},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Gp(a).then((function(a){e.setState({totalCount:a.data.count}),1==e.state.page?e.setState({employees:a.data.results}):e.setState((function(e){return{employees:[].concat(Object(Ou.a)(e.employees),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchEmployees({page:e.state.page})}))},e.handleSelect=function(a){var t;yq(a,null===(t=e.props.workOrder)||void 0===t?void 0:t.id).then((function(a){e.setState({crewChief:a.data}),e.handleDispatchDataById(),e.formRef.current.setFieldsValue({crew_chief:null})})).catch((function(e){td(e)}))},e.handleDispatchDataById=function(){var a,t;wq(null===(a=e.props)||void 0===a||null===(t=a.workOrder)||void 0===t?void 0:t.id).then((function(a){e.setState({dispatchData:a.data},(function(){e.handleRequiredCheck()}))})).catch((function(e){td(e)}))},e.handleRequiredCheck=function(){var a,t,n,l=e.state.dispatchData,c=[],i=null===l||void 0===l||null===(a=l.workorder)||void 0===a||null===(t=a.workorder_variant[0])||void 0===t?void 0:t.variant_data,r=((null===i||void 0===i||null===(n=i.table_pricing)||void 0===n?void 0:n.length)&&(null===i||void 0===i||i.table_pricing.forEach((function(e,a){if("LABOR"===e.type)l.labor_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1);else if("SUPPLY_GROUP"===e.type)l.supply_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1);else if("FLEET_GROUP"===e.type){l.fleet_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1)}return c}))),c.every((function(e){return!0===e})));e.state.dispatchData.crew_chief||e.handleDispatchNow(!1),r&&e.state.dispatchData.crew_chief?e.handleDispatchNow(!0):e.handleDispatchNow(!1)},e.handleCardStatus=function(a,t){Sq({status:a},t).then((function(a){e.props.handleDispatchNow(!0),e.handleDispatchDataById(),e.props.handleClose()})).catch((function(e){td(e)}))},e.handleDispatchNow=function(a){e.setState({dispatchNow:a})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d=this,u=this.props.workOrder,p=this.state,v=(p.crewChief,p.fetching),h=p.employees,f=p.totalCount,E=p.dispatchData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{className:"main-all-form-modal main-drawer-div drawer-update",title:"Assign Resources",placement:"right",width:"75%",maskClosable:!1,closable:!0,onClose:this.props.handleClose,visible:this.props.visible},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 dispatch-word-card position-relative pb-0"},l.a.createElement("div",{className:"status-btn"},null===E||void 0===E?void 0:E.status),l.a.createElement("div",{className:"col-12 position-relative dispatch-card-heading"},l.a.createElement("h6",null,l.a.createElement("div",{className:"work-id"},null===E||void 0===E||null===(e=E.workorder)||void 0===e?void 0:e.id),l.a.createElement("div",{className:"project-name"},null===E||void 0===E||null===(a=E.workorder)||void 0===a||null===(t=a.project)||void 0===t?void 0:t.name))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline  "},l.a.createElement("li",{className:"pl-0 text-left"},l.a.createElement("img",{src:Rm.calendar_gary,alt:"",className:"img-fluid"}),(null===E||void 0===E||null===(n=E.workorder)||void 0===n?void 0:n.service_date)?hd()(null===E||void 0===E||null===(c=E.workorder)||void 0===c?void 0:c.service_date).format("MMM D ,YYYY"):"-"," ","|"," ",(null===E||void 0===E||null===(i=E.workorder)||void 0===i?void 0:i.start_time)?hd()(null===E||void 0===E||null===(r=E.workorder)||void 0===r?void 0:r.start_time,"HH:mm").format("HH:mm A"):"-"," ","-"," ",(null===E||void 0===E||null===(s=E.workorder)||void 0===s?void 0:s.end_time)?hd()(null===E||void 0===E||null===(o=E.workorder)||void 0===o?void 0:o.end_time,"HH:mm").format("HH:mm A"):""))),l.a.createElement("div",{className:"col-12 "},(E.status,l.a.createElement(Vm.a,{disabled:this.props.assignPending||!this.state.dispatchNow,className:"common-project-btn assign-btn dispatch-btn-new",onClick:function(){d.handleCardStatus("PENDING",E.id)}},"dispatch now"))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("hr",{className:"hr-line"})),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},mL,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"crew_chief",label:"Crew Chief",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{placeholder:"Search",filterOption:!1,onFocus:function(){d.setState({page:1},(function(){d.fetchEmployees({page:d.state.page})}))},onSearch:function(e){return d.fetchEmployees({search:e})},onSelect:function(e){return d.handleSelect({crew_chief:e})},showSearch:!0,className:"custom-search-select",dropdownClassName:"custom-search-select option-design-fix",dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},v?l.a.createElement(Wv.a,null):h.length!==f&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(e){d.handlePagination(),e.stopPropagation()}},"Load More"))))))}},h.map((function(e){return l.a.createElement(oL,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},e.first_name.split("")[0],e.last_name.split("")[0])),l.a.createElement("h6",{className:"mb-0"},e.first_name," ",e.last_name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Employee")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})))))),!(null===E||void 0===E?void 0:E.crew_chief)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.creq_chef_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{style:{color:"#bdbdbd"},className:"mb-0"},"No Crew Chief")))),(null===E||void 0===E?void 0:E.crew_chief)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{style:{width:"80%"},className:"d-flex align-items-center float-left"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},E.crew_chief.split(" ")[0].split("")[0],E.crew_chief.split(" ")[1].split("")[0])),l.a.createElement("div",{className:"user-info-div pt-0"},l.a.createElement("h6",null,E.crew_chief))),l.a.createElement("div",{style:{width:"20%"},className:"resource-name float-left text-right"},"Crew Chief")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:this.menu(),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))))),l.a.createElement("div",{className:"col-12 update-table-dispatch"},u?l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table dispatch-service-varient"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"ASSIGNEE")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONT Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONTAINER")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"UOM")))),l.a.createElement("div",{className:"row mx-0 w-100"},null===u||void 0===u||null===(m=u.workorder)||void 0===m?void 0:m.workorder_variant.map((function(e){var a,t;return l.a.createElement(Aq,{assignPending:d.props.assignPending,key:null===e||void 0===e?void 0:e.id,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===(t=e.variant_data)||void 0===t?void 0:t.region,workorderData:E,handleDispatchNow:d.handleDispatchNow,manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),margin:null===e||void 0===e?void 0:e.margin,getDispatchInqueue:d.handleDispatchDataById,crewChief:d.state.crewChief,newPricing:e,view:!1})}))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Service Variants"))))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{crewChief:Object(wu.a)({},e.workOrder)}}}]),t}(n.Component),uL=(_u.a,_u.a.Item,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,workOrder:[],data:{},newPricing:[],page:1,loading:!1,inqueue:[],enroute:[],dispatched:[],visibleResource:!1,dispatchCard:{},cardData:"",date:"",closeDate:"",assignPending:!1},e.child=l.a.createRef(),e.handleDrawer=function(a,t,n){e.setState({visibleResource:a,cardData:t,assignPending:n},(function(){e.child.current.handleDispatchDataById()}))},e.handleClose=function(){e.setState({visibleResource:!1},(function(){e.getDispatchEnroute({service_date:e.state.closeDate,warehouse:e.props.warehouseId}),e.getDispatchInqueue({service_date:e.state.closeDate,warehouse:e.props.warehouseId}),e.getDispatchDispatched({service_date:e.state.closeDate,warehouse:e.props.warehouseId})}))},e.handleCalender=function(){var a=new Date,t=hd()(a).format("YYYY-MM-DD");e.setState({closeDate:t}),e.setState({date:a},(function(){e.getDispatchInqueue({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchEnroute({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchDispatched({service_date:t,warehouse:e.props.warehouseId})}))},e.getSelectedServiceVariants=function(){var a=e.state.workOrder;tV({workorder:null===a||void 0===a?void 0:a.id}).then(function(){var a=Object(Qm.a)($m.a.mark((function a(t){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.setState({newPricing:t.data});case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){td(e)}))},e.checkAddressSitePresent=function(e){var a,t,n,l,c,i,r,s,o=(null===e||void 0===e||null===(a=e.workorder)||void 0===a||null===(t=a.work_owner_contact)||void 0===t?void 0:t.length)&&(null===e||void 0===e||null===(n=e.workorder)||void 0===n||null===(l=n.work_owner_contact[0])||void 0===l||null===(c=l.site)||void 0===c?void 0:c.length)&&(null===e||void 0===e||null===(i=e.workorder)||void 0===i||null===(r=i.work_owner_contact[0])||void 0===r||null===(s=r.site[0])||void 0===s?void 0:s.site);return o||null},e.getDispatchInqueue=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Cq(a).then((function(a){e.setState({inqueue:a.data.results,loading:!1},(function(){e.setlineItems()}))})).catch((function(e){td(e)}))},e.getDispatchDispatched=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_q(a).then((function(a){e.setState({dispatched:a.data.results}),e.setlineItems()})).catch((function(e){td(e)}))},e.getDispatchEnroute=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oq(a).then((function(a){e.setState({enroute:a.data.results}),e.setlineItems()})).catch((function(e){td(e)}))},e.handleStatusChange=function(a,t){Sq({status:a},t).then((function(a){e.getDispatchInqueue({service_date:e.state.closeDate,warehouse:e.props.warehouseId}),e.getDispatchEnroute({service_date:e.state.closeDate,warehouse:e.props.warehouseId}),e.props.fetchWorkorder({warehouse:e.props.warehouseId})})).catch((function(e){td(e)}))},e.handleIncreaseDate=function(){var a=kd(new Date(e.state.date),1),t=hd()(a).format("YYYY-MM-DD");e.setState({closeDate:t}),e.setState({date:a},(function(){e.getDispatchInqueue({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchEnroute({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchDispatched({service_date:t,warehouse:e.props.warehouseId})}))},e.handleDecrementDate=function(){var a=jd(new Date(e.state.date),1),t=hd()(a).format("YYYY-MM-DD");e.setState({closeDate:t}),e.setState({date:a},(function(){e.getDispatchInqueue({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchEnroute({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchDispatched({service_date:t,warehouse:e.props.warehouseId})}))},e.handleDataCalendar=function(a){var t=hd()(a).format("YYYY-MM-DD");e.setState({closeDate:t}),e.setState({date:a},(function(){e.getDispatchInqueue({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchEnroute({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchDispatched({service_date:t,warehouse:e.props.warehouseId})}))},e.setlineItems=function(){var a={lanes:[{id:"lane1",title:l.a.createElement("div",{className:"data-details-inn d-flex align-items-center justify-content-center"},l.a.createElement("h6",{className:"mb-0"},"Assign resources")),cards:e.state.inqueue.map((function(a){var t,n,c,i,r,s=e.checkAddressSitePresent(a);return{id:a.id.toString(),title:!1,description:l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"w-100 d-inline-block px-3"},l.a.createElement("h6",{className:"mb-0 position-relative"},l.a.createElement("span",{className:"total-assign"},null===(t=a.workorder)||void 0===t?void 0:t.id)," ",l.a.createElement("span",{className:"line-y"},"|")," ",null===(n=a.workorder)||void 0===n||null===(c=n.project)||void 0===c?void 0:c.name," "),l.a.createElement("p",{className:"mb-0"},(null===(i=a.workorder)||void 0===i?void 0:i.work_owner_contact.length)&&(null===(r=a.workorder)||void 0===r?void 0:r.work_owner_contact[0].account.name)),l.a.createElement("p",{className:"site-address-dispatch"},l.a.createElement("img",{src:Rm.location_gray_dispatch_14,alt:"",className:"img-fluid"}),(null===s||void 0===s?void 0:s.apartment)||""," ",(null===s||void 0===s?void 0:s.street_address)||""," ",(null===s||void 0===s?void 0:s.city)||""," ",null===s||void 0===s?void 0:s.state),l.a.createElement("div",{style:{marginTop:"15px"},className:"rescheduled-div p-0 shadow-none bg-transprent"},l.a.createElement(ku.a,{className:"status-small-select",value:"NOT_ACCEPTED"==(null===a||void 0===a?void 0:a.status)?"Not Accepted":null===a||void 0===a?void 0:a.status,style:{width:"100%",textAlign:"center",fontSize:"13px",color:"NOT_ACCEPTED"===a.status&&"red"},onChange:function(t){return e.handleStatusChange(t,a.id)},suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(jq.Option,{value:"SERVICE_REQUEST"},"Service Request"),l.a.createElement(jq.Option,{value:"RESCHEDULED"},"Need to be Rescheduled"),l.a.createElement(jq.Option,{value:"CANCELED"},"Permanently Canceled"),l.a.createElement(jq.Option,{value:"IN_QUEUE"},"Scheduled/In Queue"))),l.a.createElement(Vm.a,{style:{backgroundColor:"#38BC94"},className:"common-project-btn assign-btn",onClick:function(){return e.handleDrawer(!0,a)}},"Assign resources")))}}))},{id:"lane2",title:l.a.createElement("div",{className:"data-details-inn d-flex align-items-center justify-content-center"},l.a.createElement("h6",{className:"mb-0"},"WAITING ON CREW CHIEF")),cards:e.state.enroute.map((function(a){var t,n,c,i,r,s=e.checkAddressSitePresent(a);return{id:"Card2",title:!1,description:l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"w-100 d-inline-block px-3"},l.a.createElement("h6",{className:"mb-0"},l.a.createElement("span",{className:"total-assign"},null===(t=a.workorder)||void 0===t?void 0:t.id)," ",l.a.createElement("span",{className:"line-y"},"|")," ",null===(n=a.workorder)||void 0===n||null===(c=n.project)||void 0===c?void 0:c.name),l.a.createElement("p",{className:"mb-0"},(null===(i=a.workorder)||void 0===i?void 0:i.work_owner_contact.length)&&(null===(r=a.workorder)||void 0===r?void 0:r.work_owner_contact[0].account.name)),l.a.createElement("p",{className:"site-address-dispatch"},l.a.createElement("img",{src:Rm.location_gray_dispatch_14,alt:"",className:"img-fluid"}),(null===s||void 0===s?void 0:s.apartment)||""," ",(null===s||void 0===s?void 0:s.street_address)||""," ",(null===s||void 0===s?void 0:s.city)||""," ",null===s||void 0===s?void 0:s.state),l.a.createElement("div",{style:{marginTop:"15px"},className:"rescheduled-div p-0 shadow-none bg-transprent"},l.a.createElement(ku.a,{className:"status-small-select",value:null===a||void 0===a?void 0:a.status.split("_").join(" "),style:{width:"100%",textAlign:"center",fontSize:"13px"},onChange:function(t){return e.handleStatusChange(t,a.id)},suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},l.a.createElement(jq.Option,{value:"SERVICE_REQUEST"},"Service Request"),l.a.createElement(jq.Option,{value:"RESCHEDULED"},"Need to be Rescheduled"),l.a.createElement(jq.Option,{value:"CANCELED"},"Permanently Canceled"),l.a.createElement(jq.Option,{value:"IN_QUEUE"},"In Queue"))),l.a.createElement(Vm.a,{className:"common-project-btn assign-btn",onClick:function(){return e.handleDrawer(!0,a,!0,"Pending")}},"REVIEW")))}}))},{id:"lane3",title:l.a.createElement("div",{className:"data-details-inn d-flex align-items-center justify-content-center"},l.a.createElement("h6",{className:"mb-0"},"ACCEPTED")),cards:e.state.dispatched.map((function(a){var t,n,c,i,r,s=e.checkAddressSitePresent(a);return{id:"Card3",title:!1,description:l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"w-100 d-inline-block px-3"},l.a.createElement("h6",{className:"mb-0"},l.a.createElement("span",{className:"total-assign"},null===(t=a.workorder)||void 0===t?void 0:t.id)," ",l.a.createElement("span",{className:"line-y"},"|")," ",null===(n=a.workorder)||void 0===n||null===(c=n.project)||void 0===c?void 0:c.name),l.a.createElement("p",{className:"mb-0"},(null===(i=a.workorder)||void 0===i?void 0:i.work_owner_contact.length)&&(null===(r=a.workorder)||void 0===r?void 0:r.work_owner_contact[0].account.name)),l.a.createElement("p",{className:"site-address-dispatch"},l.a.createElement("img",{src:Rm.location_gray_dispatch_14,alt:"",className:"img-fluid"}),(null===s||void 0===s?void 0:s.apartment)||""," ",(null===s||void 0===s?void 0:s.street_address)||""," ",(null===s||void 0===s?void 0:s.city)||""," ",null===s||void 0===s?void 0:s.state),l.a.createElement("div",{className:"tag-common rescheduled-div"},null===a||void 0===a?void 0:a.status.split("_").join(" ")),l.a.createElement(Vm.a,{style:{backgroundColor:"#F7FEFC",color:"#38BC94",boxShadow:"none"},className:"common-project-btn assign-btn"},l.a.createElement(EE.a,null),"Dispatched")))}}))}]};e.setState({data:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.handleCalender()}},{key:"render",value:function(){var e,a,t,n,c,i,r=this.state,s=(r.workOrder,r.data);r.newPricing;return l.a.createElement("div",{className:"row dispatch-left-min-header-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row drag-drop-main-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 px-0 data-header-employees"},l.a.createElement("div",{style:{minHeight:"56px",width:"100%"},className:"box-1-header justify-content-center"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"arrow-btn",onClick:this.handleDecrementDate},l.a.createElement("img",{src:Rm.arrow_small_left,alt:"",className:"img-fluid"}))),l.a.createElement("li",{className:"list-inline-item"},"".concat(null===(e=this.state.date)||void 0===e||null===(a=e.toString())||void 0===a?void 0:a.split(" ")[0],", ").concat(null===(t=this.state.date)||void 0===t||null===(n=t.toString())||void 0===n?void 0:n.split(" ")[1]," ").concat(null===(c=this.state.date)||void 0===c||null===(i=c.toString())||void 0===i?void 0:i.split(" ")[2]),l.a.createElement(Hv.a,{format:"YYYY-MM-DD",className:"datePicker-calendar",onChange:this.handleDataCalendar,allowClear:!1})),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"arrow-btn",onClick:this.handleIncreaseDate},l.a.createElement("img",{src:Rm.arrow_small_right,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 px-0 data-header-employees data-header-employees-scroll"},l.a.createElement("div",{className:"data-header-employees-scroll-common",onScroll:this.handleScroll},l.a.createElement("div",{className:"row mx-0 data-card-main"},l.a.createElement("div",{className:"col-12 p-0"},sL()(s)?l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)):l.a.createElement(iL.a,{className:"custom-data-board",data:s}))))))))))),this.state.cardData?l.a.createElement(dL,{assignPending:this.state.assignPending,ref:this.child,visible:this.state.visibleResource,handleClose:this.handleClose,handleDispatchNow:this.props.handleDispatchNow,workOrder:this.state.cardData}):"")}}]),t}(n.Component)),pL=t(172),vL=ku.a.Option,hL={labelCol:{span:24},wrapperCol:{span:24}},fL=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={crewChief:"",employees:[],search:"",page:1,fetching:!1,totalCount:0,dispatchNow:!1,dispatchData:""},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove()},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(){e.handleSelect({crew_chief:null})},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Gp(a).then((function(a){e.setState({totalCount:a.data.count}),1==e.state.page?e.setState({employees:a.data.results}):e.setState((function(e){return{employees:[].concat(Object(Ou.a)(e.employees),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchEmployees({page:e.state.page})}))},e.handleSelect=function(a){var t,n;yq(a,null===(t=e.props.workOrder)||void 0===t||null===(n=t.dispatch)||void 0===n?void 0:n.id).then((function(a){e.setState({crewChief:a.data}),e.handleDispatchDataById(),e.formRef.current.setFieldsValue({crew_chief:null})})).catch((function(e){td(e)}))},e.handleDispatchDataById=function(){var a,t;wq(null===(a=e.props.workOrder)||void 0===a||null===(t=a.dispatch)||void 0===t?void 0:t.id).then((function(a){e.setState({dispatchData:a.data},(function(){e.handleRequiredCheck()}))})).catch((function(e){td(e)}))},e.handleRequiredCheck=function(){var a,t,n,l=e.state.dispatchData,c=[],i=null===l||void 0===l||null===(a=l.workorder)||void 0===a||null===(t=a.workorder_variant[0])||void 0===t?void 0:t.variant_data,r=((null===i||void 0===i||null===(n=i.table_pricing)||void 0===n?void 0:n.length)&&(null===i||void 0===i||i.table_pricing.forEach((function(e,a){if("LABOR"===e.type)l.labor_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1);else if("SUPPLY_GROUP"===e.type)l.supply_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1);else if("FLEET_GROUP"===e.type){l.fleet_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1)}return c}))),c.every((function(e){return!0===e})));e.state.dispatchData.crew_chief||e.handleDispatchNow(!1),r&&e.state.dispatchData.crew_chief?e.handleDispatchNow(!0):e.handleDispatchNow(!1)},e.handleCardStatus=function(a,t){Sq({status:a},t).then((function(a){e.handleDispatchDataById()})).catch((function(e){td(e)}))},e.handleDispatchNow=function(a){e.setState({dispatchNow:a})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m=this,d=this.props.workOrder,u=this.state,p=(u.crewChief,u.fetching),v=u.employees,h=u.totalCount,f=u.dispatchData;(null===d||void 0===d||null===(e=d.work_owner_contact)||void 0===e?void 0:e.length)&&(null===d||void 0===d||null===(a=d.work_owner_contact[0])||void 0===a||null===(t=a.site)||void 0===t?void 0:t.length)&&(null===d||void 0===d||null===(n=d.work_owner_contact[0])||void 0===n||null===(c=n.site[0])||void 0===c||c.site),(null===d||void 0===d||null===(i=d.work_owner_contact)||void 0===i?void 0:i.length)&&(null===d||void 0===d||null===(r=d.work_owner_contact[0])||void 0===r||r.account);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{className:"main-all-form-modal main-drawer-div drawer-update",title:"Assign Resources",placement:"right",width:"75%",maskClosable:!1,closable:!0,onClose:this.props.onClose,visible:this.props.visible},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 dispatch-word-card position-relative pb-0"},l.a.createElement("div",{className:"status-btn"},null===d||void 0===d?void 0:d.status),l.a.createElement("div",{className:"col-12 position-relative dispatch-card-heading"},l.a.createElement("h6",null,l.a.createElement("div",{className:"work-id"},null===d||void 0===d?void 0:d.id),l.a.createElement("div",{className:"project-name"},null===d||void 0===d||null===(s=d.project)||void 0===s?void 0:s.name))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline  "},l.a.createElement("li",{className:"pl-0 text-left"},l.a.createElement("img",{src:Rm.calendar_gary,alt:"",className:"img-fluid"}),hd()(null===d||void 0===d?void 0:d.service_date).format("MMM D ,YYYY")," ","|"," ",hd()(null===d||void 0===d?void 0:d.start_time,"HH:mm").format("HH:mm A")," ","-"," ",hd()(null===d||void 0===d?void 0:d.end_time,"HH:mm").format("HH:mm A")))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Vm.a,{disabled:!this.state.dispatchNow,className:"common-project-btn assign-btn dispatch-btn-new",onClick:function(){var e;m.handleCardStatus("PENDING",null===d||void 0===d||null===(e=d.dispatch)||void 0===e?void 0:e.id),m.props.onClose()}},"dispatch now")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("hr",{className:"hr-line"})),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},hL,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"crew_chief",label:"Crew Chief",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{placeholder:"Search",filterOption:!1,onFocus:function(){m.setState({page:1},(function(){m.fetchEmployees({page:m.state.page})}))},onSearch:function(e){return m.fetchEmployees({search:e})},onSelect:function(e){return m.handleSelect({crew_chief:e})},showSearch:!0,className:"custom-search-select",dropdownClassName:"custom-search-select option-design-fix",dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},p?l.a.createElement(Wv.a,null):v.length!==h&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(e){m.handlePagination(),e.stopPropagation()}},"Load More"))))))}},v.map((function(e){return l.a.createElement(vL,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},e.first_name.split("")[0],e.last_name.split("")[0])),l.a.createElement("h6",{className:"mb-0"},e.first_name," ",e.last_name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Employee")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})))))),!(null===f||void 0===f?void 0:f.crew_chief)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.creq_chef_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{style:{color:"#bdbdbd"},className:"mb-0"},"No Crew Chief")))),(null===f||void 0===f?void 0:f.crew_chief)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{style:{width:"80%"},className:"d-flex align-items-center float-left"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},f.crew_chief.split(" ")[0].split("")[0],f.crew_chief.split(" ")[1].split("")[0])),l.a.createElement("div",{className:"user-info-div pt-0"},l.a.createElement("h6",null,f.crew_chief))),l.a.createElement("div",{style:{width:"20%"},className:"resource-name float-left text-right"},"Crew Chief")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:this.menu(),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))))),l.a.createElement("div",{className:"col-12 update-table-dispatch"},d?l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table dispatch-service-varient"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"ASSIGNEE")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONT Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONTAINER")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"UOM")))),l.a.createElement("div",{className:"row mx-0 w-100"},(null===d||void 0===d?void 0:d.workorder_variant)&&(null===d||void 0===d||null===(o=d.workorder_variant)||void 0===o?void 0:o.map((function(e){var a,t;return l.a.createElement(Aq,{assignPending:m.props.assignPending,key:null===e||void 0===e?void 0:e.id,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===(t=e.variant_data)||void 0===t?void 0:t.region,workorderData:f,handleDispatchNow:m.handleDispatchNow,manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),margin:null===e||void 0===e?void 0:e.margin,getDispatchInqueue:m.handleDispatchDataById,crewChief:m.state.crewChief,newPricing:e,view:!1})})))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Service Variants"))))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{crewChief:Object(wu.a)({},e.workOrder)}}}]),t}(n.Component),EL={labelCol:{span:24},wrapperCol:{span:24}},gL=fu.a.Panel,bL=ku.a.Option,NL=function(e){var a=Object(n.useRef)();return console.log(e),Object(n.useEffect)((function(){var t,n,l,c,i,r,s,o,m,d,u;console.log(e.serviceInfoData,"service data"),console.log(null===e||void 0===e||null===(t=e.serviceInfoData)||void 0===t?void 0:t.service_date,"service dat"),a.current.setFieldsValue({service_date:hd()(null===e||void 0===e||null===(n=e.serviceInfoData)||void 0===n||null===(l=n.workorder)||void 0===l?void 0:l.service_date),billing_account_po:e.serviceInfoData.billing_account_po,start_time:(null===(c=e.serviceInfoData)||void 0===c||null===(i=c.workorder)||void 0===i?void 0:i.start_time)&&hd()(null===(r=e.serviceInfoData)||void 0===r||null===(s=r.workorder)||void 0===s?void 0:s.start_time,"HH:mm:ss"),end_time:(null===(o=e.serviceInfoData)||void 0===o||null===(m=o.workorder)||void 0===m?void 0:m.end_time)&&hd()(null===(d=e.serviceInfoData)||void 0===d||null===(u=d.workorder)||void 0===u?void 0:u.end_time,"HH:mm:ss")})}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Edit Service Information",visible:e.visible,onOk:e.onClose,closable:!0,onClose:e.onClose,onCancel:e.onClose,className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{type:"primary",onClick:function(){a.current.setFieldsValue({service_date:"",start_time:"",end_time:"",billing_account_po:""}),e.onClose()}},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{className:"collapse-update",defaultActiveKey:["1"],onChange:function(e){console.log(e)},expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(gL,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information *"))),key:"1"},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose service date and time."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:a,onFinish:function(a){console.log(a);var t={service_date:a.service_date.format("YYYY-MM-DD"),start_time:a.start_time.format("HH:mm:ss.sss"),end_time:a.end_time?a.end_time.format("HH:mm:ss.sss"):null,billing_account_po:a.billing_account_po||null};DP(e.serviceInfoData.id,t).then((function(e){console.log(e.data,"response workorder")})).catch((function(e){td(e)}))}},EL,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",null,"Service Date & Time")),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"service_date",label:"Service Date *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"billing_account_po",label:"Billing Account PO#/Job#"},l.a.createElement(Pm.a,{placeholder:"Type something"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"start_time",label:"Estimated Start Time *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(yV.a,{placeholder:"Select Estimated Start Time"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"end_time",label:"Estimated End Time",className:"position-relative"},l.a.createElement(yV.a,{placeholder:"Select Estimated End Time"}))),l.a.createElement("div",{className:"hr-line"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row set-to-repeat-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",null,"Set to Repeat")),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row position-relative"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"set_to-repeat",label:"Set ot Repeat"},l.a.createElement(ku.a,{placeholder:"Select"},l.a.createElement(bL,{key:1,value:1},"Does not repeat"),l.a.createElement(bL,{key:2,value:2},"Repeat")))),l.a.createElement("div",{className:"coming-soon-div coming-soon-div-update"},"Coming Soon"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{htmlType:"submit",className:"validate-btn-main"},"Save and Continue")))))))))))))))},yL={labelCol:{span:24},wrapperCol:{span:24}},wL=fu.a.Panel,_L=ku.a.Option,SL=function(e){var a,t=Object(n.useRef)(),c=Object(n.useState)([]),i=Object(yp.a)(c,2),r=i[0],s=i[1],o=Object(n.useState)(null),m=Object(yp.a)(o,2),d=m[0],u=m[1],p=Object(n.useState)(!1),v=Object(yp.a)(p,2),h=(v[0],v[1]);function f(){TP(e.warehouseData.workorder.id).then((function(e){u(e.data)})).catch((function(e){td(e)}))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(!0),tg(e).then((function(e){s(e.data.results)})).catch((function(e){td(e)})).finally((function(){h(!1)}))}return Object(n.useEffect)((function(){f()}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,destroyOnClose:!0,title:"Edit Warehouse / Dispatch",visible:e.visible,onOk:e.onClose,closable:!0,onClose:e.onClose,onCancel:e.onClose,className:"main-all-form-modal main-drawer-div internal-location drawer-update",width:"625px",placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{type:"primary",onClick:e.onClose},"Continue"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],onChange:function(e){console.log(e)},expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(wL,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"info-card-heading-row row d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Warehouse / Dispatch Origin *"))),key:"1"},l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose warehouse / Dispatch Origin"))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:t},yL,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{dropdownClassName:"option-design-fix",name:"warehouse",label:"Warehouse *",className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,disabled:(null===d||void 0===d||null===(a=d.workorder_warehouse)||void 0===a?void 0:a.length)>0,className:"search-and-select-tag",showSearch:!0,onFocus:function(){return E()},onSearch:function(e){return E({search:e})},onChange:function(a){t.current.setFieldsValue({warehouse:null}),ZP({work_order:e.warehouseData.workorder.id,warehouse:a.value}).then((function(e){f()})).catch((function(e){td(e)}))},placeholder:"Search",filterOption:!1,removeIcon:""},r.length>0&&r.map((function(e){return l.a.createElement(_L,{key:e.id,value:e.id},l.a.createElement("div",{className:"row custom-tree-row custom-tree-row-1"},l.a.createElement("div",{className:"common-select-option-row col-12 d-flex align-items-center"},l.a.createElement("div",{style:{width:"40px"},className:"float-left"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"float-left warehouse-select-box"},l.a.createElement("h6",{className:"mb-0 w-100 d-inline-block ml-1"},e.name),l.a.createElement("p",{style:{color:"#BDBDBD",fontSize:"11px"},className:"mb-0"},e.city," ",e.state," ",e.country)),l.a.createElement("div",{style:{display:"inline-block"},className:"text-green-tag text-center select-text-tier"},"Warehouse"))))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:25}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{className:"create-btn-main position-absolute text-capitalize"},"+ Create")),l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row mx-0"},d?d.workorder_warehouse.map((function(e){var a,t,n,c,i,r;return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card mb-2 position-relative"},l.a.createElement("div",{className:"col-12 col-sm-5 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("h6",{style:{fontSize:"15px",color:"#4f4f4f",fontWeight:"500"},className:"text-capitalize mb-0"},null===(a=e.warehouse)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"col-12 col-sm-7 px-3 pt-2 pb-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){d&&eV(d.workorder_warehouse[0].id).then((function(e){f()}))},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{style:{width:"20px",right:"0",bottom:"auto",top:"-5px"},className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"}))),l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{style:{color:"#333333"},className:"mb-0"},null===(t=e.warehouse)||void 0===t?void 0:t.city," ",null===(n=e.warehouse)||void 0===n?void 0:n.state," ",null===(c=e.warehouse)||void 0===c?void 0:c.country," ")),l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100,color:"#333333"}},null===(i=e.warehouse)||void 0===i?void 0:i.email)),l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{style:{color:"#333333"},className:"mb-0"},null===(r=e.warehouse)||void 0===r?void 0:r.phone))))))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"location-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No warehouses"))))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue"))))))))))))))},xL=ku.a.Option,CL={labelCol:{span:24},wrapperCol:{span:24}},OL=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={crewChief:"",employees:[],search:"",page:1,fetching:!1,totalCount:0,dispatchNow:!1,dispatchData:""},e.formRef=l.a.createRef(),e.menu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.handleRemove()},className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.handleRemove=function(){e.handleSelect({crew_chief:null})},e.fetchEmployees=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),Gp(a).then((function(a){e.setState({totalCount:a.data.count}),1==e.state.page?e.setState({employees:a.data.results}):e.setState((function(e){return{employees:[].concat(Object(Ou.a)(e.employees),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({fetching:!1})}))},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchEmployees({page:e.state.page})}))},e.handleSelect=function(a){var t,n;yq(a,null===(t=e.props.workOrder)||void 0===t||null===(n=t.dispatch)||void 0===n?void 0:n.id).then((function(a){e.setState({crewChief:a.data}),e.handleDispatchDataById(),e.formRef.current.setFieldsValue({crew_chief:null})})).catch((function(e){td(e)}))},e.handleDispatchDataById=function(){var a,t;wq(null===(a=e.props.workOrder)||void 0===a||null===(t=a.dispatch)||void 0===t?void 0:t.id).then((function(a){e.setState({dispatchData:a.data},(function(){e.handleRequiredCheck()}))})).catch((function(e){td(e)}))},e.handleRequiredCheck=function(){var a,t,n,l=e.state.dispatchData,c=[],i=null===l||void 0===l||null===(a=l.workorder)||void 0===a||null===(t=a.workorder_variant[0])||void 0===t?void 0:t.variant_data,r=((null===i||void 0===i||null===(n=i.table_pricing)||void 0===n?void 0:n.length)&&(null===i||void 0===i||i.table_pricing.forEach((function(e,a){if("LABOR"===e.type)l.labor_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1);else if("SUPPLY_GROUP"===e.type)l.supply_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1);else if("FLEET_GROUP"===e.type){l.fleet_assignee.find((function(a){return a.id==e.id}))?c.push(!0):c.push(!1)}return c}))),c.every((function(e){return!0===e})));e.state.dispatchData.crew_chief||e.handleDispatchNow(!1),r&&e.state.dispatchData.crew_chief?e.handleDispatchNow(!0):e.handleDispatchNow(!1)},e.handleCardStatus=function(a,t){Sq({status:a},t).then((function(a){e.handleDispatchDataById()})).catch((function(e){td(e)}))},e.handleDispatchNow=function(a){e.setState({dispatchNow:a})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d,u,p,v,h,f,E,g=this,b=this.props.workOrder,N=this.state,y=(N.crewChief,N.fetching),w=N.employees,_=N.totalCount;N.dispatchData,(null===b||void 0===b||null===(e=b.work_owner_contact)||void 0===e?void 0:e.length)&&(null===b||void 0===b||null===(a=b.work_owner_contact[0])||void 0===a||null===(t=a.site)||void 0===t?void 0:t.length)&&(null===b||void 0===b||null===(n=b.work_owner_contact[0])||void 0===n||null===(c=n.site[0])||void 0===c||c.site),(null===b||void 0===b||null===(i=b.work_owner_contact)||void 0===i?void 0:i.length)&&(null===b||void 0===b||null===(r=b.work_owner_contact[0])||void 0===r||r.account);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{className:"main-all-form-modal main-drawer-div drawer-update",title:"Assign Resources",placement:"right",width:"75%",maskClosable:!1,closable:!0,onClose:this.props.onClose,visible:this.props.visible},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 dispatch-word-card position-relative pb-0"},l.a.createElement("div",{className:"status-btn"},null===b||void 0===b||null===(s=b.workorder)||void 0===s?void 0:s.status),l.a.createElement("div",{className:"col-12 position-relative dispatch-card-heading"},l.a.createElement("h6",null,l.a.createElement("div",{className:"work-id"},null===b||void 0===b||null===(o=b.workorder)||void 0===o?void 0:o.id),l.a.createElement("div",{className:"project-name"},null===b||void 0===b||null===(m=b.workorder)||void 0===m||null===(d=m.project)||void 0===d?void 0:d.name))),l.a.createElement("div",{className:"col-12"},l.a.createElement("ul",{className:"list-inline  "},l.a.createElement("li",{className:"pl-0 text-left"},l.a.createElement("img",{src:Rm.calendar_gary,alt:"",className:"img-fluid"}),hd()(null===b||void 0===b||null===(u=b.workorder)||void 0===u?void 0:u.service_date).format("MMM D ,YYYY")," ","|"," ",hd()(null===b||void 0===b||null===(p=b.workorder)||void 0===p?void 0:p.start_time,"HH:mm").format("HH:mm A")," ","-"," ",hd()(null===b||void 0===b||null===(v=b.workorder)||void 0===v?void 0:v.end_time,"HH:mm").format("HH:mm A")))),l.a.createElement("div",{className:"col-12 "},l.a.createElement(Vm.a,{disabled:!0,className:"common-project-btn assign-btn dispatch-btn-new",onClick:function(){var e;g.handleCardStatus("PENDING",null===b||void 0===b||null===(e=b.dispatch)||void 0===e?void 0:e.id),g.props.onClose()}},"dispatch now")))),l.a.createElement("div",{className:"col-12"},l.a.createElement("hr",{className:"hr-line"})),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},CL,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"crew_chief",label:"Crew Chief",rules:[{required:!1,message:""}],className:"position-relative remove-cross-icon"},l.a.createElement(ku.a,{disabled:!0,placeholder:"Search",filterOption:!1,onFocus:function(){g.setState({page:1},(function(){g.fetchEmployees({page:g.state.page})}))},onSearch:function(e){return g.fetchEmployees({search:e})},onSelect:function(e){return g.handleSelect({crew_chief:e})},showSearch:!0,className:"custom-search-select",dropdownClassName:"custom-search-select option-design-fix",dropdownRender:function(e){return l.a.createElement(l.a.Fragment,null,e,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},y?l.a.createElement(Wv.a,null):w.length!==_&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(e){g.handlePagination(),e.stopPropagation()}},"Load More"))))))}},w.map((function(e){return l.a.createElement(xL,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},e.first_name.split("")[0],e.last_name.split("")[0])),l.a.createElement("h6",{className:"mb-0"},e.first_name," ",e.last_name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Employee")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})))))),!(null===b||void 0===b?void 0:b.crew_chief)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.creq_chef_small,alt:"",className:"img-fluid"}),l.a.createElement("h6",{style:{color:"#bdbdbd"},className:"mb-0"},"No Crew Chief")))),(null===b||void 0===b?void 0:b.crew_chief)&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row contact-row-line"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{height:"68px",minHeight:"68px"},className:"row mx-0 align-items-center user-info-div-main position-relative opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{style:{width:"80%"},className:"d-flex align-items-center float-left"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"text-uppercase user-name-tg"},b.crew_chief.split(" ")[0].split("")[0],b.crew_chief.split(" ")[1].split("")[0])),l.a.createElement("div",{className:"user-info-div pt-0"},l.a.createElement("h6",null,null===b||void 0===b?void 0:b.crew_chief))),l.a.createElement("div",{style:{width:"20%"},className:"resource-name float-left text-right"},"Crew Chief")),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:this.menu(),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.more_black,alt:"",className:"img-fluid"})))))))),l.a.createElement("div",{className:"col-12 update-table-dispatch"},b?l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table dispatch-service-varient"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"ASSIGNEE")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONT Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"CONTAINER")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th"},l.a.createElement("div",{className:"custom-th-heading"},"UOM")))),l.a.createElement("div",{className:"row mx-0 w-100"},(null===b||void 0===b||null===(h=b.workorder)||void 0===h?void 0:h.workorder_variant)&&(null===b||void 0===b||null===(f=b.workorder)||void 0===f||null===(E=f.workorder_variant)||void 0===E?void 0:E.map((function(e){var a,t;return l.a.createElement(Aq,{assignPending:g.props.assignPending,key:null===e||void 0===e?void 0:e.id,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===(t=e.variant_data)||void 0===t?void 0:t.region,Assignees:b,workorderAssignee:e,handleDispatchNow:g.handleDispatchNow,manually_added:"INVENTORY_KIT"===(null===e||void 0===e?void 0:e.resource_type),margin:null===e||void 0===e?void 0:e.margin,getDispatchInqueue:g.handleDispatchDataById,crewChief:g.state.crewChief,newPricing:e,view:!1})})))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.line_items_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Service Variants"))))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{crewChief:Object(wu.a)({},e.workOrder)}}}]),t}(n.Component),kL=t(1038).extendMoment(hd.a),jL=(_u.a,_u.a.Item,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,workOrder:[],data:{},newPricing:[],page:1,loading:!1,inqueue:[],dispatchFleetGroup:[],date:"",closeDate:"",visibleServiceInfo:!1,visibleEditWarehouse:!1,serviceInfoData:null,warehouseData:null,assignPending:!1,reviewVisible:!1,workorderReview:[]},e.child=l.a.createRef(),e.menu=function(){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},"Remove")))},e.editMenu=function(a){return l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{onClick:function(){return e.showServiceInfo(!0,a)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit Service Information")),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{onClick:function(){return e.showEditWarehouse(!0,a)},className:"border-0 p-0 shadow-none bg-transparent"},"Edit Warehouse / Dispatch")))},e.showServiceVarient=function(a,t,n){e.setState({visible:a,workOrder:t,assignPending:n},(function(){e.child.current.handleDispatchDataById(),void 0!==t&&e.getSelectedServiceVariants()}))},e.reviewServiceVarient=function(a,t,n){e.setState({reviewVisible:a,workorderReview:t,assignPending:n})},e.showServiceInfo=function(a,t){e.setState({visibleServiceInfo:a,serviceInfoData:t})},e.showEditWarehouse=function(a,t){e.setState({visibleEditWarehouse:a,warehouseData:t})},e.handleCalender=function(a){if(a){var t=new Date(e.state.date),n=hd()(t).format("YYYY-MM-DD");e.setState({date:t},(function(){e.getWorkOrderInqueue({service_date:n,warehouse:e.props.warehouseId}),e.getDispatchFleetGroupData({service_date:n,warehouse:e.props.warehouseId,active:e.props.activeKey?"1":"0"})}))}else{var l=new Date,c=hd()(l).format("YYYY-MM-DD");e.setState({closeDate:c}),e.setState({date:l},(function(){e.getWorkOrderInqueue({service_date:c,warehouse:e.props.warehouseId}),e.getDispatchFleetGroupData({service_date:c,warehouse:e.props.warehouseId,active:e.props.activeKey?"1":"0"})}))}},e.handleIncreaseDate=function(){var a=kd(new Date(e.state.date),1),t=hd()(a).format("YYYY-MM-DD");e.setState({closeDate:t}),e.setState({date:a},(function(){e.getWorkOrderInqueue({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchFleetGroupData({service_date:t,warehouse:e.props.warehouseId,active:e.props.activeKey?"1":"0"})}))},e.handleDecrementDate=function(){var a=jd(new Date(e.state.date),1),t=hd()(a).format("YYYY-MM-DD");e.setState({closeDate:t}),e.setState({date:a},(function(){e.getWorkOrderInqueue({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchFleetGroupData({service_date:t,warehouse:e.props.warehouseId,active:e.props.activeKey?"1":"0"})}))},e.handleDragEnd=function(){var a=Object(Qm.a)($m.a.mark((function a(t,n,l,c,i){var r;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={},r="lane1"==l?{workorder:i.id,vehicle:n,service_date:e.state.closeDate}:{workorder:t,vehicle:l,service_date:e.state.closeDate},a.next=4,kq(r).then((function(a){e.getWorkOrderInqueue({service_date:e.state.closeDate}),e.getDispatchFleetGroupData({service_date:e.state.closeDate}),Mm.b.success("Successfully dragged")})).catch((function(a){var t=e.state,n=t.inqueue,l=t.dispatchFleetGroup;e.setState({inqueue:Object(Ou.a)(n),dispatchFleetGroup:Object(Ou.a)(l)},(function(){return e.setlineItems()}))}));case 4:case"end":return a.stop()}}),a)})));return function(e,t,n,l,c){return a.apply(this,arguments)}}(),e.getSelectedServiceVariants=function(){var a=e.state.workOrder;tV({workorder:null===a||void 0===a?void 0:a.id}).then(function(){var a=Object(Qm.a)($m.a.mark((function a(t){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.setState({newPricing:t.data},(function(){e.child.current.handleDispatchDataById()}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){td(e)}))},e.checkAddressSitePresent=function(e){var a,t,n,l,c,i=(null===e||void 0===e||null===(a=e.work_owner_contact)||void 0===a?void 0:a.length)&&(null===e||void 0===e||null===(t=e.work_owner_contact[0])||void 0===t||null===(n=t.site)||void 0===n?void 0:n.length)&&(null===e||void 0===e||null===(l=e.work_owner_contact[0])||void 0===l||null===(c=l.site[0])||void 0===c?void 0:c.site);return i||null},e.getDispatchFleetGroupData=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mV(a).then((function(a){e.setState({dispatchFleetGroup:a.data.results}),e.setlineItems()})).catch((function(e){td(e)}))},e.getWorkOrderInqueue=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),oV(Object(wu.a)(Object(wu.a)({},a),{},{status:"IN_QUEUE",page:e.state.page})).then((function(a){var t;e.setState({inqueue:null===(t=a.data)||void 0===t?void 0:t.results,loading:!1}),e.setlineItems()})).catch((function(e){td(e)}))},e.handleRemove=function(a){sV({status:"SERVICE_REQUEST"},a).then((function(a){e.getWorkOrderInqueue(),e.props.fetchWorkorder()})).catch((function(e){td(e)}))},e.handleDataCalendar=function(a){var t=hd()(a).format("YYYY-MM-DD");e.setState({closeDate:t}),e.setState({date:a},(function(){e.getWorkOrderInqueue({service_date:t,warehouse:e.props.warehouseId}),e.getDispatchFleetGroupData({service_date:t,warehouse:e.props.warehouseId,active:e.props.activeKey?"1":"0"})}))},e.handleTimeRange=function(e){return(e.toString().includes(":")?e.split(":")[0]:e)<12?"Am":"Pm"},e.rangeFormat=function(e){var a=e.split(" ")[0];return a>10?"".concat(a,":00"):"0".concat(a,":00")},e.onDragEnd=function(){var a=Object(Qm.a)($m.a.mark((function a(t,n){var l,c;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=t.destination.droppableId.split("_"),c={workorder:t.draggableId,vehicle:l[0],service_date:e.state.closeDate,crew_chief:l[1],start_time:l[2].split(" ")[0],end_time:l[3].split(" ")[0]},a.next=4,kq(c).then((function(a){e.getWorkOrderInqueue({service_date:e.state.closeDate,active:e.props.activeKey?"1":"0",warehouse:e.props.warehouseId}),e.getDispatchFleetGroupData({service_date:e.state.closeDate,active:e.props.activeKey?"1":"0",warehouse:e.props.warehouseId}),Mm.b.success("Successfully dragged")})).catch((function(a){var t=e.state,n=t.inqueue,l=t.dispatchFleetGroup;e.setState({inqueue:Object(Ou.a)(n),dispatchFleetGroup:Object(Ou.a)(l)})}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.getShortName=function(e){var a,t,n=null===e||void 0===e?void 0:e.split(" ");return(null===(a=n[0])||void 0===a?void 0:a.split("")[0])+(null===(t=n[1])||void 0===t?void 0:t.split("")[0])},e.getTimeSlots=function(){var e=kL.range("2022-01-01 00:00","2022-01-02 00:00"),a=Array.from(e.by("hour",{excludeEnd:!0,step:3}));return a=a.map((function(e){return e.format("HH:mm")}))},e.handleTimeByGroup=function(e){var a=[],t=[];return e.forEach((function(e){e.workorders.forEach((function(e){t.push([hd()(e.workorder.start_time,"HH:mm").format("HH:mm"),hd()(e.workorder.end_time,"HH:mm").format("HH:mm")])}))})),e.forEach((function(e){var n={},l=[];e.workorders.forEach((function(a){var c=hd()(a.workorder.start_time,"hh:mm"),i=hd()(a.workorder.end_time,"hh:mm"),r="",s="";t.find((function(e,a){var t=hd()(e[0],"hh:mm"),n=t.isSame(c);r=t.format("hh:mm a");var l=hd()(e[1],"hh:mm"),o=l.isSame(i);return s=l.format("hh:mm a"),n&&o}));if(l.length>0){var o=l.map((function(e){return e.start_slot})).findIndex((function(e){return e==r}));o>-1?l[o].works.push(a):((n=Object(wu.a)({},e)).works=[a],n.workorder_address=[a.workorder],n.start_slot=r,n.end_slot=s,n.status=a.status,l.push(n))}else(n=Object(wu.a)({},e)).works=[a],n.workorder_address=[a.workorder],n.start_slot=r,n.end_slot=s,n.status=a.status,l.push(n)})),a.push.apply(a,l)})),a.sort((function(e,a){return hd()(e.start_slot,"hh:mm a").isBefore(hd()(a.start_slot,"hh:mm a"))?-1:1}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.handleCalender(),this.props.handleFleetGroupCall("fleetGroup")}},{key:"componentDidUpdate",value:function(){this.props.dispatchNow&&(this.handleCalender(),this.props.handleDispatchNow(!1))}},{key:"render",value:function(){var e=this,a=this.state,t=a.workOrder,n=a.data,c=a.newPricing,i=a.dispatchFleetGroup,r=a.workorderReview;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row dispatch-left-min-header-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row drag-drop-main-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 px-0 data-header-employees"},l.a.createElement("div",{style:{minHeight:"56px",width:"100%"},className:"box-1-header justify-content-center"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"arrow-btn",onClick:this.handleDecrementDate},l.a.createElement("img",{src:Rm.arrow_small_left,alt:"",className:"img-fluid"}))),l.a.createElement("li",{className:"list-inline-item"},"".concat(this.state.date.toString().split(" ")[0],", ").concat(this.state.date.toString().split(" ")[1]," ").concat(this.state.date.toString().split(" ")[2]),l.a.createElement(Hv.a,{format:"YYYY-MM-DD",className:"datePicker-calendar",onChange:this.handleDataCalendar,allowClear:!1})),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(Vm.a,{className:"arrow-btn",onClick:this.handleIncreaseDate},l.a.createElement("img",{src:Rm.arrow_small_right,alt:"",className:"img-fluid"})))))),l.a.createElement(pL.a,{onDragEnd:this.onDragEnd},l.a.createElement("div",{className:"col-12 px-0 data-header-employees data-header-employees-scroll"},l.a.createElement("div",{className:"data-header-employees-scroll-common data-inner-all overflow-hidden",onScroll:this.handleScroll},l.a.createElement("div",{className:"row data-card-main mx-0"},sL()(n)?l.a.createElement("div",{className:"custom-right-scroll w-100",style:{whiteSpace:"nowrap",position:"relative",overflow:"auto"}},l.a.createElement("div",{className:"fleet-data-left"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{style:{height:"90px"},className:"data-details-inn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("h6",{className:"mb-0"},"Holding Bin"))),l.a.createElement("div",{style:{padding:"10px"},className:"col-12 custom-scroll-dispatch"},l.a.createElement(pL.c,{droppableId:"droppable"},(function(a,t){return l.a.createElement("div",Object.assign({ref:a.innerRef},a.droppableProps),e.state.inqueue.map((function(a,t){var n=e.checkAddressSitePresent(a);return l.a.createElement(pL.b,{key:"".concat(a.id),draggableId:"".concat(a.id),index:t},(function(t,c){return l.a.createElement("div",Object.assign({ref:t.innerRef},t.dragHandleProps,t.draggableProps),l.a.createElement("div",{id:a.id.toString(),className:"row custom-card-main"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main w-auto",placement:"bottomCenter",trigger:"click",overlay:e.editMenu},l.a.createElement(Vm.a,{style:{bottom:"auto",right:0},className:"bg-transparent position-absolute px-3 border-0 elipsis-btn-card",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{style:{height:"15px"},src:Rm.elipsis_icon_gray,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"col-12 px-3"},l.a.createElement("h6",{className:"mb-0 position-relative"},l.a.createElement("span",{className:"total-assign"},a.id)," ",l.a.createElement("span",{className:"line-y"},"|")," ",a.project.name," "),l.a.createElement("p",{className:"mb-0"},a.work_owner_contact.length&&a.work_owner_contact[0].account.name),l.a.createElement("p",{className:"site-address-dispatch"},l.a.createElement("img",{src:Rm.location_gray_dispatch_14,alt:"",className:"img-fluid"}),(null===n||void 0===n?void 0:n.apartment)||""," ",(null===n||void 0===n?void 0:n.street_address)||""," ",(null===n||void 0===n?void 0:n.city)||""," ",null===n||void 0===n?void 0:n.state),l.a.createElement("div",{className:"tag-common rescheduled-div"},nu(a.status))),l.a.createElement(Vm.a,{className:"common-project-btn assign-btn",onClick:function(){return e.showServiceVarient(!0,a)}},"Assign resources")),t.placeholder)}))})),a.placeholder)}))))),i.length>0&&i.map((function(a,t){return l.a.createElement("div",{id:"".concat(a.id),className:"fleet-data-right-main"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"card-operator p-0 col-12"},l.a.createElement("div",{className:"row mx-0 operator-card-main position-relative"},l.a.createElement("div",{className:"col-12 d-flex align-items-center"},l.a.createElement("div",{className:"operator-initial"},l.a.createElement("img",{alt:" ",className:"img-fluid",src:Rm.truck_icon_green})),l.a.createElement("div",{className:"operator-details"},l.a.createElement("h6",{className:"mb-0"},null===a||void 0===a?void 0:a.name))),l.a.createElement(Su.a,{className:"custom-breadcrumb-dispatch",separator:">"},l.a.createElement(Su.a.Item,null,l.a.createElement(qm.a,{to:" "},"vac truck 3800")),l.a.createElement(Su.a.Item,null,l.a.createElement(qm.a,{to:" "},"Vac Truck 3800")),l.a.createElement(Su.a.Item,null,"Vac Truck 3800 w/ air compressor")))),l.a.createElement("div",{className:"col-12 custom-scroll-dispatch"},l.a.createElement("div",{className:"row"},e.handleTimeByGroup(a.crew_data).map((function(n){var c=e.checkAddressSitePresent(null===n||void 0===n?void 0:n.workorder_address[0]);return l.a.createElement(pL.c,{droppableId:"".concat(a.id,"_").concat(n.crew_chief_id,"_").concat(n.start_slot,"_").concat(n.end_slot)},(function(a,i){var r;return l.a.createElement("div",Object.assign({ref:a.innerRef},a.droppableProps),l.a.createElement("div",{id:null===(r=n.workorder)||void 0===r?void 0:r.id.toString(),className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 time-schedule-bar"},n.start_slot," - ",n.end_slot,l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{style:{height:"12px"},src:Rm.more_black,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 inner-card-common"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12 custom-card-main card-crew-chief"},l.a.createElement("div",{className:"row mx-0 align-items-center h-100"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"name-avatar"},e.getShortName(n.crew_chief)),l.a.createElement("h6",{className:"mb-0"},n.crew_chief)),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",overlay:e.menu(),trigger:["click"]},l.a.createElement(Vm.a,{className:"ant-dropdown-link ant-dropdown-link-2 border-0 p-0 bg-transparent shadow-none",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{style:{height:"15px"},src:Rm.elipsis_icon_gray,alt:"",className:"img-fluid"})))))),n.works.map((function(a){return l.a.createElement("div",{className:"col-12"},l.a.createElement(pL.b,{key:"".concat(a.id),draggableId:"".concat(a.id),index:t},(function(t,n){var i,r,s,o,m,d;return l.a.createElement("div",Object.assign({style:{minWidth:"161px"},className:"row",ref:t.innerRef},t.dragHandleProps,t.draggableProps),l.a.createElement("div",{className:"col-12 custom-card-main"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main w-auto",placement:"bottomCenter",trigger:"click",overlay:function(){return e.editMenu(a)}},l.a.createElement(Vm.a,{style:{bottom:"auto",right:"0"},className:"bg-transparent position-absolute px-2 border-0 elipsis-btn-card",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{style:{height:"15px"},src:Rm.elipsis_icon_gray,alt:"",className:"img-fluid"}))),l.a.createElement("h6",{className:"mb-0"},l.a.createElement("span",{className:"total-assign"},null===(i=a.workorder)||void 0===i?void 0:i.id)," ",l.a.createElement("span",{className:"line-y"},"|")," ",null===(r=a.workorder)||void 0===r||null===(s=r.project)||void 0===s?void 0:s.name),l.a.createElement("p",{className:"mb-0"},(null===(o=a.workorder)||void 0===o||null===(m=o.work_owner_contact)||void 0===m?void 0:m.length)>0&&(null===(d=a.workorder)||void 0===d?void 0:d.work_owner_contact[0].account.name)),l.a.createElement("p",{className:"site-address-dispatch"},l.a.createElement("img",{src:Rm.location_gray_dispatch_14,alt:"",className:"img-fluid"}),(null===c||void 0===c?void 0:c.apartment)||""," ",(null===c||void 0===c?void 0:c.street_address)||""," ",(null===c||void 0===c?void 0:c.city)||""," ",null===c||void 0===c?void 0:c.state),l.a.createElement("div",{className:"tag-common rescheduled-div"},nu(a.status)),l.a.createElement(Vm.a,{onClick:function(){return e.reviewServiceVarient(!0,a,!0)},className:"common-project-btn assign-btn"},"Review")))})))})))))),a.placeholder)}))}))))))))}))):l.a.createElement("div",{className:"text-center"},l.a.createElement(Wv.a,null)))))))))))),l.a.createElement(OL,{visible:this.state.reviewVisible,onClose:function(){e.reviewServiceVarient(!1)},workOrder:r,newPricing:c,assignPending:this.state.assignPending}),l.a.createElement(fL,{visible:this.state.visible,ref:this.child,onClose:function(){e.getWorkOrderInqueue({service_date:e.state.closeDate,warehouse:e.props.warehouseId}),e.getDispatchFleetGroupData({service_date:e.state.closeDate,warehouse:e.props.warehouseId,active:e.props.activeKey?"1":"0"}),e.showServiceVarient(!1),e.props.handleUpdate()},workOrder:t,newPricing:c,assignPending:this.state.assignPending})),this.state.serviceInfoData&&l.a.createElement(NL,{visible:this.state.visibleServiceInfo,serviceInfoData:this.state.serviceInfoData,onClose:function(){e.handleCalender("true"),e.showServiceInfo(!1)}}),this.state.warehouseData&&l.a.createElement(SL,{visible:this.state.visibleEditWarehouse,warehouseData:this.state.warehouseData,handleCalender:this.handleCalender,onClose:function(){e.handleCalender("true"),e.showEditWarehouse(!1)}}))}}]),t}(n.Component)),IL=vf.a.TabPane,AL=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={columnDates:"",fleetKit:"",fleetGroup:"",fleetView:!1,dropdownVisible:!1,active:!0,inactive:!1,dispatchNow:!1},e.child=l.a.createRef(),e.child1=l.a.createRef(),e.child2=l.a.createRef(),e.handleDispatchNow=function(a){e.setState({dispatchNow:a})},e.handleMenuClick=function(a){"3"==a.key&&e.setState({dropdownVisible:!1})},e.handleVisibleChange=function(a){e.setState({dropdownVisible:a})},e.handleCheckBox=function(a){a.target.checked&&e.setState({active:!0,inactive:!1},(function(){e.state.fleetGroup&&e.child2.current.getDispatchFleetGroupData({active:e.state.active?"1":"0",warehouse:e.props.warehouseId,service_date:e.child2.current.state.closeDate})}))},e.handleCheckInactive=function(a){a.target.checked&&e.setState({inactive:!0,active:!1},(function(){e.state.fleetGroup&&e.child2.current.getDispatchFleetGroupData({active:e.state.active?"1":"0",warehouse:e.props.warehouseId,service_date:e.child2.current.state.closeDate})}))},e.editMenu=function(a){return l.a.createElement(_u.a,{style:{width:"240px"},onClick:e.handleMenuClick},l.a.createElement("p",{className:"ms-5",style:{"margin-left":"15px","margin-top":"20px"}},"Vehicle Status"),l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},l.a.createElement(tp.a,{checked:e.state.active,onChange:e.handleCheckBox},"Active"))),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(Vm.a,{className:"border-0 p-0 shadow-none bg-transparent"},l.a.createElement(tp.a,{checked:e.state.inactive,onChange:e.handleCheckInactive},"Inactive"))))},e.handleUpdate=function(){e.child.current.getDispatchInqueue({service_date:e.child.current.state.closeDate,warehouse:e.props.warehouseId}),e.state.fleetKit&&e.state.fleetGroup?(e.child1.current.getWorkOrderInqueue({service_date:e.child1.current.state.closeDate,warehouse:e.props.warehouseId}),e.child2.current.getWorkOrderInqueue({service_date:e.child2.current.state.closeDate,warehouse:e.props.warehouseId})):e.state.fleetKit?e.child1.current.getWorkOrderInqueue({service_date:e.child1.current.state.closeDate,warehouse:e.props.warehouseId}):e.state.fleetGroup&&e.child2.current.getWorkOrderInqueue({service_date:e.child2.current.state.closeDate,warehouse:e.props.warehouseId})},e.handleFleetKitCall=function(a){e.setState({fleetKit:a})},e.handleFleetGroupCall=function(a){e.setState({fleetGroup:a})},e}return Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(vf.a,{defaultActiveKey:["2"],className:"carpet-cleaning-main-common-tab common-tab-dispatch"},l.a.createElement(IL,{tab:"Work Orders",key:"1"},l.a.createElement(uL,Object.assign({},this.props,{ref:this.child,warehouseId:this.props.warehouseId,fetchWorkorder:this.props.fetchWorkorder,handleDispatchNow:this.handleDispatchNow}))),l.a.createElement(IL,{tab:"Vehicles(FLEET GROUPS)",key:"5"},l.a.createElement(jL,Object.assign({},this.props,{ref:this.child2,handleFleetGroupCall:this.handleFleetGroupCall,handleDispatchNow:this.handleDispatchNow,handleUpdate:this.handleUpdate,dispatchNow:this.state.dispatchNow,activeKey:this.state.active,fetchWorkorder:this.props.fetchWorkorder})))),l.a.createElement("div",{tab:"filter",className:"my__custom"},l.a.createElement(xu.a,{trigger:"click",onVisibleChange:this.handleVisibleChange,visible:this.state.dropdownVisible,overlay:this.editMenu},l.a.createElement(Vm.a,{className:"filter-btn pd-filter d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",className:"img-fluid",src:Rm.filter_icon}),"filter"))))}}]),t}(n.Component),DL=ku.a.Option,TL=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={workOrder:[],filterObj:null,page:1,total:null,status:!1,loading:!1,isActive:!1,totalCount:null,warehouse:[],totalWarehouse:null,newPage:1,warehouseId:null},e.child=l.a.createRef(),e.fetchWorkorder=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0});var t=e.state.filterObj;a.search&&e.setState({page:1}),xq(Object(wu.a)(Object(wu.a)({},a),t)).then((function(a){e.setState({totalCount:a.data.count}),1===e.state.page?e.setState({workOrder:a.data.results}):e.setState((function(e){return{workOrder:[].concat(Object(Ou.a)(e.workOrder),Object(Ou.a)(a.data.results))}}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.setFilterObj=function(a){e.setState({filterObj:a},(function(){e.setState({page:1}),e.fetchWorkorder()}))},e.statusUpdate=function(a){a&&e.setState({page:1},(function(){e.fetchWorkorder({warehouse:e.state.warehouseId}),e.child.current.handleUpdate()}))},e.handlePagination=function(){e.setState((function(e){return{page:e.page+1}}),(function(){e.fetchWorkorder({page:e.state.page})}))},e.handleButton=function(a){e.setState({closeButton:a})},e.handleToggle=function(a){e.setState({isActive:!e.state.isActive})},e.handleWarehousePagination=function(){e.setState((function(e){return{newPage:e.newPage+1}}),(function(){e.handleWorkorderWarehouse({page:e.state.newPage})}))},e.handleWorkorderWarehouse=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.setState({loading:!0}),RP(a).then((function(n){e.setState({totalWarehouse:n.data.count,newPage:a.page},(function(){1===e.state.newPage?e.setState({warehouse:n.data.results},(function(){t&&e.setState({warehouseId:n.data.results[0].id},(function(){e.fetchWorkorder({warehouse:e.state.warehouseId})}))})):e.setState((function(e){return{warehouse:[].concat(Object(Ou.a)(e.warehouse),Object(Ou.a)(n.data.results))}}))}))})).catch((function(e){td(e)})).finally((function(){e.setState({loading:!1})}))},e.handleWarehouseData=function(a){e.setState({warehouseId:a}),e.fetchWorkorder({warehouse:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{title:"Dispatch"}]),this.handleWorkorderWarehouse({page:this.state.newPage},"mount")}},{key:"render",value:function(){var e=this,a=this.state,t=a.loading,n=a.warehouse,c=a.totalWarehouse,i=this.state.warehouse[0];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div ".concat(this.state.isActive?"update-dispatch":"")},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"dispatch-header-fixed"},l.a.createElement("div",{className:"dispatch-header-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"mb-0"},"Work Orders"))),this.state.warehouse.length>0?l.a.createElement("div",{className:"dispatch-header-main dispatch-header-main-right"},l.a.createElement("div",{className:"row w-100"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(ku.a,{style:{paddingRight:"25px"},className:"dispatch-select-header",suffixIcon:l.a.createElement(wO.a,null),defaultValue:null===i||void 0===i?void 0:i.id,onChange:function(a){e.setState({warehouseId:null},(function(){e.handleWarehouseData(a)}))},onDropdownVisibleChange:function(){e.setState({newPage:1},(function(){e.handleWorkorderWarehouse({page:e.state.newPage})}))},dropdownClassName:"dispatch-warehouse-dropdown",dropdownRender:function(a){return l.a.createElement(l.a.Fragment,null,a,l.a.createElement(FS.a,{style:{margin:"0 0 10px"}}),l.a.createElement(Qg.b,{align:"center",className:"d-flex align-items-center justify-content-center",style:{padding:"0 8px 4px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center create-div"},t?l.a.createElement(Wv.a,null):n.length!==c&&l.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},l.a.createElement(Vm.a,{className:"load-more-btn w-auto bg-transprent",onClick:function(a){e.handleWarehousePagination(),a.stopPropagation()}},"Load More"))))))}},this.state.warehouse.map((function(e){return l.a.createElement(DL,{value:e.id},e.name)})))),l.a.createElement("div",{className:"col-12 col-sm-2 text-right"},l.a.createElement(ku.a,{className:"select-dispatch-header",suffixIcon:l.a.createElement(wO.a,null),defaultValue:"day"},l.a.createElement(DL,{value:"day"},"Day"))))):""),l.a.createElement("div",{className:"dispatch-main-left"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row dispatch-left-main scroll-custom-common"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Xq,{setFilterObj:this.setFilterObj,fetchWorkorder:this.fetchWorkorder})),l.a.createElement("div",{className:"col-12"},l.a.createElement(lL,{workOrder:this.state.workOrder,totalCount:this.state.totalCount,loading:this.state.loading,handlePagination:this.handlePagination,statusUpdate:this.statusUpdate})))))))),l.a.createElement("div",{className:"dispatch-main-right position-relative"},l.a.createElement("div",{className:"pull-push-btn-div"},l.a.createElement(Vm.a,{onClick:function(){return e.handleToggle(!0)},className:"close-btn-dispatch"},this.state.isActive&&l.a.createElement(uq.a,null),this.state.isActive&&l.a.createElement("br",null),l.a.createElement("span",{className:"close-text"},this.state.isActive?"Open":"Close"," Work Orders"),!this.state.isActive&&l.a.createElement("br",null),!this.state.isActive&&l.a.createElement($q.a,null))),l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row scroll-custom-common dispatch-right-main"},l.a.createElement("div",{className:"col-12 p-0"},this.state.warehouseId&&l.a.createElement(AL,{workOrder:this.state.workOrder,ref:this.child,warehouseId:this.state.warehouseId,fetchWorkorder:this.fetchWorkorder})))))))))}}]),t}(n.Component),RL=Object(Lm.b)(null,{setBreadcrumb:Uv})(TL),ML=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={items:[]},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.fleetData;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.editBtn?"custom-summary no-data-card-row-new":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.editBtn?"design-update-bar":"")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),l.a.createElement("ul",{className:"mb-0 list-inline"},l.a.createElement("li",{className:"list-inline-item"},this.props.editBtn?null:l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase",onClick:this.props.onTabChange},"VIEW ALL"," "))))),l.a.createElement("div",{className:"col-12 pb-3"},l.a.createElement("div",{className:"col-12"},e?l.a.createElement("div",{className:"col-12 fleet-kit-table table-responsive"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"TYPE"),l.a.createElement("th",null,"Name / Info"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Fleet Kit"),l.a.createElement("td",null,null===e||void 0===e?void 0:e.name)),(null===e||void 0===e?void 0:e.fleet_group)&&(null===e||void 0===e?void 0:e.fleet_group.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,"Fleet Group "),l.a.createElement("td",{className:"position-relative"},l.a.createElement("span",{className:"rectangle-icon-div rectangle-icon-update position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"branch-tree-div"},e.name)))})))))):l.a.createElement("div",{className:"col-12 mt-3"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("img",{src:Rm.truck_empty,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Fleet Group")))))))}}]),t}(n.Component),FL=Object(r.withRouter)(ML),PL=fu.a.Panel,VL=(ku.a.Option,ku.a.OptGroup,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[],loading:!1,pagination:{current:1,pageSize:15},visible:!1,vehicle:null},e.showAddVehicles=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a=this;this.props.fleetData;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 mt-30"},l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"]},l.a.createElement(PL,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.kit.edit,{id:a.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"1"},l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Fleet kit name",l.a.createElement("sup",null,"*")),l.a.createElement("h5",{className:"mb-0"},null===(e=this.props.fleetData)||void 0===e?void 0:e.name)))))),l.a.createElement(PL,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Fleet Group"),l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Sf.a)(zm.dashboard.management.fleet.kit.edit,{id:a.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit")),key:"2"},l.a.createElement(FL,{fleetData:this.props.fleetData})))))))}}]),t}(n.Component)),qL=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(VL)),LL=vf.a.TabPane,UL=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={active:"1",fleetData:null},e.onTabChange=function(a){e.setState({active:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&UE(this.props.match.params.id).then((function(a){e.setState({fleetData:a.data});var t=[{title:"Fleet kit",url:zm.dashboard.management.fleet.self}];e.props.setBreadcrumb(t)})).catch((function(e){td(e)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement(vf.a,{onChange:this.onTabChange,activeKey:this.state.active,className:"carpet-cleaning-main-common-tab"},l.a.createElement(LL,{tab:"Summary",key:"1"},l.a.createElement(qL,{onTabChange:this.onTabChange,fleetData:this.state.fleetData})),l.a.createElement(LL,{tab:"Fleet Group",key:"2"},l.a.createElement(FL,{editBtn:!0,fleetData:this.state.fleetData})))))))}}]),t}(n.Component),BL=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={visible:!1,visibleFilter:!1},e.filterDataPop=function(){return l.a.createElement(TE,{fetchData:e.props.fetchData})},e.handleVisibleChange=function(a){e.setState({visible:a})},e.filterClose=function(a){e.setState({visibleFilter:a})},e.checkShowBtn=function(){switch(e.props.buttonName){case"Create Service":case"Create Disposal Inventory":return!1;default:return!0}},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.buttonLink,n=a.buttonName,c=a.hideDateFilter,i=a.FILTER_NEW;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 align-items-center mini-header-filter-list-grid-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 new-opportunity-header-row"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"search-opportunities-div"},l.a.createElement("div",{className:"search-bar-div"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))))),l.a.createElement(l.a.Fragment,null,i?l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(Vm.a,{onClick:function(){return e.filterClose(!0)},className:"filter-btn d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter")):!c&&l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(IE.a,{overlayClassName:"popover-main-all filter-popover",content:this.filterDataPop,title:!1,trigger:"click",visible:this.state.visible,placement:"bottom",onVisibleChange:this.handleVisibleChange},l.a.createElement(Vm.a,{className:"filter-btn d-flex align-items-center justify-content-center text-capitalize"},l.a.createElement("img",{alt:" ",src:Rm.filter_icon})," Filter")))),this.checkShowBtn()&&l.a.createElement("div",{className:"new-opportunity-btn-div ml-3"},l.a.createElement(qm.a,{to:t,className:"new-opportunity-btn d-flex align-items-center justify-content-center text-capitalize"},n))))))}}]),t}(n.Component);function WL(e,a){return md(ad("invoice.invoice",{id:e}),a)}function YL(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ad("invoice.invoice",{id:e});return id(t,a)}function KL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.invoice_status");return id(a,e)}function GL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.customer_contacts");return od(a,e)}function zL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.customer_contacts");return id(a,e)}function HL(e,a){return md(ad("invoice.customer_contacts",{id:e}),a)}function $L(e){return sd(ad("invoice.invoice_create_pdf"),e)}function QL(e){return dd(ad("invoice.customer_contacts",{id:e}))}function JL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.owner_contacts");return od(a,e)}function ZL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.owner_contacts");return id(a,e)}function XL(e,a){return md(ad("invoice.owner_contacts",{id:e}),a)}function eU(e){return id(ad("invoice.invoice_activity",{id:e}))}function aU(e){return dd(ad("invoice.owner_contacts",{id:e}))}function tU(e,a){return md(ad("invoice.primary_site",{id:e}),a)}function nU(e){return od(ad("invoice.post"),e)}function lU(e){return od(ad("invoice.invoice_document"),e)}function cU(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.invoice_document");return id(a,e)}function iU(e,a){return md(ad("invoice.post",{id:e}),a)}function rU(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.post");return id(a,e)}function sU(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.invoice_work_order");return id(a,e)}function oU(e){return od(ad("invoice.invoice_project_work_order"),e)}function mU(e,a){return md(ad("invoice.invoice_project_work_order",{id:e}),a)}function dU(e){return dd(ad("invoice.invoice_project_work_order",{id:e}))}var uU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).fetchAllInvoice=function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=ad("invoice.invoice");return id(a,e)})().then((function(e){n.setState({Invoice:e.data.results})})).catch((function(e){td(e)}))},n.menu=l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{key:"0"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:""},l.a.createElement(hv.a,null),l.a.createElement("span",null,"Salesperson"))),l.a.createElement(_u.a.Item,{key:"1"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:""},l.a.createElement(hv.a,null),l.a.createElement("span",null,"Sales Manager"))),l.a.createElement(_u.a.Item,{key:"2"},l.a.createElement(qm.a,{className:"d-flex align-items-center font-weight-bold",to:""},l.a.createElement(hv.a,null),l.a.createElement("span",null,"Sales Assistant")))),n.columns=[{title:"Associated Project",dataIndex:"project",sorter:!0,key:"project",render:function(e){return l.a.createElement("div",{className:"font-weight-500"},null===e||void 0===e?void 0:e.name)}},{title:"Invoice ID",key:"id",dataIndex:"id",sorter:!0,render:function(e){return l.a.createElement("div",null,e)}},{title:"Billing Account",key:"billing_account",dataIndex:"invoice_customer_contact",sorter:!0,render:function(e){return l.a.createElement("div",null,e.length?e.map((function(e){return l.a.createElement(l.a.Fragment,null,e.account?e.account.name:"-")})):"-")}},{title:"Status",dataIndex:"status",sorter:!0,key:"status",render:function(e){return l.a.createElement("div",null,null===e||void 0===e?void 0:e.title)}},{title:l.a.createElement("div",{className:"position-relative"},"Last Activity Date"),dataIndex:"modified",render:function(e){return l.a.createElement("div",{className:"text-capitalize"},e?hd()(e).format("MMM DD,YYYY"):"-")},sorter:!0,key:"modified"}],n.state={Invoice:[]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{title:"Invoice"}]),this.fetchAllInvoice()}},{key:"render",value:function(){var e=this.state.Invoice;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 table-responsive main-table-div opportunity-db-table"},l.a.createElement(fv.a,{scroll:{y:500},className:"main-table-all",columns:this.columns,loading:!1,dataSource:e,size:"middle",pagination:!0,rowKey:function(e){return e.id},onRow:function(e){return{onClick:function(){o.push(Object(Gm.reverse)(zm.dashboard.accounting.invoicing.view,{id:e.id}))}}}})))}}]),t}(n.Component),pU=Object(Lm.b)(null,{setBreadcrumb:Uv})(uU),vU=function(){return l.a.createElement("div",{className:"main-content-div"},l.a.createElement(BL,{buttonLink:zm.dashboard.accounting.invoicing.create,buttonName:"+ Create Invoice"}),l.a.createElement("div",{className:"row mx-0 opportunities-table-main-dashboard width-160-id"},l.a.createElement(pU,null)))},hU=ku.a.Option,fU={labelCol:{span:24},wrapperCol:{span:24}},EU=Pm.a.TextArea,gU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).fetchProjects=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({fetching:!0}),HM(e).then((function(e){n.setState({projects:e.data.results,fetching:!1})})).catch((function(e){td(e),n.setState({fetching:!1})}))},n.handleSubmit=function(e){var a,t=n.state.retrieve_proj,l=Object(wu.a)(Object(wu.a)({},e),{},{status:e.status.value,project:e.project.value,due_date:e.service_date.format("YYYY-MM-DD"),retrieve_project:!(!t||n.props.workOrder)&&t});n.setState({btnLoader:!0}),n.props.Invoice?WL(n.props.Invoice.id,l).then((function(e){n.props.setInvoice(e.data,2),Mm.b.success("Invoice updated successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({btnLoader:!1})})):(a=l,od(ad("invoice.invoice"),a)).then((function(e){n.props.setInvoice(e.data,2),Mm.b.success("Invoice created successfully!")})).catch((function(e){td(e)})).finally((function(){n.setState({btnLoader:!1})}))},n.handleSelectProject=function(e){n.setState({projectVal:e},(function(){n.props.ProjectDetailAction(null===e||void 0===e?void 0:e.value)}))},n.handleWarningModal=function(e){n.setState({visibleRetrieveWarning:e})},n.getInvoiceStatus=function(){KL().then((function(e){n.setState({invoiceStatus:e.data.results})})).catch((function(e){td(e)}))},n.handleRetrieveproject=function(){var e=n.props.project_data;n.setState({retrieve_proj:!0,visibleRetrieveWarning:!1},(function(){var a={instruction:null===e||void 0===e?void 0:e.instruction};n.formRef.current.setFieldsValue(Object(wu.a)({},a))}))},n.state={projects:[],fetching:!1,statusTypes:[],projectVal:null,invoiceStatus:[],visibleRetrieveWarning:!1,retrieve_proj:!1,createScreen:!1},n.formRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a=null===(e=this.props.location.pathname)||void 0===e?void 0:e.includes("create");this.setState({createScreen:a})}},{key:"componentDidUpdate",value:function(e,a){if(e.Invoice!=this.props.Invoice){var t,n,l,c,i=this.props.Invoice;this.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},i),{},{project:{label:null===i||void 0===i||null===(t=i.project)||void 0===t?void 0:t.name,value:null===i||void 0===i||null===(n=i.project)||void 0===n?void 0:n.id},status:{label:null===i||void 0===i||null===(l=i.status)||void 0===l?void 0:l.title,value:null===i||void 0===i||null===(c=i.status)||void 0===c?void 0:c.id},service_date:i.due_date?hd()(i.due_date):null}))}}},{key:"render",value:function(){var e=this,a=this.state,t=a.projects,n=a.fetching,c=(a.statusTypes,a.btnLoader),i=a.projectVal,r=a.invoiceStatus,s=this.props.Invoice;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please choose a project."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},fU,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"project",label:"Associated Project *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,disabled:null===s||void 0===s?void 0:s.project,showSearch:!0,dropdownClassName:"custom-select-drop-main",placeholder:"Associated Project",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onSelect:function(a){return e.handleSelectProject(a)},onFocus:function(){return e.fetchProjects()},onSearch:function(a){return e.fetchProjects({search:a})},optionLabelProp:"label"},t.map((function(e){return l.a.createElement(hU,{key:e.id,label:e.name,value:e.id},l.a.createElement(hV,{data:e,img:Rm.folder_icon_black,type:"Project"}))})))),window.location.href.includes("create")&&i&&l.a.createElement("span",{className:"retrieve-oppo ".concat(s&&"cursor"),onClick:function(){s||e.handleWarningModal(!0)}},"Retrieve information")),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"status",label:"Status *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{labelInValue:!0,suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:" ",className:"img-fluid"}),filterOption:!1,onFocus:function(){return e.getInvoiceStatus()},placeholder:"Select Status"},r.map((function(e){return l.a.createElement(hU,{value:e.id},e.title)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"service_date",label:"Invoice Due Date *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"instruction",label:"Invoice Instructions",className:"position-relative"},l.a.createElement(EU,{className:"text-area-main text-area-task",placeholder:"Enter Description"}))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:c,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))),l.a.createElement(iv,{heading:"Are you sure you want to retrieve information from this project?",subHeadingUOM:"If you click Continue, general information, team, billing accounts, site manager accounts & sites, documents, and service variants would be retrieved from the selected project.",uomWarning:!0,retrieveWarning:!0,okAction:this.handleRetrieveproject,visible:this.state.visibleRetrieveWarning,onClose:function(){return e.handleWarningModal(!1)}}))}}]),t}(n.Component),bU=Object(Lm.b)((function(e){return Object(wu.a)({},e)}),{ProjectDetailAction:pV})(Object(r.withRouter)(gU)),NU=fu.a.Panel,yU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={rows:[],newPricing:!0},e.renderRow=function(a,t,n){var c,i,r,s,o,m,d,u,p,v,h,f,E=e.props.invoiceVariant;switch(a.type){case Bd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 custom-table-proposal row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.FLEET_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},(null===E||void 0===E?void 0:E.fleet_assignee)||"-"),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,a.qty||"1")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},(null===a||void 0===a?void 0:a.uom)?null===(c=a.uom)||void 0===c?void 0:c.name:"Hours"),l.a.createElement("div",{className:"custom-table-cell-td px-3"},"-"),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"$",a.total_price)));case Wd:return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Yd.SUPPLY_GROUP.name)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},(null===E||void 0===E?void 0:E.supply_assignee)||"-"),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start px-3"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,a.qty||1)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,(null===a||void 0===a?void 0:a.uom)?null===(i=a.uom)||void 0===i?void 0:i.name:"Hours")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",{className:""},"-")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},"$",null===a||void 0===a?void 0:a.total_price));case"INVENTORY_ITEM":return l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Item")),l.a.createElement("div",{className:"custom-table-cell-td"+(n?"":" last-child ")},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},t&&l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",{style:t&&{paddingLeft:"30px"}},(null===a||void 0===a?void 0:a.kit_child)?null===a||void 0===a||null===(r=a.item)||void 0===r?void 0:r.name:a.name||"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td px-0"},l.a.createElement("div",{className:"editalble-form-data editalble-form-data-select d-flex align-items-center px-3"})),l.a.createElement("div",{className:"custom-table-cell-td"},a.qty||1,l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},(null===(s=a.uom)||void 0===s?void 0:s.name)||"-",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},"-"),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("span",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},"-"),l.a.createElement("div",{className:"custom-table-cell-td px-3"},"-"));case"INVENTORY_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,Vd.title)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,a.qty||1)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,(null===a||void 0===a?void 0:a.uom.name)||"-")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},"-"),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null," pieces (pc)")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},"-")),a.children.length>0&&a.children.map((function(t,n){var l=a.children.length>n+1;return e.renderRow(t,!0,l)})),null===(o=a.data)||void 0===o||null===(m=o.inventory_package_items)||void 0===m?void 0:m.map((function(e){return l.a.createElement("div",{key:e.id,className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Inventory Group")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"name-info-div position-relative"},l.a.createElement("span",{className:"rectangle-icon-div position-absolute"},l.a.createElement("img",{src:Rm.rectangle_gray_icon,alt:"",className:"img-fluid"})),l.a.createElement("span",null,e.item.name))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,e.quantity)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null,"pieces (pc)")))})));case"FLEET_KIT":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,qd.title)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},a.modified_quantity?a.modified_quantity:a.qty||1),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null," pieces (pc)")),l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-8"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"}," -")),(null===a||void 0===a||null===(d=a.children)||void 0===d?void 0:d.length)>0&&a.children.map((function(t,n){var l,c=(null===a||void 0===a||null===(l=a.children)||void 0===l?void 0:l.length)>n+1;return e.handleFleetKit(t,!0,c,a.id)})));case"DISPOSAL":return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Disposal")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",{className:"name-info-div p-0 position-relative"},l.a.createElement("span",null,a.name))),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},l.a.createElement("span",{className:"px-3"},"-"))),l.a.createElement("div",{className:"custom-table-cell-td px-0"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},"VENDOR"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(u=a.facility_id)||void 0===u||null===(p=u.vendor)||void 0===p?void 0:p.name:"WAREHOUSE"===(null===a||void 0===a?void 0:a.facility_type)?null===a||void 0===a||null===(v=a.facility_id)||void 0===v?void 0:v.internal_location.name:"-")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.qty||1)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.uom?null===(h=a.uom)||void 0===h?void 0:h.name:"Hours")),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null,"-"),l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},"-"),l.a.createElement("div",{className:"custom-table-cell-td"},"$",null===a||void 0===a?void 0:a.total_price)));case Ld:return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-table-row-level-1 row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td custom-table-cell-td-1 gray-2-color"},l.a.createElement("div",null,"Labor")),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"},l.a.createElement("div",null,a.name)),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},(null===E||void 0===E?void 0:E.labor_assignee)||"-"),l.a.createElement("div",{className:"custom-table-cell-td justify-content-start"},l.a.createElement("div",{className:"px-3"},"-")),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("div",{className:"editalble-form-data d-flex align-items-center justify-content-center"},a.qty||1)),l.a.createElement("div",{className:"custom-table-cell-td px-3"},l.a.createElement("div",null,a.uom?null===(f=a.uom)||void 0===f?void 0:f.name:"Hours")),l.a.createElement("div",{className:"custom-table-cell-td px-3"}," -",l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},l.a.createElement("span",null,"-"),l.a.createElement("div",null)),l.a.createElement("div",{className:"custom-table-cell-td"},"-"),l.a.createElement("div",{className:"custom-table-cell-td"},"$",a.total_price)));default:return l.a.createElement(l.a.Fragment,null)}},e}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t=this,n=this.props,c=(n.foundRegion,n.invoiceVariant);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body p-0"},l.a.createElement(fu.a,{expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"custom-table-collapse-main"},l.a.createElement(NU,{header:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"custom-table-row custom-collapse-line-item custom-table-row-level-1 line-item-grid row mx-0"},l.a.createElement("div",{className:"custom-table-cell-td wage-info-collapse-td gray-2-color d-flex align-items-center justify-content-between"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("img",{alt:"",src:"INVENTORY_KIT"===(null===c||void 0===c?void 0:c.resource_type)?Rm.inventory_kit_variant:"INVENTORY_ITEM"===(null===c||void 0===c?void 0:c.resource_type)?Rm.inventory_item_variant:Rm.line_item_black,className:"img-fluid mr-2"}),"INVENTORY_KIT"===(null===c||void 0===c?void 0:c.resource_type)||"INVENTORY_ITEM"===(null===c||void 0===c?void 0:c.resource_type)?null===c||void 0===c||null===(e=c.resource_id)||void 0===e?void 0:e.name:(null===c||void 0===c||null===(a=c.variant_data)||void 0===a?void 0:a.display_name)||"-")),l.a.createElement("div",{className:"custom-table-cell-td px-3 text-left"},"-"),l.a.createElement("div",{className:"custom-table-cell-td p-0"}),l.a.createElement("div",{className:"custom-table-cell-td p-0 gray-2-color"},(null===c||void 0===c?void 0:c.workorder_qty)||1),l.a.createElement("div",{className:"custom-table-cell-td p-0"}),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color pl-0"},l.a.createElement("span",{className:"d-inline-block w-100"},"$".concat(null===c||void 0===c?void 0:c.price_per_unit)||!1)),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color pl-0"}),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"},l.a.createElement("div",{className:"d-inline-block w-100"},"-")),l.a.createElement("div",{className:"custom-table-cell-td gray-2-color px-3"},l.a.createElement("div",{className:"d-inline-block w-100"},"$".concat(null===c||void 0===c?void 0:c.total_price)||!1)))),key:"1"},this.state.rows.map((function(e,a){var n={};if(e.kit){var l,c=t.state.rows.length>a+1;return n={id:e.id,item:e.item,qty:e.quantity,kit_uom:null===(l=e.kit)||void 0===l?void 0:l.unit,type:"INVENTORY_ITEM",kit_child:!0},t.renderRow(n,!0,c)}return t.renderRow(e)}))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{rows:Object(Ou.a)(e.child)}}}]),t}(n.Component),wU={labelCol:{span:24},wrapperCol:{span:24}},_U=fu.a.Panel,SU=ku.a.Option,xU=Pm.a.TextArea,CU=(Pm.a.Search,function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.state={invoiceWorkorder:[],fetching:!1,invoiceData:null,page:1,searchValue:null,taxBasisOptions:[],totalCount:0,totalPriceTax:"$0.00",parsedValue:null,depositReceive:"$0.00",priceModalVisible:!1,priceTaxValue:null},e.fetchWorkorders=function(){var a,t,n,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l={project:null===(a=e.props.Invoice)||void 0===a||null===(t=a.project)||void 0===t?void 0:t.id,invoice:null===(n=e.props.Invoice)||void 0===n?void 0:n.id,search:l.search},e.setState({fetching:!0}),sU(l).then((function(a){e.setState({invoiceWorkorder:a.data.results,fetching:!1})})).catch((function(e){td(e)}))},e.handleWorkorder=function(a){var t;oU({workorder:a,invoice:null===(t=e.props.Invoice)||void 0===t?void 0:t.id}).then((function(a){e.props.fetchInvoice(e.props.Invoice.id),e.formRef.current.setFieldsValue({work_order:""})})).catch((function(e){td(e)}))},e.handlUpdateData=function(a,t){mU(t,a).then((function(a){e.props.fetchInvoice(e.props.Invoice.id)})).catch((function(e){td(e)}))},e.handleRemoveWorkorder=function(a){dU(a).then((function(a){e.props.fetchInvoice(e.props.Invoice.id)})).catch((function(e){td(e)}))},e.handleSubmit=function(){Mm.b.success("Invoice updated successfully"),e.props.setInvoice(e.props.Invoice,3)},e.getTaxBasisOptions=function(){e.state.searchValue,e.state.page;mE().then((function(a){1===e.state.page?e.setState({taxBasisOptions:a.data.results}):e.setState((function(e){return{taxBasisOptions:[].concat(Object(Ou.a)(e.taxBasisOptions),Object(Ou.a)(a.data.results)),totalCount:a.data.count}}))})).catch((function(e){td(e)}))},e.handleDataSubmit=function(a){WL(e.props.Invoice.id,a).then((function(a){e.props.fetchInvoice(e.props.Invoice.id)})).catch((function(e){td(e)}))},e.handleTaxBasisChange=function(a){var t=a.value;e.handleDataSubmit({tax_basis:t})},e.handlePaymentTerms=function(a){e.handleDataSubmit({payment_terms:a})},e.handleDeposit=function(a){e.handleDataSubmit({deposit:a})},e.handleTotalPriceTax=function(a){var t=(null===a||void 0===a?void 0:a.toString())||"0",n=null===t||void 0===t?void 0:t.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);e.setState({totalPriceTax:l},(function(){var a=null===l||void 0===l?void 0:l.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2});e.setState({parsedValue:a},(function(){e.handleDataSubmit({estimated_total_price_pre_tax:e.state.parsedValue})}))}))},e.handleDepositData=function(a){var t=(null===a||void 0===a?void 0:a.toString())||"0",n=null===t||void 0===t?void 0:t.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2}),l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);e.setState({depositReceive:l},(function(){var a=null===l||void 0===l?void 0:l.replace(/\$\s?|(,*)/g,"").toLocaleString(void 0,{minimumFractionDigits:2});e.setState({parsedValue:a},(function(){e.handleDataSubmit({deposit_amount:e.state.parsedValue})}))}))},e.handlePricePreTax=function(a,t){e.state.totalPriceTax!==t&&e.setState({priceModalVisible:a,priceTaxValue:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l=this.props.Invoice;(this.getTaxBasisOptions(),l)&&(this.formRef.current.setFieldsValue({cost_setting:(null===(e=$D.find((function(e){return(null===l||void 0===l?void 0:l.cost_setting)===e.value})))||void 0===e?void 0:e.name)||"STANDARD",payment_terms:(null===l||void 0===l?void 0:l.payment_terms)||"30_DAYS",deposit:(null===l||void 0===l?void 0:l.deposit)||null,deposit_amt:null===l||void 0===l?void 0:l.deposit_amount,tax_basis:(null===l||void 0===l?void 0:l.tax_basis)?{label:null===l||void 0===l||null===(a=l.tax_basis)||void 0===a?void 0:a.name,value:null===l||void 0===l||null===(t=l.tax_basis)||void 0===t?void 0:t.id,key:null===l||void 0===l||null===(n=l.tax_basis)||void 0===n?void 0:n.id}:void 0}),(null===l||void 0===l?void 0:l.estimated_total_price_pre_tax)&&this.setState({totalPriceTax:"$".concat(null===l||void 0===l?void 0:l.estimated_total_price_pre_tax)}),(null===l||void 0===l?void 0:l.deposit_amount)&&this.setState({depositReceive:"$".concat(null===l||void 0===l?void 0:l.deposit_amount)}))}},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c,i=this.props.Invoice;e.Invoice!=i&&(this.formRef.current.setFieldsValue({cost_setting:(null===(t=$D.find((function(e){return(null===i||void 0===i?void 0:i.cost_setting)===e.value})))||void 0===t?void 0:t.name)||"STANDARD",payment_terms:(null===i||void 0===i?void 0:i.payment_terms)||"30_DAYS",deposit:(null===i||void 0===i?void 0:i.deposit)||null,deposit_amt:(null===i||void 0===i?void 0:i.deposit_amount)||null,tax_basis:(null===i||void 0===i?void 0:i.tax_basis)?{label:null===i||void 0===i||null===(n=i.tax_basis)||void 0===n?void 0:n.name,value:null===i||void 0===i||null===(l=i.tax_basis)||void 0===l?void 0:l.id,key:null===i||void 0===i||null===(c=i.tax_basis)||void 0===c?void 0:c.id}:void 0}),this.setState({totalPriceTax:"$".concat(null===i||void 0===i?void 0:i.estimated_total_price_pre_tax,".00")}),this.setState({depositReceive:"$".concat(null===i||void 0===i?void 0:i.deposit_amount)}))}},{key:"render",value:function(){var e,a,t,n,c=this,i=this.state,r=i.fetching,s=i.taxBasisOptions,o=this.props.Invoice,m=null===(e=this.props.Invoice)||void 0===e||null===(a=e.invoice_workorder)||void 0===a?void 0:a.reverse();return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"The invoice will be generated based on Work Order Dispatch information."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef,onFinish:this.handleSubmit},wU,{hideRequiredMark:!0,className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"work_order",label:"Work Order *",className:"position-relative"},l.a.createElement(ku.a,{showSearch:!0,notFoundContent:r?l.a.createElement(Wv.a,{size:"small"}):null,placeholder:"search",onChange:this.handleWorkorder,onFocus:this.fetchWorkorders,onSearch:function(e){return c.fetchWorkorders({search:e})}},this.state.invoiceWorkorder.map((function(e){var a;return l.a.createElement(ku.a.Option,{value:e.id},null===(a=e.project)||void 0===a?void 0:a.name)}))))),l.a.createElement("div",{className:"col-12"},(null===m||void 0===m?void 0:m.length)>0&&m.map((function(e,a){var t,n,i,r,s,o,m,d,u,p,v,h,f,E,g;return l.a.createElement(fu.a,{bordered:!1,defaultActiveKey:["".concat(a+1)],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"invoicing-inner-collapse"},l.a.createElement(_U,{key:a+1,forceRender:!0,header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-1"},l.a.createElement("img",{src:Rm.work_order_key,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-11 pl-0 position-relative"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return c.handleRemoveWorkorder(e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent mr-3 position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.stopPropagation()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"}))),l.a.createElement("h6",{className:"mt-0 mb-0"},null===(t=e.workorder)||void 0===t||null===(n=t.project)||void 0===n?void 0:n.name),l.a.createElement("p",{style:{color:"#BDBDBD",fontWeight:"600",fontSize:"13px"},className:"mb-0"},"Total Balance Due: $12,000.00"))))},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"date",label:"Service Date",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(Hv.a,{defaultValue:(null===e||void 0===e?void 0:e.service_date)?hd()(null===e||void 0===e?void 0:e.service_date):null,onChange:function(a){return c.handlUpdateData({service_date:hd()(a).format("YYYY-MM-DD")||null},e.id)}}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"po_job",label:"Billing Account PO# / Job#",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"#",defaultValue:(null===e||void 0===e?void 0:e.billing_account_po)||"-",onBlur:function(a){return c.handlUpdateData({billing_account_po:a.target.value},e.id)}}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:"Description",className:"position-relative"},l.a.createElement(xU,{className:"text-area-main text-area-task",placeholder:"Description",defaultValue:(null===e||void 0===e?void 0:e.description)||"-",onBlur:function(a){return c.handlUpdateData({description:a.target.value},e.id)}}))),l.a.createElement("div",{className:"col-12"},(null===(i=e.workorder)||void 0===i||null===(r=i.dispatch)||void 0===r?void 0:r.crew_chief)&&l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-4 mt-0",style:{minHeight:"68px",height:"68px"}},l.a.createElement("div",{className:"col-12 align-items-center d-flex"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},"".concat(null===(s=e.workorder)||void 0===s||null===(o=s.dispatch)||void 0===o||null===(m=o.crew_chief)||void 0===m||null===(d=m.split(" ")[0])||void 0===d?void 0:d.split("")[0]).concat(null===(u=e.workorder)||void 0===u||null===(p=u.dispatch)||void 0===p||null===(v=p.crew_chief)||void 0===v||null===(h=v.split(" ")[1])||void 0===h?void 0:h.split("")[0]))),l.a.createElement("div",{className:"user-info-div pt-0"},l.a.createElement("h6",{className:"mb-0"},null===(f=e.workorder)||void 0===f||null===(E=f.dispatch)||void 0===E?void 0:E.crew_chief),l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Crew Chief"))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body p-0"}),l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table px-3"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table proposal-update-table-edit invoice-table-main"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"ASSIGNEE")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Taxable")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Include",l.a.createElement("br",null),"In Subtotal")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Total Price"))),l.a.createElement("div",{className:"row"},null===e||void 0===e||null===(g=e.workorder)||void 0===g?void 0:g.workorder_variant.map((function(e){var a,t;return l.a.createElement(yU,{key:e.id,invoiceVariant:e,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===e||void 0===e||null===(t=e.variant_data)||void 0===t?void 0:t.region})}))))))))))))})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row service-row-main service-line-item"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"cost_setting",label:"Cost Setting Options *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),defaultValue:"STANDARD",placeholder:"Select"},l.a.createElement(SU,null,"Standard")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"tax_basis",className:"search-small-icon-position",label:"Tax Basis *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{labelInValue:!0,showSearch:!0,onSearch:function(e){c.setState({page:1,searchValue:e},(function(){c.getTaxBasisOptions()}))},placeholder:"Select",filterOption:!1,onPopupScroll:function(e){e.persist();var a=e.target;s.length!==c.state.totalCount&&a.scrollTop+a.offsetHeight===a.scrollHeight&&c.setState({page:c.state.page+1},(function(){return c.getTaxBasisOptions()}))},onChange:this.handleTaxBasisChange},s.map((function(e){return l.a.createElement(SU,{key:e.id,value:e.id},e.name," - ",e.percentage)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"payment_terms",label:"Payment Terms *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onChange:this.handlePaymentTerms},QD.map((function(e){return l.a.createElement(SU,{value:e.value},e.name)}))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"deposit",label:"Deposit *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select",onChange:this.handleDeposit},l.a.createElement(SU,{value:"YES"},"Yes"),l.a.createElement(SU,{value:"NO"},"No")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"deposit_amt",label:"Deposit Amount *",rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{disabled:!0,placeholder:"$0.00",defaultValue:"$".concat(null===o||void 0===o?void 0:o.deposit_amount)||!1}))))),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1 pt-4"},l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("span",{className:"sub-total-text"},"Total Price Pre-tax:")),l.a.createElement("div",{className:"col-4 text-md-right"},l.a.createElement(ap.a,{value:this.state.totalPriceTax,onBlur:function(e){return c.handlePricePreTax(!0,e.target.value)}}))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text"},"Taxes::")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("small",null," ",0!=(null===o||void 0===o||null===(t=o.tax_basis)||void 0===t?void 0:t.percentage)?null===o||void 0===o||null===(n=o.tax_basis)||void 0===n?void 0:n.percentage:"-","%")),l.a.createElement("li",{className:"list-inline-item"},"|"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"sub-total-text gray-1"},gd(null===o||void 0===o?void 0:o.estimated_taxes)||0))))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text-main"},"Total:")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("span",{className:"sub-total-text"},"$",gd(null===o||void 0===o?void 0:o.standard_estimated_total)))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("span",{className:"sub-total-text"},"Deposit Recieved:")),l.a.createElement("div",{className:"col-4 text-md-right"},l.a.createElement(ap.a,{value:this.state.depositReceive,onBlur:function(e){return c.handleDepositData(e.target.value)}}))),l.a.createElement("div",{style:{borderTop:"1px solid #E0E0E0"},className:"row mt-3 pt-3 estimated-total-row-3 estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text-main"},"Total Balance Due:")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("span",{className:"sub-total-text-main"},"$",gd(null===o||void 0===o?void 0:o.total_balance)||0)))))),l.a.createElement("div",{className:"col-12 validate-div-col validate-div-col-line-items text-md-right"},l.a.createElement(Vm.a,{onClick:this.handleSubmit,className:"validate-btn-main"},"Save and Continue")))))),l.a.createElement(iv,{visible:this.state.priceModalVisible,totalPricingWarning:!0,changeTotalPriceTax:function(){c.handleTotalPriceTax(c.state.priceTaxValue),c.handlePricePreTax(!1)},onClose:function(){c.handlePricePreTax(!1)},heading:"Are you sure you want to change Total Price Pre-tax?",subHeadingUOM:"If you change Total Price Pre-tax, the only way to return to the original number is to input it."}))}}]),t}(n.Component)),OU=Object(r.withRouter)(CU),kU={labelCol:{span:24},wrapperCol:{span:24}},jU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,proposal:{},contactAccount:null,showContactModel:!1,contactModalItem:null,contacts:[],removeVisible:!1,contactDrwrVisible:!1,deletableAccountId:null,createAccountType:null},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.showRemoveContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrwrVisible:a,selectedItem:t,deletableContactId:n})},e.handleSubmit=function(){Mm.b.success("Billing Account Updated Successfully!"),e.props.setInvoice(e.props.Invoice,4)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.showCustomerAccount=function(){e.setState({customerModalVisible:!1})},e.showContactAccount=function(){e.setState({customerContactVisible:!1})},e.showAccountTypeModal=function(a){e.setState({visibleAcTypeModal:a})},e.setAccountTypeOrVisible=function(a,t){e.setState({createAccountType:a,customerModalVisible:t})},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),Du(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.debounceEvent=function(){return e.debouncedEvent=lp.debounce.apply(void 0,arguments),function(a){return e.debouncedEvent(a)}},e.onAccountsSearch=function(a){e.getAllAccounts({search:a})},e.handleOnSelect=function(a){e.formRef.current.setFieldsValue({billing_accounts:null}),GL({invoice:e.props.Invoice.id,account:a.value,contact_id:[]}).then((function(){e.props.fetchInvoice(e.props.Invoice.id)})).catch((function(e){td(e)}))},e.getAllContacts=function(a){var t,n=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({},a),{},{account:null===n||void 0===n||null===(t=n.account)||void 0===t?void 0:t.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.handleContactSelect=function(a){var t=e.state.contactModalItem,n=e.props.Invoice.invoice_customer_contact,l=n.findIndex((function(e){return e.id===(null===t||void 0===t?void 0:t.id)})),c=n[l].contact.map((function(e){return e.contact.id})),i={contact_id:[].concat(Object(Ou.a)(c),[a]),contact:[]};HL(t.id,i).then((function(){e.props.fetchInvoice(e.props.Invoice.id)}))},e.handleDeleteContactAccount=function(){QL(e.state.deletableAccountId).then((function(){e.props.fetchInvoice(e.props.Invoice.id)}))},e.handleDeleteContact=function(){var a=e.props.Invoice.invoice_customer_contact,t=a.findIndex((function(a){return a.id===e.state.selectedItem.id})),n={contact:[],contact_id:a[t].contact.filter((function(a){return a.id!==e.state.deletableContactId})).map((function(e){return e.contact.id}))};HL(e.state.selectedItem.id,n).then((function(a){e.props.fetchInvoice(e.props.Invoice.id)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getAllAccounts()}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.accounts,c=t.loading,i=(this.props.Invoice,(null===(e=this.props.Invoice)||void 0===e?void 0:e.invoice_customer_contact)||[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"You can choose one billing account per project."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},kU,{className:"main-inner-form"}),l.a.createElement("div",{className:"row",style:{padding:"0px 25px"}},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"billing_accounts",label:"Billing Accounts *",rules:[{required:0==i.length,message:"Please select at least one billing account."}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,removeIcon:"",className:"search-and-select-tag",showSearch:!0,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:this.debounceEvent(this.onAccountsSearch,1e3),notFoundContent:this.state.loading?l.a.createElement(Wv.a,{size:"small"}):null,disabled:i.length>=1,onFocus:function(){return a.getAllAccounts()}},n.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Billing Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),i.map((function(e,t){var n,c,i,r;return l.a.createElement("div",{className:"col-12 col-sm-12",key:t},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===e||void 0===e||null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},"Billing Account")))),(null===(c=a.props.location.pathname)||void 0===c?void 0:c.includes("create"))&&l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleContactModel(e,!0)}},"+ Add Contact")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(vh.a.Group,{className:"w-100",defaultValue:null===(i=e.contact.find((function(e){return!0===e.default_customer_recipient})))||void 0===i||null===(r=i.contact)||void 0===r?void 0:r.id},l.a.createElement("div",{className:"row w-100"},e.contact.map((function(t,n){var c,i,r;return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{className:"row mx-0 pb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},t.contact.first_name," ",t.contact.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500"}},t.contact.role)),l.a.createElement("p",{className:"mb-0"},t.contact.default_email&&"".concat(null===(c=t.contact.default_email)||void 0===c?void 0:c.email,","),"\xa0",null===(i=t.contact.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveContact(!0,e,null===t||void 0===t?void 0:t.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===t||void 0===t||null===(r=t.contact)||void 0===r?void 0:r.id,onChange:function(){var n;return a.handleDefaultRecipient(e.id,null===t||void 0===t||null===(n=t.contact)||void 0===n?void 0:n.id)}},"Proposal Recipient"," ",l.a.createElement("small",{style:{color:"#b4b4b4",fontSize:"8px"}},"This contact will be addressed in the proposal.")))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))))))})),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Billing Accounts"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add contact",onOk:function(){return a.handleContactModel(null,!1)},onCancel:function(){return a.handleContactModel(null,!1)},destroyOnClose:!0,closable:!0,footer:!1,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},kU,{ref:this.contactRef}),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts *",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,placeholder:"Search",filterOption:!1,removeIcon:"",onChange:this.handleContactSelect,notFoundContent:c?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onFocus:function(){return a.getAllContacts()},onSearch:lu((function(e){return a.getAllContacts({search:e})}),300)},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:e.id,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({customerContactVisible:!0},(function(){return a.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(iv,{common:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account? ",subHeadingUOM:"If you choose to remove this Billing Account, this might cause issues.",visible:this.state.removeVisible,commonFunc:function(){a.setState({deletableAccountId:null,removeVisible:!1}),a.handleDeleteContactAccount()},onClose:function(){a.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedItem:null,deletableContactId:null,contactDrwrVisible:!1}),a.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrwrVisible,onClose:function(){return a.showRemoveContact(!1)}}),l.a.createElement(Up,{PARTIAL_BILLING:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.visibleAcTypeModal,onClose:function(){return a.showAccountTypeModal(!1)}}),l.a.createElement(kp,{createAccountType:this.state.createAccountType,callbackCustomerAccount:this.callbackCustomerAccount,visible:this.state.customerModalVisible,onClose:function(){return a.showCustomerAccount(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.customerContactVisible,onClose:function(){return a.showContactAccount(!1)}}))}}]),t}(n.Component),IU=Object(h_.withRouter)(jU),AU={labelCol:{span:24},wrapperCol:{span:24}},DU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).formRef=l.a.createRef(),e.contactRef=l.a.createRef(),e.siteRef=l.a.createRef(),e.state={selectedAccounts:[],accounts:[],loading:!1,proposal:{},contactAccount:null,showContactModel:!1,contactModalItem:null,showSiteModel:!1,siteModalItem:null,contacts:[],sites:[],removeVisible:!1,deletableAccountId:null,contactDrawerVisible:!1,siteDrawerVisible:!1,createAccountType:null,deletableContactId:null},e.showRemoveAccount=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({removeVisible:a,deletableAccountId:t})},e.handleOnSelect=function(a){var t;e.formRef.current.setFieldsValue({owner_accounts:null});var n={invoice:null===(t=e.props.Invoice)||void 0===t?void 0:t.id,account:a.value};console.log(n,"values"),JL(n).then((function(){e.props.fetchInvoice(e.props.Invoice.id)}))},e.handleDeleteOwnerAccount=function(){aU(e.state.deletableAccountId).then((function(){e.props.fetchInvoice(e.props.Invoice.id)}))},e.handleContactSelect=function(a){e.contactRef.current.setFieldsValue({contact:null});var t=e.state.contactModalItem,n=e.props.Invoice.invoice_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a])};XL(t.id,i).then((function(a){e.props.fetchInvoice(e.props.Invoice.id)}))},e.handleDeleteContact=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedItem,n=e.state.deletableContactId,l=e.props.Invoice.invoice_owner_contact,c=l.findIndex((function(e){return e.id===t.id})),i={contact:l[c].contact.filter((function(e){return e.id!==n})).map((function(e){return e.id}))};XL(t.id,i).then((function(){e.props.fetchInvoice(e.props.Invoice.id)}))},e.handleSiteSelect=function(a){e.siteRef.current.setFieldsValue({site:null});var t=e.state.siteModalItem,n=e.props.Invoice.invoice_owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l],i=c.site.map((function(e){return e.site.id})),r={site_id:[].concat(Object(Ou.a)(i),[a]),site:[]};XL(t.id,r).then((function(){0===c.site.length&&e.handlePrimarySite(c.id,a),e.props.fetchInvoice(e.props.Invoice.id)}))},e.handleDeleteSite=function(){var a,t=null===(a=e.state)||void 0===a?void 0:a.selectedSite,n=e.state.deletableSiteId,l=e.props.Invoice.invoice_owner_contact,c=l.findIndex((function(e){return e.id===t.id})),i=l[c],r={site_id:null===i||void 0===i?void 0:i.site.filter((function(e){return e.site.id!==n})).map((function(e){return e.site.id}))};XL(t.id,r).then((function(){e.props.fetchInvoice(e.props.Invoice.id)}))},e.getAllAccounts=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),mp(a).then((function(a){e.setState({accounts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllSites=function(a){var t=e.state.siteModalItem;e.setState({loading:!0}),hp(Object(wu.a)(Object(wu.a)({},a),{},{account:t.account.id})).then((function(a){e.setState({sites:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.getAllContacts=function(){var a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.state.contactModalItem;e.setState({loading:!0}),yh(Object(wu.a)(Object(wu.a)({},t),{},{account:null===n||void 0===n||null===(a=n.account)||void 0===a?void 0:a.id})).then((function(a){e.setState({contacts:a.data.results,loading:!1})})).catch((function(a){e.setState({loading:!1})}))},e.handleSubmit=function(){Mm.b.success("Site Manager Updated Successfully!"),e.props.setInvoice(e.props.Invoice,5)},e.handleContactModel=function(a,t){a?e.setState({contactModalItem:a,showContactModel:t}):e.setState({showContactModel:t})},e.handleSiteModel=function(a,t){a?e.setState({siteModalItem:a,showSiteModel:t}):e.setState({showSiteModel:t})},e.handlePrimarySite=function(e,a){tU(e,{primary_site_id:a}).then().catch((function(e){td(e)}))},e.removeContact=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({contactDrawerVisible:a,selectedItem:t,deletableContactId:n})},e.handleRemoveSite=function(a,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.setState({siteDrawerVisible:a,selectedSite:t,deletableSiteId:n})},e.showOwnerAccount=function(){e.setState({ownerModalVisible:!1})},e.showContactAccount=function(){e.setState({ownerContactVisible:!1})},e.showSites=function(){e.setState({onwerSiteVisible:!1})},e.callbackOwnerAccount=function(a){Zf({proposal:e.props.proposal.id,account:a.id}).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.callbackContact=function(a){var t=e.state.contactModalItem,n=e.props.proposal.owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].contact.map((function(e){return e.id})),i={contact:[].concat(Object(Ou.a)(c),[a.id])};Xf(t.id,i).then((function(a){e.props.fetchProposal(e.props.proposal.id),a.data.contact.map((function(e){var t;xh({account:null===(t=a.data)||void 0===t?void 0:t.account.id},e.id).then((function(){})).catch((function(e){td(e)}))}))}))},e.callbackSite=function(a){var t=e.state.siteModalItem,n=e.props.proposal.owner_contact,l=n.findIndex((function(e){return e.id===t.id})),c=n[l].site.map((function(e){return e.site.id})),i={site_id:[].concat(Object(Ou.a)(c),[a.id]),site:[]};Xf(t.id,i).then((function(){e.props.fetchProposal(e.props.proposal.id)}))},e.showAccountTypeModal=function(a){e.setState({visibleAcTypeModal:a})},e.setAccountTypeOrVisible=function(a,t){e.setState({createAccountType:a,ownerModalVisible:t})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.Invoice,"props from invoice sitemanager")}},{key:"render",value:function(){var e,a=this,t=this.state,n=t.loading,c=t.accounts,i=(null===(e=this.props.Invoice)||void 0===e?void 0:e.invoice_owner_contact)||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row mx-0"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please add a Site Manager account and its contacts. You can only have one Site Manager for each proposal."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef},AU,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{dropdownClassName:"option-design-fix",name:"owner_accounts",label:"Site Manager Account *",rules:[{required:(null===i||void 0===i?void 0:i.length)<1,message:"Please select at least one site manager account."}],className:"position-relative"},l.a.createElement(ku.a,{labelInValue:!0,className:"search-and-select-tag",showSearch:!0,disabled:(null===i||void 0===i?void 0:i.length)>=1,placeholder:"Search",filterOption:!1,onChange:this.handleOnSelect,onSearch:function(e){return a.getAllAccounts({search:e})},removeIcon:"",notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):null,onFocus:function(){return a.getAllAccounts()}},c.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.account_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site Manager Account")))})))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:43,left:25}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),null===i||void 0===i?void 0:i.map((function(e,t){var n,c,i;return l.a.createElement("div",{className:"col-12 col-sm-12",key:t},l.a.createElement("div",{className:"row mx-0 opportunity-proposal-account-main-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row site-details-row-card no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-11 col-sm-11 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"customer-name"},l.a.createElement("h5",{className:"text-capitalize mt-0"}," ",null===(n=e.account)||void 0===n?void 0:n.name," "),l.a.createElement("h6",{className:"mb-0"},Lp[null===(c=e.account)||void 0===c?void 0:c.account_type]," ","Account")))),l.a.createElement("div",{className:"col-1 col-sm-1 p-0 text-right"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.showRemoveAccount(!0,e.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleContactModel(e,!0)}},"+ Add Contact")),e.contact&&0!==e.contact.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},e.contact.map((function(t,n){var c,i;return l.a.createElement("div",{className:"col-6 col-sm-6",key:n},l.a.createElement("div",{style:{minHeight:"100px"},className:"row mx-0 mb-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12 contact-col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",{className:"d-flex align-items-center"},t.first_name," ",t.last_name,l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},t.role)),l.a.createElement("p",{className:"mb-0"},t.default_email&&"".concat(null===(c=t.default_email)||void 0===c?void 0:c.email,","),"\xa0"," ",null===(i=t.default_phone)||void 0===i?void 0:i.phone_number)),l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.removeContact(!0,e,t.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"}))))))}))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Contacts")))),l.a.createElement("div",{className:"col-12 mb-3 mt-2 p-0"},l.a.createElement(Vm.a,{className:"edit-create-btn w-100 text-uppercase",onClick:function(){return a.handleSiteModel(e,!0)}},"+ Add Site")),e.site&&0!==e.site.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(vh.a.Group,{defaultValue:null===(i=e.site.find((function(e){return!0===e.primary})))||void 0===i?void 0:i.id},e.site.map((function(t,n){return l.a.createElement("div",{className:"col-12",key:n},l.a.createElement("div",{className:"row site-details-row-card position-relative"},l.a.createElement("div",{className:"col-12 col-sm-3 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("h6",{style:{fontSize:"15px",color:"#4f4f4f",fontWeight:"500"},className:"text-capitalize mb-0"},t.site.name)))),l.a.createElement("div",{className:"col-12 col-sm-9 px-3 pt-2 pb-4"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},t.site.street_address||""," ",t.site.apartment||""," ",t.site.city||"",","," ",t.site.state||""," ",t.site.zip_code||""," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},t.site.email)),l.a.createElement("div",{className:"col-12 col-sm-3"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"},t.site.phone)),l.a.createElement("div",{className:"col-12 col-sm-1 position-relative"},l.a.createElement(xu.a,{overlayClassName:"add-remove-dropdown-main",placement:"bottomCenter",overlay:l.a.createElement(_u.a,null,l.a.createElement(_u.a.Item,{onClick:function(){return a.handleRemoveSite(!0,e,t.site.id)},key:"0"},l.a.createElement(Vm.a,{className:"bg-transparent border-0 shadow-none p-0"},"Remove"))),trigger:["click"]},l.a.createElement(Vm.a,{style:{width:"20px"},className:"bg-transparent position-absolute p-0 border-0 elipsis-btn-card ant-dropdown-link",onClick:function(e){return e.preventDefault()}},l.a.createElement("img",{src:Rm.black_dots_elipsis,alt:"",className:"img-fluid"})))))),l.a.createElement("div",{className:"col-12 p-0 radio-btn-custom"},l.a.createElement(vh.a,{value:null===t||void 0===t?void 0:t.id,onChange:function(){return a.handlePrimarySite(e.id,null===t||void 0===t?void 0:t.site.id)}},"Primary Site"))))})))))):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))})),0===i.length&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0"},"No Site Manager Account"))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{className:"validate-btn-main",htmlType:"submit"},"Save and Continue")))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",closable:!0,footer:!1,title:"Add contact",onOk:function(){return a.handleContactModel(null,!1)},onCancel:function(){return a.handleContactModel(null,!1)},destroyOnClose:!0,visible:this.state.showContactModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},AU,{ref:this.contactRef}),l.a.createElement(Fm.a.Item,{name:"contact",label:"Contacts",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{dropdownClassName:"option-design-fix",className:"search-and-select-tag dropdown-fixed",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleContactSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Contact",onSearch:lu((function(e){return a.getAllContacts({search:e})}),300),onFocus:function(){return a.getAllContacts()}},this.state.contacts.map((function(e,a){var t;return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.contact_icon_small,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.full_name,l.a.createElement("br",null),e.role&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e.role||"")," ",l.a.createElement("br",null)),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},(null===(t=e.account)||void 0===t?void 0:t.name)||"")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({ownerContactVisible:!0},(function(){return a.handleContactModel(!1)}))}},"+ Create"))))),l.a.createElement(Cu.a,{className:"main-all-form-modal design-update-modal inner-modal-main",title:"Add Sites",closable:!0,footer:!1,onOk:function(){return a.handleSiteModel(null,!1)},onCancel:function(){return a.handleSiteModel(null,!1)},destroyOnClose:!0,visible:this.state.showSiteModel},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},'Please use the search bar to search and select existing content, or click "Create" to create new content.')),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({className:"main-inner-form"},AU,{ref:this.siteRef}),l.a.createElement(Fm.a.Item,{name:"site",label:"Site ",rules:[{required:!0,message:"this field is required"}],className:"position-relative"},l.a.createElement(ku.a,{className:"search-and-select-tag dropdown-fixed",dropdownClassName:"option-design-fix",showSearch:!0,removeIcon:"",placeholder:"Search",filterOption:!1,onChange:this.handleSiteSelect,notFoundContent:n?l.a.createElement(Wv.a,{size:"small"}):"No Associated Site",onFocus:function(){return a.getAllSites()},onSearch:lu((function(e){return a.getAllSites({search:e})}),300)},this.state.sites.map((function(e,a){return l.a.createElement(ku.a.Option,{key:a,value:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row custom-tree-row-1 align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row",style:{padding:"10px 0"}},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{style:{height:"30px"},src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("h6",{className:"mb-0"},e.name,l.a.createElement("br",null),e.account&&l.a.createElement("small",{style:{color:"#BDBDBD",fontSize:"11px",lineHeight:"8px"}},e?"".concat(null===e||void 0===e?void 0:e.street_address," ").concat(null===e||void 0===e?void 0:e.city,", ").concat(null===e||void 0===e?void 0:e.state," ").concat(null===e||void 0===e?void 0:e.zip_code):" ")))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Site")))}))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute",style:{top:6,left:10}},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement(Vm.a,{style:{top:"5px",right:"5px"},className:"create-btn-main position-absolute text-capitalize",onClick:function(){a.setState({onwerSiteVisible:!0},(function(){return a.handleSiteModel(!1)}))}},"+ Create"))))),l.a.createElement(iv,{commonInternalLocationPopup:!0,resourceWarning:!0,heading:"Are you sure you want to remove this Account?",subHeadingUOM:"If you choose to remove this Site Manager Account, this might cause issues.",visible:this.state.removeVisible,showWarningModal2:function(){a.setState({deletableAccountId:null,removeVisible:!1}),a.handleDeleteOwnerAccount()},onClose:function(){return a.showRemoveAccount(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedItem:null,deletableContactId:null,contactDrawerVisible:!1}),a.handleDeleteContact()},heading:"Are you sure you want to remove this contact?",subHeadingUOM:" ",visible:this.state.contactDrawerVisible,onClose:function(){return a.removeContact(!1)}}),l.a.createElement(iv,{wageInfoDelete:!0,removeItem:function(){a.setState({selectedSite:null,deletableSiteId:null,siteDrawerVisible:!1}),a.handleDeleteSite()},heading:"Are you sure you want to remove this site?",subHeadingUOM:" ",visible:this.state.siteDrawerVisible,onClose:function(){return a.handleRemoveSite(!1)}}),l.a.createElement(Vp,{createAccountType:this.state.createAccountType,callbackOwnerAccount:this.callbackOwnerAccount,selectedAccounts:i,visible:this.state.ownerModalVisible,onClose:function(){return a.showOwnerAccount(!1)}}),l.a.createElement(Up,{PARTIAL_MANAGER:!0,setAccountType:this.setAccountTypeOrVisible,visible:this.state.visibleAcTypeModal,onClose:function(){return a.showAccountTypeModal(!1)}}),l.a.createElement(Xh,{callbackContact:this.callbackContact,visible:this.state.ownerContactVisible,selectedAccounts:i,onClose:function(){return a.showContactAccount(!1)}}),l.a.createElement(lf,{callbackSite:this.callbackSite,visible:this.state.onwerSiteVisible,selectedAccounts:i,onClose:function(){return a.showSites(!1)}}))}}]),t}(n.Component),TU={labelCol:{span:24},wrapperCol:{span:24}},RU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={docData:!1,files:[]},e.columns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",render:function(e){return l.a.createElement("div",null,Nd(e))},sorter:!0},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a;cU({invoice:null===(a=e.props.Invoice)||void 0===a?void 0:a.id}).then((function(a){var t=Object(wu.a)(Object(wu.a)({},e.props.Invoice),{},{documents:a.data.results});e.props.setInvoice(t),e.setState({files:a.data.results})})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("invoice",e.props.Invoice.id),n.append("document",t),lU(n).then((function(a){e.props.fetchInvoice(a.data.invoice),e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({docData:!0})}},{key:"componentDidUpdate",value:function(){var e=this;this.state.docData&&this.props.Invoice&&this.setState({docData:!1},(function(){e.fetchFiles()}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row common-form-card-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please attach any documents for this disposal."))),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement(Fm.a,Object.assign({},TU,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},this.state.files.length>0?l.a.createElement("div",{className:"col-12 table-responsive"},l.a.createElement(fv.a,{className:"documents-table",columns:this.columns,dataSource:this.state.files,size:"middle",pagination:!1})):l.a.createElement("div",{className:"col-12 mb-4"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"upload-file-btn w-100 d-flex align-items-center justify-content-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 mt-1"},"Drag & Drop or ",l.a.createElement("span",{className:"ml-1"},"Browse")))))),l.a.createElement("div",{className:"col-12 validate-div-col text-md-right"},l.a.createElement(Fm.a.Item,null,l.a.createElement(Vm.a,{loading:this.state.buttonLoading,htmlType:"submit",className:"validate-btn-main"},"Save and Continue"))))))))}}]),t}(n.Component),MU=fu.a.Panel,FU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={invoice:null,activeKey:["1"],requiredSuccessModalVisible:!1,visibleConfirm:!1,warningModalVisible:!1,invoiceComplete:!1,unsavedExit:!1},e.showWarningModal=function(a){e.setState({warningModalVisible:a})},e.showConfirmModal=function(a){e.setState({visibleConfirm:a})},e.showRequiredSuccessModal=function(a){e.setState({requiredSuccessModalVisible:a})},e.collapseOnChange=function(a){e.setState({activeKey:a})},e.handleViewMainButtonCLick=function(){e.showConfirmModal(!0)},e.fetchInvoice=function(a){var t,n;YL((null===(t=e.props.match.params)||void 0===t?void 0:t.id)?null===(n=e.props.match.params)||void 0===n?void 0:n.id:a).then((function(a){e.setState({invoice:null===a||void 0===a?void 0:a.data})})).catch((function(e){td(e)}))},e.setInvoice=function(a,t){var n=null;e.state.activeKey.length>1&&(n=e.state.activeKey.find((function(e){return e==t}))),n?e.setState({invoice:a}):e.setState((function(e){return{invoice:a,activeKey:[].concat(Object(Ou.a)(e.activeKey),Object(Ou.a)(_d(t-1,"6")))}}))},e.handleDocumentPdf=function(){var a;$L({invoice:null===(a=e.state.invoice)||void 0===a?void 0:a.id}).then((function(e){})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a=[];(null===(e=this.props.match.params)||void 0===e?void 0:e.id)?(this.fetchInvoice(),a=[{title:"Edit Invoice",url:""}],this.setState({activeKey:this.props.location.editTab||"1"})):a=[{title:"Create Invoice",url:""}],this.props.setBreadcrumb(a)}},{key:"render",value:function(){var e,a,t=this,n=this.state,c=n.invoice,i=n.activeKey;n.regions,n.workorderComplete;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 create-opportunity-row"},l.a.createElement("div",{className:"col-12 col-sm-10"},l.a.createElement(fu.a,{onChange:this.collapseOnChange,defaultActiveKey:["1"],activeKey:i,expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(MU,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"General Information ",l.a.createElement("sup",null,"*")))),key:"1"},l.a.createElement(bU,{setInvoice:this.setInvoice,Invoice:c,fetchInvoice:this.fetchInvoice})),l.a.createElement(MU,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Work Orders ",l.a.createElement("sup",null,"*")))),key:"2"},l.a.createElement(OU,{setInvoice:this.setInvoice,Invoice:c,fetchInvoice:this.fetchInvoice})),l.a.createElement(MU,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Billing Account ",l.a.createElement("sup",null,"*")))),key:"3"},l.a.createElement(IU,{setInvoice:this.setInvoice,Invoice:c,fetchInvoice:this.fetchInvoice})),l.a.createElement(MU,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Site Manager Account ",l.a.createElement("sup",null,"*")))),key:"4"},l.a.createElement(DU,{setInvoice:this.setInvoice,Invoice:c,fetchInvoice:this.fetchInvoice})),l.a.createElement(MU,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row info-card-heading-row align-items-center justify-content-between"},l.a.createElement("h5",{className:"mb-0"},"Documents"))),key:"5"},l.a.createElement(RU,{setInvoice:this.setInvoice,Invoice:c,fetchInvoice:this.fetchInvoice}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 justify-content-end common-form-btn-row"},l.a.createElement(Vm.a,{onClick:function(){return t.showWarningModal(!0)},style:{margin:"0 8px"}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){t.state.unsavedExit?t.showConfirmModal(!0):t.handleViewMainButtonCLick()},type:"primary"},(null===(e=this.props.location.pathname)||void 0===e?void 0:e.includes("create"))?"Create Invoice":"View Invoice"))))))),l.a.createElement(mh,{InvoiceText:!0,visible:this.state.visibleConfirm,okAction:function(){t.handleDocumentPdf(),o.push(Object(dh.a)(zm.dashboard.accounting.invoicing.view,{id:null===c||void 0===c?void 0:c.id}))},okTitle:"Continue",onClose:function(){return t.showConfirmModal(!1)}}),l.a.createElement(iv,{heading:"Are you sure you want to exit ".concat((null===(a=this.props.match.params)||void 0===a?void 0:a.id)?"editing":"creating"," this Work Order?"),visible:this.state.warningModalVisible,onClose:function(){return t.showWarningModal(!1)}}))}}]),t}(n.Component),PU=Object(Lm.b)(null,{setBreadcrumb:Uv})(Object(r.withRouter)(FU)),VU=ku.a.Option,qU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleGoogleBtnClick=function(){pd({redirect_url:window.location.href}).then((function(e){window.location.href=e.data.url}))},n.handleChange=function(e){var a=n.props.userdata;"send_pdf"===e?(null===a||void 0===a?void 0:a.google_authorised_email)?n.props.callbackSendInvoice():n.setState({googleModalVisible:!0}):n.props.onTabChange("5"),n.setState({pdfValue:"select"})},n.state={fileURL:null,pdfValue:"select",pdfLoading:!1,googleModalVisible:!1},n}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r,s=this,o=this.state.googleModalVisible,m=this.props,d=m.Invoice,u=m.statusTypes;return l.a.createElement("div",{className:"row summary-collapse-inner-row-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-view-row-vehicle"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Associated project"),l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.leads_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,null===d||void 0===d||null===(e=d.project)||void 0===e?void 0:e.name),l.a.createElement("p",{className:"mb-0"},null===d||void 0===d||null===(a=d.project)||void 0===a||null===(t=a.status)||void 0===t?void 0:t.title))))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4"},l.a.createElement("h6",{className:"text-uppercase"},"Actions"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 position-relative"},l.a.createElement(ku.a,{dropdownClassName:"pdf-select-view",suffixIcon:l.a.createElement(wO.a,null),className:"select-pdf-options",placeholder:"Select",defaultValue:"select",onChange:this.handleChange,value:this.state.pdfValue},l.a.createElement(VU,{value:"send_pdf"},"Generate and Send Invoice PDF",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD"}},"Generate and send an up to date invoice pdf")),l.a.createElement(VU,{value:"view_pdf"},"View Invoices",l.a.createElement("br",null),l.a.createElement("small",{style:{color:"#BDBDBD"}},"View all invoice PDFs and other documents uploaded"))),l.a.createElement("span",{className:"pdf-icon-tg position-absolute"},l.a.createElement("img",{alt:"",src:Rm.pdf_icon_light_green,className:"img-fluid"})))))),l.a.createElement("div",{className:"row summary-view-row-vehicle border-bottom-0"},l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Invoice ID"),l.a.createElement("h5",{className:"mb-0"},null===d||void 0===d?void 0:d.id)),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"STATUS"),l.a.createElement(ku.a,{labelInValue:!0,className:"status-small-select",placeholder:"Select",defaultValue:{value:null===(n=d.status)||void 0===n?void 0:n.id,label:null===(c=d.status)||void 0===c?void 0:c.title},value:{value:null===(i=d.status)||void 0===i?void 0:i.id,label:null===(r=d.status)||void 0===r?void 0:r.title},style:{width:"100%",textAlign:"center"},onChange:this.props.handleChange,suffixIcon:l.a.createElement("img",{src:Rm.caret_small_icon_select,alt:"",className:"img-fluid"})},null===u||void 0===u?void 0:u.map((function(e){return l.a.createElement("option",{value:null===e||void 0===e?void 0:e.id},l.a.createElement("div",{className:"text-capitalise"},e.title))})))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Invoice Created"),l.a.createElement("h5",{className:"mb-0"},Sd(null===d||void 0===d?void 0:d.created))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3 mb-15-bt"},l.a.createElement("h6",{className:"text-uppercase"},"Invoice DUe"),l.a.createElement("h5",{className:"mb-0"},Sd(null===d||void 0===d?void 0:d.due_date))),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-3 col-lg-3"},l.a.createElement("h6",{className:"text-uppercase"},"Invoice instruction"),l.a.createElement("h5",{className:"mb-0"},(null===d||void 0===d?void 0:d.instruction)||"-")),l.a.createElement("div",{className:"col-12 col-sm-6 col-md-9 col-lg-9"},l.a.createElement("h6",{className:"text-uppercase"},"DESCRIPTION"),l.a.createElement("h5",{className:"mb-0"},(null===d||void 0===d?void 0:d.description)||"-")))),l.a.createElement(iv,{heading:"You need to sign in with Google to move forward. Would you like to sign in?",subHeadingUOM:"If you would like to sign in with Google, you would be redirected to Google's sign in page. After signing in, you would be brought back to the dashboard.",handleGoogleBtnClick:function(){s.handleGoogleBtnClick()},visible:o,onClose:function(){s.setState({googleModalVisible:!1})},googleSigninModal:!0}))}}]),t}(n.Component),LU=Object(Lm.b)((function(e){return e}),null)(qU),UU={labelCol:{span:24},wrapperCol:{span:24}},BU=Pm.a.TextArea,WU=ku.a.Option,YU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={assignees:[],fetching:!1,selectedData:null,warningVisible:!1},e.formRef=l.a.createRef(),e.handleChange=function(a){e.setState({selectedData:e.state.assignees.find((function(e){return e.id===a}))})},e.showWarningM=function(a){e.setState({warningVisible:a})},e.fetchUser=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({fetching:!0}),ud("salesperson",a).then((function(a){e.setState({assignees:a.data.results,fetching:!1})})).catch((function(a){a.response&&Object.keys(a.response.data).map((function(e){Mm.b.error(a.response.data[e])})),e.setState({fetching:!1})}))},e.handleSubmit=function(a){a.invoice=e.props.match.params.id,a.due_date&&(a.due_date=hd()(a.due_date).format("YYYY-MM-DD")),e.props.data?iU(e.props.data.id,a).then((function(a){Mm.b.success("Post Updated Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))})):nU(a).then((function(a){Mm.b.success("Post Created Successfully"),e.formRef.current.resetFields(),e.setState({selectedData:null}),e.props.onSuccess()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e.populateData=Object(Qm.a)($m.a.mark((function a(){var t,n;return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.props.data){a.next=5;break}return a.next=3,e.fetchUser();case 3:e.formRef.current.setFieldsValue(Object(wu.a)(Object(wu.a)({},e.props.data),{},{assignee:null===(t=e.props.data)||void 0===t||null===(n=t.assignee)||void 0===n?void 0:n.id,due_date:e.props.data.due_date?hd()(e.props.data.due_date):null})),e.setState({selectedData:e.props.data.assignee});case 5:case"end":return a.stop()}}),a)}))),e}return Object(d.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.fetching,n=a.assignees,c=a.selectedData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{afterVisibleChange:this.populateData,centered:!0,destroyOnClose:!0,title:"Post",maskClosable:!1,visible:this.props.visible,className:"main-all-form-modal main-drawer-div drawer-update",width:"625px",onClose:function(){e.showWarningM(!0)},placement:"right",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(Vm.a,{onClick:function(){return e.showWarningM(!0)},style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){return e.formRef.current.submit()},type:"primary"},this.props.data?"Update":"Create"))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({onFinish:this.handleSubmit,ref:this.formRef,hideRequiredMark:!0},UU,{className:"main-inner-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"name",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Post Name*")),rules:[{required:!0,message:"this field is required"}]},l.a.createElement(Pm.a,{placeholder:"Post Name"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"post_type",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Type"))},l.a.createElement(ku.a,{suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"}),placeholder:"Select Type"},l.a.createElement(WU,{value:"NOTE"},"Note"),l.a.createElement(WU,{value:"TASK"},"Task")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"assignee",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Assignee")),className:"position-relative"},l.a.createElement(ku.a,{placeholder:"Search Assignee",notFoundContent:t?l.a.createElement(Wv.a,{size:"small"}):null,filterOption:!1,onFocus:function(){return e.fetchUser()},onSearch:function(a){return e.fetchUser({search:a})},onChange:this.handleChange,suffixIcon:l.a.createElement("img",{alt:"",src:Rm.caret_down_small_select,className:"img-fluid"})},n.map((function(e){return l.a.createElement(WU,{key:e.id,value:e.id},"".concat(e.first_name," ").concat(e.last_name))}))))),c&&l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},Ed(null===c||void 0===c?void 0:c.first_name,null===c||void 0===c?void 0:c.last_name))),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat(c.first_name," ").concat(c.last_name)),l.a.createElement("p",{className:"mb-0"},c.role.split("_").join(" ")))))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"due_date",label:"Due Date"},l.a.createElement(Hv.a,{format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12 col-sm-6"},l.a.createElement(Fm.a.Item,{name:"priority",label:"Priority"},l.a.createElement(ku.a,{placeholder:"Select Priority"},l.a.createElement(WU,{value:"NORMAL"},l.a.createElement("span",{style:{backgroundColor:"#fcd966"},className:"status-tag"}),"Normal"),l.a.createElement(WU,{value:"HIGH"},l.a.createElement("span",{style:{backgroundColor:"#eb8357"},className:"status-tag"}),"High"),l.a.createElement(WU,{value:"LOW"},l.a.createElement("span",{style:{backgroundColor:"#7fd4ba"},className:"status-tag"}),"Low")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"description",label:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("span",{className:"mr-1"},"Description"))},l.a.createElement(BU,{className:"text-area-main text-area-task",placeholder:"Enter Description"})))))))),l.a.createElement(iv,{visible:this.state.warningVisible,onClose:function(){return e.showWarningM(!1)},heading:"Are you sure you want to exit editing this Post?",handlePostDrawer:!0,closePostDrawer:this.props.onClose}))}}]),t}(n.Component),KU=Object(r.withRouter)(YU),GU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={posts:[],drawerData:null,loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.showPostDrawer=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({visibleDrawer:a,drawerData:t})},e.fetchPosts=function(){var a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),rU(Object(wu.a)({invoice:null===(a=e.props.Invoice)||void 0===a?void 0:a.id},t)).then((function(a){e.setState({posts:a.data.results,loading:!1})})).catch((function(e){td(e)}))},e.changePostStatus=function(a,t){var n=e.state.posts;iU(a.id,{completed:t}).then((function(l){var c=n.findIndex((function(e){return e.id===a.id}));n[c].completed=t,e.setState({posts:n}),Mm.b.success("Updated post status")})).catch((function(e){td(e)}))},e.getPostDateColor=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?"gray":n.isSame(a,"day")?"#F2994A":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"#38BC94":n.isAfter(a)?"#EB5757":n.isBefore(a)?"#4F4F4F":void 0:"gray":"gray"},e.getPostDateText=function(e){var a=e.due_date,t=e.completed,n=new hd.a;return a?t?hd()(a).format("MM/DD/YYYY"):n.isSame(a,"day")?"Due Today":a?n.diff(a,"hours")>=-24&&n.diff(a,"hours")<0?"Tomorrow":hd()(a).format("MM/DD/YYYY"):"No Due Date":"No Due Date"},e.postColumns=[{title:"POST NAME",sorter:!0,render:function(a){return l.a.createElement("div",{className:"name-id-details"},l.a.createElement(tp.a,{className:"post-checkbox-opacity",checked:a.completed,onChange:function(){return e.changePostStatus(a,!a.completed)},onClick:function(e){return e.stopPropagation()}},a.name))}},{title:"TYPE",dataIndex:"post_type",sorter:!0,render:function(e){return l.a.createElement("div",null,bd(e)||"-")}},{title:"PRIORITY",dataIndex:"priority",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},l.a.createElement("span",{style:"HIGH"===e?{backgroundColor:"#eb8357"}:"LOW"===e?{backgroundColor:"#7fd4ba"}:"NORMAL"===e?{backgroundColor:"#fcd966"}:null,className:"priority-card-tag rounded-circle"}),(null===e||void 0===e?void 0:e.toLowerCase())||"-")}},{title:"ASSIGNEE",dataIndex:"assignee",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center text-capitalize"},(null===e||void 0===e?void 0:e.first_name)?l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},Ed(null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name)):" ","".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"-"))}},{title:"Post Source",dataIndex:"post_source",sorter:!0,render:function(){return l.a.createElement("div",{className:"d-flex align-items-center"},"Opportunity")}},{title:l.a.createElement("div",{className:"position-relative"},"DUE DATE"),sorter:!0,render:function(a){return l.a.createElement(l.a.Fragment,null,a?l.a.createElement("span",{className:"main-status-btn approved-btn",style:{color:e.getPostDateColor(a)}},e.getPostDateText(a)):"-")}}],e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){var e=this,a=this.state,t=a.posts,n=a.drawerData,c=this.props.viewAll;return l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header border-1 ".concat(this.props.viewAll?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"}))),l.a.createElement(Vm.a,{onClick:function(){return e.showPostDrawer(!0)},className:"add-btn-collapse ml-2 text-capitalize"},"+ Create")),c&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"row"},t.length>0?l.a.createElement("div",{className:"col-12 p-0 table-responsive main-table-div mb-3 post-table"},l.a.createElement(fv.a,{onRow:function(a){return{onClick:function(){e.showPostDrawer(!0,a)}}},className:"main-table-all",columns:this.postColumns,pagination:!0,dataSource:t,size:"middle"})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mt-3 no-data-card-row border-0 bg-transparent align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer",onClick:function(){return e.showPostDrawer(!0)}},l.a.createElement("img",{src:Rm.note_add_new_create_icon,className:"img-fluid",alt:"search icon"}),l.a.createElement("h6",{className:"mb-0 text-green-tag"},"Create Post"))))),l.a.createElement(KU,{data:n,visible:this.state.visibleDrawer,onSuccess:Object(Qm.a)($m.a.mark((function a(){return $m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.showPostDrawer(!1);case 2:return a.next=4,e.fetchPosts();case 4:case"end":return a.stop()}}),a)}))),onClose:function(){return e.showPostDrawer(!1)}}))}}]),t}(n.Component),zU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={dataActivity:[],loading:!1,pagination:{current:1,pageSize:15,showTotal:function(e,a){return"".concat(a[0],"-").concat(a[1]," of ").concat(e)}}},e.fetchActivity=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({loading:!0}),eU(e.props.match.params.id).then((function(t){e.setState({dataActivity:e.props.viewAll?t.data.data.slice(0,10):t.data.data,loading:!1,pagination:Object(wu.a)(Object(wu.a)({},e.state.pagination),{},{current:a.page||1,total:e.props.viewAll?10:t.data.count})})})).catch((function(e){e.response&&Object.keys(e.response.data).forEach((function(a){Mm.b.error(e.response.data[a])}))})).finally((function(){e.setState({loading:!1})}))},e.activityColumns=[{title:"Date",dataIndex:"date",sorter:!0,render:function(e){return l.a.createElement("div",{className:"font-weight-normal"},hd()(e).format("MMM DD, YYYY hh:mm A"))}},{title:"Action",dataIndex:"action",sorter:!0},{title:"ACTIONBY",dataIndex:"user",sorter:!0,render:function(e){return l.a.createElement("div",{className:"d-flex align-items-center"},e&&l.a.createElement("span",{className:"assign-tag-card d-flex align-items-center justify-content-center text-uppercase rounded-circle"},e.split(" ")[0].split("")[0],e.split(" ")[1].split("")[0]),e)}}],e.activityData=[{key:"1",activity_date:"a",action:"b",employee:"c"}],e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchActivity()}},{key:"render",value:function(){var e=this.state.dataActivity,a=this.props.viewAll;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 ".concat(a?"":"mt-30")},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header border-1 ".concat(a?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),a&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},this.state.dataActivity.length>0?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},l.a.createElement(fv.a,{className:"main-table-all",scroll:{y:240},columns:this.activityColumns,dataSource:e,size:"middle",pagination:!0,loading:!1}))):l.a.createElement("div",{className:"row mx-0 mt-3 bg-transparent border-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center cursor-pointer"},l.a.createElement("img",{src:Rm.Time_empty_state_icon,className:"img-fluid",alt:"search icon"}),l.a.createElement("h6",{className:"mb-0 text-gray-tag"},"No Activity"))))))))}}]),t}(n.Component),HU=Object(r.withRouter)(zU),$U=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={contacts:[]},e}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.contacts;return l.a.createElement(l.a.Fragment,null,e.length>0?l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",{className:"small-heading-contact mb-0"},"Contacts")),e.map((function(e,a){var t,n,c,i,r,s,o;return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"76px",height:"76px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2 ".concat(e.default_customer_recipient?"active":"")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,"".concat((null===(t=e.contact)||void 0===t?void 0:t.first_name)||""," ").concat((null===(n=e.contact)||void 0===n?void 0:n.last_name)||""),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},"Role",(null===(c=e.contact)||void 0===c?void 0:c.role)||"")),l.a.createElement("p",{className:"mb-0"},(null===(i=e.contact)||void 0===i?void 0:i.default_email)&&"".concat(null===(r=e.contact.default_email)||void 0===r?void 0:r.email,",")," ",null===(s=e.contact)||void 0===s||null===(o=s.default_phone)||void 0===o?void 0:o.phone_number),e.default_customer_recipient&&l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Proposal Recipient")))))}))):l.a.createElement("div",{className:"col-12 pt-3"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Contacts")))))}}]),t}(n.Component),QU=fu.a.Panel,JU=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[]},e.fetchCustomerAccount=function(){var a,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.invoice=null===(a=e.props)||void 0===a||null===(t=a.Invoice)||void 0===t?void 0:t.id,zL(n).then((function(a){e.setState({data:a.data.results})})).catch((function(e){console.log(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchCustomerAccount()}},{key:"render",value:function(){var e=this.state.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"sales-site-design-fix no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"mt-30 border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(Fm.a,{className:"position-relative"},l.a.createElement(Pm.a,{placeholder:"Search"}),l.a.createElement(Vm.a,{className:"search-btn position-absolute p-0 border-0 bg-transparent m-auto"},l.a.createElement("img",{src:Rm.search_icon_gray,className:"img-fluid",alt:"search icon"})))),this.props.hideTitle&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," ")),l.a.createElement(l.a.Fragment,null,e.length>0?l.a.createElement(l.a.Fragment,null,e.map((function(e,a){return l.a.createElement("div",{className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{defaultActiveKey:["1"],className:"site-owner-collapse-main"},l.a.createElement(QU,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative h-auto"},l.a.createElement("div",{className:"col-9 col-sm-9 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Account")))),l.a.createElement("div",{className:"col-3 col-sm-3 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contact_widget_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{style:{color:"#4F4F4F"}},e.contact.length,"Contacts"))))),key:"1",forceRender:!0},l.a.createElement($U,{contacts:e.contact}))))}))):l.a.createElement("div",{className:"col-12 ".concat(this.props.hideTitle?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mt-3 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Billing Accounts"))))))))}}]),t}(n.Component),ZU=function(e){var a=e.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row",style:{padding:"16px 0"}},a.contact.length>0?a.contact.map((function(e,a){var t,n;return l.a.createElement("div",{className:"col-6 col-sm-6"},l.a.createElement("div",{style:{minHeight:"85px",height:"85px"},className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-2"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div position-relative"},l.a.createElement("h6",null,"".concat(e.first_name," ").concat(e.last_name),l.a.createElement("small",{style:{borderLeft:"1px solid #e0e0e0",marginLeft:"5px",paddingLeft:"5px",fontWeight:"500",color:"#bdbdbd"}},e.role?e.role:"-")),l.a.createElement("p",{className:"mb-0"},e.default_email&&"".concat(null===(t=e.default_email)||void 0===t?void 0:t.email,","),"\xa0 ",null===(n=e.default_phone)||void 0===n?void 0:n.phone_number)))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{alt:"",className:"img-fluid",src:Rm.contacts_empty_state_icon}),l.a.createElement("h6",{className:"mb-0"},"No Contacts"))))),l.a.createElement("div",{className:"row",style:{padding:"16px 0",borderTop:"1px solid #e0e0e0"}},a.site.length>0?a.site.map((function(e,a){var t,n,c,i,r,s,o;return l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{style:{minHeight:"100px"},className:"row site-details-row-card site-details-row-card-update position-relative"},l.a.createElement("div",{className:"col-12 col-sm-2 bg-gray-main p-0"},l.a.createElement("div",{className:"row mx-0 pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-3 pr-lg-0 pr-md-0"},l.a.createElement("img",{src:Rm.location_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-9 pl-lg-2"},l.a.createElement("span",{className:"text-uppercase font-weight-500"}," ",null===(t=e.site)||void 0===t?void 0:t.name)))),l.a.createElement("div",{className:"col-12 col-sm-10 px-3 py-0 position-relative"},l.a.createElement("div",{className:"row pt-lg-3 pt-md-3 pt-3"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"ADDRESS"),l.a.createElement("p",{className:"mb-0"},null===(n=e.site)||void 0===n?void 0:n.apartment," ",null===(c=e.site)||void 0===c?void 0:c.city,","," ",null===(i=e.site)||void 0===i?void 0:i.state," ",null===(r=e.site)||void 0===r?void 0:r.zip_code," USA")),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"EMAIL ADDRESS"),l.a.createElement("p",{className:"mb-0",style:{width:100}},null===(s=e.site)||void 0===s?void 0:s.email)),l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("h6",{className:"text-uppercase"},"PHONE NUMBER"),l.a.createElement("p",{className:"mb-0"}," ",null===(o=e.site)||void 0===o?void 0:o.phone))),l.a.createElement("small",{style:{right:"15px"},className:"primary-text-right text-capitalize position-absolute"}," primary site"))))})):l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid mb-2"}),l.a.createElement("h6",{className:"mb-0"},"No Sites"))))))},XU=fu.a.Panel,eB=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[]},e.fetchSiteOwnerContact=function(){var a,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.invoice=null===(a=e.props)||void 0===a||null===(t=a.Invoice)||void 0===t?void 0:t.id,ZL(n).then((function(a){e.setState({data:a.data.results})})).catch((function(e){td(e)}))},e.handleChangeTab=function(){e.props.onChange("2")},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchSiteOwnerContact()}},{key:"render",value:function(){var e=this.state.data,a=this.props.viewAll;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.viewAll?"":"sales-site-design-fix")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row mt-0 summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.viewAll?"":"mt-30 border-1 d-none")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"}),a&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),(null===e||void 0===e?void 0:e.length)>0?l.a.createElement(l.a.Fragment,null,e.map((function(e){return l.a.createElement("div",{className:"col-12 account-contact-collapse-div site-owner-div opportunity-customer-div account-contact-update"},l.a.createElement(fu.a,{accordion:!0,defaultActiveKey:["1"],className:"site-owner-collapse-main"},l.a.createElement(XU,{header:l.a.createElement("div",{className:"row mx-0 site-details-row-card m-0 no-data-card-row align-items-center position-relative"},l.a.createElement("div",{className:"col-8 col-sm-8 p-0"},l.a.createElement("div",{className:"row mx-0 align-items-center"},l.a.createElement("div",{className:"pl-3 pr-2"},l.a.createElement("img",{src:Rm.person_black_icon,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:""},l.a.createElement("h5",{className:"text-capitalize"}," ",e&&e.account&&e.account.name," "),l.a.createElement("h6",{className:"mb-0"},e&&e.account&&Lp[e.account.account_type]," ","Site Manager Account")))),l.a.createElement("div",{className:"col-4 col-sm-4 text-right"},l.a.createElement("ul",{className:"list-inline contact-site-add-card mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.contacts_empty_state_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",null,"2 Contacts")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("img",{src:Rm.location_gray,alt:"",className:"img-fluid"}),l.a.createElement("span",null,e.site.length,"Sites"))))),key:"1",forceRender:!0},l.a.createElement(ZU,{data:e}))))}))):l.a.createElement("div",{className:"col-12 ".concat(this.props.viewAll?"":"no-data-card-row-new")},l.a.createElement("div",{className:"row mt-3 mx-0 no-data-card-row align-items-center justify-content-center"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement("img",{src:Rm.Account_no_data_icon,alt:"contact-icon",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 mt-2"},"No Site Manager Accounts"))))))}}]),t}(n.Component),aB=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=a.call.apply(a,[this].concat(c))).state={files:[]},e.docsColumns=[{title:"name",dataIndex:"name",sorter:!0,render:function(e){return l.a.createElement("div",null,l.a.createElement("img",{src:Rm.docs_file_icon,alt:"",className:"img-fluid"}),l.a.createElement("span",{className:"ml-2"},e))}},{title:"Size",dataIndex:"size",sorter:!0,render:function(e){return l.a.createElement("div",null,Nd(e))}},{title:"FILE Format",dataIndex:"format",sorter:!0}],e.fetchFiles=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.invoice=e.props.match.params.id,cU(a).then((function(a){e.setState({files:a.data.results})})).catch((function(e){td(e)}))},e.uploadFile=function(a){var t=a.file,n=new FormData;n.append("invoice",e.props.match.params.id),n.append("document",t),lU(n).then((function(a){e.fetchFiles()})).catch((function(e){e.response&&Object.keys(e.response.data).map((function(a){Mm.b.error(e.response.data[a])}))}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"componentDidUpdate",value:function(e,a){var t,n,l,c;(null===(t=e.proposal)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)!=(null===(l=this.props.proposal)||void 0===l||null===(c=l.documents)||void 0===c?void 0:c.length)&&this.fetchFiles()}},{key:"render",value:function(){var e=this.state.files;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mx-0 ".concat(this.props.hideTitle?"":"mt-30 no-data-card-row-new")},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row new-opportunity-header-row summary-header-details search-view-header-in-collapse align-items-center justify-content-between carpet-cleaning-mini-header ".concat(this.props.hideTitle?"":"border-1")},l.a.createElement("div",{className:"search-bar-div d-flex align-items-center"},l.a.createElement(ih.a,{multiple:!0,showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"add-btn-collapse ml-2 text-capitalize"},"+ Upload"))),this.props.hideTitle&&l.a.createElement(Vm.a,{className:"view-all-btn text-uppercase"},"VIEW ALL"," "))),l.a.createElement("div",{className:"col-12 table-responsive main-table-div"},e.length>0?l.a.createElement(fv.a,{pagination:!1,locale:{emptyText:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row no-data-upload-screens no-data-second m-0 border-0"},l.a.createElement("div",{className:"col-12 text-center"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"border-0 h-auto shadow-none"},l.a.createElement("img",{src:Rm.cloud_upload_icon,alt:"",className:"img-fluid"}),l.a.createElement("h6",{className:"mb-0 text-green-tag"},"Upload Document"))))))},onRow:function(e,a){return{onClick:function(a){window.open(e.document,"_blank")}}},className:"main-table-all carpet-cleaning-table border-0",columns:this.docsColumns,dataSource:e,size:"middle"}):l.a.createElement("div",{className:"documents-upload-height d-flex align-items-center justify-content-center w-100"},l.a.createElement(ih.a,{showUploadList:!1,customRequest:this.uploadFile},l.a.createElement(Vm.a,{className:"bg-transparent border-0 p-0 shadow-none h-auto"},l.a.createElement("img",{src:Rm.cloud_upload_24,alt:"cloud icon",className:"img-fluid"}),l.a.createElement("p",{style:{textAlign:"center",color:"#38BC94"}}," ","Upload Document"," ")))))))}}]),t}(n.Component),tB=Object(r.withRouter)(aB),nB=fu.a.Panel,lB=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e,a,t,n,c,i,r=this.props.Invoice,s=null===(e=this.props.Invoice)||void 0===e?void 0:e.invoice_workorder;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row create-opportunity-row common-form-card-row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{bordered:!1,defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})},className:"invoicing-inner-collapse"},(null===s||void 0===s?void 0:s.length)>0&&s.map((function(e,a){var t,n,c,i,r,s,o,m,d,u,p,v,h,f,E;return l.a.createElement(nB,{header:l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12 col-sm-1"},l.a.createElement("img",{src:Rm.work_order_key,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"col-12 col-sm-11 pl-0"},l.a.createElement("h6",{className:"mt-0 mb-0"},null===(t=e.workorder)||void 0===t||null===(n=t.project)||void 0===n?void 0:n.name),l.a.createElement("p",{style:{color:"#BDBDBD",fontWeight:"600",fontSize:"13px"},className:"mb-0"},"Total Balance Due:".concat(null===e||void 0===e?void 0:e.total_balance))))),key:"1"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},(null===(c=e.workorder)||void 0===c||null===(i=c.dispatch)||void 0===i?void 0:i.crew_chief)&&l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main opportunity-info-div-main mb-4 mt-0",style:{minHeight:"68px",height:"68px"}},l.a.createElement("div",{className:"col-12 align-items-center d-flex"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("span",{className:"d-flex align-items-center justify-content-center rounded-circle text-uppercase"},"".concat(null===(r=e.workorder)||void 0===r||null===(s=r.dispatch)||void 0===s||null===(o=s.crew_chief)||void 0===o||null===(m=o.split(" ")[0])||void 0===m?void 0:m.split("")[0]).concat(null===(d=e.workorder)||void 0===d||null===(u=d.dispatch)||void 0===u||null===(p=u.crew_chief)||void 0===p||null===(v=p.split(" ")[1])||void 0===v?void 0:v.split("")[0]))),l.a.createElement("div",{className:"user-info-div pt-0"},l.a.createElement("h6",{className:"mb-0"},null===(h=e.workorder)||void 0===h||null===(f=h.dispatch)||void 0===f?void 0:f.crew_chief),l.a.createElement("span",{className:"point-details font-weight-bold position-absolute m-auto d-flex align-items-center"},"Crew Chief"))))),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row"},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12 custom-table-body p-0"}),l.a.createElement("div",{className:"col-12 table-responsive main-table-div position-relative wage-table px-3"},l.a.createElement("div",{className:"row mx-0 custom-table-main-row custom-table-main-row-proposal-line-item custom-table-main-row-wage-info-main proposal-update-table proposal-update-table-edit invoice-table-main"},l.a.createElement("div",{className:"col-12 custom-table-change service-variants-table"},l.a.createElement("div",{className:"row custom-table-header custom-table-header-2"},l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-1"},l.a.createElement("div",{className:"custom-th-heading"},"Type")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-2"},l.a.createElement("div",{className:"custom-th-heading"},"Name / Info")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-3"},l.a.createElement("div",{className:"custom-th-heading"},"ASSIGNEE")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-4"},l.a.createElement("div",{className:"custom-th-heading"},"FACILITY")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-5"},l.a.createElement("div",{className:"custom-th-heading"},"Qty")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-6"},l.a.createElement("div",{className:"custom-th-heading"},"Uom")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-7"},l.a.createElement("div",{className:"custom-th-heading"},"Price",l.a.createElement("br",null),"Per unit")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-8"},l.a.createElement("div",{className:"custom-th-heading"},"Taxable")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Include",l.a.createElement("br",null),"In Subtotal")),l.a.createElement("div",{className:"custom-table-cell-th custom-table-cell-th-9"},l.a.createElement("div",{className:"custom-th-heading"},"Total Price"))),l.a.createElement("div",{className:"row"},null===e||void 0===e||null===(E=e.workorder)||void 0===E?void 0:E.workorder_variant.map((function(e){var a,t;return l.a.createElement(yU,{key:e.id,invoiceVariant:e,child:(null===e||void 0===e||null===(a=e.variant_data)||void 0===a?void 0:a.table_pricing)||(null===e||void 0===e?void 0:e.children)||[],foundRegion:null===e||void 0===e||null===(t=e.variant_data)||void 0===t?void 0:t.region})})))))))))))}))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("div",{className:"row service-row-main service-line-item"},l.a.createElement("div",{className:"col-12 col-sm-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement("div",{className:"sub-total-text"},"Cost Setting"),l.a.createElement("div",{className:"sub-total-text gray-1"},(null===(a=$D.find((function(e){return(null===r||void 0===r?void 0:r.cost_setting)===e.value})))||void 0===a?void 0:a.name)||"Standard")),l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement("div",{className:"sub-total-text"},"Tax Basis"),l.a.createElement("div",{className:"sub-total-text gray-1"}," ",(null===r||void 0===r||null===(t=r.tax_basis)||void 0===t?void 0:t.name)||"-")),l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement("div",{className:"sub-total-text"},"Payment Terms"),l.a.createElement("div",{className:"sub-total-text gray-1"},(null===(n=QD.find((function(e){return e.value===(null===r||void 0===r?void 0:r.payment_terms)})))||void 0===n?void 0:n.name)||"30 Days")),l.a.createElement("div",{className:"col-12 mb-3"},l.a.createElement("div",{className:"sub-total-text"},"Deposit"),l.a.createElement("div",{className:"sub-total-text gray-1"}," ","YES"===(null===r||void 0===r?void 0:r.deposit)?"Yes":"NO"===(null===r||void 0===r?void 0:r.deposit)?"No":"-")),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"sub-total-text"},"Deposit Amount"),l.a.createElement("div",{className:"sub-total-text gray-1"}," ",(null===r||void 0===r?void 0:r.deposit_amount)?"$".concat(null===r||void 0===r?void 0:r.deposit_amount):"$0.00")))),l.a.createElement("div",{className:"col-12 col-sm-7 offset-sm-1 pt-4"},l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("span",{className:"sub-total-text"},"Total Price Pre-tax:")),l.a.createElement("div",{className:"col-4 text-md-right"},l.a.createElement("span",null,"$",gd(null===r||void 0===r?void 0:r.estimated_total_price_pre_tax)," "))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text"},"Taxes::")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("ul",{className:"list-inline mb-0"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("small",null," ",0!=(null===r||void 0===r||null===(c=r.tax_basis)||void 0===c?void 0:c.percentage)?null===r||void 0===r||null===(i=r.tax_basis)||void 0===i?void 0:i.percentage:"-")),l.a.createElement("li",{className:"list-inline-item"},"|"),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("span",{className:"sub-total-text gray-1"},"$",gd(null===r||void 0===r?void 0:r.estimated_taxes)||0))))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text"},"Total:")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("span",null," $",null===r||void 0===r?void 0:r.standard_estimated_total))),l.a.createElement("div",{className:"row estimated-total-row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("span",{className:"sub-total-text"},"Deposit Recieved:")),l.a.createElement("div",{className:"col-4 text-md-right"},l.a.createElement("span",null,"$",null===r||void 0===r?void 0:r.deposit_amount))),l.a.createElement("div",{style:{borderTop:"1px solid #E0E0E0"},className:"row mt-3 pt-3 estimated-total-row-3 estimated-total-row"},l.a.createElement("div",{className:"col-7"},l.a.createElement("span",{className:"sub-total-text-main"},"Total Balance Due:")),l.a.createElement("div",{className:"col-5 text-md-right"},l.a.createElement("span",{className:"sub-total-text-main"},"$",null===r||void 0===r?void 0:r.total_balance))))))))))}}]),t}(n.Component),cB=ku.a.Option,iB=ku.a.OptGroup,rB={labelCol:{span:24},wrapperCol:{span:24}},sB=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).getAllContacts=function(e){var a=n.state.invoiceContacts;n.setState({loading:!0}),yh(e).then((function(e){var t=e.data.results.filter((function(e){return null!=e.default_email}));t=t.filter((function(e){return 0==a.filter((function(a){return a.default_email.email==e.default_email.email})).length})),n.setState({contacts:t})})).catch((function(e){td(e)})).finally((function(){n.setState({loading:!1})}))},n.handleSubmit=function(e){var a=n.state,t=a.selectedCCEmails,l=a.selectedBCCEmails,c=a.selectedEmails;n.setState({btnLoader:!0});var i,r,s=Object(wu.a)(Object(wu.a)({},e),{},{to:c,cc:t,bcc:l});(i=n.props.match.params.id,r=s,od(ad("invoice.invoice_sales_pdf_email",{id:i}),r)).then((function(){n.setState({btnLoader:!1}),Mm.b.success("Invoice sent successfully!"),n.props.onClose()})).catch((function(e){td(e)}))},n.handleSelect=function(e,a){var t=e.map((function(e){return e.label}));n.setState({selectedContacts:e,selectedEmails:t})},n.showCCSelect=function(){n.setState({showCCSelect:!0})},n.showBCCSelect=function(){n.setState({showBCCSelect:!0})},n.handleCCSelect=function(e,a){var t=e.map((function(e){return e.label}));n.setState({selectedCC:e,selectedCCEmails:t})},n.handleBCCSelect=function(e,a){var t=e.map((function(e){return e.label}));n.setState({selectedBCC:e,selectedBCCEmails:t})},n.populateData=function(){var e,a;n.formRef.current.setFieldsValue({subject:"".concat(null===(e=n.props.Invoice)||void 0===e||null===(a=e.project)||void 0===a?void 0:a.name," - a Quote Attached"),message:"Attached is the new Invoice PDF."})},n.fetchPdf=function(){n.setState({pdfLoading:!0});var e,a;(e=n.props.Invoice.id,a={preview:"1"},rd(ad("invoice.invoice_pdf",{id:e}),a)).then((function(e){var a=new Blob([e.data],{type:"application/pdf"}),t=URL.createObjectURL(a);n.setState({fileURL:t,pdfLoading:!1},(function(){window.open(n.state.fileURL,"_blank")}))})).catch((function(e){td(e)}))},n.state={contacts:[],selectedContacts:[],selectedEmails:[],selectedBCCEmails:[],selectedBCC:[],selectedCC:[],selectedCCEmails:[],invoiceContacts:[],loading:!1,showCCSelect:!1,showBCCSelect:!1,btnLoader:!1,fileURL:null,pdfLoading:!1},n.formRef=l.a.createRef(),n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n,l,c=this.props.Invoice,i=[],r=[],s=[],o=Object(qD.a)(null===c||void 0===c?void 0:c.invoice_customer_contact);try{for(o.s();!(l=o.n()).done;){var m,d=l.value,u=Object(qD.a)(d.contact);try{for(u.s();!(m=u.n()).done;){var p=m.value;i.push(p.contact)}}catch(N){u.e(N)}finally{u.f()}}}catch(N){o.e(N)}finally{o.f()}var v,h=Object(qD.a)(null===c||void 0===c?void 0:c.invoice_owner_contact);try{for(h.s();!(v=h.n()).done;){var f,E=v.value,g=Object(qD.a)(E.contact);try{for(g.s();!(f=g.n()).done;){var b=f.value;r.push(b.contact)}}catch(N){g.e(N)}finally{g.f()}}}catch(N){h.e(N)}finally{h.f()}s.push(null===(e=this.props.Invoice)||void 0===e||null===(a=e.invoice_recipient)||void 0===a||null===(t=a.default_email)||void 0===t?void 0:t.email),this.setState({selectedEmails:s,invoiceContacts:null===(n=[].concat(i,r))||void 0===n?void 0:n.filter((function(e){return null!=(null===e||void 0===e?void 0:e.default_email)}))})}},{key:"render",value:function(){var e,a,t,n,c,i,r,s,o,m,d=this,u=this.state,p=u.contacts,v=u.selectedContacts,h=u.showCCSelect,f=u.showBCCSelect,E=u.selectedBCC,g=u.selectedCC,b=u.invoiceContacts,N=u.btnLoader,y=this.props.Invoice,w=this.props.userdata;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ju.a,{centered:!0,afterVisibleChange:this.populateData,title:"Send Invoice",visible:this.props.visible,onOk:this.props.onClose,onCancel:this.props.onClose,className:"main-all-form-modal main-drawer-div drawer-update",width:"575px",placement:"right",closeIcon:!1,footer:l.a.createElement("div",{className:"preview",style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},l.a.createElement("span",{className:"preview-pdf-proposal"},l.a.createElement(Vm.a,{onClick:this.fetchPdf},"Preview PDF ")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:this.props.onClose,style:{marginRight:8}},"Cancel"),l.a.createElement(Vm.a,{onClick:function(){d.formRef.current.submit()},type:"primary",loading:N},"Send Invoice")))},l.a.createElement("div",{className:"row mx-0 inner-modal-main-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 info-gray-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please select who you would like to send this invoice to. You can choose among Contacts associated to this  Invoice\u2019s Site Manager and Billing Accounts, and you can also add other email addresses as well. The selected Customer Account is the address to at the invoice."))),l.a.createElement("div",{className:"col-12"},l.a.createElement("h6",null,"Invoice Recipient")),l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row customer-account-send"},l.a.createElement("div",{className:"col-12 col-sm-12"},l.a.createElement("div",{className:"row mx-0 align-items-center user-info-div-main position-relative"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"user-icons-div"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",{className:"user-info-div"},l.a.createElement("h6",null,(null===y||void 0===y||null===(e=y.invoice_recipient)||void 0===e?void 0:e.full_name)||"-",l.a.createElement("span",{className:"role-name-tg"},(null===y||void 0===y||null===(a=y.invoice_recipient)||void 0===a?void 0:a.role)||"-")),l.a.createElement("p",{className:"mb-0"},(null===y||void 0===y||null===(t=y.invoice_recipient)||void 0===t||null===(n=t.default_email)||void 0===n?void 0:n.email)||"-",", ",(null===y||void 0===y||null===(c=y.invoice_recipient)||void 0===c||null===(i=c.default_phone)||void 0===i?void 0:i.phone_number)||"-"))),l.a.createElement("span",{className:"position-absolute home-labor-group main-content-div"},"Invoice Recipient"))))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a,Object.assign({ref:this.formRef},rB,{onFinish:this.handleSubmit,className:"main-inner-form proposal-send-form"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"date",label:"Date ",rules:[{required:!1,message:""}]},l.a.createElement(Hv.a,{disabled:!0,defaultValue:hd()(),format:"MM/DD/YYYY"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"from",label:"From ",rules:[{required:!1,message:""}]},l.a.createElement(Pm.a,{disabled:!0,placeholder:"Enter Email",defaultValue:null===w||void 0===w?void 0:w.google_authorised_email}))),l.a.createElement("div",{className:"col-12 custom-select-multi"},l.a.createElement(Fm.a.Item,{name:"to",label:"To *",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{labelInValue:!0,dropdownClassName:"opt-group-multi",mode:"tags",placeholder:"Select",showArrow:!1,className:"search-and-select-tag",filterOption:!1,onChange:function(e,a){return d.handleSelect(e,a)},value:v,optionLabelProp:"label",showSearch:!0,onSearch:function(e){return d.getAllContacts({search:e})},onFocus:function(){return d.getAllContacts()},defaultValue:{value:null===y||void 0===y||null===(r=y.invoice_recipient)||void 0===r?void 0:r.id,key:null===y||void 0===y||null===(s=y.invoice_recipient)||void 0===s?void 0:s.id,label:null===y||void 0===y||null===(o=y.invoice_recipient)||void 0===o||null===(m=o.default_email)||void 0===m?void 0:m.email}},l.a.createElement(iB,{label:"Contacts associated to accounts within this proposal"},null===b||void 0===b?void 0:b.map((function(e){var a;return l.a.createElement(cB,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(iB,{label:"Others"},p.map((function(e){var a;return l.a.createElement(cB,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"})),l.a.createElement("ul",{className:"mb-0 list-inline to-associate-details position-absolute"},l.a.createElement("li",{className:"list-inline-item",onClick:this.showCCSelect},"Cc"),l.a.createElement("li",{className:"list-inline-item",onClick:this.showBCCSelect},"Bcc"))),h&&l.a.createElement("div",{className:"col-12 custom-select-multi"},l.a.createElement(Fm.a.Item,{name:"cc",label:"Cc",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{labelInValue:!0,dropdownClassName:"opt-group-multi",mode:"tags",placeholder:"Select",showArrow:!1,className:"search-and-select-tag",filterOption:!1,onChange:function(e,a){return d.handleCCSelect(e,a)},value:g,optionLabelProp:"label",showSearch:!0,onSearch:function(e){return d.getAllContacts({search:e})},onFocus:function(){return d.getAllContacts()}},l.a.createElement(iB,{label:"Contacts associated to accounts within this proposal"},null===b||void 0===b?void 0:b.map((function(e){var a;return l.a.createElement(cB,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(iB,{label:"Others"},p.map((function(e){var a;return l.a.createElement(cB,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),f&&l.a.createElement("div",{className:"col-12 custom-select-multi"},l.a.createElement(Fm.a.Item,{name:"bcc",label:"Bcc",rules:[{required:!1,message:""}],className:"position-relative search-overlap"},l.a.createElement(ku.a,{labelInValue:!0,dropdownClassName:"opt-group-multi",mode:"tags",placeholder:"Select",showArrow:!1,className:"search-and-select-tag",filterOption:!1,onChange:function(e,a){return d.handleBCCSelect(e,a)},value:E,optionLabelProp:"label",showSearch:!0,onSearch:function(e){return d.getAllContacts({search:e})},onFocus:function(){return d.getAllContacts()}},l.a.createElement(iB,{label:"Contacts associated to accounts within this proposal"},null===b||void 0===b?void 0:b.map((function(e){var a;return l.a.createElement(cB,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))),l.a.createElement(iB,{label:"Others"},p.map((function(e){var a;return l.a.createElement(cB,{value:e.id,label:e.default_email.email,key:e.id},l.a.createElement("div",{className:"row mx-0 custom-tree-row align-items-center justify-content-between"},l.a.createElement("div",{className:"common-select-option-row"},l.a.createElement("div",{className:"select-option-details d-flex align-items-center"},l.a.createElement("div",{className:"select-option-icon"},l.a.createElement("img",{src:Rm.contact_file_icon_black,alt:"",className:"img-fluid"})),l.a.createElement("div",null,l.a.createElement("h6",{className:"mb-0"},e.full_name||""),l.a.createElement("p",{className:"mb-0"},e.role||"-"),l.a.createElement("p",{className:"mb-0"},null===(a=e.account)||void 0===a?void 0:a.name)))),l.a.createElement("div",{className:"text-green-tag select-text-tier"},"Contact")))}))))),l.a.createElement(Vm.a,{className:"search-icon bg-transparent border-0 p-0 position-absolute"},l.a.createElement("img",{src:Rm.search_small_icon,alt:"",className:"img-fluid"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"subject",label:"Subject * ",rules:[{required:!0,message:"Please Enter Subject"}]},l.a.createElement(Pm.a,{placeholder:"Subject"}))),l.a.createElement("div",{className:"col-12"},l.a.createElement(Fm.a.Item,{name:"message",label:"Message * ",rules:[{required:!0,message:"Please Enter Message"}]},l.a.createElement(Pm.a.TextArea,{className:"text-editor-field mt-0",placeholder:"Message"})))))))))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return{Invoice:e.Invoice}}}]),t}(n.Component),oB=Object(Lm.b)((function(e){return Object(wu.a)(Object(wu.a)({},e),{},{userdata:null===e||void 0===e?void 0:e.userdata})}))(Object(r.withRouter)(sB)),mB=fu.a.Panel;function dB(e,a){return e===a?"active":e>a?"finish":void 0}var uB=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={data:[],loading:!1,statusTypes:[],pagination:{current:1,pageSize:15},visible:!1,visibleDrawer:!1},e.handleChange=function(a){var t,n={status:a.value};WL(null===(t=e.props.Invoice)||void 0===t?void 0:t.id,n).then((function(a){e.props.fetchInvoice()})).catch((function(e){td(e)}))},e.getInvoiceStatusOptions=function(){KL().then((function(a){e.setState({statusTypes:a.data.results})})).catch((function(e){td(e)}))},e.showSendInvoice=function(a){e.setState({visible:a})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getInvoiceStatusOptions()}},{key:"render",value:function(){var e=this,a=this.props,t=a.Invoice,n=a.onTabChange,c=this.state.statusTypes,i=null===c||void 0===c?void 0:c.findIndex((function(e){var a;return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t||null===(a=t.status)||void 0===a?void 0:a.id)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row summary-info-row-main summary-info-row-main-invoice",style:{marginBottom:"80px"}},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"row mx-0 summary-info-status-green-line-main"},null===c||void 0===c?void 0:c.map((function(e,a){return l.a.createElement(gE.a,{placement:"top",title:null===e||void 0===e?void 0:e.title,overlayStyle:{fontSize:11},arrowPointAtCenter:!0},l.a.createElement("div",{key:a,className:"summary-line-main text-uppercase position-relative p-0 d-flex align-items-center justify-content-center "+dB(i,a)},"finish"===dB(i,a)?l.a.createElement(EE.a,null):null===e||void 0===e?void 0:e.title))}))))),l.a.createElement("div",{className:"row mx-0 summary-info-inner-row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(fu.a,{defaultActiveKey:["1"],expandIcon:function(e){var a=e.isActive;return l.a.createElement(Eu.a,{rotate:a?90:0})}},l.a.createElement(mB,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"General Information ",l.a.createElement("sup",null,"*")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.accounting.invoicing.edit,{id:e.props.match.params.id}),editTab:"1"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"1"},l.a.createElement(LU,{Invoice:t,statusTypes:c,handleChange:this.handleChange,onTabChange:n,callbackSendInvoice:function(){return e.showSendInvoice(!0)}})),l.a.createElement(mB,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Work Orders"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.accounting.invoicing.edit,{id:e.props.match.params.id}),editTab:"2"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"2"},l.a.createElement(lB,Object.assign({viewAll:!0,Invoice:t},this.props))),l.a.createElement(mB,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Posts")),key:"6"},l.a.createElement(GU,Object.assign({viewAll:!0,Invoice:t},this.props))),l.a.createElement(mB,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Activity")),key:"7"},l.a.createElement(HU,{viewAll:!0})),l.a.createElement(mB,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Billing Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.accounting.invoicing.edit,{id:e.props.match.params.id}),editTab:"3"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"3"},l.a.createElement(JU,Object.assign({hideTitle:!0,Invoice:t},this.props))),l.a.createElement(mB,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Site Manager Account *"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.accounting.invoicing.edit,{id:e.props.match.params.id}),editTab:"4"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"4"},l.a.createElement(eB,Object.assign({viewAll:!0,Invoice:t},this.props))),l.a.createElement(mB,{header:l.a.createElement("div",{className:"opportunity_info-collapse d-flex align-items-center justify-content-between"},l.a.createElement("span",null,"Documents"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(Vm.a,{onClick:function(){return o.push({pathname:Object(Gm.reverse)(zm.dashboard.accounting.invoicing.edit,{id:e.props.match.params.id}),editTab:"5"})},className:"edit-btn-summary"},l.a.createElement("img",{src:Rm.pencil_green,alt:"",className:"img-fluid"}),"Edit"))),key:"5"},l.a.createElement(tB,Object.assign({hideTitle:!0,Invoice:t},this.props))))))),this.state.visible&&l.a.createElement(oB,{Invoice:t,visible:this.state.visible,onClose:function(){return e.showSendInvoice(!1)}}))}}]),t}(n.Component),pB=Object(r.withRouter)(uB),vB=vf.a.TabPane,hB=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={active:"1",invoice:[]},e.onTabChange=function(a){e.setState({active:a})},e.fetchInvoice=function(){YL(e.props.match.params.id).then((function(a){var t=[{title:"View Invoice",url:zm.dashboard.accounting.self}];e.props.setBreadcrumb(t),e.setState({invoice:a.data})})).catch((function(e){td(e)}))},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetchInvoice()}},{key:"render",value:function(){var e=this.state.proposal_filled;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content-div"},l.a.createElement("div",{className:"row mx-0 carpet-cleaning-main-row position-relative"},e&&l.a.createElement("div",{className:"row mx-0 info-gray-div info-red-div align-items-center"},l.a.createElement("h6",{className:"mb-0"},"Please complete all required information to view and send the proposal PDF.")),l.a.createElement(vf.a,{className:"carpet-cleaning-main-common-tab",onChange:this.onTabChange,activeKey:this.state.active},l.a.createElement(vB,{tab:"Summary",key:"1"},l.a.createElement(pB,{Invoice:this.state.invoice,fetchInvoice:this.fetchInvoice,onTabChange:this.onTabChange})),l.a.createElement(vB,{tab:"Posts",key:"6"},l.a.createElement(GU,null)),l.a.createElement(vB,{tab:"Activity",key:"7"},l.a.createElement(HU,null)),l.a.createElement(vB,{tab:"Site Manager Account",key:"2"},l.a.createElement(eB,null)),l.a.createElement(vB,{tab:"Billing Accounts",key:"3"},l.a.createElement(JU,null)),l.a.createElement(vB,{tab:"Documents",key:"5"},l.a.createElement(tB,null))))))}}]),t}(n.Component),fB={setBreadcrumb:Uv},EB=Object(Lm.b)(null,fB)(Object(h_.withRouter)(hB));var gB=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(yu,null),l.a.createElement(ov,null),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.self,component:mv}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.opportunities.self,component:Bv}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.opportunities.create,component:pf}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.opportunities.edit,component:pf}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.opportunities.view,component:CE}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.global_search,component:jE}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.owner_account.self,component:sb}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.owner_account.create,component:Kb}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.owner_account.site_account.create,component:rN}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.owner_account.site_account.edit,component:rN}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.owner_account.site_account.view,component:kN}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.owner_account.edit,component:Kb}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.owner_account.view,component:ay}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.customer_owner_account,component:yy}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.customer_account.self,component:Sy}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.customer_account.create,component:Ky}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.customer_account.edit,component:Ky}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.customer_account.view,component:gw}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.vendor_account.self,component:kM}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.vendor_account.create,component:FM}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.vendor_account.edit,component:FM}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.vendor_account.view,component:KM}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.contacts.self,component:ww}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.contacts.view,component:e_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.contacts.create,component:x_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.contacts.edit,component:x_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.account_contact,component:O_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.sales.self,component:j_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.self,component:A_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.projects.self,component:bF}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.projects.view,component:XF}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.projects.create,component:IP}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.projects.edit,component:IP}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.work_order.self,component:uV}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.work_order.create,component:XV}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.work_order.edit,component:XV}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.work_order.view,component:Hq}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.operations.dispatch.self,component:RL}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.self,component:T_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.self,component:F_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.fleet_family.create,component:Z_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.fleet_family.edit,component:Z_}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.fleet_family.view,component:cS}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.groups.view,component:fS}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.vehicle.view,component:_S}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.kit.view,component:UL}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.groups.create,component:DS}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.kit.create,component:WS}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.kit.edit,component:WS}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.groups.edit,component:DS}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.vehicle.create,component:Ox}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.fleet.vehicle.edit,component:Ox}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.labor.self,component:Ix}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.labor.labor_group.view,component:Ux}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.labor.employee.view,component:Jx}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.labor.labor_group.create,component:pC}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.labor.labor_group.edit,component:pC}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.labor.employee.create,component:VC}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.labor.employee.edit,component:VC}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.self,component:NO}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_packages.create,component:Pk}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_packages.edit,component:Pk}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_packages.view,component:Bk}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_groups.create,component:ej}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_groups.view,component:oj}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_groups.edit,component:ej}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_items.create,component:cI}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_items.edit,component:cI}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_items.view,component:SI}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_kits.create,component:PI}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_kits.edit,component:PI}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.inventory.inventory_kits.view,component:YI}),l.a.createElement(r.Route,{exact:!0,path:"/dashboard/management/inventory/inventory-items/groups/view/",component:GI}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.self,component:$I}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_packages.create,component:sA}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_packages.edit,component:sA}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_groups.create,component:gA}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_groups.edit,component:gA}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_tools.create,component:VA}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_tools.edit,component:VA}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_packages.view,component:KA}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_groups.view,component:XA}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.supply_tools.supply_tools.view,component:iD}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.service.family.create,component:oD}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.service.family.edit,component:oD}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.service.family.view,component:ED}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.service.line_items.view,component:wD}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.service.self,component:xD}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.accounting.self,component:CD}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.accounting.invoicing.self,component:vU}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.accounting.invoicing.create,component:PU}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.accounting.invoicing.edit,component:PU}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.accounting.invoicing.view,component:EB}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.sales.proposal.self,component:kD}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.sales.proposal.create,component:hT}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.sales.proposal.edit,component:hT}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.sales.proposal.view,component:$T}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal.self,component:ZT}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal.family.create,component:sR}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal.family.edit,component:sR}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal.family.view,component:pR}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal.items.create,component:cM}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal.items.edit,component:cM}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal.items.view,component:_M}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal_inventory.view,component:_M}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.management.disposal_inventory.family.view,component:pR}),l.a.createElement(r.Route,{exact:!0,path:zm.dashboard.sales.price_lookup.self,component:xM}))},bB=function(e){Object(u.a)(t,e);var a=Object(p.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.userLogOutAction()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null)}}]),t}(n.Component),NB={userLogOutAction:function(){return Um(),o.push(zm.login),window.location.reload(),{type:"LOGOUT_SUCCESS"}}},yB=Object(Lm.b)(null,NB)(bB),wB=t(246),_B=["component","restricted"],SB=function(e){var a=e.component,t=e.restricted,n=Object(wB.a)(e,_B);return l.a.createElement(r.Route,Object.assign({},n,{render:function(e){return Km()&&t?l.a.createElement(r.Redirect,{to:{pathname:zm.dashboard,state:{from:e.location}}}):l.a.createElement(a,Object.assign({},e,n))}}))},xB=["component"],CB=function(e){var a=e.component,t=Object(wB.a)(e,xB);return l.a.createElement(r.Route,Object.assign({},t,{render:function(e){return Km()?l.a.createElement(a,Object.assign({},e,t)):l.a.createElement(r.Redirect,{to:{pathname:"/",state:{from:e.location}}})}}))},OB=t(1052),kB=t(1067);OB.a({dsn:Xm("REACT_APP_SENTRY_DNS"),tracesSampleRate:1});var jB=function(){return l.a.createElement(kB.a,{fallback:l.a.createElement("p",null,"An error has occurred")},l.a.createElement("div",{id:"app_main",className:"App text-left"},l.a.createElement(r.Router,{history:o,getUserConfirmation:null},l.a.createElement(SB,{restricted:!0,exact:!0,path:zm.login,component:pu}),l.a.createElement(SB,{restricted:!0,exact:!0,path:zm.forget_password,component:hu}),l.a.createElement(SB,{exact:!0,path:zm.logout,component:yB}),l.a.createElement(CB,{path:zm.dashboard.self,component:gB}))))},IB=t(67),AB={key:void 0},DB=[{title:"Dashboard",url:zm.dashboard.self}],TB=Object(IB.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"LOGIN_SUCCESS":return Object(wu.a)({},n);default:return e}},opportunity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"OPPORTUNITY_DETAIL_SUCCESS":return Object(wu.a)({},n);default:return e}},contact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"CONTACT_DETAIL_SUCCESS":return Object(wu.a)({},n);default:return e}},customer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"CUSTOMER_ACCOUNT_DETAIL_SUCCESS":return Object(wu.a)({},n);default:return e}},owner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"CUSTOMER_ACCOUNT_DETAIL_SUCCESS":return Object(wu.a)({},n);default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AB,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"SIDEBAR_KEY":return{key:n};default:return e}},breadcrumb:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DB,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"BREADCRUMB_DATA":return n;default:return e}},global_search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"GLOBAL_SEARCH":return Object(wu.a)({},n);default:return e}},userdata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"USERDATA":return Object(wu.a)({},n);default:return e}},proposal_data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"PROPOSAL_DETAIL_SUCCESS":return Object(wu.a)({},n);default:return e}},project_data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"PROJECT_DETAIL_SUCCESS":return Object(wu.a)({},n);default:return e}},vendor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"VENDOR_ACCOUNT_DETAIL_SUCCESS":return Object(wu.a)({},n);default:return e}}}),RB=function(e,a){return"LOGOUT_SUCCESS"===a.type&&(e=void 0),TB(e,a)},MB=t(696),FB=t(697),PB=t.n(FB),VB=t(300),qB="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||IB.compose,LB={key:"root",storage:PB.a,whitelist:["user"]},UB=Object(VB.a)(LB,RB),BB=Object(IB.createStore)(UB,qB(Object(IB.applyMiddleware)(MB.a))),WB=Object(VB.b)(BB),YB=t(698);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(Lm.a,{store:BB},l.a.createElement(YB.PersistGate,{persistor:WB},l.a.createElement(jB,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[712,1,2]]]);
//# sourceMappingURL=main.af641265.chunk.js.map